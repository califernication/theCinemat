const yL=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}};yL();function Kv(t,e){const r=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return e?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const bL="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wL=Kv(bL);function dS(t){return!!t||t===""}function Yv(t){if(De(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=Ht(n)?TL(n):Yv(n);if(i)for(const a in i)e[a]=i[a]}return e}else{if(Ht(t))return t;if(Dt(t))return t}}const _L=/;(?![^(]*\))/g,xL=/:(.+)/;function TL(t){const e={};return t.split(_L).forEach(r=>{if(r){const n=r.split(xL);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function mn(t){let e="";if(Ht(t))e=t;else if(De(t))for(let r=0;r<t.length;r++){const n=mn(t[r]);n&&(e+=n+" ")}else if(Dt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function SL(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=Sf(t[n],e[n]);return r}function Sf(t,e){if(t===e)return!0;let r=$w(t),n=$w(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=Cc(t),n=Cc(e),r||n)return t===e;if(r=De(t),n=De(e),r||n)return r&&n?SL(t,e):!1;if(r=Dt(t),n=Dt(e),r||n){if(!r||!n)return!1;const i=Object.keys(t).length,a=Object.keys(e).length;if(i!==a)return!1;for(const s in t){const o=t.hasOwnProperty(s),l=e.hasOwnProperty(s);if(o&&!l||!o&&l||!Sf(t[s],e[s]))return!1}}return String(t)===String(e)}function hS(t,e){return t.findIndex(r=>Sf(r,e))}const Si=t=>Ht(t)?t:t==null?"":De(t)||Dt(t)&&(t.toString===gS||!Ge(t.toString))?JSON.stringify(t,fS,2):String(t),fS=(t,e)=>e&&e.__v_isRef?fS(t,e.value):go(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:Ef(e)?{[`Set(${e.size})`]:[...e.values()]}:Dt(e)&&!De(e)&&!mS(e)?String(e):e,yt={},po=[],Ii=()=>{},kL=()=>!1,EL=/^on[^a-z]/,kf=t=>EL.test(t),Xv=t=>t.startsWith("onUpdate:"),hr=Object.assign,Qv=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},CL=Object.prototype.hasOwnProperty,et=(t,e)=>CL.call(t,e),De=Array.isArray,go=t=>hu(t)==="[object Map]",Ef=t=>hu(t)==="[object Set]",$w=t=>hu(t)==="[object Date]",Ge=t=>typeof t=="function",Ht=t=>typeof t=="string",Cc=t=>typeof t=="symbol",Dt=t=>t!==null&&typeof t=="object",pS=t=>Dt(t)&&Ge(t.then)&&Ge(t.catch),gS=Object.prototype.toString,hu=t=>gS.call(t),AL=t=>hu(t).slice(8,-1),mS=t=>hu(t)==="[object Object]",Jv=t=>Ht(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Qd=Kv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Cf=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},IL=/-(\w)/g,sn=Cf(t=>t.replace(IL,(e,r)=>r?r.toUpperCase():"")),PL=/\B([A-Z])/g,rl=Cf(t=>t.replace(PL,"-$1").toLowerCase()),Af=Cf(t=>t.charAt(0).toUpperCase()+t.slice(1)),tg=Cf(t=>t?`on${Af(t)}`:""),Ac=(t,e)=>!Object.is(t,e),Jd=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},yh=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},bh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Vw;const OL=()=>Vw||(Vw=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ui;class vS{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Ui&&(this.parent=Ui,this.index=(Ui.scopes||(Ui.scopes=[])).push(this)-1)}run(e){if(this.active){const r=Ui;try{return Ui=this,e()}finally{Ui=r}}}on(){Ui=this}off(){Ui=this.parent}stop(e){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function DL(t){return new vS(t)}function LL(t,e=Ui){e&&e.active&&e.effects.push(t)}const Zv=t=>{const e=new Set(t);return e.w=0,e.n=0,e},yS=t=>(t.w&ya)>0,bS=t=>(t.n&ya)>0,RL=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ya},ML=t=>{const{deps:e}=t;if(e.length){let r=0;for(let n=0;n<e.length;n++){const i=e[n];yS(i)&&!bS(i)?i.delete(t):e[r++]=i,i.w&=~ya,i.n&=~ya}e.length=r}},lm=new WeakMap;let Gl=0,ya=1;const cm=30;let Ei;const os=Symbol(""),um=Symbol("");class e0{constructor(e,r=null,n){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,LL(this,n)}run(){if(!this.active)return this.fn();let e=Ei,r=ha;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ei,Ei=this,ha=!0,ya=1<<++Gl,Gl<=cm?RL(this):Hw(this),this.fn()}finally{Gl<=cm&&ML(this),ya=1<<--Gl,Ei=this.parent,ha=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ei===this?this.deferStop=!0:this.active&&(Hw(this),this.onStop&&this.onStop(),this.active=!1)}}function Hw(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let ha=!0;const wS=[];function il(){wS.push(ha),ha=!1}function nl(){const t=wS.pop();ha=t===void 0?!0:t}function si(t,e,r){if(ha&&Ei){let n=lm.get(t);n||lm.set(t,n=new Map);let i=n.get(r);i||n.set(r,i=Zv()),_S(i)}}function _S(t,e){let r=!1;Gl<=cm?bS(t)||(t.n|=ya,r=!yS(t)):r=!t.has(Ei),r&&(t.add(Ei),Ei.deps.push(t))}function Pn(t,e,r,n,i,a){const s=lm.get(t);if(!s)return;let o=[];if(e==="clear")o=[...s.values()];else if(r==="length"&&De(t))s.forEach((l,c)=>{(c==="length"||c>=n)&&o.push(l)});else switch(r!==void 0&&o.push(s.get(r)),e){case"add":De(t)?Jv(r)&&o.push(s.get("length")):(o.push(s.get(os)),go(t)&&o.push(s.get(um)));break;case"delete":De(t)||(o.push(s.get(os)),go(t)&&o.push(s.get(um)));break;case"set":go(t)&&o.push(s.get(os));break}if(o.length===1)o[0]&&dm(o[0]);else{const l=[];for(const c of o)c&&l.push(...c);dm(Zv(l))}}function dm(t,e){const r=De(t)?t:[...t];for(const n of r)n.computed&&qw(n);for(const n of r)n.computed||qw(n)}function qw(t,e){(t!==Ei||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const NL=Kv("__proto__,__v_isRef,__isVue"),xS=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Cc)),jL=t0(),FL=t0(!1,!0),BL=t0(!0),Gw=UL();function UL(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const n=at(this);for(let a=0,s=this.length;a<s;a++)si(n,"get",a+"");const i=n[e](...r);return i===-1||i===!1?n[e](...r.map(at)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){il();const n=at(this)[e].apply(this,r);return nl(),n}}),t}function t0(t=!1,e=!1){return function(n,i,a){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&a===(t?e?rR:CS:e?ES:kS).get(n))return n;const s=De(n);if(!t&&s&&et(Gw,i))return Reflect.get(Gw,i,a);const o=Reflect.get(n,i,a);return(Cc(i)?xS.has(i):NL(i))||(t||si(n,"get",i),e)?o:yr(o)?s&&Jv(i)?o:o.value:Dt(o)?t?AS(o):al(o):o}}const zL=TS(),$L=TS(!0);function TS(t=!1){return function(r,n,i,a){let s=r[n];if(Ic(s)&&yr(s)&&!yr(i))return!1;if(!t&&!Ic(i)&&(hm(i)||(i=at(i),s=at(s)),!De(r)&&yr(s)&&!yr(i)))return s.value=i,!0;const o=De(r)&&Jv(n)?Number(n)<r.length:et(r,n),l=Reflect.set(r,n,i,a);return r===at(a)&&(o?Ac(i,s)&&Pn(r,"set",n,i):Pn(r,"add",n,i)),l}}function VL(t,e){const r=et(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&Pn(t,"delete",e,void 0),n}function HL(t,e){const r=Reflect.has(t,e);return(!Cc(e)||!xS.has(e))&&si(t,"has",e),r}function qL(t){return si(t,"iterate",De(t)?"length":os),Reflect.ownKeys(t)}const SS={get:jL,set:zL,deleteProperty:VL,has:HL,ownKeys:qL},GL={get:BL,set(t,e){return!0},deleteProperty(t,e){return!0}},WL=hr({},SS,{get:FL,set:$L}),r0=t=>t,If=t=>Reflect.getPrototypeOf(t);function _d(t,e,r=!1,n=!1){t=t.__v_raw;const i=at(t),a=at(e);r||(e!==a&&si(i,"get",e),si(i,"get",a));const{has:s}=If(i),o=n?r0:r?a0:Pc;if(s.call(i,e))return o(t.get(e));if(s.call(i,a))return o(t.get(a));t!==i&&t.get(e)}function xd(t,e=!1){const r=this.__v_raw,n=at(r),i=at(t);return e||(t!==i&&si(n,"has",t),si(n,"has",i)),t===i?r.has(t):r.has(t)||r.has(i)}function Td(t,e=!1){return t=t.__v_raw,!e&&si(at(t),"iterate",os),Reflect.get(t,"size",t)}function Ww(t){t=at(t);const e=at(this);return If(e).has.call(e,t)||(e.add(t),Pn(e,"add",t,t)),this}function Kw(t,e){e=at(e);const r=at(this),{has:n,get:i}=If(r);let a=n.call(r,t);a||(t=at(t),a=n.call(r,t));const s=i.call(r,t);return r.set(t,e),a?Ac(e,s)&&Pn(r,"set",t,e):Pn(r,"add",t,e),this}function Yw(t){const e=at(this),{has:r,get:n}=If(e);let i=r.call(e,t);i||(t=at(t),i=r.call(e,t)),n&&n.call(e,t);const a=e.delete(t);return i&&Pn(e,"delete",t,void 0),a}function Xw(){const t=at(this),e=t.size!==0,r=t.clear();return e&&Pn(t,"clear",void 0,void 0),r}function Sd(t,e){return function(n,i){const a=this,s=a.__v_raw,o=at(s),l=e?r0:t?a0:Pc;return!t&&si(o,"iterate",os),s.forEach((c,u)=>n.call(i,l(c),l(u),a))}}function kd(t,e,r){return function(...n){const i=this.__v_raw,a=at(i),s=go(a),o=t==="entries"||t===Symbol.iterator&&s,l=t==="keys"&&s,c=i[t](...n),u=r?r0:e?a0:Pc;return!e&&si(a,"iterate",l?um:os),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:o?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Yn(t){return function(...e){return t==="delete"?!1:this}}function KL(){const t={get(a){return _d(this,a)},get size(){return Td(this)},has:xd,add:Ww,set:Kw,delete:Yw,clear:Xw,forEach:Sd(!1,!1)},e={get(a){return _d(this,a,!1,!0)},get size(){return Td(this)},has:xd,add:Ww,set:Kw,delete:Yw,clear:Xw,forEach:Sd(!1,!0)},r={get(a){return _d(this,a,!0)},get size(){return Td(this,!0)},has(a){return xd.call(this,a,!0)},add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear"),forEach:Sd(!0,!1)},n={get(a){return _d(this,a,!0,!0)},get size(){return Td(this,!0)},has(a){return xd.call(this,a,!0)},add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear"),forEach:Sd(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=kd(a,!1,!1),r[a]=kd(a,!0,!1),e[a]=kd(a,!1,!0),n[a]=kd(a,!0,!0)}),[t,r,e,n]}const[YL,XL,QL,JL]=KL();function i0(t,e){const r=e?t?JL:QL:t?XL:YL;return(n,i,a)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(et(r,i)&&i in n?r:n,i,a)}const ZL={get:i0(!1,!1)},eR={get:i0(!1,!0)},tR={get:i0(!0,!1)},kS=new WeakMap,ES=new WeakMap,CS=new WeakMap,rR=new WeakMap;function iR(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nR(t){return t.__v_skip||!Object.isExtensible(t)?0:iR(AL(t))}function al(t){return Ic(t)?t:n0(t,!1,SS,ZL,kS)}function aR(t){return n0(t,!1,WL,eR,ES)}function AS(t){return n0(t,!0,GL,tR,CS)}function n0(t,e,r,n,i){if(!Dt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=i.get(t);if(a)return a;const s=nR(t);if(s===0)return t;const o=new Proxy(t,s===2?n:r);return i.set(t,o),o}function mo(t){return Ic(t)?mo(t.__v_raw):!!(t&&t.__v_isReactive)}function Ic(t){return!!(t&&t.__v_isReadonly)}function hm(t){return!!(t&&t.__v_isShallow)}function IS(t){return mo(t)||Ic(t)}function at(t){const e=t&&t.__v_raw;return e?at(e):t}function PS(t){return yh(t,"__v_skip",!0),t}const Pc=t=>Dt(t)?al(t):t,a0=t=>Dt(t)?AS(t):t;function OS(t){ha&&Ei&&(t=at(t),_S(t.dep||(t.dep=Zv())))}function DS(t,e){t=at(t),t.dep&&dm(t.dep)}function yr(t){return!!(t&&t.__v_isRef===!0)}function vt(t){return RS(t,!1)}function LS(t){return RS(t,!0)}function RS(t,e){return yr(t)?t:new sR(t,e)}class sR{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:at(e),this._value=r?e:Pc(e)}get value(){return OS(this),this._value}set value(e){e=this.__v_isShallow?e:at(e),Ac(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Pc(e),DS(this))}}function ft(t){return yr(t)?t.value:t}const oR={get:(t,e,r)=>ft(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return yr(i)&&!yr(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function MS(t){return mo(t)?t:new Proxy(t,oR)}class lR{constructor(e,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new e0(e,()=>{this._dirty||(this._dirty=!0,DS(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=at(this);return OS(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function cR(t,e,r=!1){let n,i;const a=Ge(t);return a?(n=t,i=Ii):(n=t.get,i=t.set),new lR(n,i,a||!i,r)}function fa(t,e,r,n){let i;try{i=n?t(...n):t()}catch(a){Pf(a,e,r)}return i}function fi(t,e,r,n){if(Ge(t)){const a=fa(t,e,r,n);return a&&pS(a)&&a.catch(s=>{Pf(s,e,r)}),a}const i=[];for(let a=0;a<t.length;a++)i.push(fi(t[a],e,r,n));return i}function Pf(t,e,r,n=!0){const i=e?e.vnode:null;if(e){let a=e.parent;const s=e.proxy,o=r;for(;a;){const c=a.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,s,o)===!1)return}a=a.parent}const l=e.appContext.config.errorHandler;if(l){fa(l,null,10,[t,s,o]);return}}uR(t,r,i,n)}function uR(t,e,r,n=!0){console.error(t)}let wh=!1,fm=!1;const ri=[];let yn=0;const lc=[];let Wl=null,Zs=0;const cc=[];let ra=null,eo=0;const NS=Promise.resolve();let s0=null,pm=null;function o0(t){const e=s0||NS;return t?e.then(this?t.bind(this):t):e}function dR(t){let e=yn+1,r=ri.length;for(;e<r;){const n=e+r>>>1;Oc(ri[n])<t?e=n+1:r=n}return e}function jS(t){(!ri.length||!ri.includes(t,wh&&t.allowRecurse?yn+1:yn))&&t!==pm&&(t.id==null?ri.push(t):ri.splice(dR(t.id),0,t),FS())}function FS(){!wh&&!fm&&(fm=!0,s0=NS.then(zS))}function hR(t){const e=ri.indexOf(t);e>yn&&ri.splice(e,1)}function BS(t,e,r,n){De(t)?r.push(...t):(!e||!e.includes(t,t.allowRecurse?n+1:n))&&r.push(t),FS()}function fR(t){BS(t,Wl,lc,Zs)}function pR(t){BS(t,ra,cc,eo)}function Of(t,e=null){if(lc.length){for(pm=e,Wl=[...new Set(lc)],lc.length=0,Zs=0;Zs<Wl.length;Zs++)Wl[Zs]();Wl=null,Zs=0,pm=null,Of(t,e)}}function US(t){if(Of(),cc.length){const e=[...new Set(cc)];if(cc.length=0,ra){ra.push(...e);return}for(ra=e,ra.sort((r,n)=>Oc(r)-Oc(n)),eo=0;eo<ra.length;eo++)ra[eo]();ra=null,eo=0}}const Oc=t=>t.id==null?1/0:t.id;function zS(t){fm=!1,wh=!0,Of(t),ri.sort((r,n)=>Oc(r)-Oc(n));const e=Ii;try{for(yn=0;yn<ri.length;yn++){const r=ri[yn];r&&r.active!==!1&&fa(r,null,14)}}finally{yn=0,ri.length=0,US(),wh=!1,s0=null,(ri.length||lc.length||cc.length)&&zS(t)}}function gR(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||yt;let i=r;const a=e.startsWith("update:"),s=a&&e.slice(7);if(s&&s in n){const u=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:h}=n[u]||yt;h&&(i=r.map(p=>p.trim())),d&&(i=r.map(bh))}let o,l=n[o=tg(e)]||n[o=tg(sn(e))];!l&&a&&(l=n[o=tg(rl(e))]),l&&fi(l,t,6,i);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,fi(c,t,6,i)}}function $S(t,e,r=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const a=t.emits;let s={},o=!1;if(!Ge(t)){const l=c=>{const u=$S(c,e,!0);u&&(o=!0,hr(s,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!a&&!o?(n.set(t,null),null):(De(a)?a.forEach(l=>s[l]=null):hr(s,a),n.set(t,s),s)}function Df(t,e){return!t||!kf(e)?!1:(e=e.slice(2).replace(/Once$/,""),et(t,e[0].toLowerCase()+e.slice(1))||et(t,rl(e))||et(t,e))}let hi=null,VS=null;function _h(t){const e=hi;return hi=t,VS=t&&t.type.__scopeId||null,e}function Ke(t,e=hi,r){if(!e||t._n)return t;const n=(...i)=>{n._d&&l_(-1);const a=_h(e),s=t(...i);return _h(a),n._d&&l_(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function rg(t){const{type:e,vnode:r,proxy:n,withProxy:i,props:a,propsOptions:[s],slots:o,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:p,ctx:y,inheritAttrs:w}=t;let v,T;const k=_h(t);try{if(r.shapeFlag&4){const E=i||n;v=Vi(u.call(E,E,d,a,p,h,y)),T=l}else{const E=e;v=Vi(E.length>1?E(a,{attrs:l,slots:o,emit:c}):E(a,null)),T=e.props?l:mR(l)}}catch(E){dc.length=0,Pf(E,t,1),v=xe(Pi)}let A=v;if(T&&w!==!1){const E=Object.keys(T),{shapeFlag:I}=A;E.length&&I&7&&(s&&E.some(Xv)&&(T=vR(T,s)),A=On(A,T))}return r.dirs&&(A=On(A),A.dirs=A.dirs?A.dirs.concat(r.dirs):r.dirs),r.transition&&(A.transition=r.transition),v=A,_h(k),v}const mR=t=>{let e;for(const r in t)(r==="class"||r==="style"||kf(r))&&((e||(e={}))[r]=t[r]);return e},vR=(t,e)=>{const r={};for(const n in t)(!Xv(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function yR(t,e,r){const{props:n,children:i,component:a}=t,{props:s,children:o,patchFlag:l}=e,c=a.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Qw(n,s,c):!!s;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(s[h]!==n[h]&&!Df(c,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===s?!1:n?s?Qw(n,s,c):!0:!!s;return!1}function Qw(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(e[a]!==t[a]&&!Df(r,a))return!0}return!1}function bR({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const wR=t=>t.__isSuspense;function _R(t,e){e&&e.pendingBranch?De(t)?e.effects.push(...t):e.effects.push(t):pR(t)}function Xi(t,e){if(er){let r=er.provides;const n=er.parent&&er.parent.provides;n===r&&(r=er.provides=Object.create(n)),r[t]=e}}function pi(t,e,r=!1){const n=er||hi;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return r&&Ge(e)?e.call(n.proxy):e}}function Is(t,e){return l0(t,null,e)}const Jw={};function ls(t,e,r){return l0(t,e,r)}function l0(t,e,{immediate:r,deep:n,flush:i,onTrack:a,onTrigger:s}=yt){const o=er;let l,c=!1,u=!1;if(yr(t)?(l=()=>t.value,c=hm(t)):mo(t)?(l=()=>t,n=!0):De(t)?(u=!0,c=t.some(T=>mo(T)||hm(T)),l=()=>t.map(T=>{if(yr(T))return T.value;if(mo(T))return Za(T);if(Ge(T))return fa(T,o,2)})):Ge(t)?e?l=()=>fa(t,o,2):l=()=>{if(!(o&&o.isUnmounted))return d&&d(),fi(t,o,3,[h])}:l=Ii,e&&n){const T=l;l=()=>Za(T())}let d,h=T=>{d=v.onStop=()=>{fa(T,o,4)}};if(Rc)return h=Ii,e?r&&fi(e,o,3,[l(),u?[]:void 0,h]):l(),Ii;let p=u?[]:Jw;const y=()=>{if(!!v.active)if(e){const T=v.run();(n||c||(u?T.some((k,A)=>Ac(k,p[A])):Ac(T,p)))&&(d&&d(),fi(e,o,3,[T,p===Jw?void 0:p,h]),p=T)}else v.run()};y.allowRecurse=!!e;let w;i==="sync"?w=y:i==="post"?w=()=>Ur(y,o&&o.suspense):w=()=>fR(y);const v=new e0(l,w);return e?r?y():p=v.run():i==="post"?Ur(v.run.bind(v),o&&o.suspense):v.run(),()=>{v.stop(),o&&o.scope&&Qv(o.scope.effects,v)}}function xR(t,e,r){const n=this.proxy,i=Ht(t)?t.includes(".")?HS(n,t):()=>n[t]:t.bind(n,n);let a;Ge(e)?a=e:(a=e.handler,r=e);const s=er;Eo(this);const o=l0(i,a.bind(n),r);return s?Eo(s):cs(),o}function HS(t,e){const r=e.split(".");return()=>{let n=t;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Za(t,e){if(!Dt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),yr(t))Za(t.value,e);else if(De(t))for(let r=0;r<t.length;r++)Za(t[r],e);else if(Ef(t)||go(t))t.forEach(r=>{Za(r,e)});else if(mS(t))for(const r in t)Za(t[r],e);return t}function TR(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ps(()=>{t.isMounted=!0}),Mf(()=>{t.isUnmounting=!0}),t}const ci=[Function,Array],SR={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ci,onEnter:ci,onAfterEnter:ci,onEnterCancelled:ci,onBeforeLeave:ci,onLeave:ci,onAfterLeave:ci,onLeaveCancelled:ci,onBeforeAppear:ci,onAppear:ci,onAfterAppear:ci,onAppearCancelled:ci},setup(t,{slots:e}){const r=lM(),n=TR();let i;return()=>{const a=e.default&&WS(e.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){for(const w of a)if(w.type!==Pi){s=w;break}}const o=at(t),{mode:l}=o;if(n.isLeaving)return ig(s);const c=Zw(s);if(!c)return ig(s);const u=gm(c,o,n,r);mm(c,u);const d=r.subTree,h=d&&Zw(d);let p=!1;const{getTransitionKey:y}=c.type;if(y){const w=y();i===void 0?i=w:w!==i&&(i=w,p=!0)}if(h&&h.type!==Pi&&(!Ya(c,h)||p)){const w=gm(h,o,n,r);if(mm(h,w),l==="out-in")return n.isLeaving=!0,w.afterLeave=()=>{n.isLeaving=!1,r.update()},ig(s);l==="in-out"&&c.type!==Pi&&(w.delayLeave=(v,T,k)=>{const A=GS(n,h);A[String(h.key)]=h,v._leaveCb=()=>{T(),v._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=k})}return s}}},qS=SR;function GS(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function gm(t,e,r,n){const{appear:i,mode:a,persisted:s=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:y,onBeforeAppear:w,onAppear:v,onAfterAppear:T,onAppearCancelled:k}=e,A=String(t.key),E=GS(r,t),I=(D,z)=>{D&&fi(D,n,9,z)},F=(D,z)=>{const M=z[1];I(D,z),De(D)?D.every(U=>U.length<=1)&&M():D.length<=1&&M()},j={mode:a,persisted:s,beforeEnter(D){let z=o;if(!r.isMounted)if(i)z=w||o;else return;D._leaveCb&&D._leaveCb(!0);const M=E[A];M&&Ya(t,M)&&M.el._leaveCb&&M.el._leaveCb(),I(z,[D])},enter(D){let z=l,M=c,U=u;if(!r.isMounted)if(i)z=v||l,M=T||c,U=k||u;else return;let P=!1;const q=D._enterCb=X=>{P||(P=!0,X?I(U,[D]):I(M,[D]),j.delayedLeave&&j.delayedLeave(),D._enterCb=void 0)};z?F(z,[D,q]):q()},leave(D,z){const M=String(t.key);if(D._enterCb&&D._enterCb(!0),r.isUnmounting)return z();I(d,[D]);let U=!1;const P=D._leaveCb=q=>{U||(U=!0,z(),q?I(y,[D]):I(p,[D]),D._leaveCb=void 0,E[M]===t&&delete E[M])};E[M]=t,h?F(h,[D,P]):P()},clone(D){return gm(D,e,r,n)}};return j}function ig(t){if(Lf(t))return t=On(t),t.children=null,t}function Zw(t){return Lf(t)?t.children?t.children[0]:void 0:t}function mm(t,e){t.shapeFlag&6&&t.component?mm(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function WS(t,e=!1,r){let n=[],i=0;for(let a=0;a<t.length;a++){let s=t[a];const o=r==null?s.key:String(r)+String(s.key!=null?s.key:a);s.type===St?(s.patchFlag&128&&i++,n=n.concat(WS(s.children,e,o))):(e||s.type!==Pi)&&n.push(o!=null?On(s,{key:o}):s)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function ii(t){return Ge(t)?{setup:t,name:t.name}:t}const Zd=t=>!!t.type.__asyncLoader,Lf=t=>t.type.__isKeepAlive;function kR(t,e){KS(t,"a",e)}function ER(t,e){KS(t,"da",e)}function KS(t,e,r=er){const n=t.__wdc||(t.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Rf(e,n,r),r){let i=r.parent;for(;i&&i.parent;)Lf(i.parent.vnode)&&CR(n,e,r,i),i=i.parent}}function CR(t,e,r,n){const i=Rf(e,t,n,!0);Nf(()=>{Qv(n[e],i)},r)}function Rf(t,e,r=er,n=!1){if(r){const i=r[t]||(r[t]=[]),a=e.__weh||(e.__weh=(...s)=>{if(r.isUnmounted)return;il(),Eo(r);const o=fi(e,r,t,s);return cs(),nl(),o});return n?i.unshift(a):i.push(a),a}}const Hn=t=>(e,r=er)=>(!Rc||t==="sp")&&Rf(t,e,r),AR=Hn("bm"),Ps=Hn("m"),YS=Hn("bu"),c0=Hn("u"),Mf=Hn("bum"),Nf=Hn("um"),IR=Hn("sp"),PR=Hn("rtg"),OR=Hn("rtc");function DR(t,e=er){Rf("ec",t,e)}function LR(t,e){const r=hi;if(r===null)return t;const n=Ff(r)||r.proxy,i=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[s,o,l,c=yt]=e[a];Ge(s)&&(s={mounted:s,updated:s}),s.deep&&Za(o),i.push({dir:s,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c})}return t}function za(t,e,r,n){const i=t.dirs,a=e&&e.dirs;for(let s=0;s<i.length;s++){const o=i[s];a&&(o.oldValue=a[s].value);let l=o.dir[n];l&&(il(),fi(l,r,8,[t.el,o,t,e]),nl())}}const u0="components",RR="directives";function Dc(t,e){return d0(u0,t,!0,e)||t}const XS=Symbol();function Kl(t){return Ht(t)?d0(u0,t,!1)||t:t||XS}function MR(t){return d0(RR,t)}function d0(t,e,r=!0,n=!1){const i=hi||er;if(i){const a=i.type;if(t===u0){const o=fM(a,!1);if(o&&(o===e||o===sn(e)||o===Af(sn(e))))return a}const s=e_(i[t]||a[t],e)||e_(i.appContext[t],e);return!s&&n?a:s}}function e_(t,e){return t&&(t[e]||t[sn(e)]||t[Af(sn(e))])}function bn(t,e,r,n){let i;const a=r&&r[n];if(De(t)||Ht(t)){i=new Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=e(t[s],s,void 0,a&&a[s])}else if(typeof t=="number"){i=new Array(t);for(let s=0;s<t;s++)i[s]=e(s+1,s,void 0,a&&a[s])}else if(Dt(t))if(t[Symbol.iterator])i=Array.from(t,(s,o)=>e(s,o,void 0,a&&a[o]));else{const s=Object.keys(t);i=new Array(s.length);for(let o=0,l=s.length;o<l;o++){const c=s[o];i[o]=e(t[c],c,o,a&&a[o])}}else i=[];return r&&(r[n]=i),i}const vm=t=>t?ok(t)?Ff(t)||t.proxy:vm(t.parent):null,xh=hr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vm(t.parent),$root:t=>vm(t.root),$emit:t=>t.emit,$options:t=>JS(t),$forceUpdate:t=>t.f||(t.f=()=>jS(t.update)),$nextTick:t=>t.n||(t.n=o0.bind(t.proxy)),$watch:t=>xR.bind(t)}),NR={get({_:t},e){const{ctx:r,setupState:n,data:i,props:a,accessCache:s,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const p=s[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return r[e];case 3:return a[e]}else{if(n!==yt&&et(n,e))return s[e]=1,n[e];if(i!==yt&&et(i,e))return s[e]=2,i[e];if((c=t.propsOptions[0])&&et(c,e))return s[e]=3,a[e];if(r!==yt&&et(r,e))return s[e]=4,r[e];ym&&(s[e]=0)}}const u=xh[e];let d,h;if(u)return e==="$attrs"&&si(t,"get",e),u(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(r!==yt&&et(r,e))return s[e]=4,r[e];if(h=l.config.globalProperties,et(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:i,ctx:a}=t;return i!==yt&&et(i,e)?(i[e]=r,!0):n!==yt&&et(n,e)?(n[e]=r,!0):et(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:i,propsOptions:a}},s){let o;return!!r[s]||t!==yt&&et(t,s)||e!==yt&&et(e,s)||(o=a[0])&&et(o,s)||et(n,s)||et(xh,s)||et(i.config.globalProperties,s)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:et(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};let ym=!0;function jR(t){const e=JS(t),r=t.proxy,n=t.ctx;ym=!1,e.beforeCreate&&t_(e.beforeCreate,t,"bc");const{data:i,computed:a,methods:s,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:y,activated:w,deactivated:v,beforeDestroy:T,beforeUnmount:k,destroyed:A,unmounted:E,render:I,renderTracked:F,renderTriggered:j,errorCaptured:D,serverPrefetch:z,expose:M,inheritAttrs:U,components:P,directives:q,filters:X}=e;if(c&&FR(c,n,null,t.appContext.config.unwrapInjectedRef),s)for(const se in s){const le=s[se];Ge(le)&&(n[se]=le.bind(r))}if(i){const se=i.call(r,r);Dt(se)&&(t.data=al(se))}if(ym=!0,a)for(const se in a){const le=a[se],Re=Ge(le)?le.bind(r,r):Ge(le.get)?le.get.bind(r,r):Ii,Le=!Ge(le)&&Ge(le.set)?le.set.bind(r):Ii,pt=It({get:Re,set:Le});Object.defineProperty(n,se,{enumerable:!0,configurable:!0,get:()=>pt.value,set:it=>pt.value=it})}if(o)for(const se in o)QS(o[se],n,r,se);if(l){const se=Ge(l)?l.call(r):l;Reflect.ownKeys(se).forEach(le=>{Xi(le,se[le])})}u&&t_(u,t,"c");function te(se,le){De(le)?le.forEach(Re=>se(Re.bind(r))):le&&se(le.bind(r))}if(te(AR,d),te(Ps,h),te(YS,p),te(c0,y),te(kR,w),te(ER,v),te(DR,D),te(OR,F),te(PR,j),te(Mf,k),te(Nf,E),te(IR,z),De(M))if(M.length){const se=t.exposed||(t.exposed={});M.forEach(le=>{Object.defineProperty(se,le,{get:()=>r[le],set:Re=>r[le]=Re})})}else t.exposed||(t.exposed={});I&&t.render===Ii&&(t.render=I),U!=null&&(t.inheritAttrs=U),P&&(t.components=P),q&&(t.directives=q)}function FR(t,e,r=Ii,n=!1){De(t)&&(t=bm(t));for(const i in t){const a=t[i];let s;Dt(a)?"default"in a?s=pi(a.from||i,a.default,!0):s=pi(a.from||i):s=pi(a),yr(s)&&n?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function t_(t,e,r){fi(De(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function QS(t,e,r,n){const i=n.includes(".")?HS(r,n):()=>r[n];if(Ht(t)){const a=e[t];Ge(a)&&ls(i,a)}else if(Ge(t))ls(i,t.bind(r));else if(Dt(t))if(De(t))t.forEach(a=>QS(a,e,r,n));else{const a=Ge(t.handler)?t.handler.bind(r):e[t.handler];Ge(a)&&ls(i,a,t)}}function JS(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:s}}=t.appContext,o=a.get(e);let l;return o?l=o:!i.length&&!r&&!n?l=e:(l={},i.length&&i.forEach(c=>Th(l,c,s,!0)),Th(l,e,s)),a.set(e,l),l}function Th(t,e,r,n=!1){const{mixins:i,extends:a}=e;a&&Th(t,a,r,!0),i&&i.forEach(s=>Th(t,s,r,!0));for(const s in e)if(!(n&&s==="expose")){const o=BR[s]||r&&r[s];t[s]=o?o(t[s],e[s]):e[s]}return t}const BR={data:r_,props:Ga,emits:Ga,methods:Ga,computed:Ga,beforeCreate:Or,created:Or,beforeMount:Or,mounted:Or,beforeUpdate:Or,updated:Or,beforeDestroy:Or,beforeUnmount:Or,destroyed:Or,unmounted:Or,activated:Or,deactivated:Or,errorCaptured:Or,serverPrefetch:Or,components:Ga,directives:Ga,watch:zR,provide:r_,inject:UR};function r_(t,e){return e?t?function(){return hr(Ge(t)?t.call(this,this):t,Ge(e)?e.call(this,this):e)}:e:t}function UR(t,e){return Ga(bm(t),bm(e))}function bm(t){if(De(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Or(t,e){return t?[...new Set([].concat(t,e))]:e}function Ga(t,e){return t?hr(hr(Object.create(null),t),e):e}function zR(t,e){if(!t)return e;if(!e)return t;const r=hr(Object.create(null),t);for(const n in e)r[n]=Or(t[n],e[n]);return r}function $R(t,e,r,n=!1){const i={},a={};yh(a,jf,1),t.propsDefaults=Object.create(null),ZS(t,e,i,a);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);r?t.props=n?i:aR(i):t.type.props?t.props=i:t.props=a,t.attrs=a}function VR(t,e,r,n){const{props:i,attrs:a,vnode:{patchFlag:s}}=t,o=at(i),[l]=t.propsOptions;let c=!1;if((n||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Df(t.emitsOptions,h))continue;const p=e[h];if(l)if(et(a,h))p!==a[h]&&(a[h]=p,c=!0);else{const y=sn(h);i[y]=wm(l,o,y,p,t,!1)}else p!==a[h]&&(a[h]=p,c=!0)}}}else{ZS(t,e,i,a)&&(c=!0);let u;for(const d in o)(!e||!et(e,d)&&((u=rl(d))===d||!et(e,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(i[d]=wm(l,o,d,void 0,t,!0)):delete i[d]);if(a!==o)for(const d in a)(!e||!et(e,d)&&!0)&&(delete a[d],c=!0)}c&&Pn(t,"set","$attrs")}function ZS(t,e,r,n){const[i,a]=t.propsOptions;let s=!1,o;if(e)for(let l in e){if(Qd(l))continue;const c=e[l];let u;i&&et(i,u=sn(l))?!a||!a.includes(u)?r[u]=c:(o||(o={}))[u]=c:Df(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,s=!0)}if(a){const l=at(r),c=o||yt;for(let u=0;u<a.length;u++){const d=a[u];r[d]=wm(i,l,d,c[d],t,!et(c,d))}}return s}function wm(t,e,r,n,i,a){const s=t[r];if(s!=null){const o=et(s,"default");if(o&&n===void 0){const l=s.default;if(s.type!==Function&&Ge(l)){const{propsDefaults:c}=i;r in c?n=c[r]:(Eo(i),n=c[r]=l.call(null,e),cs())}else n=l}s[0]&&(a&&!o?n=!1:s[1]&&(n===""||n===rl(r))&&(n=!0))}return n}function ek(t,e,r=!1){const n=e.propsCache,i=n.get(t);if(i)return i;const a=t.props,s={},o=[];let l=!1;if(!Ge(t)){const u=d=>{l=!0;const[h,p]=ek(d,e,!0);hr(s,h),p&&o.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!a&&!l)return n.set(t,po),po;if(De(a))for(let u=0;u<a.length;u++){const d=sn(a[u]);i_(d)&&(s[d]=yt)}else if(a)for(const u in a){const d=sn(u);if(i_(d)){const h=a[u],p=s[d]=De(h)||Ge(h)?{type:h}:h;if(p){const y=s_(Boolean,p.type),w=s_(String,p.type);p[0]=y>-1,p[1]=w<0||y<w,(y>-1||et(p,"default"))&&o.push(d)}}}const c=[s,o];return n.set(t,c),c}function i_(t){return t[0]!=="$"}function n_(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function a_(t,e){return n_(t)===n_(e)}function s_(t,e){return De(e)?e.findIndex(r=>a_(r,t)):Ge(e)&&a_(e,t)?0:-1}const tk=t=>t[0]==="_"||t==="$stable",h0=t=>De(t)?t.map(Vi):[Vi(t)],HR=(t,e,r)=>{if(e._n)return e;const n=Ke((...i)=>h0(e(...i)),r);return n._c=!1,n},rk=(t,e,r)=>{const n=t._ctx;for(const i in t){if(tk(i))continue;const a=t[i];if(Ge(a))e[i]=HR(i,a,n);else if(a!=null){const s=h0(a);e[i]=()=>s}}},ik=(t,e)=>{const r=h0(e);t.slots.default=()=>r},qR=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=at(e),yh(e,"_",r)):rk(e,t.slots={})}else t.slots={},e&&ik(t,e);yh(t.slots,jf,1)},GR=(t,e,r)=>{const{vnode:n,slots:i}=t;let a=!0,s=yt;if(n.shapeFlag&32){const o=e._;o?r&&o===1?a=!1:(hr(i,e),!r&&o===1&&delete i._):(a=!e.$stable,rk(e,i)),s=e}else e&&(ik(t,e),s={default:1});if(a)for(const o in i)!tk(o)&&!(o in s)&&delete i[o]};function nk(){return{app:null,config:{isNativeTag:kL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let WR=0;function KR(t,e){return function(n,i=null){Ge(n)||(n=Object.assign({},n)),i!=null&&!Dt(i)&&(i=null);const a=nk(),s=new Set;let o=!1;const l=a.app={_uid:WR++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:gM,get config(){return a.config},set config(c){},use(c,...u){return s.has(c)||(c&&Ge(c.install)?(s.add(c),c.install(l,...u)):Ge(c)&&(s.add(c),c(l,...u))),l},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),l},component(c,u){return u?(a.components[c]=u,l):a.components[c]},directive(c,u){return u?(a.directives[c]=u,l):a.directives[c]},mount(c,u,d){if(!o){const h=xe(n,i);return h.appContext=a,u&&e?e(h,c):t(h,c,d),o=!0,l._container=c,c.__vue_app__=l,Ff(h.component)||h.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return a.provides[c]=u,l}};return l}}function _m(t,e,r,n,i=!1){if(De(t)){t.forEach((h,p)=>_m(h,e&&(De(e)?e[p]:e),r,n,i));return}if(Zd(n)&&!i)return;const a=n.shapeFlag&4?Ff(n.component)||n.component.proxy:n.el,s=i?null:a,{i:o,r:l}=t,c=e&&e.r,u=o.refs===yt?o.refs={}:o.refs,d=o.setupState;if(c!=null&&c!==l&&(Ht(c)?(u[c]=null,et(d,c)&&(d[c]=null)):yr(c)&&(c.value=null)),Ge(l))fa(l,o,12,[s,u]);else{const h=Ht(l),p=yr(l);if(h||p){const y=()=>{if(t.f){const w=h?u[l]:l.value;i?De(w)&&Qv(w,a):De(w)?w.includes(a)||w.push(a):h?(u[l]=[a],et(d,l)&&(d[l]=u[l])):(l.value=[a],t.k&&(u[t.k]=l.value))}else h?(u[l]=s,et(d,l)&&(d[l]=s)):p&&(l.value=s,t.k&&(u[t.k]=s))};s?(y.id=-1,Ur(y,r)):y()}}}const Ur=_R;function YR(t){return XR(t)}function XR(t,e){const r=OL();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:s,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=Ii,cloneNode:y,insertStaticContent:w}=t,v=(R,V,G,Q=null,Y=null,de=null,ee=!1,ie=null,he=!!V.dynamicChildren)=>{if(R===V)return;R&&!Ya(R,V)&&(Q=be(R),gt(R,Y,de,!0),R=null),V.patchFlag===-2&&(he=!1,V.dynamicChildren=null);const{type:re,ref:Se,shapeFlag:_e}=V;switch(re){case p0:T(R,V,G,Q);break;case Pi:k(R,V,G,Q);break;case eh:R==null&&A(V,G,Q,ee);break;case St:q(R,V,G,Q,Y,de,ee,ie,he);break;default:_e&1?F(R,V,G,Q,Y,de,ee,ie,he):_e&6?X(R,V,G,Q,Y,de,ee,ie,he):(_e&64||_e&128)&&re.process(R,V,G,Q,Y,de,ee,ie,he,st)}Se!=null&&Y&&_m(Se,R&&R.ref,de,V||R,!V)},T=(R,V,G,Q)=>{if(R==null)n(V.el=o(V.children),G,Q);else{const Y=V.el=R.el;V.children!==R.children&&c(Y,V.children)}},k=(R,V,G,Q)=>{R==null?n(V.el=l(V.children||""),G,Q):V.el=R.el},A=(R,V,G,Q)=>{[R.el,R.anchor]=w(R.children,V,G,Q,R.el,R.anchor)},E=({el:R,anchor:V},G,Q)=>{let Y;for(;R&&R!==V;)Y=h(R),n(R,G,Q),R=Y;n(V,G,Q)},I=({el:R,anchor:V})=>{let G;for(;R&&R!==V;)G=h(R),i(R),R=G;i(V)},F=(R,V,G,Q,Y,de,ee,ie,he)=>{ee=ee||V.type==="svg",R==null?j(V,G,Q,Y,de,ee,ie,he):M(R,V,Y,de,ee,ie,he)},j=(R,V,G,Q,Y,de,ee,ie)=>{let he,re;const{type:Se,props:_e,shapeFlag:ke,transition:Pe,patchFlag:We,dirs:rt}=R;if(R.el&&y!==void 0&&We===-1)he=R.el=y(R.el);else{if(he=R.el=s(R.type,de,_e&&_e.is,_e),ke&8?u(he,R.children):ke&16&&z(R.children,he,null,Q,Y,de&&Se!=="foreignObject",ee,ie),rt&&za(R,null,Q,"created"),_e){for(const ht in _e)ht!=="value"&&!Qd(ht)&&a(he,ht,null,_e[ht],de,R.children,Q,Y,ue);"value"in _e&&a(he,"value",null,_e.value),(re=_e.onVnodeBeforeMount)&&Bi(re,Q,R)}D(he,R,R.scopeId,ee,Q)}rt&&za(R,null,Q,"beforeMount");const ot=(!Y||Y&&!Y.pendingBranch)&&Pe&&!Pe.persisted;ot&&Pe.beforeEnter(he),n(he,V,G),((re=_e&&_e.onVnodeMounted)||ot||rt)&&Ur(()=>{re&&Bi(re,Q,R),ot&&Pe.enter(he),rt&&za(R,null,Q,"mounted")},Y)},D=(R,V,G,Q,Y)=>{if(G&&p(R,G),Q)for(let de=0;de<Q.length;de++)p(R,Q[de]);if(Y){let de=Y.subTree;if(V===de){const ee=Y.vnode;D(R,ee,ee.scopeId,ee.slotScopeIds,Y.parent)}}},z=(R,V,G,Q,Y,de,ee,ie,he=0)=>{for(let re=he;re<R.length;re++){const Se=R[re]=ie?ia(R[re]):Vi(R[re]);v(null,Se,V,G,Q,Y,de,ee,ie)}},M=(R,V,G,Q,Y,de,ee)=>{const ie=V.el=R.el;let{patchFlag:he,dynamicChildren:re,dirs:Se}=V;he|=R.patchFlag&16;const _e=R.props||yt,ke=V.props||yt;let Pe;G&&$a(G,!1),(Pe=ke.onVnodeBeforeUpdate)&&Bi(Pe,G,V,R),Se&&za(V,R,G,"beforeUpdate"),G&&$a(G,!0);const We=Y&&V.type!=="foreignObject";if(re?U(R.dynamicChildren,re,ie,G,Q,We,de):ee||Re(R,V,ie,null,G,Q,We,de,!1),he>0){if(he&16)P(ie,V,_e,ke,G,Q,Y);else if(he&2&&_e.class!==ke.class&&a(ie,"class",null,ke.class,Y),he&4&&a(ie,"style",_e.style,ke.style,Y),he&8){const rt=V.dynamicProps;for(let ot=0;ot<rt.length;ot++){const ht=rt[ot],$e=_e[ht],Kn=ke[ht];(Kn!==$e||ht==="value")&&a(ie,ht,$e,Kn,Y,R.children,G,Q,ue)}}he&1&&R.children!==V.children&&u(ie,V.children)}else!ee&&re==null&&P(ie,V,_e,ke,G,Q,Y);((Pe=ke.onVnodeUpdated)||Se)&&Ur(()=>{Pe&&Bi(Pe,G,V,R),Se&&za(V,R,G,"updated")},Q)},U=(R,V,G,Q,Y,de,ee)=>{for(let ie=0;ie<V.length;ie++){const he=R[ie],re=V[ie],Se=he.el&&(he.type===St||!Ya(he,re)||he.shapeFlag&70)?d(he.el):G;v(he,re,Se,null,Q,Y,de,ee,!0)}},P=(R,V,G,Q,Y,de,ee)=>{if(G!==Q){for(const ie in Q){if(Qd(ie))continue;const he=Q[ie],re=G[ie];he!==re&&ie!=="value"&&a(R,ie,re,he,ee,V.children,Y,de,ue)}if(G!==yt)for(const ie in G)!Qd(ie)&&!(ie in Q)&&a(R,ie,G[ie],null,ee,V.children,Y,de,ue);"value"in Q&&a(R,"value",G.value,Q.value)}},q=(R,V,G,Q,Y,de,ee,ie,he)=>{const re=V.el=R?R.el:o(""),Se=V.anchor=R?R.anchor:o("");let{patchFlag:_e,dynamicChildren:ke,slotScopeIds:Pe}=V;Pe&&(ie=ie?ie.concat(Pe):Pe),R==null?(n(re,G,Q),n(Se,G,Q),z(V.children,G,Se,Y,de,ee,ie,he)):_e>0&&_e&64&&ke&&R.dynamicChildren?(U(R.dynamicChildren,ke,G,Y,de,ee,ie),(V.key!=null||Y&&V===Y.subTree)&&f0(R,V,!0)):Re(R,V,G,Se,Y,de,ee,ie,he)},X=(R,V,G,Q,Y,de,ee,ie,he)=>{V.slotScopeIds=ie,R==null?V.shapeFlag&512?Y.ctx.activate(V,G,Q,ee,he):fe(V,G,Q,Y,de,ee,he):te(R,V,he)},fe=(R,V,G,Q,Y,de,ee)=>{const ie=R.component=oM(R,Q,Y);if(Lf(R)&&(ie.ctx.renderer=st),cM(ie),ie.asyncDep){if(Y&&Y.registerDep(ie,se),!R.el){const he=ie.subTree=xe(Pi);k(null,he,V,G)}return}se(ie,R,V,G,Y,de,ee)},te=(R,V,G)=>{const Q=V.component=R.component;if(yR(R,V,G))if(Q.asyncDep&&!Q.asyncResolved){le(Q,V,G);return}else Q.next=V,hR(Q.update),Q.update();else V.el=R.el,Q.vnode=V},se=(R,V,G,Q,Y,de,ee)=>{const ie=()=>{if(R.isMounted){let{next:Se,bu:_e,u:ke,parent:Pe,vnode:We}=R,rt=Se,ot;$a(R,!1),Se?(Se.el=We.el,le(R,Se,ee)):Se=We,_e&&Jd(_e),(ot=Se.props&&Se.props.onVnodeBeforeUpdate)&&Bi(ot,Pe,Se,We),$a(R,!0);const ht=rg(R),$e=R.subTree;R.subTree=ht,v($e,ht,d($e.el),be($e),R,Y,de),Se.el=ht.el,rt===null&&bR(R,ht.el),ke&&Ur(ke,Y),(ot=Se.props&&Se.props.onVnodeUpdated)&&Ur(()=>Bi(ot,Pe,Se,We),Y)}else{let Se;const{el:_e,props:ke}=V,{bm:Pe,m:We,parent:rt}=R,ot=Zd(V);if($a(R,!1),Pe&&Jd(Pe),!ot&&(Se=ke&&ke.onVnodeBeforeMount)&&Bi(Se,rt,V),$a(R,!0),_e&&Ue){const ht=()=>{R.subTree=rg(R),Ue(_e,R.subTree,R,Y,null)};ot?V.type.__asyncLoader().then(()=>!R.isUnmounted&&ht()):ht()}else{const ht=R.subTree=rg(R);v(null,ht,G,Q,R,Y,de),V.el=ht.el}if(We&&Ur(We,Y),!ot&&(Se=ke&&ke.onVnodeMounted)){const ht=V;Ur(()=>Bi(Se,rt,ht),Y)}(V.shapeFlag&256||rt&&Zd(rt.vnode)&&rt.vnode.shapeFlag&256)&&R.a&&Ur(R.a,Y),R.isMounted=!0,V=G=Q=null}},he=R.effect=new e0(ie,()=>jS(re),R.scope),re=R.update=()=>he.run();re.id=R.uid,$a(R,!0),re()},le=(R,V,G)=>{V.component=R;const Q=R.vnode.props;R.vnode=V,R.next=null,VR(R,V.props,Q,G),GR(R,V.children,G),il(),Of(void 0,R.update),nl()},Re=(R,V,G,Q,Y,de,ee,ie,he=!1)=>{const re=R&&R.children,Se=R?R.shapeFlag:0,_e=V.children,{patchFlag:ke,shapeFlag:Pe}=V;if(ke>0){if(ke&128){pt(re,_e,G,Q,Y,de,ee,ie,he);return}else if(ke&256){Le(re,_e,G,Q,Y,de,ee,ie,he);return}}Pe&8?(Se&16&&ue(re,Y,de),_e!==re&&u(G,_e)):Se&16?Pe&16?pt(re,_e,G,Q,Y,de,ee,ie,he):ue(re,Y,de,!0):(Se&8&&u(G,""),Pe&16&&z(_e,G,Q,Y,de,ee,ie,he))},Le=(R,V,G,Q,Y,de,ee,ie,he)=>{R=R||po,V=V||po;const re=R.length,Se=V.length,_e=Math.min(re,Se);let ke;for(ke=0;ke<_e;ke++){const Pe=V[ke]=he?ia(V[ke]):Vi(V[ke]);v(R[ke],Pe,G,null,Y,de,ee,ie,he)}re>Se?ue(R,Y,de,!0,!1,_e):z(V,G,Q,Y,de,ee,ie,he,_e)},pt=(R,V,G,Q,Y,de,ee,ie,he)=>{let re=0;const Se=V.length;let _e=R.length-1,ke=Se-1;for(;re<=_e&&re<=ke;){const Pe=R[re],We=V[re]=he?ia(V[re]):Vi(V[re]);if(Ya(Pe,We))v(Pe,We,G,null,Y,de,ee,ie,he);else break;re++}for(;re<=_e&&re<=ke;){const Pe=R[_e],We=V[ke]=he?ia(V[ke]):Vi(V[ke]);if(Ya(Pe,We))v(Pe,We,G,null,Y,de,ee,ie,he);else break;_e--,ke--}if(re>_e){if(re<=ke){const Pe=ke+1,We=Pe<Se?V[Pe].el:Q;for(;re<=ke;)v(null,V[re]=he?ia(V[re]):Vi(V[re]),G,We,Y,de,ee,ie,he),re++}}else if(re>ke)for(;re<=_e;)gt(R[re],Y,de,!0),re++;else{const Pe=re,We=re,rt=new Map;for(re=We;re<=ke;re++){const kr=V[re]=he?ia(V[re]):Vi(V[re]);kr.key!=null&&rt.set(kr.key,re)}let ot,ht=0;const $e=ke-We+1;let Kn=!1,Zu=0;const Ra=new Array($e);for(re=0;re<$e;re++)Ra[re]=0;for(re=Pe;re<=_e;re++){const kr=R[re];if(ht>=$e){gt(kr,Y,de,!0);continue}let Er;if(kr.key!=null)Er=rt.get(kr.key);else for(ot=We;ot<=ke;ot++)if(Ra[ot-We]===0&&Ya(kr,V[ot])){Er=ot;break}Er===void 0?gt(kr,Y,de,!0):(Ra[Er-We]=re+1,Er>=Zu?Zu=Er:Kn=!0,v(kr,V[Er],G,null,Y,de,ee,ie,he),ht++)}const ed=Kn?QR(Ra):po;for(ot=ed.length-1,re=$e-1;re>=0;re--){const kr=We+re,Er=V[kr],td=kr+1<Se?V[kr+1].el:Q;Ra[re]===0?v(null,Er,G,td,Y,de,ee,ie,he):Kn&&(ot<0||re!==ed[ot]?it(Er,G,td,2):ot--)}}},it=(R,V,G,Q,Y=null)=>{const{el:de,type:ee,transition:ie,children:he,shapeFlag:re}=R;if(re&6){it(R.component.subTree,V,G,Q);return}if(re&128){R.suspense.move(V,G,Q);return}if(re&64){ee.move(R,V,G,st);return}if(ee===St){n(de,V,G);for(let _e=0;_e<he.length;_e++)it(he[_e],V,G,Q);n(R.anchor,V,G);return}if(ee===eh){E(R,V,G);return}if(Q!==2&&re&1&&ie)if(Q===0)ie.beforeEnter(de),n(de,V,G),Ur(()=>ie.enter(de),Y);else{const{leave:_e,delayLeave:ke,afterLeave:Pe}=ie,We=()=>n(de,V,G),rt=()=>{_e(de,()=>{We(),Pe&&Pe()})};ke?ke(de,We,rt):rt()}else n(de,V,G)},gt=(R,V,G,Q=!1,Y=!1)=>{const{type:de,props:ee,ref:ie,children:he,dynamicChildren:re,shapeFlag:Se,patchFlag:_e,dirs:ke}=R;if(ie!=null&&_m(ie,null,G,R,!0),Se&256){V.ctx.deactivate(R);return}const Pe=Se&1&&ke,We=!Zd(R);let rt;if(We&&(rt=ee&&ee.onVnodeBeforeUnmount)&&Bi(rt,V,R),Se&6)ve(R.component,G,Q);else{if(Se&128){R.suspense.unmount(G,Q);return}Pe&&za(R,null,V,"beforeUnmount"),Se&64?R.type.remove(R,V,G,Y,st,Q):re&&(de!==St||_e>0&&_e&64)?ue(re,V,G,!1,!0):(de===St&&_e&384||!Y&&Se&16)&&ue(he,V,G),Q&&Gt(R)}(We&&(rt=ee&&ee.onVnodeUnmounted)||Pe)&&Ur(()=>{rt&&Bi(rt,V,R),Pe&&za(R,null,V,"unmounted")},G)},Gt=R=>{const{type:V,el:G,anchor:Q,transition:Y}=R;if(V===St){K(G,Q);return}if(V===eh){I(R);return}const de=()=>{i(G),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(R.shapeFlag&1&&Y&&!Y.persisted){const{leave:ee,delayLeave:ie}=Y,he=()=>ee(G,de);ie?ie(R.el,de,he):he()}else de()},K=(R,V)=>{let G;for(;R!==V;)G=h(R),i(R),R=G;i(V)},ve=(R,V,G)=>{const{bum:Q,scope:Y,update:de,subTree:ee,um:ie}=R;Q&&Jd(Q),Y.stop(),de&&(de.active=!1,gt(ee,R,V,G)),ie&&Ur(ie,V),Ur(()=>{R.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},ue=(R,V,G,Q=!1,Y=!1,de=0)=>{for(let ee=de;ee<R.length;ee++)gt(R[ee],V,G,Q,Y)},be=R=>R.shapeFlag&6?be(R.component.subTree):R.shapeFlag&128?R.suspense.next():h(R.anchor||R.el),Qe=(R,V,G)=>{R==null?V._vnode&&gt(V._vnode,null,null,!0):v(V._vnode||null,R,V,null,null,null,G),US(),V._vnode=R},st={p:v,um:gt,m:it,r:Gt,mt:fe,mc:z,pc:Re,pbc:U,n:be,o:t};let Be,Ue;return e&&([Be,Ue]=e(st)),{render:Qe,hydrate:Be,createApp:KR(Qe,Be)}}function $a({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function f0(t,e,r=!1){const n=t.children,i=e.children;if(De(n)&&De(i))for(let a=0;a<n.length;a++){const s=n[a];let o=i[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[a]=ia(i[a]),o.el=s.el),r||f0(s,o))}}function QR(t){const e=t.slice(),r=[0];let n,i,a,s,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(i=r[r.length-1],t[i]<c){e[n]=i,r.push(n);continue}for(a=0,s=r.length-1;a<s;)o=a+s>>1,t[r[o]]<c?a=o+1:s=o;c<t[r[a]]&&(a>0&&(e[n]=r[a-1]),r[a]=n)}}for(a=r.length,s=r[a-1];a-- >0;)r[a]=s,s=e[s];return r}const JR=t=>t.__isTeleport,uc=t=>t&&(t.disabled||t.disabled===""),o_=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,xm=(t,e)=>{const r=t&&t.to;return Ht(r)?e?e(r):null:r},ZR={__isTeleport:!0,process(t,e,r,n,i,a,s,o,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:y,createText:w,createComment:v}}=c,T=uc(e.props);let{shapeFlag:k,children:A,dynamicChildren:E}=e;if(t==null){const I=e.el=w(""),F=e.anchor=w("");p(I,r,n),p(F,r,n);const j=e.target=xm(e.props,y),D=e.targetAnchor=w("");j&&(p(D,j),s=s||o_(j));const z=(M,U)=>{k&16&&u(A,M,U,i,a,s,o,l)};T?z(r,F):j&&z(j,D)}else{e.el=t.el;const I=e.anchor=t.anchor,F=e.target=t.target,j=e.targetAnchor=t.targetAnchor,D=uc(t.props),z=D?r:F,M=D?I:j;if(s=s||o_(F),E?(h(t.dynamicChildren,E,z,i,a,s,o),f0(t,e,!0)):l||d(t,e,z,M,i,a,s,o,!1),T)D||Ed(e,r,I,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const U=e.target=xm(e.props,y);U&&Ed(e,U,null,c,0)}else D&&Ed(e,F,j,c,1)}},remove(t,e,r,n,{um:i,o:{remove:a}},s){const{shapeFlag:o,children:l,anchor:c,targetAnchor:u,target:d,props:h}=t;if(d&&a(u),(s||!uc(h))&&(a(c),o&16))for(let p=0;p<l.length;p++){const y=l[p];i(y,e,r,!0,!!y.dynamicChildren)}},move:Ed,hydrate:eM};function Ed(t,e,r,{o:{insert:n},m:i},a=2){a===0&&n(t.targetAnchor,e,r);const{el:s,anchor:o,shapeFlag:l,children:c,props:u}=t,d=a===2;if(d&&n(s,e,r),(!d||uc(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],e,r,2);d&&n(o,e,r)}function eM(t,e,r,n,i,a,{o:{nextSibling:s,parentNode:o,querySelector:l}},c){const u=e.target=xm(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(uc(e.props))e.anchor=c(s(t),e,o(t),r,n,i,a),e.targetAnchor=d;else{e.anchor=s(t);let h=d;for(;h;)if(h=s(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}c(d,e,u,r,n,i,a)}}return e.anchor&&s(e.anchor)}const FJ=ZR,St=Symbol(void 0),p0=Symbol(void 0),Pi=Symbol(void 0),eh=Symbol(void 0),dc=[];let Ai=null;function Ye(t=!1){dc.push(Ai=t?null:[])}function tM(){dc.pop(),Ai=dc[dc.length-1]||null}let Lc=1;function l_(t){Lc+=t}function ak(t){return t.dynamicChildren=Lc>0?Ai||po:null,tM(),Lc>0&&Ai&&Ai.push(t),t}function Kt(t,e,r,n,i,a){return ak(ne(t,e,r,n,i,a,!0))}function zt(t,e,r,n,i){return ak(xe(t,e,r,n,i,!0))}function Tm(t){return t?t.__v_isVNode===!0:!1}function Ya(t,e){return t.type===e.type&&t.key===e.key}const jf="__vInternal",sk=({key:t})=>t!=null?t:null,th=({ref:t,ref_key:e,ref_for:r})=>t!=null?Ht(t)||yr(t)||Ge(t)?{i:hi,r:t,k:e,f:!!r}:t:null;function ne(t,e=null,r=null,n=0,i=null,a=t===St?0:1,s=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&sk(e),ref:e&&th(e),scopeId:VS,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return o?(g0(l,r),a&128&&t.normalize(l)):r&&(l.shapeFlag|=Ht(r)?8:16),Lc>0&&!s&&Ai&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Ai.push(l),l}const xe=rM;function rM(t,e=null,r=null,n=0,i=null,a=!1){if((!t||t===XS)&&(t=Pi),Tm(t)){const o=On(t,e,!0);return r&&g0(o,r),Lc>0&&!a&&Ai&&(o.shapeFlag&6?Ai[Ai.indexOf(t)]=o:Ai.push(o)),o.patchFlag|=-2,o}if(pM(t)&&(t=t.__vccOpts),e){e=iM(e);let{class:o,style:l}=e;o&&!Ht(o)&&(e.class=mn(o)),Dt(l)&&(IS(l)&&!De(l)&&(l=hr({},l)),e.style=Yv(l))}const s=Ht(t)?1:wR(t)?128:JR(t)?64:Dt(t)?4:Ge(t)?2:0;return ne(t,e,r,n,i,s,a,!0)}function iM(t){return t?IS(t)||jf in t?hr({},t):t:null}function On(t,e,r=!1){const{props:n,ref:i,patchFlag:a,children:s}=t,o=e?nM(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&sk(o),ref:e&&e.ref?r&&i?De(i)?i.concat(th(e)):[i,th(e)]:th(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==St?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&On(t.ssContent),ssFallback:t.ssFallback&&On(t.ssFallback),el:t.el,anchor:t.anchor}}function Os(t=" ",e=0){return xe(p0,null,t,e)}function fu(t,e){const r=xe(eh,null,t);return r.staticCount=e,r}function BJ(t="",e=!1){return e?(Ye(),zt(Pi,null,t)):xe(Pi,null,t)}function Vi(t){return t==null||typeof t=="boolean"?xe(Pi):De(t)?xe(St,null,t.slice()):typeof t=="object"?ia(t):xe(p0,null,String(t))}function ia(t){return t.el===null||t.memo?t:On(t)}function g0(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(De(e))r=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),g0(t,i()),i._c&&(i._d=!0));return}else{r=32;const i=e._;!i&&!(jf in e)?e._ctx=hi:i===3&&hi&&(hi.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ge(e)?(e={default:e,_ctx:hi},r=32):(e=String(e),n&64?(r=16,e=[Os(e)]):r=8);t.children=e,t.shapeFlag|=r}function nM(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=mn([e.class,n.class]));else if(i==="style")e.style=Yv([e.style,n.style]);else if(kf(i)){const a=e[i],s=n[i];s&&a!==s&&!(De(a)&&a.includes(s))&&(e[i]=a?[].concat(a,s):s)}else i!==""&&(e[i]=n[i])}return e}function Bi(t,e,r,n=null){fi(t,e,7,[r,n])}const aM=nk();let sM=0;function oM(t,e,r){const n=t.type,i=(e?e.appContext:t.appContext)||aM,a={uid:sM++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new vS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ek(n,i),emitsOptions:$S(n,i),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:n.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=gR.bind(null,a),t.ce&&t.ce(a),a}let er=null;const lM=()=>er||hi,Eo=t=>{er=t,t.scope.on()},cs=()=>{er&&er.scope.off(),er=null};function ok(t){return t.vnode.shapeFlag&4}let Rc=!1;function cM(t,e=!1){Rc=e;const{props:r,children:n}=t.vnode,i=ok(t);$R(t,r,i,e),qR(t,n);const a=i?uM(t,e):void 0;return Rc=!1,a}function uM(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=PS(new Proxy(t.ctx,NR));const{setup:n}=r;if(n){const i=t.setupContext=n.length>1?hM(t):null;Eo(t),il();const a=fa(n,t,0,[t.props,i]);if(nl(),cs(),pS(a)){if(a.then(cs,cs),e)return a.then(s=>{c_(t,s,e)}).catch(s=>{Pf(s,t,0)});t.asyncDep=a}else c_(t,a,e)}else lk(t,e)}function c_(t,e,r){Ge(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Dt(e)&&(t.setupState=MS(e)),lk(t,r)}let u_;function lk(t,e,r){const n=t.type;if(!t.render){if(!e&&u_&&!n.render){const i=n.template;if(i){const{isCustomElement:a,compilerOptions:s}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=hr(hr({isCustomElement:a,delimiters:o},s),l);n.render=u_(i,c)}}t.render=n.render||Ii}Eo(t),il(),jR(t),nl(),cs()}function dM(t){return new Proxy(t.attrs,{get(e,r){return si(t,"get","$attrs"),e[r]}})}function hM(t){const e=n=>{t.exposed=n||{}};let r;return{get attrs(){return r||(r=dM(t))},slots:t.slots,emit:t.emit,expose:e}}function Ff(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(MS(PS(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in xh)return xh[r](t)}}))}function fM(t,e=!0){return Ge(t)?t.displayName||t.name:t.name||e&&t.__name}function pM(t){return Ge(t)&&"__vccOpts"in t}const It=(t,e)=>cR(t,e,Rc);function lt(t,e,r){const n=arguments.length;return n===2?Dt(e)&&!De(e)?Tm(e)?xe(t,null,[e]):xe(t,e):xe(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Tm(r)&&(r=[r]),xe(t,e,r))}const gM="3.2.37",mM="http://www.w3.org/2000/svg",Xa=typeof document!="undefined"?document:null,d_=Xa&&Xa.createElement("template"),vM={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e?Xa.createElementNS(mM,t):Xa.createElement(t,r?{is:r}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>Xa.createTextNode(t),createComment:t=>Xa.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xa.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,r,n,i,a){const s=r?r.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{d_.innerHTML=n?`<svg>${t}</svg>`:t;const o=d_.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[s?s.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function yM(t,e,r){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function bM(t,e,r){const n=t.style,i=Ht(r);if(r&&!i){for(const a in r)Sm(n,a,r[a]);if(e&&!Ht(e))for(const a in e)r[a]==null&&Sm(n,a,"")}else{const a=n.display;i?e!==r&&(n.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=a)}}const h_=/\s*!important$/;function Sm(t,e,r){if(De(r))r.forEach(n=>Sm(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=wM(t,e);h_.test(r)?t.setProperty(rl(n),r.replace(h_,""),"important"):t[n]=r}}const f_=["Webkit","Moz","ms"],ng={};function wM(t,e){const r=ng[e];if(r)return r;let n=sn(e);if(n!=="filter"&&n in t)return ng[e]=n;n=Af(n);for(let i=0;i<f_.length;i++){const a=f_[i]+n;if(a in t)return ng[e]=a}return e}const p_="http://www.w3.org/1999/xlink";function _M(t,e,r,n,i){if(n&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(p_,e.slice(6,e.length)):t.setAttributeNS(p_,e,r);else{const a=wL(e);r==null||a&&!dS(r)?t.removeAttribute(e):t.setAttribute(e,a?"":r)}}function xM(t,e,r,n,i,a,s){if(e==="innerHTML"||e==="textContent"){n&&s(n,i,a),t[e]=r==null?"":r;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=r;const l=r==null?"":r;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),r==null&&t.removeAttribute(e);return}let o=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=dS(r):r==null&&l==="string"?(r="",o=!0):l==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(e)}const[ck,TM]=(()=>{let t=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(r&&Number(r[1])<=53)}return[t,e]})();let km=0;const SM=Promise.resolve(),kM=()=>{km=0},EM=()=>km||(SM.then(kM),km=ck());function Qa(t,e,r,n){t.addEventListener(e,r,n)}function CM(t,e,r,n){t.removeEventListener(e,r,n)}function AM(t,e,r,n,i=null){const a=t._vei||(t._vei={}),s=a[e];if(n&&s)s.value=n;else{const[o,l]=IM(e);if(n){const c=a[e]=PM(n,i);Qa(t,o,c,l)}else s&&(CM(t,o,s,l),a[e]=void 0)}}const g_=/(?:Once|Passive|Capture)$/;function IM(t){let e;if(g_.test(t)){e={};let r;for(;r=t.match(g_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[rl(t.slice(2)),e]}function PM(t,e){const r=n=>{const i=n.timeStamp||ck();(TM||i>=r.attached-1)&&fi(OM(n,r.value),e,5,[n])};return r.value=t,r.attached=EM(),r}function OM(t,e){if(De(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const m_=/^on[a-z]/,DM=(t,e,r,n,i=!1,a,s,o,l)=>{e==="class"?yM(t,n,i):e==="style"?bM(t,r,n):kf(e)?Xv(e)||AM(t,e,r,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LM(t,e,n,i))?xM(t,e,n,a,s,o,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),_M(t,e,n,i))};function LM(t,e,r,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&m_.test(e)&&Ge(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||m_.test(e)&&Ht(r)?!1:e in t}const Xn="transition",Dl="animation",ao=(t,{slots:e})=>lt(qS,RM(t),e);ao.displayName="Transition";const uk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ao.props=hr({},qS.props,uk);const Va=(t,e=[])=>{De(t)?t.forEach(r=>r(...e)):t&&t(...e)},v_=t=>t?De(t)?t.some(e=>e.length>1):t.length>1:!1;function RM(t){const e={};for(const P in t)P in uk||(e[P]=t[P]);if(t.css===!1)return e;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:s=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=a,appearActiveClass:c=s,appearToClass:u=o,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,y=MM(i),w=y&&y[0],v=y&&y[1],{onBeforeEnter:T,onEnter:k,onEnterCancelled:A,onLeave:E,onLeaveCancelled:I,onBeforeAppear:F=T,onAppear:j=k,onAppearCancelled:D=A}=e,z=(P,q,X)=>{Ha(P,q?u:o),Ha(P,q?c:s),X&&X()},M=(P,q)=>{P._isLeaving=!1,Ha(P,d),Ha(P,p),Ha(P,h),q&&q()},U=P=>(q,X)=>{const fe=P?j:k,te=()=>z(q,P,X);Va(fe,[q,te]),y_(()=>{Ha(q,P?l:a),Qn(q,P?u:o),v_(fe)||b_(q,n,w,te)})};return hr(e,{onBeforeEnter(P){Va(T,[P]),Qn(P,a),Qn(P,s)},onBeforeAppear(P){Va(F,[P]),Qn(P,l),Qn(P,c)},onEnter:U(!1),onAppear:U(!0),onLeave(P,q){P._isLeaving=!0;const X=()=>M(P,q);Qn(P,d),FM(),Qn(P,h),y_(()=>{!P._isLeaving||(Ha(P,d),Qn(P,p),v_(E)||b_(P,n,v,X))}),Va(E,[P,X])},onEnterCancelled(P){z(P,!1),Va(A,[P])},onAppearCancelled(P){z(P,!0),Va(D,[P])},onLeaveCancelled(P){M(P),Va(I,[P])}})}function MM(t){if(t==null)return null;if(Dt(t))return[ag(t.enter),ag(t.leave)];{const e=ag(t);return[e,e]}}function ag(t){return bh(t)}function Qn(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t._vtc||(t._vtc=new Set)).add(e)}function Ha(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:r}=t;r&&(r.delete(e),r.size||(t._vtc=void 0))}function y_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let NM=0;function b_(t,e,r,n){const i=t._endId=++NM,a=()=>{i===t._endId&&n()};if(r)return setTimeout(a,r);const{type:s,timeout:o,propCount:l}=jM(t,e);if(!s)return n();const c=s+"end";let u=0;const d=()=>{t.removeEventListener(c,h),a()},h=p=>{p.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),t.addEventListener(c,h)}function jM(t,e){const r=window.getComputedStyle(t),n=y=>(r[y]||"").split(", "),i=n(Xn+"Delay"),a=n(Xn+"Duration"),s=w_(i,a),o=n(Dl+"Delay"),l=n(Dl+"Duration"),c=w_(o,l);let u=null,d=0,h=0;e===Xn?s>0&&(u=Xn,d=s,h=a.length):e===Dl?c>0&&(u=Dl,d=c,h=l.length):(d=Math.max(s,c),u=d>0?s>c?Xn:Dl:null,h=u?u===Xn?a.length:l.length:0);const p=u===Xn&&/\b(transform|all)(,|$)/.test(r[Xn+"Property"]);return{type:u,timeout:d,propCount:h,hasTransform:p}}function w_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>__(r)+__(t[n])))}function __(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function FM(){return document.body.offsetHeight}const Sh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return De(e)?r=>Jd(e,r):e};function BM(t){t.target.composing=!0}function x_(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const UJ={created(t,{modifiers:{lazy:e,trim:r,number:n}},i){t._assign=Sh(i);const a=n||i.props&&i.props.type==="number";Qa(t,e?"change":"input",s=>{if(s.target.composing)return;let o=t.value;r&&(o=o.trim()),a&&(o=bh(o)),t._assign(o)}),r&&Qa(t,"change",()=>{t.value=t.value.trim()}),e||(Qa(t,"compositionstart",BM),Qa(t,"compositionend",x_),Qa(t,"change",x_))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:r,trim:n,number:i}},a){if(t._assign=Sh(a),t.composing||document.activeElement===t&&t.type!=="range"&&(r||n&&t.value.trim()===e||(i||t.type==="number")&&bh(t.value)===e))return;const s=e==null?"":e;t.value!==s&&(t.value=s)}},zJ={deep:!0,created(t,e,r){t._assign=Sh(r),Qa(t,"change",()=>{const n=t._modelValue,i=UM(t),a=t.checked,s=t._assign;if(De(n)){const o=hS(n,i),l=o!==-1;if(a&&!l)s(n.concat(i));else if(!a&&l){const c=[...n];c.splice(o,1),s(c)}}else if(Ef(n)){const o=new Set(n);a?o.add(i):o.delete(i),s(o)}else s(dk(t,a))})},mounted:T_,beforeUpdate(t,e,r){t._assign=Sh(r),T_(t,e,r)}};function T_(t,{value:e,oldValue:r},n){t._modelValue=e,De(e)?t.checked=hS(e,n.props.value)>-1:Ef(e)?t.checked=e.has(n.props.value):e!==r&&(t.checked=Sf(e,dk(t,!0)))}function UM(t){return"_value"in t?t._value:t.value}function dk(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const zM=["ctrl","shift","alt","meta"],$M={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>zM.some(r=>t[`${r}Key`]&&!e.includes(r))},$J=(t,e)=>(r,...n)=>{for(let i=0;i<e.length;i++){const a=$M[e[i]];if(a&&a(r,e))return}return t(r,...n)},VM=hr({patchProp:DM},vM);let S_;function HM(){return S_||(S_=YR(VM))}const qM=(...t)=>{const e=HM().createApp(...t),{mount:r}=e;return e.mount=n=>{const i=GM(n);if(!i)return;const a=e._component;!Ge(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const s=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function GM(t){return Ht(t)?document.querySelector(t):t}function WM(){return hk().__VUE_DEVTOOLS_GLOBAL_HOOK__}function hk(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const KM=typeof Proxy=="function",YM="devtools-plugin:setup",XM="plugin:settings:set";let $s,Em;function QM(){var t;return $s!==void 0||(typeof window!="undefined"&&window.performance?($s=!0,Em=window.performance):typeof global!="undefined"&&((t=global.perf_hooks)===null||t===void 0?void 0:t.performance)?($s=!0,Em=global.perf_hooks.performance):$s=!1),$s}function JM(){return QM()?Em.now():Date.now()}class ZM{constructor(e,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=r;const n={};if(e.settings)for(const s in e.settings){const o=e.settings[s];n[s]=o.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let a=Object.assign({},n);try{const s=localStorage.getItem(i),o=JSON.parse(s);Object.assign(a,o)}catch{}this.fallbacks={getSettings(){return a},setSettings(s){try{localStorage.setItem(i,JSON.stringify(s))}catch{}a=s},now(){return JM()}},r&&r.on(XM,(s,o)=>{s===this.plugin.id&&this.fallbacks.setSettings(o)}),this.proxiedOn=new Proxy({},{get:(s,o)=>this.target?this.target.on[o]:(...l)=>{this.onQueue.push({method:o,args:l})}}),this.proxiedTarget=new Proxy({},{get:(s,o)=>this.target?this.target[o]:o==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(o)?(...l)=>(this.targetQueue.push({method:o,args:l,resolve:()=>{}}),this.fallbacks[o](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:o,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function eN(t,e){const r=t,n=hk(),i=WM(),a=KM&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!a))i.emit(YM,t,e);else{const s=a?new ZM(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:e,proxy:s}),s&&e(s.proxiedTarget)}}/*!
  * vue-router v4.0.16
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const fk=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",sl=t=>fk?Symbol(t):"_vr_"+t,tN=sl("rvlm"),k_=sl("rvd"),m0=sl("r"),pk=sl("rl"),Cm=sl("rvl"),to=typeof window!="undefined";function rN(t){return t.__esModule||fk&&t[Symbol.toStringTag]==="Module"}const mt=Object.assign;function sg(t,e){const r={};for(const n in e){const i=e[n];r[n]=Array.isArray(i)?i.map(t):t(i)}return r}const hc=()=>{},iN=/\/$/,nN=t=>t.replace(iN,"");function og(t,e,r="/"){let n,i={},a="",s="";const o=e.indexOf("?"),l=e.indexOf("#",o>-1?o:0);return o>-1&&(n=e.slice(0,o),a=e.slice(o+1,l>-1?l:e.length),i=t(a)),l>-1&&(n=n||e.slice(0,l),s=e.slice(l,e.length)),n=lN(n!=null?n:e,r),{fullPath:n+(a&&"?")+a+s,path:n,query:i,hash:s}}function aN(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function E_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function sN(t,e,r){const n=e.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Co(e.matched[n],r.matched[i])&&gk(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function Co(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function gk(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!oN(t[r],e[r]))return!1;return!0}function oN(t,e){return Array.isArray(t)?C_(t,e):Array.isArray(e)?C_(e,t):t===e}function C_(t,e){return Array.isArray(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function lN(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/");let i=r.length-1,a,s;for(a=0;a<n.length;a++)if(s=n[a],!(i===1||s==="."))if(s==="..")i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var Mc;(function(t){t.pop="pop",t.push="push"})(Mc||(Mc={}));var fc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(fc||(fc={}));function cN(t){if(!t)if(to){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),nN(t)}const uN=/^[^#]+#/;function dN(t,e){return t.replace(uN,"#")+e}function hN(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Bf=()=>({left:window.pageXOffset,top:window.pageYOffset});function fN(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;e=hN(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function A_(t,e){return(history.state?history.state.position-e:-1)+t}const Am=new Map;function pN(t,e){Am.set(t,e)}function gN(t){const e=Am.get(t);return Am.delete(t),e}let mN=()=>location.protocol+"//"+location.host;function mk(t,e){const{pathname:r,search:n,hash:i}=e,a=t.indexOf("#");if(a>-1){let o=i.includes(t.slice(a))?t.slice(a).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),E_(l,"")}return E_(r,t)+n+i}function vN(t,e,r,n){let i=[],a=[],s=null;const o=({state:h})=>{const p=mk(t,location),y=r.value,w=e.value;let v=0;if(h){if(r.value=p,e.value=h,s&&s===y){s=null;return}v=w?h.position-w.position:0}else n(p);i.forEach(T=>{T(r.value,y,{delta:v,type:Mc.pop,direction:v?v>0?fc.forward:fc.back:fc.unknown})})};function l(){s=r.value}function c(h){i.push(h);const p=()=>{const y=i.indexOf(h);y>-1&&i.splice(y,1)};return a.push(p),p}function u(){const{history:h}=window;!h.state||h.replaceState(mt({},h.state,{scroll:Bf()}),"")}function d(){for(const h of a)h();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:d}}function I_(t,e,r,n=!1,i=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:i?Bf():null}}function yN(t){const{history:e,location:r}=window,n={value:mk(t,r)},i={value:e.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(l,c,u){const d=t.indexOf("#"),h=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:mN()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(p){console.error(p),r[u?"replace":"assign"](h)}}function s(l,c){const u=mt({},e.state,I_(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});a(l,u,!0),n.value=l}function o(l,c){const u=mt({},i.value,e.state,{forward:l,scroll:Bf()});a(u.current,u,!0);const d=mt({},I_(n.value,l,null),{position:u.position+1},c);a(l,d,!1),n.value=l}return{location:n,state:i,push:o,replace:s}}function bN(t){t=cN(t);const e=yN(t),r=vN(t,e.state,e.location,e.replace);function n(a,s=!0){s||r.pauseListeners(),history.go(a)}const i=mt({location:"",base:t,go:n,createHref:dN.bind(null,t)},e,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function wN(t){return typeof t=="string"||t&&typeof t=="object"}function vk(t){return typeof t=="string"||typeof t=="symbol"}const Jn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},yk=sl("nf");var P_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(P_||(P_={}));function Ao(t,e){return mt(new Error,{type:t,[yk]:!0},e)}function Zn(t,e){return t instanceof Error&&yk in t&&(e==null||!!(t.type&e))}const O_="[^/]+?",_N={sensitive:!1,strict:!1,start:!0,end:!0},xN=/[.+*?^${}()[\]/\\]/g;function TN(t,e){const r=mt({},_N,e),n=[];let i=r.start?"^":"";const a=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const h=c[d];let p=40+(r.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(xN,"\\$&"),p+=40;else if(h.type===1){const{value:y,repeatable:w,optional:v,regexp:T}=h;a.push({name:y,repeatable:w,optional:v});const k=T||O_;if(k!==O_){p+=10;try{new RegExp(`(${k})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${y}" (${k}): `+E.message)}}let A=w?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;d||(A=v&&c.length<2?`(?:/${A})`:"/"+A),v&&(A+="?"),i+=A,p+=20,v&&(p+=-8),w&&(p+=-20),k===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const s=new RegExp(i,r.sensitive?"":"i");function o(c){const u=c.match(s),d={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",y=a[h-1];d[y.name]=p&&y.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:y,repeatable:w,optional:v}=p,T=y in c?c[y]:"";if(Array.isArray(T)&&!w)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const k=Array.isArray(T)?T.join("/"):T;if(!k)if(v)h.length<2&&t.length>1&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${y}"`);u+=k}}return u}return{re:s,score:n,keys:a,parse:o,stringify:l}}function SN(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function kN(t,e){let r=0;const n=t.score,i=e.score;for(;r<n.length&&r<i.length;){const a=SN(n[r],i[r]);if(a)return a;r++}if(Math.abs(i.length-n.length)===1){if(D_(n))return 1;if(D_(i))return-1}return i.length-n.length}function D_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const EN={type:0,value:""},CN=/[a-zA-Z0-9_]/;function AN(t){if(!t)return[[]];if(t==="/")return[[EN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const i=[];let a;function s(){a&&i.push(a),a=[]}let o=0,l,c="",u="";function d(){!c||(r===0?a.push({type:0,value:c}):r===1||r===2||r===3?(a.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),s()):l===":"?(d(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:CN.test(l)?h():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),s(),i}function IN(t,e,r){const n=TN(AN(t.path),r),i=mt(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function PN(t,e){const r=[],n=new Map;e=R_({strict:!1,end:!0,sensitive:!1},e);function i(u){return n.get(u)}function a(u,d,h){const p=!h,y=DN(u);y.aliasOf=h&&h.record;const w=R_(e,u),v=[y];if("alias"in u){const A=typeof u.alias=="string"?[u.alias]:u.alias;for(const E of A)v.push(mt({},y,{components:h?h.record.components:y.components,path:E,aliasOf:h?h.record:y}))}let T,k;for(const A of v){const{path:E}=A;if(d&&E[0]!=="/"){const I=d.record.path,F=I[I.length-1]==="/"?"":"/";A.path=d.record.path+(E&&F+E)}if(T=IN(A,d,w),h?h.alias.push(T):(k=k||T,k!==T&&k.alias.push(T),p&&u.name&&!L_(T)&&s(u.name)),"children"in y){const I=y.children;for(let F=0;F<I.length;F++)a(I[F],T,h&&h.children[F])}h=h||T,l(T)}return k?()=>{s(k)}:hc}function s(u){if(vk(u)){const d=n.get(u);d&&(n.delete(u),r.splice(r.indexOf(d),1),d.children.forEach(s),d.alias.forEach(s))}else{const d=r.indexOf(u);d>-1&&(r.splice(d,1),u.record.name&&n.delete(u.record.name),u.children.forEach(s),u.alias.forEach(s))}}function o(){return r}function l(u){let d=0;for(;d<r.length&&kN(u,r[d])>=0&&(u.record.path!==r[d].record.path||!bk(u,r[d]));)d++;r.splice(d,0,u),u.record.name&&!L_(u)&&n.set(u.record.name,u)}function c(u,d){let h,p={},y,w;if("name"in u&&u.name){if(h=n.get(u.name),!h)throw Ao(1,{location:u});w=h.record.name,p=mt(ON(d.params,h.keys.filter(k=>!k.optional).map(k=>k.name)),u.params),y=h.stringify(p)}else if("path"in u)y=u.path,h=r.find(k=>k.re.test(y)),h&&(p=h.parse(y),w=h.record.name);else{if(h=d.name?n.get(d.name):r.find(k=>k.re.test(d.path)),!h)throw Ao(1,{location:u,currentLocation:d});w=h.record.name,p=mt({},d.params,u.params),y=h.stringify(p)}const v=[];let T=h;for(;T;)v.unshift(T.record),T=T.parent;return{name:w,path:y,params:p,matched:v,meta:RN(v)}}return t.forEach(u=>a(u)),{addRoute:a,resolve:c,removeRoute:s,getRoutes:o,getRecordMatcher:i}}function ON(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function DN(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:LN(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function LN(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="boolean"?r:r[n];return e}function L_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function RN(t){return t.reduce((e,r)=>mt(e,r.meta),{})}function R_(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function bk(t,e){return e.children.some(r=>r===t||bk(t,r))}const wk=/#/g,MN=/&/g,NN=/\//g,jN=/=/g,FN=/\?/g,_k=/\+/g,BN=/%5B/g,UN=/%5D/g,xk=/%5E/g,zN=/%60/g,Tk=/%7B/g,$N=/%7C/g,Sk=/%7D/g,VN=/%20/g;function v0(t){return encodeURI(""+t).replace($N,"|").replace(BN,"[").replace(UN,"]")}function HN(t){return v0(t).replace(Tk,"{").replace(Sk,"}").replace(xk,"^")}function Im(t){return v0(t).replace(_k,"%2B").replace(VN,"+").replace(wk,"%23").replace(MN,"%26").replace(zN,"`").replace(Tk,"{").replace(Sk,"}").replace(xk,"^")}function qN(t){return Im(t).replace(jN,"%3D")}function GN(t){return v0(t).replace(wk,"%23").replace(FN,"%3F")}function WN(t){return t==null?"":GN(t).replace(NN,"%2F")}function kh(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function KN(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(_k," "),s=a.indexOf("="),o=kh(s<0?a:a.slice(0,s)),l=s<0?null:kh(a.slice(s+1));if(o in e){let c=e[o];Array.isArray(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function M_(t){let e="";for(let r in t){const n=t[r];if(r=qN(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(Array.isArray(n)?n.map(a=>a&&Im(a)):[n&&Im(n)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+r,a!=null&&(e+="="+a))})}return e}function YN(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=Array.isArray(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}function Ll(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function r(){t=[]}return{add:e,list:()=>t,reset:r}}function na(t,e,r,n,i){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,o)=>{const l=d=>{d===!1?o(Ao(4,{from:r,to:e})):d instanceof Error?o(d):wN(d)?o(Ao(2,{from:e,to:d})):(a&&n.enterCallbacks[i]===a&&typeof d=="function"&&a.push(d),s())},c=t.call(n&&n.instances[i],e,r,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(d=>o(d))})}function lg(t,e,r,n){const i=[];for(const a of t)for(const s in a.components){let o=a.components[s];if(!(e!=="beforeRouteEnter"&&!a.instances[s]))if(XN(o)){const c=(o.__vccOpts||o)[e];c&&i.push(na(c,r,n,a,s))}else{let l=o();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${a.path}"`));const u=rN(c)?c.default:c;a.components[s]=u;const h=(u.__vccOpts||u)[e];return h&&na(h,r,n,a,s)()}))}}return i}function XN(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function N_(t){const e=pi(m0),r=pi(pk),n=It(()=>e.resolve(ft(t.to))),i=It(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const h=d.findIndex(Co.bind(null,u));if(h>-1)return h;const p=j_(l[c-2]);return c>1&&j_(u)===p&&d[d.length-1].path!==p?d.findIndex(Co.bind(null,l[c-2])):h}),a=It(()=>i.value>-1&&ej(r.params,n.value.params)),s=It(()=>i.value>-1&&i.value===r.matched.length-1&&gk(r.params,n.value.params));function o(l={}){return ZN(l)?e[ft(t.replace)?"replace":"push"](ft(t.to)).catch(hc):Promise.resolve()}return{route:n,href:It(()=>n.value.href),isActive:a,isExactActive:s,navigate:o}}const QN=ii({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:N_,setup(t,{slots:e}){const r=al(N_(t)),{options:n}=pi(m0),i=It(()=>({[F_(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[F_(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const a=e.default&&e.default(r);return t.custom?a:lt("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},a)}}}),JN=QN;function ZN(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ej(t,e){for(const r in e){const n=e[r],i=t[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Array.isArray(i)||i.length!==n.length||n.some((a,s)=>a!==i[s]))return!1}return!0}function j_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const F_=(t,e,r)=>t!=null?t:e!=null?e:r,tj=ii({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=pi(Cm),i=It(()=>t.route||n.value),a=pi(k_,0),s=It(()=>i.value.matched[a]);Xi(k_,a+1),Xi(tN,s),Xi(Cm,i);const o=vt();return ls(()=>[o.value,s.value,t.name],([l,c,u],[d,h,p])=>{c&&(c.instances[u]=l,h&&h!==c&&l&&l===d&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),l&&c&&(!h||!Co(c,h)||!d)&&(c.enterCallbacks[u]||[]).forEach(y=>y(l))},{flush:"post"}),()=>{const l=i.value,c=s.value,u=c&&c.components[t.name],d=t.name;if(!u)return B_(r.default,{Component:u,route:l});const h=c.props[t.name],p=h?h===!0?l.params:typeof h=="function"?h(l):h:null,w=lt(u,mt({},p,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(c.instances[d]=null)},ref:o}));return B_(r.default,{Component:w,route:l})||w}}});function B_(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const kk=tj;function rj(t){const e=PN(t.routes,t),r=t.parseQuery||KN,n=t.stringifyQuery||M_,i=t.history,a=Ll(),s=Ll(),o=Ll(),l=LS(Jn);let c=Jn;to&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=sg.bind(null,K=>""+K),d=sg.bind(null,WN),h=sg.bind(null,kh);function p(K,ve){let ue,be;return vk(K)?(ue=e.getRecordMatcher(K),be=ve):be=K,e.addRoute(be,ue)}function y(K){const ve=e.getRecordMatcher(K);ve&&e.removeRoute(ve)}function w(){return e.getRoutes().map(K=>K.record)}function v(K){return!!e.getRecordMatcher(K)}function T(K,ve){if(ve=mt({},ve||l.value),typeof K=="string"){const Ue=og(r,K,ve.path),R=e.resolve({path:Ue.path},ve),V=i.createHref(Ue.fullPath);return mt(Ue,R,{params:h(R.params),hash:kh(Ue.hash),redirectedFrom:void 0,href:V})}let ue;if("path"in K)ue=mt({},K,{path:og(r,K.path,ve.path).path});else{const Ue=mt({},K.params);for(const R in Ue)Ue[R]==null&&delete Ue[R];ue=mt({},K,{params:d(K.params)}),ve.params=d(ve.params)}const be=e.resolve(ue,ve),Qe=K.hash||"";be.params=u(h(be.params));const st=aN(n,mt({},K,{hash:HN(Qe),path:be.path})),Be=i.createHref(st);return mt({fullPath:st,hash:Qe,query:n===M_?YN(K.query):K.query||{}},be,{redirectedFrom:void 0,href:Be})}function k(K){return typeof K=="string"?og(r,K,l.value.path):mt({},K)}function A(K,ve){if(c!==K)return Ao(8,{from:ve,to:K})}function E(K){return j(K)}function I(K){return E(mt(k(K),{replace:!0}))}function F(K){const ve=K.matched[K.matched.length-1];if(ve&&ve.redirect){const{redirect:ue}=ve;let be=typeof ue=="function"?ue(K):ue;return typeof be=="string"&&(be=be.includes("?")||be.includes("#")?be=k(be):{path:be},be.params={}),mt({query:K.query,hash:K.hash,params:K.params},be)}}function j(K,ve){const ue=c=T(K),be=l.value,Qe=K.state,st=K.force,Be=K.replace===!0,Ue=F(ue);if(Ue)return j(mt(k(Ue),{state:Qe,force:st,replace:Be}),ve||ue);const R=ue;R.redirectedFrom=ve;let V;return!st&&sN(n,be,ue)&&(V=Ao(16,{to:R,from:be}),Le(be,be,!0,!1)),(V?Promise.resolve(V):z(R,be)).catch(G=>Zn(G)?Zn(G,2)?G:Re(G):se(G,R,be)).then(G=>{if(G){if(Zn(G,2))return j(mt(k(G.to),{state:Qe,force:st,replace:Be}),ve||R)}else G=U(R,be,!0,Be,Qe);return M(R,be,G),G})}function D(K,ve){const ue=A(K,ve);return ue?Promise.reject(ue):Promise.resolve()}function z(K,ve){let ue;const[be,Qe,st]=ij(K,ve);ue=lg(be.reverse(),"beforeRouteLeave",K,ve);for(const Ue of be)Ue.leaveGuards.forEach(R=>{ue.push(na(R,K,ve))});const Be=D.bind(null,K,ve);return ue.push(Be),Vs(ue).then(()=>{ue=[];for(const Ue of a.list())ue.push(na(Ue,K,ve));return ue.push(Be),Vs(ue)}).then(()=>{ue=lg(Qe,"beforeRouteUpdate",K,ve);for(const Ue of Qe)Ue.updateGuards.forEach(R=>{ue.push(na(R,K,ve))});return ue.push(Be),Vs(ue)}).then(()=>{ue=[];for(const Ue of K.matched)if(Ue.beforeEnter&&!ve.matched.includes(Ue))if(Array.isArray(Ue.beforeEnter))for(const R of Ue.beforeEnter)ue.push(na(R,K,ve));else ue.push(na(Ue.beforeEnter,K,ve));return ue.push(Be),Vs(ue)}).then(()=>(K.matched.forEach(Ue=>Ue.enterCallbacks={}),ue=lg(st,"beforeRouteEnter",K,ve),ue.push(Be),Vs(ue))).then(()=>{ue=[];for(const Ue of s.list())ue.push(na(Ue,K,ve));return ue.push(Be),Vs(ue)}).catch(Ue=>Zn(Ue,8)?Ue:Promise.reject(Ue))}function M(K,ve,ue){for(const be of o.list())be(K,ve,ue)}function U(K,ve,ue,be,Qe){const st=A(K,ve);if(st)return st;const Be=ve===Jn,Ue=to?history.state:{};ue&&(be||Be?i.replace(K.fullPath,mt({scroll:Be&&Ue&&Ue.scroll},Qe)):i.push(K.fullPath,Qe)),l.value=K,Le(K,ve,ue,Be),Re()}let P;function q(){P||(P=i.listen((K,ve,ue)=>{const be=T(K),Qe=F(be);if(Qe){j(mt(Qe,{replace:!0}),be).catch(hc);return}c=be;const st=l.value;to&&pN(A_(st.fullPath,ue.delta),Bf()),z(be,st).catch(Be=>Zn(Be,12)?Be:Zn(Be,2)?(j(Be.to,be).then(Ue=>{Zn(Ue,20)&&!ue.delta&&ue.type===Mc.pop&&i.go(-1,!1)}).catch(hc),Promise.reject()):(ue.delta&&i.go(-ue.delta,!1),se(Be,be,st))).then(Be=>{Be=Be||U(be,st,!1),Be&&(ue.delta?i.go(-ue.delta,!1):ue.type===Mc.pop&&Zn(Be,20)&&i.go(-1,!1)),M(be,st,Be)}).catch(hc)}))}let X=Ll(),fe=Ll(),te;function se(K,ve,ue){Re(K);const be=fe.list();return be.length?be.forEach(Qe=>Qe(K,ve,ue)):console.error(K),Promise.reject(K)}function le(){return te&&l.value!==Jn?Promise.resolve():new Promise((K,ve)=>{X.add([K,ve])})}function Re(K){return te||(te=!K,q(),X.list().forEach(([ve,ue])=>K?ue(K):ve()),X.reset()),K}function Le(K,ve,ue,be){const{scrollBehavior:Qe}=t;if(!to||!Qe)return Promise.resolve();const st=!ue&&gN(A_(K.fullPath,0))||(be||!ue)&&history.state&&history.state.scroll||null;return o0().then(()=>Qe(K,ve,st)).then(Be=>Be&&fN(Be)).catch(Be=>se(Be,K,ve))}const pt=K=>i.go(K);let it;const gt=new Set;return{currentRoute:l,addRoute:p,removeRoute:y,hasRoute:v,getRoutes:w,resolve:T,options:t,push:E,replace:I,go:pt,back:()=>pt(-1),forward:()=>pt(1),beforeEach:a.add,beforeResolve:s.add,afterEach:o.add,onError:fe.add,isReady:le,install(K){const ve=this;K.component("RouterLink",JN),K.component("RouterView",kk),K.config.globalProperties.$router=ve,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>ft(l)}),to&&!it&&l.value===Jn&&(it=!0,E(i.location).catch(Qe=>{}));const ue={};for(const Qe in Jn)ue[Qe]=It(()=>l.value[Qe]);K.provide(m0,ve),K.provide(pk,al(ue)),K.provide(Cm,l);const be=K.unmount;gt.add(K),K.unmount=function(){gt.delete(K),gt.size<1&&(c=Jn,P&&P(),P=null,l.value=Jn,it=!1,te=!1),be()}}}}function Vs(t){return t.reduce((e,r)=>e.then(()=>r()),Promise.resolve())}function ij(t,e){const r=[],n=[],i=[],a=Math.max(e.matched.length,t.matched.length);for(let s=0;s<a;s++){const o=e.matched[s];o&&(t.matched.find(c=>Co(c,o))?n.push(o):r.push(o));const l=t.matched[s];l&&(e.matched.find(c=>Co(c,l))||i.push(l))}return[r,n,i]}var y0=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r},Ek="/theCinemat/assets/inverted-icon.245532f3.svg";function ba(t,e,...r){if(t in e){let i=e[t];return typeof i=="function"?i(...r):i}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ba),n}var Nc=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Nc||{}),nj=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(nj||{});function ol({visible:t=!0,features:e=0,ourProps:r,theirProps:n,...i}){var a;let s=aj(n,r),o=Object.assign(i,{props:s});if(t||e&2&&s.static)return cg(o);if(e&1){let l=(a=s.unmount)==null||a?0:1;return ba(l,{[0](){return null},[1](){return cg({...i,props:{...s,hidden:!0,style:{display:"none"}}})}})}return cg(o)}function cg({props:t,attrs:e,slots:r,slot:n,name:i}){var a;let{as:s,...o}=sj(t,["unmount","static"]),l=(a=r.default)==null?void 0:a.call(r,n),c={};if(n){let u=!1,d=[];for(let[h,p]of Object.entries(n))typeof p=="boolean"&&(u=!0),p===!0&&d.push(h);u&&(c["data-headlessui-state"]=d.join(" "))}if(s==="template"){if(l=Ck(l!=null?l:[]),Object.keys(o).length>0||Object.keys(e).length>0){let[u,...d]=l!=null?l:[];if(!oj(u)||d.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${i} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(o).concat(Object.keys(e)).sort((h,p)=>h.localeCompare(p)).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`));return On(u,Object.assign({},o,c))}return Array.isArray(l)&&l.length===1?l[0]:l}return lt(s,Object.assign({},o,c),{default:()=>l})}function Ck(t){return t.flatMap(e=>e.type===St?Ck(e.children):[e])}function aj(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(r).map(n=>[n,void 0])));for(let n in r)Object.assign(e,{[n](i,...a){let s=r[n];for(let o of s){if(i instanceof Event&&i.defaultPrevented)return;o(i,...a)}}});return e}function sj(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function oj(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}let lj=0;function cj(){return++lj}function vo(){return cj()}var aa=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(aa||{});function He(t){var e;return t==null||t.value==null?null:(e=t.value.$el)!=null?e:t.value}let Ak=Symbol("Context");var jc=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(jc||{});function Ik(){return pi(Ak,null)}function uj(t){Xi(Ak,t)}function U_(t,e){if(t)return t;let r=e!=null?e:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function dj(t,e){let r=vt(U_(t.value.type,t.value.as));return Ps(()=>{r.value=U_(t.value.type,t.value.as)}),Is(()=>{var n;r.value||!He(e)||He(e)instanceof HTMLButtonElement&&!((n=He(e))!=null&&n.hasAttribute("type"))&&(r.value="button")}),r}const Uf=typeof window=="undefined"||typeof document=="undefined";function pu(t){if(Uf)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=He(t);if(e)return e.ownerDocument}return document}let Pm=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var es=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(es||{}),hj=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(hj||{}),fj=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(fj||{});function b0(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Pm)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var w0=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(w0||{});function Pk(t,e=0){var r;return t===((r=pu(t))==null?void 0:r.body)?!1:ba(e,{[0](){return t.matches(Pm)},[1](){let n=t;for(;n!==null;){if(n.matches(Pm))return!0;n=n.parentElement}return!1}})}let pj=["textarea","input"].join(",");function gj(t){var e,r;return(r=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,pj))!=null?r:!1}function mj(t,e=r=>r){return t.slice().sort((r,n)=>{let i=e(r),a=e(n);if(i===null||a===null)return 0;let s=i.compareDocumentPosition(a);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function so(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:i=[]}={}){var a;let s=(a=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?a:document,o=Array.isArray(t)?r?mj(t):t:b0(t);i.length>0&&(o=o.filter(y=>!i.includes(y))),n=n!=null?n:s.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(n))-1;if(e&4)return Math.max(0,o.indexOf(n))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},d=0,h=o.length,p;do{if(d>=h||d+h<=0)return 0;let y=c+d;if(e&16)y=(y+h)%h;else{if(y<0)return 3;if(y>=h)return 1}p=o[y],p==null||p.focus(u),d+=l}while(p!==s.activeElement);return e&6&&gj(p)&&p.select(),p.hasAttribute("tabindex")||p.setAttribute("tabindex","0"),2}function ug(t,e,r){Uf||Is(n=>{document.addEventListener(t,e,r),n(()=>document.removeEventListener(t,e,r))})}function vj(t,e,r=It(()=>!0)){function n(a,s){if(!r.value||a.defaultPrevented)return;let o=s(a);if(o===null||!o.getRootNode().contains(o))return;let l=function c(u){return typeof u=="function"?c(u()):Array.isArray(u)||u instanceof Set?u:[u]}(t);for(let c of l){if(c===null)continue;let u=c instanceof HTMLElement?c:He(c);if(u!=null&&u.contains(o)||a.composed&&a.composedPath().includes(u))return}return!Pk(o,w0.Loose)&&o.tabIndex!==-1&&a.preventDefault(),e(a,o)}let i=vt(null);ug("mousedown",a=>{var s,o;r.value&&(i.value=((o=(s=a.composedPath)==null?void 0:s.call(a))==null?void 0:o[0])||a.target)},!0),ug("click",a=>{!i.value||(n(a,()=>i.value),i.value=null)},!0),ug("blur",a=>n(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var Eh=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Eh||{});let Om=ii({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:e,attrs:r}){return()=>{let{features:n,...i}=t,a={"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return ol({ourProps:a,theirProps:i,slot:{},attrs:r,slots:e,name:"Hidden"})}}});function yj(t,e,r){Uf||Is(n=>{window.addEventListener(t,e,r),n(()=>window.removeEventListener(t,e,r))})}var ts=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(ts||{});function Ok(){let t=vt(0);return yj("keydown",e=>{e.key==="Tab"&&(t.value=e.shiftKey?1:0)}),t}function bj(t,e,r,n){Uf||Is(i=>{t=t!=null?t:window,t.addEventListener(e,r,n),i(()=>t.removeEventListener(e,r,n))})}var wj=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(wj||{});let Dk=Symbol("PopoverContext");function zf(t){let e=pi(Dk,null);if(e===null){let r=new Error(`<${t} /> is missing a parent <${Yl.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,zf),r}return e}let Lk=Symbol("PopoverGroupContext");function Rk(){return pi(Lk,null)}let Mk=Symbol("PopoverPanelContext");function _j(){return pi(Mk,null)}let Yl=ii({name:"Popover",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:r,expose:n}){var i;let a=vt(null);n({el:a,$el:a});let s=vt(1),o=vt(null),l=vt(null),c=vt(null),u=vt(null),d=It(()=>pu(a)),h=It(()=>{var k,A;if(!He(o)||!He(u))return!1;for(let M of document.querySelectorAll("body > *"))if(Number(M==null?void 0:M.contains(He(o)))^Number(M==null?void 0:M.contains(He(u))))return!0;let E=b0(),I=E.indexOf(He(o)),F=(I+E.length-1)%E.length,j=(I+1)%E.length,D=E[F],z=E[j];return!((k=He(u))!=null&&k.contains(D))&&!((A=He(u))!=null&&A.contains(z))}),p={popoverState:s,buttonId:vt(null),panelId:vt(null),panel:u,button:o,isPortalled:h,beforePanelSentinel:l,afterPanelSentinel:c,togglePopover(){s.value=ba(s.value,{[0]:1,[1]:0})},closePopover(){s.value!==1&&(s.value=1)},close(k){p.closePopover();let A=(()=>k?k instanceof HTMLElement?k:k.value instanceof HTMLElement?He(k):He(p.button):He(p.button))();A==null||A.focus()}};Xi(Dk,p),uj(It(()=>ba(s.value,{[0]:jc.Open,[1]:jc.Closed})));let y={buttonId:p.buttonId,panelId:p.panelId,close(){p.closePopover()}},w=Rk(),v=w==null?void 0:w.registerPopover;function T(){var k,A,E,I;return(I=w==null?void 0:w.isFocusWithinPopoverGroup())!=null?I:((k=d.value)==null?void 0:k.activeElement)&&(((A=He(o))==null?void 0:A.contains(d.value.activeElement))||((E=He(u))==null?void 0:E.contains(d.value.activeElement)))}return Is(()=>v==null?void 0:v(y)),bj((i=d.value)==null?void 0:i.defaultView,"focus",k=>{var A,E;s.value===0&&(T()||!o||!u||k.target!==window&&((A=He(p.beforePanelSentinel))!=null&&A.contains(k.target)||(E=He(p.afterPanelSentinel))!=null&&E.contains(k.target)||p.closePopover()))},!0),vj([o,u],(k,A)=>{var E;p.closePopover(),Pk(A,w0.Loose)||(k.preventDefault(),(E=He(o))==null||E.focus())},It(()=>s.value===0)),()=>{let k={open:s.value===0,close:p.close};return ol({theirProps:t,ourProps:{ref:a},slot:k,slots:e,attrs:r,name:"Popover"})}}}),Rl=ii({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${vo()}`}},inheritAttrs:!1,setup(t,{attrs:e,slots:r,expose:n}){let i=zf("PopoverButton"),a=It(()=>pu(i.button));n({el:i.button,$el:i.button}),Ps(()=>{i.buttonId.value=t.id}),Nf(()=>{i.buttonId.value=null});let s=Rk(),o=s==null?void 0:s.closeOthers,l=_j(),c=It(()=>l===null?!1:l.value===i.panelId.value),u=vt(null),d=`headlessui-focus-sentinel-${vo()}`;c.value||Is(()=>{i.button.value=u.value});let h=dj(It(()=>({as:t.as,type:e.type})),u);function p(T){var k,A,E,I,F;if(c.value){if(i.popoverState.value===1)return;switch(T.key){case aa.Space:case aa.Enter:T.preventDefault(),(A=(k=T.target).click)==null||A.call(k),i.closePopover(),(E=He(i.button))==null||E.focus();break}}else switch(T.key){case aa.Space:case aa.Enter:T.preventDefault(),T.stopPropagation(),i.popoverState.value===1&&(o==null||o(i.buttonId.value)),i.togglePopover();break;case aa.Escape:if(i.popoverState.value!==0)return o==null?void 0:o(i.buttonId.value);if(!He(i.button)||((I=a.value)==null?void 0:I.activeElement)&&!((F=He(i.button))!=null&&F.contains(a.value.activeElement)))return;T.preventDefault(),T.stopPropagation(),i.closePopover();break}}function y(T){c.value||T.key===aa.Space&&T.preventDefault()}function w(T){var k,A;t.disabled||(c.value?(i.closePopover(),(k=He(i.button))==null||k.focus()):(T.preventDefault(),T.stopPropagation(),i.popoverState.value===1&&(o==null||o(i.buttonId.value)),i.togglePopover(),(A=He(i.button))==null||A.focus()))}function v(T){T.preventDefault(),T.stopPropagation()}return()=>{let T=i.popoverState.value===0,k={open:T},{id:A,...E}=t,I=c.value?{ref:u,type:h.value,onKeydown:p,onClick:w}:{ref:u,id:A,type:h.value,"aria-expanded":t.disabled?void 0:i.popoverState.value===0,"aria-controls":He(i.panel)?i.panelId.value:void 0,disabled:t.disabled?!0:void 0,onKeydown:p,onKeyup:y,onClick:w,onMousedown:v},F=Ok();function j(){let D=He(i.panel);if(!D)return;function z(){ba(F.value,{[ts.Forwards]:()=>so(D,es.First),[ts.Backwards]:()=>so(D,es.Last)})}z()}return lt(St,[ol({ourProps:I,theirProps:{...e,...E},slot:k,attrs:e,slots:r,name:"PopoverButton"}),T&&!c.value&&i.isPortalled.value&&lt(Om,{id:d,features:Eh.Focusable,as:"button",type:"button",onFocus:j})])}}});ii({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:e,slots:r}){let n=zf("PopoverOverlay"),i=`headlessui-popover-overlay-${vo()}`,a=Ik(),s=It(()=>a!==null?a.value===jc.Open:n.popoverState.value===0);function o(){n.closePopover()}return()=>{let l={open:n.popoverState.value===0};return ol({ourProps:{id:i,"aria-hidden":!0,onClick:o},theirProps:t,slot:l,attrs:e,slots:r,features:Nc.RenderStrategy|Nc.Static,visible:s.value,name:"PopoverOverlay"})}}});let Cd=ii({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${vo()}`}},inheritAttrs:!1,setup(t,{attrs:e,slots:r,expose:n}){let{focus:i}=t,a=zf("PopoverPanel"),s=It(()=>pu(a.panel)),o=`headlessui-focus-sentinel-before-${vo()}`,l=`headlessui-focus-sentinel-after-${vo()}`;n({el:a.panel,$el:a.panel}),Ps(()=>{a.panelId.value=t.id}),Nf(()=>{a.panelId.value=null}),Xi(Mk,a.panelId),Is(()=>{var v,T;if(!i||a.popoverState.value!==0||!a.panel)return;let k=(v=s.value)==null?void 0:v.activeElement;(T=He(a.panel))!=null&&T.contains(k)||so(He(a.panel),es.First)});let c=Ik(),u=It(()=>c!==null?c.value===jc.Open:a.popoverState.value===0);function d(v){var T,k;switch(v.key){case aa.Escape:if(a.popoverState.value!==0||!He(a.panel)||s.value&&!((T=He(a.panel))!=null&&T.contains(s.value.activeElement)))return;v.preventDefault(),v.stopPropagation(),a.closePopover(),(k=He(a.button))==null||k.focus();break}}function h(v){var T,k,A,E,I;let F=v.relatedTarget;!F||!He(a.panel)||(T=He(a.panel))!=null&&T.contains(F)||(a.closePopover(),(((A=(k=He(a.beforePanelSentinel))==null?void 0:k.contains)==null?void 0:A.call(k,F))||((I=(E=He(a.afterPanelSentinel))==null?void 0:E.contains)==null?void 0:I.call(E,F)))&&F.focus({preventScroll:!0}))}let p=Ok();function y(){let v=He(a.panel);if(!v)return;function T(){ba(p.value,{[ts.Forwards]:()=>{so(v,es.Next)},[ts.Backwards]:()=>{var k;(k=He(a.button))==null||k.focus({preventScroll:!0})}})}T()}function w(){let v=He(a.panel);if(!v)return;function T(){ba(p.value,{[ts.Forwards]:()=>{var k,A;let E=He(a.button),I=He(a.panel);if(!E)return;let F=b0(),j=F.indexOf(E),D=F.slice(0,j+1),z=[...F.slice(j+1),...D];for(let M of z.slice())if(((A=(k=M==null?void 0:M.id)==null?void 0:k.startsWith)==null?void 0:A.call(k,"headlessui-focus-sentinel-"))||(I==null?void 0:I.contains(M))){let U=z.indexOf(M);U!==-1&&z.splice(U,1)}so(z,es.First,{sorted:!1})},[ts.Backwards]:()=>so(v,es.Previous)})}T()}return()=>{let v={open:a.popoverState.value===0,close:a.close},{id:T,focus:k,...A}=t,E={ref:a.panel,id:T,onKeydown:d,onFocusout:i&&a.popoverState.value===0?h:void 0,tabIndex:-1};return ol({ourProps:E,theirProps:{...e,...A},attrs:e,slot:v,slots:{...r,default:(...I)=>{var F;return[lt(St,[u.value&&a.isPortalled.value&&lt(Om,{id:o,ref:a.beforePanelSentinel,features:Eh.Focusable,as:"button",type:"button",onFocus:y}),(F=r.default)==null?void 0:F.call(r,...I),u.value&&a.isPortalled.value&&lt(Om,{id:l,ref:a.afterPanelSentinel,features:Eh.Focusable,as:"button",type:"button",onFocus:w})])]}},features:Nc.RenderStrategy|Nc.Static,visible:u.value,name:"PopoverPanel"})}}}),xj=ii({name:"PopoverGroup",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:e,slots:r,expose:n}){let i=vt(null),a=LS([]),s=It(()=>pu(i));n({el:i,$el:i});function o(d){let h=a.value.indexOf(d);h!==-1&&a.value.splice(h,1)}function l(d){return a.value.push(d),()=>{o(d)}}function c(){var d;let h=s.value;if(!h)return!1;let p=h.activeElement;return(d=He(i))!=null&&d.contains(p)?!0:a.value.some(y=>{var w,v;return((w=h.getElementById(y.buttonId.value))==null?void 0:w.contains(p))||((v=h.getElementById(y.panelId.value))==null?void 0:v.contains(p))})}function u(d){for(let h of a.value)h.buttonId.value!==d&&h.close()}return Xi(Lk,{registerPopover:l,unregisterPopover:o,isFocusWithinPopoverGroup:c,closeOthers:u}),()=>ol({ourProps:{ref:i},theirProps:t,slot:{},attrs:e,slots:r,name:"PopoverGroup"})}});function Tj(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 4v12l-4-2-4 2V4M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])}function z_(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])}function Sj(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})])}function $_(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])}function V_(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])}function kj(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})])}function H_(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])}function Ej(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}function dg(t,e){return Ye(),zt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[xe("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},Cj=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],o=t[r++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},jk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=a>>2,d=(a&3)<<4|o>>4;let h=(o&15)<<2|c>>6,p=c&63;l||(p=64,s||(h=64)),n.push(r[u],r[d],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Cj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||o==null||c==null||d==null)throw Error();const h=a<<2|o>>4;if(n.push(h),c!==64){const p=o<<4&240|c>>2;if(n.push(p),d!==64){const y=c<<6&192|d;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Aj=function(t){const e=Nk(t);return jk.encodeByteArray(e,!0)},Ch=function(t){return Aj(t).replace(/\./g,"")},Fk=function(t){try{return jk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ij(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xr())}function Pj(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Oj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Dj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lj(){const t=xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Rj(){try{return typeof indexedDB=="object"}catch{return!1}}function Mj(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}function Nj(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=()=>Nj().__FIREBASE_DEFAULTS__,Fj=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Bj=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fk(t[1]);return e&&JSON.parse(e)},_0=()=>{try{return jj()||Fj()||Bj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bk=t=>{var e,r;return(r=(e=_0())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Uk=t=>{const e=Bk(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Uj=()=>{var t;return(t=_0())===null||t===void 0?void 0:t.config},zk=t=>{var e;return(e=_0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t),o="";return[Ch(JSON.stringify(r)),Ch(JSON.stringify(s)),o].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="FirebaseError";class dn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=$j,Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?Vj(a,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new dn(i,o,n)}}function Vj(t,e){return t.replace(Hj,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Hj=/\{\$([^}]+)}/g;function qj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ah(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(q_(a)&&q_(s)){if(!Ah(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function q_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Gj(t,e){const r=new Wj(t,e);return r.subscribe.bind(r)}class Wj{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Kj(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=hg),i.error===void 0&&(i.error=hg),i.complete===void 0&&(i.complete=hg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console!="undefined"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kj(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function hg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){return t&&t._delegate?t._delegate:t}class wa{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new zj;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qj(e))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wa){return this.instances.has(e)}getOptions(e=Wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(!!n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Xj(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Wa){return this.component?this.component.multipleInstances?e:Wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xj(t){return t===Wa?void 0:t}function Qj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Yj(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const Zj={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},e5=nt.INFO,t5={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},r5=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=t5[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class x0{constructor(e){this.name=e,this._logLevel=e5,this._logHandler=r5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const i5=(t,e)=>e.some(r=>t instanceof r);let G_,W_;function n5(){return G_||(G_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a5(){return W_||(W_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vk=new WeakMap,Dm=new WeakMap,Hk=new WeakMap,fg=new WeakMap,T0=new WeakMap;function s5(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(pa(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&Vk.set(r,t)}).catch(()=>{}),T0.set(e,t),e}function o5(t){if(Dm.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});Dm.set(t,e)}let Lm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Dm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hk.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return pa(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function l5(t){Lm=t(Lm)}function c5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(pg(this),e,...r);return Hk.set(n,e.sort?e.sort():[e]),pa(n)}:a5().includes(t)?function(...e){return t.apply(pg(this),e),pa(Vk.get(this))}:function(...e){return pa(t.apply(pg(this),e))}}function u5(t){return typeof t=="function"?c5(t):(t instanceof IDBTransaction&&o5(t),i5(t,n5())?new Proxy(t,Lm):t)}function pa(t){if(t instanceof IDBRequest)return s5(t);if(fg.has(t))return fg.get(t);const e=u5(t);return e!==t&&(fg.set(t,e),T0.set(e,t)),e}const pg=t=>T0.get(t);function d5(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=pa(s);return n&&s.addEventListener("upgradeneeded",l=>{n(pa(s.result),l.oldVersion,l.newVersion,pa(s.transaction))}),r&&s.addEventListener("blocked",()=>r()),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),o}const h5=["get","getKey","getAll","getAllKeys","count"],f5=["put","add","delete","clear"],gg=new Map;function K_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gg.get(e))return gg.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=f5.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||h5.includes(r)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),i&&l.done]))[0]};return gg.set(e,a),a}l5(t=>({...t,get:(e,r,n)=>K_(e,r)||t.get(e,r,n),has:(e,r)=>!!K_(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(g5(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function g5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rm="@firebase/app",Y_="0.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new x0("@firebase/app"),m5="@firebase/app-compat",v5="@firebase/analytics-compat",y5="@firebase/analytics",b5="@firebase/app-check-compat",w5="@firebase/app-check",_5="@firebase/auth",x5="@firebase/auth-compat",T5="@firebase/database",S5="@firebase/database-compat",k5="@firebase/functions",E5="@firebase/functions-compat",C5="@firebase/installations",A5="@firebase/installations-compat",I5="@firebase/messaging",P5="@firebase/messaging-compat",O5="@firebase/performance",D5="@firebase/performance-compat",L5="@firebase/remote-config",R5="@firebase/remote-config-compat",M5="@firebase/storage",N5="@firebase/storage-compat",j5="@firebase/firestore",F5="@firebase/firestore-compat",B5="firebase",U5="9.15.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",z5={[Rm]:"fire-core",[m5]:"fire-core-compat",[y5]:"fire-analytics",[v5]:"fire-analytics-compat",[w5]:"fire-app-check",[b5]:"fire-app-check-compat",[_5]:"fire-auth",[x5]:"fire-auth-compat",[T5]:"fire-rtdb",[S5]:"fire-rtdb-compat",[k5]:"fire-fn",[E5]:"fire-fn-compat",[C5]:"fire-iid",[A5]:"fire-iid-compat",[I5]:"fire-fcm",[P5]:"fire-fcm-compat",[O5]:"fire-perf",[D5]:"fire-perf-compat",[L5]:"fire-rc",[R5]:"fire-rc-compat",[M5]:"fire-gcs",[N5]:"fire-gcs-compat",[j5]:"fire-fst",[F5]:"fire-fst-compat","fire-js":"fire-js",[B5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,Nm=new Map;function $5(t,e){try{t.container.addComponent(e)}catch(r){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function ws(t){const e=t.name;if(Nm.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,t);for(const r of Ih.values())$5(r,t);return!0}function $f(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ga=new gu("app","Firebase",V5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ga.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=U5;function qk(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Mm,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ga.create("bad-app-name",{appName:String(i)});if(r||(r=Uj()),!r)throw ga.create("no-options");const a=Ih.get(i);if(a){if(Ah(r,a.options)&&Ah(n,a.config))return a;throw ga.create("duplicate-app",{appName:i})}const s=new Jj(i);for(const l of Nm.values())s.addComponent(l);const o=new H5(r,n,s);return Ih.set(i,o),o}function S0(t=Mm){const e=Ih.get(t);if(!e&&t===Mm)return qk();if(!e)throw ga.create("no-app",{appName:t});return e}function Qi(t,e,r){var n;let i=(n=z5[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(o.join(" "));return}ws(new wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="firebase-heartbeat-database",G5=1,Fc="firebase-heartbeat-store";let mg=null;function Gk(){return mg||(mg=d5(q5,G5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fc)}}}).catch(t=>{throw ga.create("idb-open",{originalErrorMessage:t.message})})),mg}async function W5(t){try{return(await Gk()).transaction(Fc).objectStore(Fc).get(Wk(t))}catch(e){if(e instanceof dn)bs.warn(e.message);else{const r=ga.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bs.warn(r.message)}}}async function X_(t,e){try{const n=(await Gk()).transaction(Fc,"readwrite");return await n.objectStore(Fc).put(e,Wk(t)),n.done}catch(r){if(r instanceof dn)bs.warn(r.message);else{const n=ga.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});bs.warn(n.message)}}}function Wk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=1024,Y5=30*24*60*60*1e3;class X5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new J5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Q_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=Y5}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q_(),{heartbeatsToSend:r,unsentEntries:n}=Q5(this._heartbeatsCache.heartbeats),i=Ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Q_(){return new Date().toISOString().substring(0,10)}function Q5(t,e=K5){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),J_(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),J_(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class J5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rj()?Mj().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await W5(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return X_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return X_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function J_(t){return Ch(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(t){ws(new wa("platform-logger",e=>new p5(e),"PRIVATE")),ws(new wa("heartbeat",e=>new X5(e),"PRIVATE")),Qi(Rm,Y_,t),Qi(Rm,Y_,"esm2017"),Qi("fire-js","")}Z5("");var eF="firebase",tF="9.15.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(eF,tF,"app");var rF=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ee,k0=k0||{},Fe=rF||self;function Ph(){}function Vf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function vu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function iF(t){return Object.prototype.hasOwnProperty.call(t,vg)&&t[vg]||(t[vg]=++nF)}var vg="closure_uid_"+(1e9*Math.random()>>>0),nF=0;function aF(t,e,r){return t.call.apply(t.bind,arguments)}function sF(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function br(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?br=aF:br=sF,br.apply(null,arguments)}function Ad(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function fr(t,e){function r(){}r.prototype=e.prototype,t.X=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.Wb=function(n,i,a){for(var s=Array(arguments.length-2),o=2;o<arguments.length;o++)s[o-2]=arguments[o];return e.prototype[i].apply(n,s)}}function Aa(){this.s=this.s,this.o=this.o}var oF=0;Aa.prototype.s=!1;Aa.prototype.na=function(){!this.s&&(this.s=!0,this.M(),oF!=0)&&iF(this)};Aa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Kk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function E0(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function Z_(t,e){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(Vf(n)){const i=t.length||0,a=n.length||0;t.length=i+a;for(let s=0;s<a;s++)t[i+s]=n[s]}else t.push(n)}}function wr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}wr.prototype.h=function(){this.defaultPrevented=!0};var lF=function(){if(!Fe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Fe.addEventListener("test",Ph,e),Fe.removeEventListener("test",Ph,e)}catch{}return t}();function Oh(t){return/^[\s\xa0]*$/.test(t)}var ex=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function yg(t,e){return t<e?-1:t>e?1:0}function Hf(){var t=Fe.navigator;return t&&(t=t.userAgent)?t:""}function qi(t){return Hf().indexOf(t)!=-1}function C0(t){return C0[" "](t),t}C0[" "]=Ph;function cF(t){var e=hF;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var uF=qi("Opera"),Io=qi("Trident")||qi("MSIE"),Yk=qi("Edge"),jm=Yk||Io,Xk=qi("Gecko")&&!(Hf().toLowerCase().indexOf("webkit")!=-1&&!qi("Edge"))&&!(qi("Trident")||qi("MSIE"))&&!qi("Edge"),dF=Hf().toLowerCase().indexOf("webkit")!=-1&&!qi("Edge");function Qk(){var t=Fe.document;return t?t.documentMode:void 0}var Dh;e:{var bg="",wg=function(){var t=Hf();if(Xk)return/rv:([^\);]+)(\)|;)/.exec(t);if(Yk)return/Edge\/([\d\.]+)/.exec(t);if(Io)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(dF)return/WebKit\/(\S+)/.exec(t);if(uF)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(wg&&(bg=wg?wg[1]:""),Io){var _g=Qk();if(_g!=null&&_g>parseFloat(bg)){Dh=String(_g);break e}}Dh=bg}var hF={};function fF(){return cF(function(){let t=0;const e=ex(String(Dh)).split("."),r=ex("9").split("."),n=Math.max(e.length,r.length);for(let s=0;t==0&&s<n;s++){var i=e[s]||"",a=r[s]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],i[0].length==0&&a[0].length==0)break;t=yg(i[1].length==0?0:parseInt(i[1],10),a[1].length==0?0:parseInt(a[1],10))||yg(i[2].length==0,a[2].length==0)||yg(i[2],a[2]),i=i[3],a=a[3]}while(t==0)}return 0<=t})}var Fm;if(Fe.document&&Io){var tx=Qk();Fm=tx||parseInt(Dh,10)||void 0}else Fm=void 0;var pF=Fm;function Bc(t,e){if(wr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Xk){e:{try{C0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:gF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Bc.X.h.call(this)}}fr(Bc,wr);var gF={2:"touch",3:"pen",4:"mouse"};Bc.prototype.h=function(){Bc.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var yu="closure_listenable_"+(1e6*Math.random()|0),mF=0;function vF(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.ha=i,this.key=++mF,this.ba=this.ea=!1}function qf(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function A0(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function Jk(t){const e={};for(const r in t)e[r]=t[r];return e}const rx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zk(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let a=0;a<rx.length;a++)r=rx[a],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function Gf(t){this.src=t,this.g={},this.h=0}Gf.prototype.add=function(t,e,r,n,i){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var s=Um(t,e,n,i);return-1<s?(e=t[s],r||(e.ea=!1)):(e=new vF(e,this.src,a,!!n,i),e.ea=r,t.push(e)),e};function Bm(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=Kk(n,e),a;(a=0<=i)&&Array.prototype.splice.call(n,i,1),a&&(qf(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function Um(t,e,r,n){for(var i=0;i<t.length;++i){var a=t[i];if(!a.ba&&a.listener==e&&a.capture==!!r&&a.ha==n)return i}return-1}var I0="closure_lm_"+(1e6*Math.random()|0),xg={};function eE(t,e,r,n,i){if(n&&n.once)return rE(t,e,r,n,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)eE(t,e[a],r,n,i);return null}return r=D0(r),t&&t[yu]?t.N(e,r,vu(n)?!!n.capture:!!n,i):tE(t,e,r,!1,n,i)}function tE(t,e,r,n,i,a){if(!e)throw Error("Invalid event type");var s=vu(i)?!!i.capture:!!i,o=O0(t);if(o||(t[I0]=o=new Gf(t)),r=o.add(e,r,n,s,a),r.proxy)return r;if(n=yF(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)lF||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(nE(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function yF(){function t(r){return e.call(t.src,t.listener,r)}const e=bF;return t}function rE(t,e,r,n,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)rE(t,e[a],r,n,i);return null}return r=D0(r),t&&t[yu]?t.O(e,r,vu(n)?!!n.capture:!!n,i):tE(t,e,r,!0,n,i)}function iE(t,e,r,n,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)iE(t,e[a],r,n,i);else n=vu(n)?!!n.capture:!!n,r=D0(r),t&&t[yu]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],r=Um(a,r,n,i),-1<r&&(qf(a[r]),Array.prototype.splice.call(a,r,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=O0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Um(e,r,n,i)),(r=-1<t?e[t]:null)&&P0(r))}function P0(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[yu])Bm(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(nE(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=O0(e))?(Bm(r,t),r.h==0&&(r.src=null,e[I0]=null)):qf(t)}}}function nE(t){return t in xg?xg[t]:xg[t]="on"+t}function bF(t,e){if(t.ba)t=!0;else{e=new Bc(e,this);var r=t.listener,n=t.ha||t.src;t.ea&&P0(t),t=r.call(n,e)}return t}function O0(t){return t=t[I0],t instanceof Gf?t:null}var Tg="__closure_events_fn_"+(1e9*Math.random()>>>0);function D0(t){return typeof t=="function"?t:(t[Tg]||(t[Tg]=function(e){return t.handleEvent(e)}),t[Tg])}function ir(){Aa.call(this),this.i=new Gf(this),this.P=this,this.I=null}fr(ir,Aa);ir.prototype[yu]=!0;ir.prototype.removeEventListener=function(t,e,r,n){iE(this,t,e,r,n)};function dr(t,e){var r,n=t.I;if(n)for(r=[];n;n=n.I)r.push(n);if(t=t.P,n=e.type||e,typeof e=="string")e=new wr(e,t);else if(e instanceof wr)e.target=e.target||t;else{var i=e;e=new wr(n,t),Zk(e,i)}if(i=!0,r)for(var a=r.length-1;0<=a;a--){var s=e.g=r[a];i=Id(s,n,!0,e)&&i}if(s=e.g=t,i=Id(s,n,!0,e)&&i,i=Id(s,n,!1,e)&&i,r)for(a=0;a<r.length;a++)s=e.g=r[a],i=Id(s,n,!1,e)&&i}ir.prototype.M=function(){if(ir.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)qf(r[n]);delete t.g[e],t.h--}}this.I=null};ir.prototype.N=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};ir.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function Id(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var s=e[a];if(s&&!s.ba&&s.capture==r){var o=s.listener,l=s.ha||s.src;s.ea&&Bm(t.i,s),i=o.call(l,n)!==!1&&i}}return i&&!n.defaultPrevented}var L0=Fe.JSON.stringify;function wF(){var t=oE;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class _F{constructor(){this.h=this.g=null}add(e,r){const n=aE.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var aE=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new xF,t=>t.reset());class xF{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function TF(t){Fe.setTimeout(()=>{throw t},0)}function sE(t,e){zm||SF(),$m||(zm(),$m=!0),oE.add(t,e)}var zm;function SF(){var t=Fe.Promise.resolve(void 0);zm=function(){t.then(kF)}}var $m=!1,oE=new _F;function kF(){for(var t;t=wF();){try{t.h.call(t.g)}catch(r){TF(r)}var e=aE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}$m=!1}function Wf(t,e){ir.call(this),this.h=t||1,this.g=e||Fe,this.j=br(this.lb,this),this.l=Date.now()}fr(Wf,ir);Ee=Wf.prototype;Ee.ca=!1;Ee.R=null;Ee.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),dr(this,"tick"),this.ca&&(R0(this),this.start()))}};Ee.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function R0(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}Ee.M=function(){Wf.X.M.call(this),R0(this),delete this.g};function M0(t,e,r){if(typeof t=="function")r&&(t=br(t,r));else if(t&&typeof t.handleEvent=="function")t=br(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Fe.setTimeout(t,e||0)}function lE(t){t.g=M0(()=>{t.g=null,t.i&&(t.i=!1,lE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class EF extends Aa{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lE(this)}M(){super.M(),this.g&&(Fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Uc(t){Aa.call(this),this.h=t,this.g={}}fr(Uc,Aa);var ix=[];function cE(t,e,r,n){Array.isArray(r)||(r&&(ix[0]=r.toString()),r=ix);for(var i=0;i<r.length;i++){var a=eE(e,r[i],n||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function uE(t){A0(t.g,function(e,r){this.g.hasOwnProperty(r)&&P0(e)},t),t.g={}}Uc.prototype.M=function(){Uc.X.M.call(this),uE(this)};Uc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Kf(){this.g=!0}Kf.prototype.Aa=function(){this.g=!1};function CF(t,e,r,n,i,a){t.info(function(){if(t.g)if(a)for(var s="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+c+"&"):s+(u+"=redacted&")}}else s=null;else s=a;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+s})}function AF(t,e,r,n,i,a,s){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+a+" "+s})}function oo(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+PF(t,r)+(n?" "+n:"")})}function IF(t,e){t.info(function(){return"TIMEOUT: "+e})}Kf.prototype.info=function(){};function PF(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if(a!="noop"&&a!="stop"&&a!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return L0(r)}catch{return e}}var Ds={},nx=null;function Yf(){return nx=nx||new ir}Ds.Pa="serverreachability";function dE(t){wr.call(this,Ds.Pa,t)}fr(dE,wr);function zc(t){const e=Yf();dr(e,new dE(e))}Ds.STAT_EVENT="statevent";function hE(t,e){wr.call(this,Ds.STAT_EVENT,t),this.stat=e}fr(hE,wr);function Fr(t){const e=Yf();dr(e,new hE(e,t))}Ds.Qa="timingevent";function fE(t,e){wr.call(this,Ds.Qa,t),this.size=e}fr(fE,wr);function bu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Fe.setTimeout(function(){t()},e)}var Xf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},pE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function N0(){}N0.prototype.h=null;function ax(t){return t.h||(t.h=t.i())}function gE(){}var wu={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function j0(){wr.call(this,"d")}fr(j0,wr);function F0(){wr.call(this,"c")}fr(F0,wr);var Vm;function Qf(){}fr(Qf,N0);Qf.prototype.g=function(){return new XMLHttpRequest};Qf.prototype.i=function(){return{}};Vm=new Qf;function _u(t,e,r,n){this.l=t,this.j=e,this.m=r,this.U=n||1,this.S=new Uc(this),this.O=OF,t=jm?125:void 0,this.T=new Wf(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new mE}function mE(){this.i=null,this.g="",this.h=!1}var OF=45e3,Hm={},Lh={};Ee=_u.prototype;Ee.setTimeout=function(t){this.O=t};function qm(t,e,r){t.K=1,t.v=Zf(Dn(e)),t.s=r,t.P=!0,vE(t,null)}function vE(t,e){t.F=Date.now(),xu(t),t.A=Dn(t.v);var r=t.A,n=t.U;Array.isArray(n)||(n=[String(n)]),kE(r.i,"t",n),t.C=0,r=t.l.H,t.h=new mE,t.g=GE(t.l,r?e:null,!t.s),0<t.N&&(t.L=new EF(br(t.La,t,t.g),t.N)),cE(t.S,t.g,"readystatechange",t.ib),e=t.H?Jk(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),zc(),CF(t.j,t.u,t.A,t.m,t.U,t.s)}Ee.ib=function(t){t=t.target;const e=this.L;e&&xn(t)==3?e.l():this.La(t)};Ee.La=function(t){try{if(t==this.g)e:{const u=xn(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(u!=3||jm||this.g&&(this.h.h||this.g.fa()||cx(this.g)))){this.I||u!=4||e==7||(e==8||0>=d?zc(3):zc(2)),Jf(this);var r=this.g.aa();this.Y=r;t:if(yE(this)){var n=cx(this.g);t="";var i=n.length,a=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){rs(this),pc(this);var s="";break t}this.h.i=new Fe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:a&&e==i-1});n.splice(0,i),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=r==200,AF(this.j,this.u,this.A,this.m,this.U,u,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oh(o)){var c=o;break t}}c=null}if(r=c)oo(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gm(this,r);else{this.i=!1,this.o=3,Fr(12),rs(this),pc(this);break e}}this.P?(bE(this,u,s),jm&&this.i&&u==3&&(cE(this.S,this.T,"tick",this.hb),this.T.start())):(oo(this.j,this.m,s,null),Gm(this,s)),u==4&&rs(this),this.i&&!this.I&&(u==4?$E(this.l,this):(this.i=!1,xu(this)))}else r==400&&0<s.indexOf("Unknown SID")?(this.o=3,Fr(12)):(this.o=0,Fr(13)),rs(this),pc(this)}}}catch{}finally{}};function yE(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function bE(t,e,r){let n=!0,i;for(;!t.I&&t.C<r.length;)if(i=DF(t,r),i==Lh){e==4&&(t.o=4,Fr(14),n=!1),oo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Hm){t.o=4,Fr(15),oo(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else oo(t.j,t.m,i,null),Gm(t,i);yE(t)&&i!=Lh&&i!=Hm&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,Fr(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),q0(e),e.K=!0,Fr(11))):(oo(t.j,t.m,r,"[Invalid Chunked Response]"),rs(t),pc(t))}Ee.hb=function(){if(this.g){var t=xn(this.g),e=this.g.fa();this.C<e.length&&(Jf(this),bE(this,t,e),this.i&&t!=4&&xu(this))}};function DF(t,e){var r=t.C,n=e.indexOf(`
`,r);return n==-1?Lh:(r=Number(e.substring(r,n)),isNaN(r)?Hm:(n+=1,n+r>e.length?Lh:(e=e.substr(n,r),t.C=n+r,e)))}Ee.cancel=function(){this.I=!0,rs(this)};function xu(t){t.V=Date.now()+t.O,wE(t,t.O)}function wE(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=bu(br(t.gb,t),e)}function Jf(t){t.B&&(Fe.clearTimeout(t.B),t.B=null)}Ee.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(IF(this.j,this.A),this.K!=2&&(zc(),Fr(17)),rs(this),this.o=2,pc(this)):wE(this,this.V-t)};function pc(t){t.l.G==0||t.I||$E(t.l,t)}function rs(t){Jf(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,R0(t.T),uE(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Gm(t,e){try{var r=t.l;if(r.G!=0&&(r.g==t||Wm(r.h,t))){if(!t.J&&Wm(r.h,t)&&r.G==3){try{var n=r.Fa.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.F+3e3<t.F)Nh(r),rp(r);else break e;H0(r),Fr(18)}}else r.Ba=i[1],0<r.Ba-r.T&&37500>i[2]&&r.L&&r.A==0&&!r.v&&(r.v=bu(br(r.cb,r),6e3));if(1>=AE(r.h)&&r.ja){try{r.ja()}catch{}r.ja=void 0}}else is(r,11)}else if((t.J||r.g==t)&&Nh(r),!Oh(e))for(i=r.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(r.T=c[0],c=c[1],r.G==2)if(c[0]=="c"){r.I=c[1],r.ka=c[2];const u=c[3];u!=null&&(r.ma=u,r.j.info("VER="+r.ma));const d=c[4];d!=null&&(r.Ca=d,r.j.info("SVER="+r.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,r.J=n,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var a=n.h;a.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(a.j=a.l,a.g=new Set,a.h&&(B0(a,a.h),a.h=null))}if(n.D){const w=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(n.za=w,At(n.F,n.D,w))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-t.F,r.j.info("Handshake RTT: "+r.P+"ms")),n=r;var s=t;if(n.sa=qE(n,n.H?n.ka:null,n.V),s.J){IE(n.h,s);var o=s,l=n.J;l&&o.setTimeout(l),o.B&&(Jf(o),xu(o)),n.g=s}else UE(n);0<r.i.length&&ip(r)}else c[0]!="stop"&&c[0]!="close"||is(r,7);else r.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?is(r,7):V0(r):c[0]!="noop"&&r.l&&r.l.wa(c),r.A=0)}}zc(4)}catch{}}function LF(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map!="undefined"&&t instanceof Map||typeof Set!="undefined"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Vf(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function RF(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map!="undefined"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set!="undefined"&&t instanceof Set)){if(Vf(t)||typeof t=="string"){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}e=[],r=0;for(const n in t)e[r++]=n;return e}}}function _E(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Vf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var r=RF(t),n=LF(t),i=n.length,a=0;a<i;a++)e.call(void 0,n[a],r&&r[a],t)}var xE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MF(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var a=t[r].substring(0,n);i=t[r].substring(n+1)}else a=t[r];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function us(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof us){this.h=e!==void 0?e:t.h,Rh(this,t.j),this.s=t.s,this.g=t.g,Mh(this,t.m),this.l=t.l,e=t.i;var r=new $c;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),sx(this,r),this.o=t.o}else t&&(r=String(t).match(xE))?(this.h=!!e,Rh(this,r[1]||"",!0),this.s=Xl(r[2]||""),this.g=Xl(r[3]||"",!0),Mh(this,r[4]),this.l=Xl(r[5]||"",!0),sx(this,r[6]||"",!0),this.o=Xl(r[7]||"")):(this.h=!!e,this.i=new $c(null,this.h))}us.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ql(e,ox,!0),":");var r=this.g;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ql(e,ox,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&t.push("/"),t.push(Ql(r,r.charAt(0)=="/"?FF:jF,!0))),(r=this.i.toString())&&t.push("?",r),(r=this.o)&&t.push("#",Ql(r,UF)),t.join("")};function Dn(t){return new us(t)}function Rh(t,e,r){t.j=r?Xl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Mh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function sx(t,e,r){e instanceof $c?(t.i=e,zF(t.i,t.h)):(r||(e=Ql(e,BF)),t.i=new $c(e,t.h))}function At(t,e,r){t.i.set(e,r)}function Zf(t){return At(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Xl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ql(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,NF),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function NF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ox=/[#\/\?@]/g,jF=/[#\?:]/g,FF=/[#\?]/g,BF=/[#\?@]/g,UF=/#/g;function $c(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ia(t){t.g||(t.g=new Map,t.h=0,t.i&&MF(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}Ee=$c.prototype;Ee.add=function(t,e){Ia(this),this.i=null,t=cl(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function TE(t,e){Ia(t),e=cl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function SE(t,e){return Ia(t),e=cl(t,e),t.g.has(e)}Ee.forEach=function(t,e){Ia(this),this.g.forEach(function(r,n){r.forEach(function(i){t.call(e,i,n,this)},this)},this)};Ee.oa=function(){Ia(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let n=0;n<e.length;n++){const i=t[n];for(let a=0;a<i.length;a++)r.push(e[n])}return r};Ee.W=function(t){Ia(this);let e=[];if(typeof t=="string")SE(this,t)&&(e=e.concat(this.g.get(cl(this,t))));else{t=Array.from(this.g.values());for(let r=0;r<t.length;r++)e=e.concat(t[r])}return e};Ee.set=function(t,e){return Ia(this),this.i=null,t=cl(this,t),SE(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Ee.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function kE(t,e,r){TE(t,e),0<r.length&&(t.i=null,t.g.set(cl(t,e),E0(r)),t.h+=r.length)}Ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var n=e[r];const a=encodeURIComponent(String(n)),s=this.W(n);for(n=0;n<s.length;n++){var i=a;s[n]!==""&&(i+="="+encodeURIComponent(String(s[n]))),t.push(i)}}return this.i=t.join("&")};function cl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function zF(t,e){e&&!t.j&&(Ia(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(TE(this,n),kE(this,i,r))},t)),t.j=e}var $F=class{constructor(t,e){this.h=t,this.g=e}};function EE(t){this.l=t||VF,Fe.PerformanceNavigationTiming?(t=Fe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Fe.g&&Fe.g.Ga&&Fe.g.Ga()&&Fe.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var VF=10;function CE(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function AE(t){return t.h?1:t.g?t.g.size:0}function Wm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function B0(t,e){t.g?t.g.add(e):t.h=e}function IE(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}EE.prototype.cancel=function(){if(this.i=PE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function PE(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.D);return e}return E0(t.i)}function U0(){}U0.prototype.stringify=function(t){return Fe.JSON.stringify(t,void 0)};U0.prototype.parse=function(t){return Fe.JSON.parse(t,void 0)};function HF(){this.g=new U0}function qF(t,e,r){const n=r||"";try{_E(t,function(i,a){let s=i;vu(i)&&(s=L0(i)),e.push(n+a+"="+encodeURIComponent(s))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function GF(t,e){const r=new Kf;if(Fe.Image){const n=new Image;n.onload=Ad(Pd,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Ad(Pd,r,n,"TestLoadImage: error",!1,e),n.onabort=Ad(Pd,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Ad(Pd,r,n,"TestLoadImage: timeout",!1,e),Fe.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Pd(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function Tu(t){this.l=t.ac||null,this.j=t.jb||!1}fr(Tu,N0);Tu.prototype.g=function(){return new ep(this.l,this.j)};Tu.prototype.i=function(t){return function(){return t}}({});function ep(t,e){ir.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=z0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fr(ep,ir);var z0=0;Ee=ep.prototype;Ee.open=function(t,e){if(this.readyState!=z0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vc(this)};Ee.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Fe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};Ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Su(this)),this.readyState=z0};Ee.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vc(this)),this.g&&(this.readyState=3,Vc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Fe.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;OE(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function OE(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}Ee.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Su(this):Vc(this),this.readyState==3&&OE(this)}};Ee.Va=function(t){this.g&&(this.response=this.responseText=t,Su(this))};Ee.Ua=function(t){this.g&&(this.response=t,Su(this))};Ee.ga=function(){this.g&&Su(this)};function Su(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vc(t)}Ee.setRequestHeader=function(t,e){this.v.append(t,e)};Ee.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Ee.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function Vc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ep.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var WF=Fe.JSON.parse;function Lt(t){ir.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=DE,this.K=this.L=!1}fr(Lt,ir);var DE="",KF=/^https?$/i,YF=["POST","PUT"];Ee=Lt.prototype;Ee.Ka=function(t){this.L=t};Ee.da=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Vm.g(),this.C=this.u?ax(this.u):ax(Vm),this.g.onreadystatechange=br(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(a){lx(this,a);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const a of n.keys())r.set(a,n.get(a));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(a=>a.toLowerCase()=="content-type"),i=Fe.FormData&&t instanceof Fe.FormData,!(0<=Kk(YF,e))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,s]of r)this.g.setRequestHeader(a,s);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ME(this),0<this.B&&((this.K=XF(this.g))?(this.g.timeout=this.B,this.g.ontimeout=br(this.qa,this)):this.A=M0(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){lx(this,a)}};function XF(t){return Io&&fF()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Ee.qa=function(){typeof k0!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dr(this,"timeout"),this.abort(8))};function lx(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,LE(t),tp(t)}function LE(t){t.D||(t.D=!0,dr(t,"complete"),dr(t,"error"))}Ee.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,dr(this,"complete"),dr(this,"abort"),tp(this))};Ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tp(this,!0)),Lt.X.M.call(this)};Ee.Ha=function(){this.s||(this.F||this.v||this.l?RE(this):this.fb())};Ee.fb=function(){RE(this)};function RE(t){if(t.h&&typeof k0!="undefined"&&(!t.C[1]||xn(t)!=4||t.aa()!=2)){if(t.v&&xn(t)==4)M0(t.Ha,0,t);else if(dr(t,"readystatechange"),xn(t)==4){t.h=!1;try{const o=t.aa();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=o===0){var i=String(t.H).match(xE)[1]||null;if(!i&&Fe.self&&Fe.self.location){var a=Fe.self.location.protocol;i=a.substr(0,a.length-1)}n=!KF.test(i?i.toLowerCase():"")}r=n}if(r)dr(t,"complete"),dr(t,"success");else{t.m=6;try{var s=2<xn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.aa()+"]",LE(t)}}finally{tp(t)}}}}function tp(t,e){if(t.g){ME(t);const r=t.g,n=t.C[0]?Ph:null;t.g=null,t.C=null,e||dr(t,"ready");try{r.onreadystatechange=n}catch{}}}function ME(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Fe.clearTimeout(t.A),t.A=null)}function xn(t){return t.g?t.g.readyState:0}Ee.aa=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}};Ee.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ee.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),WF(e)}};function cx(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case DE:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}Ee.Ea=function(){return this.m};Ee.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function NE(t){let e="";return A0(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function $0(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=NE(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):At(t,e,r))}function Ml(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function jE(t){this.Ca=0,this.i=[],this.j=new Kf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ml("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ml("baseRetryDelayMs",5e3,t),this.bb=Ml("retryDelaySeedMs",1e4,t),this.$a=Ml("forwardChannelMaxRetries",2,t),this.ta=Ml("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new EE(t&&t.concurrentRequestLimit),this.Fa=new HF,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}Ee=jE.prototype;Ee.ma=8;Ee.G=1;function V0(t){if(FE(t),t.G==3){var e=t.U++,r=Dn(t.F);At(r,"SID",t.I),At(r,"RID",e),At(r,"TYPE","terminate"),ku(t,r),e=new _u(t,t.j,e,void 0),e.K=2,e.v=Zf(Dn(r)),r=!1,Fe.navigator&&Fe.navigator.sendBeacon&&(r=Fe.navigator.sendBeacon(e.v.toString(),"")),!r&&Fe.Image&&(new Image().src=e.v,r=!0),r||(e.g=GE(e.l,null),e.g.da(e.v)),e.F=Date.now(),xu(e)}HE(t)}function rp(t){t.g&&(q0(t),t.g.cancel(),t.g=null)}function FE(t){rp(t),t.u&&(Fe.clearTimeout(t.u),t.u=null),Nh(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Fe.clearTimeout(t.m),t.m=null)}function ip(t){CE(t.h)||t.m||(t.m=!0,sE(t.Ja,t),t.C=0)}function QF(t,e){return AE(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=bu(br(t.Ja,t,e),VE(t,t.C)),t.C++,!0)}Ee.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new _u(this,this.j,t,void 0);let a=this.s;if(this.S&&(a?(a=Jk(a),Zk(a,this.S)):a=this.S),this.o!==null||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){t:{var n=this.i[r];if("__data__"in n.g&&(n=n.g.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=BE(this,i,e),r=Dn(this.F),At(r,"RID",t),At(r,"CVER",22),this.D&&At(r,"X-HTTP-Session-Id",this.D),ku(this,r),a&&(this.N?e="headers="+encodeURIComponent(String(NE(a)))+"&"+e:this.o&&$0(r,this.o,a)),B0(this.h,i),this.Ya&&At(r,"TYPE","init"),this.O?(At(r,"$req",e),At(r,"SID","null"),i.Z=!0,qm(i,r,null)):qm(i,r,e),this.G=2}}else this.G==3&&(t?ux(this,t):this.i.length==0||CE(this.h)||ux(this))};function ux(t,e){var r;e?r=e.m:r=t.U++;const n=Dn(t.F);At(n,"SID",t.I),At(n,"RID",r),At(n,"AID",t.T),ku(t,n),t.o&&t.s&&$0(n,t.o,t.s),r=new _u(t,t.j,r,t.C+1),t.o===null&&(r.H=t.s),e&&(t.i=e.D.concat(t.i)),e=BE(t,r,1e3),r.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),B0(t.h,r),qm(r,n,e)}function ku(t,e){t.ia&&A0(t.ia,function(r,n){At(e,n,r)}),t.l&&_E({},function(r,n){At(e,n,r)})}function BE(t,e,r){r=Math.min(t.i.length,r);var n=t.l?br(t.l.Ra,t.l,t):null;e:{var i=t.i;let a=-1;for(;;){const s=["count="+r];a==-1?0<r?(a=i[0].h,s.push("ofs="+a)):a=0:s.push("ofs="+a);let o=!0;for(let l=0;l<r;l++){let c=i[l].h;const u=i[l].g;if(c-=a,0>c)a=Math.max(0,i[l].h-100),o=!1;else try{qF(u,s,"req"+c+"_")}catch{n&&n(u)}}if(o){n=s.join("&");break e}}}return t=t.i.splice(0,r),e.D=t,n}function UE(t){t.g||t.u||(t.Z=1,sE(t.Ia,t),t.A=0)}function H0(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=bu(br(t.Ia,t),VE(t,t.A)),t.A++,!0)}Ee.Ia=function(){if(this.u=null,zE(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=bu(br(this.eb,this),t)}};Ee.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Fr(10),rp(this),zE(this))};function q0(t){t.B!=null&&(Fe.clearTimeout(t.B),t.B=null)}function zE(t){t.g=new _u(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Dn(t.sa);At(e,"RID","rpc"),At(e,"SID",t.I),At(e,"CI",t.L?"0":"1"),At(e,"AID",t.T),At(e,"TYPE","xmlhttp"),ku(t,e),t.o&&t.s&&$0(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var r=t.g;t=t.ka,r.K=1,r.v=Zf(Dn(e)),r.s=null,r.P=!0,vE(r,t)}Ee.cb=function(){this.v!=null&&(this.v=null,rp(this),H0(this),Fr(19))};function Nh(t){t.v!=null&&(Fe.clearTimeout(t.v),t.v=null)}function $E(t,e){var r=null;if(t.g==e){Nh(t),q0(t),t.g=null;var n=2}else if(Wm(t.h,e))r=e.D,IE(t.h,e),n=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(n==1){r=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;n=Yf(),dr(n,new fE(n,r)),ip(t)}else UE(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(n==1&&QF(t,e)||n==2&&H0(t)))switch(r&&0<r.length&&(e=t.h,e.i=e.i.concat(r)),i){case 1:is(t,5);break;case 4:is(t,10);break;case 3:is(t,6);break;default:is(t,2)}}}function VE(t,e){let r=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(r*=2),r*e}function is(t,e){if(t.j.info("Error code "+e),e==2){var r=null;t.l&&(r=null);var n=br(t.kb,t);r||(r=new us("//www.google.com/images/cleardot.gif"),Fe.location&&Fe.location.protocol=="http"||Rh(r,"https"),Zf(r)),GF(r.toString(),n)}else Fr(2);t.G=0,t.l&&t.l.va(e),HE(t),FE(t)}Ee.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Fr(2)):(this.j.info("Failed to ping google.com"),Fr(1))};function HE(t){if(t.G=0,t.la=[],t.l){const e=PE(t.h);(e.length!=0||t.i.length!=0)&&(Z_(t.la,e),Z_(t.la,t.i),t.h.i.length=0,E0(t.i),t.i.length=0),t.l.ua()}}function qE(t,e,r){var n=r instanceof us?Dn(r):new us(r,void 0);if(n.g!="")e&&(n.g=e+"."+n.g),Mh(n,n.m);else{var i=Fe.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new us(null,void 0);n&&Rh(a,n),e&&(a.g=e),i&&Mh(a,i),r&&(a.l=r),n=a}return r=t.D,e=t.za,r&&e&&At(n,r,e),At(n,"VER",t.ma),ku(t,n),n}function GE(t,e,r){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Da&&!t.ra?new Lt(new Tu({jb:!0})):new Lt(t.ra),e.Ka(t.H),e}function WE(){}Ee=WE.prototype;Ee.xa=function(){};Ee.wa=function(){};Ee.va=function(){};Ee.ua=function(){};Ee.Ra=function(){};function jh(){if(Io&&!(10<=Number(pF)))throw Error("Environmental error: no available transport.")}jh.prototype.g=function(t,e){return new oi(t,e)};function oi(t,e){ir.call(this),this.g=new jE(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Oh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Oh(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ul(this)}fr(oi,ir);oi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,r=this.h||void 0;Fr(0),t.V=e,t.ia=r||{},t.L=t.Y,t.F=qE(t,null,t.V),ip(t)};oi.prototype.close=function(){V0(this.g)};oi.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var r={};r.__data__=t,t=r}else this.v&&(r={},r.__data__=L0(t),t=r);e.i.push(new $F(e.ab++,t)),e.G==3&&ip(e)};oi.prototype.M=function(){this.g.l=null,delete this.j,V0(this.g),delete this.g,oi.X.M.call(this)};function KE(t){j0.call(this);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}fr(KE,j0);function YE(){F0.call(this),this.status=1}fr(YE,F0);function ul(t){this.g=t}fr(ul,WE);ul.prototype.xa=function(){dr(this.g,"a")};ul.prototype.wa=function(t){dr(this.g,new KE(t))};ul.prototype.va=function(t){dr(this.g,new YE)};ul.prototype.ua=function(){dr(this.g,"b")};jh.prototype.createWebChannel=jh.prototype.g;oi.prototype.send=oi.prototype.u;oi.prototype.open=oi.prototype.m;oi.prototype.close=oi.prototype.close;Xf.NO_ERROR=0;Xf.TIMEOUT=8;Xf.HTTP_ERROR=6;pE.COMPLETE="complete";gE.EventType=wu;wu.OPEN="a";wu.CLOSE="b";wu.ERROR="c";wu.MESSAGE="d";ir.prototype.listen=ir.prototype.N;Lt.prototype.listenOnce=Lt.prototype.O;Lt.prototype.getLastError=Lt.prototype.Oa;Lt.prototype.getLastErrorCode=Lt.prototype.Ea;Lt.prototype.getStatus=Lt.prototype.aa;Lt.prototype.getResponseJson=Lt.prototype.Sa;Lt.prototype.getResponseText=Lt.prototype.fa;Lt.prototype.send=Lt.prototype.da;Lt.prototype.setWithCredentials=Lt.prototype.Ka;var JF=function(){return new jh},ZF=function(){return Yf()},Sg=Xf,eB=pE,tB=Ds,dx={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},rB=Tu,Od=gE,iB=Lt;const hx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl="9.15.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new x0("@firebase/firestore");function fx(){return _s.logLevel}function Ce(t,...e){if(_s.logLevel<=nt.DEBUG){const r=e.map(G0);_s.debug(`Firestore (${dl}): ${t}`,...r)}}function Ln(t,...e){if(_s.logLevel<=nt.ERROR){const r=e.map(G0);_s.error(`Firestore (${dl}): ${t}`,...r)}}function Km(t,...e){if(_s.logLevel<=nt.WARN){const r=e.map(G0);_s.warn(`Firestore (${dl}): ${t}`,...r)}}function G0(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t="Unexpected state"){const e=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: `+t;throw Ln(e),new Error(e)}function _t(t,e){t||Me()}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends dn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(pr.UNAUTHENTICATED))}shutdown(){}}class aB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class sB{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new En;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new En,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new En)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string"),new XE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string"),new pr(e)}}class oB{constructor(e,r,n,i){this.h=e,this.l=r,this.m=n,this.g=i,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(_t(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class lB{constructor(e,r,n,i){this.h=e,this.l=r,this.m=n,this.g=i}getToken(){return Promise.resolve(new oB(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uB{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const n=a=>{a.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.A;return this.A=a.token,Ce("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(_t(typeof r.token=="string"),this.A=r.token,new cB(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=dB(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function ct(t,e){return t<e?-1:t>e?1:0}function Po(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Te(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Te(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Te(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Yt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Yt(0,0))}static max(){return new Ve(new Yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,r,n){r===void 0?r=0:r>e.length&&Me(),n===void 0?n=e.length-r:n>e.length-r&&Me(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Hc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Hc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),s=r.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class kt extends Hc{construct(e,r,n){return new kt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Te(J.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new kt(r)}static emptyPath(){return new kt([])}}const hB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends Hc{construct(e,r,n){return new vr(e,r,n)}static isValidIdentifier(e){return hB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Te(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Te(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Te(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(n+=o,i++):(a(),i++)}if(a(),s)throw new Te(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(r)}static emptyPath(){return new vr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(kt.fromString(e))}static fromName(e){return new Ae(kt.fromString(e).popFirst(5))}static empty(){return new Ae(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return kt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new kt(e.slice()))}}function fB(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(n===1e9?new Yt(r+1,0):new Yt(r,n));return new _a(i,Ae.empty(),e)}function pB(t){return new _a(t.readTime,t.key,-1)}class _a{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new _a(Ve.min(),Ae.empty(),-1)}static max(){return new _a(Ve.max(),Ae.empty(),-1)}}function gB(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ae.comparator(t.documentKey,e.documentKey),r!==0?r:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==mB)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new oe((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof oe?r:oe.resolve(r)}catch(r){return oe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):oe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):oe.reject(r)}static resolve(e){return new oe((r,n)=>{r(e)})}static reject(e){return new oe((r,n)=>{n(e)})}static waitFor(e){return new oe((r,n)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&r()},l=>n(l))}),s=!0,a===i&&r()})}static or(e){let r=oe.resolve(!1);for(const n of e)r=r.next(i=>i?oe.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new oe((n,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const c=l;r(e[c]).next(u=>{s[c]=u,++o,o===a&&n(s)},u=>i(u))}})}static doWhile(e,r){return new oe((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function Cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ut(n),this.ct=n=>r.writeSequenceNumber(n))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}W0.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,r,n,i,a,s,o,l){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=l}}class qc{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ls(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function JE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){return t==null}function Fh(t){return t===0&&1/t==-1/0}function bB(t){return typeof t=="number"&&Number.isInteger(t)&&!Fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Tr(r)}static fromUint8Array(e){const r=function(n){let i="";for(let a=0;a<n.length;++a)i+=String.fromCharCode(n[a]);return i}(e);return new Tr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const wB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(t){if(_t(!!t),typeof t=="string"){let e=0;const r=wB.exec(t);if(_t(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oo(t){return typeof t=="string"?Tr.fromBase64String(t):Tr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function eC(t){const e=t.mapValue.fields.__previous_value__;return ZE(e)?eC(e):e}function Gc(t){const e=xa(t.mapValue.fields.__local_write_time__.timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ZE(t)?4:_B(t)?9007199254740991:10:Me()}function on(t,e){if(t===e)return!0;const r=xs(t);if(r!==xs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gc(t).isEqual(Gc(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const a=xa(n.timestampValue),s=xa(i.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,i){return Oo(n.bytesValue).isEqual(Oo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,i){return Ut(n.geoPointValue.latitude)===Ut(i.geoPointValue.latitude)&&Ut(n.geoPointValue.longitude)===Ut(i.geoPointValue.longitude)}(t,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Ut(n.integerValue)===Ut(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const a=Ut(n.doubleValue),s=Ut(i.doubleValue);return a===s?Fh(a)===Fh(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return Po(t.arrayValue.values||[],e.arrayValue.values||[],on);case 10:return function(n,i){const a=n.mapValue.fields||{},s=i.mapValue.fields||{};if(px(a)!==px(s))return!1;for(const o in a)if(a.hasOwnProperty(o)&&(s[o]===void 0||!on(a[o],s[o])))return!1;return!0}(t,e);default:return Me()}}function Wc(t,e){return(t.values||[]).find(r=>on(r,e))!==void 0}function Do(t,e){if(t===e)return 0;const r=xs(t),n=xs(e);if(r!==n)return ct(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return function(i,a){const s=Ut(i.integerValue||i.doubleValue),o=Ut(a.integerValue||a.doubleValue);return s<o?-1:s>o?1:s===o?0:isNaN(s)?isNaN(o)?0:-1:1}(t,e);case 3:return gx(t.timestampValue,e.timestampValue);case 4:return gx(Gc(t),Gc(e));case 5:return ct(t.stringValue,e.stringValue);case 6:return function(i,a){const s=Oo(i),o=Oo(a);return s.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const s=i.split("/"),o=a.split("/");for(let l=0;l<s.length&&l<o.length;l++){const c=ct(s[l],o[l]);if(c!==0)return c}return ct(s.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const s=ct(Ut(i.latitude),Ut(a.latitude));return s!==0?s:ct(Ut(i.longitude),Ut(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,a){const s=i.values||[],o=a.values||[];for(let l=0;l<s.length&&l<o.length;++l){const c=Do(s[l],o[l]);if(c)return c}return ct(s.length,o.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Dd.mapValue&&a===Dd.mapValue)return 0;if(i===Dd.mapValue)return 1;if(a===Dd.mapValue)return-1;const s=i.fields||{},o=Object.keys(s),l=a.fields||{},c=Object.keys(l);o.sort(),c.sort();for(let u=0;u<o.length&&u<c.length;++u){const d=ct(o[u],c[u]);if(d!==0)return d;const h=Do(s[o[u]],l[c[u]]);if(h!==0)return h}return ct(o.length,c.length)}(t.mapValue,e.mapValue);default:throw Me()}}function gx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const r=xa(t),n=xa(e),i=ct(r.seconds,n.seconds);return i!==0?i:ct(r.nanos,n.nanos)}function Lo(t){return Ym(t)}function Ym(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=xa(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Oo(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,Ae.fromName(r).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(n){let i="[",a=!0;for(const s of n.values||[])a?a=!1:i+=",",i+=Ym(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",s=!0;for(const o of i)s?s=!1:a+=",",a+=`${o}:${Ym(n.fields[o])}`;return a+"}"}(t.mapValue):Me();var e,r}function mx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xm(t){return!!t&&"integerValue"in t}function K0(t){return!!t&&"arrayValue"in t}function vx(t){return!!t&&"nullValue"in t}function yx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rh(t){return!!t&&"mapValue"in t}function gc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=gc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=gc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function _B(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,r){this.position=e,this.inclusive=r}}function bx(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=Ae.comparator(Ae.fromName(s.referenceValue),r.key):n=Do(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function wx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!on(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{}class $t extends tC{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new SB(e,r,n):r==="array-contains"?new CB(e,n):r==="in"?new AB(e,n):r==="not-in"?new IB(e,n):r==="array-contains-any"?new PB(e,n):new $t(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new kB(e,n):new EB(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Do(r,this.value)):r!==null&&xs(this.value)===xs(r)&&this.matchesComparison(Do(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ri extends tC{constructor(e,r){super(),this.filters=e,this.op=r,this.ht=null}static create(e,r){return new Ri(e,r)}matches(e){return rC(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(r=>r.isInequality());return e!==null?e.field:null}lt(e){for(const r of this.getFlattenedFilters())if(e(r))return r;return null}}function rC(t){return t.op==="and"}function xB(t){return TB(t)&&rC(t)}function TB(t){for(const e of t.filters)if(e instanceof Ri)return!1;return!0}function iC(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+Lo(t.value);{const e=t.filters.map(r=>iC(r)).join(",");return`${t.op}(${e})`}}function nC(t,e){return t instanceof $t?function(r,n){return n instanceof $t&&r.op===n.op&&r.field.isEqual(n.field)&&on(r.value,n.value)}(t,e):t instanceof Ri?function(r,n){return n instanceof Ri&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((i,a,s)=>i&&nC(a,n.filters[s]),!0):!1}(t,e):void Me()}function aC(t){return t instanceof $t?function(e){return`${e.field.canonicalString()} ${e.op} ${Lo(e.value)}`}(t):t instanceof Ri?function(e){return e.op.toString()+" {"+e.getFilters().map(aC).join(" ,")+"}"}(t):"Filter"}class SB extends $t{constructor(e,r,n){super(e,r,n),this.key=Ae.fromName(n.referenceValue)}matches(e){const r=Ae.comparator(e.key,this.key);return this.matchesComparison(r)}}class kB extends $t{constructor(e,r){super(e,"in",r),this.keys=sC("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class EB extends $t{constructor(e,r){super(e,"not-in",r),this.keys=sC("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function sC(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ae.fromName(n.referenceValue))}class CB extends $t{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return K0(r)&&Wc(r.arrayValue,this.value)}}class AB extends $t{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Wc(this.value.arrayValue,r)}}class IB extends $t{constructor(e,r){super(e,"not-in",r)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Wc(this.value.arrayValue,r)}}class PB extends $t{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!K0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Wc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,r="asc"){this.field=e,this.dir=r}}function OB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,r){this.comparator=e,this.root=r||cr.EMPTY}insert(e,r){return new Qt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ld(this.root,e,this.comparator,!0)}}class Ld{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cr{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n!=null?n:cr.RED,this.left=i!=null?i:cr.EMPTY,this.right=a!=null?a:cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new cr(e!=null?e:this.key,r!=null?r:this.value,n!=null?n:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return cr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(t,e,r,n,i){return this}insert(t,e,r){return new cr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new _x(this.data.getIterator())}getIteratorFrom(e){return new _x(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Xt(this.comparator);return r.data=e,r}}class _x{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new gi([])}unionWith(e){let r=new Xt(vr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new gi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!rh(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(r)}setAll(e){let r=vr.emptyPath(),n={},i=[];e.forEach((s,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}s?n[o.lastSegment()]=gc(s):i.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());rh(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return on(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];rh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Ls(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new Vr(gc(this.value))}}function oC(t){const e=[];return Ls(t.fields,(r,n)=>{const i=new vr([r]);if(rh(n)){const a=oC(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new gi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,r,n,i,a,s,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new mr(e,0,Ve.min(),Ve.min(),Ve.min(),Vr.empty(),0)}static newFoundDocument(e,r,n,i){return new mr(e,1,r,Ve.min(),n,i,0)}static newNoDocument(e,r){return new mr(e,2,r,Ve.min(),Ve.min(),Vr.empty(),0)}static newUnknownDocument(e,r){return new mr(e,3,r,Ve.min(),Ve.min(),Vr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,r=null,n=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.ft=null}}function xx(t,e=null,r=[],n=[],i=null,a=null,s=null){return new DB(t,e,r,n,i,a,s)}function Y0(t){const e=qe(t);if(e.ft===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>iC(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),np(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Lo(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Lo(n)).join(",")),e.ft=r}return e.ft}function X0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!OB(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!nC(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wx(t.startAt,e.startAt)&&wx(t.endAt,e.endAt)}function Qm(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,r=null,n=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.dt=null,this._t=null,this.startAt,this.endAt}}function LB(t,e,r,n,i,a,s,o){return new Au(t,e,r,n,i,a,s,o)}function Q0(t){return new Au(t)}function Tx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lC(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function J0(t){for(const e of t.filters){const r=e.getFirstInequalityField();if(r!==null)return r}return null}function cC(t){return t.collectionGroup!==null}function yo(t){const e=qe(t);if(e.dt===null){e.dt=[];const r=J0(e),n=lC(e);if(r!==null&&n===null)r.isKeyField()||e.dt.push(new mc(r)),e.dt.push(new mc(vr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new mc(vr.keyField(),a))}}}return e.dt}function Rn(t){const e=qe(t);if(!e._t)if(e.limitType==="F")e._t=xx(e.path,e.collectionGroup,yo(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const a of yo(e)){const s=a.dir==="desc"?"asc":"desc";r.push(new mc(a.field,s))}const n=e.endAt?new Bh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Bh(e.startAt.position,e.startAt.inclusive):null;e._t=xx(e.path,e.collectionGroup,r,e.filters,e.limit,n,i)}return e._t}function Jm(t,e){e.getFirstInequalityField(),J0(t);const r=t.filters.concat([e]);return new Au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Zm(t,e,r){return new Au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function ap(t,e){return X0(Rn(t),Rn(e))&&t.limitType===e.limitType}function uC(t){return`${Y0(Rn(t))}|lt:${t.limitType}`}function ev(t){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(n=>aC(n)).join(", ")}]`),np(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Lo(n)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Lo(n)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function Z0(t,e){return e.isFoundDocument()&&function(r,n){const i=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,n){for(const i of yo(r))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const i of r.filters)if(!i.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(i,a,s){const o=bx(i,a,s);return i.inclusive?o<=0:o<0}(r.startAt,yo(r),n)||r.endAt&&!function(i,a,s){const o=bx(i,a,s);return i.inclusive?o>=0:o>0}(r.endAt,yo(r),n))}(t,e)}function RB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dC(t){return(e,r)=>{let n=!1;for(const i of yo(t)){const a=MB(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function MB(t,e,r){const n=t.field.isKeyField()?Ae.comparator(e.key,r.key):function(i,a,s){const o=a.data.field(i),l=s.data.field(i);return o!==null&&l!==null?Do(o,l):Me()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function fC(t){return{integerValue:""+t}}function NB(t,e){return bB(e)?fC(e):hC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this._=void 0}}function jB(t,e,r){return t instanceof Uh?function(n,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Kc?gC(t,e):t instanceof Yc?mC(t,e):function(n,i){const a=pC(n,i),s=Sx(a)+Sx(n.gt);return Xm(a)&&Xm(n.gt)?fC(s):hC(n.yt,s)}(t,e)}function FB(t,e,r){return t instanceof Kc?gC(t,e):t instanceof Yc?mC(t,e):r}function pC(t,e){return t instanceof zh?Xm(r=e)||function(n){return!!n&&"doubleValue"in n}(r)?e:{integerValue:0}:null;var r}class Uh extends sp{}class Kc extends sp{constructor(e){super(),this.elements=e}}function gC(t,e){const r=vC(e);for(const n of t.elements)r.some(i=>on(i,n))||r.push(n);return{arrayValue:{values:r}}}class Yc extends sp{constructor(e){super(),this.elements=e}}function mC(t,e){let r=vC(e);for(const n of t.elements)r=r.filter(i=>!on(i,n));return{arrayValue:{values:r}}}class zh extends sp{constructor(e,r){super(),this.yt=e,this.gt=r}}function Sx(t){return Ut(t.integerValue||t.doubleValue)}function vC(t){return K0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BB(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof Kc&&n instanceof Kc||r instanceof Yc&&n instanceof Yc?Po(r.elements,n.elements,on):r instanceof zh&&n instanceof zh?on(r.gt,n.gt):r instanceof Uh&&n instanceof Uh}(t.transform,e.transform)}class UB{constructor(e,r){this.version=e,this.transformResults=r}}class Oi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class op{}function yC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ey(t.key,Oi.none()):new Iu(t.key,t.data,Oi.none());{const r=t.data,n=Vr.empty();let i=new Xt(vr.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new Pa(t.key,n,new gi(i.toArray()),Oi.none())}}function zB(t,e,r){t instanceof Iu?function(n,i,a){const s=n.value.clone(),o=Ex(n.fieldTransforms,i,a.transformResults);s.setAll(o),i.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,r):t instanceof Pa?function(n,i,a){if(!ih(n.precondition,i))return void i.convertToUnknownDocument(a.version);const s=Ex(n.fieldTransforms,i,a.transformResults),o=i.data;o.setAll(bC(n)),o.setAll(s),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):function(n,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function vc(t,e,r,n){return t instanceof Iu?function(i,a,s,o){if(!ih(i.precondition,a))return s;const l=i.value.clone(),c=Cx(i.fieldTransforms,o,a);return l.setAll(c),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof Pa?function(i,a,s,o){if(!ih(i.precondition,a))return s;const l=Cx(i.fieldTransforms,o,a),c=a.data;return c.setAll(bC(i)),c.setAll(l),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),s===null?null:s.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(t,e,r,n):function(i,a,s){return ih(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,r)}function $B(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=pC(n.transform,i||null);a!=null&&(r===null&&(r=Vr.empty()),r.set(n.field,a))}return r||null}function kx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&Po(r,n,(i,a)=>BB(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Iu extends op{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pa extends op{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function bC(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Ex(t,e,r){const n=new Map;_t(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);n.set(a.field,FB(s,o,r[i]))}return n}function Cx(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,jB(a,s,e))}return n}class ey extends op{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VB extends op{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ze;function qB(t){switch(t){default:return Me();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function wC(t){if(t===void 0)return Ln("GRPC error has no .code"),J.UNKNOWN;switch(t){case Bt.OK:return J.OK;case Bt.CANCELLED:return J.CANCELLED;case Bt.UNKNOWN:return J.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return J.INTERNAL;case Bt.UNAVAILABLE:return J.UNAVAILABLE;case Bt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Bt.NOT_FOUND:return J.NOT_FOUND;case Bt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Bt.ABORTED:return J.ABORTED;case Bt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Bt.DATA_LOSS:return J.DATA_LOSS;default:return Me()}}(Ze=Bt||(Bt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=new Qt(Ae.comparator);function Mn(){return GB}const _C=new Qt(Ae.comparator);function Jl(...t){let e=_C;for(const r of t)e=e.insert(r.key,r);return e}function xC(t){let e=_C;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ns(){return yc()}function TC(){return yc()}function yc(){return new hl(t=>t.toString(),(t,e)=>t.isEqual(e))}const WB=new Qt(Ae.comparator),KB=new Xt(Ae.comparator);function Je(...t){let e=KB;for(const r of t)e=e.add(r);return e}const YB=new Xt(ct);function SC(){return YB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new lp(Ve.min(),i,SC(),Mn(),Je())}}class Pu{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Pu(n,r,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,r,n,i){this.It=e,this.removedTargetIds=r,this.key=n,this.Tt=i}}class kC{constructor(e,r){this.targetId=e,this.Et=r}}class EC{constructor(e,r,n=Tr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class Ax{constructor(){this.At=0,this.Rt=Px(),this.bt=Tr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Je(),r=Je(),n=Je();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Me()}}),new Pu(this.bt,this.Pt,e,r,n)}xt(){this.vt=!1,this.Rt=Px()}Nt(e,r){this.vt=!0,this.Rt=this.Rt.insert(e,r)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class XB{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Mn(),this.qt=Ix(),this.Ut=new Xt(ct)}Kt(e){for(const r of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt);for(const r of e.removedTargetIds)this.Qt(r,e.key,e.Tt)}jt(e){this.forEachTarget(e,r=>{const n=this.Wt(r);switch(e.state){case 0:this.zt(r)&&n.Dt(e.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(e.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(r);break;case 3:this.zt(r)&&(n.Ft(),n.Dt(e.resumeToken));break;case 4:this.zt(r)&&(this.Ht(r),n.Dt(e.resumeToken));break;default:Me()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Bt.forEach((n,i)=>{this.zt(i)&&r(i)})}Jt(e){const r=e.targetId,n=e.Et.count,i=this.Yt(r);if(i){const a=i.target;if(Qm(a))if(n===0){const s=new Ae(a.path);this.Qt(r,s,mr.newNoDocument(s,Ve.min()))}else _t(n===1);else this.Xt(r)!==n&&(this.Ht(r),this.Ut=this.Ut.add(r))}}Zt(e){const r=new Map;this.Bt.forEach((a,s)=>{const o=this.Yt(s);if(o){if(a.current&&Qm(o.target)){const l=new Ae(o.target.path);this.Lt.get(l)!==null||this.te(s,l)||this.Qt(s,l,mr.newNoDocument(l,e))}a.St&&(r.set(s,a.Ct()),a.xt())}});let n=Je();this.qt.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const c=this.Yt(l);return!c||c.purpose===2||(o=!1,!1)}),o&&(n=n.add(a))}),this.Lt.forEach((a,s)=>s.setReadTime(e));const i=new lp(e,r,this.Ut,this.Lt,n);return this.Lt=Mn(),this.qt=Ix(),this.Ut=new Xt(ct),i}Gt(e,r){if(!this.zt(e))return;const n=this.te(e,r.key)?2:0;this.Wt(e).Nt(r.key,n),this.Lt=this.Lt.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ee(r.key).add(e))}Qt(e,r,n){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,r)?i.Nt(r,1):i.kt(r),this.qt=this.qt.insert(r,this.ee(r).delete(e)),n&&(this.Lt=this.Lt.insert(r,n))}removeTarget(e){this.Bt.delete(e)}Xt(e){const r=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let r=this.Bt.get(e);return r||(r=new Ax,this.Bt.set(e,r)),r}ee(e){let r=this.qt.get(e);return r||(r=new Xt(ct),this.qt=this.qt.insert(e,r)),r}zt(e){const r=this.Yt(e)!==null;return r||Ce("WatchChangeAggregator","Detected inactive target",e),r}Yt(e){const r=this.Bt.get(e);return r&&r.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Ax),this.$t.getRemoteKeysForTarget(e).forEach(r=>{this.Qt(e,r,null)})}te(e,r){return this.$t.getRemoteKeysForTarget(e).has(r)}}function Ix(){return new Qt(Ae.comparator)}function Px(){return new Qt(Ae.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),JB=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),ZB=(()=>({and:"AND",or:"OR"}))();class e3{constructor(e,r){this.databaseId=e,this.wt=r}}function $h(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CC(t,e){return t.wt?e.toBase64():e.toUint8Array()}function t3(t,e){return $h(t,e.toTimestamp())}function Ji(t){return _t(!!t),Ve.fromTimestamp(function(e){const r=xa(e);return new Yt(r.seconds,r.nanos)}(t))}function ty(t,e){return function(r){return new kt(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function AC(t){const e=kt.fromString(t);return _t(DC(e)),e}function tv(t,e){return ty(t.databaseId,e.path)}function kg(t,e){const r=AC(e);if(r.get(1)!==t.databaseId.projectId)throw new Te(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Te(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ae(IC(r))}function rv(t,e){return ty(t.databaseId,e)}function r3(t){const e=AC(t);return e.length===4?kt.emptyPath():IC(e)}function iv(t){return new kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IC(t){return _t(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ox(t,e,r){return{name:tv(t,e),fields:r.value.mapValue.fields}}function i3(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(l,c){return l.wt?(_t(c===void 0||typeof c=="string"),Tr.fromBase64String(c||"")):(_t(c===void 0||c instanceof Uint8Array),Tr.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(l){const c=l.code===void 0?J.UNKNOWN:wC(l.code);return new Te(c,l.message||"")}(s);r=new EC(n,i,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=kg(t,n.document.name),a=Ji(n.document.updateTime),s=n.document.createTime?Ji(n.document.createTime):Ve.min(),o=new Vr({mapValue:{fields:n.document.fields}}),l=mr.newFoundDocument(i,a,s,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new nh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=kg(t,n.document),a=n.readTime?Ji(n.readTime):Ve.min(),s=mr.newNoDocument(i,a),o=n.removedTargetIds||[];r=new nh([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=kg(t,n.document),a=n.removedTargetIds||[];r=new nh([],a,i,null)}else{if(!("filter"in e))return Me();{e.filter;const n=e.filter;n.targetId;const i=n.count||0,a=new HB(i),s=n.targetId;r=new kC(s,a)}}return r}function n3(t,e){let r;if(e instanceof Iu)r={update:Ox(t,e.key,e.value)};else if(e instanceof ey)r={delete:tv(t,e.key)};else if(e instanceof Pa)r={update:Ox(t,e.key,e.data),updateMask:f3(e.fieldMask)};else{if(!(e instanceof VB))return Me();r={verify:tv(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const s=a.transform;if(s instanceof Uh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Kc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Yc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof zh)return{fieldPath:a.field.canonicalString(),increment:s.gt};throw Me()}(0,n))),e.precondition.isNone||(r.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:t3(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Me()}(t,e.precondition)),r}function a3(t,e){return t&&t.length>0?(_t(e!==void 0),t.map(r=>function(n,i){let a=n.updateTime?Ji(n.updateTime):Ji(i);return a.isEqual(Ve.min())&&(a=Ji(i)),new UB(a,n.transformResults||[])}(r,e))):[]}function s3(t,e){return{documents:[rv(t,e.path)]}}function o3(t,e){const r={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(r.parent=rv(t,n),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=rv(t,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(l){if(l.length!==0)return OC(Ri.create(l,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:ro(u.field),direction:u3(u.dir)}}(c))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const s=function(l,c){return l.wt||np(c)?c:{value:c}}(t,e.limit);var o;return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt={before:(o=e.startAt).inclusive,values:o.position}),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),r}function l3(t){let e=r3(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){_t(n===1);const u=r.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];r.where&&(a=function(u){const d=PC(u);return d instanceof Ri&&xB(d)?d.getFilters():[d]}(r.where));let s=[];r.orderBy&&(s=r.orderBy.map(u=>function(d){return new mc(io(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(u)));let o=null;r.limit&&(o=function(u){let d;return d=typeof u=="object"?u.value:u,np(d)?null:d}(r.limit));let l=null;r.startAt&&(l=function(u){const d=!!u.before,h=u.values||[];return new Bh(h,d)}(r.startAt));let c=null;return r.endAt&&(c=function(u){const d=!u.before,h=u.values||[];return new Bh(h,d)}(r.endAt)),LB(e,i,s,a,o,"F",l,c)}function c3(t,e){const r=function(n,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Me()}}(0,e.purpose);return r==null?null:{"goog-listen-tags":r}}function PC(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=io(e.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=io(e.unaryFilter.field);return $t.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=io(e.unaryFilter.field);return $t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=io(e.unaryFilter.field);return $t.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(t):t.fieldFilter!==void 0?function(e){return $t.create(io(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Ri.create(e.compositeFilter.filters.map(r=>PC(r)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Me()}}(e.compositeFilter.op))}(t):Me()}function u3(t){return QB[t]}function d3(t){return JB[t]}function h3(t){return ZB[t]}function ro(t){return{fieldPath:t.canonicalString()}}function io(t){return vr.fromServerFormat(t.fieldPath)}function OC(t){return t instanceof $t?function(e){if(e.op==="=="){if(yx(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NAN"}};if(vx(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(yx(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NOT_NAN"}};if(vx(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(e.field),op:d3(e.op),value:e.value}}}(t):t instanceof Ri?function(e){const r=e.getFilters().map(n=>OC(n));return r.length===1?r[0]:{compositeFilter:{op:h3(e.op),filters:r}}}(t):Me()}function f3(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function DC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&zB(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=vc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=vc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=TC();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=r.has(i.key)?null:o;const l=yC(s,o);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ve.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Je())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,(r,n)=>kx(r,n))&&Po(this.baseMutations,e.baseMutations,(r,n)=>kx(r,n))}}class ry{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){_t(e.mutations.length===n.length);let i=WB;const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new ry(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,r,n,i,a=Ve.min(),s=Ve.min(),o=Tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.ie=e}}function v3(t){const e=l3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.Je=new b3}addToCollectionParentIndex(e,r){return this.Je.add(r),oe.resolve()}getCollectionParents(e,r){return oe.resolve(this.Je.getEntries(r))}addFieldIndex(e,r){return oe.resolve()}deleteFieldIndex(e,r){return oe.resolve()}getDocumentsMatchingTarget(e,r){return oe.resolve(null)}getIndexType(e,r){return oe.resolve(0)}getFieldIndexes(e,r){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,r){return oe.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,r){return oe.resolve(_a.min())}updateCollectionGroup(e,r,n){return oe.resolve()}updateIndexEntries(e,r){return oe.resolve()}}class b3{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Xt(kt.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Xt(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ro(0)}static vn(){return new Ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.changes=new hl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?oe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&vc(n.mutation,i,gi.empty(),Yt.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Je()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Je()){const i=ns();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let s=Jl();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=ns();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Je()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{r.set(s,o)})})}computeViews(e,r,n,i){let a=Mn();const s=yc(),o=yc();return r.forEach((l,c)=>{const u=n.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Pa)?a=a.insert(c.key,c):u!==void 0&&(s.set(c.key,u.mutation.getFieldMask()),vc(u.mutation,c,u.mutation.getFieldMask(),Yt.now()))}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((c,u)=>s.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new _3(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=yc();let i=new Qt((s,o)=>s-o),a=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const o of s)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||gi.empty();u=o.applyToLocalView(c,u),n.set(l,u);const d=(i.get(o.batchId)||Je()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=TC();u.forEach(h=>{if(!a.has(h)){const p=yC(r.get(h),n.get(h));p!==null&&d.set(h,p),a=a.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return oe.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n){return function(i){return Ae.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):cC(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n):this.getDocumentsMatchingCollectionQuery(e,r,n)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):oe.resolve(ns());let o=-1,l=a;return s.next(c=>oe.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),a.get(u)?oe.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,l,c,Je())).next(u=>({batchId:o,changes:xC(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ae(r)).next(n=>{let i=Jl();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n){const i=r.collectionGroup;let a=Jl();return this.indexManager.getCollectionParents(e,i).next(s=>oe.forEach(s,o=>{const l=function(c,u){return new Au(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(r,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,n).next(c=>{c.forEach((u,d)=>{a=a.insert(u,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n){let i;return this.remoteDocumentCache.getAllFromCollection(e,r.path,n).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId))).next(a=>{a.forEach((o,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,mr.newInvalidDocument(c)))});let s=Jl();return i.forEach((o,l)=>{const c=a.get(o);c!==void 0&&vc(c.mutation,l,gi.empty(),Yt.now()),Z0(r,l)&&(s=s.insert(o,l))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,r){return oe.resolve(this.Zn.get(r))}saveBundleMetadata(e,r){var n;return this.Zn.set(r.id,{id:(n=r).id,version:n.version,createTime:Ji(n.createTime)}),oe.resolve()}getNamedQuery(e,r){return oe.resolve(this.ts.get(r))}saveNamedQuery(e,r){return this.ts.set(r.name,function(n){return{name:n.name,query:v3(n.bundledQuery),readTime:Ji(n.readTime)}}(r)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(){this.overlays=new Qt(Ae.comparator),this.es=new Map}getOverlay(e,r){return oe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ns();return oe.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.oe(e,r,a)}),oe.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.es.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(n)),oe.resolve()}getOverlaysForCollection(e,r,n){const i=ns(),a=r.length+1,s=new Ae(r.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>n&&i.set(l.getKey(),l)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new Qt((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=a.get(c.largestBatchId);u===null&&(u=ns(),a=a.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=ns(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=i)););return oe.resolve(o)}oe(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.es.get(i.largestBatchId).delete(n.key);this.es.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new g3(r,n));let a=this.es.get(r);a===void 0&&(a=Je(),this.es.set(r,a)),this.es.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.ns=new Xt(Jt.ss),this.rs=new Xt(Jt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,r){const n=new Jt(e,r);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.cs(new Jt(e,r))}hs(e,r){e.forEach(n=>this.removeReference(n,r))}ls(e){const r=new Ae(new kt([])),n=new Jt(r,e),i=new Jt(r,e+1),a=[];return this.rs.forEachInRange([n,i],s=>{this.cs(s),a.push(s.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const r=new Ae(new kt([])),n=new Jt(r,e),i=new Jt(r,e+1);let a=Je();return this.rs.forEachInRange([n,i],s=>{a=a.add(s.key)}),a}containsKey(e){const r=new Jt(e,0),n=this.ns.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Jt{constructor(e,r){this.key=e,this._s=r}static ss(e,r){return Ae.comparator(e.key,r.key)||ct(e._s,r._s)}static os(e,r){return ct(e._s,r._s)||Ae.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this.gs=new Xt(Jt.ss)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new p3(a,r,n,i);this.mutationQueue.push(s);for(const o of i)this.gs=this.gs.add(new Jt(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return oe.resolve(s)}lookupMutationBatch(e,r){return oe.resolve(this.ys(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ps(n),a=i<0?0:i;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Jt(r,0),i=new Jt(r,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([n,i],s=>{const o=this.ys(s._s);a.push(o)}),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Xt(ct);return r.forEach(i=>{const a=new Jt(i,0),s=new Jt(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,s],o=>{n=n.add(o._s)})}),oe.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;Ae.isDocumentKey(a)||(a=a.child(""));const s=new Jt(new Ae(a),0);let o=new Xt(ct);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(o=o.add(l._s)),!0)},s),oe.resolve(this.Is(o))}Is(e){const r=[];return e.forEach(n=>{const i=this.ys(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){_t(this.Ts(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.gs;return oe.forEach(r.mutations,i=>{const a=new Jt(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=n})}An(e){}containsKey(e,r){const n=new Jt(r,0),i=this.gs.firstAfterOrEqual(n);return oe.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Ts(e,r){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.Es=e,this.docs=new Qt(Ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.Es(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return oe.resolve(n?n.document.mutableCopy():mr.newInvalidDocument(r))}getEntries(e,r){let n=Mn();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():mr.newInvalidDocument(i))}),oe.resolve(n)}getAllFromCollection(e,r,n){let i=Mn();const a=new Ae(r.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:o,value:{document:l}}=s.getNext();if(!r.isPrefixOf(o.path))break;o.path.length>r.length+1||gB(pB(l),n)<=0||(i=i.insert(l.key,l.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,r,n,i){Me()}As(e,r){return oe.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new C3(this)}getSize(e){return oe.resolve(this.size)}}class C3 extends w3{constructor(e){super(),this.Yn=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(n)}),oe.waitFor(r)}getFromCache(e,r){return this.Yn.getEntry(e,r)}getAllFromCache(e,r){return this.Yn.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.persistence=e,this.Rs=new hl(r=>Y0(r),X0),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.bs=0,this.Ps=new iy,this.targetCount=0,this.vs=Ro.Pn()}forEachTarget(e,r){return this.Rs.forEach((n,i)=>r(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.bs&&(this.bs=r),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.vs=new Ro(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.Dn(r),this.targetCount+=1,oe.resolve()}updateTargetData(e,r){return this.Dn(r),oe.resolve()}removeTargetData(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Rs.forEach((s,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Rs.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),oe.waitFor(a).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,r){const n=this.Rs.get(r)||null;return oe.resolve(n)}addMatchingKeys(e,r,n){return this.Ps.us(r,n),oe.resolve()}removeMatchingKeys(e,r,n){this.Ps.hs(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),oe.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Ps.ls(r),oe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Ps.ds(r);return oe.resolve(n)}containsKey(e,r){return oe.resolve(this.Ps.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,r){this.Vs={},this.overlays={},this.Ss=new W0(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new A3(this),this.indexManager=new y3,this.remoteDocumentCache=function(n){return new E3(n)}(n=>this.referenceDelegate.xs(n)),this.yt=new m3(r),this.Ns=new T3(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new S3,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Vs[e.toKey()];return n||(n=new k3(r,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,r,n){Ce("MemoryPersistence","Starting transaction:",e);const i=new P3(this.Ss.next());return this.referenceDelegate.ks(),n(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,r){return oe.or(Object.values(this.Vs).map(n=>()=>n.containsKey(e,r)))}}class P3 extends vB{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.Fs=new iy,this.$s=null}static Bs(e){return new ny(e)}get Ls(){if(this.$s)return this.$s;throw Me()}addReference(e,r,n){return this.Fs.addReference(n,r),this.Ls.delete(n.toString()),oe.resolve()}removeReference(e,r,n){return this.Fs.removeReference(n,r),this.Ls.add(n.toString()),oe.resolve()}markPotentiallyOrphaned(e,r){return this.Ls.add(r.toString()),oe.resolve()}removeTarget(e,r){this.Fs.ls(r.targetId).forEach(i=>this.Ls.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}ks(){this.$s=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,n=>{const i=Ae.fromPath(n);return this.qs(e,i).next(a=>{a||r.removeEntry(i,Ve.min())})}).next(()=>(this.$s=null,r.apply(e)))}updateLimboDocument(e,r){return this.qs(e,r).next(n=>{n?this.Ls.delete(r.toString()):this.Ls.add(r.toString())})}xs(e){return 0}qs(e,r){return oe.or([()=>oe.resolve(this.Fs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ms(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Si=n,this.Di=i}static Ci(e,r){let n=Je(),i=Je();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ay(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.xi=!1}initialize(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}getDocumentsMatchingQuery(e,r,n,i){return this.ki(e,r).next(a=>a||this.Oi(e,r,i,n)).next(a=>a||this.Mi(e,r))}ki(e,r){if(Tx(r))return oe.resolve(null);let n=Rn(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Zm(r,null,"F"),n=Rn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const s=Je(...a);return this.Ni.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Fi(r,o);return this.$i(r,c,s,l.readTime)?this.ki(e,Zm(r,null,"F")):this.Bi(e,c,r,l)}))})))}Oi(e,r,n,i){return Tx(r)||i.isEqual(Ve.min())?this.Mi(e,r):this.Ni.getDocuments(e,n).next(a=>{const s=this.Fi(r,a);return this.$i(r,s,n,i)?this.Mi(e,r):(fx()<=nt.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ev(r)),this.Bi(e,s,r,fB(i,-1)))})}Fi(e,r){let n=new Xt(dC(e));return r.forEach((i,a)=>{Z0(e,a)&&(n=n.add(a))}),n}$i(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,r){return fx()<=nt.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",ev(r)),this.Ni.getDocumentsMatchingQuery(e,r,_a.min())}Bi(e,r,n,i){return this.Ni.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,r,n,i){this.persistence=e,this.Li=r,this.yt=i,this.qi=new Qt(ct),this.Ui=new hl(a=>Y0(a),X0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x3(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.qi))}}function L3(t,e,r,n){return new D3(t,e,r,n)}async function LC(t,e){const r=qe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.Qi(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const s=[],o=[];let l=Je();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of a){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({ji:c,removedBatchIds:s,addedBatchIds:o}))})})}function R3(t,e){const r=qe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.Gi.newChangeBuffer({trackRemovals:!0});return function(s,o,l,c){const u=l.batch,d=u.keys();let h=oe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(o,p)).next(y=>{const w=l.docVersions.get(p);_t(w!==null),y.version.compareTo(w)<0&&(u.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),c.addEntry(y)))})}),h.next(()=>s.mutationQueue.removeMutationBatch(o,u))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(s){let o=Je();for(let l=0;l<s.mutationResults.length;++l)s.mutationResults[l].transformResults.length>0&&(o=o.add(s.batch.mutations[l].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function RC(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Cs.getLastRemoteSnapshotVersion(r))}function M3(t,e){const r=qe(t),n=e.snapshotVersion;let i=r.qi;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=r.Gi.newChangeBuffer({trackRemovals:!0});i=r.qi;const o=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;o.push(r.Cs.removeMatchingKeys(a,u.removedDocuments,d).next(()=>r.Cs.addMatchingKeys(a,u.addedDocuments,d)));let p=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.has(d)?p=p.withResumeToken(Tr.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),i=i.insert(d,p),function(y,w,v){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,p,u)&&o.push(r.Cs.updateTargetData(a,p))});let l=Mn(),c=Je();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,u))}),o.push(N3(a,s,e.documentUpdates).next(u=>{l=u.Wi,c=u.zi})),!n.isEqual(Ve.min())){const u=r.Cs.getLastRemoteSnapshotVersion(a).next(d=>r.Cs.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(u)}return oe.waitFor(o).next(()=>s.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(r.qi=i,a))}function N3(t,e,r){let n=Je(),i=Je();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let s=Mn();return r.forEach((o,l)=>{const c=a.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ve.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):Ce("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Wi:s,zi:i}})}function j3(t,e){const r=qe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function F3(t,e){const r=qe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Cs.getTargetData(n,e).next(a=>a?(i=a,oe.resolve(i)):r.Cs.allocateTargetId(n).next(s=>(i=new ds(e,s,0,n.currentSequenceNumber),r.Cs.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.qi.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.qi=r.qi.insert(n.targetId,n),r.Ui.set(e,n.targetId)),n})}async function nv(t,e,r){const n=qe(t),i=n.qi.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Cu(s))throw s;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.qi=n.qi.remove(e),n.Ui.delete(i.target)}function Dx(t,e,r){const n=qe(t);let i=Ve.min(),a=Je();return n.persistence.runTransaction("Execute query","readonly",s=>function(o,l,c){const u=qe(o),d=u.Ui.get(c);return d!==void 0?oe.resolve(u.qi.get(d)):u.Cs.getTargetData(l,c)}(n,s,Rn(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Cs.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>n.Li.getDocumentsMatchingQuery(s,e,r?i:Ve.min(),r?a:Je())).next(o=>(B3(n,RB(e),o),{documents:o,Hi:a})))}function B3(t,e,r){let n=t.Ki.get(e)||Ve.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Ki.set(e,n)}class Lx{constructor(){this.activeTargetIds=SC()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U3{constructor(){this.Lr=new Lx,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,r,n){this.qr[e]=r}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Lx,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http";this.oo=r+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,r,n,i,a){const s=this.ho(e,r);Ce("RestConnection","Sending: ",s,n);const o={};return this.lo(o,i,a),this.fo(e,s,o,n).then(l=>(Ce("RestConnection","Received: ",l),l),l=>{throw Km("RestConnection",`${e} failed with error: `,l,"url: ",s,"request:",n),l})}_o(e,r,n,i,a,s){return this.ao(e,r,n,i,a)}lo(e,r,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}ho(e,r){const n=$3[e];return`${this.oo}/v1/${r}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,r,n,i){return new Promise((a,s)=>{const o=new iB;o.setWithCredentials(!0),o.listenOnce(eB.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Sg.NO_ERROR:const c=o.getResponseJson();Ce("Connection","XHR received:",JSON.stringify(c)),a(c);break;case Sg.TIMEOUT:Ce("Connection",'RPC "'+e+'" timed out'),s(new Te(J.DEADLINE_EXCEEDED,"Request time out"));break;case Sg.HTTP_ERROR:const u=o.getStatus();if(Ce("Connection",'RPC "'+e+'" failed with status:',u,"response text:",o.getResponseText()),u>0){let d=o.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(w)>=0?w:J.UNKNOWN}(h.status);s(new Te(p,h.message))}else s(new Te(J.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Te(J.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{Ce("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);o.send(r,"POST",l,n,15)})}wo(e,r,n){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=JF(),s=ZF(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new rB({})),this.lo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const l=i.join("");Ce("Connection","Creating WebChannel: "+l,o);const c=a.createWebChannel(l,o);let u=!1,d=!1;const h=new V3({Hr:y=>{d?Ce("Connection","Not sending because WebChannel is closed:",y):(u||(Ce("Connection","Opening WebChannel transport."),c.open(),u=!0),Ce("Connection","WebChannel sending:",y),c.send(y))},Jr:()=>c.close()}),p=(y,w,v)=>{y.listen(w,T=>{try{v(T)}catch(k){setTimeout(()=>{throw k},0)}})};return p(c,Od.EventType.OPEN,()=>{d||Ce("Connection","WebChannel transport opened.")}),p(c,Od.EventType.CLOSE,()=>{d||(d=!0,Ce("Connection","WebChannel transport closed"),h.io())}),p(c,Od.EventType.ERROR,y=>{d||(d=!0,Km("Connection","WebChannel transport errored:",y),h.io(new Te(J.UNAVAILABLE,"The operation could not be completed")))}),p(c,Od.EventType.MESSAGE,y=>{var w;if(!d){const v=y.data[0];_t(!!v);const T=v,k=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(k){Ce("Connection","WebChannel received error:",k);const A=k.status;let E=function(F){const j=Bt[F];if(j!==void 0)return wC(j)}(A),I=k.message;E===void 0&&(E=J.INTERNAL,I="Unknown error status: "+A+" with message "+k.message),d=!0,h.io(new Te(E,I)),c.close()}else Ce("Connection","WebChannel received:",v),h.ro(v)}}),p(s,tB.STAT_EVENT,y=>{y.stat===dx.PROXY?Ce("Connection","Detected buffering proxy"):y.stat===dx.NOPROXY&&Ce("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function Eg(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t){return new e3(t,!0)}class MC{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=r,this.mo=n,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const r=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),i=Math.max(0,r-n);i>0&&Ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,r,n,i,a,s,o,l){this.Hs=e,this.vo=n,this.Vo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new MC(e,r)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,r){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():r&&r.code===J.RESOURCE_EXHAUSTED?(Ln(r.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):r&&r.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(r)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),r=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.So===r&&this.Go(n,i)},n=>{e(()=>{const i=new Te(J.UNKNOWN,"Fetching auth token failed: "+n.message);return this.Qo(i)})})}Go(e,r){const n=this.Ko(this.So);this.stream=this.jo(e,r),this.stream.Yr(()=>{n(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{n(()=>this.Qo(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return r=>{this.Hs.enqueueAndForget(()=>this.So===e?r():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q3 extends NC{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.yt=a}jo(e,r){return this.connection.wo("Listen",e,r)}onMessage(e){this.xo.reset();const r=i3(this.yt,e),n=function(i){if(!("targetChange"in i))return Ve.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ve.min():a.readTime?Ji(a.readTime):Ve.min()}(e);return this.listener.Wo(r,n)}zo(e){const r={};r.database=iv(this.yt),r.addTarget=function(i,a){let s;const o=a.target;return s=Qm(o)?{documents:s3(i,o)}:{query:o3(i,o)},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?s.resumeToken=CC(i,a.resumeToken):a.snapshotVersion.compareTo(Ve.min())>0&&(s.readTime=$h(i,a.snapshotVersion.toTimestamp())),s}(this.yt,e);const n=c3(this.yt,e);n&&(r.labels=n),this.Bo(r)}Ho(e){const r={};r.database=iv(this.yt),r.removeTarget=e,this.Bo(r)}}class G3 extends NC{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,r){return this.connection.wo("Write",e,r)}onMessage(e){if(_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const r=a3(e.writeResults,e.commitTime),n=Ji(e.commitTime);return this.listener.Zo(n,r)}return _t(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=iv(this.yt),this.Bo(e)}Xo(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>n3(this.yt,n))};this.Bo(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3 extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Te(J.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,r,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,r,n,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Te(J.UNKNOWN,i.toString())})}_o(e,r,n,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection._o(e,r,n,a,s,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(J.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class K3{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ln(r),this.ou=!1):Ce("OnlineStateTracker",r)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(s=>{n.enqueueAndForget(async()=>{Rs(this)&&(Ce("RemoteStore","Restarting streams for network reachability change."),await async function(o){const l=qe(o);l._u.add(4),await Ou(l),l.gu.set("Unknown"),l._u.delete(4),await up(l)}(this))})}),this.gu=new K3(n,i)}}async function up(t){if(Rs(t))for(const e of t.wu)await e(!0)}async function Ou(t){for(const e of t.wu)await e(!1)}function jC(t,e){const r=qe(t);r.du.has(e.targetId)||(r.du.set(e.targetId,e),ly(r)?oy(r):fl(r).ko()&&sy(r,e))}function FC(t,e){const r=qe(t),n=fl(r);r.du.delete(e),n.ko()&&BC(r,e),r.du.size===0&&(n.ko()?n.Fo():Rs(r)&&r.gu.set("Unknown"))}function sy(t,e){t.yu.Ot(e.targetId),fl(t).zo(e)}function BC(t,e){t.yu.Ot(e),fl(t).Ho(e)}function oy(t){t.yu=new XB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),fl(t).start(),t.gu.uu()}function ly(t){return Rs(t)&&!fl(t).No()&&t.du.size>0}function Rs(t){return qe(t)._u.size===0}function UC(t){t.yu=void 0}async function X3(t){t.du.forEach((e,r)=>{sy(t,e)})}async function Q3(t,e){UC(t),ly(t)?(t.gu.hu(e),oy(t)):t.gu.set("Unknown")}async function J3(t,e,r){if(t.gu.set("Online"),e instanceof EC&&e.state===2&&e.cause)try{await async function(n,i){const a=i.cause;for(const s of i.targetIds)n.du.has(s)&&(await n.remoteSyncer.rejectListen(s,a),n.du.delete(s),n.yu.removeTarget(s))}(t,e)}catch(n){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Vh(t,n)}else if(e instanceof nh?t.yu.Kt(e):e instanceof kC?t.yu.Jt(e):t.yu.jt(e),!r.isEqual(Ve.min()))try{const n=await RC(t.localStore);r.compareTo(n)>=0&&await function(i,a){const s=i.yu.Zt(a);return s.targetChanges.forEach((o,l)=>{if(o.resumeToken.approximateByteSize()>0){const c=i.du.get(l);c&&i.du.set(l,c.withResumeToken(o.resumeToken,a))}}),s.targetMismatches.forEach(o=>{const l=i.du.get(o);if(!l)return;i.du.set(o,l.withResumeToken(Tr.EMPTY_BYTE_STRING,l.snapshotVersion)),BC(i,o);const c=new ds(l.target,o,1,l.sequenceNumber);sy(i,c)}),i.remoteSyncer.applyRemoteEvent(s)}(t,r)}catch(n){Ce("RemoteStore","Failed to raise snapshot:",n),await Vh(t,n)}}async function Vh(t,e,r){if(!Cu(e))throw e;t._u.add(1),await Ou(t),t.gu.set("Offline"),r||(r=()=>RC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ce("RemoteStore","Retrying IndexedDB access"),await r(),t._u.delete(1),await up(t)})}function zC(t,e){return e().catch(r=>Vh(t,r,e))}async function dp(t){const e=qe(t),r=Ta(e);let n=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Z3(e);)try{const i=await j3(e.localStore,n);if(i===null){e.fu.length===0&&r.Fo();break}n=i.batchId,e4(e,i)}catch(i){await Vh(e,i)}$C(e)&&VC(e)}function Z3(t){return Rs(t)&&t.fu.length<10}function e4(t,e){t.fu.push(e);const r=Ta(t);r.ko()&&r.Yo&&r.Xo(e.mutations)}function $C(t){return Rs(t)&&!Ta(t).No()&&t.fu.length>0}function VC(t){Ta(t).start()}async function t4(t){Ta(t).eu()}async function r4(t){const e=Ta(t);for(const r of t.fu)e.Xo(r.mutations)}async function i4(t,e,r){const n=t.fu.shift(),i=ry.from(n,e,r);await zC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await dp(t)}async function n4(t,e){e&&Ta(t).Yo&&await async function(r,n){if(i=n.code,qB(i)&&i!==J.ABORTED){const a=r.fu.shift();Ta(r).Mo(),await zC(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,n)),await dp(r)}var i}(t,e),$C(t)&&VC(t)}async function Mx(t,e){const r=qe(t);r.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const n=Rs(r);r._u.add(3),await Ou(r),n&&r.gu.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r._u.delete(3),await up(r)}async function a4(t,e){const r=qe(t);e?(r._u.delete(2),await up(r)):e||(r._u.add(2),await Ou(r),r.gu.set("Unknown"))}function fl(t){return t.pu||(t.pu=function(e,r,n){const i=qe(e);return i.su(),new q3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:X3.bind(null,t),Zr:Q3.bind(null,t),Wo:J3.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),ly(t)?oy(t):t.gu.set("Unknown")):(await t.pu.stop(),UC(t))})),t.pu}function Ta(t){return t.Iu||(t.Iu=function(e,r,n){const i=qe(e);return i.su(),new G3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:t4.bind(null,t),Zr:n4.bind(null,t),tu:r4.bind(null,t),Zo:i4.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await dp(t)):(await t.Iu.stop(),t.fu.length>0&&(Ce("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,o=new cy(e,r,s,i,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uy(t,e){if(Ln("AsyncQueue",`${e}: ${t}`),Cu(t))return new Te(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ae.comparator(r.key,n.key):(r,n)=>Ae.comparator(r.key,n.key),this.keyedMap=Jl(),this.sortedSet=new Qt(this.comparator)}static emptySet(e){return new bo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof bo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new bo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this.Tu=new Qt(Ae.comparator)}track(e){const r=e.doc.key,n=this.Tu.get(r);n?e.type!==0&&n.type===3?this.Tu=this.Tu.insert(r,e):e.type===3&&n.type!==1?this.Tu=this.Tu.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Tu=this.Tu.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Tu=this.Tu.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Tu=this.Tu.remove(r):e.type===1&&n.type===2?this.Tu=this.Tu.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Tu=this.Tu.insert(r,{type:2,doc:e.doc}):Me():this.Tu=this.Tu.insert(r,e)}Eu(){const e=[];return this.Tu.inorderTraversal((r,n)=>{e.push(n)}),e}}class Mo{constructor(e,r,n,i,a,s,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach(o=>{s.push({type:0,doc:o})}),new Mo(e,r,bo.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ap(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.Au=void 0,this.listeners=[]}}class o4{constructor(){this.queries=new hl(e=>uC(e),ap),this.onlineState="Unknown",this.Ru=new Set}}async function HC(t,e){const r=qe(t),n=e.query;let i=!1,a=r.queries.get(n);if(a||(i=!0,a=new s4),i)try{a.Au=await r.onListen(n)}catch(s){const o=uy(s,`Initialization of query '${ev(e.query)}' failed`);return void e.onError(o)}r.queries.set(n,a),a.listeners.push(e),e.bu(r.onlineState),a.Au&&e.Pu(a.Au)&&dy(r)}async function qC(t,e){const r=qe(t),n=e.query;let i=!1;const a=r.queries.get(n);if(a){const s=a.listeners.indexOf(e);s>=0&&(a.listeners.splice(s,1),i=a.listeners.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function l4(t,e){const r=qe(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const o of s.listeners)o.Pu(i)&&(n=!0);s.Au=i}}n&&dy(r)}function c4(t,e,r){const n=qe(t),i=n.queries.get(e);if(i)for(const a of i.listeners)a.onError(r);n.queries.delete(e)}function dy(t){t.Ru.forEach(e=>{e.next()})}class GC{constructor(e,r,n){this.query=e,this.vu=r,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Mo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),r=!0):this.Cu(e,this.onlineState)&&(this.xu(e),r=!0),this.Su=e,r}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let r=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),r=!0),r}Cu(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const r=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}xu(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.key=e}}class KC{constructor(e){this.key=e}}class u4{constructor(e,r){this.query=e,this.qu=r,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Je(),this.mutatedKeys=Je(),this.Gu=dC(e),this.Qu=new bo(this.Gu)}get ju(){return this.qu}Wu(e,r){const n=r?r.zu:new Nx,i=r?r.Qu:this.Qu;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),p=Z0(this.query,d)?d:null,y=!!h&&this.mutatedKeys.has(h.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;h&&p?h.data.isEqual(p.data)?y!==w&&(n.track({type:3,doc:p}),v=!0):this.Hu(h,p)||(n.track({type:2,doc:p}),v=!0,(l&&this.Gu(p,l)>0||c&&this.Gu(p,c)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),v=!0):h&&!p&&(n.track({type:1,doc:h}),v=!0,(l||c)&&(o=!0)),v&&(p?(s=s.add(p),a=w?a.add(u):a.delete(u)):(s=s.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),a=a.delete(u.key),n.track({type:1,doc:u})}return{Qu:s,zu:n,$i:o,mutatedKeys:a}}Hu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((c,u)=>function(d,h){const p=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return p(d)-p(h)}(c.type,u.type)||this.Gu(c.doc,u.doc)),this.Ju(n);const s=r?this.Yu():[],o=this.Ku.size===0&&this.current?1:0,l=o!==this.Uu;return this.Uu=o,a.length!==0||l?{snapshot:new Mo(this.query,e.Qu,i,a,e.mutatedKeys,o===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:s}:{Xu:s}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Nx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(r=>this.qu=this.qu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.qu=this.qu.delete(r)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Je(),this.Qu.forEach(n=>{this.Zu(n.key)&&(this.Ku=this.Ku.add(n.key))});const r=[];return e.forEach(n=>{this.Ku.has(n)||r.push(new KC(n))}),this.Ku.forEach(n=>{e.has(n)||r.push(new WC(n))}),r}tc(e){this.qu=e.Hi,this.Ku=Je();const r=this.Wu(e.documents);return this.applyChanges(r,!0)}ec(){return Mo.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class d4{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class h4{constructor(e){this.key=e,this.nc=!1}}class f4{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.sc={},this.ic=new hl(o=>uC(o),ap),this.rc=new Map,this.oc=new Set,this.uc=new Qt(Ae.comparator),this.cc=new Map,this.ac=new iy,this.hc={},this.lc=new Map,this.fc=Ro.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function p4(t,e){const r=S4(t);let n,i;const a=r.ic.get(e);if(a)n=a.targetId,r.sharedClientState.addLocalQueryTarget(n),i=a.view.ec();else{const s=await F3(r.localStore,Rn(e));r.isPrimaryClient&&jC(r.remoteStore,s);const o=r.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,i=await g4(r,e,n,o==="current",s.resumeToken)}return i}async function g4(t,e,r,n,i){t._c=(d,h,p)=>async function(y,w,v,T){let k=w.view.Wu(v);k.$i&&(k=await Dx(y.localStore,w.query,!1).then(({documents:I})=>w.view.Wu(I,k)));const A=T&&T.targetChanges.get(w.targetId),E=w.view.applyChanges(k,y.isPrimaryClient,A);return Fx(y,w.targetId,E.Xu),E.snapshot}(t,d,h,p);const a=await Dx(t.localStore,e,!0),s=new u4(e,a.Hi),o=s.Wu(a.documents),l=Pu.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=s.applyChanges(o,t.isPrimaryClient,l);Fx(t,r,c.Xu);const u=new d4(e,r,s);return t.ic.set(e,u),t.rc.has(r)?t.rc.get(r).push(e):t.rc.set(r,[e]),c.snapshot}async function m4(t,e){const r=qe(t),n=r.ic.get(e),i=r.rc.get(n.targetId);if(i.length>1)return r.rc.set(n.targetId,i.filter(a=>!ap(a,e))),void r.ic.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await nv(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),FC(r.remoteStore,n.targetId),av(r,n.targetId)}).catch(Eu)):(av(r,n.targetId),await nv(r.localStore,n.targetId,!0))}async function v4(t,e,r){const n=k4(t);try{const i=await function(a,s){const o=qe(a),l=Yt.now(),c=s.reduce((h,p)=>h.add(p.key),Je());let u,d;return o.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Mn(),y=Je();return o.Gi.getEntries(h,c).next(w=>{p=w,p.forEach((v,T)=>{T.isValidDocument()||(y=y.add(v))})}).next(()=>o.localDocuments.getOverlayedDocuments(h,p)).next(w=>{u=w;const v=[];for(const T of s){const k=$B(T,u.get(T.key).overlayedDocument);k!=null&&v.push(new Pa(T.key,k,oC(k.value.mapValue),Oi.exists(!0)))}return o.mutationQueue.addMutationBatch(h,l,v,s)}).next(w=>{d=w;const v=w.applyToLocalDocumentSet(u,y);return o.documentOverlayCache.saveOverlays(h,w.batchId,v)})}).then(()=>({batchId:d.batchId,changes:xC(u)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,s,o){let l=a.hc[a.currentUser.toKey()];l||(l=new Qt(ct)),l=l.insert(s,o),a.hc[a.currentUser.toKey()]=l}(n,i.batchId,r),await Du(n,i.changes),await dp(n.remoteStore)}catch(i){const a=uy(i,"Failed to persist write");r.reject(a)}}async function YC(t,e){const r=qe(t);try{const n=await M3(r.localStore,e);e.targetChanges.forEach((i,a)=>{const s=r.cc.get(a);s&&(_t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.nc=!0:i.modifiedDocuments.size>0?_t(s.nc):i.removedDocuments.size>0&&(_t(s.nc),s.nc=!1))}),await Du(r,n,e)}catch(n){await Eu(n)}}function jx(t,e,r){const n=qe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ic.forEach((a,s)=>{const o=s.view.bu(e);o.snapshot&&i.push(o.snapshot)}),function(a,s){const o=qe(a);o.onlineState=s;let l=!1;o.queries.forEach((c,u)=>{for(const d of u.listeners)d.bu(s)&&(l=!0)}),l&&dy(o)}(n.eventManager,e),i.length&&n.sc.Wo(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function y4(t,e,r){const n=qe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.cc.get(e),a=i&&i.key;if(a){let s=new Qt(Ae.comparator);s=s.insert(a,mr.newNoDocument(a,Ve.min()));const o=Je().add(a),l=new lp(Ve.min(),new Map,new Xt(ct),s,o);await YC(n,l),n.uc=n.uc.remove(a),n.cc.delete(e),hy(n)}else await nv(n.localStore,e,!1).then(()=>av(n,e,r)).catch(Eu)}async function b4(t,e){const r=qe(t),n=e.batch.batchId;try{const i=await R3(r.localStore,e);QC(r,n,null),XC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Du(r,i)}catch(i){await Eu(i)}}async function w4(t,e,r){const n=qe(t);try{const i=await function(a,s){const o=qe(a);return o.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return o.mutationQueue.lookupMutationBatch(l,s).next(u=>(_t(u!==null),c=u.keys(),o.mutationQueue.removeMutationBatch(l,u))).next(()=>o.mutationQueue.performConsistencyCheck(l)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(l,c,s)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>o.localDocuments.getDocuments(l,c))})}(n.localStore,e);QC(n,e,r),XC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Du(n,i)}catch(i){await Eu(i)}}function XC(t,e){(t.lc.get(e)||[]).forEach(r=>{r.resolve()}),t.lc.delete(e)}function QC(t,e,r){const n=qe(t);let i=n.hc[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.hc[n.currentUser.toKey()]=i}}function av(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.rc.get(e))t.ic.delete(n),r&&t.sc.wc(n,r);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(n=>{t.ac.containsKey(n)||JC(t,n)})}function JC(t,e){t.oc.delete(e.path.canonicalString());const r=t.uc.get(e);r!==null&&(FC(t.remoteStore,r),t.uc=t.uc.remove(e),t.cc.delete(r),hy(t))}function Fx(t,e,r){for(const n of r)n instanceof WC?(t.ac.addReference(n.key,e),_4(t,n)):n instanceof KC?(Ce("SyncEngine","Document no longer in limbo: "+n.key),t.ac.removeReference(n.key,e),t.ac.containsKey(n.key)||JC(t,n.key)):Me()}function _4(t,e){const r=e.key,n=r.path.canonicalString();t.uc.get(r)||t.oc.has(n)||(Ce("SyncEngine","New document in limbo: "+r),t.oc.add(n),hy(t))}function hy(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const r=new Ae(kt.fromString(e)),n=t.fc.next();t.cc.set(n,new h4(r)),t.uc=t.uc.insert(r,n),jC(t.remoteStore,new ds(Rn(Q0(r.path)),n,2,W0.at))}}async function Du(t,e,r){const n=qe(t),i=[],a=[],s=[];n.ic.isEmpty()||(n.ic.forEach((o,l)=>{s.push(n._c(l,e,r).then(c=>{if((c||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=ay.Ci(l.targetId,c);a.push(u)}}))}),await Promise.all(s),n.sc.Wo(i),await async function(o,l){const c=qe(o);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>oe.forEach(l,d=>oe.forEach(d.Si,h=>c.persistence.referenceDelegate.addReference(u,d.targetId,h)).next(()=>oe.forEach(d.Di,h=>c.persistence.referenceDelegate.removeReference(u,d.targetId,h)))))}catch(u){if(!Cu(u))throw u;Ce("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const d=u.targetId;if(!u.fromCache){const h=c.qi.get(d),p=h.snapshotVersion,y=h.withLastLimboFreeSnapshotVersion(p);c.qi=c.qi.insert(d,y)}}}(n.localStore,a))}async function x4(t,e){const r=qe(t);if(!r.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const n=await LC(r.localStore,e);r.currentUser=e,function(i,a){i.lc.forEach(s=>{s.forEach(o=>{o.reject(new Te(J.CANCELLED,a))})}),i.lc.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Du(r,n.ji)}}function T4(t,e){const r=qe(t),n=r.cc.get(e);if(n&&n.nc)return Je().add(n.key);{let i=Je();const a=r.rc.get(e);if(!a)return i;for(const s of a){const o=r.ic.get(s);i=i.unionWith(o.view.ju)}return i}}function S4(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y4.bind(null,e),e.sc.Wo=l4.bind(null,e.eventManager),e.sc.wc=c4.bind(null,e.eventManager),e}function k4(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w4.bind(null,e),e}class E4{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=cp(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,r){return null}Ec(e,r){return null}Ic(e){return L3(this.persistence,new O3,e.initialUser,this.yt)}yc(e){return new I3(ny.Bs,this.yt)}gc(e){return new U3}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class C4{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>jx(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=x4.bind(null,this.syncEngine),await a4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new o4}createDatastore(e){const r=cp(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new H3(i));var i;return function(a,s,o,l){return new W3(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return r=this.localStore,n=this.datastore,i=e.asyncQueue,a=o=>jx(this.syncEngine,o,0),s=Rx.C()?new Rx:new z3,new Y3(r,n,i,a,s);var r,n,i,a,s}createSyncEngine(e,r){return function(n,i,a,s,o,l,c){const u=new f4(n,i,a,s,o,l);return c&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return async function(e){const r=qe(e);Ce("RemoteStore","RemoteStore shutting down."),r._u.add(5),await Ou(r),r.mu.shutdown(),r.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t,e,r){if(!r)throw new Te(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A4(t,e,r,n){if(e===!0&&n===!0)throw new Te(J.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Bx(t){if(!Ae.isDocumentKey(t))throw new Te(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ux(t){if(Ae.isDocumentKey(t))throw new Te(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me()}function Nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=hp(t);throw new Te(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Map;class $x{constructor(e){var r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,A4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $x({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Te(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $x(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new nB;switch(r.type){case"gapi":const n=r.client;return new lB(n,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=zx.get(e);r&&(Ce("ComponentProvider","Removing Datastore"),zx.delete(e),r.terminate())}(this),Promise.resolve()}}function I4(t,e,r,n={}){var i;const a=(t=Nn(t,fp))._getSettings();if(a.host!=="firestore.googleapis.com"&&a.host!==e&&Km("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${r}`,ssl:!1})),n.mockUserToken){let s,o;if(typeof n.mockUserToken=="string")s=n.mockUserToken,o=pr.MOCK_USER;else{s=$k(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new Te(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new pr(l)}t._authCredentials=new aB(new XE(s,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qr(this.firestore,e,this._key)}}class pl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pl(this.firestore,e,this._query)}}class ma extends pl{constructor(e,r,n){super(e,r,Q0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qr(this.firestore,null,new Ae(e))}withConverter(e){return new ma(this.firestore,e,this._path)}}function P4(t,e,...r){if(t=qt(t),ZC("collection","path",e),t instanceof fp){const n=kt.fromString(e,...r);return Ux(n),new ma(t,null,n)}{if(!(t instanceof qr||t instanceof ma))throw new Te(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(kt.fromString(e,...r));return Ux(n),new ma(t.firestore,null,n)}}function O4(t,e,...r){if(t=qt(t),arguments.length===1&&(e=QE.R()),ZC("doc","path",e),t instanceof fp){const n=kt.fromString(e,...r);return Bx(n),new qr(t,null,new Ae(n))}{if(!(t instanceof qr||t instanceof ma))throw new Te(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(kt.fromString(e,...r));return Bx(n),new qr(t.firestore,t instanceof ma?t.converter:null,new Ae(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ln("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=pr.UNAUTHENTICATED,this.clientId=QE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async a=>{Ce("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ce("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(J.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=uy(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function L4(t,e){t.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const r=await t.getConfiguration();await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await LC(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function R4(t,e){t.asyncQueue.verifyOperationInProgress();const r=await M4(t);Ce("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(r,n),t.setCredentialChangeListener(i=>Mx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>Mx(e.remoteStore,a)),t.onlineComponents=e}async function M4(t){return t.offlineComponents||(Ce("FirestoreClient","Using default OfflineComponentProvider"),await L4(t,new E4)),t.offlineComponents}async function tA(t){return t.onlineComponents||(Ce("FirestoreClient","Using default OnlineComponentProvider"),await R4(t,new C4)),t.onlineComponents}function N4(t){return tA(t).then(e=>e.syncEngine)}async function rA(t){const e=await tA(t),r=e.eventManager;return r.onListen=p4.bind(null,e.syncEngine),r.onUnlisten=m4.bind(null,e.syncEngine),r}function j4(t,e,r={}){const n=new En;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,s,o,l){const c=new eA({next:d=>{a.enqueueAndForget(()=>qC(i,u));const h=d.docs.has(s);!h&&d.fromCache?l.reject(new Te(J.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&o&&o.source==="server"?l.reject(new Te(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new GC(Q0(s.path),c,{includeMetadataChanges:!0,Nu:!0});return HC(i,u)}(await rA(t),t.asyncQueue,e,r,n)),n.promise}function F4(t,e,r={}){const n=new En;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,s,o,l){const c=new eA({next:d=>{a.enqueueAndForget(()=>qC(i,u)),d.fromCache&&o.source==="server"?l.reject(new Te(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new GC(s,c,{includeMetadataChanges:!0,Nu:!0});return HC(i,u)}(await rA(t),t.asyncQueue,e,r,n)),n.promise}class B4{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new MC(this,"async_queue_retry"),this.Wc=()=>{const r=Eg();r&&Ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.xo.Po()};const e=Eg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const r=Eg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const r=new En;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Cu(e))throw e;Ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const r=this.Bc.then(()=>(this.Gc=!0,e().catch(n=>{this.Kc=n,this.Gc=!1;const i=function(a){let s=a.message||"";return a.stack&&(s=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),s}(n);throw Ln("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Gc=!1,n))));return this.Bc=r,r}enqueueAfterDelay(e,r,n){this.zc(),this.jc.indexOf(e)>-1&&(r=0);const i=cy.createAndSchedule(this,e,r,n,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&Me()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const r of this.Uc)if(r.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Uc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const r=this.Uc.indexOf(e);this.Uc.splice(r,1)}}class gl extends fp{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new B4,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||iA(this),this._firestoreClient.terminate()}}function U4(t,e){const r=typeof t=="object"?t:S0(),n=typeof t=="string"?t:e||"(default)",i=$f(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=Uk("firestore");a&&I4(i,...a)}return i}function fy(t){return t._firestoreClient||iA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function iA(t){var e;const r=t._freezeSettings(),n=function(i,a,s,o){return new yB(i,a,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new D4(t._authCredentials,t._appCheckCredentials,t._queue,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._byteString=e}static fromBase64String(e){try{return new No(Tr.fromBase64String(e))}catch(r){throw new Te(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new No(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Te(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Te(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Te(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=/^__.*__$/;class $4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Pa(e,this.data,this.fieldMask,r,this.fieldTransforms):new Iu(e,this.data,r,this.fieldTransforms)}}class nA{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Pa(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function aA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class my{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.yt=n,this.ignoreUndefinedProperties=i,a===void 0&&this.na(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new my(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.ia({path:n,oa:!1});return i.ua(e),i}ca(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.ia({path:n,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Hh(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(aA(this.sa)&&z4.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class V4{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.yt=n||cp(e)}da(e,r,n,i=!1){return new my({sa:e,methodName:r,fa:n,path:vr.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function vy(t){const e=t._freezeSettings(),r=cp(t._databaseId);return new V4(t._databaseId,!!e.ignoreUndefinedProperties,r)}function H4(t,e,r,n,i,a={}){const s=t.da(a.merge||a.mergeFields?2:0,e,r,i);yy("Data must be an object, but it was:",s,n);const o=sA(n,s);let l,c;if(a.merge)l=new gi(s.fieldMask),c=s.fieldTransforms;else if(a.mergeFields){const u=[];for(const d of a.mergeFields){const h=sv(e,d,r);if(!s.contains(h))throw new Te(J.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);lA(u,h)||u.push(h)}l=new gi(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new $4(new Vr(o),l,c)}class gp extends py{_toFieldTransform(e){if(e.sa!==2)throw e.sa===1?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gp}}function q4(t,e,r,n){const i=t.da(1,e,r);yy("Data must be an object, but it was:",i,n);const a=[],s=Vr.empty();Ls(n,(l,c)=>{const u=by(e,l,r);c=qt(c);const d=i.ca(u);if(c instanceof gp)a.push(u);else{const h=Lu(c,d);h!=null&&(a.push(u),s.set(u,h))}});const o=new gi(a);return new nA(s,o,i.fieldTransforms)}function G4(t,e,r,n,i,a){const s=t.da(1,e,r),o=[sv(e,n,r)],l=[i];if(a.length%2!=0)throw new Te(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(sv(e,a[h])),l.push(a[h+1]);const c=[],u=Vr.empty();for(let h=o.length-1;h>=0;--h)if(!lA(c,o[h])){const p=o[h];let y=l[h];y=qt(y);const w=s.ca(p);if(y instanceof gp)c.push(p);else{const v=Lu(y,w);v!=null&&(c.push(p),u.set(p,v))}}const d=new gi(c);return new nA(u,d,s.fieldTransforms)}function W4(t,e,r,n=!1){return Lu(r,t.da(n?4:3,e))}function Lu(t,e){if(oA(t=qt(t)))return yy("Unsupported field value:",e,t),sA(t,e);if(t instanceof py)return function(r,n){if(!aA(n.sa))throw n.ha(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.ha(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(r,n){const i=[];let a=0;for(const s of r){let o=Lu(s,n.aa(a));o==null&&(o={nullValue:"NULL_VALUE"}),i.push(o),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,n){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NB(n.yt,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Yt.fromDate(r);return{timestampValue:$h(n.yt,i)}}if(r instanceof Yt){const i=new Yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$h(n.yt,i)}}if(r instanceof gy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof No)return{bytesValue:CC(n.yt,r._byteString)};if(r instanceof qr){const i=n.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw n.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ty(r.firestore._databaseId||n.databaseId,r._key.path)}}throw n.ha(`Unsupported field value: ${hp(r)}`)}(t,e)}function sA(t,e){const r={};return JE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,(n,i)=>{const a=Lu(i,e.ra(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function oA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yt||t instanceof gy||t instanceof No||t instanceof qr||t instanceof py)}function yy(t,e,r){if(!oA(r)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(r)){const n=hp(r);throw n==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+n)}}function sv(t,e,r){if((e=qt(e))instanceof pp)return e._internalPath;if(typeof e=="string")return by(t,e);throw Hh("Field path arguments must be of type string or ",t,!1,void 0,r)}const K4=new RegExp("[~\\*/\\[\\]]");function by(t,e,r){if(e.search(K4)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new pp(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Hh(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new Te(J.INVALID_ARGUMENT,o+t+l)}function lA(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(wy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Y4 extends cA{data(){return super.data()}}function wy(t,e){return typeof e=="string"?by(t,e):e instanceof pp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _y{}class Q4 extends _y{}function VJ(t,e,...r){let n=[];e instanceof _y&&n.push(e),n=n.concat(r),function(i){const a=i.filter(o=>o instanceof xy).length,s=i.filter(o=>o instanceof mp).length;if(a>1||a>0&&s>0)throw new Te(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class mp extends Q4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new mp(e,r,n)}_apply(e){const r=this._parse(e);return uA(e._query,r),new pl(e.firestore,e.converter,Jm(e._query,r))}_parse(e){const r=vy(e.firestore);return function(i,a,s,o,l,c,u){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Te(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Hx(u,c);const h=[];for(const p of u)h.push(Vx(o,i,p));d={arrayValue:{values:h}}}else d=Vx(o,i,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Hx(u,c),d=W4(s,a,u,c==="in"||c==="not-in");return $t.create(l,c,d)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function HJ(t,e,r){const n=e,i=wy("where",t);return mp._create(i,n,r)}class xy extends _y{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new xy(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ri.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(n,i){let a=n;const s=i.getFlattenedFilters();for(const o of s)uA(a,o),a=Jm(a,o)}(e._query,r),new pl(e.firestore,e.converter,Jm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Vx(t,e,r){if(typeof(r=qt(r))=="string"){if(r==="")throw new Te(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cC(e)&&r.indexOf("/")!==-1)throw new Te(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(kt.fromString(r));if(!Ae.isDocumentKey(n))throw new Te(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return mx(t,new Ae(n))}if(r instanceof qr)return mx(t,r._key);throw new Te(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hp(r)}.`)}function Hx(t,e){if(!Array.isArray(t)||t.length===0)throw new Te(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Te(J.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function uA(t,e){if(e.isInequality()){const n=J0(t),i=e.field;if(n!==null&&!n.isEqual(i))throw new Te(J.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const a=lC(t);a!==null&&J4(t,i,a)}const r=function(n,i){for(const a of n)for(const s of a.getFlattenedFilters())if(i.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Te(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function J4(t,e,r){if(!r.isEqual(e))throw new Te(J.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class Z4{convertValue(e,r="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Me()}}convertObject(e,r){const n={};return Ls(e.fields,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertGeoPoint(e){return new gy(Ut(e.latitude),Ut(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=eC(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const r=xa(e);return new Yt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=kt.fromString(e);_t(DC(n));const i=new qc(n.get(1),n.get(3)),a=new Ae(n.popFirst(5));return i.isEqual(r)||Ln(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dA extends cA{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(wy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ah extends dA{data(e={}){return super.data(e)}}class tU{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Zl(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ah(this._firestore,this._userDataWriter,n.key,n,new Zl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Te(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let a=0;return n._snapshot.docChanges.map(s=>{const o=new ah(n._firestore,n._userDataWriter,s.doc.key,s.doc,new Zl(n._snapshot.mutatedKeys.has(s.doc.key),n._snapshot.fromCache),n.query.converter);return s.doc,{type:"added",doc:o,oldIndex:-1,newIndex:a++}})}{let a=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(s=>i||s.type!==3).map(s=>{const o=new ah(n._firestore,n._userDataWriter,s.doc.key,s.doc,new Zl(n._snapshot.mutatedKeys.has(s.doc.key),n._snapshot.fromCache),n.query.converter);let l=-1,c=-1;return s.type!==0&&(l=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),c=a.indexOf(s.doc.key)),{type:rU(s.type),doc:o,oldIndex:l,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function rU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qJ(t){t=Nn(t,qr);const e=Nn(t.firestore,gl);return j4(fy(e),t._key).then(r=>nU(e,t,r))}class hA extends Z4{constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new qr(this.firestore,null,r)}}function iU(t){t=Nn(t,pl);const e=Nn(t.firestore,gl),r=fy(e),n=new hA(e);return X4(t._query),F4(r,t._query).then(i=>new tU(e,n,t,i))}function GJ(t,e,r,...n){t=Nn(t,qr);const i=Nn(t.firestore,gl),a=vy(i);let s;return s=typeof(e=qt(e))=="string"||e instanceof pp?G4(a,"updateDoc",t._key,e,r,n):q4(a,"updateDoc",t._key,e),Ty(i,[s.toMutation(t._key,Oi.exists(!0))])}function WJ(t){return Ty(Nn(t.firestore,gl),[new ey(t._key,Oi.none())])}function KJ(t,e){const r=Nn(t.firestore,gl),n=O4(t),i=eU(t.converter,e);return Ty(r,[H4(vy(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Oi.exists(!1))]).then(()=>n)}function Ty(t,e){return function(r,n){const i=new En;return r.asyncQueue.enqueueAndForget(async()=>v4(await N4(r),n,i)),i.promise}(fy(t),e)}function nU(t,e,r){const n=r.docs.get(e._key),i=new hA(t);return new dA(t,i,e._key,n,new Zl(r.hasPendingWrites,r.fromCache),e.converter)}(function(t,e=!0){(function(r){dl=r})(ll),ws(new wa("firestore",(r,{instanceIdentifier:n,options:i})=>{const a=r.getProvider("app").getImmediate(),s=new gl(new sB(r.getProvider("auth-internal")),new uB(r.getProvider("app-check-internal")),function(o,l){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Te(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(o.options.projectId,l)}(a,n),a);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),Qi(hx,"3.8.0",t),Qi(hx,"3.8.0","esm2017")})();function Sy(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function fA(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aU=fA,pA=new gu("auth","Firebase",fA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new x0("@firebase/auth");function sh(t,...e){qx.logLevel<=nt.ERROR&&qx.error(`Auth (${ll}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,...e){throw ky(t,...e)}function Zi(t,...e){return ky(t,...e)}function gA(t,e,r){const n=Object.assign(Object.assign({},aU()),{[e]:r});return new gu("auth","Firebase",n).create(e,{appName:t.name})}function sU(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&ln(t,"argument-error"),gA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ky(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return pA.create(t,...e)}function je(t,e,...r){if(!t)throw ky(e,...r)}function Tn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sh(e),new Error(e)}function jn(t,e){t||Tn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;function Sn(t){jn(t instanceof Function,"Expected a class definition");let e=Gx.get(t);return e?(jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gx.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oU(t,e){const r=$f(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(Ah(a,e!=null?e:{}))return i;ln(i,"already-initialized")}return r.initialize({options:e})}function lU(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Sn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cU(){return Wx()==="http:"||Wx()==="https:"}function Wx(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cU()||Oj()||"connection"in navigator)?navigator.onLine:!0}function dU(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,r){this.shortDelay=e,this.longDelay=r,jn(r>e,"Short delay should be less than long delay!"),this.isMobile=Ij()||Dj()}get(){return uU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t,e){jn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=new Ru(3e4,6e4);function pU(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function vp(t,e,r,n,i={}){return vA(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const o=mu(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),mA.fetch()(yA(t,t.config.apiHost,r,o),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},a))})}async function vA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},hU),e);try{const i=new mU(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Rd(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Rd(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Rd(t,"user-disabled",s);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw gA(t,u,c);ln(t,u)}}catch(i){if(i instanceof dn)throw i;ln(t,"network-request-failed")}}async function gU(t,e,r,n,i={}){const a=await vp(t,e,r,n,i);return"mfaPendingCredential"in a&&ln(t,"multi-factor-auth-required",{_serverResponse:a}),a}function yA(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?Ey(t.config,i):`${t.config.apiScheme}://${i}`}class mU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Zi(this.auth,"network-request-failed")),fU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rd(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Zi(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(t,e){return vp(t,"POST","/v1/accounts:delete",e)}async function yU(t,e){return vp(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bU(t,e=!1){const r=qt(t),n=await r.getIdToken(e),i=Cy(n);je(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:bc(Cg(i.auth_time)),issuedAtTime:bc(Cg(i.iat)),expirationTime:bc(Cg(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Cg(t){return Number(t)*1e3}function Cy(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return sh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Fk(r);return i?JSON.parse(i):(sh("Failed to decode base64 JWT payload"),null)}catch(i){return sh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wU(t){const e=Cy(t);return je(e,"internal-error"),je(typeof e.exp!="undefined","internal-error"),je(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof dn&&_U(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function _U({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Xc(t,yU(r,{idToken:n}));je(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?kU(a.providerUserInfo):[],o=SU(t.providerData,s),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new bA(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function TU(t){const e=qt(t);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SU(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function kU(t){return t.map(e=>{var{providerId:r}=e,n=Sy(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(t,e){const r=await vA(t,{},async()=>{const n=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=yA(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",mA.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken!="undefined","internal-error"),je(typeof e.refreshToken!="undefined","internal-error");const r="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):wU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}async getToken(e,r=!1){return je(!this.accessToken||this.refreshToken,e,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await EU(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new Qc;return n&&(je(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(je(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(je(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qc,this.toJSON())}_performRefresh(){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t,e){je(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class hs{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=Sy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new bA(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Xc(this,this.stsTokenManager.getToken(this.auth,e));return je(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return bU(this,e)}reload(){return TU(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new hs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await qh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Xc(this,vU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,s,o,l,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(i=r.email)!==null&&i!==void 0?i:void 0,p=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,y=(s=r.photoURL)!==null&&s!==void 0?s:void 0,w=(o=r.tenantId)!==null&&o!==void 0?o:void 0,v=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=r.createdAt)!==null&&c!==void 0?c:void 0,k=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:A,emailVerified:E,isAnonymous:I,providerData:F,stsTokenManager:j}=r;je(A&&j,e,"internal-error");const D=Qc.fromJSON(this.name,j);je(typeof A=="string",e,"internal-error"),ea(d,e.name),ea(h,e.name),je(typeof E=="boolean",e,"internal-error"),je(typeof I=="boolean",e,"internal-error"),ea(p,e.name),ea(y,e.name),ea(w,e.name),ea(v,e.name),ea(T,e.name),ea(k,e.name);const z=new hs({uid:A,auth:e,email:h,emailVerified:E,displayName:d,isAnonymous:I,photoURL:y,phoneNumber:p,tenantId:w,stsTokenManager:D,createdAt:T,lastLoginAt:k});return F&&Array.isArray(F)&&(z.providerData=F.map(M=>Object.assign({},M))),v&&(z._redirectEventId=v),z}static async _fromIdTokenResponse(e,r,n=!1){const i=new Qc;i.updateFromServerResponse(r);const a=new hs({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await qh(a),a}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}wA.type="NONE";const Kx=wA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t,e,r){return`firebase:${t}:${e}:${r}`}class wo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=oh(this.userKey,i.apiKey,a),this.fullPersistenceKey=oh("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new wo(Sn(Kx),e,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=i[0]||Sn(Kx);const s=oh(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(s);if(u){const d=hs._fromJSON(e,u);c!==a&&(o=d),a=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new wo(a,e,n):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(s)}catch{}})),new wo(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_A(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kA(e))return"Blackberry";if(EA(e))return"Webos";if(Ay(e))return"Safari";if((e.includes("chrome/")||xA(e))&&!e.includes("edge/"))return"Chrome";if(SA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function _A(t=xr()){return/firefox\//i.test(t)}function Ay(t=xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xA(t=xr()){return/crios\//i.test(t)}function TA(t=xr()){return/iemobile/i.test(t)}function SA(t=xr()){return/android/i.test(t)}function kA(t=xr()){return/blackberry/i.test(t)}function EA(t=xr()){return/webos/i.test(t)}function yp(t=xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CU(t=xr()){var e;return yp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AU(){return Lj()&&document.documentMode===10}function CA(t=xr()){return yp(t)||SA(t)||EA(t)||kA(t)||/windows phone/i.test(t)||TA(t)}function IU(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t,e=[]){let r;switch(t){case"Browser":r=Yx(xr());break;case"Worker":r=`${Yx(xr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${ll}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,r,n){this.app=e,this.heartbeatServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xx(this),this.idTokenSubscription=new Xx(this),this.beforeStateQueue=new PU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pA,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Sn(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var r;const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l==null?void 0:l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const r=e?qt(e):null;return r&&je(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Sn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Sn(e)||this._popupRedirectResolver;je(r,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[Sn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r),s=this._isInitialized?Promise.resolve():this._initializationPromise;return je(s,this,"internal-error"),s.then(()=>a(this.currentUser)),typeof r=="function"?e.addObserver(r,n,i):e.addObserver(r)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return n&&(r["X-Firebase-Client"]=n),r}}function bp(t){return qt(t)}class Xx{constructor(e){this.auth=e,this.observer=null,this.addObserver=Gj(r=>this.observer=r)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function DU(t,e,r){const n=bp(t);je(n._canInitEmulator,n,"emulator-config-failed"),je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),a=IA(e),{host:s,port:o}=LU(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${a}//${s}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||RU()}function IA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LU(t){const e=IA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:Qx(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:Qx(s)}}}function Qx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RU(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,r){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e){return gU(t,"POST","/v1/accounts:signInWithIdp",pU(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="http://localhost";class Ts extends PA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ln("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=Sy(r,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Ts(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return _o(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,_o(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,_o(e,r)}buildRequest(){const e={requestUri:MU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=mu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends Iy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Mu{constructor(){super("facebook.com")}static credential(e){return Ts._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.FACEBOOK_SIGN_IN_METHOD="facebook.com";sa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ts._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ci.credential(r,n)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends Mu{constructor(){super("github.com")}static credential(e){return Ts._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oa.credential(e.oauthAccessToken)}catch{return null}}}oa.GITHUB_SIGN_IN_METHOD="github.com";oa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Mu{constructor(){super("twitter.com")}static credential(e,r){return Ts._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return la.credential(r,n)}catch{return null}}}la.TWITTER_SIGN_IN_METHOD="twitter.com";la.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await hs._fromIdTokenResponse(e,n,i),s=Jx(n);return new jo({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=Jx(n);return new jo({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function Jx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends dn{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Gh(e,r,n,i)}}function OA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(t,a,e,n):a})}async function NU(t,e,r=!1){const n=await Xc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return jo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jU(t,e,r=!1){const{auth:n}=t,i="reauthenticate";try{const a=await Xc(t,OA(n,i,e,t),r);je(a.idToken,n,"internal-error");const s=Cy(a.idToken);je(s,n,"internal-error");const{sub:o}=s;return je(t.uid===o,n,"user-mismatch"),jo._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ln(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e,r=!1){const n="signIn",i=await OA(t,n,e),a=await jo._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}function BU(t,e,r,n){return qt(t).onIdTokenChanged(e,r,n)}function UU(t,e,r){return qt(t).beforeAuthStateChanged(e,r)}function zU(t){return qt(t).signOut()}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(){const t=xr();return Ay(t)||yp(t)}const VU=1e3,HU=10;class LA extends DA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=$U()&&IU(),this.fallbackToPolling=CA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const n=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(n);if(e.newValue!==s)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!r)return}const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);AU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,HU):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},VU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}LA.type="LOCAL";const qU=LA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends DA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}RA.type="SESSION";const MA=RA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t){return Promise.all(t.map(async e=>{try{const r=await e;return{fulfilled:!0,value:r}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new wp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async c=>c(r.origin,a)),l=await GU(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const c=Py("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(h.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return window}function KU(t){en().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof en().WorkerGlobalScope!="undefined"&&typeof en().importScripts=="function"}async function YU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function QU(){return NA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebaseLocalStorageDb",JU=1,Kh="firebaseLocalStorage",FA="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function _p(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function ZU(){const t=indexedDB.deleteDatabase(jA);return new Nu(t).toPromise()}function lv(){const t=indexedDB.open(jA,JU);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Kh,{keyPath:FA})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Kh)?e(n):(n.close(),await ZU(),e(await lv()))})})}async function Zx(t,e,r){const n=_p(t,!0).put({[FA]:e,value:r});return new Nu(n).toPromise()}async function e6(t,e){const r=_p(t,!1).get(e),n=await new Nu(r).toPromise();return n===void 0?null:n.value}function eT(t,e){const r=_p(t,!0).delete(e);return new Nu(r).toPromise()}const t6=800,r6=3;class BA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>r6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wp._getInstance(QU()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await YU(),!this.activeServiceWorker)return;this.sender=new WU(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);!n||((e=n[0])===null||e===void 0?void 0:e.fulfilled)&&((r=n[0])===null||r===void 0?void 0:r.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lv();return await Zx(e,Wh,"1"),await eT(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zx(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>e6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>eT(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=_p(i,!1).getAll();return new Nu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BA.type="LOCAL";const i6=BA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function a6(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Zi("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",n6().appendChild(n)})}function s6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t,e){return e?Sn(e):(je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends PA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,r){return _o(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function o6(t){return FU(t.auth,new Oy(t),t.bypassAuthState)}function l6(t){const{auth:e,user:r}=t;return je(r,e,"internal-error"),jU(r,new Oy(t),t.bypassAuthState)}async function c6(t){const{auth:e,user:r}=t;return je(r,e,"internal-error"),NU(r,new Oy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o6;case"linkViaPopup":case"linkViaRedirect":return c6;case"reauthViaPopup":case"reauthViaRedirect":return l6;default:ln(this.auth,"internal-error")}}resolve(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=new Ru(2e3,1e4);async function d6(t,e,r){const n=bp(t);sU(t,e,Iy);const i=UA(n,r);return new as(n,"signInViaPopup",e,i).executeNotNull()}class as extends zA{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){jn(this.filter.length===1,"Popup operations only handle one event");const e=Py();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,u6.get())};e()}}as.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="pendingRedirect",lh=new Map;class f6 extends zA{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=lh.get(this.auth._key());if(!e){try{const n=await p6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}lh.set(this.auth._key(),e)}return this.bypassAuthState||lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p6(t,e){const r=v6(e),n=m6(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function g6(t,e){lh.set(t._key(),e)}function m6(t){return Sn(t._redirectPersistence)}function v6(t){return oh(h6,t.config.apiKey,t.name)}async function y6(t,e,r=!1){const n=bp(t),i=UA(n,e),s=await new f6(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=10*60*1e3;class w6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!$A(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Zi(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b6&&this.cachedEventUids.clear(),this.cachedEventUids.has(tT(e))}saveEventToCache(e){this.cachedEventUids.add(tT(e)),this.lastProcessedEventTime=Date.now()}}function tT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $A({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $A(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x6(t,e={}){return vp(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S6=/^https?/;async function k6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await x6(t);for(const r of e)try{if(E6(r))return}catch{}ln(t,"unauthorized-domain")}function E6(t){const e=ov(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!S6.test(r))return!1;if(T6.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new Ru(3e4,6e4);function rT(){const t=en().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function A6(t){return new Promise((e,r)=>{var n,i,a;function s(){rT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rT(),r(Zi(t,"network-request-failed"))},timeout:C6.get()})}if(!((i=(n=en().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=en().gapi)===null||a===void 0)&&a.load)s();else{const o=s6("iframefcb");return en()[o]=()=>{gapi.load?s():r(Zi(t,"network-request-failed"))},a6(`https://apis.google.com/js/api.js?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw ch=null,e})}let ch=null;function I6(t){return ch=ch||A6(t),ch}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=new Ru(5e3,15e3),O6="__/auth/iframe",D6="emulator/auth/iframe",L6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},R6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M6(t){const e=t.config;je(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ey(e,D6):`https://${t.config.authDomain}/${O6}`,n={apiKey:e.apiKey,appName:t.name,v:ll},i=R6.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${mu(n).slice(1)}`}async function N6(t){const e=await I6(t),r=en().gapi;return je(r,t,"internal-error"),e.open({where:document.body,url:M6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L6,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=Zi(t,"network-request-failed"),o=en().setTimeout(()=>{a(s)},P6.get());function l(){en().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F6=500,B6=600,U6="_blank",z6="http://localhost";class iT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $6(t,e,r,n=F6,i=B6){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},j6),{width:n.toString(),height:i.toString(),top:a,left:s}),c=xr().toLowerCase();r&&(o=xA(c)?U6:r),_A(c)&&(e=e||z6,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[p,y])=>`${h}${p}=${y},`,"");if(CU(c)&&o!=="_self")return V6(e||"",o),new iT(null);const d=window.open(e||"",o,u);je(d,t,"popup-blocked");try{d.focus()}catch{}return new iT(d)}function V6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="__/auth/handler",q6="emulator/auth/handler";function nT(t,e,r,n,i,a){je(t.config.authDomain,t,"auth-domain-config-required"),je(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:ll,eventId:i};if(e instanceof Iy){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",qj(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(a||{}))s[l]=c}if(e instanceof Mu){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(s.scopes=l.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const l of Object.keys(o))o[l]===void 0&&delete o[l];return`${G6(t)}?${mu(o).slice(1)}`}function G6({config:t}){return t.emulator?Ey(t,q6):`https://${t.authDomain}/${H6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="webStorageSupport";class W6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MA,this._completeRedirectFn=y6,this._overrideRedirectResult=g6}async _openPopup(e,r,n,i){var a;jn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=nT(e,r,n,ov(),i);return $6(e,s,Py())}async _openRedirect(e,r,n,i){return await this._originValidation(e),KU(nT(e,r,n,ov(),i)),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(jn(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await N6(e),n=new w6(e);return r.register("authEvent",i=>(je(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Ag,{type:Ag},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Ag];s!==void 0&&r(!!s),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=k6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return CA()||Ay()||yp()}}const K6=W6;var aT="@firebase/auth",sT="0.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);!r||(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Q6(t){ws(new wa("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:a,authDomain:s}=n.options;return((o,l)=>{je(a&&!a.includes(":"),"invalid-api-key",{appName:o.name}),je(!(s!=null&&s.includes(":")),"argument-error",{appName:o.name});const c={apiKey:a,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AA(t)},u=new OU(o,l,c);return lU(u,r),u})(n,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),ws(new wa("auth-internal",e=>{const r=bp(e.getProvider("auth").getImmediate());return(n=>new Y6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(aT,sT,X6(t)),Qi(aT,sT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6=5*60,Z6=zk("authIdTokenMaxAge")||J6;let oT=null;const e8=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Z6)return;const i=r==null?void 0:r.token;oT!==i&&(oT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function t8(t=S0()){const e=$f(t,"auth");if(e.isInitialized())return e.getImmediate();const r=oU(t,{popupRedirectResolver:K6,persistence:[i6,qU,MA]}),n=zk("authTokenSyncURL");if(n){const a=e8(n);UU(r,a,()=>a(r.currentUser)),BU(r,s=>a(s))}const i=Bk("auth");return i&&DU(r,`http://${i}`),r}Q6("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="firebasestorage.googleapis.com",HA="storageBucket",r8=2*60*1e3,i8=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt extends dn{constructor(e,r,n=0){super(Ig(e),`Firebase Storage: ${r} (${Ig(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ig(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Ig(t){return"storage/"+t}function Dy(){const t="An unknown error occurred, please check the error payload for server response.";return new Rt("unknown",t)}function n8(t){return new Rt("object-not-found","Object '"+t+"' does not exist.")}function a8(t){return new Rt("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function s8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rt("unauthenticated",t)}function o8(){return new Rt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function l8(t){return new Rt("unauthorized","User does not have permission to access '"+t+"'.")}function c8(){return new Rt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function u8(){return new Rt("canceled","User canceled the upload/download.")}function d8(t){return new Rt("invalid-url","Invalid URL '"+t+"'.")}function h8(t){return new Rt("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function f8(){return new Rt("no-default-bucket","No default bucket found. Did you set the '"+HA+"' property when initializing the app?")}function p8(){return new Rt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function g8(){return new Rt("no-download-url","The given file does not have any download URLs.")}function m8(t){return new Rt("unsupported-environment",`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cv(t){return new Rt("invalid-argument",t)}function qA(){return new Rt("app-deleted","The Firebase app was deleted.")}function v8(t){return new Rt("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wc(t,e){return new Rt("invalid-format","String does not match format '"+t+"': "+e)}function Nl(t){throw new Rt("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ai.makeFromUrl(e,r)}catch{return new ai(e,"")}if(n.path==="")return n;throw h8(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),y={bucket:1,path:3},w=r===VA?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",T=new RegExp(`^https?://${w}/${i}/${v}`,"i"),A=[{regex:o,indices:l,postModify:a},{regex:p,indices:y,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<A.length;E++){const I=A[E],F=I.regex.exec(e);if(F){const j=F[I.indices.bucket];let D=F[I.indices.path];D||(D=""),n=new ai(j,D),I.postModify(n);break}}if(n==null)throw d8(e);return n}}class y8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t,e,r){let n=1,i=null,a=null,s=!1,o=0;function l(){return o===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,t(p,l())},v)}function h(){a&&clearTimeout(a)}function p(v,...T){if(c){h();return}if(v){h(),u.call(null,v,...T);return}if(l()||s){h(),u.call(null,v,...T);return}n<64&&(n*=2);let A;o===1?(o=2,A=0):A=(n+Math.random())*1e3,d(A)}let y=!1;function w(v){y||(y=!0,h(),!c&&(i!==null?(v||(o=2),clearTimeout(i),d(0)):v||(o=1)))}return d(0),a=setTimeout(()=>{s=!0,w(!0)},r),w}function w8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(t){return t!==void 0}function x8(t){return typeof t=="object"&&!Array.isArray(t)}function Ly(t){return typeof t=="string"||t instanceof String}function lT(t){return Ry()&&t instanceof Blob}function Ry(){return typeof Blob!="undefined"&&!Pj()}function cT(t,e,r,n){if(n<e)throw cv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw cv(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function GA(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fs||(fs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,r,n,i,a,s,o,l,c,u,d,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Md(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===fs.NO_ERROR,l=a.getStatus();if((!o||T8(l,this.additionalRetryCodes_))&&this.retry){const u=a.getErrorCode()===fs.ABORT;n(!1,new Md(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Md(c,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());_8(l)?a(l):a()}catch(l){s(l)}else if(o!==null){const l=Dy();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(i.canceled){const l=this.appDelete_?qA():u8();s(l)}else{const l=c8();s(l)}};this.canceled_?r(!1,new Md(!1,null,!0)):this.backoffId_=b8(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&w8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Md{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function k8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function E8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function C8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function A8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function I8(t,e,r,n,i,a,s=!0){const o=GA(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return C8(c,e),k8(c,r),E8(c,a),A8(c,n),new S8(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function O8(...t){const e=P8();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(Ry())return new Blob(t);throw new Rt("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function D8(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(t){if(typeof atob=="undefined")throw m8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pg{constructor(e,r){this.data=e,this.contentType=r||null}}function R8(t,e){switch(t){case Gi.RAW:return new Pg(WA(e));case Gi.BASE64:case Gi.BASE64URL:return new Pg(KA(t,e));case Gi.DATA_URL:return new Pg(N8(e),j8(e))}throw Dy()}function WA(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,s=t.charCodeAt(++r);n=65536|(a&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function M8(t){let e;try{e=decodeURIComponent(t)}catch{throw wc(Gi.DATA_URL,"Malformed data URL.")}return WA(e)}function KA(t,e){switch(t){case Gi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw wc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw wc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=L8(e)}catch(i){throw i.message.includes("polyfill")?i:wc(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class YA{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw wc(Gi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=F8(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function N8(t){const e=new YA(t);return e.base64?KA(Gi.BASE64,e.rest):M8(e.rest)}function j8(t){return new YA(t).contentType}function F8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,r){let n=0,i="";lT(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(lT(this.data_)){const n=this.data_,i=D8(n,e,r);return i===null?null:new ca(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new ca(n,!0)}}static getBlob(...e){if(Ry()){const r=e.map(n=>n instanceof ca?n.data_:n);return new ca(O8.apply(null,r))}else{const r=e.map(s=>Ly(s)?R8(Gi.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(s=>{for(let o=0;o<s.length;o++)i[a++]=s[o]}),new ca(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){let e;try{e=JSON.parse(t)}catch{return null}return x8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function U8(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function QA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t,e){return e}class Ir{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||z8}}let Nd=null;function $8(t){return!Ly(t)||t.length<2?t:QA(t)}function JA(){if(Nd)return Nd;const t=[];t.push(new Ir("bucket")),t.push(new Ir("generation")),t.push(new Ir("metageneration")),t.push(new Ir("name","fullPath",!0));function e(a,s){return $8(s)}const r=new Ir("name");r.xform=e,t.push(r);function n(a,s){return s!==void 0?Number(s):s}const i=new Ir("size");return i.xform=n,t.push(i),t.push(new Ir("timeCreated")),t.push(new Ir("updated")),t.push(new Ir("md5Hash",null,!0)),t.push(new Ir("cacheControl",null,!0)),t.push(new Ir("contentDisposition",null,!0)),t.push(new Ir("contentEncoding",null,!0)),t.push(new Ir("contentLanguage",null,!0)),t.push(new Ir("contentType",null,!0)),t.push(new Ir("metadata","customMetadata",!0)),Nd=t,Nd}function V8(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new ai(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function H8(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const s=r[a];n[s.local]=s.xform(n,e[s.server])}return V8(n,t),n}function ZA(t,e,r){const n=XA(e);return n===null?null:H8(t,n,r)}function q8(t,e,r,n){const i=XA(e);if(i===null||!Ly(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+s(u)+"/o/"+s(d),p=My(h,r,n),y=GA({alt:"media",token:c});return p+y})[0]}function G8(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class eI{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){if(!t)throw Dy()}function W8(t,e){function r(n,i){const a=ZA(t,i,e);return tI(a!==null),a}return r}function K8(t,e){function r(n,i){const a=ZA(t,i,e);return tI(a!==null),q8(a,i,t.host,t._protocol)}return r}function rI(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=o8():i=s8():r.getStatus()===402?i=a8(t.bucket):r.getStatus()===403?i=l8(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function Y8(t){const e=rI(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=n8(t.path)),a.serverResponse=i.serverResponse,a}return r}function X8(t,e,r){const n=e.fullServerUrl(),i=My(n,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,o=new eI(i,a,K8(t,r),s);return o.errorHandler=Y8(e),o}function Q8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function J8(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Q8(null,e)),n}function Z8(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let A="";for(let E=0;E<2;E++)A=A+Math.random().toString().slice(2);return A}const l=o();s["Content-Type"]="multipart/related; boundary="+l;const c=J8(e,n,i),u=G8(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=ca.getBlob(d,n,h);if(p===null)throw p8();const y={name:c.fullPath},w=My(a,t.host,t._protocol),v="POST",T=t.maxUploadRetryTime,k=new eI(w,v,W8(t,r),T);return k.urlParams=y,k.headers=s,k.body=p.uploadData(),k.errorHandler=rI(e),k}class ez{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw Nl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tz extends ez{initXhr(){this.xhr_.responseType="text"}}function iI(){return new tz}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,r){this._service=e,r instanceof ai?this._location=r:this._location=ai.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Ss(e,r)}get root(){const e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QA(this._location.path)}get storage(){return this._service}get parent(){const e=B8(this._location.path);if(e===null)return null;const r=new ai(this._location.bucket,e);return new Ss(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw v8(e)}}function rz(t,e,r){t._throwIfRoot("uploadBytes");const n=Z8(t.storage,t._location,JA(),new ca(e,!0),r);return t.storage.makeRequestWithTokens(n,iI).then(i=>({metadata:i,ref:t}))}function iz(t){t._throwIfRoot("getDownloadURL");const e=X8(t.storage,t._location,JA());return t.storage.makeRequestWithTokens(e,iI).then(r=>{if(r===null)throw g8();return r})}function nz(t,e){const r=U8(t._location.path,e),n=new ai(t._location.bucket,r);return new Ss(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(t){return/^[A-Za-z]+:\/\//.test(t)}function sz(t,e){return new Ss(t,e)}function nI(t,e){if(t instanceof Ny){const r=t;if(r._bucket==null)throw f8();const n=new Ss(r,r._bucket);return e!=null?nI(n,e):n}else return e!==void 0?nz(t,e):t}function oz(t,e){if(e&&az(e)){if(t instanceof Ny)return sz(t,e);throw cv("To use ref(service, url), the first argument must be a Storage instance.")}else return nI(t,e)}function uT(t,e){const r=e==null?void 0:e[HA];return r==null?null:ai.makeFromBucketSpec(r,t)}function lz(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:$k(i,t.app.options.projectId))}class Ny{constructor(e,r,n,i,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=VA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=r8,this._maxUploadRetryTime=i8,this._requests=new Set,i!=null?this._bucket=ai.makeFromBucketSpec(i,this._host):this._bucket=uT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ai.makeFromBucketSpec(this._url,e):this._bucket=uT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ss(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new y8(qA());{const s=I8(e,this._appId,n,i,r,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const dT="@firebase/storage",hT="0.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="storage";function YJ(t,e,r){return t=qt(t),rz(t,e,r)}function XJ(t){return t=qt(t),iz(t)}function QJ(t,e){return t=qt(t),oz(t,e)}function cz(t=S0(),e){t=qt(t);const n=$f(t,aI).getImmediate({identifier:e}),i=Uk("storage");return i&&uz(n,...i),n}function uz(t,e,r,n={}){lz(t,e,r,n)}function dz(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ny(r,n,i,e,ll)}function hz(){ws(new wa(aI,dz,"PUBLIC").setMultipleInstances(!0)),Qi(dT,hT,""),Qi(dT,hT,"esm2017")}hz();/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var fz="store";function ml(t,e){Object.keys(t).forEach(function(r){return e(t[r],r)})}function pz(t){return t!==null&&typeof t=="object"}function gz(t){return t&&typeof t.then=="function"}function mz(t,e){return function(){return t(e)}}function sI(t,e,r){return e.indexOf(t)<0&&(r&&r.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function oI(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var r=t.state;xp(t,r,[],t._modules.root,!0),jy(t,r,e)}function jy(t,e,r){var n=t._state,i=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var a=t._wrappedGetters,s={},o={},l=DL(!0);l.run(function(){ml(a,function(c,u){s[u]=mz(c,t),o[u]=It(function(){return s[u]()}),Object.defineProperty(t.getters,u,{get:function(){return o[u].value},enumerable:!0})})}),t._state=al({data:e}),t._scope=l,t.strict&&_z(t),n&&r&&t._withCommit(function(){n.data=null}),i&&i.stop()}function xp(t,e,r,n,i){var a=!r.length,s=t._modules.getNamespace(r);if(n.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=n),!a&&!i){var o=Fy(e,r.slice(0,-1)),l=r[r.length-1];t._withCommit(function(){o[l]=n.state})}var c=n.context=vz(t,s,r);n.forEachMutation(function(u,d){var h=s+d;yz(t,h,u,c)}),n.forEachAction(function(u,d){var h=u.root?d:s+d,p=u.handler||u;bz(t,h,p,c)}),n.forEachGetter(function(u,d){var h=s+d;wz(t,h,u,c)}),n.forEachChild(function(u,d){xp(t,e,r.concat(d),u,i)})}function vz(t,e,r){var n=e==="",i={dispatch:n?t.dispatch:function(a,s,o){var l=Yh(a,s,o),c=l.payload,u=l.options,d=l.type;return(!u||!u.root)&&(d=e+d),t.dispatch(d,c)},commit:n?t.commit:function(a,s,o){var l=Yh(a,s,o),c=l.payload,u=l.options,d=l.type;(!u||!u.root)&&(d=e+d),t.commit(d,c,u)}};return Object.defineProperties(i,{getters:{get:n?function(){return t.getters}:function(){return lI(t,e)}},state:{get:function(){return Fy(t.state,r)}}}),i}function lI(t,e){if(!t._makeLocalGettersCache[e]){var r={},n=e.length;Object.keys(t.getters).forEach(function(i){if(i.slice(0,n)===e){var a=i.slice(n);Object.defineProperty(r,a,{get:function(){return t.getters[i]},enumerable:!0})}}),t._makeLocalGettersCache[e]=r}return t._makeLocalGettersCache[e]}function yz(t,e,r,n){var i=t._mutations[e]||(t._mutations[e]=[]);i.push(function(s){r.call(t,n.state,s)})}function bz(t,e,r,n){var i=t._actions[e]||(t._actions[e]=[]);i.push(function(s){var o=r.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},s);return gz(o)||(o=Promise.resolve(o)),t._devtoolHook?o.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):o})}function wz(t,e,r,n){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(a){return r(n.state,n.getters,a.state,a.getters)})}function _z(t){ls(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Fy(t,e){return e.reduce(function(r,n){return r[n]},t)}function Yh(t,e,r){return pz(t)&&t.type&&(r=e,e=t,t=t.type),{type:t,payload:e,options:r}}var xz="vuex bindings",fT="vuex:mutations",Og="vuex:actions",Hs="vuex",Tz=0;function Sz(t,e){eN({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[xz]},function(r){r.addTimelineLayer({id:fT,label:"Vuex Mutations",color:pT}),r.addTimelineLayer({id:Og,label:"Vuex Actions",color:pT}),r.addInspector({id:Hs,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),r.on.getInspectorTree(function(n){if(n.app===t&&n.inspectorId===Hs)if(n.filter){var i=[];hI(i,e._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[dI(e._modules.root,"")]}),r.on.getInspectorState(function(n){if(n.app===t&&n.inspectorId===Hs){var i=n.nodeId;lI(e,i),n.state=Cz(Iz(e._modules,i),i==="root"?e.getters:e._makeLocalGettersCache,i)}}),r.on.editInspectorState(function(n){if(n.app===t&&n.inspectorId===Hs){var i=n.nodeId,a=n.path;i!=="root"&&(a=i.split("/").filter(Boolean).concat(a)),e._withCommit(function(){n.set(e._state.data,a,n.state.value)})}}),e.subscribe(function(n,i){var a={};n.payload&&(a.payload=n.payload),a.state=i,r.notifyComponentUpdate(),r.sendInspectorTree(Hs),r.sendInspectorState(Hs),r.addTimelineEvent({layerId:fT,event:{time:Date.now(),title:n.type,data:a}})}),e.subscribeAction({before:function(n,i){var a={};n.payload&&(a.payload=n.payload),n._id=Tz++,n._time=Date.now(),a.state=i,r.addTimelineEvent({layerId:Og,event:{time:n._time,title:n.type,groupId:n._id,subtitle:"start",data:a}})},after:function(n,i){var a={},s=Date.now()-n._time;a.duration={_custom:{type:"duration",display:s+"ms",tooltip:"Action duration",value:s}},n.payload&&(a.payload=n.payload),a.state=i,r.addTimelineEvent({layerId:Og,event:{time:Date.now(),title:n.type,groupId:n._id,subtitle:"end",data:a}})}})})}var pT=8702998,kz=6710886,Ez=16777215,cI={label:"namespaced",textColor:Ez,backgroundColor:kz};function uI(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function dI(t,e){return{id:e||"root",label:uI(e),tags:t.namespaced?[cI]:[],children:Object.keys(t._children).map(function(r){return dI(t._children[r],e+r+"/")})}}function hI(t,e,r,n){n.includes(r)&&t.push({id:n||"root",label:n.endsWith("/")?n.slice(0,n.length-1):n||"Root",tags:e.namespaced?[cI]:[]}),Object.keys(e._children).forEach(function(i){hI(t,e._children[i],r,n+i+"/")})}function Cz(t,e,r){e=r==="root"?e:e[r];var n=Object.keys(e),i={state:Object.keys(t.state).map(function(s){return{key:s,editable:!0,value:t.state[s]}})};if(n.length){var a=Az(e);i.getters=Object.keys(a).map(function(s){return{key:s.endsWith("/")?uI(s):s,editable:!1,value:uv(function(){return a[s]})}})}return i}function Az(t){var e={};return Object.keys(t).forEach(function(r){var n=r.split("/");if(n.length>1){var i=e,a=n.pop();n.forEach(function(s){i[s]||(i[s]={_custom:{value:{},display:s,tooltip:"Module",abstract:!0}}),i=i[s]._custom.value}),i[a]=uv(function(){return t[r]})}else e[r]=uv(function(){return t[r]})}),e}function Iz(t,e){var r=e.split("/").filter(function(n){return n});return r.reduce(function(n,i,a){var s=n[i];if(!s)throw new Error('Missing module "'+i+'" for path "'+e+'".');return a===r.length-1?s:s._children},e==="root"?t:t.root._children)}function uv(t){try{return t()}catch(e){return e}}var Ni=function(e,r){this.runtime=r,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=(typeof n=="function"?n():n)||{}},fI={namespaced:{configurable:!0}};fI.namespaced.get=function(){return!!this._rawModule.namespaced};Ni.prototype.addChild=function(e,r){this._children[e]=r};Ni.prototype.removeChild=function(e){delete this._children[e]};Ni.prototype.getChild=function(e){return this._children[e]};Ni.prototype.hasChild=function(e){return e in this._children};Ni.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Ni.prototype.forEachChild=function(e){ml(this._children,e)};Ni.prototype.forEachGetter=function(e){this._rawModule.getters&&ml(this._rawModule.getters,e)};Ni.prototype.forEachAction=function(e){this._rawModule.actions&&ml(this._rawModule.actions,e)};Ni.prototype.forEachMutation=function(e){this._rawModule.mutations&&ml(this._rawModule.mutations,e)};Object.defineProperties(Ni.prototype,fI);var Ms=function(e){this.register([],e,!1)};Ms.prototype.get=function(e){return e.reduce(function(r,n){return r.getChild(n)},this.root)};Ms.prototype.getNamespace=function(e){var r=this.root;return e.reduce(function(n,i){return r=r.getChild(i),n+(r.namespaced?i+"/":"")},"")};Ms.prototype.update=function(e){pI([],this.root,e)};Ms.prototype.register=function(e,r,n){var i=this;n===void 0&&(n=!0);var a=new Ni(r,n);if(e.length===0)this.root=a;else{var s=this.get(e.slice(0,-1));s.addChild(e[e.length-1],a)}r.modules&&ml(r.modules,function(o,l){i.register(e.concat(l),o,n)})};Ms.prototype.unregister=function(e){var r=this.get(e.slice(0,-1)),n=e[e.length-1],i=r.getChild(n);!i||!i.runtime||r.removeChild(n)};Ms.prototype.isRegistered=function(e){var r=this.get(e.slice(0,-1)),n=e[e.length-1];return r?r.hasChild(n):!1};function pI(t,e,r){if(e.update(r),r.modules)for(var n in r.modules){if(!e.getChild(n))return;pI(t.concat(n),e.getChild(n),r.modules[n])}}function Pz(t){return new Yr(t)}var Yr=function(e){var r=this;e===void 0&&(e={});var n=e.plugins;n===void 0&&(n=[]);var i=e.strict;i===void 0&&(i=!1);var a=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ms(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=a;var s=this,o=this,l=o.dispatch,c=o.commit;this.dispatch=function(h,p){return l.call(s,h,p)},this.commit=function(h,p,y){return c.call(s,h,p,y)},this.strict=i;var u=this._modules.root.state;xp(this,u,[],this._modules.root),jy(this,u),n.forEach(function(d){return d(r)})},By={state:{configurable:!0}};Yr.prototype.install=function(e,r){e.provide(r||fz,this),e.config.globalProperties.$store=this;var n=this._devtools!==void 0?this._devtools:!1;n&&Sz(e,this)};By.state.get=function(){return this._state.data};By.state.set=function(t){};Yr.prototype.commit=function(e,r,n){var i=this,a=Yh(e,r,n),s=a.type,o=a.payload,l={type:s,payload:o},c=this._mutations[s];!c||(this._withCommit(function(){c.forEach(function(d){d(o)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};Yr.prototype.dispatch=function(e,r){var n=this,i=Yh(e,r),a=i.type,s=i.payload,o={type:a,payload:s},l=this._actions[a];if(!!l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(o,n.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(s)})):l[0](s);return new Promise(function(u,d){c.then(function(h){try{n._actionSubscribers.filter(function(p){return p.after}).forEach(function(p){return p.after(o,n.state)})}catch{}u(h)},function(h){try{n._actionSubscribers.filter(function(p){return p.error}).forEach(function(p){return p.error(o,n.state,h)})}catch{}d(h)})})}};Yr.prototype.subscribe=function(e,r){return sI(e,this._subscribers,r)};Yr.prototype.subscribeAction=function(e,r){var n=typeof e=="function"?{before:e}:e;return sI(n,this._actionSubscribers,r)};Yr.prototype.watch=function(e,r,n){var i=this;return ls(function(){return e(i.state,i.getters)},r,Object.assign({},n))};Yr.prototype.replaceState=function(e){var r=this;this._withCommit(function(){r._state.data=e})};Yr.prototype.registerModule=function(e,r,n){n===void 0&&(n={}),typeof e=="string"&&(e=[e]),this._modules.register(e,r),xp(this,this.state,e,this._modules.get(e),n.preserveState),jy(this,this.state)};Yr.prototype.unregisterModule=function(e){var r=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var n=Fy(r.state,e.slice(0,-1));delete n[e[e.length-1]]}),oI(this)};Yr.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Yr.prototype.hotUpdate=function(e){this._modules.update(e),oI(this,!0)};Yr.prototype._withCommit=function(e){var r=this._committing;this._committing=!0,e(),this._committing=r};Object.defineProperties(Yr.prototype,By);var Oz=function(t){return function(e){return!!e&&typeof e=="object"}(t)&&!function(e){var r=Object.prototype.toString.call(e);return r==="[object RegExp]"||r==="[object Date]"||function(n){return n.$$typeof===Dz}(e)}(t)},Dz=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function ec(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Fo(Array.isArray(t)?[]:{},t,e):t}function Lz(t,e,r){return t.concat(e).map(function(n){return ec(n,r)})}function gT(t){return Object.keys(t).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(r){return e.propertyIsEnumerable(r)}):[]}(t))}function mT(t,e){try{return e in t}catch{return!1}}function Fo(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||Lz,r.isMergeableObject=r.isMergeableObject||Oz,r.cloneUnlessOtherwiseSpecified=ec;var n=Array.isArray(e);return n===Array.isArray(t)?n?r.arrayMerge(t,e,r):function(i,a,s){var o={};return s.isMergeableObject(i)&&gT(i).forEach(function(l){o[l]=ec(i[l],s)}),gT(a).forEach(function(l){(function(c,u){return mT(c,u)&&!(Object.hasOwnProperty.call(c,u)&&Object.propertyIsEnumerable.call(c,u))})(i,l)||(o[l]=mT(i,l)&&s.isMergeableObject(a[l])?function(c,u){if(!u.customMerge)return Fo;var d=u.customMerge(c);return typeof d=="function"?d:Fo}(l,s)(i[l],a[l],s):ec(a[l],s))}),o}(t,e,r):ec(e,r)}Fo.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,n){return Fo(r,n,e)},{})};var Rz=Fo;function Mz(t){var e=(t=t||{}).storage||window&&window.localStorage,r=t.key||"vuex";function n(u,d){var h=d.getItem(u);try{return typeof h=="string"?JSON.parse(h):typeof h=="object"?h:void 0}catch{}}function i(){return!0}function a(u,d,h){return h.setItem(u,JSON.stringify(d))}function s(u,d){return Array.isArray(d)?d.reduce(function(h,p){return function(v,T,k,A){return!/^(__proto__|constructor|prototype)$/.test(T)&&((T=T.split?T.split("."):T.slice(0)).slice(0,-1).reduce(function(E,I){return E[I]=E[I]||{}},v)[T.pop()]=k),v}(h,p,(y=u,(y=((w=p).split?w.split("."):w).reduce(function(v,T){return v&&v[T]},y))===void 0?void 0:y));var y,w},{}):u}function o(u){return function(d){return u.subscribe(d)}}(t.assertStorage||function(){e.setItem("@@",1),e.removeItem("@@")})(e);var l,c=function(){return(t.getState||n)(r,e)};return t.fetchBeforeUse&&(l=c()),function(u){t.fetchBeforeUse||(l=c()),typeof l=="object"&&l!==null&&(u.replaceState(t.overwrite?l:Rz(u.state,l,{arrayMerge:t.arrayMerger||function(d,h){return h},clone:!1})),(t.rehydrated||function(){})(u)),(t.subscriber||o)(u)(function(d,h){(t.filter||i)(d)&&(t.setState||a)(r,(t.reducer||s)(h,t.paths),e)})}}const va=Pz({plugins:[Mz({storage:window.sessionStorage})],state:{user:{loggedIn:!1,data:null}},getters:{user(t){return t.user},username(t){return t.user.data.displayName},userEmail(t){return t.user.data.email},userPhotoURL(t){return t.user.data.photoURL}},mutations:{SET_LOGGED_IN(t,e){t.user.loggedIn=e},SET_USER(t,e){t.user.data=e}}}),Nz={apiKey:"AIzaSyDJDdYFekcMKz_LedlGXtlS9Vsaw7nALuk",authDomain:"thecinemat-3606a.firebaseapp.com",databaseURL:"https://thecinemat-3606a-default-rtdb.firebaseio.com",projectId:"thecinemat-3606a",storageBucket:"thecinemat-3606a.appspot.com",messagingSenderId:"912057146143",appId:"1:912057146143:web:70a2b8142049d9fd35ee2a",measurementId:"G-B94NPK3VQM"},Uy=qk(Nz),jz=U4(Uy),vT=t8(Uy),JJ=cz(Uy),Fz=new Ci,Bz=()=>{d6(vT,Fz).then(t=>{if(t.user.email.indexOf("@yale.edu")===-1){zU(vT).then(()=>{}).catch(n=>{}),alert("Please sign in with a Yale email address.");return}Ci.credentialFromResult(t).accessToken;const r=t.user;r&&(r.value=t,va.commit("SET_LOGGED_IN",!0),va.commit("SET_USER",{displayName:r.displayName,email:r.email,photoURL:r.photoURL}),console.log(va.getters.user))}).catch(t=>{alert(t),t.code,t.message,t.customData.email,Ci.credentialFromError(t)})},ZJ=async()=>{const t=P4(jz,"allProjects"),e=await iU(t),r=[];return e.forEach(n=>{r.push({id:n.id,...n.data()})}),r},Uz=ne("div",{class:"idk"},null,-1),zz={class:"app-main z-30"},$z={class:"max-w-7xl mx-auto px-4 sm:px-6"},Vz={class:"flex justify-between items-center border-b-2 border-gray-100 py-6 lg:justify-start lg:space-x-10"},Hz={class:"flex justify-start lg:w-0 lg:flex-1"},qz=ne("span",{class:"sr-only"},"Cinemat Logo",-1),Gz=ne("img",{class:"h-8 w-auto sm:h-10",src:Ek,alt:""},null,-1),Wz={class:"-mr-2 -my-2 lg:hidden"},Kz=ne("span",{class:"sr-only"},"Open menu",-1),Yz=Os(" All Projects "),Xz=ne("span",null,"Set Opportunities",-1),Qz={class:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden"},Jz={class:"relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8"},Zz={class:"ml-4"},e$={class:"text-base font-medium text-gray-900"},t$={class:"mt-1 text-sm text-gray-500"},r$=ne("span",null,"Events",-1),i$={class:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden"},n$={class:"relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8"},a$={class:"ml-4"},s$={class:"text-base font-medium text-gray-900"},o$={class:"mt-1 text-sm text-gray-500"},l$=Os(" Resources "),c$=Os(" About "),u$={class:"hidden lg:flex items-center justify-end lg:flex-1 lg:w-0"},d$=Os(" Log-in with netID "),h$=["src"],f$={class:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden"},p$={class:"relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8"},g$={class:"ml-4"},m$={class:"text-base font-medium text-gray-900"},v$={class:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 bg-white divide-y-2 divide-gray-50"},y$={class:"pt-5 pb-6 px-5"},b$={class:"flex items-center justify-between"},w$=ne("span",{class:"sr-only"},"Cinemat Logo",-1),_$=ne("img",{class:"h-8 w-auto sm:h-10",src:Ek,alt:""},null,-1),x$={class:"-mr-2"},T$=ne("span",{class:"sr-only"},"Close menu",-1),S$={class:"mt-6"},k$={class:"grid gap-y-8"},E$={class:"ml-3 text-base font-medium text-gray-900"},C$={class:"py-6 px-5 space-y-6"},A$={class:"grid grid-cols-2 gap-y-4 gap-x-8"},I$=Os(" Log-in with netID "),P$={__name:"Header",setup(t){const e=[{name:"Add a production",href:"/create"},{name:"Edit your productions",href:"/edit"},{name:"Sign out",href:"#"}],r=[{name:"For Filmmakers",description:"Get involved with a set and get some real-world experience.",href:"/opportunities/filmmakers",icon:H_},{name:"For Actors",description:"Make your on-screen debut.",href:"/opportunities/actors",icon:V_}],n=[{name:"Calendar",description:"See what events are coming up.",href:"/events/calendar",icon:z_},{name:"FroFilm",description:"A film festival for students, by students.",href:"/events/frofilm",icon:H_},{name:"24 Hour Film Fest",description:"A 24-hour film competition.",href:"/events/24hours",icon:V_}],i=[{name:"All Projects",description:"Get all of your questions answered in our forums or contact support.",href:"/projects",icon:kj},{name:"Opportunities",description:"Learn how to maximize our platform to get the most out of it.",href:"/opportunities/filmmakers",icon:Tj},{name:"Events",description:"See what meet-ups and other events we might be planning near you.",href:"/events",icon:z_},{name:"Resources",description:"Understand how we take your privacy seriously.",href:"/resources",icon:$_},{name:"About",description:"Understand how we take your privacy seriously.",href:"/about",icon:$_}];return(a,s)=>{const o=Dc("router-link");return Ye(),Kt(St,null,[Uz,ne("div",zz,[xe(ft(Yl),{class:"relative bg-white z-30"},{default:Ke(()=>[ne("div",$z,[ne("div",Vz,[ne("div",Hz,[xe(o,{to:"/"},{default:Ke(()=>[qz,Gz]),_:1})]),ne("div",Wz,[xe(ft(Rl),{class:"bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-light"},{default:Ke(()=>[Kz,xe(ft(Sj),{class:"h-6 w-6","aria-hidden":"true"})]),_:1})]),xe(ft(xj),{as:"nav",class:"hidden lg:flex items-center space-x-10"},{default:Ke(()=>[xe(o,{to:"/projects",class:"text-base font-semibold text-primary hover:text-gray-900"},{default:Ke(()=>[Yz]),_:1}),xe(ft(Yl),{class:"relative"},{default:Ke(({open:l})=>[xe(ft(Rl),{class:mn([l?"text-gray-900":"text-gray-500","group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light"])},{default:Ke(()=>[Xz,xe(ft(dg),{class:mn([l?"text-gray-600":"text-gray-400","ml-2 h-5 w-5 group-hover:text-gray-500"]),"aria-hidden":"true"},null,8,["class"])]),_:2},1032,["class"]),xe(ao,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:Ke(()=>[ne("div",null,[xe(ft(Cd),{class:"absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-md sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2"},{default:Ke(()=>[ne("div",Qz,[ne("div",Jz,[(Ye(),Kt(St,null,bn(r,c=>xe(o,{key:c.name,to:c.href,class:"-m-3 p-3 flex items-start rounded-lg hover:bg-gray-50"},{default:Ke(()=>[(Ye(),zt(Kl(c.icon),{class:"flex-shrink-0 h-6 w-6 text-primary-light","aria-hidden":"true"})),ne("div",Zz,[ne("p",e$,Si(c.name),1),ne("p",t$,Si(c.description),1)])]),_:2},1032,["to"])),64))])])]),_:1})])]),_:1})]),_:1}),xe(ft(Yl),{class:"relative"},{default:Ke(({open:l})=>[xe(ft(Rl),{class:mn([l?"text-gray-900":"text-gray-500","group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light"])},{default:Ke(()=>[r$,xe(ft(dg),{class:mn([l?"text-gray-600":"text-gray-400","ml-2 h-5 w-5 group-hover:text-gray-500"]),"aria-hidden":"true"},null,8,["class"])]),_:2},1032,["class"]),xe(ao,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:Ke(()=>[ne("div",null,[xe(ft(Cd),{class:"absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-md sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2"},{default:Ke(()=>[ne("div",i$,[ne("div",n$,[(Ye(),Kt(St,null,bn(n,c=>xe(o,{key:c.name,to:c.href,class:"-m-3 p-3 flex items-start rounded-lg hover:bg-gray-50"},{default:Ke(()=>[(Ye(),zt(Kl(c.icon),{class:"flex-shrink-0 h-6 w-6 text-primary-light","aria-hidden":"true"})),ne("div",a$,[ne("p",s$,Si(c.name),1),ne("p",o$,Si(c.description),1)])]),_:2},1032,["to"])),64))])])]),_:1})])]),_:1})]),_:1}),xe(o,{to:"/resources",class:"text-base font-medium text-gray-500 hover:text-gray-900"},{default:Ke(()=>[l$]),_:1}),xe(o,{to:"/about",class:"text-base font-medium text-gray-500 hover:text-gray-900"},{default:Ke(()=>[c$]),_:1})]),_:1}),ne("div",u$,[ft(va).getters.user.loggedIn===!1?(Ye(),zt(o,{key:0,onClick:ft(Bz),to:"#",class:"ml-8 whitespace-nowrap hidden lg:inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary-light hover:bg-primary"},{default:Ke(()=>[d$]),_:1},8,["onClick"])):(Ye(),zt(ft(Yl),{key:1,class:"relative"},{default:Ke(({open:l})=>[xe(ft(Rl),{class:mn([l?"text-gray-900":"text-gray-500","group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light"])},{default:Ke(()=>[ne("img",{src:ft(va).getters.userPhotoURL,referrerpolicy:"no-referrer",class:"h-10 w-10 rounded-full"},null,8,h$),xe(ft(dg),{class:mn([l?"text-gray-600":"text-gray-400","ml-2 h-5 w-5 group-hover:text-gray-500"]),"aria-hidden":"true"},null,8,["class"])]),_:2},1032,["class"]),xe(ao,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:Ke(()=>[ne("div",null,[xe(ft(Cd),{class:"absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-md sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2"},{default:Ke(()=>[ne("div",f$,[ne("div",p$,[(Ye(),Kt(St,null,bn(e,c=>xe(o,{key:c.name,to:c.href,class:"-m-3 p-3 flex items-start rounded-lg hover:bg-gray-50"},{default:Ke(()=>[(Ye(),zt(Kl(c.icon),{class:"flex-shrink-0 h-6 w-6 text-primary-light","aria-hidden":"true"})),ne("div",g$,[ne("p",m$,Si(c.name),1)])]),_:2},1032,["to"])),64))])])]),_:1})])]),_:1})]),_:1}))])])]),xe(ao,{"enter-active-class":"duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"duration-100 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Ke(()=>[ne("div",null,[xe(ft(Cd),{focus:"",class:"absolute top-0 inset-x-0 p-2 transition transform origin-top-right lg:hidden"},{default:Ke(()=>[ne("div",v$,[ne("div",y$,[ne("div",b$,[xe(o,{to:"/"},{default:Ke(()=>[w$,_$]),_:1}),ne("div",x$,[xe(ft(Rl),{class:"bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-light"},{default:Ke(()=>[T$,xe(ft(Ej),{class:"h-6 w-6","aria-hidden":"true"})]),_:1})])]),ne("div",S$,[ne("nav",k$,[(Ye(!0),Kt(St,null,bn(a.solutions,l=>(Ye(),zt(o,{key:l.name,href:l.href,class:"-m-3 p-3 flex items-center rounded-md hover:bg-gray-50"},{default:Ke(()=>[(Ye(),zt(Kl(l.icon),{class:"flex-shrink-0 h-6 w-6 text-primary-light","aria-hidden":"true"})),ne("span",E$,Si(l.name),1)]),_:2},1032,["href"]))),128))])])]),ne("div",C$,[ne("div",A$,[(Ye(),Kt(St,null,bn(i,l=>xe(o,{key:l.name,to:l.href,class:"text-base font-medium text-gray-900 hover:text-gray-700"},{default:Ke(()=>[Os(Si(l.name),1)]),_:2},1032,["to"])),64))]),ne("div",null,[xe(o,{to:"#",class:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary hover:bg-primary"},{default:Ke(()=>[I$]),_:1})])])])]),_:1})])]),_:1})]),_:1})])],64)}}},O$={class:"bg-white","aria-labelledby":"footer-heading"},D$=ne("h2",{id:"footer-heading",class:"sr-only"},"Footer",-1),L$={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8"},R$={class:"xl:grid xl:grid-cols-3 xl:gap-8"},M$={class:"grid grid-cols-2 gap-8 xl:col-span-2"},N$={class:"md:grid md:grid-cols-2 md:gap-8"},j$=ne("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"},"Opportunities",-1),F$={role:"list",class:"mt-4 space-y-4"},B$=["href"],U$={class:"mt-12 md:mt-0"},z$=ne("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"},"Events",-1),$$={role:"list",class:"mt-4 space-y-4"},V$=["href"],H$={class:"md:grid md:grid-cols-2 md:gap-8"},q$={class:"mt-12 md:mt-0"},G$=ne("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"},"About",-1),W$={role:"list",class:"mt-4 space-y-4"},K$=["href"],Y$=fu('<div class="mt-8 xl:mt-0"><h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Subscribe to our newsletter</h3><p class="mt-4 text-base text-gray-500">The latest news, articles, and resources, sent to your inbox weekly.</p><form class="mt-4 sm:flex sm:max-w-md"><label for="email-address" class="sr-only">Email address</label><input type="email" name="email-address" id="email-address" autocomplete="email" required="" class="appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-primary-light focus:border-primary-light focus:placeholder-gray-400" placeholder="Enter your email"><div class="mt-3 rounded-md sm:mt-0 sm:ml-3 sm:flex-shrink-0"><button type="submit" class="w-full bg-primary-light flex items-center justify-center border border-transparent rounded-md py-2 px-4 text-base font-medium text-white hover:bg-primary focus:ring-2 focus:ring-offset-2 focus:ring-primary-light">Subscribe</button></div></form></div>',1),X$={class:"mt-8 border-t border-gray-200 pt-8 md:flex md:items-center md:justify-between"},Q$={class:"flex space-x-6 md:order-2"},J$=["href"],Z$={class:"sr-only"},eV=ne("p",{class:"mt-8 text-base text-gray-400 md:mt-0 md:order-1"},"\xA9 2022 The Cinemat at Yale University. All rights reserved.",-1),tV={__name:"Footer",setup(t){const e={opportunities:[{name:"For Filmmakers",href:"#"},{name:"For Actors",href:"#"}],events:[{name:"Screenings",href:"#"},{name:"Workshops",href:"#"},{name:"Calendar",href:"#"}],about:[{name:"The Team",href:"#"},{name:"Membership",href:"#"}],social:[{name:"Facebook",href:"https://www.facebook.com/YaleCinemat/",icon:ii({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{"fill-rule":"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z","clip-rule":"evenodd"})])})},{name:"Instagram",href:"https://www.instagram.com/yalecinemat/",icon:ii({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{"fill-rule":"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z","clip-rule":"evenodd"})])})},{name:"Twitter",href:"#",icon:ii({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})])})},{name:"GitHub",href:"https://github.com/califernication/theCinemat",icon:ii({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})])})},{name:"Dribbble",href:"#",icon:ii({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{"fill-rule":"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c5.51 0 10-4.48 10-10S17.51 2 12 2zm6.605 4.61a8.502 8.502 0 011.93 5.314c-.281-.054-3.101-.629-5.943-.271-.065-.141-.12-.293-.184-.445a25.416 25.416 0 00-.564-1.236c3.145-1.28 4.577-3.124 4.761-3.362zM12 3.475c2.17 0 4.154.813 5.662 2.148-.152.216-1.443 1.941-4.48 3.08-1.399-2.57-2.95-4.675-3.189-5A8.687 8.687 0 0112 3.475zm-3.633.803a53.896 53.896 0 013.167 4.935c-3.992 1.063-7.517 1.04-7.896 1.04a8.581 8.581 0 014.729-5.975zM3.453 12.01v-.26c.37.01 4.512.065 8.775-1.215.25.477.477.965.694 1.453-.109.033-.228.065-.336.098-4.404 1.42-6.747 5.303-6.942 5.629a8.522 8.522 0 01-2.19-5.705zM12 20.547a8.482 8.482 0 01-5.239-1.8c.152-.315 1.888-3.656 6.703-5.337.022-.01.033-.01.054-.022a35.318 35.318 0 011.823 6.475 8.4 8.4 0 01-3.341.684zm4.761-1.465c-.086-.52-.542-3.015-1.659-6.084 2.679-.423 5.022.271 5.314.369a8.468 8.468 0 01-3.655 5.715z","clip-rule":"evenodd"})])})}]};return(r,n)=>(Ye(),Kt("footer",O$,[D$,ne("div",L$,[ne("div",R$,[ne("div",M$,[ne("div",N$,[ne("div",null,[j$,ne("ul",F$,[(Ye(!0),Kt(St,null,bn(e.opportunities,i=>(Ye(),Kt("li",{key:i.name},[ne("a",{href:i.href,class:"text-base text-gray-500 hover:text-gray-900"},Si(i.name),9,B$)]))),128))])]),ne("div",U$,[z$,ne("ul",$$,[(Ye(!0),Kt(St,null,bn(e.events,i=>(Ye(),Kt("li",{key:i.name},[ne("a",{href:i.href,class:"text-base text-gray-500 hover:text-gray-900"},Si(i.name),9,V$)]))),128))])])]),ne("div",H$,[ne("div",q$,[G$,ne("ul",W$,[(Ye(!0),Kt(St,null,bn(e.about,i=>(Ye(),Kt("li",{key:i.name},[ne("a",{href:i.href,class:"text-base text-gray-500 hover:text-gray-900"},Si(i.name),9,K$)]))),128))])])])]),Y$]),ne("div",X$,[ne("div",Q$,[(Ye(!0),Kt(St,null,bn(e.social,i=>(Ye(),Kt("a",{key:i.name,href:i.href,class:"text-gray-400 hover:text-gray-500"},[ne("span",Z$,Si(i.name),1),(Ye(),zt(Kl(i.icon),{class:"h-6 w-6","aria-hidden":"true"}))],8,J$))),128))]),eV])])]))}},rV={__name:"App",setup(t){return(e,r)=>(Ye(),Kt(St,null,[xe(P$),xe(ft(kk)),xe(tV)],64))}},iV="modulepreload",yT={},nV="/theCinemat/",ui=function(e,r){return!r||r.length===0?e():Promise.all(r.map(n=>{if(n=`${nV}${n}`,n in yT)return;yT[n]=!0;const i=n.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const s=document.createElement("link");if(s.rel=i?"stylesheet":iV,i||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),i)return new Promise((o,l)=>{s.addEventListener("load",o),s.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())};var aV="/theCinemat/assets/inverted-logo.e8790b8b.svg";function bT(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function zy(t={},e={}){Object.keys(e).forEach(r=>{typeof t[r]=="undefined"?t[r]=e[r]:bT(e[r])&&bT(t[r])&&Object.keys(e[r]).length>0&&zy(t[r],e[r])})}const gI={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function tr(){const t=typeof document!="undefined"?document:{};return zy(t,gI),t}const sV={document:gI,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout=="undefined"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout!="undefined"&&clearTimeout(t)}};function sr(){const t=typeof window!="undefined"?window:{};return zy(t,sV),t}function oV(t){const e=t.__proto__;Object.defineProperty(t,"__proto__",{get(){return e},set(r){e.__proto__=r}})}class ua extends Array{constructor(e){typeof e=="number"?super(e):(super(...e||[]),oV(this))}}function ju(t=[]){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...ju(r)):e.push(r)}),e}function mI(t,e){return Array.prototype.filter.call(t,e)}function lV(t){const e=[];for(let r=0;r<t.length;r+=1)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function cV(t,e){if(typeof t!="string")return[t];const r=[],n=e.querySelectorAll(t);for(let i=0;i<n.length;i+=1)r.push(n[i]);return r}function me(t,e){const r=sr(),n=tr();let i=[];if(!e&&t instanceof ua)return t;if(!t)return new ua(i);if(typeof t=="string"){const a=t.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){let s="div";a.indexOf("<li")===0&&(s="ul"),a.indexOf("<tr")===0&&(s="tbody"),(a.indexOf("<td")===0||a.indexOf("<th")===0)&&(s="tr"),a.indexOf("<tbody")===0&&(s="table"),a.indexOf("<option")===0&&(s="select");const o=n.createElement(s);o.innerHTML=a;for(let l=0;l<o.childNodes.length;l+=1)i.push(o.childNodes[l])}else i=cV(t.trim(),e||n)}else if(t.nodeType||t===r||t===n)i.push(t);else if(Array.isArray(t)){if(t instanceof ua)return t;i=t}return new ua(lV(i))}me.fn=ua.prototype;function uV(...t){const e=ju(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.add(...e)}),this}function dV(...t){const e=ju(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.remove(...e)}),this}function hV(...t){const e=ju(t.map(r=>r.split(" ")));this.forEach(r=>{e.forEach(n=>{r.classList.toggle(n)})})}function fV(...t){const e=ju(t.map(r=>r.split(" ")));return mI(this,r=>e.filter(n=>r.classList.contains(n)).length>0).length>0}function pV(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(let r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(t,e);else for(const n in t)this[r][n]=t[n],this[r].setAttribute(n,t[n]);return this}function gV(t){for(let e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function mV(t){for(let e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function vV(t){for(let e=0;e<this.length;e+=1)this[e].style.transitionDuration=typeof t!="string"?`${t}ms`:t;return this}function yV(...t){let[e,r,n,i]=t;typeof t[1]=="function"&&([e,n,i]=t,r=void 0),i||(i=!1);function a(c){const u=c.target;if(!u)return;const d=c.target.dom7EventData||[];if(d.indexOf(c)<0&&d.unshift(c),me(u).is(r))n.apply(u,d);else{const h=me(u).parents();for(let p=0;p<h.length;p+=1)me(h[p]).is(r)&&n.apply(h[p],d)}}function s(c){const u=c&&c.target?c.target.dom7EventData||[]:[];u.indexOf(c)<0&&u.unshift(c),n.apply(this,u)}const o=e.split(" ");let l;for(let c=0;c<this.length;c+=1){const u=this[c];if(r)for(l=0;l<o.length;l+=1){const d=o[l];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[d]||(u.dom7LiveListeners[d]=[]),u.dom7LiveListeners[d].push({listener:n,proxyListener:a}),u.addEventListener(d,a,i)}else for(l=0;l<o.length;l+=1){const d=o[l];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[d]||(u.dom7Listeners[d]=[]),u.dom7Listeners[d].push({listener:n,proxyListener:s}),u.addEventListener(d,s,i)}}return this}function bV(...t){let[e,r,n,i]=t;typeof t[1]=="function"&&([e,n,i]=t,r=void 0),i||(i=!1);const a=e.split(" ");for(let s=0;s<a.length;s+=1){const o=a[s];for(let l=0;l<this.length;l+=1){const c=this[l];let u;if(!r&&c.dom7Listeners?u=c.dom7Listeners[o]:r&&c.dom7LiveListeners&&(u=c.dom7LiveListeners[o]),u&&u.length)for(let d=u.length-1;d>=0;d-=1){const h=u[d];n&&h.listener===n||n&&h.listener&&h.listener.dom7proxy&&h.listener.dom7proxy===n?(c.removeEventListener(o,h.proxyListener,i),u.splice(d,1)):n||(c.removeEventListener(o,h.proxyListener,i),u.splice(d,1))}}}return this}function wV(...t){const e=sr(),r=t[0].split(" "),n=t[1];for(let i=0;i<r.length;i+=1){const a=r[i];for(let s=0;s<this.length;s+=1){const o=this[s];if(e.CustomEvent){const l=new e.CustomEvent(a,{detail:n,bubbles:!0,cancelable:!0});o.dom7EventData=t.filter((c,u)=>u>0),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}}}return this}function _V(t){const e=this;function r(n){n.target===this&&(t.call(this,n),e.off("transitionend",r))}return t&&e.on("transitionend",r),this}function xV(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function TV(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function SV(){if(this.length>0){const t=sr(),e=tr(),r=this[0],n=r.getBoundingClientRect(),i=e.body,a=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,o=r===t?t.scrollY:r.scrollTop,l=r===t?t.scrollX:r.scrollLeft;return{top:n.top+o-a,left:n.left+l-s}}return null}function kV(){const t=sr();return this[0]?t.getComputedStyle(this[0],null):{}}function EV(t,e){const r=sr();let n;if(arguments.length===1)if(typeof t=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(t)}else{for(n=0;n<this.length;n+=1)for(const i in t)this[n].style[i]=t[i];return this}if(arguments.length===2&&typeof t=="string"){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this}function CV(t){return t?(this.forEach((e,r)=>{t.apply(e,[e,r])}),this):this}function AV(t){const e=mI(this,t);return me(e)}function IV(t){if(typeof t=="undefined")return this[0]?this[0].innerHTML:null;for(let e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function PV(t){if(typeof t=="undefined")return this[0]?this[0].textContent.trim():null;for(let e=0;e<this.length;e+=1)this[e].textContent=t;return this}function OV(t){const e=sr(),r=tr(),n=this[0];let i,a;if(!n||typeof t=="undefined")return!1;if(typeof t=="string"){if(n.matches)return n.matches(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);for(i=me(t),a=0;a<i.length;a+=1)if(i[a]===n)return!0;return!1}if(t===r)return n===r;if(t===e)return n===e;if(t.nodeType||t instanceof ua){for(i=t.nodeType?[t]:t,a=0;a<i.length;a+=1)if(i[a]===n)return!0;return!1}return!1}function DV(){let t=this[0],e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function LV(t){if(typeof t=="undefined")return this;const e=this.length;if(t>e-1)return me([]);if(t<0){const r=e+t;return r<0?me([]):me([this[r]])}return me([this[t]])}function RV(...t){let e;const r=tr();for(let n=0;n<t.length;n+=1){e=t[n];for(let i=0;i<this.length;i+=1)if(typeof e=="string"){const a=r.createElement("div");for(a.innerHTML=e;a.firstChild;)this[i].appendChild(a.firstChild)}else if(e instanceof ua)for(let a=0;a<e.length;a+=1)this[i].appendChild(e[a]);else this[i].appendChild(e)}return this}function MV(t){const e=tr();let r,n;for(r=0;r<this.length;r+=1)if(typeof t=="string"){const i=e.createElement("div");for(i.innerHTML=t,n=i.childNodes.length-1;n>=0;n-=1)this[r].insertBefore(i.childNodes[n],this[r].childNodes[0])}else if(t instanceof ua)for(n=0;n<t.length;n+=1)this[r].insertBefore(t[n],this[r].childNodes[0]);else this[r].insertBefore(t,this[r].childNodes[0]);return this}function NV(t){return this.length>0?t?this[0].nextElementSibling&&me(this[0].nextElementSibling).is(t)?me([this[0].nextElementSibling]):me([]):this[0].nextElementSibling?me([this[0].nextElementSibling]):me([]):me([])}function jV(t){const e=[];let r=this[0];if(!r)return me([]);for(;r.nextElementSibling;){const n=r.nextElementSibling;t?me(n).is(t)&&e.push(n):e.push(n),r=n}return me(e)}function FV(t){if(this.length>0){const e=this[0];return t?e.previousElementSibling&&me(e.previousElementSibling).is(t)?me([e.previousElementSibling]):me([]):e.previousElementSibling?me([e.previousElementSibling]):me([])}return me([])}function BV(t){const e=[];let r=this[0];if(!r)return me([]);for(;r.previousElementSibling;){const n=r.previousElementSibling;t?me(n).is(t)&&e.push(n):e.push(n),r=n}return me(e)}function UV(t){const e=[];for(let r=0;r<this.length;r+=1)this[r].parentNode!==null&&(t?me(this[r].parentNode).is(t)&&e.push(this[r].parentNode):e.push(this[r].parentNode));return me(e)}function zV(t){const e=[];for(let r=0;r<this.length;r+=1){let n=this[r].parentNode;for(;n;)t?me(n).is(t)&&e.push(n):e.push(n),n=n.parentNode}return me(e)}function $V(t){let e=this;return typeof t=="undefined"?me([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function VV(t){const e=[];for(let r=0;r<this.length;r+=1){const n=this[r].querySelectorAll(t);for(let i=0;i<n.length;i+=1)e.push(n[i])}return me(e)}function HV(t){const e=[];for(let r=0;r<this.length;r+=1){const n=this[r].children;for(let i=0;i<n.length;i+=1)(!t||me(n[i]).is(t))&&e.push(n[i])}return me(e)}function qV(){for(let t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}const wT={addClass:uV,removeClass:dV,hasClass:fV,toggleClass:hV,attr:pV,removeAttr:gV,transform:mV,transition:vV,on:yV,off:bV,trigger:wV,transitionEnd:_V,outerWidth:xV,outerHeight:TV,styles:kV,offset:SV,css:EV,each:CV,html:IV,text:PV,is:OV,index:DV,eq:LV,append:RV,prepend:MV,next:NV,nextAll:jV,prev:FV,prevAll:BV,parent:UV,parents:zV,closest:$V,find:VV,children:HV,filter:AV,remove:qV};Object.keys(wT).forEach(t=>{Object.defineProperty(me.fn,t,{value:wT[t],writable:!0})});function GV(t){const e=t;Object.keys(e).forEach(r=>{try{e[r]=null}catch{}try{delete e[r]}catch{}})}function Jc(t,e=0){return setTimeout(t,e)}function Zc(){return Date.now()}function WV(t){const e=sr();let r;return e.getComputedStyle&&(r=e.getComputedStyle(t,null)),!r&&t.currentStyle&&(r=t.currentStyle),r||(r=t.style),r}function KV(t,e="x"){const r=sr();let n,i,a;const s=WV(t);return r.WebKitCSSMatrix?(i=s.transform||s.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(o=>o.replace(",",".")).join(", ")),a=new r.WebKitCSSMatrix(i==="none"?"":i)):(a=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),e==="x"&&(r.WebKitCSSMatrix?i=a.m41:n.length===16?i=parseFloat(n[12]):i=parseFloat(n[4])),e==="y"&&(r.WebKitCSSMatrix?i=a.m42:n.length===16?i=parseFloat(n[13]):i=parseFloat(n[5])),i||0}function jd(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function YV(t){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function ti(...t){const e=Object(t[0]),r=["__proto__","constructor","prototype"];for(let n=1;n<t.length;n+=1){const i=t[n];if(i!=null&&!YV(i)){const a=Object.keys(Object(i)).filter(s=>r.indexOf(s)<0);for(let s=0,o=a.length;s<o;s+=1){const l=a[s],c=Object.getOwnPropertyDescriptor(i,l);c!==void 0&&c.enumerable&&(jd(e[l])&&jd(i[l])?i[l].__swiper__?e[l]=i[l]:ti(e[l],i[l]):!jd(e[l])&&jd(i[l])?(e[l]={},i[l].__swiper__?e[l]=i[l]:ti(e[l],i[l])):e[l]=i[l])}}}return e}function Fd(t,e,r){t.style.setProperty(e,r)}function vI({swiper:t,targetPosition:e,side:r}){const n=sr(),i=-t.translate;let a=null,s;const o=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const l=e>i?"next":"prev",c=(d,h)=>l==="next"&&d>=h||l==="prev"&&d<=h,u=()=>{s=new Date().getTime(),a===null&&(a=s);const d=Math.max(Math.min((s-a)/o,1),0),h=.5-Math.cos(d*Math.PI)/2;let p=i+h*(e-i);if(c(p,e)&&(p=e),t.wrapperEl.scrollTo({[r]:p}),c(p,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:p})}),n.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=n.requestAnimationFrame(u)};u()}let Dg;function XV(){const t=sr(),e=tr();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),passiveListener:function(){let n=!1;try{const i=Object.defineProperty({},"passive",{get(){n=!0}});t.addEventListener("testPassiveListener",null,i)}catch{}return n}(),gestures:function(){return"ongesturestart"in t}()}}function yI(){return Dg||(Dg=XV()),Dg}let Lg;function QV({userAgent:t}={}){const e=yI(),r=sr(),n=r.navigator.platform,i=t||r.navigator.userAgent,a={ios:!1,android:!1},s=r.screen.width,o=r.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const u=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=n==="Win32";let p=n==="MacIntel";const y=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&p&&e.touch&&y.indexOf(`${s}x${o}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),l&&!h&&(a.os="android",a.android=!0),(c||d||u)&&(a.os="ios",a.ios=!0),a}function JV(t={}){return Lg||(Lg=QV(t)),Lg}let Rg;function ZV(){const t=sr();function e(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isSafari:e(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function eH(){return Rg||(Rg=ZV()),Rg}function tH({swiper:t,on:e,emit:r}){const n=sr();let i=null,a=null;const s=()=>{!t||t.destroyed||!t.initialized||(r("beforeResize"),r("resize"))},o=()=>{!t||t.destroyed||!t.initialized||(i=new ResizeObserver(u=>{a=n.requestAnimationFrame(()=>{const{width:d,height:h}=t;let p=d,y=h;u.forEach(({contentBoxSize:w,contentRect:v,target:T})=>{T&&T!==t.el||(p=v?v.width:(w[0]||w).inlineSize,y=v?v.height:(w[0]||w).blockSize)}),(p!==d||y!==h)&&s()})}),i.observe(t.el))},l=()=>{a&&n.cancelAnimationFrame(a),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null)},c=()=>{!t||t.destroyed||!t.initialized||r("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof n.ResizeObserver!="undefined"){o();return}n.addEventListener("resize",s),n.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),n.removeEventListener("resize",s),n.removeEventListener("orientationchange",c)})}function rH({swiper:t,extendParams:e,on:r,emit:n}){const i=[],a=sr(),s=(c,u={})=>{const d=a.MutationObserver||a.WebkitMutationObserver,h=new d(p=>{if(p.length===1){n("observerUpdate",p[0]);return}const y=function(){n("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(y):a.setTimeout(y,0)});h.observe(c,{attributes:typeof u.attributes=="undefined"?!0:u.attributes,childList:typeof u.childList=="undefined"?!0:u.childList,characterData:typeof u.characterData=="undefined"?!0:u.characterData}),i.push(h)},o=()=>{if(!!t.params.observer){if(t.params.observeParents){const c=t.$el.parents();for(let u=0;u<c.length;u+=1)s(c[u])}s(t.$el[0],{childList:t.params.observeSlideChildren}),s(t.$wrapperEl[0],{attributes:!1})}},l=()=>{i.forEach(c=>{c.disconnect()}),i.splice(0,i.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",o),r("destroy",l)}var iH={on(t,e,r){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const i=r?"unshift":"push";return t.split(" ").forEach(a=>{n.eventsListeners[a]||(n.eventsListeners[a]=[]),n.eventsListeners[a][i](e)}),n},once(t,e,r){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function i(...a){n.off(t,i),i.__emitterProxy&&delete i.__emitterProxy,e.apply(n,a)}return i.__emitterProxy=e,n.on(t,i,r)},onAny(t,e){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const n=e?"unshift":"push";return r.eventsAnyListeners.indexOf(t)<0&&r.eventsAnyListeners[n](t),r},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const r=e.eventsAnyListeners.indexOf(t);return r>=0&&e.eventsAnyListeners.splice(r,1),e},off(t,e){const r=this;return!r.eventsListeners||r.destroyed||!r.eventsListeners||t.split(" ").forEach(n=>{typeof e=="undefined"?r.eventsListeners[n]=[]:r.eventsListeners[n]&&r.eventsListeners[n].forEach((i,a)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&r.eventsListeners[n].splice(a,1)})}),r},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let r,n,i;return typeof t[0]=="string"||Array.isArray(t[0])?(r=t[0],n=t.slice(1,t.length),i=e):(r=t[0].events,n=t[0].data,i=t[0].context||e),n.unshift(i),(Array.isArray(r)?r:r.split(" ")).forEach(s=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(o=>{o.apply(i,[s,...n])}),e.eventsListeners&&e.eventsListeners[s]&&e.eventsListeners[s].forEach(o=>{o.apply(i,n)})}),e}};function nH(){const t=this;let e,r;const n=t.$el;typeof t.params.width!="undefined"&&t.params.width!==null?e=t.params.width:e=n[0].clientWidth,typeof t.params.height!="undefined"&&t.params.height!==null?r=t.params.height:r=n[0].clientHeight,!(e===0&&t.isHorizontal()||r===0&&t.isVertical())&&(e=e-parseInt(n.css("padding-left")||0,10)-parseInt(n.css("padding-right")||0,10),r=r-parseInt(n.css("padding-top")||0,10)-parseInt(n.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(r)&&(r=0),Object.assign(t,{width:e,height:r,size:t.isHorizontal()?e:r}))}function aH(){const t=this;function e(M){return t.isHorizontal()?M:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[M]}function r(M,U){return parseFloat(M.getPropertyValue(e(U))||0)}const n=t.params,{$wrapperEl:i,size:a,rtlTranslate:s,wrongRTL:o}=t,l=t.virtual&&n.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,u=i.children(`.${t.params.slideClass}`),d=l?t.virtual.slides.length:u.length;let h=[];const p=[],y=[];let w=n.slidesOffsetBefore;typeof w=="function"&&(w=n.slidesOffsetBefore.call(t));let v=n.slidesOffsetAfter;typeof v=="function"&&(v=n.slidesOffsetAfter.call(t));const T=t.snapGrid.length,k=t.slidesGrid.length;let A=n.spaceBetween,E=-w,I=0,F=0;if(typeof a=="undefined")return;typeof A=="string"&&A.indexOf("%")>=0&&(A=parseFloat(A.replace("%",""))/100*a),t.virtualSize=-A,s?u.css({marginLeft:"",marginBottom:"",marginTop:""}):u.css({marginRight:"",marginBottom:"",marginTop:""}),n.centeredSlides&&n.cssMode&&(Fd(t.wrapperEl,"--swiper-centered-offset-before",""),Fd(t.wrapperEl,"--swiper-centered-offset-after",""));const j=n.grid&&n.grid.rows>1&&t.grid;j&&t.grid.initSlides(d);let D;const z=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(M=>typeof n.breakpoints[M].slidesPerView!="undefined").length>0;for(let M=0;M<d;M+=1){D=0;const U=u.eq(M);if(j&&t.grid.updateSlide(M,U,d,e),U.css("display")!=="none"){if(n.slidesPerView==="auto"){z&&(u[M].style[e("width")]="");const P=getComputedStyle(U[0]),q=U[0].style.transform,X=U[0].style.webkitTransform;if(q&&(U[0].style.transform="none"),X&&(U[0].style.webkitTransform="none"),n.roundLengths)D=t.isHorizontal()?U.outerWidth(!0):U.outerHeight(!0);else{const fe=r(P,"width"),te=r(P,"padding-left"),se=r(P,"padding-right"),le=r(P,"margin-left"),Re=r(P,"margin-right"),Le=P.getPropertyValue("box-sizing");if(Le&&Le==="border-box")D=fe+le+Re;else{const{clientWidth:pt,offsetWidth:it}=U[0];D=fe+te+se+le+Re+(it-pt)}}q&&(U[0].style.transform=q),X&&(U[0].style.webkitTransform=X),n.roundLengths&&(D=Math.floor(D))}else D=(a-(n.slidesPerView-1)*A)/n.slidesPerView,n.roundLengths&&(D=Math.floor(D)),u[M]&&(u[M].style[e("width")]=`${D}px`);u[M]&&(u[M].swiperSlideSize=D),y.push(D),n.centeredSlides?(E=E+D/2+I/2+A,I===0&&M!==0&&(E=E-a/2-A),M===0&&(E=E-a/2-A),Math.abs(E)<1/1e3&&(E=0),n.roundLengths&&(E=Math.floor(E)),F%n.slidesPerGroup===0&&h.push(E),p.push(E)):(n.roundLengths&&(E=Math.floor(E)),(F-Math.min(t.params.slidesPerGroupSkip,F))%t.params.slidesPerGroup===0&&h.push(E),p.push(E),E=E+D+A),t.virtualSize+=D+A,I=D,F+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+v,s&&o&&(n.effect==="slide"||n.effect==="coverflow")&&i.css({width:`${t.virtualSize+n.spaceBetween}px`}),n.setWrapperSize&&i.css({[e("width")]:`${t.virtualSize+n.spaceBetween}px`}),j&&t.grid.updateWrapperSize(D,h,e),!n.centeredSlides){const M=[];for(let U=0;U<h.length;U+=1){let P=h[U];n.roundLengths&&(P=Math.floor(P)),h[U]<=t.virtualSize-a&&M.push(P)}h=M,Math.floor(t.virtualSize-a)-Math.floor(h[h.length-1])>1&&h.push(t.virtualSize-a)}if(h.length===0&&(h=[0]),n.spaceBetween!==0){const M=t.isHorizontal()&&s?"marginLeft":e("marginRight");u.filter((U,P)=>n.cssMode?P!==u.length-1:!0).css({[M]:`${A}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let M=0;y.forEach(P=>{M+=P+(n.spaceBetween?n.spaceBetween:0)}),M-=n.spaceBetween;const U=M-a;h=h.map(P=>P<0?-w:P>U?U+v:P)}if(n.centerInsufficientSlides){let M=0;if(y.forEach(U=>{M+=U+(n.spaceBetween?n.spaceBetween:0)}),M-=n.spaceBetween,M<a){const U=(a-M)/2;h.forEach((P,q)=>{h[q]=P-U}),p.forEach((P,q)=>{p[q]=P+U})}}if(Object.assign(t,{slides:u,snapGrid:h,slidesGrid:p,slidesSizesGrid:y}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Fd(t.wrapperEl,"--swiper-centered-offset-before",`${-h[0]}px`),Fd(t.wrapperEl,"--swiper-centered-offset-after",`${t.size/2-y[y.length-1]/2}px`);const M=-t.snapGrid[0],U=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(P=>P+M),t.slidesGrid=t.slidesGrid.map(P=>P+U)}if(d!==c&&t.emit("slidesLengthChange"),h.length!==T&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==k&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const M=`${n.containerModifierClass}backface-hidden`,U=t.$el.hasClass(M);d<=n.maxBackfaceHiddenSlides?U||t.$el.addClass(M):U&&t.$el.removeClass(M)}}function sH(t){const e=this,r=[],n=e.virtual&&e.params.virtual.enabled;let i=0,a;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const s=o=>n?e.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===o)[0]:e.slides.eq(o)[0];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||me([])).each(o=>{r.push(o)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const o=e.activeIndex+a;if(o>e.slides.length&&!n)break;r.push(s(o))}else r.push(s(e.activeIndex));for(a=0;a<r.length;a+=1)if(typeof r[a]!="undefined"){const o=r[a].offsetHeight;i=o>i?o:i}(i||i===0)&&e.$wrapperEl.css("height",`${i}px`)}function oH(){const t=this,e=t.slides;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop}function lH(t=this&&this.translate||0){const e=this,r=e.params,{slides:n,rtlTranslate:i,snapGrid:a}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset=="undefined"&&e.updateSlidesOffset();let s=-t;i&&(s=t),n.removeClass(r.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let o=0;o<n.length;o+=1){const l=n[o];let c=l.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(c-=n[0].swiperSlideOffset);const u=(s+(r.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+r.spaceBetween),d=(s-a[0]+(r.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+r.spaceBetween),h=-(s-c),p=h+e.slidesSizesGrid[o];(h>=0&&h<e.size-1||p>1&&p<=e.size||h<=0&&p>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(o),n.eq(o).addClass(r.slideVisibleClass)),l.progress=i?-u:u,l.originalProgress=i?-d:d}e.visibleSlides=me(e.visibleSlides)}function cH(t){const e=this;if(typeof t=="undefined"){const c=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*c||0}const r=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:a,isEnd:s}=e;const o=a,l=s;n===0?(i=0,a=!0,s=!0):(i=(t-e.minTranslate())/n,a=i<=0,s=i>=1),Object.assign(e,{progress:i,isBeginning:a,isEnd:s}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&e.updateSlidesProgress(t),a&&!o&&e.emit("reachBeginning toEdge"),s&&!l&&e.emit("reachEnd toEdge"),(o&&!a||l&&!s)&&e.emit("fromEdge"),e.emit("progress",i)}function uH(){const t=this,{slides:e,params:r,$wrapperEl:n,activeIndex:i,realIndex:a}=t,s=t.virtual&&r.virtual.enabled;e.removeClass(`${r.slideActiveClass} ${r.slideNextClass} ${r.slidePrevClass} ${r.slideDuplicateActiveClass} ${r.slideDuplicateNextClass} ${r.slideDuplicatePrevClass}`);let o;s?o=t.$wrapperEl.find(`.${r.slideClass}[data-swiper-slide-index="${i}"]`):o=e.eq(i),o.addClass(r.slideActiveClass),r.loop&&(o.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${a}"]`).addClass(r.slideDuplicateActiveClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${a}"]`).addClass(r.slideDuplicateActiveClass));let l=o.nextAll(`.${r.slideClass}`).eq(0).addClass(r.slideNextClass);r.loop&&l.length===0&&(l=e.eq(0),l.addClass(r.slideNextClass));let c=o.prevAll(`.${r.slideClass}`).eq(0).addClass(r.slidePrevClass);r.loop&&c.length===0&&(c=e.eq(-1),c.addClass(r.slidePrevClass)),r.loop&&(l.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass),c.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()}function dH(t){const e=this,r=e.rtlTranslate?e.translate:-e.translate,{slidesGrid:n,snapGrid:i,params:a,activeIndex:s,realIndex:o,snapIndex:l}=e;let c=t,u;if(typeof c=="undefined"){for(let h=0;h<n.length;h+=1)typeof n[h+1]!="undefined"?r>=n[h]&&r<n[h+1]-(n[h+1]-n[h])/2?c=h:r>=n[h]&&r<n[h+1]&&(c=h+1):r>=n[h]&&(c=h);a.normalizeSlideIndex&&(c<0||typeof c=="undefined")&&(c=0)}if(i.indexOf(r)>=0)u=i.indexOf(r);else{const h=Math.min(a.slidesPerGroupSkip,c);u=h+Math.floor((c-h)/a.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),c===s){u!==l&&(e.snapIndex=u,e.emit("snapIndexChange"));return}const d=parseInt(e.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(e,{snapIndex:u,realIndex:d,previousIndex:s,activeIndex:c}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function hH(t){const e=this,r=e.params,n=me(t).closest(`.${r.slideClass}`)[0];let i=!1,a;if(n){for(let s=0;s<e.slides.length;s+=1)if(e.slides[s]===n){i=!0,a=s;break}}if(n&&i)e.clickedSlide=n,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(me(n).attr("data-swiper-slide-index"),10):e.clickedIndex=a;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}r.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var fH={updateSize:nH,updateSlides:aH,updateAutoHeight:sH,updateSlidesOffset:oH,updateSlidesProgress:lH,updateProgress:cH,updateSlidesClasses:uH,updateActiveIndex:dH,updateClickedSlide:hH};function pH(t=this.isHorizontal()?"x":"y"){const e=this,{params:r,rtlTranslate:n,translate:i,$wrapperEl:a}=e;if(r.virtualTranslate)return n?-i:i;if(r.cssMode)return i;let s=KV(a[0],t);return n&&(s=-s),s||0}function gH(t,e){const r=this,{rtlTranslate:n,params:i,$wrapperEl:a,wrapperEl:s,progress:o}=r;let l=0,c=0;const u=0;r.isHorizontal()?l=n?-t:t:c=t,i.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),i.cssMode?s[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-l:-c:i.virtualTranslate||a.transform(`translate3d(${l}px, ${c}px, ${u}px)`),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?l:c;let d;const h=r.maxTranslate()-r.minTranslate();h===0?d=0:d=(t-r.minTranslate())/h,d!==o&&r.updateProgress(t),r.emit("setTranslate",r.translate,e)}function mH(){return-this.snapGrid[0]}function vH(){return-this.snapGrid[this.snapGrid.length-1]}function yH(t=0,e=this.params.speed,r=!0,n=!0,i){const a=this,{params:s,wrapperEl:o}=a;if(a.animating&&s.preventInteractionOnTransition)return!1;const l=a.minTranslate(),c=a.maxTranslate();let u;if(n&&t>l?u=l:n&&t<c?u=c:u=t,a.updateProgress(u),s.cssMode){const d=a.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!a.support.smoothScroll)return vI({swiper:a,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(u),r&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(u),r&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(h){!a||a.destroyed||h.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,r&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}var bH={getTranslate:pH,setTranslate:gH,minTranslate:mH,maxTranslate:vH,translateTo:yH};function wH(t,e){const r=this;r.params.cssMode||r.$wrapperEl.transition(t),r.emit("setTransition",t,e)}function bI({swiper:t,runCallbacks:e,direction:r,step:n}){const{activeIndex:i,previousIndex:a}=t;let s=r;if(s||(i>a?s="next":i<a?s="prev":s="reset"),t.emit(`transition${n}`),e&&i!==a){if(s==="reset"){t.emit(`slideResetTransition${n}`);return}t.emit(`slideChangeTransition${n}`),s==="next"?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`)}}function _H(t=!0,e){const r=this,{params:n}=r;n.cssMode||(n.autoHeight&&r.updateAutoHeight(),bI({swiper:r,runCallbacks:t,direction:e,step:"Start"}))}function xH(t=!0,e){const r=this,{params:n}=r;r.animating=!1,!n.cssMode&&(r.setTransition(0),bI({swiper:r,runCallbacks:t,direction:e,step:"End"}))}var TH={setTransition:wH,transitionStart:_H,transitionEnd:xH};function SH(t=0,e=this.params.speed,r=!0,n,i){if(typeof t!="number"&&typeof t!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof t}] given.`);if(typeof t=="string"){const A=parseInt(t,10);if(!isFinite(A))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=A}const a=this;let s=t;s<0&&(s=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:p,enabled:y}=a;if(a.animating&&o.preventInteractionOnTransition||!y&&!n&&!i)return!1;const w=Math.min(a.params.slidesPerGroupSkip,s);let v=w+Math.floor((s-w)/a.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const T=-l[v];if(o.normalizeSlideIndex)for(let A=0;A<c.length;A+=1){const E=-Math.floor(T*100),I=Math.floor(c[A]*100),F=Math.floor(c[A+1]*100);typeof c[A+1]!="undefined"?E>=I&&E<F-(F-I)/2?s=A:E>=I&&E<F&&(s=A+1):E>=I&&(s=A)}if(a.initialized&&s!==d&&(!a.allowSlideNext&&T<a.translate&&T<a.minTranslate()||!a.allowSlidePrev&&T>a.translate&&T>a.maxTranslate()&&(d||0)!==s))return!1;s!==(u||0)&&r&&a.emit("beforeSlideChangeStart"),a.updateProgress(T);let k;if(s>d?k="next":s<d?k="prev":k="reset",h&&-T===a.translate||!h&&T===a.translate)return a.updateActiveIndex(s),o.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),o.effect!=="slide"&&a.setTranslate(T),k!=="reset"&&(a.transitionStart(r,k),a.transitionEnd(r,k)),!1;if(o.cssMode){const A=a.isHorizontal(),E=h?T:-T;if(e===0){const I=a.virtual&&a.params.virtual.enabled;I&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),p[A?"scrollLeft":"scrollTop"]=E,I&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._swiperImmediateVirtual=!1})}else{if(!a.support.smoothScroll)return vI({swiper:a,targetPosition:E,side:A?"left":"top"}),!0;p.scrollTo({[A?"left":"top"]:E,behavior:"smooth"})}return!0}return a.setTransition(e),a.setTranslate(T),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,n),a.transitionStart(r,k),e===0?a.transitionEnd(r,k):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(E){!a||a.destroyed||E.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(r,k))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd)),!0}function kH(t=0,e=this.params.speed,r=!0,n){if(typeof t=="string"){const s=parseInt(t,10);if(!isFinite(s))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=s}const i=this;let a=t;return i.params.loop&&(a+=i.loopedSlides),i.slideTo(a,e,r,n)}function EH(t=this.params.speed,e=!0,r){const n=this,{animating:i,enabled:a,params:s}=n;if(!a)return n;let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<s.slidesPerGroupSkip?1:o;if(s.loop){if(i&&s.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}return s.rewind&&n.isEnd?n.slideTo(0,t,e,r):n.slideTo(n.activeIndex+l,t,e,r)}function CH(t=this.params.speed,e=!0,r){const n=this,{params:i,animating:a,snapGrid:s,slidesGrid:o,rtlTranslate:l,enabled:c}=n;if(!c)return n;if(i.loop){if(a&&i.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}const u=l?n.translate:-n.translate;function d(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}const h=d(u),p=s.map(v=>d(v));let y=s[p.indexOf(h)-1];if(typeof y=="undefined"&&i.cssMode){let v;s.forEach((T,k)=>{h>=T&&(v=k)}),typeof v!="undefined"&&(y=s[v>0?v-1:v])}let w=0;if(typeof y!="undefined"&&(w=o.indexOf(y),w<0&&(w=n.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(w=w-n.slidesPerViewDynamic("previous",!0)+1,w=Math.max(w,0))),i.rewind&&n.isBeginning){const v=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(v,t,e,r)}return n.slideTo(w,t,e,r)}function AH(t=this.params.speed,e=!0,r){const n=this;return n.slideTo(n.activeIndex,t,e,r)}function IH(t=this.params.speed,e=!0,r,n=.5){const i=this;let a=i.activeIndex;const s=Math.min(i.params.slidesPerGroupSkip,a),o=s+Math.floor((a-s)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[o]){const c=i.snapGrid[o],u=i.snapGrid[o+1];l-c>(u-c)*n&&(a+=i.params.slidesPerGroup)}else{const c=i.snapGrid[o-1],u=i.snapGrid[o];l-c<=(u-c)*n&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,t,e,r)}function PH(){const t=this,{params:e,$wrapperEl:r}=t,n=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,a;if(e.loop){if(t.animating)return;a=parseInt(me(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-n/2||i>t.slides.length-t.loopedSlides+n/2?(t.loopFix(),i=r.children(`.${e.slideClass}[data-swiper-slide-index="${a}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),Jc(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-n?(t.loopFix(),i=r.children(`.${e.slideClass}[data-swiper-slide-index="${a}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),Jc(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}var OH={slideTo:SH,slideToLoop:kH,slideNext:EH,slidePrev:CH,slideReset:AH,slideToClosest:IH,slideToClickedSlide:PH};function DH(){const t=this,e=tr(),{params:r,$wrapperEl:n}=t,i=n.children().length>0?me(n.children()[0].parentNode):n;i.children(`.${r.slideClass}.${r.slideDuplicateClass}`).remove();let a=i.children(`.${r.slideClass}`);if(r.loopFillGroupWithBlank){const l=r.slidesPerGroup-a.length%r.slidesPerGroup;if(l!==r.slidesPerGroup){for(let c=0;c<l;c+=1){const u=me(e.createElement("div")).addClass(`${r.slideClass} ${r.slideBlankClass}`);i.append(u)}a=i.children(`.${r.slideClass}`)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=a.length),t.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),t.loopedSlides+=r.loopAdditionalSlides,t.loopedSlides>a.length&&t.params.loopedSlidesLimit&&(t.loopedSlides=a.length);const s=[],o=[];a.each((l,c)=>{me(l).attr("data-swiper-slide-index",c)});for(let l=0;l<t.loopedSlides;l+=1){const c=l-Math.floor(l/a.length)*a.length;o.push(a.eq(c)[0]),s.unshift(a.eq(a.length-c-1)[0])}for(let l=0;l<o.length;l+=1)i.append(me(o[l].cloneNode(!0)).addClass(r.slideDuplicateClass));for(let l=s.length-1;l>=0;l-=1)i.prepend(me(s[l].cloneNode(!0)).addClass(r.slideDuplicateClass))}function LH(){const t=this;t.emit("beforeLoopFix");const{activeIndex:e,slides:r,loopedSlides:n,allowSlidePrev:i,allowSlideNext:a,snapGrid:s,rtlTranslate:o}=t;let l;t.allowSlidePrev=!0,t.allowSlideNext=!0;const u=-s[e]-t.getTranslate();e<n?(l=r.length-n*3+e,l+=n,t.slideTo(l,0,!1,!0)&&u!==0&&t.setTranslate((o?-t.translate:t.translate)-u)):e>=r.length-n&&(l=-r.length+e+n,l+=n,t.slideTo(l,0,!1,!0)&&u!==0&&t.setTranslate((o?-t.translate:t.translate)-u)),t.allowSlidePrev=i,t.allowSlideNext=a,t.emit("loopFix")}function RH(){const t=this,{$wrapperEl:e,params:r,slides:n}=t;e.children(`.${r.slideClass}.${r.slideDuplicateClass},.${r.slideClass}.${r.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}var MH={loopCreate:DH,loopFix:LH,loopDestroy:RH};function NH(t){const e=this;if(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const r=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;r.style.cursor="move",r.style.cursor=t?"grabbing":"grab"}function jH(){const t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}var FH={setGrabCursor:NH,unsetGrabCursor:jH};function BH(t,e=this){function r(n){if(!n||n===tr()||n===sr())return null;n.assignedSlot&&(n=n.assignedSlot);const i=n.closest(t);return!i&&!n.getRootNode?null:i||r(n.getRootNode().host)}return r(e)}function UH(t){const e=this,r=tr(),n=sr(),i=e.touchEventsData,{params:a,touches:s,enabled:o}=e;if(!o||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let l=t;l.originalEvent&&(l=l.originalEvent);let c=me(l.target);if(a.touchEventsTarget==="wrapper"&&!c.closest(e.wrapperEl).length||(i.isTouchEvent=l.type==="touchstart",!i.isTouchEvent&&"which"in l&&l.which===3)||!i.isTouchEvent&&"button"in l&&l.button>0||i.isTouched&&i.isMoved)return;const u=!!a.noSwipingClass&&a.noSwipingClass!=="",d=t.composedPath?t.composedPath():t.path;u&&l.target&&l.target.shadowRoot&&d&&(c=me(d[0]));const h=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,p=!!(l.target&&l.target.shadowRoot);if(a.noSwiping&&(p?BH(h,c[0]):c.closest(h)[0])){e.allowClick=!0;return}if(a.swipeHandler&&!c.closest(a.swipeHandler)[0])return;s.currentX=l.type==="touchstart"?l.targetTouches[0].pageX:l.pageX,s.currentY=l.type==="touchstart"?l.targetTouches[0].pageY:l.pageY;const y=s.currentX,w=s.currentY,v=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,T=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(v&&(y<=T||y>=n.innerWidth-T))if(v==="prevent")t.preventDefault();else return;if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=y,s.startY=w,i.touchStartTime=Zc(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1),l.type!=="touchstart"){let k=!0;c.is(i.focusableElements)&&(k=!1,c[0].nodeName==="SELECT"&&(i.isTouched=!1)),r.activeElement&&me(r.activeElement).is(i.focusableElements)&&r.activeElement!==c[0]&&r.activeElement.blur();const A=k&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||A)&&!c[0].isContentEditable&&l.preventDefault()}e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function zH(t){const e=tr(),r=this,n=r.touchEventsData,{params:i,touches:a,rtlTranslate:s,enabled:o}=r;if(!o)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!n.isTouched){n.startMoving&&n.isScrolling&&r.emit("touchMoveOpposite",l);return}if(n.isTouchEvent&&l.type!=="touchmove")return;const c=l.type==="touchmove"&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),u=l.type==="touchmove"?c.pageX:l.pageX,d=l.type==="touchmove"?c.pageY:l.pageY;if(l.preventedByNestedSwiper){a.startX=u,a.startY=d;return}if(!r.allowTouchMove){me(l.target).is(n.focusableElements)||(r.allowClick=!1),n.isTouched&&(Object.assign(a,{startX:u,startY:d,currentX:u,currentY:d}),n.touchStartTime=Zc());return}if(n.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop){if(r.isVertical()){if(d<a.startY&&r.translate<=r.maxTranslate()||d>a.startY&&r.translate>=r.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(u<a.startX&&r.translate<=r.maxTranslate()||u>a.startX&&r.translate>=r.minTranslate())return}if(n.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&me(l.target).is(n.focusableElements)){n.isMoved=!0,r.allowClick=!1;return}if(n.allowTouchCallbacks&&r.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;a.currentX=u,a.currentY=d;const h=a.currentX-a.startX,p=a.currentY-a.startY;if(r.params.threshold&&Math.sqrt(h**2+p**2)<r.params.threshold)return;if(typeof n.isScrolling=="undefined"){let T;r.isHorizontal()&&a.currentY===a.startY||r.isVertical()&&a.currentX===a.startX?n.isScrolling=!1:h*h+p*p>=25&&(T=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,n.isScrolling=r.isHorizontal()?T>i.touchAngle:90-T>i.touchAngle)}if(n.isScrolling&&r.emit("touchMoveOpposite",l),typeof n.startMoving=="undefined"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(n.startMoving=!0),n.isScrolling){n.isTouched=!1;return}if(!n.startMoving)return;r.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation(),n.isMoved||(i.loop&&!i.cssMode&&r.loopFix(),n.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,i.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",l)),r.emit("sliderMove",l),n.isMoved=!0;let y=r.isHorizontal()?h:p;a.diff=y,y*=i.touchRatio,s&&(y=-y),r.swipeDirection=y>0?"prev":"next",n.currentTranslate=y+n.startTranslate;let w=!0,v=i.resistanceRatio;if(i.touchReleaseOnEdges&&(v=0),y>0&&n.currentTranslate>r.minTranslate()?(w=!1,i.resistance&&(n.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+n.startTranslate+y)**v)):y<0&&n.currentTranslate<r.maxTranslate()&&(w=!1,i.resistance&&(n.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-n.startTranslate-y)**v)),w&&(l.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(n.currentTranslate=n.startTranslate),i.threshold>0)if(Math.abs(y)>i.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,n.currentTranslate=n.startTranslate,a.diff=r.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{n.currentTranslate=n.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&r.freeMode||i.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),r.params.freeMode&&i.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(n.currentTranslate),r.setTranslate(n.currentTranslate))}function $H(t){const e=this,r=e.touchEventsData,{params:n,touches:i,rtlTranslate:a,slidesGrid:s,enabled:o}=e;if(!o)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),r.allowTouchCallbacks&&e.emit("touchEnd",l),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&n.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}n.grabCursor&&r.isMoved&&r.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=Zc(),u=c-r.touchStartTime;if(e.allowClick){const k=l.path||l.composedPath&&l.composedPath();e.updateClickedSlide(k&&k[0]||l.target),e.emit("tap click",l),u<300&&c-r.lastClickTime<300&&e.emit("doubleTap doubleClick",l)}if(r.lastClickTime=Zc(),Jc(()=>{e.destroyed||(e.allowClick=!0)}),!r.isTouched||!r.isMoved||!e.swipeDirection||i.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let d;if(n.followFinger?d=a?e.translate:-e.translate:d=-r.currentTranslate,n.cssMode)return;if(e.params.freeMode&&n.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:d});return}let h=0,p=e.slidesSizesGrid[0];for(let k=0;k<s.length;k+=k<n.slidesPerGroupSkip?1:n.slidesPerGroup){const A=k<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;typeof s[k+A]!="undefined"?d>=s[k]&&d<s[k+A]&&(h=k,p=s[k+A]-s[k]):d>=s[k]&&(h=k,p=s[s.length-1]-s[s.length-2])}let y=null,w=null;n.rewind&&(e.isBeginning?w=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(y=0));const v=(d-s[h])/p,T=h<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(u>n.longSwipesMs){if(!n.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(v>=n.longSwipesRatio?e.slideTo(n.rewind&&e.isEnd?y:h+T):e.slideTo(h)),e.swipeDirection==="prev"&&(v>1-n.longSwipesRatio?e.slideTo(h+T):w!==null&&v<0&&Math.abs(v)>n.longSwipesRatio?e.slideTo(w):e.slideTo(h))}else{if(!n.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(l.target===e.navigation.nextEl||l.target===e.navigation.prevEl)?l.target===e.navigation.nextEl?e.slideTo(h+T):e.slideTo(h):(e.swipeDirection==="next"&&e.slideTo(y!==null?y:h+T),e.swipeDirection==="prev"&&e.slideTo(w!==null?w:h))}}function _T(){const t=this,{params:e,el:r}=t;if(r&&r.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:i,snapGrid:a}=t;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=i,t.allowSlideNext=n,t.params.watchOverflow&&a!==t.snapGrid&&t.checkOverflow()}function VH(t){const e=this;!e.enabled||e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function HH(){const t=this,{wrapperEl:e,rtlTranslate:r,enabled:n}=t;if(!n)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const a=t.maxTranslate()-t.minTranslate();a===0?i=0:i=(t.translate-t.minTranslate())/a,i!==t.progress&&t.updateProgress(r?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}let xT=!1;function qH(){}const wI=(t,e)=>{const r=tr(),{params:n,touchEvents:i,el:a,wrapperEl:s,device:o,support:l}=t,c=!!n.nested,u=e==="on"?"addEventListener":"removeEventListener",d=e;if(!l.touch)a[u](i.start,t.onTouchStart,!1),r[u](i.move,t.onTouchMove,c),r[u](i.end,t.onTouchEnd,!1);else{const h=i.start==="touchstart"&&l.passiveListener&&n.passiveListeners?{passive:!0,capture:!1}:!1;a[u](i.start,t.onTouchStart,h),a[u](i.move,t.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),a[u](i.end,t.onTouchEnd,h),i.cancel&&a[u](i.cancel,t.onTouchEnd,h)}(n.preventClicks||n.preventClicksPropagation)&&a[u]("click",t.onClick,!0),n.cssMode&&s[u]("scroll",t.onScroll),n.updateOnWindowResize?t[d](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",_T,!0):t[d]("observerUpdate",_T,!0)};function GH(){const t=this,e=tr(),{params:r,support:n}=t;t.onTouchStart=UH.bind(t),t.onTouchMove=zH.bind(t),t.onTouchEnd=$H.bind(t),r.cssMode&&(t.onScroll=HH.bind(t)),t.onClick=VH.bind(t),n.touch&&!xT&&(e.addEventListener("touchstart",qH),xT=!0),wI(t,"on")}function WH(){wI(this,"off")}var KH={attachEvents:GH,detachEvents:WH};const TT=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function YH(){const t=this,{activeIndex:e,initialized:r,loopedSlides:n=0,params:i,$el:a}=t,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const c=(o in s?s[o]:void 0)||t.originalParams,u=TT(t,i),d=TT(t,c),h=i.enabled;u&&!d?(a.removeClass(`${i.containerModifierClass}grid ${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&d&&(a.addClass(`${i.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&i.grid.fill==="column")&&a.addClass(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(v=>{const T=i[v]&&i[v].enabled,k=c[v]&&c[v].enabled;T&&!k&&t[v].disable(),!T&&k&&t[v].enable()});const p=c.direction&&c.direction!==i.direction,y=i.loop&&(c.slidesPerView!==i.slidesPerView||p);p&&r&&t.changeDirection(),ti(t.params,c);const w=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),h&&!w?t.disable():!h&&w&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",c),y&&r&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-n+t.loopedSlides,0,!1)),t.emit("breakpoint",c)}function XH(t,e="window",r){if(!t||e==="container"&&!r)return;let n=!1;const i=sr(),a=e==="window"?i.innerHeight:r.clientHeight,s=Object.keys(t).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:a*l,point:o}}return{value:o,point:o}});s.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<s.length;o+=1){const{point:l,value:c}=s[o];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(n=l):c<=r.clientWidth&&(n=l)}return n||"max"}var QH={setBreakpoint:YH,getBreakpoint:XH};function JH(t,e){const r=[];return t.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(i=>{n[i]&&r.push(e+i)}):typeof n=="string"&&r.push(e+n)}),r}function ZH(){const t=this,{classNames:e,params:r,rtl:n,$el:i,device:a,support:s}=t,o=JH(["initialized",r.direction,{"pointer-events":!s.touch},{"free-mode":t.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:n},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides},{"watch-progress":r.watchSlidesProgress}],r.containerModifierClass);e.push(...o),i.addClass([...e].join(" ")),t.emitContainerClasses()}function e7(){const t=this,{$el:e,classNames:r}=t;e.removeClass(r.join(" ")),t.emitContainerClasses()}var t7={addClasses:ZH,removeClasses:e7};function r7(t,e,r,n,i,a){const s=sr();let o;function l(){a&&a()}!me(t).parent("picture")[0]&&(!t.complete||!i)&&e?(o=new s.Image,o.onload=l,o.onerror=l,n&&(o.sizes=n),r&&(o.srcset=r),e&&(o.src=e)):l()}function i7(){const t=this;t.imagesToLoad=t.$el.find("img");function e(){typeof t=="undefined"||t===null||!t||t.destroyed||(t.imagesLoaded!==void 0&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}for(let r=0;r<t.imagesToLoad.length;r+=1){const n=t.imagesToLoad[r];t.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,e)}}var n7={loadImage:r7,preloadImages:i7};function a7(){const t=this,{isLocked:e,params:r}=t,{slidesOffsetBefore:n}=r;if(n){const i=t.slides.length-1,a=t.slidesGrid[i]+t.slidesSizesGrid[i]+n*2;t.isLocked=t.size>a}else t.isLocked=t.snapGrid.length===1;r.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),r.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var s7={checkOverflow:a7},ST={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function o7(t,e){return function(n={}){const i=Object.keys(n)[0],a=n[i];if(typeof a!="object"||a===null){ti(e,n);return}if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&t[i]===!0&&(t[i]={auto:!0}),!(i in t&&"enabled"in a)){ti(e,n);return}t[i]===!0&&(t[i]={enabled:!0}),typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),ti(e,n)}}const Mg={eventsEmitter:iH,update:fH,translate:bH,transition:TH,slide:OH,loop:MH,grabCursor:FH,events:KH,breakpoints:QH,checkOverflow:s7,classes:t7,images:n7},Ng={};class Dr{constructor(...e){let r,n;if(e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?n=e[0]:[r,n]=e,n||(n={}),n=ti({},n),r&&!n.el&&(n.el=r),n.el&&me(n.el).length>1){const o=[];return me(n.el).each(l=>{const c=ti({},n,{el:l});o.push(new Dr(c))}),o}const i=this;i.__swiper__=!0,i.support=yI(),i.device=JV({userAgent:n.userAgent}),i.browser=eH(),i.eventsListeners={},i.eventsAnyListeners=[],i.modules=[...i.__modules__],n.modules&&Array.isArray(n.modules)&&i.modules.push(...n.modules);const a={};i.modules.forEach(o=>{o({swiper:i,extendParams:o7(n,a),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),emit:i.emit.bind(i)})});const s=ti({},ST,a);return i.params=ti({},s,Ng,n),i.originalParams=ti({},i.params),i.passedParams=ti({},n),i.params&&i.params.on&&Object.keys(i.params.on).forEach(o=>{i.on(o,i.params.on[o])}),i.params&&i.params.onAny&&i.onAny(i.params.onAny),i.$=me,Object.assign(i,{enabled:i.params.enabled,el:r,classNames:[],slides:me(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return i.params.direction==="horizontal"},isVertical(){return i.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEvents:function(){const l=["touchstart","touchmove","touchend","touchcancel"],c=["pointerdown","pointermove","pointerup"];return i.touchEventsTouch={start:l[0],move:l[1],end:l[2],cancel:l[3]},i.touchEventsDesktop={start:c[0],move:c[1],end:c[2]},i.support.touch||!i.params.simulateTouch?i.touchEventsTouch:i.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:Zc(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.emit("_swiper"),i.params.init&&i.init(),i}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;!e.enabled||(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,r){const n=this;e=Math.min(Math.max(e,0),1);const i=n.minTranslate(),s=(n.maxTranslate()-i)*e+i;n.translateTo(s,typeof r=="undefined"?0:r),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",r.join(" "))}getSlideClasses(e){const r=this;return r.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=[];e.slides.each(n=>{const i=e.getSlideClasses(n);r.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)}),e.emit("_slideClasses",r)}slidesPerViewDynamic(e="current",r=!1){const n=this,{params:i,slides:a,slidesGrid:s,slidesSizesGrid:o,size:l,activeIndex:c}=n;let u=1;if(i.centeredSlides){let d=a[c].swiperSlideSize,h;for(let p=c+1;p<a.length;p+=1)a[p]&&!h&&(d+=a[p].swiperSlideSize,u+=1,d>l&&(h=!0));for(let p=c-1;p>=0;p-=1)a[p]&&!h&&(d+=a[p].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<a.length;d+=1)(r?s[d]+o[d]-s[c]<l:s[d]-s[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)s[c]-s[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:r,params:n}=e;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const s=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(s,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let a;e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?a=e.slideTo(e.slides.length-1,0,!1,!0):a=e.slideTo(e.activeIndex,0,!1,!0),a||i()),n.watchOverflow&&r!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,r=!0){const n=this,i=n.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(n.$el.removeClass(`${n.params.containerModifierClass}${i}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each(a=>{e==="vertical"?a.style.width="":a.style.height=""}),n.emit("changeDirection"),r&&n.update()),n}changeLanguageDirection(e){const r=this;r.rtl&&e==="rtl"||!r.rtl&&e==="ltr"||(r.rtl=e==="rtl",r.rtlTranslate=r.params.direction==="horizontal"&&r.rtl,r.rtl?(r.$el.addClass(`${r.params.containerModifierClass}rtl`),r.el.dir="rtl"):(r.$el.removeClass(`${r.params.containerModifierClass}rtl`),r.el.dir="ltr"),r.update())}mount(e){const r=this;if(r.mounted)return!0;const n=me(e||r.params.el);if(e=n[0],!e)return!1;e.swiper=r;const i=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let s=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const o=me(e.shadowRoot.querySelector(i()));return o.children=l=>n.children(l),o}return n.children?n.children(i()):me(n).children(i())})();if(s.length===0&&r.params.createElements){const l=tr().createElement("div");s=me(l),l.className=r.params.wrapperClass,n.append(l),n.children(`.${r.params.slideClass}`).each(c=>{s.append(c)})}return Object.assign(r,{$el:n,el:e,$wrapperEl:s,wrapperEl:s[0],mounted:!0,rtl:e.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(e.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl"),wrongRTL:s.css("display")==="-webkit-box"}),!0}init(e){const r=this;return r.initialized||r.mount(e)===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.params.loop&&r.loopCreate(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.preloadImages&&r.preloadImages(),r.params.loop?r.slideTo(r.params.initialSlide+r.loopedSlides,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.attachEvents(),r.initialized=!0,r.emit("init"),r.emit("afterInit")),r}destroy(e=!0,r=!0){const n=this,{params:i,$el:a,$wrapperEl:s,slides:o}=n;return typeof n.params=="undefined"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),r&&(n.removeClasses(),a.removeAttr("style"),s.removeAttr("style"),o&&o.length&&o.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),e!==!1&&(n.$el[0].swiper=null,GV(n)),n.destroyed=!0),null}static extendDefaults(e){ti(Ng,e)}static get extendedDefaults(){return Ng}static get defaults(){return ST}static installModule(e){Dr.prototype.__modules__||(Dr.prototype.__modules__=[]);const r=Dr.prototype.__modules__;typeof e=="function"&&r.indexOf(e)<0&&r.push(e)}static use(e){return Array.isArray(e)?(e.forEach(r=>Dr.installModule(r)),Dr):(Dr.installModule(e),Dr)}}Object.keys(Mg).forEach(t=>{Object.keys(Mg[t]).forEach(e=>{Dr.prototype[e]=Mg[t][e]})});Dr.use([tH,rH]);function $y(t,e,r,n){const i=tr();return t.params.createElements&&Object.keys(n).forEach(a=>{if(!r[a]&&r.auto===!0){let s=t.$el.children(`.${n[a]}`)[0];s||(s=i.createElement("div"),s.className=n[a],t.$el.append(s)),r[a]=s,e[a]=s}}),r}function l7({swiper:t,extendParams:e,on:r,emit:n}){e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function i(p){let y;return p&&(y=me(p),t.params.uniqueNavElements&&typeof p=="string"&&y.length>1&&t.$el.find(p).length===1&&(y=t.$el.find(p))),y}function a(p,y){const w=t.params.navigation;p&&p.length>0&&(p[y?"addClass":"removeClass"](w.disabledClass),p[0]&&p[0].tagName==="BUTTON"&&(p[0].disabled=y),t.params.watchOverflow&&t.enabled&&p[t.isLocked?"addClass":"removeClass"](w.lockClass))}function s(){if(t.params.loop)return;const{$nextEl:p,$prevEl:y}=t.navigation;a(y,t.isBeginning&&!t.params.rewind),a(p,t.isEnd&&!t.params.rewind)}function o(p){p.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),n("navigationPrev"))}function l(p){p.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),n("navigationNext"))}function c(){const p=t.params.navigation;if(t.params.navigation=$y(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(p.nextEl||p.prevEl))return;const y=i(p.nextEl),w=i(p.prevEl);y&&y.length>0&&y.on("click",l),w&&w.length>0&&w.on("click",o),Object.assign(t.navigation,{$nextEl:y,nextEl:y&&y[0],$prevEl:w,prevEl:w&&w[0]}),t.enabled||(y&&y.addClass(p.lockClass),w&&w.addClass(p.lockClass))}function u(){const{$nextEl:p,$prevEl:y}=t.navigation;p&&p.length&&(p.off("click",l),p.removeClass(t.params.navigation.disabledClass)),y&&y.length&&(y.off("click",o),y.removeClass(t.params.navigation.disabledClass))}r("init",()=>{t.params.navigation.enabled===!1?h():(c(),s())}),r("toEdge fromEdge lock unlock",()=>{s()}),r("destroy",()=>{u()}),r("enable disable",()=>{const{$nextEl:p,$prevEl:y}=t.navigation;p&&p[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),y&&y[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)}),r("click",(p,y)=>{const{$nextEl:w,$prevEl:v}=t.navigation,T=y.target;if(t.params.navigation.hideOnClick&&!me(T).is(v)&&!me(T).is(w)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===T||t.pagination.el.contains(T)))return;let k;w?k=w.hasClass(t.params.navigation.hiddenClass):v&&(k=v.hasClass(t.params.navigation.hiddenClass)),n(k===!0?"navigationShow":"navigationHide"),w&&w.toggleClass(t.params.navigation.hiddenClass),v&&v.toggleClass(t.params.navigation.hiddenClass)}});const d=()=>{t.$el.removeClass(t.params.navigation.navigationDisabledClass),c(),s()},h=()=>{t.$el.addClass(t.params.navigation.navigationDisabledClass),u()};Object.assign(t.navigation,{enable:d,disable:h,update:s,init:c,destroy:u})}function vn(t=""){return`.${t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function c7({swiper:t,extendParams:e,on:r,emit:n}){const i="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:w=>w,formatFractionTotal:w=>w,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),t.pagination={el:null,$el:null,bullets:[]};let a,s=0;function o(){return!t.params.pagination.el||!t.pagination.el||!t.pagination.$el||t.pagination.$el.length===0}function l(w,v){const{bulletActiveClass:T}=t.params.pagination;w[v]().addClass(`${T}-${v}`)[v]().addClass(`${T}-${v}-${v}`)}function c(){const w=t.rtl,v=t.params.pagination;if(o())return;const T=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,k=t.pagination.$el;let A;const E=t.params.loop?Math.ceil((T-t.loopedSlides*2)/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(A=Math.ceil((t.activeIndex-t.loopedSlides)/t.params.slidesPerGroup),A>T-1-t.loopedSlides*2&&(A-=T-t.loopedSlides*2),A>E-1&&(A-=E),A<0&&t.params.paginationType!=="bullets"&&(A=E+A)):typeof t.snapIndex!="undefined"?A=t.snapIndex:A=t.activeIndex||0,v.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const I=t.pagination.bullets;let F,j,D;if(v.dynamicBullets&&(a=I.eq(0)[t.isHorizontal()?"outerWidth":"outerHeight"](!0),k.css(t.isHorizontal()?"width":"height",`${a*(v.dynamicMainBullets+4)}px`),v.dynamicMainBullets>1&&t.previousIndex!==void 0&&(s+=A-(t.previousIndex-t.loopedSlides||0),s>v.dynamicMainBullets-1?s=v.dynamicMainBullets-1:s<0&&(s=0)),F=Math.max(A-s,0),j=F+(Math.min(I.length,v.dynamicMainBullets)-1),D=(j+F)/2),I.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(z=>`${v.bulletActiveClass}${z}`).join(" ")),k.length>1)I.each(z=>{const M=me(z),U=M.index();U===A&&M.addClass(v.bulletActiveClass),v.dynamicBullets&&(U>=F&&U<=j&&M.addClass(`${v.bulletActiveClass}-main`),U===F&&l(M,"prev"),U===j&&l(M,"next"))});else{const z=I.eq(A),M=z.index();if(z.addClass(v.bulletActiveClass),v.dynamicBullets){const U=I.eq(F),P=I.eq(j);for(let q=F;q<=j;q+=1)I.eq(q).addClass(`${v.bulletActiveClass}-main`);if(t.params.loop)if(M>=I.length){for(let q=v.dynamicMainBullets;q>=0;q-=1)I.eq(I.length-q).addClass(`${v.bulletActiveClass}-main`);I.eq(I.length-v.dynamicMainBullets-1).addClass(`${v.bulletActiveClass}-prev`)}else l(U,"prev"),l(P,"next");else l(U,"prev"),l(P,"next")}}if(v.dynamicBullets){const z=Math.min(I.length,v.dynamicMainBullets+4),M=(a*z-a)/2-D*a,U=w?"right":"left";I.css(t.isHorizontal()?U:"top",`${M}px`)}}if(v.type==="fraction"&&(k.find(vn(v.currentClass)).text(v.formatFractionCurrent(A+1)),k.find(vn(v.totalClass)).text(v.formatFractionTotal(E))),v.type==="progressbar"){let I;v.progressbarOpposite?I=t.isHorizontal()?"vertical":"horizontal":I=t.isHorizontal()?"horizontal":"vertical";const F=(A+1)/E;let j=1,D=1;I==="horizontal"?j=F:D=F,k.find(vn(v.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${j}) scaleY(${D})`).transition(t.params.speed)}v.type==="custom"&&v.renderCustom?(k.html(v.renderCustom(t,A+1,E)),n("paginationRender",k[0])):n("paginationUpdate",k[0]),t.params.watchOverflow&&t.enabled&&k[t.isLocked?"addClass":"removeClass"](v.lockClass)}function u(){const w=t.params.pagination;if(o())return;const v=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,T=t.pagination.$el;let k="";if(w.type==="bullets"){let A=t.params.loop?Math.ceil((v-t.loopedSlides*2)/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&!t.params.loop&&A>v&&(A=v);for(let E=0;E<A;E+=1)w.renderBullet?k+=w.renderBullet.call(t,E,w.bulletClass):k+=`<${w.bulletElement} class="${w.bulletClass}"></${w.bulletElement}>`;T.html(k),t.pagination.bullets=T.find(vn(w.bulletClass))}w.type==="fraction"&&(w.renderFraction?k=w.renderFraction.call(t,w.currentClass,w.totalClass):k=`<span class="${w.currentClass}"></span> / <span class="${w.totalClass}"></span>`,T.html(k)),w.type==="progressbar"&&(w.renderProgressbar?k=w.renderProgressbar.call(t,w.progressbarFillClass):k=`<span class="${w.progressbarFillClass}"></span>`,T.html(k)),w.type!=="custom"&&n("paginationRender",t.pagination.$el[0])}function d(){t.params.pagination=$y(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const w=t.params.pagination;if(!w.el)return;let v=me(w.el);v.length!==0&&(t.params.uniqueNavElements&&typeof w.el=="string"&&v.length>1&&(v=t.$el.find(w.el),v.length>1&&(v=v.filter(T=>me(T).parents(".swiper")[0]===t.el))),w.type==="bullets"&&w.clickable&&v.addClass(w.clickableClass),v.addClass(w.modifierClass+w.type),v.addClass(t.isHorizontal()?w.horizontalClass:w.verticalClass),w.type==="bullets"&&w.dynamicBullets&&(v.addClass(`${w.modifierClass}${w.type}-dynamic`),s=0,w.dynamicMainBullets<1&&(w.dynamicMainBullets=1)),w.type==="progressbar"&&w.progressbarOpposite&&v.addClass(w.progressbarOppositeClass),w.clickable&&v.on("click",vn(w.bulletClass),function(k){k.preventDefault();let A=me(this).index()*t.params.slidesPerGroup;t.params.loop&&(A+=t.loopedSlides),t.slideTo(A)}),Object.assign(t.pagination,{$el:v,el:v[0]}),t.enabled||v.addClass(w.lockClass))}function h(){const w=t.params.pagination;if(o())return;const v=t.pagination.$el;v.removeClass(w.hiddenClass),v.removeClass(w.modifierClass+w.type),v.removeClass(t.isHorizontal()?w.horizontalClass:w.verticalClass),t.pagination.bullets&&t.pagination.bullets.removeClass&&t.pagination.bullets.removeClass(w.bulletActiveClass),w.clickable&&v.off("click",vn(w.bulletClass))}r("init",()=>{t.params.pagination.enabled===!1?y():(d(),u(),c())}),r("activeIndexChange",()=>{(t.params.loop||typeof t.snapIndex=="undefined")&&c()}),r("snapIndexChange",()=>{t.params.loop||c()}),r("slidesLengthChange",()=>{t.params.loop&&(u(),c())}),r("snapGridLengthChange",()=>{t.params.loop||(u(),c())}),r("destroy",()=>{h()}),r("enable disable",()=>{const{$el:w}=t.pagination;w&&w[t.enabled?"removeClass":"addClass"](t.params.pagination.lockClass)}),r("lock unlock",()=>{c()}),r("click",(w,v)=>{const T=v.target,{$el:k}=t.pagination;if(t.params.pagination.el&&t.params.pagination.hideOnClick&&k&&k.length>0&&!me(T).hasClass(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&T===t.navigation.nextEl||t.navigation.prevEl&&T===t.navigation.prevEl))return;const A=k.hasClass(t.params.pagination.hiddenClass);n(A===!0?"paginationShow":"paginationHide"),k.toggleClass(t.params.pagination.hiddenClass)}});const p=()=>{t.$el.removeClass(t.params.pagination.paginationDisabledClass),t.pagination.$el&&t.pagination.$el.removeClass(t.params.pagination.paginationDisabledClass),d(),u(),c()},y=()=>{t.$el.addClass(t.params.pagination.paginationDisabledClass),t.pagination.$el&&t.pagination.$el.addClass(t.params.pagination.paginationDisabledClass),h()};Object.assign(t.pagination,{enable:p,disable:y,render:u,update:c,init:d,destroy:h})}function u7({swiper:t,extendParams:e,on:r,emit:n}){const i=tr();let a=!1,s=null,o=null,l,c,u,d;e({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),t.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null};function h(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:U,rtlTranslate:P,progress:q}=t,{$dragEl:X,$el:fe}=U,te=t.params.scrollbar;let se=c,le=(u-c)*q;P?(le=-le,le>0?(se=c-le,le=0):-le+c>u&&(se=u+le)):le<0?(se=c+le,le=0):le+c>u&&(se=u-le),t.isHorizontal()?(X.transform(`translate3d(${le}px, 0, 0)`),X[0].style.width=`${se}px`):(X.transform(`translate3d(0px, ${le}px, 0)`),X[0].style.height=`${se}px`),te.hide&&(clearTimeout(s),fe[0].style.opacity=1,s=setTimeout(()=>{fe[0].style.opacity=0,fe.transition(400)},1e3))}function p(U){!t.params.scrollbar.el||!t.scrollbar.el||t.scrollbar.$dragEl.transition(U)}function y(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:U}=t,{$dragEl:P,$el:q}=U;P[0].style.width="",P[0].style.height="",u=t.isHorizontal()?q[0].offsetWidth:q[0].offsetHeight,d=t.size/(t.virtualSize+t.params.slidesOffsetBefore-(t.params.centeredSlides?t.snapGrid[0]:0)),t.params.scrollbar.dragSize==="auto"?c=u*d:c=parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?P[0].style.width=`${c}px`:P[0].style.height=`${c}px`,d>=1?q[0].style.display="none":q[0].style.display="",t.params.scrollbar.hide&&(q[0].style.opacity=0),t.params.watchOverflow&&t.enabled&&U.$el[t.isLocked?"addClass":"removeClass"](t.params.scrollbar.lockClass)}function w(U){return t.isHorizontal()?U.type==="touchstart"||U.type==="touchmove"?U.targetTouches[0].clientX:U.clientX:U.type==="touchstart"||U.type==="touchmove"?U.targetTouches[0].clientY:U.clientY}function v(U){const{scrollbar:P,rtlTranslate:q}=t,{$el:X}=P;let fe;fe=(w(U)-X.offset()[t.isHorizontal()?"left":"top"]-(l!==null?l:c/2))/(u-c),fe=Math.max(Math.min(fe,1),0),q&&(fe=1-fe);const te=t.minTranslate()+(t.maxTranslate()-t.minTranslate())*fe;t.updateProgress(te),t.setTranslate(te),t.updateActiveIndex(),t.updateSlidesClasses()}function T(U){const P=t.params.scrollbar,{scrollbar:q,$wrapperEl:X}=t,{$el:fe,$dragEl:te}=q;a=!0,l=U.target===te[0]||U.target===te?w(U)-U.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,U.preventDefault(),U.stopPropagation(),X.transition(100),te.transition(100),v(U),clearTimeout(o),fe.transition(0),P.hide&&fe.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),n("scrollbarDragStart",U)}function k(U){const{scrollbar:P,$wrapperEl:q}=t,{$el:X,$dragEl:fe}=P;!a||(U.preventDefault?U.preventDefault():U.returnValue=!1,v(U),q.transition(0),X.transition(0),fe.transition(0),n("scrollbarDragMove",U))}function A(U){const P=t.params.scrollbar,{scrollbar:q,$wrapperEl:X}=t,{$el:fe}=q;!a||(a=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),X.transition("")),P.hide&&(clearTimeout(o),o=Jc(()=>{fe.css("opacity",0),fe.transition(400)},1e3)),n("scrollbarDragEnd",U),P.snapOnRelease&&t.slideToClosest())}function E(U){const{scrollbar:P,touchEventsTouch:q,touchEventsDesktop:X,params:fe,support:te}=t,se=P.$el;if(!se)return;const le=se[0],Re=te.passiveListener&&fe.passiveListeners?{passive:!1,capture:!1}:!1,Le=te.passiveListener&&fe.passiveListeners?{passive:!0,capture:!1}:!1;if(!le)return;const pt=U==="on"?"addEventListener":"removeEventListener";te.touch?(le[pt](q.start,T,Re),le[pt](q.move,k,Re),le[pt](q.end,A,Le)):(le[pt](X.start,T,Re),i[pt](X.move,k,Re),i[pt](X.end,A,Le))}function I(){!t.params.scrollbar.el||!t.scrollbar.el||E("on")}function F(){!t.params.scrollbar.el||!t.scrollbar.el||E("off")}function j(){const{scrollbar:U,$el:P}=t;t.params.scrollbar=$y(t,t.originalParams.scrollbar,t.params.scrollbar,{el:"swiper-scrollbar"});const q=t.params.scrollbar;if(!q.el)return;let X=me(q.el);t.params.uniqueNavElements&&typeof q.el=="string"&&X.length>1&&P.find(q.el).length===1&&(X=P.find(q.el)),X.addClass(t.isHorizontal()?q.horizontalClass:q.verticalClass);let fe=X.find(`.${t.params.scrollbar.dragClass}`);fe.length===0&&(fe=me(`<div class="${t.params.scrollbar.dragClass}"></div>`),X.append(fe)),Object.assign(U,{$el:X,el:X[0],$dragEl:fe,dragEl:fe[0]}),q.draggable&&I(),X&&X[t.enabled?"removeClass":"addClass"](t.params.scrollbar.lockClass)}function D(){const U=t.params.scrollbar,P=t.scrollbar.$el;P&&P.removeClass(t.isHorizontal()?U.horizontalClass:U.verticalClass),F()}r("init",()=>{t.params.scrollbar.enabled===!1?M():(j(),y(),h())}),r("update resize observerUpdate lock unlock",()=>{y()}),r("setTranslate",()=>{h()}),r("setTransition",(U,P)=>{p(P)}),r("enable disable",()=>{const{$el:U}=t.scrollbar;U&&U[t.enabled?"removeClass":"addClass"](t.params.scrollbar.lockClass)}),r("destroy",()=>{D()});const z=()=>{t.$el.removeClass(t.params.scrollbar.scrollbarDisabledClass),t.scrollbar.$el&&t.scrollbar.$el.removeClass(t.params.scrollbar.scrollbarDisabledClass),j(),y(),h()},M=()=>{t.$el.addClass(t.params.scrollbar.scrollbarDisabledClass),t.scrollbar.$el&&t.scrollbar.$el.addClass(t.params.scrollbar.scrollbarDisabledClass),D()};Object.assign(t.scrollbar,{enable:z,disable:M,updateSize:y,setTranslate:h,init:j,destroy:D})}function d7({swiper:t,extendParams:e,on:r}){e({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),t.a11y={clicked:!1};let n=null;function i(P){const q=n;q.length!==0&&(q.html(""),q.html(P))}function a(P=16){const q=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(P).replace(/x/g,q)}function s(P){P.attr("tabIndex","0")}function o(P){P.attr("tabIndex","-1")}function l(P,q){P.attr("role",q)}function c(P,q){P.attr("aria-roledescription",q)}function u(P,q){P.attr("aria-controls",q)}function d(P,q){P.attr("aria-label",q)}function h(P,q){P.attr("id",q)}function p(P,q){P.attr("aria-live",q)}function y(P){P.attr("aria-disabled",!0)}function w(P){P.attr("aria-disabled",!1)}function v(P){if(P.keyCode!==13&&P.keyCode!==32)return;const q=t.params.a11y,X=me(P.target);t.navigation&&t.navigation.$nextEl&&X.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?i(q.lastSlideMessage):i(q.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&X.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?i(q.firstSlideMessage):i(q.prevSlideMessage)),t.pagination&&X.is(vn(t.params.pagination.bulletClass))&&X[0].click()}function T(){if(t.params.loop||t.params.rewind||!t.navigation)return;const{$nextEl:P,$prevEl:q}=t.navigation;q&&q.length>0&&(t.isBeginning?(y(q),o(q)):(w(q),s(q))),P&&P.length>0&&(t.isEnd?(y(P),o(P)):(w(P),s(P)))}function k(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function A(){return k()&&t.params.pagination.clickable}function E(){const P=t.params.a11y;!k()||t.pagination.bullets.each(q=>{const X=me(q);t.params.pagination.clickable&&(s(X),t.params.pagination.renderBullet||(l(X,"button"),d(X,P.paginationBulletMessage.replace(/\{\{index\}\}/,X.index()+1)))),X.is(`.${t.params.pagination.bulletActiveClass}`)?X.attr("aria-current","true"):X.removeAttr("aria-current")})}const I=(P,q,X)=>{s(P),P[0].tagName!=="BUTTON"&&(l(P,"button"),P.on("keydown",v)),d(P,X),u(P,q)},F=()=>{t.a11y.clicked=!0},j=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.destroyed||(t.a11y.clicked=!1)})})},D=P=>{if(t.a11y.clicked)return;const q=P.target.closest(`.${t.params.slideClass}`);if(!q||!t.slides.includes(q))return;const X=t.slides.indexOf(q)===t.activeIndex,fe=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(q);X||fe||P.sourceCapabilities&&P.sourceCapabilities.firesTouchEvents||(t.isHorizontal()?t.el.scrollLeft=0:t.el.scrollTop=0,t.slideTo(t.slides.indexOf(q),0))},z=()=>{const P=t.params.a11y;P.itemRoleDescriptionMessage&&c(me(t.slides),P.itemRoleDescriptionMessage),P.slideRole&&l(me(t.slides),P.slideRole);const q=t.params.loop?t.slides.filter(X=>!X.classList.contains(t.params.slideDuplicateClass)).length:t.slides.length;P.slideLabelMessage&&t.slides.each((X,fe)=>{const te=me(X),se=t.params.loop?parseInt(te.attr("data-swiper-slide-index"),10):fe,le=P.slideLabelMessage.replace(/\{\{index\}\}/,se+1).replace(/\{\{slidesLength\}\}/,q);d(te,le)})},M=()=>{const P=t.params.a11y;t.$el.append(n);const q=t.$el;P.containerRoleDescriptionMessage&&c(q,P.containerRoleDescriptionMessage),P.containerMessage&&d(q,P.containerMessage);const X=t.$wrapperEl,fe=P.id||X.attr("id")||`swiper-wrapper-${a(16)}`,te=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";h(X,fe),p(X,te),z();let se,le;t.navigation&&t.navigation.$nextEl&&(se=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(le=t.navigation.$prevEl),se&&se.length&&I(se,fe,P.nextSlideMessage),le&&le.length&&I(le,fe,P.prevSlideMessage),A()&&t.pagination.$el.on("keydown",vn(t.params.pagination.bulletClass),v),t.$el.on("focus",D,!0),t.$el.on("pointerdown",F,!0),t.$el.on("pointerup",j,!0)};function U(){n&&n.length>0&&n.remove();let P,q;t.navigation&&t.navigation.$nextEl&&(P=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(q=t.navigation.$prevEl),P&&P.off("keydown",v),q&&q.off("keydown",v),A()&&t.pagination.$el.off("keydown",vn(t.params.pagination.bulletClass),v),t.$el.off("focus",D,!0),t.$el.off("pointerdown",F,!0),t.$el.off("pointerup",j,!0)}r("beforeInit",()=>{n=me(`<span class="${t.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}),r("afterInit",()=>{!t.params.a11y.enabled||M()}),r("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{!t.params.a11y.enabled||z()}),r("fromEdge toEdge afterInit lock unlock",()=>{!t.params.a11y.enabled||T()}),r("paginationUpdate",()=>{!t.params.a11y.enabled||E()}),r("destroy",()=>{!t.params.a11y.enabled||U()})}function h7({swiper:t,extendParams:e,on:r,emit:n}){let i;t.autoplay={running:!1,paused:!1},e({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function a(){if(!t.size){t.autoplay.running=!1,t.autoplay.paused=!1;return}const w=t.slides.eq(t.activeIndex);let v=t.params.autoplay.delay;w.attr("data-swiper-autoplay")&&(v=w.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(i),i=Jc(()=>{let T;t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),T=t.slidePrev(t.params.speed,!0,!0),n("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?o():(T=t.slideTo(t.slides.length-1,t.params.speed,!0,!0),n("autoplay")):(T=t.slidePrev(t.params.speed,!0,!0),n("autoplay")):t.params.loop?(t.loopFix(),T=t.slideNext(t.params.speed,!0,!0),n("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?o():(T=t.slideTo(0,t.params.speed,!0,!0),n("autoplay")):(T=t.slideNext(t.params.speed,!0,!0),n("autoplay")),(t.params.cssMode&&t.autoplay.running||T===!1)&&a()},v)}function s(){return typeof i!="undefined"||t.autoplay.running?!1:(t.autoplay.running=!0,n("autoplayStart"),a(),!0)}function o(){return!t.autoplay.running||typeof i=="undefined"?!1:(i&&(clearTimeout(i),i=void 0),t.autoplay.running=!1,n("autoplayStop"),!0)}function l(w){!t.autoplay.running||t.autoplay.paused||(i&&clearTimeout(i),t.autoplay.paused=!0,w===0||!t.params.autoplay.waitForTransition?(t.autoplay.paused=!1,a()):["transitionend","webkitTransitionEnd"].forEach(v=>{t.$wrapperEl[0].addEventListener(v,u)}))}function c(){const w=tr();w.visibilityState==="hidden"&&t.autoplay.running&&l(),w.visibilityState==="visible"&&t.autoplay.paused&&(a(),t.autoplay.paused=!1)}function u(w){!t||t.destroyed||!t.$wrapperEl||w.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(v=>{t.$wrapperEl[0].removeEventListener(v,u)}),t.autoplay.paused=!1,t.autoplay.running?a():o())}function d(){t.params.autoplay.disableOnInteraction?o():(n("autoplayPause"),l()),["transitionend","webkitTransitionEnd"].forEach(w=>{t.$wrapperEl[0].removeEventListener(w,u)})}function h(){t.params.autoplay.disableOnInteraction||(t.autoplay.paused=!1,n("autoplayResume"),a())}function p(){t.params.autoplay.pauseOnMouseEnter&&(t.$el.on("mouseenter",d),t.$el.on("mouseleave",h))}function y(){t.$el.off("mouseenter",d),t.$el.off("mouseleave",h)}r("init",()=>{t.params.autoplay.enabled&&(s(),tr().addEventListener("visibilitychange",c),p())}),r("beforeTransitionStart",(w,v,T)=>{t.autoplay.running&&(T||!t.params.autoplay.disableOnInteraction?t.autoplay.pause(v):o())}),r("sliderFirstMove",()=>{t.autoplay.running&&(t.params.autoplay.disableOnInteraction?o():l())}),r("touchEnd",()=>{t.params.cssMode&&t.autoplay.paused&&!t.params.autoplay.disableOnInteraction&&a()}),r("destroy",()=>{y(),t.autoplay.running&&o(),tr().removeEventListener("visibilitychange",c)}),Object.assign(t.autoplay,{pause:l,run:a,start:s,stop:o})}function ks(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function da(t,e){const r=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>r.indexOf(n)<0).forEach(n=>{typeof t[n]=="undefined"?t[n]=e[n]:ks(e[n])&&ks(t[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?t[n]=e[n]:da(t[n],e[n]):t[n]=e[n]})}function _I(t={}){return t.navigation&&typeof t.navigation.nextEl=="undefined"&&typeof t.navigation.prevEl=="undefined"}function xI(t={}){return t.pagination&&typeof t.pagination.el=="undefined"}function TI(t={}){return t.scrollbar&&typeof t.scrollbar.el=="undefined"}function SI(t=""){const e=t.split(" ").map(n=>n.trim()).filter(n=>!!n),r=[];return e.forEach(n=>{r.indexOf(n)<0&&r.push(n)}),r.join(" ")}const kI=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function kT(t={},e=!0){const r={on:{}},n={},i={};da(r,Dr.defaults),da(r,Dr.extendedDefaults),r._emitClasses=!0,r.init=!1;const a={},s=kI.map(l=>l.replace(/_/,"")),o=Object.assign({},t);return Object.keys(o).forEach(l=>{typeof t[l]!="undefined"&&(s.indexOf(l)>=0?ks(t[l])?(r[l]={},i[l]={},da(r[l],t[l]),da(i[l],t[l])):(r[l]=t[l],i[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?n[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:r.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:a[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{r[l]===!0&&(r[l]={}),r[l]===!1&&delete r[l]}),{params:r,passedParams:i,rest:a,events:n}}function f7({el:t,nextEl:e,prevEl:r,paginationEl:n,scrollbarEl:i,swiper:a},s){_I(s)&&e&&r&&(a.params.navigation.nextEl=e,a.originalParams.navigation.nextEl=e,a.params.navigation.prevEl=r,a.originalParams.navigation.prevEl=r),xI(s)&&n&&(a.params.pagination.el=n,a.originalParams.pagination.el=n),TI(s)&&i&&(a.params.scrollbar.el=i,a.originalParams.scrollbar.el=i),a.init(t)}const EI=(t,e)=>{let r=e.slidesPerView;if(e.breakpoints){const i=Dr.prototype.getBreakpoint(e.breakpoints),a=i in e.breakpoints?e.breakpoints[i]:void 0;a&&a.slidesPerView&&(r=a.slidesPerView)}let n=Math.ceil(parseFloat(e.loopedSlides||r,10));return n+=e.loopAdditionalSlides,n>t.length&&e.loopedSlidesLimit&&(n=t.length),n};function p7(t,e,r){const n=e.map((l,c)=>(l.props||(l.props={}),l.props.swiperRef=t,l.props["data-swiper-slide-index"]=c,l));function i(l,c,u){return l.props||(l.props={}),lt(l.type,{...l.props,key:`${l.key}-duplicate-${c}-${u}`,class:`${l.props.className||""} ${r.slideDuplicateClass} ${l.props.class||""}`},l.children)}if(r.loopFillGroupWithBlank){const l=r.slidesPerGroup-n.length%r.slidesPerGroup;if(l!==r.slidesPerGroup)for(let c=0;c<l;c+=1){const u=lt("div",{class:`${r.slideClass} ${r.slideBlankClass}`});n.push(u)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=n.length);const a=EI(n,r),s=[],o=[];for(let l=0;l<a;l+=1){const c=l-Math.floor(l/n.length)*n.length;o.push(i(n[c],l,"append")),s.unshift(i(n[n.length-c-1],l,"prepend"))}return t.value&&(t.value.loopedSlides=a),[...s,...n,...o]}function g7(t,e,r,n,i){const a=[];if(!e)return a;const s=l=>{a.indexOf(l)<0&&a.push(l)};if(r&&n){const l=n.map(i),c=r.map(i);l.join("")!==c.join("")&&s("children"),n.length!==r.length&&s("children")}return kI.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(ks(t[l])&&ks(e[l])){const c=Object.keys(t[l]),u=Object.keys(e[l]);c.length!==u.length?s(l):(c.forEach(d=>{t[l][d]!==e[l][d]&&s(l)}),u.forEach(d=>{t[l][d]!==e[l][d]&&s(l)}))}else t[l]!==e[l]&&s(l)}),a}function jg(t,e,r){t===void 0&&(t={});const n=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},a=(s,o)=>{!Array.isArray(s)||s.forEach(l=>{const c=typeof l.type=="symbol";o==="default"&&(o="container-end"),c&&l.children?a(l.children,"default"):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?n.push(l):i[o]&&i[o].push(l)})};return Object.keys(t).forEach(s=>{if(typeof t[s]!="function")return;const o=t[s]();a(o,s)}),r.value=e.value,e.value=n,{slides:n,slots:i}}function m7({swiper:t,slides:e,passedParams:r,changedParams:n,nextEl:i,prevEl:a,scrollbarEl:s,paginationEl:o}){const l=n.filter(I=>I!=="children"&&I!=="direction"),{params:c,pagination:u,navigation:d,scrollbar:h,virtual:p,thumbs:y}=t;let w,v,T,k,A;n.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(w=!0),n.includes("controller")&&r.controller&&r.controller.control&&c.controller&&!c.controller.control&&(v=!0),n.includes("pagination")&&r.pagination&&(r.pagination.el||o)&&(c.pagination||c.pagination===!1)&&u&&!u.el&&(T=!0),n.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||s)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(k=!0),n.includes("navigation")&&r.navigation&&(r.navigation.prevEl||a)&&(r.navigation.nextEl||i)&&(c.navigation||c.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(A=!0);const E=I=>{!t[I]||(t[I].destroy(),I==="navigation"?(c[I].prevEl=void 0,c[I].nextEl=void 0,t[I].prevEl=void 0,t[I].nextEl=void 0):(c[I].el=void 0,t[I].el=void 0))};l.forEach(I=>{if(ks(c[I])&&ks(r[I]))da(c[I],r[I]);else{const F=r[I];(F===!0||F===!1)&&(I==="navigation"||I==="pagination"||I==="scrollbar")?F===!1&&E(I):c[I]=r[I]}}),l.includes("controller")&&!v&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),n.includes("children")&&e&&p&&c.virtual.enabled?(p.slides=e,p.update(!0)):n.includes("children")&&t.lazy&&t.params.lazy.enabled&&t.lazy.load(),w&&y.init()&&y.update(!0),v&&(t.controller.control=c.controller.control),T&&(o&&(c.pagination.el=o),u.init(),u.render(),u.update()),k&&(s&&(c.scrollbar.el=s),h.init(),h.updateSize(),h.setTranslate()),A&&(i&&(c.navigation.nextEl=i),a&&(c.navigation.prevEl=a),d.init(),d.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),n.includes("direction")&&t.changeDirection(r.direction,!1),t.update()}function v7(t,e,r){if(!r)return null;const n=t.value.isHorizontal()?{[t.value.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`};return e.filter((i,a)=>a>=r.from&&a<=r.to).map(i=>(i.props||(i.props={}),i.props.style||(i.props.style={}),i.props.swiperRef=t,i.props.style=n,lt(i.type,{...i.props},i.children)))}const y7=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())},b7={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:Number,default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},preloadImages:{type:Boolean,default:void 0},updateOnImagesReady:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopedSlides:{type:Number,default:void 0},loopedSlidesLimit:{type:Boolean,default:!0},loopFillGroupWithBlank:{type:Boolean,default:void 0},loopPreventsSlide:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideDuplicateActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideDuplicateClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slideDuplicateNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},slideDuplicatePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},lazy:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","imagesReady","init","keyPress","lazyImageLoad","lazyImageReady","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(t,e){let{slots:r,emit:n}=e;const{tag:i,wrapperTag:a}=t,s=vt("swiper"),o=vt(null),l=vt(!1),c=vt(!1),u=vt(null),d=vt(null),h=vt(null),p={value:[]},y={value:[]},w=vt(null),v=vt(null),T=vt(null),k=vt(null),{params:A,passedParams:E}=kT(t,!1);jg(r,p,y),h.value=E,y.value=p.value;const I=()=>{jg(r,p,y),l.value=!0};if(A.onAny=function(j){for(var D=arguments.length,z=new Array(D>1?D-1:0),M=1;M<D;M++)z[M-1]=arguments[M];n(j,...z)},Object.assign(A.on,{_beforeBreakpoint:I,_containerClasses(j,D){s.value=D}}),d.value=new Dr(A),d.value.loopCreate=()=>{},d.value.loopDestroy=()=>{},A.loop&&(d.value.loopedSlides=EI(p.value,A)),d.value.virtual&&d.value.params.virtual.enabled){d.value.virtual.slides=p.value;const j={cache:!1,slides:p.value,renderExternal:D=>{o.value=D},renderExternalUpdate:!1};da(d.value.params.virtual,j),da(d.value.originalParams.virtual,j)}c0(()=>{!c.value&&d.value&&(d.value.emitSlidesClasses(),c.value=!0);const{passedParams:j}=kT(t,!1),D=g7(j,h.value,p.value,y.value,z=>z.props&&z.props.key);h.value=j,(D.length||l.value)&&d.value&&!d.value.destroyed&&m7({swiper:d.value,slides:p.value,passedParams:j,changedParams:D,nextEl:w.value,prevEl:v.value,scrollbarEl:k.value,paginationEl:T.value}),l.value=!1}),Xi("swiper",d),ls(o,()=>{o0(()=>{y7(d.value)})}),Ps(()=>{!u.value||(f7({el:u.value,nextEl:w.value,prevEl:v.value,paginationEl:T.value,scrollbarEl:k.value,swiper:d.value},A),n("swiper",d.value))}),Mf(()=>{d.value&&!d.value.destroyed&&d.value.destroy(!0,!1)});function F(j){return A.virtual?v7(d,j,o.value):!A.loop||d.value&&d.value.destroyed?(j.forEach(D=>{D.props||(D.props={}),D.props.swiperRef=d}),j):p7(d,j,A)}return()=>{const{slides:j,slots:D}=jg(r,p,y);return lt(i,{ref:u,class:SI(s.value)},[D["container-start"],lt(a,{class:"swiper-wrapper"},[D["wrapper-start"],F(j),D["wrapper-end"]]),_I(t)&&[lt("div",{ref:v,class:"swiper-button-prev"}),lt("div",{ref:w,class:"swiper-button-next"})],TI(t)&&lt("div",{ref:k,class:"swiper-scrollbar"}),xI(t)&&lt("div",{ref:T,class:"swiper-pagination"}),D["container-end"]])}}},w7={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},zoom:{type:Boolean,default:void 0},virtualIndex:{type:[String,Number],default:void 0}},setup(t,e){let{slots:r}=e,n=!1;const{swiperRef:i}=t,a=vt(null),s=vt("swiper-slide");function o(c,u,d){u===a.value&&(s.value=d)}Ps(()=>{!i||!i.value||(i.value.on("_slideClass",o),n=!0)}),YS(()=>{n||!i||!i.value||(i.value.on("_slideClass",o),n=!0)}),c0(()=>{!a.value||!i||!i.value||i.value.destroyed&&s.value!=="swiper-slide"&&(s.value="swiper-slide")}),Mf(()=>{!i||!i.value||i.value.off("_slideClass",o)});const l=It(()=>({isActive:s.value.indexOf("swiper-slide-active")>=0||s.value.indexOf("swiper-slide-duplicate-active")>=0,isVisible:s.value.indexOf("swiper-slide-visible")>=0,isDuplicate:s.value.indexOf("swiper-slide-duplicate")>=0,isPrev:s.value.indexOf("swiper-slide-prev")>=0||s.value.indexOf("swiper-slide-duplicate-prev")>=0,isNext:s.value.indexOf("swiper-slide-next")>=0||s.value.indexOf("swiper-slide-duplicate-next")>=0}));return Xi("swiperSlide",l),()=>lt(t.tag,{class:SI(`${s.value}`),ref:a,"data-swiper-slide-index":t.virtualIndex},t.zoom?lt("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof t.zoom=="number"?t.zoom:void 0},r.default&&r.default(l.value)):r.default&&r.default(l.value))}};var Xh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function CI(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),e}var tc;typeof window!="undefined"?tc=window:typeof Xh!="undefined"?tc=Xh:typeof self!="undefined"?tc=self:tc={};var L=tc,_7={},x7=Object.freeze(Object.defineProperty({__proto__:null,default:_7},Symbol.toStringTag,{value:"Module"})),T7=CI(x7),ET=typeof Xh!="undefined"?Xh:typeof window!="undefined"?window:{},S7=T7,rc;typeof document!="undefined"?rc=document:(rc=ET["__GLOBAL_DOCUMENT_CACHE@4"],rc||(rc=ET["__GLOBAL_DOCUMENT_CACHE@4"]=S7));var ce=rc;function yi(){return yi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yi.apply(this,arguments)}var k7=Object.freeze(Object.defineProperty({__proto__:null,default:yi},Symbol.toStringTag,{value:"Module"})),dv={exports:{}};(function(t,e){function r(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return s[l];var u=String(l),d=n[u.toLowerCase()];if(d)return d;var d=i[u.toLowerCase()];if(d)return d;if(u.length===1)return u.charCodeAt(0)}r.isEventKey=function(c,u){if(c&&typeof c=="object"){var d=c.which||c.keyCode||c.charCode;if(d==null)return!1;if(typeof u=="string"){var h=n[u.toLowerCase()];if(h)return h===d;var h=i[u.toLowerCase()];if(h)return h===d}else if(typeof u=="number")return u===d;return!1}},e=t.exports=r;var n=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var s=e.names=e.title={};for(a in n)s[n[a]]=a;for(var o in i)n[o]=i[o]})(dv,dv.exports);var ze=dv.exports;function Ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eu(t,e){return eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},eu(t,e)}function ge(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,eu(t,e)}var E7=C7;function C7(t,e){var r,n=null;try{r=JSON.parse(t,e)}catch(i){n=i}return[n,r]}var Vy={exports:{}},A7=CI(k7),I7=O7,P7=Object.prototype.toString;function O7(t){if(!t)return!1;var e=P7.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window!="undefined"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}var D7=L,L7=function(e,r){return r===void 0&&(r=!1),function(n,i,a){if(n){e(n);return}if(i.statusCode>=400&&i.statusCode<=599){var s=a;if(r)if(D7.TextDecoder){var o=R7(i.headers&&i.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s});return}e(null,a)}};function R7(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,r){var n=r.split("="),i=n[0],a=n[1];return i.trim()==="charset"?a.trim():e},"utf-8")}var M7=L7,AI=L,N7=A7,j7=I7;tn.httpHandler=M7;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var F7=function(e){var r={};return e&&e.trim().split(`
`).forEach(function(n){var i=n.indexOf(":"),a=n.slice(0,i).trim().toLowerCase(),s=n.slice(i+1).trim();typeof r[a]=="undefined"?r[a]=s:Array.isArray(r[a])?r[a].push(s):r[a]=[r[a],s]}),r};Vy.exports=tn;Vy.exports.default=tn;tn.XMLHttpRequest=AI.XMLHttpRequest||$7;tn.XDomainRequest="withCredentials"in new tn.XMLHttpRequest?tn.XMLHttpRequest:AI.XDomainRequest;B7(["get","put","post","patch","head","delete"],function(t){tn[t==="delete"?"del":t]=function(e,r,n){return r=II(e,r,n),r.method=t.toUpperCase(),PI(r)}});function B7(t,e){for(var r=0;r<t.length;r++)e(t[r])}function U7(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function II(t,e,r){var n=t;return j7(e)?(r=e,typeof t=="string"&&(n={uri:t})):n=N7({},e,{uri:t}),n.callback=r,n}function tn(t,e,r){return e=II(t,e,r),PI(e)}function PI(t){if(typeof t.callback=="undefined")throw new Error("callback argument missing");var e=!1,r=function(A,E,I){e||(e=!0,t.callback(A,E,I))};function n(){o.readyState===4&&setTimeout(s,0)}function i(){var k=void 0;if(o.response?k=o.response:k=o.responseText||z7(o),w)try{k=JSON.parse(k)}catch{}return k}function a(k){return clearTimeout(v),k instanceof Error||(k=new Error(""+(k||"Unknown XMLHttpRequest Error"))),k.statusCode=0,r(k,T)}function s(){if(!c){var k;clearTimeout(v),t.useXDR&&o.status===void 0?k=200:k=o.status===1223?204:o.status;var A=T,E=null;return k!==0?(A={body:i(),statusCode:k,method:d,headers:{},url:u,rawRequest:o},o.getAllResponseHeaders&&(A.headers=F7(o.getAllResponseHeaders()))):E=new Error("Internal XMLHttpRequest Error"),r(E,A,A.body)}}var o=t.xhr||null;o||(t.cors||t.useXDR?o=new tn.XDomainRequest:o=new tn.XMLHttpRequest);var l,c,u=o.url=t.uri||t.url,d=o.method=t.method||"GET",h=t.body||t.data,p=o.headers=t.headers||{},y=!!t.sync,w=!1,v,T={body:void 0,headers:{},statusCode:0,method:d,url:u,rawRequest:o};if("json"in t&&t.json!==!1&&(w=!0,p.accept||p.Accept||(p.Accept="application/json"),d!=="GET"&&d!=="HEAD"&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(t.json===!0?h:t.json))),o.onreadystatechange=n,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){c=!0},o.ontimeout=a,o.open(d,u,!y,t.username,t.password),y||(o.withCredentials=!!t.withCredentials),!y&&t.timeout>0&&(v=setTimeout(function(){if(!c){c=!0,o.abort("timeout");var k=new Error("XMLHttpRequest timeout");k.code="ETIMEDOUT",a(k)}},t.timeout)),o.setRequestHeader)for(l in p)p.hasOwnProperty(l)&&o.setRequestHeader(l,p[l]);else if(t.headers&&!U7(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(o.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(o),o.send(h||null),o}function z7(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function $7(){}var OI=Vy.exports,DI={exports:{}},CT=ce,Hy=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function ni(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}ni.prototype=Hy(Error.prototype);ni.prototype.constructor=ni;ni.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function qy(t){function e(n,i,a,s){return(n|0)*3600+(i|0)*60+(a|0)+(s|0)/1e3}var r=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function _c(){this.values=Hy(null)}_c.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function ic(t,e,r,n){var i=n?t.split(n):[t];for(var a in i)if(typeof i[a]=="string"){var s=i[a].split(r);if(s.length===2){var o=s[0].trim(),l=s[1].trim();e(o,l)}}}function V7(t,e,r){var n=t;function i(){var o=qy(t);if(o===null)throw new ni(ni.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,l){var c=new _c;ic(o,function(u,d){switch(u){case"region":for(var h=r.length-1;h>=0;h--)if(r[h].id===d){c.set(u,r[h].region);break}break;case"vertical":c.alt(u,d,["rl","lr"]);break;case"line":var p=d.split(","),y=p[0];c.integer(u,y),c.percent(u,y)&&c.set("snapToLines",!1),c.alt(u,y,["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start","center","end"]);break;case"position":p=d.split(","),c.percent(u,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start","center","end"]);break;case"size":c.percent(u,d);break;case"align":c.alt(u,d,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");try{l.line=c.get("line","auto")}catch{}l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100);try{l.align=c.get("align","center")}catch{l.align=c.get("align","middle")}try{l.position=c.get("position","auto")}catch{l.position=c.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=c.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),t.substr(0,3)!=="-->")throw new ni(ni.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.substr(3),s(),e.endTime=i(),s(),a(t,e)}var Fg=CT.createElement&&CT.createElement("textarea"),H7={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},AT={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},q7={v:"title",lang:"lang"},IT={rt:"ruby"};function LI(t,e){function r(){if(!e)return null;function y(v){return e=e.substr(v.length),v}var w=e.match(/^([^<]*)(<[^>]*>?)?/);return y(w[1]?w[1]:w[2])}function n(y){return Fg.innerHTML=y,y=Fg.textContent,Fg.textContent="",y}function i(y,w){return!IT[w.localName]||IT[w.localName]===y.localName}function a(y,w){var v=H7[y];if(!v)return null;var T=t.document.createElement(v),k=q7[y];return k&&w&&(T[k]=w.trim()),T}for(var s=t.document.createElement("div"),o=s,l,c=[];(l=r())!==null;){if(l[0]==="<"){if(l[1]==="/"){c.length&&c[c.length-1]===l.substr(2).replace(">","")&&(c.pop(),o=o.parentNode);continue}var u=qy(l.substr(1,l.length-2)),d;if(u){d=t.document.createProcessingInstruction("timestamp",u),o.appendChild(d);continue}var h=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h||(d=a(h[1],h[3]),!d)||!i(o,d))continue;if(h[2]){var p=h[2].split(".");p.forEach(function(y){var w=/^bg_/.test(y),v=w?y.slice(3):y;if(AT.hasOwnProperty(v)){var T=w?"background-color":"color",k=AT[v];d.style[T]=k}}),d.className=p.join(" ")}c.push(h[1]),o.appendChild(d),o=d;continue}o.appendChild(t.document.createTextNode(n(l)))}return s}var PT=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function G7(t){for(var e=0;e<PT.length;e++){var r=PT[e];if(t>=r[0]&&t<=r[1])return!0}return!1}function W7(t){var e=[],r="",n;if(!t||!t.childNodes)return"ltr";function i(o,l){for(var c=l.childNodes.length-1;c>=0;c--)o.push(l.childNodes[c])}function a(o){if(!o||!o.length)return null;var l=o.pop(),c=l.textContent||l.innerText;if(c){var u=c.match(/^.*(\n|\r)/);return u?(o.length=0,u[0]):c}if(l.tagName==="ruby")return a(o);if(l.childNodes)return i(o,l),a(o)}for(i(e,t);r=a(e);)for(var s=0;s<r.length;s++)if(n=r.charCodeAt(s),G7(n))return"rtl";return"ltr"}function K7(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,r=e.textTrackList,n=0,i=0;i<r.length&&r[i]!==e;i++)r[i].mode==="showing"&&n++;return++n*-1}function Tp(){}Tp.prototype.applyStyles=function(t,e){e=e||this.div;for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])};Tp.prototype.formatStyle=function(t,e){return t===0?0:t+e};function Qh(t,e,r){Tp.call(this),this.cue=e,this.cueDiv=LI(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:W7(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var i=0;switch(e.positionAlign){case"start":i=e.position;break;case"center":i=e.position-e.size/2;break;case"end":i=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}Qh.prototype=Hy(Tp.prototype);Qh.prototype.constructor=Qh;function Rr(t){var e,r,n,i;if(t.div){r=t.div.offsetHeight,n=t.div.offsetWidth,i=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||r,this.bottom=t.bottom||i+(t.height||r),this.width=t.width||n,this.lineHeight=e!==void 0?e:t.lineHeight}Rr.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Rr.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};Rr.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};Rr.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};Rr.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};Rr.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),r=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),n=e*r;return n/(this.height*this.width)};Rr.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};Rr.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,r=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var i={left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||r};return i};function Y7(t,e,r,n){function i(v,T){for(var k,A=new Rr(v),E=1,I=0;I<T.length;I++){for(;v.overlapsOppositeAxis(r,T[I])||v.within(r)&&v.overlapsAny(n);)v.move(T[I]);if(v.within(r))return v;var F=v.intersectPercentage(r);E>F&&(k=new Rr(v),E=F),v=new Rr(A)}return k||A}var a=new Rr(e),s=e.cue,o=K7(s),l=[];if(s.snapToLines){var c;switch(s.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width";break}var u=a.lineHeight,d=u*Math.round(o),h=r[c]+u,p=l[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/u)*u),o<0&&(d+=s.vertical===""?r.height:r.width,l=l.reverse()),a.move(p,d)}else{var y=a.lineHeight/r.height*100;switch(s.lineAlign){case"center":o-=y/2;break;case"end":o-=y;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],a=new Rr(e)}var w=i(a,l);e.move(w.toCSSCompatValues(r))}function vl(){}vl.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};vl.convertCueToDOMTree=function(t,e){return!t||!e?null:LI(t,e)};var X7=.05,Q7="sans-serif",J7="1.5%";vl.processCues=function(t,e,r){if(!t||!e||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=t.document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=J7,r.appendChild(n);function i(u){for(var d=0;d<u.length;d++)if(u[d].hasBeenReset||!u[d].displayState)return!0;return!1}if(!i(e)){for(var a=0;a<e.length;a++)n.appendChild(e[a].displayState);return}var s=[],o=Rr.getSimpleBoxPosition(n),l=Math.round(o.height*X7*100)/100,c={font:l+"px "+Q7};(function(){for(var u,d,h=0;h<e.length;h++)d=e[h],u=new Qh(t,d,c),n.appendChild(u.div),Y7(t,u,o,s),d.displayState=u.div,s.push(Rr.getSimpleBoxPosition(u))})()};vl.Parser=function(t,e,r){r||(r=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]};vl.Parser.prototype={reportOrThrowError:function(t){if(t instanceof ni)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function r(){for(var u=e.buffer,d=0;d<u.length&&u[d]!=="\r"&&u[d]!==`
`;)++d;var h=u.substr(0,d);return u[d]==="\r"&&++d,u[d]===`
`&&++d,e.buffer=u.substr(d),h}function n(u){var d=new _c;if(ic(u,function(p,y){switch(p){case"id":d.set(p,y);break;case"width":d.percent(p,y);break;case"lines":d.integer(p,y);break;case"regionanchor":case"viewportanchor":var w=y.split(",");if(w.length!==2)break;var v=new _c;if(v.percent("x",w[0]),v.percent("y",w[1]),!v.has("x")||!v.has("y"))break;d.set(p+"X",v.get("x")),d.set(p+"Y",v.get("y"));break;case"scroll":d.alt(p,y,["up"]);break}},/=/,/\s/),d.has("id")){var h=new(e.vttjs.VTTRegion||e.window.VTTRegion);h.width=d.get("width",100),h.lines=d.get("lines",3),h.regionAnchorX=d.get("regionanchorX",0),h.regionAnchorY=d.get("regionanchorY",100),h.viewportAnchorX=d.get("viewportanchorX",0),h.viewportAnchorY=d.get("viewportanchorY",100),h.scroll=d.get("scroll",""),e.onregion&&e.onregion(h),e.regionList.push({id:d.get("id"),region:h})}}function i(u){var d=new _c;ic(u,function(h,p){switch(h){case"MPEGT":d.integer(h+"S",p);break;case"LOCA":d.set(h+"L",qy(p));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function a(u){u.match(/X-TIMESTAMP-MAP/)?ic(u,function(d,h){switch(d){case"X-TIMESTAMP-MAP":i(h);break}},/=/):ic(u,function(d,h){switch(d){case"Region":n(h);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=r();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new ni(ni.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:s=r(),e.state){case"HEADER":/:/.test(s)?a(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{V7(s,e.cue,e.regionList)}catch(u){e.reportOrThrowError(u),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var c=s.indexOf("-->")!==-1;if(!s||c&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(u){e.reportOrThrowError(u),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new ni(ni.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Z7=vl,eq="auto",tq={"":1,lr:1,rl:1},rq={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function iq(t){if(typeof t!="string")return!1;var e=tq[t.toLowerCase()];return e?t.toLowerCase():!1}function Bg(t){if(typeof t!="string")return!1;var e=rq[t.toLowerCase()];return e?t.toLowerCase():!1}function RI(t,e,r){this.hasBeenReset=!1;var n="",i=!1,a=t,s=e,o=r,l=null,c="",u=!0,d="auto",h="start",p="auto",y="auto",w=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(T){n=""+T}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(T){i=!!T}},startTime:{enumerable:!0,get:function(){return a},set:function(T){if(typeof T!="number")throw new TypeError("Start time must be set to a number.");a=T,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(T){if(typeof T!="number")throw new TypeError("End time must be set to a number.");s=T,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(T){o=""+T,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(T){l=T,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(T){var k=iq(T);if(k===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=k,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return u},set:function(T){u=!!T,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(T){if(typeof T!="number"&&T!==eq)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=T,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(T){var k=Bg(T);k?(h=k,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(T){if(T<0||T>100)throw new Error("Position must be between 0 and 100.");p=T,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return y},set:function(T){var k=Bg(T);k?(y=k,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return w},set:function(T){if(T<0||T>100)throw new Error("Size must be between 0 and 100.");w=T,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(T){var k=Bg(T);if(!k)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=k,this.hasBeenReset=!0}}}),this.displayState=void 0}RI.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var nq=RI,aq={"":!0,up:!0};function sq(t){if(typeof t!="string")return!1;var e=aq[t.toLowerCase()];return e?t.toLowerCase():!1}function jl(t){return typeof t=="number"&&t>=0&&t<=100}function oq(){var t=100,e=3,r=0,n=100,i=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(o){if(!jl(o))throw new Error("Width must be between 0 and 100.");t=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!jl(o))throw new Error("RegionAnchorX must be between 0 and 100.");n=o}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!jl(o))throw new Error("RegionAnchorY must be between 0 and 100.");r=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!jl(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!jl(o))throw new Error("ViewportAnchorX must be between 0 and 100.");i=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var l=sq(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=l}}})}var lq=oq,Fn=L,Ns=DI.exports={WebVTT:Z7,VTTCue:nq,VTTRegion:lq};Fn.vttjs=Ns;Fn.WebVTT=Ns.WebVTT;var cq=Ns.VTTCue,uq=Ns.VTTRegion,dq=Fn.VTTCue,hq=Fn.VTTRegion;Ns.shim=function(){Fn.VTTCue=cq,Fn.VTTRegion=uq};Ns.restore=function(){Fn.VTTCue=dq,Fn.VTTRegion=hq};Fn.VTTCue||Ns.shim();var OT=DI.exports;function fq(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function uh(t,e,r){return fq()?uh=Reflect.construct.bind():uh=function(i,a,s){var o=[null];o.push.apply(o,a);var l=Function.bind.apply(i,o),c=new l;return s&&eu(c,s.prototype),c},uh.apply(null,arguments)}function pq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eu(t,e)}var MI={exports:{}};(function(t,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):c;var p=o.parseURL(l);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var y=i.exec(p.path);p.netLoc=y[1],p.path=y[2]}p.netLoc&&!p.path&&(p.path="/");var w={scheme:p.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(w.netLoc=p.netLoc,h.path[0]!=="/"))if(!h.path)w.path=p.path,h.params||(w.params=p.params,h.query||(w.query=p.query));else{var v=p.path,T=v.substring(0,v.lastIndexOf("/")+1)+h.path;w.path=o.normalizePath(T)}return w.path===null&&(w.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(w)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(a,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=o})()})(MI);var DT=MI.exports,LT="http://example.com",Sp=function(e,r){if(/^[a-z]+:/i.test(r))return r;/^data:/.test(e)&&(e=L.location&&L.location.href||"");var n=typeof L.URL=="function",i=/^\/\//.test(e),a=!L.location&&!/\/\//i.test(e);if(n?e=new L.URL(e,L.location||LT):/\/\//i.test(e)||(e=DT.buildAbsoluteURL(L.location&&L.location.href||"",e)),n){var s=new URL(r,e);return a?s.href.slice(LT.length):i?s.href.slice(s.protocol.length):s.href}return DT.buildAbsoluteURL(e,r)},Gy=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var a=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(a,1),a>-1},e.trigger=function(n){var i=this.listeners[n];if(!!i)if(arguments.length===2)for(var a=i.length,s=0;s<a;++s)i[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=i.length,c=0;c<l;++c)i[c].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},t}(),gq=function(e){return L.atob?L.atob(e):Buffer.from(e,"base64").toString("binary")};function NI(t){for(var e=gq(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}/*! @name m3u8-parser @version 4.7.1 @license Apache-2.0 */var mq=function(t){ge(e,t);function e(){var n;return n=t.call(this)||this,n.buffer="",n}var r=e.prototype;return r.push=function(i){var a;for(this.buffer+=i,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},e}(Gy),vq=String.fromCharCode(9),Ug=function(e){var r=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return r[1]&&(n.length=parseInt(r[1],10)),r[2]&&(n.offset=parseInt(r[2],10)),n},yq=function(){var e="[^=]*",r='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+r+")";return new RegExp("(?:^|,)("+n+")")},Ti=function(e){for(var r=e.split(yq()),n={},i=r.length,a;i--;)r[i]!==""&&(a=/([^=]*)=(.*)/.exec(r[i]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),n[a[0]]=a[1]);return n},bq=function(t){ge(e,t);function e(){var n;return n=t.call(this)||this,n.customParsers=[],n.tagMappers=[],n}var r=e.prototype;return r.push=function(i){var a=this,s,o;if(i=i.trim(),i.length!==0){if(i[0]!=="#"){this.trigger("data",{type:"uri",uri:i});return}var l=this.tagMappers.reduce(function(c,u){var d=u(i);return d===i?c:c.concat([d])},[i]);l.forEach(function(c){for(var u=0;u<a.customParsers.length;u++)if(a.customParsers[u].call(a,c))return;if(c.indexOf("#EXT")!==0){a.trigger("data",{type:"comment",text:c.slice(1)});return}if(c=c.replace("\r",""),s=/^#EXTM3U/.exec(c),s){a.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(c),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),a.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),a.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(c),s){o=yi(Ug(s[1]),{type:"tag",tagType:"byterange"}),a.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(c),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(c),s){if(o={type:"tag",tagType:"map"},s[1]){var d=Ti(s[1]);d.URI&&(o.uri=d.URI),d.BYTERANGE&&(o.byterange=Ug(d.BYTERANGE))}a.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(c),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=Ti(s[1]),o.attributes.RESOLUTION){var h=o.attributes.RESOLUTION.split("x"),p={};h[0]&&(p.width=parseInt(h[0],10)),h[1]&&(p.height=parseInt(h[1],10)),o.attributes.RESOLUTION=p}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(c),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=Ti(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(c),s){a.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(c),s){a.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(c),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(c),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=Ti(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),a.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(c),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=Ti(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=Ti(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(vq)),a.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=Ti(s[1]),["DURATION"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),["INDEPENDENT","GAP"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=/YES/.test(o.attributes[y]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=Ug(o.attributes.BYTERANGE)),a.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=Ti(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=/YES/.test(o.attributes[y]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=Ti(s[1]),["PART-TARGET"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseFloat(o.attributes[y]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=Ti(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(y){if(o.attributes.hasOwnProperty(y)){o.attributes[y]=parseInt(o.attributes[y],10);var w=y==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[w]=o.attributes[y],delete o.attributes[y]}}),a.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=Ti(s[1]),["LAST-MSN","LAST-PART"].forEach(function(y){o.attributes.hasOwnProperty(y)&&(o.attributes[y]=parseInt(o.attributes[y],10))}),a.trigger("data",o);return}a.trigger("data",{type:"tag",data:c.slice(4)})})}},r.addParser=function(i){var a=this,s=i.expression,o=i.customType,l=i.dataParser,c=i.segment;typeof l!="function"&&(l=function(d){return d}),this.customParsers.push(function(u){var d=s.exec(u);if(d)return a.trigger("data",{type:"custom",data:l(u),customType:o,segment:c}),!0})},r.addTagMapper=function(i){var a=i.expression,s=i.map,o=function(c){return a.test(c)?s(c):c};this.tagMappers.push(o)},e}(Gy),wq=function(e){return e.toLowerCase().replace(/-(\w)/g,function(r){return r[1].toUpperCase()})},qs=function(e){var r={};return Object.keys(e).forEach(function(n){r[wq(n)]=e[n]}),r},zg=function(e){var r=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(!!r){var a="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",l=n&&n*3,c=i&&i*2;n&&!r.hasOwnProperty(s)&&(r[s]=l,this.trigger("info",{message:a+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&r[s]<l&&(this.trigger("warn",{message:a+" clamping HOLD-BACK ("+r[s]+") to targetDuration * 3 ("+l+")"}),r[s]=l),i&&!r.hasOwnProperty(o)&&(r[o]=i*3,this.trigger("info",{message:a+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+r[o]+")."})),i&&r[o]<c&&(this.trigger("warn",{message:a+" clamping PART-HOLD-BACK ("+r[o]+") to partTargetDuration * 2 ("+c+")."}),r[o]=c)}},_q=function(t){ge(e,t);function e(){var n;n=t.call(this)||this,n.lineStream=new mq,n.parseStream=new bq,n.lineStream.pipe(n.parseStream);var i=Ne(n),a=[],s={},o,l,c=!1,u=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",p=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var y=0,w=0;return n.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&l&&(s.key=l),!s.timeline&&typeof p=="number"&&(s.timeline=p),n.manifest.preloadSegment=s)}),n.parseStream.on("data",function(v){var T,k;({tag:function(){({version:function(){v.version&&(this.manifest.version=v.version)},"allow-cache":function(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var I={};"length"in v&&(s.byterange=I,I.length=v.length,"offset"in v||(v.offset=y)),"offset"in v&&(s.byterange=I,I.offset=v.offset),y=I.offset+I.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),v.duration>0&&(s.duration=v.duration),v.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(!v.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(v.attributes.METHOD==="NONE"){l=null;return}if(!v.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(v.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:v.attributes};return}if(v.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:v.attributes.URI};return}if(v.attributes.KEYFORMAT===h){var I=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(I.indexOf(v.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(v.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),v.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(v.attributes.KEYID&&v.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:NI(v.attributes.URI.split(",")[1])};return}v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},typeof v.attributes.IV!="undefined"&&(l.iv=v.attributes.IV)},"media-sequence":function(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number});return}this.manifest.mediaSequence=v.number},"discontinuity-sequence":function(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number});return}this.manifest.discontinuitySequence=v.number,p=v.number},"playlist-type":function(){if(!/VOD|EVENT/.test(v.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist});return}this.manifest.playlistType=v.playlistType},map:function(){o={},v.uri&&(o.uri=v.uri),v.byterange&&(o.byterange=v.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||d,!v.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),yi(s.attributes,v.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,!(v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var I=this.manifest.mediaGroups[v.attributes.TYPE];I[v.attributes["GROUP-ID"]]=I[v.attributes["GROUP-ID"]]||{},T=I[v.attributes["GROUP-ID"]],k={default:/yes/i.test(v.attributes.DEFAULT)},k.default?k.autoselect=!0:k.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(k.language=v.attributes.LANGUAGE),v.attributes.URI&&(k.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(k.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(k.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(k.forced=/yes/i.test(v.attributes.FORCED)),T[v.attributes.NAME]=k},discontinuity:function(){p+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){typeof this.manifest.dateTimeString=="undefined"&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),s.dateTimeString=v.dateTimeString,s.dateTimeObject=v.dateTimeObject},targetduration:function(){if(!isFinite(v.duration)||v.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration});return}this.manifest.targetDuration=v.duration,zg.call(this,this.manifest)},start:function(){if(!v.attributes||isNaN(v.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}},"cue-out":function(){s.cueOut=v.data},"cue-out-cont":function(){s.cueOutCont=v.data},"cue-in":function(){s.cueIn=v.data},skip:function(){this.manifest.skip=qs(v.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",v.attributes,["SKIPPED-SEGMENTS"])},part:function(){var I=this;c=!0;var F=this.manifest.segments.length,j=qs(v.attributes);s.parts=s.parts||[],s.parts.push(j),j.byterange&&(j.byterange.hasOwnProperty("offset")||(j.byterange.offset=w),w=j.byterange.offset+j.byterange.length);var D=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+D+" for segment #"+F,v.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(z,M){z.hasOwnProperty("lastPart")||I.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+M+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var I=this.manifest.serverControl=qs(v.attributes);I.hasOwnProperty("canBlockReload")||(I.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),zg.call(this,this.manifest),I.canSkipDateranges&&!I.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var I=this.manifest.segments.length,F=qs(v.attributes),j=F.type&&F.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(F),F.byterange&&(F.byterange.hasOwnProperty("offset")||(F.byterange.offset=j?w:0,j&&(w=F.byterange.offset+F.byterange.length)));var D=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+D+" for segment #"+I,v.attributes,["TYPE","URI"]),!!F.type)for(var z=0;z<s.preloadHints.length-1;z++){var M=s.preloadHints[z];!M.type||M.type===F.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+D+" for segment #"+I+" has the same TYPE "+F.type+" as preload hint #"+z})}},"rendition-report":function(){var I=qs(v.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(I);var F=this.manifest.renditionReports.length-1,j=["LAST-MSN","URI"];c&&j.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+F,v.attributes,j)},"part-inf":function(){this.manifest.partInf=qs(v.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",v.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),zg.call(this,this.manifest)}}[v.tagType]||u).call(i)},uri:function(){s.uri=v.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=p,o&&(s.map=o),w=0,s={}},comment:function(){},custom:function(){v.segment?(s.custom=s.custom||{},s.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(i)}),n}var r=e.prototype;return r.warnOnMissingAttributes_=function(i,a,s){var o=[];s.forEach(function(l){a.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+o.join(", ")})},r.push=function(i){this.lineStream.push(i)},r.end=function(){this.lineStream.push(`
`),this.trigger("end")},r.addParser=function(i){this.parseStream.addParser(i)},r.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e}(Gy),ps={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},xq=["video","audio","text"],RT=["Video","Audio","Text"],jI=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(r,n,i){var a=("00"+Number(n).toString(16)).slice(-2),s=("00"+Number(i).toString(16)).slice(-2);return"avc1."+a+"00"+s})},$i=function(e){e===void 0&&(e="");var r=e.split(","),n=[];return r.forEach(function(i){i=i.trim();var a;xq.forEach(function(s){var o=ps[s].exec(i.toLowerCase());if(!(!o||o.length<=1)){a=s;var l=i.substring(0,o[1].length),c=i.replace(l,"");n.push({type:l,details:c,mediaType:s})}}),a||n.push({type:i,details:"",mediaType:"unknown"})}),n},Tq=function(e,r){if(!e.mediaGroups.AUDIO||!r)return null;var n=e.mediaGroups.AUDIO[r];if(!n)return null;for(var i in n){var a=n[i];if(a.default&&a.playlists)return $i(a.playlists[0].attributes.CODECS)}return null},FI=function(e){return e===void 0&&(e=""),ps.audio.test(e.trim().toLowerCase())},Sq=function(e){return e===void 0&&(e=""),ps.text.test(e.trim().toLowerCase())},tu=function(e){if(!(!e||typeof e!="string")){var r=e.toLowerCase().split(",").map(function(a){return jI(a.trim())}),n="video";r.length===1&&FI(r[0])?n="audio":r.length===1&&Sq(r[0])&&(n="application");var i="mp4";return r.every(function(a){return ps.mp4.test(a)})?i="mp4":r.every(function(a){return ps.webm.test(a)})?i="webm":r.every(function(a){return ps.ogg.test(a)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},dh=function(e){return e===void 0&&(e=""),L.MediaSource&&L.MediaSource.isTypeSupported&&L.MediaSource.isTypeSupported(tu(e))||!1},$g=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(r){r=r.trim();for(var n=0;n<RT.length;n++){var i=RT[n];if(ps["muxer"+i].test(r))return!0}return!1})},MT="mp4a.40.2",kq="avc1.4d400d",Eq=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Cq=/^application\/dash\+xml/i,BI=function(e){return Eq.test(e)?"hls":Cq.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},Aq=function(e){return e.toString(2).length},Iq=function(e){return Math.ceil(Aq(e)/8)},UI=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Pq=function(e){return UI(e)},Ie=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!Pq(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},lr=L.BigInt||Number,hv=[lr("0x1"),lr("0x100"),lr("0x10000"),lr("0x1000000"),lr("0x100000000"),lr("0x10000000000"),lr("0x1000000000000"),lr("0x100000000000000"),lr("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var Oq=function(e,r){var n=r===void 0?{}:r,i=n.signed,a=i===void 0?!1:i,s=n.le,o=s===void 0?!1:s;e=Ie(e);var l=o?"reduce":"reduceRight",c=e[l]?e[l]:Array.prototype[l],u=c.call(e,function(h,p,y){var w=o?y:Math.abs(y+1-e.length);return h+lr(p)*hv[w]},lr(0));if(a){var d=hv[e.length]/lr(2)-lr(1);u=lr(u),u>d&&(u-=d,u-=d,u-=lr(2))}return Number(u)},Dq=function(e,r){var n=r===void 0?{}:r,i=n.le,a=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=lr(e);for(var s=Iq(e),o=new Uint8Array(new ArrayBuffer(s)),l=0;l<s;l++){var c=a?l:Math.abs(l+1-o.length);o[c]=Number(e/hv[l]&lr(255)),e<0&&(o[c]=Math.abs(~o[c]),o[c]-=l===0?1:2)}return o},zI=function(e,r){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;r||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},Lq=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r=r.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),r.length<=1)return Ie(r[0]);var i=r.reduce(function(o,l,c){return o+(l.byteLength||l.length)},0),a=new Uint8Array(i),s=0;return r.forEach(function(o){o=Ie(o),a.set(o,s),s+=o.byteLength}),a},Ct=function(e,r,n){var i=n===void 0?{}:n,a=i.offset,s=a===void 0?0:a,o=i.mask,l=o===void 0?[]:o;e=Ie(e),r=Ie(r);var c=r.every?r.every:Array.prototype.every;return r.length&&e.length-s>=r.length&&c.call(r,function(u,d){var h=l[d]?l[d]&e[s+d]:e[s+d];return u===h})},Rq=function(e,r,n){r.forEach(function(i){for(var a in e.mediaGroups[i])for(var s in e.mediaGroups[i][a]){var o=e.mediaGroups[i][a][s];n(o,i,a,s)}})},Oa={},Da={};function Mq(t,e,r){if(r===void 0&&(r=Array.prototype),t&&typeof r.find=="function")return r.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];if(e.call(void 0,i,n,t))return i}}function Wy(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}var $I=Wy({HTML:"text/html",isHTML:function(t){return t===$I.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),VI=Wy({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===VI.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Da.find=Mq;Da.freeze=Wy;Da.MIME_TYPE=$I;Da.NAMESPACE=VI;var HI=Da,rn=HI.find,ru=HI.NAMESPACE;function Nq(t){return t!==""}function jq(t){return t?t.split(/[\t\n\f\r ]+/).filter(Nq):[]}function Fq(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function NT(t){if(!t)return[];var e=jq(t);return Object.keys(e.reduce(Fq,{}))}function Bq(t){return function(e){return t&&t.indexOf(e)!==-1}}function Fu(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function Xr(t,e){var r=t.prototype;if(!(r instanceof e)){let n=function(){};n.prototype=e.prototype,n=new n,Fu(r,n),t.prototype=r=n}r.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),r.constructor=t)}var Qr={},Di=Qr.ELEMENT_NODE=1,Bo=Qr.ATTRIBUTE_NODE=2,Jh=Qr.TEXT_NODE=3,qI=Qr.CDATA_SECTION_NODE=4,GI=Qr.ENTITY_REFERENCE_NODE=5,Uq=Qr.ENTITY_NODE=6,WI=Qr.PROCESSING_INSTRUCTION_NODE=7,KI=Qr.COMMENT_NODE=8,YI=Qr.DOCUMENT_NODE=9,XI=Qr.DOCUMENT_TYPE_NODE=10,Bn=Qr.DOCUMENT_FRAGMENT_NODE=11,zq=Qr.NOTATION_NODE=12,Sr={},nr={};Sr.INDEX_SIZE_ERR=(nr[1]="Index size error",1);Sr.DOMSTRING_SIZE_ERR=(nr[2]="DOMString size error",2);var $r=Sr.HIERARCHY_REQUEST_ERR=(nr[3]="Hierarchy request error",3);Sr.WRONG_DOCUMENT_ERR=(nr[4]="Wrong document",4);Sr.INVALID_CHARACTER_ERR=(nr[5]="Invalid character",5);Sr.NO_DATA_ALLOWED_ERR=(nr[6]="No data allowed",6);Sr.NO_MODIFICATION_ALLOWED_ERR=(nr[7]="No modification allowed",7);var QI=Sr.NOT_FOUND_ERR=(nr[8]="Not found",8);Sr.NOT_SUPPORTED_ERR=(nr[9]="Not supported",9);var jT=Sr.INUSE_ATTRIBUTE_ERR=(nr[10]="Attribute in use",10);Sr.INVALID_STATE_ERR=(nr[11]="Invalid state",11);Sr.SYNTAX_ERR=(nr[12]="Syntax error",12);Sr.INVALID_MODIFICATION_ERR=(nr[13]="Invalid modification",13);Sr.NAMESPACE_ERR=(nr[14]="Invalid namespace",14);Sr.INVALID_ACCESS_ERR=(nr[15]="Invalid access",15);function Ft(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,nr[t]),this.message=nr[t],Error.captureStackTrace&&Error.captureStackTrace(this,Ft);return r.code=t,e&&(this.message=this.message+": "+e),r}Ft.prototype=Error.prototype;Fu(Sr,Ft);function Cn(){}Cn.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)lo(this[n],r,t,e);return r.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Uo(t,e){this._node=t,this._refresh=e,Ky(this)}function Ky(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var r=t._refresh(t._node);c2(t,"length",r.length),Fu(r,t),t._inc=e}}Uo.prototype.item=function(t){return Ky(this),this[t]};Xr(Uo,Cn);function Zh(){}function JI(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function FT(t,e,r,n){if(n?e[JI(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var i=t.ownerDocument;i&&(n&&t2(i,t,n),$q(i,t,r))}}function BT(t,e,r){var n=JI(e,r);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,t){var a=t.ownerDocument;a&&(t2(a,t,r),r.ownerElement=null)}}else throw new Ft(QI,new Error(t.tagName+"@"+r))}Zh.prototype={length:0,item:Cn.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Ft(jT);var r=this.getNamedItem(t.nodeName);return FT(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e=t.ownerElement,r;if(e&&e!=this._ownerElement)throw new Ft(jT);return r=this.getNamedItemNS(t.namespaceURI,t.localName),FT(this._ownerElement,this,t,r),r},removeNamedItem:function(t){var e=this.getNamedItem(t);return BT(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return BT(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function ZI(){}ZI.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var n=new Bu;if(n.implementation=this,n.childNodes=new Cn,n.doctype=r||null,r&&n.appendChild(r),e){var i=n.createElementNS(t,e);n.appendChild(i)}return n},createDocumentType:function(t,e,r){var n=new kp;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=r||"",n}};function dt(){}dt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return ef(this,t,e)},replaceChild:function(t,e){ef(this,t,e,i2),e&&this.removeChild(e)},removeChild:function(t){return r2(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return fv(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==Jh&&t.nodeType==Jh?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t)return n}e=e.nodeType==Bo?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&t in r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];e=e.nodeType==Bo?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function e2(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Fu(Qr,dt);Fu(Qr,dt.prototype);function iu(t,e){if(e(t))return!0;if(t=t.firstChild)do if(iu(t,e))return!0;while(t=t.nextSibling)}function Bu(){this.ownerDocument=this}function $q(t,e,r){t&&t._inc++;var n=r.namespaceURI;n===ru.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function t2(t,e,r,n){t&&t._inc++;var i=r.namespaceURI;i===ru.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function Yy(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var i=e.firstChild,a=0;i;)n[a++]=i,i=i.nextSibling;n.length=a,delete n[n.length]}}}function r2(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Yy(t.ownerDocument,t),e}function Vq(t){return t&&(t.nodeType===dt.DOCUMENT_NODE||t.nodeType===dt.DOCUMENT_FRAGMENT_NODE||t.nodeType===dt.ELEMENT_NODE)}function Hq(t){return t&&(nn(t)||Xy(t)||Un(t)||t.nodeType===dt.DOCUMENT_FRAGMENT_NODE||t.nodeType===dt.COMMENT_NODE||t.nodeType===dt.PROCESSING_INSTRUCTION_NODE)}function Un(t){return t&&t.nodeType===dt.DOCUMENT_TYPE_NODE}function nn(t){return t&&t.nodeType===dt.ELEMENT_NODE}function Xy(t){return t&&t.nodeType===dt.TEXT_NODE}function UT(t,e){var r=t.childNodes||[];if(rn(r,nn)||Un(e))return!1;var n=rn(r,Un);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function zT(t,e){var r=t.childNodes||[];function n(a){return nn(a)&&a!==e}if(rn(r,n))return!1;var i=rn(r,Un);return!(e&&i&&r.indexOf(i)>r.indexOf(e))}function qq(t,e,r){if(!Vq(t))throw new Ft($r,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new Ft(QI,"child not in parent");if(!Hq(e)||Un(e)&&t.nodeType!==dt.DOCUMENT_NODE)throw new Ft($r,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function Gq(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===dt.DOCUMENT_FRAGMENT_NODE){var a=i.filter(nn);if(a.length>1||rn(i,Xy))throw new Ft($r,"More than one element or text in fragment");if(a.length===1&&!UT(t,r))throw new Ft($r,"Element in fragment can not be inserted before doctype")}if(nn(e)&&!UT(t,r))throw new Ft($r,"Only one element can be added and only after doctype");if(Un(e)){if(rn(n,Un))throw new Ft($r,"Only one doctype is allowed");var s=rn(n,nn);if(r&&n.indexOf(s)<n.indexOf(r))throw new Ft($r,"Doctype can only be inserted before an element");if(!r&&s)throw new Ft($r,"Doctype can not be appended since element is present")}}function i2(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===dt.DOCUMENT_FRAGMENT_NODE){var a=i.filter(nn);if(a.length>1||rn(i,Xy))throw new Ft($r,"More than one element or text in fragment");if(a.length===1&&!zT(t,r))throw new Ft($r,"Element in fragment can not be inserted before doctype")}if(nn(e)&&!zT(t,r))throw new Ft($r,"Only one element can be added and only after doctype");if(Un(e)){if(rn(n,function(l){return Un(l)&&l!==r}))throw new Ft($r,"Only one doctype is allowed");var s=rn(n,nn);if(r&&n.indexOf(s)<n.indexOf(r))throw new Ft($r,"Doctype can only be inserted before an element")}}function ef(t,e,r,n){qq(t,e,r),t.nodeType===dt.DOCUMENT_NODE&&(n||Gq)(t,e,r);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===Bn){var a=e.firstChild;if(a==null)return e;var s=e.lastChild}else a=s=e;var o=r?r.previousSibling:t.lastChild;a.previousSibling=o,s.nextSibling=r,o?o.nextSibling=a:t.firstChild=a,r==null?t.lastChild=s:r.previousSibling=s;do a.parentNode=t;while(a!==s&&(a=a.nextSibling));return Yy(t.ownerDocument||t,t),e.nodeType==Bn&&(e.firstChild=e.lastChild=null),e}function Wq(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,Yy(t.ownerDocument,t,e),e}Bu.prototype={nodeName:"#document",nodeType:YI,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Bn){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return ef(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Di&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),r2(this,t)},replaceChild:function(t,e){ef(this,t,e,i2),t.ownerDocument=this,e&&this.removeChild(e),nn(t)&&(this.documentElement=t)},importNode:function(t,e){return l2(this,t,e)},getElementById:function(t){var e=null;return iu(this.documentElement,function(r){if(r.nodeType==Di&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=NT(t);return new Uo(this,function(r){var n=[];return e.length>0&&iu(r.documentElement,function(i){if(i!==r&&i.nodeType===Di){var a=i.getAttribute("class");if(a){var s=t===a;if(!s){var o=NT(a);s=e.every(Bq(o))}s&&n.push(i)}}}),n})},createElement:function(t){var e=new Es;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Cn;var r=e.attributes=new Zh;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new Ep;return t.ownerDocument=this,t.childNodes=new Cn,t},createTextNode:function(t){var e=new Qy;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Jy;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new Zy;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new tb;return r.ownerDocument=this,r.tagName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new tf;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new eb;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new Es,n=e.split(":"),i=r.attributes=new Zh;return r.childNodes=new Cn,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,i._ownerElement=r,r},createAttributeNS:function(t,e){var r=new tf,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}};Xr(Bu,dt);function Es(){this._nsMap={}}Es.prototype={nodeType:Di,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Bn?this.insertBefore(t,null):Wq(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Uo(this,function(e){var r=[];return iu(e,function(n){n!==e&&n.nodeType==Di&&(t==="*"||n.tagName==t)&&r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new Uo(this,function(r){var n=[];return iu(r,function(i){i!==r&&i.nodeType===Di&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};Bu.prototype.getElementsByTagName=Es.prototype.getElementsByTagName;Bu.prototype.getElementsByTagNameNS=Es.prototype.getElementsByTagNameNS;Xr(Es,dt);function tf(){}tf.prototype.nodeType=Bo;Xr(tf,dt);function Uu(){}Uu.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(nr[$r])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var n=this.data.substring(0,t),i=this.data.substring(t+e);r=n+r+i,this.nodeValue=this.data=r,this.length=r.length}};Xr(Uu,dt);function Qy(){}Qy.prototype={nodeName:"#text",nodeType:Jh,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Xr(Qy,Uu);function Jy(){}Jy.prototype={nodeName:"#comment",nodeType:KI};Xr(Jy,Uu);function Zy(){}Zy.prototype={nodeName:"#cdata-section",nodeType:qI};Xr(Zy,Uu);function kp(){}kp.prototype.nodeType=XI;Xr(kp,dt);function n2(){}n2.prototype.nodeType=zq;Xr(n2,dt);function a2(){}a2.prototype.nodeType=Uq;Xr(a2,dt);function eb(){}eb.prototype.nodeType=GI;Xr(eb,dt);function Ep(){}Ep.prototype.nodeName="#document-fragment";Ep.prototype.nodeType=Bn;Xr(Ep,dt);function tb(){}tb.prototype.nodeType=WI;Xr(tb,dt);function s2(){}s2.prototype.serializeToString=function(t,e,r){return o2.call(t,e,r)};dt.prototype.toString=o2;function o2(t,e){var r=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,a=n.namespaceURI;if(a&&i==null){var i=n.lookupPrefix(a);if(i==null)var s=[{namespace:a,prefix:null}]}return lo(this,r,t,e,s),r.join("")}function $T(t,e,r){var n=t.prefix||"",i=t.namespaceURI;if(!i||n==="xml"&&i===ru.XML||i===ru.XMLNS)return!1;for(var a=r.length;a--;){var s=r[a];if(s.prefix===n)return s.namespace!==i}return!0}function Vg(t,e,r){t.push(" ",e,'="',r.replace(/[<&"]/g,e2),'"')}function lo(t,e,r,n,i){if(i||(i=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Di:var a=t.attributes,s=a.length,T=t.firstChild,o=t.tagName;r=ru.isHTML(t.namespaceURI)||r;var l=o;if(!r&&!t.prefix&&t.namespaceURI){for(var c,u=0;u<a.length;u++)if(a.item(u).name==="xmlns"){c=a.item(u).value;break}if(!c)for(var d=i.length-1;d>=0;d--){var h=i[d];if(h.prefix===""&&h.namespace===t.namespaceURI){c=h.namespace;break}}if(c!==t.namespaceURI)for(var d=i.length-1;d>=0;d--){var h=i[d];if(h.namespace===t.namespaceURI){h.prefix&&(l=h.prefix+":"+o);break}}}e.push("<",l);for(var p=0;p<s;p++){var y=a.item(p);y.prefix=="xmlns"?i.push({prefix:y.localName,namespace:y.value}):y.nodeName=="xmlns"&&i.push({prefix:"",namespace:y.value})}for(var p=0;p<s;p++){var y=a.item(p);if($T(y,r,i)){var w=y.prefix||"",v=y.namespaceURI;Vg(e,w?"xmlns:"+w:"xmlns",v),i.push({prefix:w,namespace:v})}lo(y,e,r,n,i)}if(o===l&&$T(t,r,i)){var w=t.prefix||"",v=t.namespaceURI;Vg(e,w?"xmlns:"+w:"xmlns",v),i.push({prefix:w,namespace:v})}if(T||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),r&&/^script$/i.test(o))for(;T;)T.data?e.push(T.data):lo(T,e,r,n,i.slice()),T=T.nextSibling;else for(;T;)lo(T,e,r,n,i.slice()),T=T.nextSibling;e.push("</",l,">")}else e.push("/>");return;case YI:case Bn:for(var T=t.firstChild;T;)lo(T,e,r,n,i.slice()),T=T.nextSibling;return;case Bo:return Vg(e,t.name,t.value);case Jh:return e.push(t.data.replace(/[<&]/g,e2).replace(/]]>/g,"]]&gt;"));case qI:return e.push("<![CDATA[",t.data,"]]>");case KI:return e.push("<!--",t.data,"-->");case XI:var k=t.publicId,A=t.systemId;if(e.push("<!DOCTYPE ",t.name),k)e.push(" PUBLIC ",k),A&&A!="."&&e.push(" ",A),e.push(">");else if(A&&A!=".")e.push(" SYSTEM ",A,">");else{var E=t.internalSubset;E&&e.push(" [",E,"]"),e.push(">")}return;case WI:return e.push("<?",t.target," ",t.data,"?>");case GI:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function l2(t,e,r){var n;switch(e.nodeType){case Di:n=e.cloneNode(!1),n.ownerDocument=t;case Bn:break;case Bo:r=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,r)for(var i=e.firstChild;i;)n.appendChild(l2(t,i,r)),i=i.nextSibling;return n}function fv(t,e,r){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];typeof a!="object"&&a!=n[i]&&(n[i]=a)}switch(e.childNodes&&(n.childNodes=new Cn),n.ownerDocument=t,n.nodeType){case Di:var s=e.attributes,o=n.attributes=new Zh,l=s.length;o._ownerElement=n;for(var c=0;c<l;c++)n.setAttributeNode(fv(t,s.item(c),!0));break;case Bo:r=!0}if(r)for(var u=e.firstChild;u;)n.appendChild(fv(t,u,r)),u=u.nextSibling;return n}function c2(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Di:case Bn:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};Object.defineProperty(Uo.prototype,"length",{get:function(){return Ky(this),this.$$length}}),Object.defineProperty(dt.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Di:case Bn:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),c2=function(e,r,n){e["$$"+r]=n}}}catch{}Oa.DocumentType=kp;Oa.DOMException=Ft;Oa.DOMImplementation=ZI;Oa.Element=Es;Oa.Node=dt;Oa.NodeList=Cn;Oa.XMLSerializer=s2;var zu={},u2={};(function(t){var e=Da.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),t.entityMap=t.HTML_ENTITIES})(u2);var rb={},nu=Da.NAMESPACE,pv=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,VT=new RegExp("[\\-\\.0-9"+pv.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),HT=new RegExp("^"+pv.source+VT.source+"*(?::"+pv.source+VT.source+"*)?$"),Fl=0,ta=1,Gs=2,Bl=3,Ws=4,Ks=5,Ul=6,Bd=7;function zo(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,zo)}zo.prototype=new Error;zo.prototype.name=zo.name;function d2(){}d2.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),h2(e,e={}),Kq(t,e,r,n,this.errorHandler),n.endDocument()}};function Kq(t,e,r,n,i){function a(te){if(te>65535){te-=65536;var se=55296+(te>>10),le=56320+(te&1023);return String.fromCharCode(se,le)}else return String.fromCharCode(te)}function s(te){var se=te.slice(1,-1);return se in r?r[se]:se.charAt(0)==="#"?a(parseInt(se.substr(1).replace("x","0x"))):(i.error("entity not found:"+te),te)}function o(te){if(te>w){var se=t.substring(w,te).replace(/&#?\w+;/g,s);h&&l(w),n.characters(se,0,te-w),w=te}}function l(te,se){for(;te>=u&&(se=d.exec(t));)c=se.index,u=c+se[0].length,h.lineNumber++;h.columnNumber=te-c+1}for(var c=0,u=0,d=/.*(?:\r\n?|\n)|.*$/g,h=n.locator,p=[{currentNSMap:e}],y={},w=0;;){try{var v=t.indexOf("<",w);if(v<0){if(!t.substr(w).match(/^\s*$/)){var T=n.doc,k=T.createTextNode(t.substr(w));T.appendChild(k),n.currentElement=k}return}switch(v>w&&o(v),t.charAt(v+1)){case"/":var U=t.indexOf(">",v+3),A=t.substring(v+2,U).replace(/[ \t\n\r]+$/g,""),E=p.pop();U<0?(A=t.substring(v+2).replace(/[\s<].*/,""),i.error("end tag name: "+A+" is not complete:"+E.tagName),U=v+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),i.error("end tag name: "+A+" maybe not complete"),U=v+1+A.length);var I=E.localNSMap,F=E.tagName==A,j=F||E.tagName&&E.tagName.toLowerCase()==A.toLowerCase();if(j){if(n.endElement(E.uri,E.localName,A),I)for(var D in I)Object.prototype.hasOwnProperty.call(I,D)&&n.endPrefixMapping(D);F||i.fatalError("end tag name: "+A+" is not match the current start tagName:"+E.tagName)}else p.push(E);U++;break;case"?":h&&l(v),U=Zq(t,v,n);break;case"!":h&&l(v),U=Jq(t,v,n,i);break;default:h&&l(v);var z=new f2,M=p[p.length-1].currentNSMap,U=Yq(t,v,z,M,s,i),P=z.length;if(!z.closed&&Qq(t,U,z.tagName,y)&&(z.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),h&&P){for(var q=qT(h,{}),X=0;X<P;X++){var fe=z[X];l(fe.offset),fe.locator=qT(h,{})}n.locator=q,GT(z,n,M)&&p.push(z),n.locator=h}else GT(z,n,M)&&p.push(z);nu.isHTML(z.uri)&&!z.closed?U=Xq(t,U,z.tagName,s,n):U++}}catch(te){if(te instanceof zo)throw te;i.error("element parse error: "+te),U=-1}U>w?w=U:o(Math.max(v,w)+1)}}function qT(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function Yq(t,e,r,n,i,a){function s(h,p,y){r.attributeNames.hasOwnProperty(h)&&a.fatalError("Attribute "+h+" redefined"),r.addValue(h,p,y)}for(var o,l,c=++e,u=Fl;;){var d=t.charAt(c);switch(d){case"=":if(u===ta)o=t.slice(e,c),u=Bl;else if(u===Gs)u=Bl;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(u===Bl||u===ta)if(u===ta&&(a.warning('attribute value must after "="'),o=t.slice(e,c)),e=c+1,c=t.indexOf(d,e),c>0)l=t.slice(e,c).replace(/&#?\w+;/g,i),s(o,l,e-1),u=Ks;else throw new Error("attribute value no end '"+d+"' match");else if(u==Ws)l=t.slice(e,c).replace(/&#?\w+;/g,i),s(o,l,e),a.warning('attribute "'+o+'" missed start quot('+d+")!!"),e=c+1,u=Ks;else throw new Error('attribute value must after "="');break;case"/":switch(u){case Fl:r.setTagName(t.slice(e,c));case Ks:case Ul:case Bd:u=Bd,r.closed=!0;case Ws:case ta:case Gs:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),u==Fl&&r.setTagName(t.slice(e,c)),c;case">":switch(u){case Fl:r.setTagName(t.slice(e,c));case Ks:case Ul:case Bd:break;case Ws:case ta:l=t.slice(e,c),l.slice(-1)==="/"&&(r.closed=!0,l=l.slice(0,-1));case Gs:u===Gs&&(l=o),u==Ws?(a.warning('attribute "'+l+'" missed quot(")!'),s(o,l.replace(/&#?\w+;/g,i),e)):((!nu.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),s(l,l,e));break;case Bl:throw new Error("attribute value missed!!")}return c;case"\x80":d=" ";default:if(d<=" ")switch(u){case Fl:r.setTagName(t.slice(e,c)),u=Ul;break;case ta:o=t.slice(e,c),u=Gs;break;case Ws:var l=t.slice(e,c).replace(/&#?\w+;/g,i);a.warning('attribute "'+l+'" missed quot(")!!'),s(o,l,e);case Ks:u=Ul;break}else switch(u){case Gs:r.tagName,(!nu.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=c,u=ta;break;case Ks:a.warning('attribute space is required"'+o+'"!!');case Ul:u=ta,e=c;break;case Bl:u=Ws,e=c;break;case Bd:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function GT(t,e,r){for(var n=t.tagName,i=null,d=t.length;d--;){var a=t[d],s=a.qName,o=a.value,h=s.indexOf(":");if(h>0)var l=a.prefix=s.slice(0,h),c=s.slice(h+1),u=l==="xmlns"&&c;else c=s,l=null,u=s==="xmlns"&&"";a.localName=c,u!==!1&&(i==null&&(i={},h2(r,r={})),r[u]=i[u]=o,a.uri=nu.XMLNS,e.startPrefixMapping(u,o))}for(var d=t.length;d--;){a=t[d];var l=a.prefix;l&&(l==="xml"&&(a.uri=nu.XML),l!=="xmlns"&&(a.uri=r[l||""]))}var h=n.indexOf(":");h>0?(l=t.prefix=n.slice(0,h),c=t.localName=n.slice(h+1)):(l=null,c=t.localName=n);var p=t.uri=r[l||""];if(e.startElement(p,c,n,t),t.closed){if(e.endElement(p,c,n),i)for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.endPrefixMapping(l)}else return t.currentNSMap=r,t.localNSMap=i,!0}function Xq(t,e,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var a=t.indexOf("</"+r+">",e),s=t.substring(e+1,a);if(/[&<]/.test(s))return/^script$/i.test(r)?(i.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),a)}return e+1}function Qq(t,e,r,n){var i=n[r];return i==null&&(i=t.lastIndexOf("</"+r+">"),i<e&&(i=t.lastIndexOf("</"+r)),n[r]=i),i<e}function h2(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function Jq(t,e,r,n){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var a=t.indexOf("-->",e+4);return a>e?(r.comment(t,e+4,a-e-4),a+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var a=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,a-e-9),r.endCDATA(),a+3}var s=eG(t,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var l=s[1][0],c=!1,u=!1;o>3&&(/^public$/i.test(s[2][0])?(c=s[3][0],u=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(u=s[3][0]));var d=s[o-1];return r.startDTD(l,c,u),r.endDTD(),d.index+d[0].length}}return-1}function Zq(t,e,r){var n=t.indexOf("?>",e);if(n){var i=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return-1}function f2(){this.attributeNames={}}f2.prototype={setTagName:function(t){if(!HT.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!HT.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function eG(t,e){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);r=i.exec(t);)if(n.push(r),r[1])return n}rb.XMLReader=d2;rb.ParseError=zo;var tG=Da,ib=Oa,WT=u2,p2=rb,rG=ib.DOMImplementation,KT=tG.NAMESPACE,iG=p2.ParseError,nG=p2.XMLReader;function g2(t){this.options=t||{locator:{}}}g2.prototype.parseFromString=function(t,e){var r=this.options,n=new nG,i=r.domBuilder||new $u,a=r.errorHandler,s=r.locator,o=r.xmlns||{},l=/\/x?html?$/.test(e),c=l?WT.HTML_ENTITIES:WT.XML_ENTITIES;return s&&i.setDocumentLocator(s),n.errorHandler=aG(a,i,s),n.domBuilder=r.domBuilder||i,l&&(o[""]=KT.HTML),o.xml=o.xml||KT.XML,t&&typeof t=="string"?n.parse(t,o,c):n.errorHandler.error("invalid doc source"),i.doc};function aG(t,e,r){if(!t){if(e instanceof $u)return e;t=e}var n={},i=t instanceof Function;r=r||{};function a(s){var o=t[s];!o&&i&&(o=t.length==2?function(l){t(s,l)}:t),n[s]=o&&function(l){o("[xmldom "+s+"]	"+l+gv(r))}||function(){}}return a("warning"),a("error"),a("fatalError"),n}function $u(){this.cdata=!1}function Ys(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}$u.prototype={startDocument:function(){this.doc=new rG().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var i=this.doc,a=i.createElementNS(t,r||e),s=n.length;Ud(this,a),this.currentElement=a,this.locator&&Ys(this.locator,a);for(var o=0;o<s;o++){var t=n.getURI(o),l=n.getValue(o),r=n.getQName(o),c=i.createAttributeNS(t,r);this.locator&&Ys(n.getLocator(o),c),c.value=c.nodeValue=l,a.setAttributeNode(c)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&Ys(this.locator,r),Ud(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=YT.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&Ys(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=YT.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&Ys(this.locator,n),Ud(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(t,e,r);this.locator&&Ys(this.locator,i),Ud(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,gv(this.locator))},error:function(t){console.error("[xmldom error]	"+t,gv(this.locator))},fatalError:function(t){throw new iG(t,this.locator)}};function gv(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function YT(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){$u.prototype[t]=function(){return null}});function Ud(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}zu.__DOMHandler=$u;zu.DOMParser=g2;zu.DOMImplementation=ib.DOMImplementation;zu.XMLSerializer=ib.XMLSerializer;var sG=zu.DOMParser;/*! @name mpd-parser @version 0.21.1 @license Apache-2.0 */var XT=function(e){return!!e&&typeof e=="object"},Mr=function t(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(i,a){return typeof a!="object"||Object.keys(a).forEach(function(s){Array.isArray(i[s])&&Array.isArray(a[s])?i[s]=i[s].concat(a[s]):XT(i[s])&&XT(a[s])?i[s]=t(i[s],a[s]):i[s]=a[s]}),i},{})},m2=function(e){return Object.keys(e).map(function(r){return e[r]})},oG=function(e,r){for(var n=[],i=e;i<r;i++)n.push(i);return n},Cp=function(e){return e.reduce(function(r,n){return r.concat(n)},[])},v2=function(e){if(!e.length)return[];for(var r=[],n=0;n<e.length;n++)r.push(e[n]);return r},lG=function(e,r){return e.reduce(function(n,i,a){return i[r]&&n.push(a),n},[])},mv=function(e,r){for(var n=0;n<e.length;n++)if(r(e[n]))return n;return-1},cG=function(e,r){return m2(e.reduce(function(n,i){return i.forEach(function(a){n[r(a)]=a}),n},{}))},$o={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},au=function(e){var r=e.baseUrl,n=r===void 0?"":r,i=e.source,a=i===void 0?"":i,s=e.range,o=s===void 0?"":s,l=e.indexRange,c=l===void 0?"":l,u={uri:a,resolvedUri:Sp(n||"",a)};if(o||c){var d=o||c,h=d.split("-"),p=L.BigInt?L.BigInt(h[0]):parseInt(h[0],10),y=L.BigInt?L.BigInt(h[1]):parseInt(h[1],10);p<Number.MAX_SAFE_INTEGER&&typeof p=="bigint"&&(p=Number(p)),y<Number.MAX_SAFE_INTEGER&&typeof y=="bigint"&&(y=Number(y));var w;typeof y=="bigint"||typeof p=="bigint"?w=L.BigInt(y)-L.BigInt(p)+L.BigInt(1):w=y-p+1,typeof w=="bigint"&&w<Number.MAX_SAFE_INTEGER&&(w=Number(w)),u.byterange={length:w,offset:p}}return u},uG=function(e){var r;return typeof e.offset=="bigint"||typeof e.length=="bigint"?r=L.BigInt(e.offset)+L.BigInt(e.length)-L.BigInt(1):r=e.offset+e.length-1,e.offset+"-"+r},QT=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},dG={static:function(e){var r=e.duration,n=e.timescale,i=n===void 0?1:n,a=e.sourceDuration,s=e.periodDuration,o=QT(e.endNumber),l=r/i;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/l}:{start:0,end:a/l}},dynamic:function(e){var r=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,a=e.timescale,s=a===void 0?1:a,o=e.duration,l=e.periodStart,c=l===void 0?0:l,u=e.minimumUpdatePeriod,d=u===void 0?0:u,h=e.timeShiftBufferDepth,p=h===void 0?1/0:h,y=QT(e.endNumber),w=(r+n)/1e3,v=i+c,T=w+d,k=T-v,A=Math.ceil(k*s/o),E=Math.floor((w-v-p)*s/o),I=Math.floor((w-v)*s/o);return{start:Math.max(0,E),end:typeof y=="number"?y:Math.min(A,I)}}},hG=function(e){return function(r){var n=e.duration,i=e.timescale,a=i===void 0?1:i,s=e.periodStart,o=e.startNumber,l=o===void 0?1:o;return{number:l+r,duration:n/a,timeline:s,time:r*n}}},nb=function(e){var r=e.type,n=e.duration,i=e.timescale,a=i===void 0?1:i,s=e.periodDuration,o=e.sourceDuration,l=dG[r](e),c=l.start,u=l.end,d=oG(c,u).map(hG(e));if(r==="static"){var h=d.length-1,p=typeof s=="number"?s:o;d[h].duration=p-n/a*h}return d},y2=function(e){var r=e.baseUrl,n=e.initialization,i=n===void 0?{}:n,a=e.sourceDuration,s=e.indexRange,o=s===void 0?"":s,l=e.periodStart,c=e.presentationTime,u=e.number,d=u===void 0?0:u,h=e.duration;if(!r)throw new Error($o.NO_BASE_URL);var p=au({baseUrl:r,source:i.sourceURL,range:i.range}),y=au({baseUrl:r,source:r,indexRange:o});if(y.map=p,h){var w=nb(e);w.length&&(y.duration=w[0].duration,y.timeline=w[0].timeline)}else a&&(y.duration=a,y.timeline=l);return y.presentationTime=c||l,y.number=d,[y]},ab=function(e,r,n){var i=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,c=r.timescale,u=r.references.filter(function(z){return z.referenceType!==1}),d=[],h=e.endList?"static":"dynamic",p=e.sidx.timeline,y=p,w=e.mediaSequence||0,v;typeof r.firstOffset=="bigint"?v=L.BigInt(l)+r.firstOffset:v=l+r.firstOffset;for(var T=0;T<u.length;T++){var k=r.references[T],A=k.referencedSize,E=k.subsegmentDuration,I=void 0;typeof v=="bigint"?I=v+L.BigInt(A)-L.BigInt(1):I=v+A-1;var F=v+"-"+I,j={baseUrl:n,timescale:c,timeline:s,periodStart:p,presentationTime:y,number:w,duration:E,sourceDuration:a,indexRange:F,type:h},D=y2(j)[0];i&&(D.map=i),d.push(D),typeof v=="bigint"?v+=L.BigInt(A):v+=A,y+=E/c,w++}return e.segments=d,e},fG=["AUDIO","SUBTITLES"],pG=1/60,b2=function(e){return cG(e,function(r){var n=r.timeline;return n}).sort(function(r,n){return r.timeline>n.timeline?1:-1})},gG=function(e,r){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===r)return e[n];return null},JT=function(e){var r=[];return Rq(e,fG,function(n,i,a,s){r=r.concat(n.playlists||[])}),r},ZT=function(e){var r=e.playlist,n=e.mediaSequence;r.mediaSequence=n,r.segments.forEach(function(i,a){i.number=r.mediaSequence+a})},mG=function(e){var r=e.oldPlaylists,n=e.newPlaylists,i=e.timelineStarts;n.forEach(function(a){a.discontinuitySequence=mv(i,function(u){var d=u.timeline;return d===a.timeline});var s=gG(r,a.attributes.NAME);if(!!s&&!a.sidx){var o=a.segments[0],l=mv(s.segments,function(u){return Math.abs(u.presentationTime-o.presentationTime)<pG});if(l===-1){ZT({playlist:a,mediaSequence:s.mediaSequence+s.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),(!s.segments.length&&a.timeline>s.timeline||s.segments.length&&a.timeline>s.segments[s.segments.length-1].timeline)&&a.discontinuitySequence--;return}var c=s.segments[l];c.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),ZT({playlist:a,mediaSequence:s.segments[l].number})}})},vG=function(e){var r=e.oldManifest,n=e.newManifest,i=r.playlists.concat(JT(r)),a=n.playlists.concat(JT(n));return n.timelineStarts=b2([r.timelineStarts,n.timelineStarts]),mG({oldPlaylists:i,newPlaylists:a,timelineStarts:n.timelineStarts}),n},Ap=function(e){return e&&e.uri+"-"+uG(e.byterange)},Hg=function(e){var r=m2(e.reduce(function(n,i){var a=i.attributes.id+(i.attributes.lang||"");if(!n[a])n[a]=i,n[a].attributes.timelineStarts=[];else{if(i.segments){var s;i.segments[0]&&(i.segments[0].discontinuity=!0),(s=n[a].segments).push.apply(s,i.segments)}i.attributes.contentProtection&&(n[a].attributes.contentProtection=i.attributes.contentProtection)}return n[a].attributes.timelineStarts.push({start:i.attributes.periodStart,timeline:i.attributes.periodStart}),n},{}));return r.map(function(n){return n.discontinuityStarts=lG(n.segments||[],"discontinuity"),n})},sb=function(e,r){var n=Ap(e.sidx),i=n&&r[n]&&r[n].sidx;return i&&ab(e,i,e.sidx.resolvedUri),e},yG=function(e,r){if(r===void 0&&(r={}),!Object.keys(r).length)return e;for(var n in e)e[n]=sb(e[n],r);return e},bG=function(e,r){var n,i=e.attributes,a=e.segments,s=e.sidx,o=e.mediaSequence,l=e.discontinuitySequence,c=e.discontinuityStarts,u={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:l,discontinuityStarts:c,timelineStarts:i.timelineStarts,mediaSequence:o,segments:a};return i.contentProtection&&(u.contentProtection=i.contentProtection),s&&(u.sidx=s),r&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u},wG=function(e){var r,n=e.attributes,i=e.segments,a=e.mediaSequence,s=e.discontinuityStarts,o=e.discontinuitySequence;typeof i=="undefined"&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var l=(r={NAME:n.id,BANDWIDTH:n.bandwidth},r["PROGRAM-ID"]=1,r);return n.codecs&&(l.CODECS=n.codecs),{attributes:l,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:a,segments:i}},_G=function(e,r,n){r===void 0&&(r={}),n===void 0&&(n=!1);var i,a=e.reduce(function(o,l){var c=l.attributes.role&&l.attributes.role.value||"",u=l.attributes.lang||"",d=l.attributes.label||"main";if(u&&!l.attributes.label){var h=c?" ("+c+")":"";d=""+l.attributes.lang+h}o[d]||(o[d]={language:u,autoselect:!0,default:c==="main",playlists:[],uri:""});var p=sb(bG(l,n),r);return o[d].playlists.push(p),typeof i=="undefined"&&c==="main"&&(i=l,i.default=!0),o},{});if(!i){var s=Object.keys(a)[0];a[s].default=!0}return a},xG=function(e,r){return r===void 0&&(r={}),e.reduce(function(n,i){var a=i.attributes.lang||"text";return n[a]||(n[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),n[a].playlists.push(sb(wG(i),r)),n},{})},TG=function(e){return e.reduce(function(r,n){return n&&n.forEach(function(i){var a=i.channel,s=i.language;r[s]={autoselect:!1,default:!1,instreamId:a,language:s},i.hasOwnProperty("aspectRatio")&&(r[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(r[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(r[s]["3D"]=i["3D"])}),r},{})},SG=function(e){var r,n=e.attributes,i=e.segments,a=e.sidx,s=e.discontinuityStarts,o={attributes:(r={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:s,timelineStarts:n.timelineStarts,segments:i};return n.contentProtection&&(o.contentProtection=n.contentProtection),a&&(o.sidx=a),o},kG=function(e){var r=e.attributes;return r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video"},EG=function(e){var r=e.attributes;return r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio"},CG=function(e){var r=e.attributes;return r.mimeType==="text/vtt"||r.contentType==="text"},AG=function(e,r){e.forEach(function(n){n.mediaSequence=0,n.discontinuitySequence=mv(r,function(i){var a=i.timeline;return a===n.timeline}),n.segments&&n.segments.forEach(function(i,a){i.number=a})})},e1=function(e){return e?Object.keys(e).reduce(function(r,n){var i=e[n];return r.concat(i.playlists)},[]):[]},IG=function(e){var r,n=e.dashPlaylists,i=e.locations,a=e.sidxMapping,s=a===void 0?{}:a,o=e.previousManifest;if(!n.length)return{};var l=n[0].attributes,c=l.sourceDuration,u=l.type,d=l.suggestedPresentationDelay,h=l.minimumUpdatePeriod,p=Hg(n.filter(kG)).map(SG),y=Hg(n.filter(EG)),w=Hg(n.filter(CG)),v=n.map(function(j){return j.attributes.captionServices}).filter(Boolean),T={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:c,playlists:yG(p,s)};h>=0&&(T.minimumUpdatePeriod=h*1e3),i&&(T.locations=i),u==="dynamic"&&(T.suggestedPresentationDelay=d);var k=T.playlists.length===0,A=y.length?_G(y,s,k):null,E=w.length?xG(w,s):null,I=p.concat(e1(A),e1(E)),F=I.map(function(j){var D=j.timelineStarts;return D});return T.timelineStarts=b2(F),AG(I,T.timelineStarts),A&&(T.mediaGroups.AUDIO.audio=A),E&&(T.mediaGroups.SUBTITLES.subs=E),v.length&&(T.mediaGroups["CLOSED-CAPTIONS"].cc=TG(v)),o?vG({oldManifest:o,newManifest:T}):T},PG=function(e,r,n){var i=e.NOW,a=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,l=o===void 0?1:o,c=e.periodStart,u=c===void 0?0:c,d=e.minimumUpdatePeriod,h=d===void 0?0:d,p=(i+a)/1e3,y=s+u,w=p+h,v=w-y;return Math.ceil((v*l-r)/n)},w2=function(e,r){for(var n=e.type,i=e.minimumUpdatePeriod,a=i===void 0?0:i,s=e.media,o=s===void 0?"":s,l=e.sourceDuration,c=e.timescale,u=c===void 0?1:c,d=e.startNumber,h=d===void 0?1:d,p=e.periodStart,y=[],w=-1,v=0;v<r.length;v++){var T=r[v],k=T.d,A=T.r||0,E=T.t||0;w<0&&(w=E),E&&E>w&&(w=E);var I=void 0;if(A<0){var F=v+1;F===r.length?n==="dynamic"&&a>0&&o.indexOf("$Number$")>0?I=PG(e,w,k):I=(l*u-w)/k:I=(r[F].t-w)/k}else I=A+1;for(var j=h+y.length+I,D=h+y.length;D<j;)y.push({number:D,duration:k/u,time:w,timeline:p}),w+=k,D++}return y},OG=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,DG=function(e){return function(r,n,i,a){if(r==="$$")return"$";if(typeof e[n]=="undefined")return r;var s=""+e[n];return n==="RepresentationID"||(i?a=parseInt(a,10):a=1,s.length>=a)?s:""+new Array(a-s.length+1).join("0")+s}},t1=function(e,r){return e.replace(OG,DG(r))},LG=function(e,r){return!e.duration&&!r?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?nb(e):w2(e,r)},RG=function(e,r){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,a=i===void 0?{sourceURL:"",range:""}:i,s=au({baseUrl:e.baseUrl,source:t1(a.sourceURL,n),range:a.range}),o=LG(e,r);return o.map(function(l){n.Number=l.number,n.Time=l.time;var c=t1(e.media||"",n),u=e.timescale||1,d=e.presentationTimeOffset||0,h=e.periodStart+(l.time-d)/u,p={uri:c,timeline:l.timeline,duration:l.duration,resolvedUri:Sp(e.baseUrl||"",c),map:s,number:l.number,presentationTime:h};return p})},MG=function(e,r){var n=e.baseUrl,i=e.initialization,a=i===void 0?{}:i,s=au({baseUrl:n,source:a.sourceURL,range:a.range}),o=au({baseUrl:n,source:r.media,range:r.mediaRange});return o.map=s,o},NG=function(e,r){var n=e.duration,i=e.segmentUrls,a=i===void 0?[]:i,s=e.periodStart;if(!n&&!r||n&&r)throw new Error($o.SEGMENT_TIME_UNSPECIFIED);var o=a.map(function(u){return MG(e,u)}),l;n&&(l=nb(e)),r&&(l=w2(e,r));var c=l.map(function(u,d){if(o[d]){var h=o[d],p=e.timescale||1,y=e.presentationTimeOffset||0;return h.timeline=u.timeline,h.duration=u.duration,h.number=u.number,h.presentationTime=s+(u.time-y)/p,h}}).filter(function(u){return u});return c},jG=function(e){var r=e.attributes,n=e.segmentInfo,i,a;n.template?(a=RG,i=Mr(r,n.template)):n.base?(a=y2,i=Mr(r,n.base)):n.list&&(a=NG,i=Mr(r,n.list));var s={attributes:r};if(!a)return s;var o=a(i,n.segmentTimeline);if(i.duration){var l=i,c=l.duration,u=l.timescale,d=u===void 0?1:u;i.duration=c/d}else o.length?i.duration=o.reduce(function(h,p){return Math.max(h,Math.ceil(p.duration))},0):i.duration=0;return s.attributes=i,s.segments=o,n.base&&i.indexRange&&(s.sidx=o[0],s.segments=[]),s},FG=function(e){return e.map(jG)},Nt=function(e,r){return v2(e.childNodes).filter(function(n){var i=n.tagName;return i===r})},ob=function(e){return e.textContent.trim()},Xs=function(e){var r=31536e3,n=30*24*60*60,i=24*60*60,a=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(e);if(!l)return 0;var c=l.slice(1),u=c[0],d=c[1],h=c[2],p=c[3],y=c[4],w=c[5];return parseFloat(u||0)*r+parseFloat(d||0)*n+parseFloat(h||0)*i+parseFloat(p||0)*a+parseFloat(y||0)*s+parseFloat(w||0)},BG=function(e){var r=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return r.test(e)&&(e+="Z"),Date.parse(e)},r1={mediaPresentationDuration:function(e){return Xs(e)},availabilityStartTime:function(e){return BG(e)/1e3},minimumUpdatePeriod:function(e){return Xs(e)},suggestedPresentationDelay:function(e){return Xs(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Xs(e)},start:function(e){return Xs(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var r=parseInt(e,10);return isNaN(r)?Xs(e):r},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},gr=function(e){return e&&e.attributes?v2(e.attributes).reduce(function(r,n){var i=r1[n.name]||r1.DEFAULT;return r[n.name]=i(n.value),r},{}):{}},UG={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ip=function(e,r){return r.length?Cp(e.map(function(n){return r.map(function(i){return Sp(n,ob(i))})})):e},lb=function(e){var r=Nt(e,"SegmentTemplate")[0],n=Nt(e,"SegmentList")[0],i=n&&Nt(n,"SegmentURL").map(function(h){return Mr({tag:"SegmentURL"},gr(h))}),a=Nt(e,"SegmentBase")[0],s=n||r,o=s&&Nt(s,"SegmentTimeline")[0],l=n||a||r,c=l&&Nt(l,"Initialization")[0],u=r&&gr(r);u&&c?u.initialization=c&&gr(c):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var d={template:u,segmentTimeline:o&&Nt(o,"S").map(function(h){return gr(h)}),list:n&&Mr(gr(n),{segmentUrls:i,initialization:gr(c)}),base:a&&Mr(gr(a),{initialization:gr(c)})};return Object.keys(d).forEach(function(h){d[h]||delete d[h]}),d},zG=function(e,r,n){return function(i){var a=Nt(i,"BaseURL"),s=Ip(r,a),o=Mr(e,gr(i)),l=lb(i);return s.map(function(c){return{segmentInfo:Mr(n,l),attributes:Mr(o,{baseUrl:c})}})}},$G=function(e){return e.reduce(function(r,n){var i=gr(n);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var a=UG[i.schemeIdUri];if(a){r[a]={attributes:i};var s=Nt(n,"cenc:pssh")[0];if(s){var o=ob(s);r[a].pssh=o&&NI(o)}}return r},{})},VG=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var r=typeof e.value!="string"?[]:e.value.split(";");return r.map(function(i){var a,s;if(s=i,/^CC\d=/.test(i)){var o=i.split("=");a=o[0],s=o[1]}else/^CC\d$/.test(i)&&(a=i);return{channel:a,language:s}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var n=typeof e.value!="string"?[]:e.value.split(";");return n.map(function(i){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var s=i.split("="),o=s[0],l=s[1],c=l===void 0?"":l;a.channel=o,a.language=i,c.split(",").forEach(function(u){var d=u.split(":"),h=d[0],p=d[1];h==="lang"?a.language=p:h==="er"?a.easyReader=Number(p):h==="war"?a.aspectRatio=Number(p):h==="3D"&&(a["3D"]=Number(p))})}else a.language=i;return a.channel&&(a.channel="SERVICE"+a.channel),a})}},HG=function(e,r,n){return function(i){var a=gr(i),s=Ip(r,Nt(i,"BaseURL")),o=Nt(i,"Role")[0],l={role:gr(o)},c=Mr(e,a,l),u=Nt(i,"Accessibility")[0],d=VG(gr(u));d&&(c=Mr(c,{captionServices:d}));var h=Nt(i,"Label")[0];if(h&&h.childNodes.length){var p=h.childNodes[0].nodeValue.trim();c=Mr(c,{label:p})}var y=$G(Nt(i,"ContentProtection"));Object.keys(y).length&&(c=Mr(c,{contentProtection:y}));var w=lb(i),v=Nt(i,"Representation"),T=Mr(n,w);return Cp(v.map(zG(c,s,T)))}},qG=function(e,r){return function(n,i){var a=Ip(r,Nt(n.node,"BaseURL")),s=Mr(e,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(s.periodDuration=n.attributes.duration);var o=Nt(n.node,"AdaptationSet"),l=lb(n.node);return Cp(o.map(HG(s,a,l)))}},GG=function(e){var r=e.attributes,n=e.priorPeriodAttributes,i=e.mpdType;return typeof r.start=="number"?r.start:n&&typeof n.start=="number"&&typeof n.duration=="number"?n.start+n.duration:!n&&i==="static"?0:null},WG=function(e,r){r===void 0&&(r={});var n=r,i=n.manifestUri,a=i===void 0?"":i,s=n.NOW,o=s===void 0?Date.now():s,l=n.clientOffset,c=l===void 0?0:l,u=Nt(e,"Period");if(!u.length)throw new Error($o.INVALID_NUMBER_OF_PERIOD);var d=Nt(e,"Location"),h=gr(e),p=Ip([a],Nt(e,"BaseURL"));h.type=h.type||"static",h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=o,h.clientOffset=c,d.length&&(h.locations=d.map(ob));var y=[];return u.forEach(function(w,v){var T=gr(w),k=y[v-1];T.start=GG({attributes:T,priorPeriodAttributes:k?k.attributes:null,mpdType:h.type}),y.push({node:w,attributes:T})}),{locations:h.locations,representationInfo:Cp(y.map(qG(h,p)))}},_2=function(e){if(e==="")throw new Error($o.DASH_EMPTY_MANIFEST);var r=new sG,n,i;try{n=r.parseFromString(e,"application/xml"),i=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error($o.DASH_INVALID_XML);return i},KG=function(e){var r=Nt(e,"UTCTiming")[0];if(!r)return null;var n=gr(r);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error($o.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},YG=function(e,r){r===void 0&&(r={});var n=WG(_2(e),r),i=FG(n.representationInfo);return IG({dashPlaylists:i,locations:n.locations,sidxMapping:r.sidxMapping,previousManifest:r.previousManifest})},XG=function(e){return KG(_2(e))},x2=Math.pow(2,32),QG=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r;return e.getBigUint64?(r=e.getBigUint64(0),r<Number.MAX_SAFE_INTEGER?Number(r):r):e.getUint32(0)*x2+e.getUint32(4)},JG={getUint64:QG,MAX_UINT32:x2},i1=JG.getUint64,ZG=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;r.version===0?(r.earliestPresentationTime=e.getUint32(n),r.firstOffset=e.getUint32(n+4),n+=8):(r.earliestPresentationTime=i1(t.subarray(n)),r.firstOffset=i1(t.subarray(n+8)),n+=16),n+=2;var i=e.getUint16(n);for(n+=2;i>0;n+=12,i--)r.references.push({referenceType:(t[n]&128)>>>7,referencedSize:e.getUint32(n)&2147483647,subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(t[n+8]&128),sapType:(t[n+8]&112)>>>4,sapDeltaTime:e.getUint32(n+8)&268435455});return r},e9=ZG,t9=Ie([73,68,51]),r9=function(e,r){r===void 0&&(r=0),e=Ie(e);var n=e[r+5],i=e[r+6]<<21|e[r+7]<<14|e[r+8]<<7|e[r+9],a=(n&16)>>4;return a?i+20:i+10},nc=function t(e,r){return r===void 0&&(r=0),e=Ie(e),e.length-r<10||!Ct(e,t9,{offset:r})?r:(r+=r9(e,r),t(e,r))},n1=function(e){return typeof e=="string"?zI(e):e},i9=function(e){return Array.isArray(e)?e.map(function(r){return n1(r)}):[n1(e)]},n9=function t(e,r,n){n===void 0&&(n=!1),r=i9(r),e=Ie(e);var i=[];if(!r.length)return i;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var l=a+s;if(l>e.length){if(n)break;l=e.length}var c=e.subarray(a+8,l);Ct(o,r[0])&&(r.length===1?i.push(c):i.push.apply(i,t(c,r.slice(1),n))),a=l}return i},zd={EBML:Ie([26,69,223,163]),DocType:Ie([66,130]),Segment:Ie([24,83,128,103]),SegmentInfo:Ie([21,73,169,102]),Tracks:Ie([22,84,174,107]),Track:Ie([174]),TrackNumber:Ie([215]),DefaultDuration:Ie([35,227,131]),TrackEntry:Ie([174]),TrackType:Ie([131]),FlagDefault:Ie([136]),CodecID:Ie([134]),CodecPrivate:Ie([99,162]),VideoTrack:Ie([224]),AudioTrack:Ie([225]),Cluster:Ie([31,67,182,117]),Timestamp:Ie([231]),TimestampScale:Ie([42,215,177]),BlockGroup:Ie([160]),BlockDuration:Ie([155]),Block:Ie([161]),SimpleBlock:Ie([163])},vv=[128,64,32,16,8,4,2,1],a9=function(e){for(var r=1,n=0;n<vv.length&&!(e&vv[n]);n++)r++;return r},rf=function(e,r,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var a=a9(e[r]),s=e.subarray(r,r+a);return n&&(s=Array.prototype.slice.call(e,r,r+a),s[0]^=vv[a-1]),{length:a,value:Oq(s,{signed:i}),bytes:s}},a1=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(r){return t(r)}):typeof e=="number"?Dq(e):e},s9=function(e){return Array.isArray(e)?e.map(function(r){return a1(r)}):[a1(e)]},o9=function t(e,r,n){if(n>=r.length)return r.length;var i=rf(r,n,!1);if(Ct(e.bytes,i.bytes))return n;var a=rf(r,n+i.length);return t(e,r,n+a.length+a.value+i.length)},s1=function t(e,r){r=s9(r),e=Ie(e);var n=[];if(!r.length)return n;for(var i=0;i<e.length;){var a=rf(e,i,!1),s=rf(e,i+a.length),o=i+a.length+s.length;s.value===127&&(s.value=o9(a,e,o),s.value!==e.length&&(s.value-=o));var l=o+s.value>e.length?e.length:o+s.value,c=e.subarray(o,l);Ct(r[0],a.bytes)&&(r.length===1?n.push(c):n=n.concat(t(c,r.slice(1))));var u=a.length+s.length+c.length;i+=u}return n},l9=Ie([0,0,0,1]),c9=Ie([0,0,1]),u9=Ie([0,0,3]),d9=function(e){for(var r=[],n=1;n<e.length-2;)Ct(e.subarray(n,n+3),u9)&&(r.push(n+2),n++),n++;if(r.length===0)return e;var i=e.length-r.length,a=new Uint8Array(i),s=0;for(n=0;n<i;s++,n++)s===r[0]&&(s++,r.shift()),a[n]=e[s];return a},T2=function(e,r,n,i){i===void 0&&(i=1/0),e=Ie(e),n=[].concat(n);for(var a=0,s,o=0;a<e.length&&(o<i||s);){var l=void 0;if(Ct(e.subarray(a),l9)?l=4:Ct(e.subarray(a),c9)&&(l=3),!l){a++;continue}if(o++,s)return d9(e.subarray(s,a));var c=void 0;r==="h264"?c=e[a+l]&31:r==="h265"&&(c=e[a+l]>>1&63),n.indexOf(c)!==-1&&(s=a+l),a+=l+(r==="h264"?1:2)}return e.subarray(0,0)},h9=function(e,r,n){return T2(e,"h264",r,n)},f9=function(e,r,n){return T2(e,"h265",r,n)},Pr={webm:Ie([119,101,98,109]),matroska:Ie([109,97,116,114,111,115,107,97]),flac:Ie([102,76,97,67]),ogg:Ie([79,103,103,83]),ac3:Ie([11,119]),riff:Ie([82,73,70,70]),avi:Ie([65,86,73]),wav:Ie([87,65,86,69]),"3gp":Ie([102,116,121,112,51,103]),mp4:Ie([102,116,121,112]),fmp4:Ie([115,116,121,112]),mov:Ie([102,116,121,112,113,116]),moov:Ie([109,111,111,118]),moof:Ie([109,111,111,102])},Vo={aac:function(e){var r=nc(e);return Ct(e,[255,16],{offset:r,mask:[255,22]})},mp3:function(e){var r=nc(e);return Ct(e,[255,2],{offset:r,mask:[255,6]})},webm:function(e){var r=s1(e,[zd.EBML,zd.DocType])[0];return Ct(r,Pr.webm)},mkv:function(e){var r=s1(e,[zd.EBML,zd.DocType])[0];return Ct(r,Pr.matroska)},mp4:function(e){if(Vo["3gp"](e)||Vo.mov(e))return!1;if(Ct(e,Pr.mp4,{offset:4})||Ct(e,Pr.fmp4,{offset:4})||Ct(e,Pr.moof,{offset:4})||Ct(e,Pr.moov,{offset:4}))return!0},mov:function(e){return Ct(e,Pr.mov,{offset:4})},"3gp":function(e){return Ct(e,Pr["3gp"],{offset:4})},ac3:function(e){var r=nc(e);return Ct(e,Pr.ac3,{offset:r})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var r=0;r+188<e.length&&r<188;){if(e[r]===71&&e[r+188]===71)return!0;r+=1}return!1},flac:function(e){var r=nc(e);return Ct(e,Pr.flac,{offset:r})},ogg:function(e){return Ct(e,Pr.ogg)},avi:function(e){return Ct(e,Pr.riff)&&Ct(e,Pr.avi,{offset:8})},wav:function(e){return Ct(e,Pr.riff)&&Ct(e,Pr.wav,{offset:8})},h264:function(e){return h9(e,7,3).length},h265:function(e){return f9(e,[32,33],3).length}},yv=Object.keys(Vo).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);yv.forEach(function(t){var e=Vo[t];Vo[t]=function(r){return e(Ie(r))}});var p9=Vo,cb=function(e){e=Ie(e);for(var r=0;r<yv.length;r++){var n=yv[r];if(p9[n](e))return n}return""},g9=function(e){return n9(e,["moof"]).length>0},ub=9e4,db,hb,Pp,fb,S2,k2,E2;db=function(t){return t*ub};hb=function(t,e){return t*e};Pp=function(t){return t/ub};fb=function(t,e){return t/e};S2=function(t,e){return db(fb(t,e))};k2=function(t,e){return hb(Pp(t),e)};E2=function(t,e,r){return Pp(r?t:t-e)};var nf={ONE_SECOND_IN_TS:ub,secondsToVideoTs:db,secondsToAudioTs:hb,videoTsToSeconds:Pp,audioTsToSeconds:fb,audioTsToVideoTs:S2,videoTsToAudioTs:k2,metadataTsToSeconds:E2};/**
 * @license
 * Video.js 7.20.3 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var C2="7.20.3",wn={},Sa=function(e,r){return wn[e]=wn[e]||[],r&&(wn[e]=wn[e].concat(r)),wn[e]},m9=function(e,r){Sa(e,r)},A2=function(e,r){var n=Sa(e).indexOf(r);return n<=-1?!1:(wn[e]=wn[e].slice(),wn[e].splice(n,1),!0)},v9=function(e,r){Sa(e,[].concat(r).map(function(n){var i=function a(){return A2(e,a),n.apply(void 0,arguments)};return i}))},af={prefixed:!0},hh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],o1=hh[0],ac;for(var $d=0;$d<hh.length;$d++)if(hh[$d][1]in ce){ac=hh[$d];break}if(ac){for(var Vd=0;Vd<ac.length;Vd++)af[o1[Vd]]=ac[Vd];af.prefixed=ac[0]!==o1[0]}var zr=[],y9=function(e,r){return function(n,i,a){var s=r.levels[i],o=new RegExp("^("+s+")$");if(n!=="log"&&a.unshift(n.toUpperCase()+":"),a.unshift(e+":"),zr){zr.push([].concat(a));var l=zr.length-1e3;zr.splice(0,l>0?l:0)}if(!!L.console){var c=L.console[n];!c&&n==="debug"&&(c=L.console.info||L.console.log),!(!c||!s||!o.test(n))&&c[Array.isArray(a)?"apply":"call"](L.console,a)}}};function I2(t){var e="info",r,n=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];r("log",e,s)};return r=y9(t,n),n.createLogger=function(i){return I2(t+": "+i)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(i){if(typeof i=="string"){if(!n.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');e=i}return e},n.history=function(){return zr?[].concat(zr):[]},n.history.filter=function(i){return(zr||[]).filter(function(a){return new RegExp(".*"+i+".*").test(a[0])})},n.history.clear=function(){zr&&(zr.length=0)},n.history.disable=function(){zr!==null&&(zr.length=0,zr=null)},n.history.enable=function(){zr===null&&(zr=[])},n.error=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("error",e,a)},n.warn=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("warn",e,a)},n.debug=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("debug",e,a)},n}var Xe=I2("VIDEOJS"),P2=Xe.createLogger,b9=Object.prototype.toString,O2=function(e){return zn(e)?Object.keys(e):[]};function xo(t,e){O2(t).forEach(function(r){return e(t[r],r)})}function w9(t,e,r){return r===void 0&&(r=0),O2(t).reduce(function(n,i){return e(n,t[i],i)},r)}function Ot(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Object.assign?yi.apply(void 0,[t].concat(r)):(r.forEach(function(i){!i||xo(i,function(a,s){t[s]=a})}),t)}function zn(t){return!!t&&typeof t=="object"}function su(t){return zn(t)&&b9.call(t)==="[object Object]"&&t.constructor===Object}function ou(t,e){if(!t||!e)return"";if(typeof L.getComputedStyle=="function"){var r;try{r=L.getComputedStyle(t)}catch{return""}return r?r.getPropertyValue(e)||r[e]:""}return""}var rr=L.navigator&&L.navigator.userAgent||"",l1=/AppleWebKit\/([\d.]+)/i.exec(rr),_9=l1?parseFloat(l1.pop()):null,D2=/iPod/i.test(rr),x9=function(){var t=rr.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),qn=/Android/i.test(rr),pb=function(){var t=rr.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return e&&r?parseFloat(t[1]+"."+t[2]):e||null}(),L2=qn&&pb<5&&_9<537,R2=/Firefox/i.test(rr),Vu=/Edg/i.test(rr),Gn=!Vu&&(/Chrome/i.test(rr)||/CriOS/i.test(rr)),M2=function(){var t=rr.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Hu=function(){var t=/MSIE\s(\d+)\.\d/.exec(rr),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(rr)&&/rv:11.0/.test(rr)&&(e=11),e}(),gb=/Safari/i.test(rr)&&!Gn&&!qn&&!Vu,N2=/Windows/i.test(rr),Ho=Boolean(yl()&&("ontouchstart"in L||L.navigator.maxTouchPoints||L.DocumentTouch&&L.document instanceof L.DocumentTouch)),mb=/iPad/i.test(rr)||gb&&Ho&&!/iPhone/i.test(rr),vb=/iPhone/i.test(rr)&&!mb,Br=vb||mb||D2,Op=(gb||Br)&&!Gn,T9=Object.freeze({__proto__:null,IS_IPOD:D2,IOS_VERSION:x9,IS_ANDROID:qn,ANDROID_VERSION:pb,IS_NATIVE_ANDROID:L2,IS_FIREFOX:R2,IS_EDGE:Vu,IS_CHROME:Gn,CHROME_VERSION:M2,IE_VERSION:Hu,IS_SAFARI:gb,IS_WINDOWS:N2,TOUCH_ENABLED:Ho,IS_IPAD:mb,IS_IPHONE:vb,IS_IOS:Br,IS_ANY_SAFARI:Op});function c1(t){return typeof t=="string"&&Boolean(t.trim())}function j2(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function S9(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function yl(){return ce===L.document}function bl(t){return zn(t)&&t.nodeType===1}function F2(){try{return L.parent!==L.self}catch{return!0}}function B2(t){return function(e,r){if(!c1(e))return ce[t](null);c1(r)&&(r=ce.querySelector(r));var n=bl(r)?r:ce;return n[t]&&n[t](e)}}function tt(t,e,r,n){t===void 0&&(t="div"),e===void 0&&(e={}),r===void 0&&(r={});var i=ce.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(a){var s=e[a];a.indexOf("aria-")!==-1||a==="role"||a==="type"?(Xe.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+a+" to "+s+".")),i.setAttribute(a,s)):a==="textContent"?js(i,s):(i[a]!==s||a==="tabIndex")&&(i[a]=s)}),Object.getOwnPropertyNames(r).forEach(function(a){i.setAttribute(a,r[a])}),n&&bb(i,n),i}function js(t,e){return typeof t.textContent=="undefined"?t.innerText=e:t.textContent=e,t}function bv(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function gs(t,e){return j2(e),t.classList?t.classList.contains(e):S9(e).test(t.className)}function An(t,e){return t.classList?t.classList.add(e):gs(t,e)||(t.className=(t.className+" "+e).trim()),t}function qu(t,e){return t?(t.classList?t.classList.remove(e):(j2(e),t.className=t.className.split(/\s+/).filter(function(r){return r!==e}).join(" ")),t):(Xe.warn("removeClass was called with an element that doesn't exist"),null)}function U2(t,e,r){var n=gs(t,e);if(typeof r=="function"&&(r=r(t,e)),typeof r!="boolean"&&(r=!n),r!==n)return r?An(t,e):qu(t,e),t}function z2(t,e){Object.getOwnPropertyNames(e).forEach(function(r){var n=e[r];n===null||typeof n=="undefined"||n===!1?t.removeAttribute(r):t.setAttribute(r,n===!0?"":n)})}function gn(t){var e={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var n=t.attributes,i=n.length-1;i>=0;i--){var a=n[i].name,s=n[i].value;(typeof t[a]=="boolean"||r.indexOf(","+a+",")!==-1)&&(s=s!==null),e[a]=s}return e}function $2(t,e){return t.getAttribute(e)}function qo(t,e,r){t.setAttribute(e,r)}function Dp(t,e){t.removeAttribute(e)}function V2(){ce.body.focus(),ce.onselectstart=function(){return!1}}function H2(){ce.onselectstart=function(){return!0}}function Go(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach(function(n){e[n]!==void 0&&(r[n]=e[n])}),r.height||(r.height=parseFloat(ou(t,"height"))),r.width||(r.width=parseFloat(ou(t,"width"))),r}}function lu(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=t.offsetWidth,r=t.offsetHeight,n=0,i=0;t.offsetParent&&t!==ce[af.fullscreenElement];)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{left:n,top:i,width:e,height:r}}function Lp(t,e){var r={x:0,y:0};if(Br)for(var n=t;n&&n.nodeName.toLowerCase()!=="html";){var i=ou(n,"transform");if(/^matrix/.test(i)){var a=i.slice(7,-1).split(/,\s/).map(Number);r.x+=a[4],r.y+=a[5]}else if(/^matrix3d/.test(i)){var s=i.slice(9,-1).split(/,\s/).map(Number);r.x+=s[12],r.y+=s[13]}n=n.parentNode}var o={},l=lu(e.target),c=lu(t),u=c.width,d=c.height,h=e.offsetY-(c.top-l.top),p=e.offsetX-(c.left-l.left);return e.changedTouches&&(p=e.changedTouches[0].pageX-c.left,h=e.changedTouches[0].pageY+c.top,Br&&(p-=r.x,h-=r.y)),o.y=1-Math.max(0,Math.min(1,h/d)),o.x=Math.max(0,Math.min(1,p/u)),o}function q2(t){return zn(t)&&t.nodeType===3}function yb(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function G2(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(function(e){if(typeof e=="function"&&(e=e()),bl(e)||q2(e))return e;if(typeof e=="string"&&/\S/.test(e))return ce.createTextNode(e)}).filter(function(e){return e})}function bb(t,e){return G2(e).forEach(function(r){return t.appendChild(r)}),t}function W2(t,e){return bb(yb(t),e)}function cu(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}var ka=B2("querySelector"),K2=B2("querySelectorAll"),Y2=Object.freeze({__proto__:null,isReal:yl,isEl:bl,isInFrame:F2,createEl:tt,textContent:js,prependTo:bv,hasClass:gs,addClass:An,removeClass:qu,toggleClass:U2,setAttributes:z2,getAttributes:gn,getAttribute:$2,setAttribute:qo,removeAttribute:Dp,blockTextSelection:V2,unblockTextSelection:H2,getBoundingClientRect:Go,findPosition:lu,getPointerPosition:Lp,isTextNode:q2,emptyEl:yb,normalizeContent:G2,appendContent:bb,insertContent:W2,isSingleLeftClick:cu,$:ka,$$:K2}),X2=!1,wv,k9=function(){if(wv.options.autoSetup!==!1){var e=Array.prototype.slice.call(ce.getElementsByTagName("video")),r=Array.prototype.slice.call(ce.getElementsByTagName("audio")),n=Array.prototype.slice.call(ce.getElementsByTagName("video-js")),i=e.concat(r,n);if(i&&i.length>0)for(var a=0,s=i.length;a<s;a++){var o=i[a];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&wv(o)}}else{_v(1);break}}else X2||_v(1)}};function _v(t,e){!yl()||(e&&(wv=e),L.setTimeout(k9,t))}function xv(){X2=!0,L.removeEventListener("load",xv)}yl()&&(ce.readyState==="complete"?xv():L.addEventListener("load",xv));var Q2=function(e){var r=ce.createElement("style");return r.className=e,r},J2=function(e,r){e.styleSheet?e.styleSheet.cssText=r:e.textContent=r},E9=3,C9=E9;function Wn(){return C9++}var Z2;L.WeakMap||(Z2=function(){function t(){this.vdata="vdata"+Math.floor(L.performance&&L.performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(n,i){var a=n[this.vdata]||Wn();return n[this.vdata]||(n[this.vdata]=a),this.data[a]=i,this},e.get=function(n){var i=n[this.vdata];if(i)return this.data[i];Xe("We have no data for this element",n)},e.has=function(n){var i=n[this.vdata];return i in this.data},e.delete=function(n){var i=n[this.vdata];i&&(delete this.data[i],delete n[this.vdata])},t}());var Nr=L.WeakMap?new WeakMap:new Z2;function u1(t,e){if(!!Nr.has(t)){var r=Nr.get(t);r.handlers[e].length===0&&(delete r.handlers[e],t.removeEventListener?t.removeEventListener(e,r.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),Object.getOwnPropertyNames(r).length===0&&Nr.delete(t)}}function wb(t,e,r,n){r.forEach(function(i){t(e,i,n)})}function Rp(t){if(t.fixed_)return t;function e(){return!0}function r(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){var n=t||L.event;t={};for(var i in n)i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"&&i!=="path"&&(i==="returnValue"&&n.preventDefault||(t[i]=n[i]));if(t.target||(t.target=t.srcElement||ce),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=r,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=r,t.clientX!==null&&t.clientX!==void 0){var a=ce.documentElement,s=ce.body;t.pageX=t.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}var Hd,A9=function(){if(typeof Hd!="boolean"){Hd=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Hd=!0}});L.addEventListener("test",null,e),L.removeEventListener("test",null,e)}catch{}}return Hd},I9=["touchstart","touchmove"];function li(t,e,r){if(Array.isArray(e))return wb(li,t,e,r);Nr.has(t)||Nr.set(t,{});var n=Nr.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),r.guid||(r.guid=Wn()),n.handlers[e].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(a,s){if(!n.disabled){a=Rp(a);var o=n.handlers[a.type];if(o)for(var l=o.slice(0),c=0,u=l.length;c<u&&!a.isImmediatePropagationStopped();c++)try{l[c].call(t,a,s)}catch(d){Xe.error(d)}}}),n.handlers[e].length===1)if(t.addEventListener){var i=!1;A9()&&I9.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,n.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function _r(t,e,r){if(!!Nr.has(t)){var n=Nr.get(t);if(!!n.handlers){if(Array.isArray(e))return wb(_r,t,e,r);var i=function(c,u){n.handlers[u]=[],u1(c,u)};if(e===void 0){for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&i(t,a);return}var s=n.handlers[e];if(!!s){if(!r){i(t,e);return}if(r.guid)for(var o=0;o<s.length;o++)s[o].guid===r.guid&&s.splice(o--,1);u1(t,e)}}}}function wl(t,e,r){var n=Nr.has(t)?Nr.get(t):{},i=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Rp(e),n.dispatcher&&n.dispatcher.call(t,e,r),i&&!e.isPropagationStopped()&&e.bubbles===!0)wl.call(null,i,e,r);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){Nr.has(e.target)||Nr.set(e.target,{});var a=Nr.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function Mp(t,e,r){if(Array.isArray(e))return wb(Mp,t,e,r);var n=function i(){_r(t,e,i),r.apply(this,arguments)};n.guid=r.guid=r.guid||Wn(),li(t,e,n)}function eP(t,e,r){var n=function i(){_r(t,e,i),r.apply(this,arguments)};n.guid=r.guid=r.guid||Wn(),li(t,e,n)}var P9=Object.freeze({__proto__:null,fixEvent:Rp,on:li,off:_r,trigger:wl,one:Mp,any:eP}),Mi=30,Et=function(e,r,n){r.guid||(r.guid=Wn());var i=r.bind(e);return i.guid=n?n+"_"+r.guid:r.guid,i},$n=function(e,r){var n=L.performance.now(),i=function(){var s=L.performance.now();s-n>=r&&(e.apply(void 0,arguments),n=s)};return i},O9=function(e,r,n,i){i===void 0&&(i=L);var a,s=function(){i.clearTimeout(a),a=null},o=function(){var c=this,u=arguments,d=function(){a=null,d=null,n||e.apply(c,u)};!a&&n&&e.apply(c,u),i.clearTimeout(a),a=i.setTimeout(d,r)};return o.cancel=s,o},ar=function(){};ar.prototype.allowedEvents_={};ar.prototype.on=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},li(this,t,e),this.addEventListener=r};ar.prototype.addEventListener=ar.prototype.on;ar.prototype.off=function(t,e){_r(this,t,e)};ar.prototype.removeEventListener=ar.prototype.off;ar.prototype.one=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},Mp(this,t,e),this.addEventListener=r};ar.prototype.any=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},eP(this,t,e),this.addEventListener=r};ar.prototype.trigger=function(t){var e=t.type||t;typeof t=="string"&&(t={type:e}),t=Rp(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),wl(this,t)};ar.prototype.dispatchEvent=ar.prototype.trigger;var zl;ar.prototype.queueTrigger=function(t){var e=this;zl||(zl=new Map);var r=t.type||t,n=zl.get(this);n||(n=new Map,zl.set(this,n));var i=n.get(r);n.delete(r),L.clearTimeout(i);var a=L.setTimeout(function(){n.size===0&&(n=null,zl.delete(e)),e.trigger(t)},0);n.set(r,a)};var Np=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},In=function(e){return e instanceof ar||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(r){return typeof e[r]=="function"})},D9=function(e,r){In(e)?r():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(r))},Tv=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},sf=function(e,r,n){if(!e||!e.nodeName&&!In(e))throw new Error("Invalid target for "+Np(r)+"#"+n+"; must be a DOM node or evented object.")},tP=function(e,r,n){if(!Tv(e))throw new Error("Invalid event type for "+Np(r)+"#"+n+"; must be a non-empty string or array.")},rP=function(e,r,n){if(typeof e!="function")throw new Error("Invalid listener for "+Np(r)+"#"+n+"; must be a function.")},qg=function(e,r,n){var i=r.length<3||r[0]===e||r[0]===e.eventBusEl_,a,s,o;return i?(a=e.eventBusEl_,r.length>=3&&r.shift(),s=r[0],o=r[1]):(a=r[0],s=r[1],o=r[2]),sf(a,e,n),tP(s,e,n),rP(o,e,n),o=Et(e,o),{isTargetingSelf:i,target:a,type:s,listener:o}},qa=function(e,r,n,i){sf(e,e,r),e.nodeName?P9[r](e,n,i):e[r](n,i)},L9={on:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=qg(this,n,"on"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(qa(o,"on",l,c),!s){var u=function(){return e.off(o,l,c)};u.guid=c.guid;var d=function(){return e.off("dispose",u)};d.guid=c.guid,qa(this,"on","dispose",u),qa(o,"on","dispose",d)}},one:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=qg(this,n,"one"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(s)qa(o,"one",l,c);else{var u=function d(){e.off(o,l,d);for(var h=arguments.length,p=new Array(h),y=0;y<h;y++)p[y]=arguments[y];c.apply(null,p)};u.guid=c.guid,qa(o,"one",l,u)}},any:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=qg(this,n,"any"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(s)qa(o,"any",l,c);else{var u=function d(){e.off(o,l,d);for(var h=arguments.length,p=new Array(h),y=0;y<h;y++)p[y]=arguments[y];c.apply(null,p)};u.guid=c.guid,qa(o,"any",l,u)}},off:function(e,r,n){if(!e||Tv(e))_r(this.eventBusEl_,e,r);else{var i=e,a=r;sf(i,this,"off"),tP(a,this,"off"),rP(n,this,"off"),n=Et(this,n),this.off("dispose",n),i.nodeName?(_r(i,a,n),_r(i,"dispose",n)):In(i)&&(i.off(a,n),i.off("dispose",n))}},trigger:function(e,r){sf(this.eventBusEl_,this,"trigger");var n=e&&typeof e!="string"?e.type:e;if(!Tv(n)){var i="Invalid event type for "+Np(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||Xe).error(i);else throw new Error(i)}return wl(this.eventBusEl_,e,r)}};function _b(t,e){e===void 0&&(e={});var r=e,n=r.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=tt("span",{className:"vjs-event-bus"});return Ot(t,L9),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(i){i()}),t.on("dispose",function(){t.off(),[t,t.el_,t.eventBusEl_].forEach(function(i){i&&Nr.has(i)&&Nr.delete(i)}),L.setTimeout(function(){t.eventBusEl_=null},0)}),t}var R9={state:{},setState:function(e){var r=this;typeof e=="function"&&(e=e());var n;return xo(e,function(i,a){r.state[a]!==i&&(n=n||{},n[a]={from:r.state[a],to:i}),r.state[a]=i}),n&&In(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function iP(t,e){return Ot(t,R9),t.state=Ot({},t.state,e),typeof t.handleStateChanged=="function"&&In(t)&&t.on("statechanged",t.handleStateChanged),t}var fh=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toLowerCase()})},jt=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toUpperCase()})},M9=function(e,r){return jt(e)===jt(r)};function Tt(){for(var t={},e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(function(i){!i||xo(i,function(a,s){if(!su(a)){t[s]=a;return}su(t[s])||(t[s]={}),t[s]=Tt(t[s],a)})}),t}var N9=function(){function t(){this.map_={}}var e=t.prototype;return e.has=function(n){return n in this.map_},e.delete=function(n){var i=this.has(n);return delete this.map_[n],i},e.set=function(n,i){return this.map_[n]=i,this},e.forEach=function(n,i){for(var a in this.map_)n.call(i,this.map_[a],a,this)},t}(),j9=L.Map?L.Map:N9,F9=function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(n){return n in this.set_},e.delete=function(n){var i=this.has(n);return delete this.set_[n],i},e.add=function(n){return this.set_[n]=1,this},e.forEach=function(n,i){for(var a in this.set_)n.call(i,a,a,this)},t}(),Gg=L.Set?L.Set:F9,Z=function(){function t(r,n,i){var a=this;if(!r&&this.play?this.player_=r=this:this.player_=r,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Tt({},this.options_),n=this.options_=Tt(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var s=r&&r.id&&r.id()||"no_player";this.id_=s+"_component_"+Wn()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(function(o){return a.addClass(o)}),n.evented!==!1&&(_b(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),iP(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Gg,this.setIntervalIds_=new Gg,this.rafIds_=new Gg,this.namedRafs_=new j9,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=t.prototype;return e.dispose=function(n){if(n===void 0&&(n={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(n.restoreEl?this.el_.parentNode.replaceChild(n.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(n){return n?(this.options_=Tt(this.options_,n),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(n,i,a){return tt(n,i,a)},e.localize=function(n,i,a){a===void 0&&(a=n);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[s],c=s&&s.split("-")[0],u=o&&o[c],d=a;return l&&l[n]?d=l[n]:u&&u[n]&&(d=u[n]),i&&(d=d.replace(/\{(\d+)\}/g,function(h,p){var y=i[p-1],w=y;return typeof y=="undefined"&&(w=h),w})),d},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(n){return this.childIndex_[n]},e.getChild=function(n){if(!!n)return this.childNameIndex_[n]},e.getDescendant=function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];i=i.reduce(function(l,c){return l.concat(c)},[]);for(var s=this,o=0;o<i.length;o++)if(s=s.getChild(i[o]),!s||!s.getChild)return;return s},e.addChild=function(n,i,a){i===void 0&&(i={}),a===void 0&&(a=this.children_.length);var s,o;if(typeof n=="string"){o=jt(n);var l=i.componentClass||o;i.name=o;var c=t.getComponent(l);if(!c)throw new Error("Component "+l+" does not exist");if(typeof c!="function")return null;s=new c(this.player_||this,i)}else s=n;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(a,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&jt(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[fh(o)]=s),typeof s.el=="function"&&s.el()){var u=null;this.children_[a+1]&&(this.children_[a+1].el_?u=this.children_[a+1].el_:bl(this.children_[a+1])&&(u=this.children_[a+1])),this.contentEl().insertBefore(s.el(),u)}return s},e.removeChild=function(n){if(typeof n=="string"&&(n=this.getChild(n)),!(!n||!this.children_)){for(var i=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===n){i=!0,this.children_.splice(a,1);break}if(!!i){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[jt(n.name())]=null,this.childNameIndex_[fh(n.name())]=null;var s=n.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},e.initChildren=function(){var n=this,i=this.options_.children;if(i){var a=this.options_,s=function(u){var d=u.name,h=u.opts;if(a[d]!==void 0&&(h=a[d]),h!==!1){h===!0&&(h={}),h.playerOptions=n.options_.playerOptions;var p=n.addChild(d,h);p&&(n[d]=p)}},o,l=t.getComponent("Tech");Array.isArray(i)?o=i:o=Object.keys(i),o.concat(Object.keys(this.options_).filter(function(c){return!o.some(function(u){return typeof u=="string"?c===u:c===u.name})})).map(function(c){var u,d;return typeof c=="string"?(u=c,d=i[u]||n.options_[u]||{}):(u=c.name,d=c),{name:u,opts:d}}).filter(function(c){var u=t.getComponent(c.opts.componentClass||jt(c.name));return u&&!l.isTech(u)}).forEach(s)}},e.buildCSSClass=function(){return""},e.ready=function(n,i){if(i===void 0&&(i=!1),!!n){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(n);return}i?n.call(this):this.setTimeout(n,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},e.$=function(n,i){return ka(n,i||this.contentEl())},e.$$=function(n,i){return K2(n,i||this.contentEl())},e.hasClass=function(n){return gs(this.el_,n)},e.addClass=function(n){An(this.el_,n)},e.removeClass=function(n){qu(this.el_,n)},e.toggleClass=function(n,i){U2(this.el_,n,i)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(n){return $2(this.el_,n)},e.setAttribute=function(n,i){qo(this.el_,n,i)},e.removeAttribute=function(n){Dp(this.el_,n)},e.width=function(n,i){return this.dimension("width",n,i)},e.height=function(n,i){return this.dimension("height",n,i)},e.dimensions=function(n,i){this.width(n,!0),this.height(i)},e.dimension=function(n,i,a){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[n]=i:i==="auto"?this.el_.style[n]="":this.el_.style[n]=i+"px",a||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[n],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+jt(n)],10)},e.currentDimension=function(n){var i=0;if(n!=="width"&&n!=="height")throw new Error("currentDimension only accepts width or height value");if(i=ou(this.el_,n),i=parseFloat(i),i===0||isNaN(i)){var a="offset"+jt(n);i=this.el_[a]}return i},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(n){this.player_&&(ze.isEventKey(n,"Tab")||n.stopPropagation(),this.player_.handleKeyDown(n))},e.handleKeyPress=function(n){this.handleKeyDown(n)},e.emitTapEvents=function(){var n=0,i=null,a=10,s=200,o;this.on("touchstart",function(c){c.touches.length===1&&(i={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY},n=L.performance.now(),o=!0)}),this.on("touchmove",function(c){if(c.touches.length>1)o=!1;else if(i){var u=c.touches[0].pageX-i.pageX,d=c.touches[0].pageY-i.pageY,h=Math.sqrt(u*u+d*d);h>a&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(c){if(i=null,o===!0){var u=L.performance.now()-n;u<s&&(c.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var n=Et(this.player(),this.player().reportUserActivity),i;this.on("touchstart",function(){n(),this.clearInterval(i),i=this.setInterval(n,250)});var a=function(o){n(),this.clearInterval(i)};this.on("touchmove",n),this.on("touchend",a),this.on("touchcancel",a)}},e.setTimeout=function(n,i){var a=this,s;return n=Et(this,n),this.clearTimersOnDispose_(),s=L.setTimeout(function(){a.setTimeoutIds_.has(s)&&a.setTimeoutIds_.delete(s),n()},i),this.setTimeoutIds_.add(s),s},e.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),L.clearTimeout(n)),n},e.setInterval=function(n,i){n=Et(this,n),this.clearTimersOnDispose_();var a=L.setInterval(n,i);return this.setIntervalIds_.add(a),a},e.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),L.clearInterval(n)),n},e.requestAnimationFrame=function(n){var i=this;if(!this.supportsRaf_)return this.setTimeout(n,1e3/60);this.clearTimersOnDispose_();var a;return n=Et(this,n),a=L.requestAnimationFrame(function(){i.rafIds_.has(a)&&i.rafIds_.delete(a),n()}),this.rafIds_.add(a),a},e.requestNamedAnimationFrame=function(n,i){var a=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),i=Et(this,i);var s=this.requestAnimationFrame(function(){i(),a.namedRafs_.has(n)&&a.namedRafs_.delete(n)});return this.namedRafs_.set(n,s),n}},e.cancelNamedAnimationFrame=function(n){!this.namedRafs_.has(n)||(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},e.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),L.cancelAnimationFrame(n)),n):this.clearTimeout(n)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(i){var a=i[0],s=i[1];n[a].forEach(function(o,l){return n[s](l)})}),n.clearingTimersOnDispose_=!1}))},t.registerComponent=function(n,i){if(typeof n!="string"||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var a=t.getComponent("Tech"),s=a&&a.isTech(i),o=t===i||t.prototype.isPrototypeOf(i.prototype);if(s||!o){var l;throw s?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+n+'"; '+l+".")}n=jt(n),t.components_||(t.components_={});var c=t.getComponent("Player");if(n==="Player"&&c&&c.players){var u=c.players,d=Object.keys(u);if(u&&d.length>0&&d.map(function(h){return u[h]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[n]=i,t.components_[fh(n)]=i,i},t.getComponent=function(n){if(!(!n||!t.components_))return t.components_[n]},t}();Z.prototype.supportsRaf_=typeof L.requestAnimationFrame=="function"&&typeof L.cancelAnimationFrame=="function";Z.registerComponent("Component",Z);function B9(t,e,r){if(typeof e!="number"||e<0||e>r)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+r+").")}function d1(t,e,r,n){return B9(t,n,r.length-1),r[n][e]}function Wg(t){var e;return t===void 0||t.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:d1.bind(null,"start",0,t),end:d1.bind(null,"end",1,t)},L.Symbol&&L.Symbol.iterator&&(e[L.Symbol.iterator]=function(){return(t||[]).values()}),e}function ms(t,e){return Array.isArray(t)?Wg(t):t===void 0||e===void 0?Wg():Wg([[t,e]])}function nP(t,e){var r=0,n,i;if(!e)return 0;(!t||!t.length)&&(t=ms(0,0));for(var a=0;a<t.length;a++)n=t.start(a),i=t.end(a),i>e&&(i=e),r+=i-n;return r/e}function jr(t){if(t instanceof jr)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:zn(t)&&(typeof t.code=="number"&&(this.code=t.code),Ot(this,t)),this.message||(this.message=jr.defaultMessages[this.code]||"")}jr.prototype.code=0;jr.prototype.message="";jr.prototype.status=null;jr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];jr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Qs=0;Qs<jr.errorTypes.length;Qs++)jr[jr.errorTypes[Qs]]=Qs,jr.prototype[jr.errorTypes[Qs]]=Qs;function xc(t){return t!=null&&typeof t.then=="function"}function Wi(t){xc(t)&&t.then(null,function(e){})}var Sv=function(e){var r=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,i,a){return e[i]&&(n[i]=e[i]),n},{cues:e.cues&&Array.prototype.map.call(e.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})});return r},U9=function(e){var r=e.$$("track"),n=Array.prototype.map.call(r,function(a){return a.track}),i=Array.prototype.map.call(r,function(a){var s=Sv(a.track);return a.src&&(s.src=a.src),s});return i.concat(Array.prototype.filter.call(e.textTracks(),function(a){return n.indexOf(a)===-1}).map(Sv))},z9=function(e,r){return e.forEach(function(n){var i=r.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(a){return i.addCue(a)})}),r.textTracks()},h1={textTracksToJson:U9,jsonToTextTracks:z9,trackToJson_:Sv},Kg="vjs-modal-dialog",_l=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.close_=function(s){return a.close(s)},a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=tt("div",{className:Kg+"-content"},{role:"document"}),a.descEl_=tt("p",{className:Kg+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),js(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},r.buildCSSClass=function(){return Kg+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},r.open=function(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(i){return typeof i=="boolean"&&this[i?"open":"close"](),this.opened_},r.close=function(){if(!!this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(i){if(typeof i=="boolean"){var a=this.closeable_=!!i,s=this.getChild("closeButton");if(a&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(i){var a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),W2(a,i),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);var l=this.getChild("closeButton");l&&s.appendChild(l.el_)},r.empty=function(){this.trigger("beforemodalempty"),yb(this.contentEl()),this.trigger("modalempty")},r.content=function(i){return typeof i!="undefined"&&(this.content_=i),this.content_},r.conditionalFocus_=function(){var i=ce.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(i)||a===i)&&(this.previouslyActiveEl_=i,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(i){if(i.stopPropagation(),ze.isEventKey(i,"Escape")&&this.closeable()){i.preventDefault(),this.close();return}if(!!ze.isEventKey(i,"Tab")){for(var a=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,l=0;l<a.length;l++)if(s===a[l]){o=l;break}ce.activeElement===this.el_&&(o=0),i.shiftKey&&o===0?(a[a.length-1].focus(),i.preventDefault()):!i.shiftKey&&o===a.length-1&&(a[0].focus(),i.preventDefault())}},r.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(a){return(a instanceof L.HTMLAnchorElement||a instanceof L.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof L.HTMLInputElement||a instanceof L.HTMLSelectElement||a instanceof L.HTMLTextAreaElement||a instanceof L.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof L.HTMLIFrameElement||a instanceof L.HTMLObjectElement||a instanceof L.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},e}(Z);_l.prototype.options_={pauseOnOpen:!0,temporary:!0};Z.registerComponent("ModalDialog",_l);var Wo=function(t){ge(e,t);function e(n){var i;n===void 0&&(n=[]),i=t.call(this)||this,i.tracks_=[],Object.defineProperty(Ne(i),"length",{get:function(){return this.tracks_.length}});for(var a=0;a<n.length;a++)i.addTrack(n[a]);return i}var r=e.prototype;return r.addTrack=function(i){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(i)===-1&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){a.trigger({track:i,type:"labelchange",target:a})},In(i)&&i.addEventListener("labelchange",i.labelchange_)},r.removeTrack=function(i){for(var a,s=0,o=this.length;s<o;s++)if(this[s]===i){a=this[s],a.off&&a.off(),this.tracks_.splice(s,1);break}!a||this.trigger({track:a,type:"removetrack",target:this})},r.getTrackById=function(i){for(var a=null,s=0,o=this.length;s<o;s++){var l=this[s];if(l.id===i){a=l;break}}return a},e}(ar);Wo.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var $9 in Wo.prototype.allowedEvents_)Wo.prototype["on"+$9]=null;var Yg=function(e,r){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||r.id===e[n].id||(e[n].enabled=!1)},V9=function(t){ge(e,t);function e(n){var i;n===void 0&&(n=[]);for(var a=n.length-1;a>=0;a--)if(n[a].enabled){Yg(n,n[a]);break}return i=t.call(this,n)||this,i.changing_=!1,i}var r=e.prototype;return r.addTrack=function(i){var a=this;i.enabled&&Yg(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){a.changing_||(a.changing_=!0,Yg(a,i),a.changing_=!1,a.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},e}(Wo),Xg=function(e,r){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||r.id===e[n].id||(e[n].selected=!1)},H9=function(t){ge(e,t);function e(n){var i;n===void 0&&(n=[]);for(var a=n.length-1;a>=0;a--)if(n[a].selected){Xg(n,n[a]);break}return i=t.call(this,n)||this,i.changing_=!1,Object.defineProperty(Ne(i),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),i}var r=e.prototype;return r.addTrack=function(i){var a=this;i.selected&&Xg(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){a.changing_||(a.changing_=!0,Xg(a,i),a.changing_=!1,a.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},e}(Wo),aP=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.addTrack=function(i){var a=this;t.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(i.kind)===-1&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Wo),q9=function(){function t(r){r===void 0&&(r=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=r.length;n<i;n++)this.addTrackElement_(r[n])}var e=t.prototype;return e.addTrackElement_=function(n){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)},e.getTrackElementByTrack_=function(n){for(var i,a=0,s=this.trackElements_.length;a<s;a++)if(n===this.trackElements_[a].track){i=this.trackElements_[a];break}return i},e.removeTrackElement_=function(n){for(var i=0,a=this.trackElements_.length;i<a;i++)if(n===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},t}(),f1=function(){function t(r){t.prototype.setCues_.call(this,r),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(n){var i=this.length||0,a=0,s=n.length;this.cues_=n,this.length_=n.length;var o=function(c){""+c in this||Object.defineProperty(this,""+c,{get:function(){return this.cues_[c]}})};if(i<s)for(a=i;a<s;a++)o.call(this,a)},e.getCueById=function(n){for(var i=null,a=0,s=this.length;a<s;a++){var o=this[a];if(o.id===n){i=o;break}}return i},t}(),G9={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},W9={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},K9={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},p1={disabled:"disabled",hidden:"hidden",showing:"showing"},xb=function(t){ge(e,t);function e(r){var n;r===void 0&&(r={}),n=t.call(this)||this;var i={id:r.id||"vjs_track_"+Wn(),kind:r.kind||"",language:r.language||""},a=r.label||"",s=function(c){Object.defineProperty(Ne(n),c,{get:function(){return i[c]},set:function(){}})};for(var o in i)s(o);return Object.defineProperty(Ne(n),"label",{get:function(){return a},set:function(c){c!==a&&(a=c,this.trigger("labelchange"))}}),n}return e}(ar),Tb=function(e){var r=["protocol","hostname","port","pathname","search","hash","host"],n=ce.createElement("a");n.href=e;for(var i={},a=0;a<r.length;a++)i[r[a]]=n[r[a]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=L.location.protocol),i.host||(i.host=L.location.host),i},sP=function(e){if(!e.match(/^https?:\/\//)){var r=ce.createElement("a");r.href=e,e=r.href}return e},Sb=function(e){if(typeof e=="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=r.exec(e);if(n)return n.pop().toLowerCase()}return""},jp=function(e,r){r===void 0&&(r=L.location);var n=Tb(e),i=n.protocol===":"?r.protocol:n.protocol,a=i+n.host!==r.protocol+r.host;return a},Y9=Object.freeze({__proto__:null,parseUrl:Tb,getAbsoluteURL:sP,getFileExtension:Sb,isCrossOrigin:jp}),g1=function(e,r){var n=new L.WebVTT.Parser(L,L.vttjs,L.WebVTT.StringDecoder()),i=[];n.oncue=function(a){r.addCue(a)},n.onparsingerror=function(a){i.push(a)},n.onflush=function(){r.trigger({type:"loadeddata",target:r})},n.parse(e),i.length>0&&(L.console&&L.console.groupCollapsed&&L.console.groupCollapsed("Text Track parsing errors for "+r.src),i.forEach(function(a){return Xe.error(a)}),L.console&&L.console.groupEnd&&L.console.groupEnd()),n.flush()},m1=function(e,r){var n={uri:e},i=jp(e);i&&(n.cors=i);var a=r.tech_.crossOrigin()==="use-credentials";a&&(n.withCredentials=a),OI(n,Et(this,function(s,o,l){if(s)return Xe.error(s,o);r.loaded_=!0,typeof L.WebVTT!="function"?r.tech_&&r.tech_.any(["vttjsloaded","vttjserror"],function(c){if(c.type==="vttjserror"){Xe.error("vttjs failed to load, stopping trying to process "+r.src);return}return g1(l,r)}):g1(l,r)}))},Gu=function(t){ge(e,t);function e(n){var i;if(n===void 0&&(n={}),!n.tech)throw new Error("A tech was not provided.");var a=Tt(n,{kind:K9[n.kind]||"subtitles",language:n.language||n.srclang||""}),s=p1[a.mode]||"disabled",o=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(s="hidden"),i=t.call(this,a)||this,i.tech_=a.tech,i.cues_=[],i.activeCues_=[],i.preload_=i.tech_.preloadTextTracks!==!1;var l=new f1(i.cues_),c=new f1(i.activeCues_),u=!1;i.timeupdateHandler=Et(Ne(i),function(h){if(h===void 0&&(h={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1),h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var d=function(){i.stopTracking()};return i.tech_.one("dispose",d),s!=="disabled"&&i.startTracking(),Object.defineProperties(Ne(i),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(p){!p1[p]||s!==p&&(s=p,!this.preload_&&s!=="disabled"&&this.cues.length===0&&m1(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return c;for(var p=this.tech_.currentTime(),y=[],w=0,v=this.cues.length;w<v;w++){var T=this.cues[w];(T.startTime<=p&&T.endTime>=p||T.startTime===T.endTime&&T.startTime<=p&&T.startTime+.5>=p)&&y.push(T)}if(u=!1,y.length!==this.activeCues_.length)u=!0;else for(var k=0;k<y.length;k++)this.activeCues_.indexOf(y[k])===-1&&(u=!0);return this.activeCues_=y,c.setCues_(this.activeCues_),c},set:function(){}}}),a.src?(i.src=a.src,i.preload_||(i.loaded_=!0),(i.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&m1(i.src,Ne(i))):i.loaded_=!0,i}var r=e.prototype;return r.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},r.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},r.addCue=function(i){var a=i;if(L.vttjs&&!(i instanceof L.vttjs.VTTCue)){a=new L.vttjs.VTTCue(i.startTime,i.endTime,i.text);for(var s in i)s in a||(a[s]=i[s]);a.id=i.id,a.originalCue_=i}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},r.removeCue=function(i){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===i||s.originalCue_&&s.originalCue_===i){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},e}(xb);Gu.prototype.allowedEvents_={cuechange:"cuechange"};var oP=function(t){ge(e,t);function e(r){var n;r===void 0&&(r={});var i=Tt(r,{kind:W9[r.kind]||""});n=t.call(this,i)||this;var a=!1;return Object.defineProperty(Ne(n),"enabled",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return e}(xb),lP=function(t){ge(e,t);function e(r){var n;r===void 0&&(r={});var i=Tt(r,{kind:G9[r.kind]||""});n=t.call(this,i)||this;var a=!1;return Object.defineProperty(Ne(n),"selected",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return e}(xb),cP=0,X9=1,uP=2,Q9=3,xl=function(t){ge(e,t);function e(r){var n;r===void 0&&(r={}),n=t.call(this)||this;var i,a=new Gu(r);return n.kind=a.kind,n.src=a.src,n.srclang=a.language,n.label=a.label,n.default=a.default,Object.defineProperties(Ne(n),{readyState:{get:function(){return i}},track:{get:function(){return a}}}),i=cP,a.addEventListener("loadeddata",function(){i=uP,n.trigger({type:"load",target:Ne(n)})}),n}return e}(ar);xl.prototype.allowedEvents_={load:"load"};xl.NONE=cP;xl.LOADING=X9;xl.LOADED=uP;xl.ERROR=Q9;var mi={audio:{ListClass:V9,TrackClass:oP,capitalName:"Audio"},video:{ListClass:H9,TrackClass:lP,capitalName:"Video"},text:{ListClass:aP,TrackClass:Gu,capitalName:"Text"}};Object.keys(mi).forEach(function(t){mi[t].getterName=t+"Tracks",mi[t].privateName=t+"Tracks_"});var Ko={remoteText:{ListClass:aP,TrackClass:Gu,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:q9,TrackClass:xl,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Lr=yi({},mi,Ko);Ko.names=Object.keys(Ko);mi.names=Object.keys(mi);Lr.names=[].concat(Ko.names).concat(mi.names);function J9(t,e,r,n,i){i===void 0&&(i={});var a=t.textTracks();i.kind=e,r&&(i.label=r),n&&(i.language=n),i.tech=t;var s=new Lr.text.TrackClass(i);return a.addTrack(s),s}var bt=function(t){ge(e,t);function e(n,i){var a;return n===void 0&&(n={}),i===void 0&&(i=function(){}),n.reportTouchActivity=!1,a=t.call(this,null,n,i)||this,a.onDurationChange_=function(s){return a.onDurationChange(s)},a.trackProgress_=function(s){return a.trackProgress(s)},a.trackCurrentTime_=function(s){return a.trackCurrentTime(s)},a.stopTrackingCurrentTime_=function(s){return a.stopTrackingCurrentTime(s)},a.disposeSourceHandler_=function(s){return a.disposeSourceHandler(s)},a.queuedHanders_=new Set,a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),Lr.names.forEach(function(s){var o=Lr[s];n&&n[o.getterName]&&(a[o.privateName]=n[o.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){n["native"+s+"Tracks"]===!1&&(a["featuresNative"+s+"Tracks"]=!1)}),n.nativeCaptions===!1||n.nativeTextTracks===!1?a.featuresNativeTextTracks=!1:(n.nativeCaptions===!0||n.nativeTextTracks===!0)&&(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.preloadTextTracks=n.preloadTextTracks!==!1,a.autoRemoteTextTracks_=new Lr.text.ListClass,a.initTrackListeners(),n.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}var r=e.prototype;return r.triggerSourceset=function(i){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},r.trackProgress=function(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Et(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(i){this.duration_=this.duration()},r.buffered=function(){return ms(0,0)},r.bufferedPercent=function(){return nP(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(mi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},r.clearTracks=function(i){var a=this;i=[].concat(i),i.forEach(function(s){for(var o=a[s+"Tracks"]()||[],l=o.length;l--;){var c=o[l];s==="text"&&a.removeRemoteTextTrack(c),o.removeTrack(c)}})},r.cleanupAutoTextTracks=function(){for(var i=this.autoRemoteTextTracks_||[],a=i.length;a--;){var s=i[a];this.removeRemoteTextTrack(s)}},r.reset=function(){},r.crossOrigin=function(){},r.setCrossOrigin=function(){},r.error=function(i){return i!==void 0&&(this.error_=new jr(i),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?ms(0,0):ms()},r.play=function(){},r.setScrubbing=function(){},r.scrubbing=function(){},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var i=this;mi.names.forEach(function(a){var s=mi[a],o=function(){i.trigger(a+"trackchange")},l=i[s.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),i.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},r.addWebVttScript_=function(){var i=this;if(!L.WebVTT)if(ce.body.contains(this.el())){if(!this.options_["vtt.js"]&&su(OT)&&Object.keys(OT).length>0){this.trigger("vttjsloaded");return}var a=ce.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){i.trigger("vttjsloaded")},a.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),L.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},r.emulateTextTracks=function(){var i=this,a=this.textTracks(),s=this.remoteTextTracks(),o=function(h){return a.addTrack(h.track)},l=function(h){return a.removeTrack(h.track)};s.on("addtrack",o),s.on("removetrack",l),this.addWebVttScript_();var c=function(){return i.trigger("texttrackchange")},u=function(){c();for(var h=0;h<a.length;h++){var p=a[h];p.removeEventListener("cuechange",c),p.mode==="showing"&&p.addEventListener("cuechange",c)}};u(),a.addEventListener("change",u),a.addEventListener("addtrack",u),a.addEventListener("removetrack",u),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",l),a.removeEventListener("change",u),a.removeEventListener("addtrack",u),a.removeEventListener("removetrack",u);for(var d=0;d<a.length;d++){var h=a[d];h.removeEventListener("cuechange",c)}})},r.addTextTrack=function(i,a,s){if(!i)throw new Error("TextTrack kind is required but was not provided");return J9(this,i,a,s)},r.createRemoteTextTrack=function(i){var a=Tt(i,{tech:this});return new Ko.remoteTextEl.TrackClass(a)},r.addRemoteTextTrack=function(i,a){var s=this;i===void 0&&(i={});var o=this.createRemoteTextTrack(i);return a!==!0&&a!==!1&&(Xe.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),a!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},r.removeRemoteTextTrack=function(i){var a=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictureInPicture=function(){var i=this.options_.Promise||L.Promise;if(i)return i.reject()},r.disablePictureInPicture=function(){return!0},r.setDisablePictureInPicture=function(){},r.requestVideoFrameCallback=function(i){var a=this,s=Wn();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){a.queuedHanders_.has(s)&&(a.queuedHanders_.delete(s),i())})):this.requestNamedAnimationFrame(s,i),s},r.cancelVideoFrameCallback=function(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(i,a){return e.canPlayType(i.type)},e.isTech=function(i){return i.prototype instanceof e||i instanceof e||i===e},e.registerTech=function(i,a){if(e.techs_||(e.techs_={}),!e.isTech(a))throw new Error("Tech "+i+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=jt(i),e.techs_[i]=a,e.techs_[fh(i)]=a,i!=="Tech"&&e.defaultTechOrder_.push(i),a},e.getTech=function(i){if(!!i){if(e.techs_&&e.techs_[i])return e.techs_[i];if(i=jt(i),L&&L.videojs&&L.videojs[i])return Xe.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),L.videojs[i]}},e}(Z);Lr.names.forEach(function(t){var e=Lr[t];bt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});bt.prototype.featuresVolumeControl=!0;bt.prototype.featuresMuteControl=!0;bt.prototype.featuresFullscreenResize=!1;bt.prototype.featuresPlaybackRate=!1;bt.prototype.featuresProgressEvents=!1;bt.prototype.featuresSourceset=!1;bt.prototype.featuresTimeupdateEvents=!1;bt.prototype.featuresNativeTextTracks=!1;bt.prototype.featuresVideoFrameCallback=!1;bt.withSourceHandlers=function(t){t.registerSourceHandler=function(r,n){var i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),n===void 0&&(n=i.length),i.splice(n,0,r)},t.canPlayType=function(r){for(var n=t.sourceHandlers||[],i,a=0;a<n.length;a++)if(i=n[a].canPlayType(r),i)return i;return""},t.selectSourceHandler=function(r,n){for(var i=t.sourceHandlers||[],a,s=0;s<i.length;s++)if(a=i[s].canHandleSource(r,n),a)return i[s];return null},t.canPlaySource=function(r,n){var i=t.selectSourceHandler(r,n);return i?i.canHandleSource(r,n):""};var e=["seekable","seeking","duration"];e.forEach(function(r){var n=this[r];typeof n=="function"&&(this[r]=function(){return this.sourceHandler_&&this.sourceHandler_[r]?this.sourceHandler_[r].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(r){var n=t.selectSourceHandler(r,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:Xe.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==t.nativeSourceHandler&&(this.currentSource_=r),this.sourceHandler_=n.handleSource(r,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Z.registerComponent("Tech",bt);bt.registerTech("Tech",bt);bt.defaultTechOrder_=[];var vs={},kv={},of={};function Z9(t,e){vs[t]=vs[t]||[],vs[t].push(e)}function eW(t,e,r){t.setTimeout(function(){return Ka(e,vs[e.type],r,t)},1)}function tW(t,e){t.forEach(function(r){return r.setTech&&r.setTech(e)})}function rW(t,e,r){return t.reduceRight(kb(r),e[r]())}function iW(t,e,r,n){return e[r](t.reduce(kb(r),n))}function v1(t,e,r,n){n===void 0&&(n=null);var i="call"+jt(r),a=t.reduce(kb(i),n),s=a===of,o=s?null:e[r](a);return sW(t,r,o,s),o}var nW={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},aW={setCurrentTime:1,setMuted:1,setVolume:1},y1={play:1,pause:1};function kb(t){return function(e,r){return e===of?of:r[t]?r[t](e):e}}function sW(t,e,r,n){for(var i=t.length-1;i>=0;i--){var a=t[i];a[e]&&a[e](n,r)}}function oW(t){kv[t.id()]=null}function lW(t,e){var r=kv[t.id()],n=null;if(r==null)return n=e(t),kv[t.id()]=[[e,n]],n;for(var i=0;i<r.length;i++){var a=r[i],s=a[0],o=a[1];s===e&&(n=o)}return n===null&&(n=e(t),r.push([e,n])),n}function Ka(t,e,r,n,i,a){t===void 0&&(t={}),e===void 0&&(e=[]),i===void 0&&(i=[]),a===void 0&&(a=!1);var s=e,o=s[0],l=s.slice(1);if(typeof o=="string")Ka(t,vs[o],r,n,i,a);else if(o){var c=lW(n,o);if(!c.setSource)return i.push(c),Ka(t,l,r,n,i,a);c.setSource(Ot({},t),function(u,d){if(u)return Ka(t,l,r,n,i,a);i.push(c),Ka(d,t.type===d.type?l:vs[d.type],r,n,i,a)})}else l.length?Ka(t,l,r,n,i,a):a?r(t,i):Ka(t,vs["*"],r,n,i,!0)}var cW={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},lf=function(e){e===void 0&&(e="");var r=Sb(e),n=cW[r.toLowerCase()];return n||""},uW=function(e,r){if(!r)return"";if(e.cache_.source.src===r&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(o){return o.src===r});if(n.length)return n[0].type;for(var i=e.$$("source"),a=0;a<i.length;a++){var s=i[a];if(s.type&&s.src&&s.src===r)return s.type}return lf(r)},dW=function t(e){if(Array.isArray(e)){var r=[];e.forEach(function(n){n=t(n),Array.isArray(n)?r=r.concat(n):zn(n)&&r.push(n)}),e=r}else typeof e=="string"&&e.trim()?e=[b1({src:e})]:zn(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[b1(e)]:e=[];return e};function b1(t){if(!t.type){var e=lf(t.src);e&&(t.type=e)}return t}var hW=function(t){ge(e,t);function e(r,n,i){var a,s=Tt({createEl:!1},n);if(a=t.call(this,r,s,i)||this,!n.playerOptions.sources||n.playerOptions.sources.length===0)for(var o=0,l=n.playerOptions.techOrder;o<l.length;o++){var c=jt(l[o]),u=bt.getTech(c);if(c||(u=Z.getComponent(c)),u&&u.isSupported()){r.loadTech_(c);break}}else r.src(n.playerOptions.sources);return a}return e}(Z);Z.registerComponent("MediaLoader",hW);var Fp=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.options_.controlText&&a.controlText(a.options_.controlText),a.handleMouseOver_=function(s){return a.handleMouseOver(s)},a.handleMouseOut_=function(s){return a.handleMouseOut(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.emitTapEvents(),a.enable(),a}var r=e.prototype;return r.createEl=function(i,a,s){i===void 0&&(i="div"),a===void 0&&(a={}),s===void 0&&(s={}),a=Ot({className:this.buildCSSClass(),tabIndex:0},a),i==="button"&&Xe.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),s=Ot({role:"button"},s),this.tabIndex_=a.tabIndex;var o=tt(i,a,s);return o.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},r.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},r.createControlTextEl=function(i){return this.controlTextEl_=tt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},r.controlText=function(i,a){if(a===void 0&&(a=this.el()),i===void 0)return this.controlText_||"Need Text";var s=this.localize(i);this.controlText_=i,js(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",s)},r.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},r.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_!="undefined"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},r.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_!="undefined"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},r.handleLanguagechange=function(){this.controlText(this.controlText_)},r.handleClick=function(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},r.handleKeyDown=function(i){ze.isEventKey(i,"Space")||ze.isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,i)},e}(Z);Z.registerComponent("ClickableComponent",Fp);var fW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update(),a.update_=function(s){return a.update(s)},n.on("posterchange",a.update_),a}var r=e.prototype;return r.dispose=function(){this.player().off("posterchange",this.update_),t.prototype.dispose.call(this)},r.createEl=function(){var i=tt("div",{className:"vjs-poster",tabIndex:-1});return i},r.update=function(i){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},r.setSrc=function(i){var a="";i&&(a='url("'+i+'")'),this.el_.style.backgroundImage=a},r.handleClick=function(i){if(!!this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Hu||Vu)&&a)&&this.player_.tech(!0).focus(),this.player_.paused()?Wi(this.player_.play()):this.player_.pause()}},e}(Fp);Z.registerComponent("PosterImage",fW);var di="#222",w1="#ccc",pW={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Qg(t,e){var r;if(t.length===4)r=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)r=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+e+")"}function Jg(t,e,r){try{t.style[e]=r}catch{return}}var gW=function(t){ge(e,t);function e(n,i,a){var s;s=t.call(this,n,i,a)||this;var o=function(c){return s.updateDisplay(c)};return n.on("loadstart",function(l){return s.toggleDisplay(l)}),n.on("texttrackchange",o),n.on("loadedmetadata",function(l){return s.preselectTrack(l)}),n.ready(Et(Ne(s),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks){this.hide();return}n.on("fullscreenchange",o),n.on("playerresize",o),L.addEventListener("orientationchange",o),n.on("dispose",function(){return L.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],c=0;c<l.length;c++)this.player_.addRemoteTextTrack(l[c],!0);this.preselectTrack()})),s}var r=e.prototype;return r.preselectTrack=function(){for(var i={captions:1,subtitles:1},a=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,l,c,u=0;u<a.length;u++){var d=a[u];s&&s.enabled&&s.language&&s.language===d.language&&d.kind in i?d.kind===s.kind?c=d:c||(c=d):s&&!s.enabled?(c=null,o=null,l=null):d.default&&(d.kind==="descriptions"&&!o?o=d:d.kind in i&&!l&&(l=d))}c?c.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},r.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},r.clearDisplay=function(){typeof L.WebVTT=="function"&&L.WebVTT.processCues(L,[],this.el_)},r.updateDisplay=function(){var i=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],o=0;o<i.length;++o){var l=i[o];l.mode==="showing"&&s.push(l)}this.updateForTrack(s);return}for(var c=null,u=null,d=i.length;d--;){var h=i[d];h.mode==="showing"&&(h.kind==="descriptions"?c=h:u=h)}u?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(u)):c&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(c))},r.updateDisplayState=function(i){for(var a=this.player_.textTrackSettings.getValues(),s=i.activeCues,o=s.length;o--;){var l=s[o];if(!!l){var c=l.displayState;if(a.color&&(c.firstChild.style.color=a.color),a.textOpacity&&Jg(c.firstChild,"color",Qg(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(c.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&Jg(c.firstChild,"backgroundColor",Qg(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?Jg(c,"backgroundColor",Qg(a.windowColor,a.windowOpacity)):c.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?c.firstChild.style.textShadow="2px 2px 3px "+di+", 2px 2px 4px "+di+", 2px 2px 5px "+di:a.edgeStyle==="raised"?c.firstChild.style.textShadow="1px 1px "+di+", 2px 2px "+di+", 3px 3px "+di:a.edgeStyle==="depressed"?c.firstChild.style.textShadow="1px 1px "+w1+", 0 1px "+w1+", -1px -1px "+di+", 0 -1px "+di:a.edgeStyle==="uniform"&&(c.firstChild.style.textShadow="0 0 4px "+di+", 0 0 4px "+di+", 0 0 4px "+di+", 0 0 4px "+di)),a.fontPercent&&a.fontPercent!==1){var u=L.parseFloat(c.style.fontSize);c.style.fontSize=u*a.fontPercent+"px",c.style.height="auto",c.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?c.firstChild.style.fontVariant="small-caps":c.firstChild.style.fontFamily=pW[a.fontFamily])}}},r.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),!(typeof L.WebVTT!="function"||i.every(function(p){return!p.activeCues}))){for(var a=[],s=0;s<i.length;++s)for(var o=i[s],l=0;l<o.activeCues.length;++l)a.push(o.activeCues[l]);L.WebVTT.processCues(L,a,this.el_);for(var c=0;c<i.length;++c){for(var u=i[c],d=0;d<u.activeCues.length;++d){var h=u.activeCues[d].displayState;An(h,"vjs-text-track-cue"),An(h,"vjs-text-track-cue-"+(u.language?u.language:c)),u.language&&qo(h,"lang",u.language)}this.player_.textTrackSettings&&this.updateDisplayState(u)}}},e}(Z);Z.registerComponent("TextTrackDisplay",gW);var mW=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=this.player_.isAudio(),a=this.localize(i?"Audio Player":"Video Player"),s=tt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),o=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},e}(Z);Z.registerComponent("LoadingSpinner",mW);var Li=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(i,a,s){a===void 0&&(a={}),s===void 0&&(s={}),i="button",a=Ot({className:this.buildCSSClass()},a),s=Ot({type:"button"},s);var o=tt(i,a,s);return o.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},r.addChild=function(i,a){a===void 0&&(a={});var s=this.constructor.name;return Xe.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),Z.prototype.addChild.call(this,i,a)},r.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},r.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},r.handleKeyDown=function(i){if(ze.isEventKey(i,"Space")||ze.isEventKey(i,"Enter")){i.stopPropagation();return}t.prototype.handleKeyDown.call(this,i)},e}(Fp);Z.registerComponent("Button",Li);var dP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.mouseused_=!1,a.on("mousedown",function(s){return a.handleMouseDown(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-big-play-button"},r.handleClick=function(i){var a=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Wi(a),this.player_.tech(!0)&&!((Hu||Vu)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var c=function(){return l.focus()};xc(a)?a.then(c,function(){}):this.setTimeout(c,1)},r.handleKeyDown=function(i){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,i)},r.handleMouseDown=function(i){this.mouseused_=!0},e}(Li);dP.prototype.controlText_="Play Video";Z.registerComponent("BigPlayButton",dP);var vW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.controlText(i&&i.controlText||a.localize("Close")),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){this.trigger({type:"close",bubbles:!1})},r.handleKeyDown=function(i){ze.isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,i)},e}(Li);Z.registerComponent("CloseButton",vW);var hP=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,i.replay=i.replay===void 0||i.replay,a.on(n,"play",function(s){return a.handlePlay(s)}),a.on(n,"pause",function(s){return a.handlePause(s)}),i.replay&&a.on(n,"ended",function(s){return a.handleEnded(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){this.player_.paused()?Wi(this.player_.play()):this.player_.pause()},r.handleSeeked=function(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},r.handlePlay=function(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.handlePause=function(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.handleEnded=function(i){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return a.handleSeeked(s)})},e}(Li);hP.prototype.controlText_="Play";Z.registerComponent("PlayToggle",hP);var fP=function(e,r){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),a=Math.floor(e/3600),s=Math.floor(r/60%60),o=Math.floor(r/3600);return(isNaN(e)||e===1/0)&&(a=i=n="-"),a=a>0||o>0?a+":":"",i=((a||s>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,a+i+n},Eb=fP;function yW(t){Eb=t}function bW(){Eb=fP}function Yo(t,e){return e===void 0&&(e=t),Eb(t,e)}var Tl=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,["timeupdate","ended"],function(s){return a.updateContent(s)}),a.updateTextNode_(),a}var r=e.prototype;return r.createEl=function(){var i=this.buildCSSClass(),a=t.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control"}),s=tt("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return a.appendChild(s),this.contentEl_=tt("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},r.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},r.updateTextNode_=function(i){var a=this;i===void 0&&(i=0),i=Yo(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!!a.contentEl_){var s=a.textNode_;s&&a.contentEl_.firstChild!==s&&(s=null,Xe.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=ce.createTextNode(a.formattedTime_),a.textNode_&&(s?a.contentEl_.replaceChild(a.textNode_,s):a.contentEl_.appendChild(a.textNode_))}}))},r.updateContent=function(i){},e}(Z);Tl.prototype.labelText_="Time";Tl.prototype.controlText_="Time";Z.registerComponent("TimeDisplay",Tl);var Cb=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-current-time"},r.updateContent=function(i){var a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},e}(Tl);Cb.prototype.labelText_="Current Time";Cb.prototype.controlText_="Current Time";Z.registerComponent("CurrentTimeDisplay",Cb);var Ab=function(t){ge(e,t);function e(n,i){var a;a=t.call(this,n,i)||this;var s=function(l){return a.updateContent(l)};return a.on(n,"durationchange",s),a.on(n,"loadstart",s),a.on(n,"loadedmetadata",s),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-duration"},r.updateContent=function(i){var a=this.player_.duration();this.updateTextNode_(a)},e}(Tl);Ab.prototype.labelText_="Duration";Ab.prototype.controlText_="Duration";Z.registerComponent("DurationDisplay",Ab);var wW=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=t.prototype.createEl.call(this,"div"),s=t.prototype.createEl.call(this,"span",{textContent:"/"});return a.appendChild(s),i.appendChild(a),i},e}(Z);Z.registerComponent("TimeDivider",wW);var Ib=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"durationchange",function(s){return a.updateContent(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-remaining-time"},r.createEl=function(){var i=t.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&i.insertBefore(tt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},r.updateContent=function(i){if(typeof this.player_.duration()=="number"){var a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}},e}(Tl);Ib.prototype.labelText_="Remaining Time";Ib.prototype.controlText_="Remaining Time";Z.registerComponent("RemainingTimeDisplay",Ib);var _W=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.updateShowing(),a.on(a.player(),"durationchange",function(s){return a.updateShowing(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=tt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(tt("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(ce.createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i},r.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},r.updateShowing=function(i){this.player().duration()===1/0?this.show():this.hide()},e}(Z);Z.registerComponent("LiveDisplay",_W);var pP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.updateLiveEdgeStatus(),a.player_.liveTracker&&(a.updateLiveEdgeStatusHandler_=function(s){return a.updateLiveEdgeStatus(s)},a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatusHandler_)),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=tt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},r.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},r.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},r.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,t.prototype.dispose.call(this)},e}(Li);pP.prototype.controlText_="Seek to live, currently playing live";Z.registerComponent("SeekToLive",pP);var Bp=function(e,r,n){return e=Number(e),Math.min(n,Math.max(r,isNaN(e)?r:e))},Pb=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleMouseDown_=function(s){return a.handleMouseDown(s)},a.handleMouseUp_=function(s){return a.handleMouseUp(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleMouseMove_=function(s){return a.handleMouseMove(s)},a.update_=function(s){return a.update(s)},a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}var r=e.prototype;return r.enabled=function(){return this.enabled_},r.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},r.disable=function(){if(!!this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},r.createEl=function(i,a,s){return a===void 0&&(a={}),s===void 0&&(s={}),a.className=a.className+" vjs-slider",a=Ot({tabIndex:0},a),s=Ot({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),t.prototype.createEl.call(this,i,a,s)},r.handleMouseDown=function(i){var a=this.bar.el_.ownerDocument;i.type==="mousedown"&&i.preventDefault(),i.type==="touchstart"&&!Gn&&i.preventDefault(),V2(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},r.handleMouseMove=function(i){},r.handleMouseUp=function(){var i=this.bar.el_.ownerDocument;H2(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},r.update=function(){var i=this;if(!(!this.el_||!this.bar)){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=i.vertical()?"height":"width";i.bar.el().style[s]=(a*100).toFixed(2)+"%"})),a}},r.getProgress=function(){return Number(Bp(this.getPercent(),0,1).toFixed(4))},r.calculateDistance=function(i){var a=Lp(this.el_,i);return this.vertical()?a.y:a.x},r.handleKeyDown=function(i){ze.isEventKey(i,"Left")||ze.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):ze.isEventKey(i,"Right")||ze.isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,i)},r.handleClick=function(i){i.stopPropagation(),i.preventDefault()},r.vertical=function(i){if(i===void 0)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Z);Z.registerComponent("Slider",Pb);var Zg=function(e,r){return Bp(e/r*100,0,100).toFixed(2)+"%"},xW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.partEls_=[],a.on(n,"progress",function(s){return a.update(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=tt("span",{className:"vjs-control-text"}),s=tt("span",{textContent:this.localize("Loaded")}),o=ce.createTextNode(": ");return this.percentageEl_=tt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(a),a.appendChild(s),a.appendChild(o),a.appendChild(this.percentageEl_),i},r.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},r.update=function(i){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=a.player_.liveTracker,o=a.player_.buffered(),l=s&&s.isLive()?s.seekableEnd():a.player_.duration(),c=a.player_.bufferedEnd(),u=a.partEls_,d=Zg(c,l);a.percent_!==d&&(a.el_.style.width=d,js(a.percentageEl_,d),a.percent_=d);for(var h=0;h<o.length;h++){var p=o.start(h),y=o.end(h),w=u[h];w||(w=a.el_.appendChild(tt()),u[h]=w),!(w.dataset.start===p&&w.dataset.end===y)&&(w.dataset.start=p,w.dataset.end=y,w.style.left=Zg(p,c),w.style.width=Zg(y-p,c))}for(var v=u.length;v>o.length;v--)a.el_.removeChild(u[v-1]);u.length=o.length})},e}(Z);Z.registerComponent("LoadProgressBar",xW);var TW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=$n(Et(Ne(a),a.update),Mi),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},r.update=function(i,a,s){var o=lu(this.el_),l=Go(this.player_.el()),c=i.width*a;if(!(!l||!o)){var u=i.left-l.left+c,d=i.width-c+(l.right-i.right),h=o.width/2;u<h?h+=h-u:d<h&&(h=d),h<0?h=0:h>o.width&&(h=o.width),h=Math.round(h),this.el_.style.right="-"+h+"px",this.write(s)}},r.write=function(i){js(this.el_,i)},r.updateTime=function(i,a,s,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var c,u=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var d=l.player_.liveTracker.liveWindow(),h=d-a*d;c=(h<1?"":"-")+Yo(h,d)}else c=Yo(s,u);l.update(i,a,c),o&&o()})},e}(Z);Z.registerComponent("TimeTooltip",TW);var Ob=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=$n(Et(Ne(a),a.update),Mi),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},r.update=function(i,a){var s=this.getChild("timeTooltip");if(!!s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(i,a,o)}},e}(Z);Ob.prototype.options_={children:[]};!Br&&!qn&&Ob.prototype.options_.children.push("timeTooltip");Z.registerComponent("PlayProgressBar",Ob);var gP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=$n(Et(Ne(a),a.update),Mi),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(i,a){var s=this,o=a*this.player_.duration();this.getChild("timeTooltip").updateTime(i,a,o,function(){s.el_.style.left=i.width*a+"px"})},e}(Z);gP.prototype.options_={children:["timeTooltip"]};Z.registerComponent("MouseTimeDisplay",gP);var qd=5,_1=12,Db=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.setEventHandlers_(),a}var r=e.prototype;return r.setEventHandlers_=function(){var i=this;this.update_=Et(this,this.update),this.update=$n(this.update_,Mi),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return i.enableInterval_(a)},this.disableIntervalHandler_=function(a){return i.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ce&&"visibilityState"in ce&&this.on(ce,"visibilitychange",this.toggleVisibility_)},r.toggleVisibility_=function(i){ce.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},r.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Mi))},r.disableInterval_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&i.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.update=function(i){var a=this;if(ce.visibilityState!=="hidden"){var s=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),l=a.player_.liveTracker,c=a.player_.duration();l&&l.isLive()&&(c=a.player_.liveTracker.liveCurrentTime()),a.percent_!==s&&(a.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),a.percent_=s),(a.currentTime_!==o||a.duration_!==c)&&(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[Yo(o,c),Yo(c,c)],"{1} of {2}")),a.currentTime_=o,a.duration_=c),a.bar&&a.bar.update(Go(a.el()),a.getProgress())}),s}},r.userSeek_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},r.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.getPercent=function(){var i=this.getCurrentTime_(),a,s=this.player_.liveTracker;return s&&s.isLive()?(a=(i-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(a=1)):a=i/this.player_.duration(),a},r.handleMouseDown=function(i){!cu(i)||(i.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,i))},r.handleMouseMove=function(i,a){if(a===void 0&&(a=!1),!!cu(i)){!a&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(i),l=this.player_.liveTracker;if(!l||!l.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){l.seekToLiveEdge();return}var c=l.seekableStart(),u=l.liveCurrentTime();if(s=c+o*l.liveWindow(),s>=u&&(s=u),s<=c&&(s=c+.1),s===1/0)return}this.userSeek_(s)}},r.enable=function(){t.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");!i||i.show()},r.disable=function(){t.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");!i||i.hide()},r.handleMouseUp=function(i){t.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Wi(this.player_.play()):this.update_()},r.stepForward=function(){this.userSeek_(this.player_.currentTime()+qd)},r.stepBack=function(){this.userSeek_(this.player_.currentTime()-qd)},r.handleAction=function(i){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(i){var a=this.player_.liveTracker;if(ze.isEventKey(i,"Space")||ze.isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if(ze.isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if(ze.isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(ze(i))){i.preventDefault(),i.stopPropagation();var s=(ze.codes[ze(i)]-ze.codes[0])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else ze.isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-qd*_1)):ze.isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+qd*_1)):t.prototype.handleKeyDown.call(this,i)},r.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ce&&"visibilityState"in ce&&this.off(ce,"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},e}(Pb);Db.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!Br&&!qn&&Db.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Z.registerComponent("SeekBar",Db);var mP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleMouseMove=$n(Et(Ne(a),a.handleMouseMove),Mi),a.throttledHandleMouseSeek=$n(Et(Ne(a),a.handleMouseSeek),Mi),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.handleMouseDownHandler_=function(s){return a.handleMouseDown(s)},a.enable(),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.handleMouseMove=function(i){var a=this.getChild("seekBar");if(!!a){var s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(!(!s&&!o)){var l=a.el(),c=lu(l),u=Lp(l,i).x;u=Bp(u,0,1),o&&o.update(c,u),s&&s.update(c,a.getProgress())}}},r.handleMouseSeek=function(i){var a=this.getChild("seekBar");a&&a.handleMouseMove(i)},r.enabled=function(){return this.enabled_},r.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&Wi(this.player_.play())}},r.enable=function(){this.children().forEach(function(i){return i.enable&&i.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},r.removeListenersAddedOnMousedownAndTouchstart=function(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},r.handleMouseDown=function(i){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(i),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(i){var a=this.getChild("seekBar");a&&a.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},e}(Z);mP.prototype.options_={children:["seekBar"]};Z.registerComponent("ProgressControl",mP);var vP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,["enterpictureinpicture","leavepictureinpicture"],function(s){return a.handlePictureInPictureChange(s)}),a.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(s){return a.handlePictureInPictureEnabledChange(s)}),a.on(n,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=n.currentType().substring(0,5)==="audio";s||n.audioPosterMode()||n.audioOnlyMode()?(n.isInPictureInPicture()&&n.exitPictureInPicture(),a.hide()):a.show()}),a.disable(),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},r.handlePictureInPictureEnabledChange=function(){ce.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},r.handlePictureInPictureChange=function(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},r.handleClick=function(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Li);vP.prototype.controlText_="Picture-in-Picture";Z.registerComponent("PictureInPictureToggle",vP);var yP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"fullscreenchange",function(s){return a.handleFullscreenChange(s)}),ce[n.fsApi_.fullscreenEnabled]===!1&&a.disable(),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},r.handleFullscreenChange=function(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.handleClick=function(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Li);yP.prototype.controlText_="Fullscreen";Z.registerComponent("FullscreenToggle",yP);var SW=function(e,r){r.tech_&&!r.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},kW=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return i.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),i},e}(Z);Z.registerComponent("VolumeLevel",kW);var EW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=$n(Et(Ne(a),a.update),Mi),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},r.update=function(i,a,s,o){if(!s){var l=Go(this.el_),c=Go(this.player_.el()),u=i.width*a;if(!c||!l)return;var d=i.left-c.left+u,h=i.width-u+(c.right-i.right),p=l.width/2;d<p?p+=p-d:h<p&&(p=h),p<0?p=0:p>l.width&&(p=l.width),this.el_.style.right="-"+p+"px"}this.write(o+"%")},r.write=function(i){js(this.el_,i)},r.updateVolume=function(i,a,s,o,l){var c=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){c.update(i,a,s,o.toFixed(0)),l&&l()})},e}(Z);Z.registerComponent("VolumeLevelTooltip",EW);var bP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=$n(Et(Ne(a),a.update),Mi),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(i,a,s){var o=this,l=100*a;this.getChild("volumeLevelTooltip").updateVolume(i,a,s,l,function(){s?o.el_.style.bottom=i.height*a+"px":o.el_.style.left=i.width*a+"px"})},e}(Z);bP.prototype.options_={children:["volumeLevelTooltip"]};Z.registerComponent("MouseVolumeLevelDisplay",bP);var Up=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on("slideractive",function(s){return a.updateLastVolume_(s)}),a.on(n,"volumechange",function(s){return a.updateARIAAttributes(s)}),n.ready(function(){return a.updateARIAAttributes()}),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.handleMouseDown=function(i){!cu(i)||t.prototype.handleMouseDown.call(this,i)},r.handleMouseMove=function(i){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var s=this.el(),o=Go(s),l=this.vertical(),c=Lp(s,i);c=l?c.y:c.x,c=Bp(c,0,1),a.update(o,c,l)}!cu(i)||(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},r.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.updateARIAAttributes=function(i){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},r.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},r.updateLastVolume_=function(){var i=this,a=this.player_.volume();this.one("sliderinactive",function(){i.player_.volume()===0&&i.player_.lastVolume_(a)})},e}(Pb);Up.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Br&&!qn&&Up.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Up.prototype.playerEvent="volumechange";Z.registerComponent("VolumeBar",Up);var wP=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),i.vertical=i.vertical||!1,(typeof i.volumeBar=="undefined"||su(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),a=t.call(this,n,i)||this,SW(Ne(a),n),a.throttledHandleMouseMove=$n(Et(Ne(a),a.handleMouseMove),Mi),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.on("mousedown",function(s){return a.handleMouseDown(s)}),a.on("touchstart",function(s){return a.handleMouseDown(s)}),a.on("mousemove",function(s){return a.handleMouseMove(s)}),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active"),a.addClass("vjs-slider-active"),a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active"),a.removeClass("vjs-slider-active"),a.trigger("sliderinactive")}),a}var r=e.prototype;return r.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},r.handleMouseDown=function(i){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(i){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseMove=function(i){this.volumeBar.handleMouseMove(i)},e}(Z);wP.prototype.options_={children:["volumeBar"]};Z.registerComponent("VolumeControl",wP);var CW=function(e,r){r.tech_&&!r.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(r,"loadstart",function(){r.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},_P=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,CW(Ne(a),n),a.on(n,["loadstart","volumechange"],function(s){return a.update(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){var a=this.player_.volume(),s=this.player_.lastVolume_();if(a===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},r.update=function(i){this.updateIcon_(),this.updateControlText_()},r.updateIcon_=function(){var i=this.player_.volume(),a=3;Br&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),i===0||this.player_.muted()?a=0:i<.33?a=1:i<.67&&(a=2);for(var s=0;s<4;s++)qu(this.el_,"vjs-vol-"+s);An(this.el_,"vjs-vol-"+a)},r.updateControlText_=function(){var i=this.player_.muted()||this.player_.volume()===0,a=i?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},e}(Li);_P.prototype.controlText_="Mute";Z.registerComponent("MuteToggle",_P);var xP=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),typeof i.inline!="undefined"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl=="undefined"||su(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),a=t.call(this,n,i)||this,a.handleKeyPressHandler_=function(s){return a.handleKeyPress(s)},a.on(n,["loadstart"],function(s){return a.volumePanelState_(s)}),a.on(a.muteToggle,"keyup",function(s){return a.handleKeyPress(s)}),a.on(a.volumeControl,"keyup",function(s){return a.handleVolumeControlKeyUp(s)}),a.on("keydown",function(s){return a.handleKeyPress(s)}),a.on("mouseover",function(s){return a.handleMouseOver(s)}),a.on("mouseout",function(s){return a.handleMouseOut(s)}),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}var r=e.prototype;return r.sliderActive_=function(){this.addClass("vjs-slider-active")},r.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},r.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},r.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},r.handleVolumeControlKeyUp=function(i){ze.isEventKey(i,"Esc")&&this.muteToggle.focus()},r.handleMouseOver=function(i){this.addClass("vjs-hover"),li(ce,"keyup",this.handleKeyPressHandler_)},r.handleMouseOut=function(i){this.removeClass("vjs-hover"),_r(ce,"keyup",this.handleKeyPressHandler_)},r.handleKeyPress=function(i){ze.isEventKey(i,"Esc")&&this.handleMouseOut()},e}(Z);xP.prototype.options_={children:["muteToggle","volumeControl"]};Z.registerComponent("VolumePanel",xP);var TP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,i&&(a.menuButton_=i.menuButton),a.focusedChild_=-1,a.on("keydown",function(s){return a.handleKeyDown(s)}),a.boundHandleBlur_=function(s){return a.handleBlur(s)},a.boundHandleTapClick_=function(s){return a.handleTapClick(s)},a}var r=e.prototype;return r.addEventListenerForItem=function(i){i instanceof Z&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},r.removeEventListenerForItem=function(i){i instanceof Z&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},r.removeChild=function(i){typeof i=="string"&&(i=this.getChild(i)),this.removeEventListenerForItem(i),t.prototype.removeChild.call(this,i)},r.addItem=function(i){var a=this.addChild(i);a&&this.addEventListenerForItem(a)},r.createEl=function(){var i=this.options_.contentElType||"ul";this.contentEl_=tt(i,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),li(a,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),a},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},r.handleBlur=function(i){var a=i.relatedTarget||ce.activeElement;if(!this.children().some(function(o){return o.el()===a})){var s=this.menuButton_;s&&s.buttonPressed_&&a!==s.el().firstChild&&s.unpressButton()}},r.handleTapClick=function(i){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var s=a.filter(function(o){return o.el()===i.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},r.handleKeyDown=function(i){ze.isEventKey(i,"Left")||ze.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(ze.isEventKey(i,"Right")||ze.isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},r.stepForward=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_+1),this.focus(i)},r.stepBack=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_-1),this.focus(i)},r.focus=function(i){i===void 0&&(i=0);var a=this.children().slice(),s=a.length&&a[0].hasClass("vjs-menu-title");s&&a.shift(),a.length>0&&(i<0?i=0:i>=a.length&&(i=a.length-1),this.focusedChild_=i,a[i].el_.focus())},e}(Z);Z.registerComponent("Menu",TP);var Lb=function(t){ge(e,t);function e(n,i){var a;i===void 0&&(i={}),a=t.call(this,n,i)||this,a.menuButton_=new Li(n,i),a.menuButton_.controlText(a.controlText_),a.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Li.prototype.buildCSSClass();a.menuButton_.el_.className=a.buildCSSClass()+" "+s,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0;var o=function(c){return a.handleClick(c)};return a.handleMenuKeyUp_=function(l){return a.handleMenuKeyUp(l)},a.on(a.menuButton_,"tap",o),a.on(a.menuButton_,"click",o),a.on(a.menuButton_,"keydown",function(l){return a.handleKeyDown(l)}),a.on(a.menuButton_,"mouseenter",function(){a.addClass("vjs-hover"),a.menu.show(),li(ce,"keyup",a.handleMenuKeyUp_)}),a.on("mouseleave",function(l){return a.handleMouseLeave(l)}),a.on("keydown",function(l){return a.handleSubmenuKeyDown(l)}),a}var r=e.prototype;return r.update=function(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},r.createMenu=function(){var i=new TP(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=tt("li",{className:"vjs-menu-title",textContent:jt(this.options_.title),tabIndex:-1}),s=new Z(this.player_,{el:a});i.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)i.addItem(this.items[o]);return i},r.createItems=function(){},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},r.buildWrapperCSSClass=function(){var i="vjs-menu-button";this.options_.inline===!0?i+="-inline":i+="-popup";var a=Li.prototype.buildCSSClass();return"vjs-menu-button "+i+" "+a+" "+t.prototype.buildCSSClass.call(this)},r.buildCSSClass=function(){var i="vjs-menu-button";return this.options_.inline===!0?i+="-inline":i+="-popup","vjs-menu-button "+i+" "+t.prototype.buildCSSClass.call(this)},r.controlText=function(i,a){return a===void 0&&(a=this.menuButton_.el()),this.menuButton_.controlText(i,a)},r.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},r.handleClick=function(i){this.buttonPressed_?this.unpressButton():this.pressButton()},r.handleMouseLeave=function(i){this.removeClass("vjs-hover"),_r(ce,"keyup",this.handleMenuKeyUp_)},r.focus=function(){this.menuButton_.focus()},r.blur=function(){this.menuButton_.blur()},r.handleKeyDown=function(i){ze.isEventKey(i,"Esc")||ze.isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),ze.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(ze.isEventKey(i,"Up")||ze.isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},r.handleMenuKeyUp=function(i){(ze.isEventKey(i,"Esc")||ze.isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},r.handleSubmenuKeyPress=function(i){this.handleSubmenuKeyDown(i)},r.handleSubmenuKeyDown=function(i){(ze.isEventKey(i,"Esc")||ze.isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),ze.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},r.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Br&&F2())return;this.menu.focus()}},r.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},r.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},r.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Z);Z.registerComponent("MenuButton",Lb);var Rb=function(t){ge(e,t);function e(r,n){var i,a=n.tracks;if(i=t.call(this,r,n)||this,i.items.length<=1&&i.hide(),!a)return Ne(i);var s=Et(Ne(i),i.update);return a.addEventListener("removetrack",s),a.addEventListener("addtrack",s),a.addEventListener("labelchange",s),i.player_.on("ready",s),i.player_.on("dispose",function(){a.removeEventListener("removetrack",s),a.removeEventListener("addtrack",s),a.removeEventListener("labelchange",s)}),i}return e}(Lb);Z.registerComponent("TrackButton",Rb);var AW=["Tab","Esc","Up","Down","Right","Left"],Wu=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.selectable=i.selectable,a.isSelected_=i.selected||!1,a.multiSelectable=i.multiSelectable,a.selected(a.isSelected_),a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem"),a}var r=e.prototype;return r.createEl=function(i,a,s){this.nonIconControl=!0;var o=t.prototype.createEl.call(this,"li",Ot({className:"vjs-menu-item",tabIndex:-1},a),s);return o.replaceChild(tt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},r.handleKeyDown=function(i){AW.some(function(a){return ze.isEventKey(i,a)})||t.prototype.handleKeyDown.call(this,i)},r.handleClick=function(i){this.selected(!0)},r.selected=function(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Fp);Z.registerComponent("MenuItem",Wu);var Ku=function(t){ge(e,t);function e(n,i){var a,s=i.track,o=n.textTracks();i.label=s.label||s.language||"Unknown",i.selected=s.mode==="showing",a=t.call(this,n,i)||this,a.track=s,a.kinds=(i.kinds||[i.kind||a.track.kind]).filter(Boolean);var l=function(){for(var h=arguments.length,p=new Array(h),y=0;y<h;y++)p[y]=arguments[y];a.handleTracksChange.apply(Ne(a),p)},c=function(){for(var h=arguments.length,p=new Array(h),y=0;y<h;y++)p[y]=arguments[y];a.handleSelectedLanguageChange.apply(Ne(a),p)};if(n.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",c),a.on("dispose",function(){n.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",c)}),o.onchange===void 0){var u;a.on(["tap","click"],function(){if(typeof L.Event!="object")try{u=new L.Event("change")}catch{}u||(u=ce.createEvent("Event"),u.initEvent("change",!0,!0)),o.dispatchEvent(u)})}return a.handleTracksChange(),a}var r=e.prototype;return r.handleClick=function(i){var a=this.track,s=this.player_.textTracks();if(t.prototype.handleClick.call(this,i),!!s)for(var o=0;o<s.length;o++){var l=s[o];this.kinds.indexOf(l.kind)!==-1&&(l===a?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},r.handleTracksChange=function(i){var a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)},r.handleSelectedLanguageChange=function(i){if(this.track.mode==="showing"){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(Wu);Z.registerComponent("TextTrackMenuItem",Ku);var SP=function(t){ge(e,t);function e(n,i){return i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,t.call(this,n,i)||this}var r=e.prototype;return r.handleTracksChange=function(i){for(var a=this.player().textTracks(),s=!0,o=0,l=a.length;o<l;o++){var c=a[o];if(this.options_.kinds.indexOf(c.kind)>-1&&c.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},r.handleSelectedLanguageChange=function(i){for(var a=this.player().textTracks(),s=!0,o=0,l=a.length;o<l;o++){var c=a[o];if(["captions","descriptions","subtitles"].indexOf(c.kind)>-1&&c.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Ku);Z.registerComponent("OffTextTrackMenuItem",SP);var Sl=function(t){ge(e,t);function e(n,i){return i===void 0&&(i={}),i.tracks=n.textTracks(),t.call(this,n,i)||this}var r=e.prototype;return r.createItems=function(i,a){i===void 0&&(i=[]),a===void 0&&(a=Ku);var s;this.label_&&(s=this.label_+" off"),i.push(new SP(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var c=o[l];if(this.kinds_.indexOf(c.kind)>-1){var u=new a(this.player_,{track:c,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});u.addClass("vjs-"+c.kind+"-menu-item"),i.push(u)}}return i},e}(Rb);Z.registerComponent("TextTrackButton",Sl);var kP=function(t){ge(e,t);function e(n,i){var a,s=i.track,o=i.cue,l=n.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=l&&l<o.endTime,a=t.call(this,n,i)||this,a.track=s,a.cue=o,a}var r=e.prototype;return r.handleClick=function(i){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(Wu);Z.registerComponent("ChaptersTrackMenuItem",kP);var Mb=function(t){ge(e,t);function e(n,i,a){var s;return s=t.call(this,n,i,a)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},r.update=function(i){if(!(i&&i.track&&i.track.kind!=="chapters")){var a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),t.prototype.update.call(this)):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&t.prototype.update.call(this)}},r.setTrack=function(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},r.findChaptersTrack=function(){for(var i=this.player_.textTracks()||[],a=i.length-1;a>=0;a--){var s=i[a];if(s.kind===this.kind_)return s}},r.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(jt(this.kind_))},r.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},r.createItems=function(){var i=[];if(!this.track_)return i;var a=this.track_.cues;if(!a)return i;for(var s=0,o=a.length;s<o;s++){var l=a[s],c=new kP(this.player_,{track:this.track_,cue:l});i.push(c)}return i},e}(Sl);Mb.prototype.kind_="chapters";Mb.prototype.controlText_="Chapters";Z.registerComponent("ChaptersButton",Mb);var Nb=function(t){ge(e,t);function e(n,i,a){var s;s=t.call(this,n,i,a)||this;var o=n.textTracks(),l=Et(Ne(s),s.handleTracksChange);return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var r=e.prototype;return r.handleTracksChange=function(i){for(var a=this.player().textTracks(),s=!1,o=0,l=a.length;o<l;o++){var c=a[o];if(c.kind!==this.kind_&&c.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},r.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Sl);Nb.prototype.kind_="descriptions";Nb.prototype.controlText_="Descriptions";Z.registerComponent("DescriptionsButton",Nb);var jb=function(t){ge(e,t);function e(n,i,a){return t.call(this,n,i,a)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Sl);jb.prototype.kind_="subtitles";jb.prototype.controlText_="Subtitles";Z.registerComponent("SubtitlesButton",jb);var Fb=function(t){ge(e,t);function e(n,i){var a;return i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",a=t.call(this,n,i)||this,a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+i.kind+" settings dialog"),a}var r=e.prototype;return r.handleClick=function(i){this.player().getChild("textTrackSettings").open()},e}(Ku);Z.registerComponent("CaptionSettingsMenuItem",Fb);var Bb=function(t){ge(e,t);function e(n,i,a){return t.call(this,n,i,a)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new Fb(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,i)},e}(Sl);Bb.prototype.kind_="captions";Bb.prototype.controlText_="Captions";Z.registerComponent("CaptionsButton",Bb);var EP=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(i,a,s){var o=t.prototype.createEl.call(this,i,a,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(tt("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(Ku);Z.registerComponent("SubsCapsMenuItem",EP);var Ub=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,a.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)>-1&&(a.label_="captions"),a.menuButton_.controlText(jt(a.label_)),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new Fb(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i=t.prototype.createItems.call(this,i,EP),i},e}(Sl);Ub.prototype.kinds_=["captions","subtitles"];Ub.prototype.controlText_="Subtitles";Z.registerComponent("SubsCapsButton",Ub);var CP=function(t){ge(e,t);function e(n,i){var a,s=i.track,o=n.audioTracks();i.label=s.label||s.language||"Unknown",i.selected=s.enabled,a=t.call(this,n,i)||this,a.track=s,a.addClass("vjs-"+s.kind+"-menu-item");var l=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];a.handleTracksChange.apply(Ne(a),d)};return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}var r=e.prototype;return r.createEl=function(i,a,s){var o=t.prototype.createEl.call(this,i,a,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(tt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},r.handleClick=function(i){if(t.prototype.handleClick.call(this,i),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];o!==this.track&&(o.enabled=o===this.track)}},r.handleTracksChange=function(i){this.selected(this.track.enabled)},e}(Wu);Z.registerComponent("AudioTrackMenuItem",CP);var AP=function(t){ge(e,t);function e(n,i){return i===void 0&&(i={}),i.tracks=n.audioTracks(),t.call(this,n,i)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(i){i===void 0&&(i=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];i.push(new CP(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return i},e}(Rb);AP.prototype.controlText_="Audio Track";Z.registerComponent("AudioTrackButton",AP);var zb=function(t){ge(e,t);function e(n,i){var a,s=i.rate,o=parseFloat(s,10);return i.label=s,i.selected=o===n.playbackRate(),i.selectable=!0,i.multiSelectable=!1,a=t.call(this,n,i)||this,a.label=s,a.rate=o,a.on(n,"ratechange",function(l){return a.update(l)}),a}var r=e.prototype;return r.handleClick=function(i){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},r.update=function(i){this.selected(this.player().playbackRate()===this.rate)},e}(Wu);zb.prototype.contentElType="button";Z.registerComponent("PlaybackRateMenuItem",zb);var IP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.menuButton_.el_.setAttribute("aria-describedby",a.labelElId_),a.updateVisibility(),a.updateLabel(),a.on(n,"loadstart",function(s){return a.updateVisibility(s)}),a.on(n,"ratechange",function(s){return a.updateLabel(s)}),a.on(n,"playbackrateschange",function(s){return a.handlePlaybackRateschange(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=tt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i},r.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){for(var i=this.playbackRates(),a=[],s=i.length-1;s>=0;s--)a.push(new zb(this.player(),{rate:i[s]+"x"}));return a},r.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.handleClick=function(i){var a=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(a),l=(o+1)%s.length;this.player().playbackRate(s[l])},r.handlePlaybackRateschange=function(i){this.update()},r.playbackRates=function(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},r.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},r.updateVisibility=function(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.updateLabel=function(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(Lb);IP.prototype.controlText_="Playback Rate";Z.registerComponent("PlaybackRateMenuButton",IP);var PP=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},r.createEl=function(i,a,s){return i===void 0&&(i="div"),a===void 0&&(a={}),s===void 0&&(s={}),a.className||(a.className=this.buildCSSClass()),t.prototype.createEl.call(this,i,a,s)},e}(Z);Z.registerComponent("Spacer",PP);var IW=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"})},e}(PP);Z.registerComponent("CustomControlSpacer",IW);var cf=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Z);cf.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in ce&&cf.prototype.options_.children.splice(cf.prototype.options_.children.length-1,0,"pictureInPictureToggle");Z.registerComponent("ControlBar",cf);var OP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"error",function(s){return a.open(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},r.content=function(){var i=this.player().error();return i?this.localize(i.message):""},e}(_l);OP.prototype.options_=yi({},_l.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Z.registerComponent("ErrorDisplay",OP);var em="vjs-text-track-settings",x1=["#000","Black"],T1=["#00F","Blue"],S1=["#0FF","Cyan"],k1=["#0F0","Green"],E1=["#F0F","Magenta"],C1=["#F00","Red"],A1=["#FFF","White"],I1=["#FF0","Yellow"],tm=["1","Opaque"],rm=["0.5","Semi-Transparent"],P1=["0","Transparent"],Ja={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[x1,A1,C1,k1,T1,I1,E1,S1]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[tm,rm,P1]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[A1,x1,C1,k1,T1,I1,E1,S1]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[tm,rm]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[P1,rm,tm]}};Ja.windowColor.options=Ja.backgroundColor.options;function DP(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function PW(t,e){var r=t.options[t.options.selectedIndex].value;return DP(r,e)}function OW(t,e,r){if(!!e){for(var n=0;n<t.options.length;n++)if(DP(t.options[n].value,r)===e){t.selectedIndex=n;break}}}var DW=function(t){ge(e,t);function e(n,i){var a;return i.temporary=!1,a=t.call(this,n,i)||this,a.updateDisplay=a.updateDisplay.bind(Ne(a)),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=tt("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),a.setDefaults(),i.persistTextTrackSettings===void 0&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),xo(Ja,function(s){a.on(a.$(s.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}var r=e.prototype;return r.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},r.createElSelect_=function(i,a,s){var o=this;a===void 0&&(a=""),s===void 0&&(s="label");var l=Ja[i],c=l.id.replace("%s",this.id_),u=[a,c].join(" ").trim();return["<"+s+' id="'+c+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+s+">",'<select aria-labelledby="'+u+'">'].concat(l.options.map(function(d){var h=c+"-"+d[1].replace(/\W+/g,"");return['<option id="'+h+'" value="'+d[0]+'" ','aria-labelledby="'+u+" "+h+'">',o.localize(d[1]),"</option>"].join("")})).concat("</select>").join("")},r.createElFgColor_=function(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},r.createElBgColor_=function(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},r.createElWinColor_=function(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},r.createElColors_=function(){return tt("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.createElFont_=function(){return tt("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.createElControls_=function(){var i=this.localize("restore all settings to the default values");return tt("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.label=function(){return this.localize("Caption Settings Dialog")},r.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.getValues=function(){var i=this;return w9(Ja,function(a,s,o){var l=PW(i.$(s.selector),s.parser);return l!==void 0&&(a[o]=l),a},{})},r.setValues=function(i){var a=this;xo(Ja,function(s,o){OW(a.$(s.selector),i[o],s.parser)})},r.setDefaults=function(){var i=this;xo(Ja,function(a){var s=a.hasOwnProperty("default")?a.default:0;i.$(a.selector).selectedIndex=s})},r.restoreSettings=function(){var i;try{i=JSON.parse(L.localStorage.getItem(em))}catch(a){Xe.warn(a)}i&&this.setValues(i)},r.saveSettings=function(){if(!!this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?L.localStorage.setItem(em,JSON.stringify(i)):L.localStorage.removeItem(em)}catch(a){Xe.warn(a)}}},r.updateDisplay=function(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},r.conditionalBlur_=function(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,a=i&&i.subsCapsButton,s=i&&i.captionsButton;a?a.focus():s&&s.focus()},e}(_l);Z.registerComponent("TextTrackSettings",DW);var LW=function(t){ge(e,t);function e(n,i){var a,s=i.ResizeObserver||L.ResizeObserver;i.ResizeObserver===null&&(s=!1);var o=Tt({createEl:!s,reportTouchActivity:!1},i);return a=t.call(this,n,o)||this,a.ResizeObserver=i.ResizeObserver||L.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=O9(function(){a.resizeHandler()},100,!1,Ne(a)),s?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(n.el())):(a.loadListener_=function(){if(!(!a.el_||!a.el_.contentWindow)){var l=a.debouncedHandler_,c=a.unloadListener_=function(){_r(this,"resize",l),_r(this,"unload",c),c=null};li(a.el_.contentWindow,"unload",c),li(a.el_.contentWindow,"resize",l)}},a.one("load",a.loadListener_)),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},r.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},r.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},e}(Z);Z.registerComponent("ResizeManager",LW);var RW={trackingThreshold:20,liveTolerance:15},MW=function(t){ge(e,t);function e(n,i){var a,s=Tt(RW,i,{createEl:!1});return a=t.call(this,n,s)||this,a.handleVisibilityChange_=function(o){return a.handleVisibilityChange(o)},a.trackLiveHandler_=function(){return a.trackLive_()},a.handlePlay_=function(o){return a.handlePlay(o)},a.handleFirstTimeupdate_=function(o){return a.handleFirstTimeupdate(o)},a.handleSeeked_=function(o){return a.handleSeeked(o)},a.seekToLiveEdge_=function(o){return a.seekToLiveEdge(o)},a.reset_(),a.on(a.player_,"durationchange",function(o){return a.handleDurationchange(o)}),a.on(a.player_,"canplay",function(){return a.toggleTracking()}),Hu&&"hidden"in ce&&"visibilityState"in ce&&a.on(ce,"visibilitychange",a.handleVisibilityChange_),a}var r=e.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(ce.hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var i=this.player_.seekable();if(!(!i||!i.length)){var a=Number(L.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),l=this.player_.currentTime(),c=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(c=!1),c!==this.behindLiveEdge_&&(this.behindLiveEdge_=c,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.toggleTracking()},r.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Mi),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},r.handleSeeked=function(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},r.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},r.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.end(s));return a.length?a.sort()[a.length-1]:1/0},r.seekableStart=function(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.start(s));return a.length?a.sort()[0]:0},r.liveWindow=function(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var i=this.seekableEnd();return this.lastSeekEnd_!==-1&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return typeof this.trackingInterval_=="number"},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(ce,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),t.prototype.dispose.call(this)},e}(Z);Z.registerComponent("LiveTracker",MW);var Ev=function(e){var r=e.el();if(r.hasAttribute("src"))return e.triggerSourceset(r.src),!0;var n=e.$$("source"),i=[],a="";if(!n.length)return!1;for(var s=0;s<n.length;s++){var o=n[s].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(a=i[0]),e.triggerSourceset(a),!0):!1},NW=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var r=ce.createElement(this.nodeName.toLowerCase());r.innerHTML=e;for(var n=ce.createDocumentFragment();r.childNodes.length;)n.appendChild(r.childNodes[0]);return this.innerText="",L.Element.prototype.appendChild.call(this,n),this.innerHTML}}),LP=function(e,r){for(var n={},i=0;i<e.length&&(n=Object.getOwnPropertyDescriptor(e[i],r),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},jW=function(e){return LP([e.el(),L.HTMLMediaElement.prototype,L.Element.prototype,NW],"innerHTML")},O1=function(e){var r=e.el();if(!r.resetSourceWatch_){var n={},i=jW(e),a=function(o){return function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=o.apply(r,c);return Ev(e),d}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){!r[s]||(n[s]=r[s],r[s]=a(n[s]))}),Object.defineProperty(r,"innerHTML",Tt(i,{set:a(i.set)})),r.resetSourceWatch_=function(){r.resetSourceWatch_=null,Object.keys(n).forEach(function(s){r[s]=n[s]}),Object.defineProperty(r,"innerHTML",i)},e.one("sourceset",r.resetSourceWatch_)}},FW=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?sP(L.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return L.Element.prototype.setAttribute.call(this,"src",e),e}}),BW=function(e){return LP([e.el(),L.HTMLMediaElement.prototype,FW],"src")},UW=function(e){if(!!e.featuresSourceset){var r=e.el();if(!r.resetSourceset_){var n=BW(e),i=r.setAttribute,a=r.load;Object.defineProperty(r,"src",Tt(n,{set:function(o){var l=n.set.call(r,o);return e.triggerSourceset(r.src),l}})),r.setAttribute=function(s,o){var l=i.call(r,s,o);return/src/i.test(s)&&e.triggerSourceset(r.src),l},r.load=function(){var s=a.call(r);return Ev(e)||(e.triggerSourceset(""),O1(e)),s},r.currentSrc?e.triggerSourceset(r.currentSrc):Ev(e)||O1(e),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=a,r.setAttribute=i,Object.defineProperty(r,"src",n),r.resetSourceWatch_&&r.resetSourceWatch_()}}}},$b=function(e,r,n,i){i===void 0&&(i=!0);var a=function(l){return Object.defineProperty(e,r,{value:l,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var l=n();return a(l),l}};return i&&(s.set=a),Object.defineProperty(e,r,s)},ye=function(t){ge(e,t);function e(n,i){var a;a=t.call(this,n,i)||this;var s=n.source,o=!1;if(a.featuresVideoFrameCallback=a.featuresVideoFrameCallback&&a.el_.tagName==="VIDEO",s&&(a.el_.currentSrc!==s.src||n.tag&&n.tag.initNetworkState_===3)?a.setSource(s):a.handleLateInit_(a.el_),n.enableSourceset&&a.setupSourcesetHandling_(),a.isScrubbing_=!1,a.el_.hasChildNodes()){for(var l=a.el_.childNodes,c=l.length,u=[];c--;){var d=l[c],h=d.nodeName.toLowerCase();h==="track"&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(d),a.remoteTextTracks().addTrack(d.track),a.textTracks().addTrack(d.track),!o&&!a.el_.hasAttribute("crossorigin")&&jp(d.src)&&(o=!0)):u.push(d))}for(var p=0;p<u.length;p++)a.el_.removeChild(u[p])}return a.proxyNativeTracks_(),a.featuresNativeTextTracks&&o&&Xe.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),a.restoreMetadataTracksInIOSNativePlayer_(),(Ho||vb||L2)&&n.nativeControlsForTouch===!0&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}var r=e.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){UW(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var i=this.textTracks(),a,s=function(){a=[];for(var c=0;c<i.length;c++){var u=i[c];u.kind==="metadata"&&a.push({track:u,storedMode:u.mode})}};s(),i.addEventListener("change",s),this.on("dispose",function(){return i.removeEventListener("change",s)});var o=function l(){for(var c=0;c<a.length;c++){var u=a[c];u.track.mode==="disabled"&&u.track.mode!==u.storedMode&&(u.track.mode=u.storedMode)}i.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",s),i.removeEventListener("change",o),i.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",s),i.addEventListener("change",s),i.removeEventListener("change",o)})},r.overrideNative_=function(i,a){var s=this;if(a===this["featuresNative"+i+"Tracks"]){var o=i.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var c=s.el()[o+"Tracks"];c.removeEventListener(l,s[o+"TracksListeners_"][l])}),this["featuresNative"+i+"Tracks"]=!a,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},r.overrideNativeAudioTracks=function(i){this.overrideNative_("Audio",i)},r.overrideNativeVideoTracks=function(i){this.overrideNative_("Video",i)},r.proxyNativeTracksForType_=function(i){var a=this,s=mi[i],o=this.el()[s.getterName],l=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var c={change:function(h){var p={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(p),i==="text"&&a[Ko.remoteText.getterName]().trigger(p)},addtrack:function(h){l.addTrack(h.track)},removetrack:function(h){l.removeTrack(h.track)}},u=function(){for(var h=[],p=0;p<l.length;p++){for(var y=!1,w=0;w<o.length;w++)if(o[w]===l[p]){y=!0;break}y||h.push(l[p])}for(;h.length;)l.removeTrack(h.shift())};this[s.getterName+"Listeners_"]=c,Object.keys(c).forEach(function(d){var h=c[d];o.addEventListener(d,h),a.on("dispose",function(p){return o.removeEventListener(d,h)})}),this.on("loadstart",u),this.on("dispose",function(d){return a.off("loadstart",u)})}},r.proxyNativeTracks_=function(){var i=this;mi.names.forEach(function(a){i.proxyNativeTracksForType_(a)})},r.createEl=function(){var i=this.options_.tag;if(!i||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(i){var a=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(a,i),e.disposeMediaElement(i),i=a}else{i=ce.createElement("video");var s=this.options_.tag&&gn(this.options_.tag),o=Tt({},s);(!Ho||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,z2(i,Ot(o,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}typeof this.options_.preload!="undefined"&&qo(i,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],c=0;c<l.length;c++){var u=l[c],d=this.options_[u];typeof d!="undefined"&&(d?qo(i,u,u):Dp(i,u),i[u]=d)}return i},r.handleLateInit_=function(i){if(!(i.networkState===0||i.networkState===3)){if(i.readyState===0){var a=!1,s=function(){a=!0};this.on("loadstart",s);var o=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),a||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),i.readyState>=2&&l.push("loadeddata"),i.readyState>=3&&l.push("canplay"),i.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(c){this.trigger(c)},this)})}},r.setScrubbing=function(i){this.isScrubbing_=i},r.scrubbing=function(){return this.isScrubbing_},r.setCurrentTime=function(i){try{this.isScrubbing_&&this.el_.fastSeek&&Op?this.el_.fastSeek(i):this.el_.currentTime=i}catch(a){Xe(a,"Video is not ready. (Video.js)")}},r.duration=function(){var i=this;if(this.el_.duration===1/0&&qn&&Gn&&this.el_.currentTime===0){var a=function s(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",s))};return this.on("timeupdate",a),NaN}return this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){i.off("webkitbeginfullscreen",s),i.off("webkitendfullscreen",a)})}},r.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var i=L.navigator&&L.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},r.enterFullScreen=function(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)Wi(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},r.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},r.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},r.requestVideoFrameCallback=function(i){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(i):t.prototype.requestVideoFrameCallback.call(this,i)},r.cancelVideoFrameCallback=function(i){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(i):t.prototype.cancelVideoFrameCallback.call(this,i)},r.src=function(i){if(i===void 0)return this.el_.src;this.setSrc(i)},r.reset=function(){e.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(i){this.el_.controls=!!i},r.addTextTrack=function(i,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,a,s):t.prototype.addTextTrack.call(this,i,a,s)},r.createRemoteTextTrack=function(i){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,i);var a=ce.createElement("track");return i.kind&&(a.kind=i.kind),i.label&&(a.label=i.label),(i.language||i.srclang)&&(a.srclang=i.language||i.srclang),i.default&&(a.default=i.default),i.id&&(a.id=i.id),i.src&&(a.src=i.src),a},r.addRemoteTextTrack=function(i,a){var s=t.prototype.addRemoteTextTrack.call(this,i,a);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},r.removeRemoteTextTrack=function(i){if(t.prototype.removeRemoteTextTrack.call(this,i),this.featuresNativeTextTracks)for(var a=this.$$("track"),s=a.length;s--;)(i===a[s]||i===a[s].track)&&this.el().removeChild(a[s])},r.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var i={};return typeof this.el().webkitDroppedFrameCount!="undefined"&&typeof this.el().webkitDecodedFrameCount!="undefined"&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),L.performance&&typeof L.performance.now=="function"?i.creationTime=L.performance.now():L.performance&&L.performance.timing&&typeof L.performance.timing.navigationStart=="number"&&(i.creationTime=L.Date.now()-L.performance.timing.navigationStart),i},e}(bt);$b(ye,"TEST_VID",function(){if(!!yl()){var t=ce.createElement("video"),e=ce.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}});ye.isSupported=function(){try{ye.TEST_VID.volume=.5}catch{return!1}return!!(ye.TEST_VID&&ye.TEST_VID.canPlayType)};ye.canPlayType=function(t){return ye.TEST_VID.canPlayType(t)};ye.canPlaySource=function(t,e){return ye.canPlayType(t.type)};ye.canControlVolume=function(){try{var t=ye.TEST_VID.volume;ye.TEST_VID.volume=t/2+.1;var e=t!==ye.TEST_VID.volume;return e&&Br?(L.setTimeout(function(){ye&&ye.prototype&&(ye.prototype.featuresVolumeControl=t!==ye.TEST_VID.volume)}),!1):e}catch{return!1}};ye.canMuteVolume=function(){try{var t=ye.TEST_VID.muted;return ye.TEST_VID.muted=!t,ye.TEST_VID.muted?qo(ye.TEST_VID,"muted","muted"):Dp(ye.TEST_VID,"muted","muted"),t!==ye.TEST_VID.muted}catch{return!1}};ye.canControlPlaybackRate=function(){if(qn&&Gn&&M2<58)return!1;try{var t=ye.TEST_VID.playbackRate;return ye.TEST_VID.playbackRate=t/2+.1,t!==ye.TEST_VID.playbackRate}catch{return!1}};ye.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(ce.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(ce.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(ce.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(ce.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};ye.supportsNativeTextTracks=function(){return Op||Br&&Gn};ye.supportsNativeVideoTracks=function(){return!!(ye.TEST_VID&&ye.TEST_VID.videoTracks)};ye.supportsNativeAudioTracks=function(){return!!(ye.TEST_VID&&ye.TEST_VID.audioTracks)};ye.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(t){var e=t[0],r=t[1];$b(ye.prototype,e,function(){return ye[r]()},!0)});ye.prototype.featuresVolumeControl=ye.canControlVolume();ye.prototype.movingMediaElementInDOM=!Br;ye.prototype.featuresFullscreenResize=!0;ye.prototype.featuresProgressEvents=!0;ye.prototype.featuresTimeupdateEvents=!0;ye.prototype.featuresVideoFrameCallback=!!(ye.TEST_VID&&ye.TEST_VID.requestVideoFrameCallback);var uf;ye.patchCanPlayType=function(){pb>=4&&!R2&&!Gn&&(uf=ye.TEST_VID&&ye.TEST_VID.constructor.prototype.canPlayType,ye.TEST_VID.constructor.prototype.canPlayType=function(t){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return t&&e.test(t)?"maybe":uf.call(this,t)})};ye.unpatchCanPlayType=function(){var t=ye.TEST_VID.constructor.prototype.canPlayType;return uf&&(ye.TEST_VID.constructor.prototype.canPlayType=uf),t};ye.patchCanPlayType();ye.disposeMediaElement=function(t){if(!!t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};ye.resetMediaElement=function(t){if(!!t){for(var e=t.querySelectorAll("source"),r=e.length;r--;)t.removeChild(e[r]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){ye.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){ye.prototype["set"+jt(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){ye.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){ye.prototype["set"+jt(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){ye.prototype[t]=function(){return this.el_[t]()}});bt.withSourceHandlers(ye);ye.nativeSourceHandler={};ye.nativeSourceHandler.canPlayType=function(t){try{return ye.TEST_VID.canPlayType(t)}catch{return""}};ye.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return ye.nativeSourceHandler.canPlayType(t.type);if(t.src){var r=Sb(t.src);return ye.nativeSourceHandler.canPlayType("video/"+r)}return""};ye.nativeSourceHandler.handleSource=function(t,e,r){e.setSrc(t.src)};ye.nativeSourceHandler.dispose=function(){};ye.registerSourceHandler(ye.nativeSourceHandler);bt.registerTech("Html5",ye);var RP=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],im={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Cv=["tiny","xsmall","small","medium","large","xlarge","huge"],ph={};Cv.forEach(function(t){var e=t.charAt(0)==="x"?"x-"+t.substring(1):t;ph[t]="vjs-layout-"+e});var zW={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Vt=function(t){ge(e,t);function e(n,i,a){var s;if(n.id=n.id||i.id||"vjs_video_"+Wn(),i=Ot(e.getTagSettings(n),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if(typeof n.closest=="function"){var o=n.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var l=n;l&&l.nodeType===1;){if(gn(l).hasOwnProperty("lang")){i.language=l.getAttribute("lang");break}l=l.parentNode}if(s=t.call(this,null,i,a)||this,s.boundDocumentFullscreenChange_=function(h){return s.documentFullscreenChange_(h)},s.boundFullWindowOnEscKey_=function(h){return s.fullWindowOnEscKey(h)},s.boundUpdateStyleEl_=function(h){return s.updateStyleEl_(h)},s.boundApplyInitTime_=function(h){return s.applyInitTime_(h)},s.boundUpdateCurrentBreakpoint_=function(h){return s.updateCurrentBreakpoint_(h)},s.boundHandleTechClick_=function(h){return s.handleTechClick_(h)},s.boundHandleTechDoubleClick_=function(h){return s.handleTechDoubleClick_(h)},s.boundHandleTechTouchStart_=function(h){return s.handleTechTouchStart_(h)},s.boundHandleTechTouchMove_=function(h){return s.handleTechTouchMove_(h)},s.boundHandleTechTouchEnd_=function(h){return s.handleTechTouchEnd_(h)},s.boundHandleTechTap_=function(h){return s.handleTechTap_(h)},s.isFullscreen_=!1,s.log=P2(s.id_),s.fsApi_=af,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=n,s.tagAttributes=n&&gn(n),s.language(s.options_.language),i.languages){var c={};Object.getOwnPropertyNames(i.languages).forEach(function(h){c[h.toLowerCase()]=i.languages[h]}),s.languages_=c}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=i.poster||"",s.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],n.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(h){if(typeof s[h]!="function")throw new Error('plugin "'+h+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),_b(Ne(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(li(ce,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var u=Tt(s.options_);i.plugins&&Object.keys(i.plugins).forEach(function(h){s[h](i.plugins[h])}),i.debug&&s.debug(!0),s.options_.playerOptions=u,s.middleware_=[],s.playbackRates(i.playbackRates),s.initChildren(),s.isAudio(n.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),Ho&&s.addClass("vjs-touch-enabled"),Br||s.addClass("vjs-workinghover"),e.players[s.id_]=Ne(s);var d=C2.split(".")[0];return s.addClass("vjs-v"+d),s.userActive(!0),s.reportUserActivity(),s.one("play",function(h){return s.listenForUserActivity_(h)}),s.on("stageclick",function(h){return s.handleStageClick_(h)}),s.on("keydown",function(h){return s.handleKeyDown(h)}),s.on("languagechange",function(h){return s.handleLanguagechange(h)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var r=e.prototype;return r.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),_r(ce,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),_r(ce,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),oW(this),Lr.names.forEach(function(a){var s=Lr[a],o=i[s.getterName]();o&&o.off&&o.off()}),t.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},r.createEl=function(){var i=this.tag,a,s=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?a=this.el_=i.parentNode:o||(a=this.el_=t.prototype.createEl.call(this,"div"));var l=gn(i);if(o){for(a=this.el_=i,i=this.tag=ce.createElement("video");a.children.length;)i.appendChild(a.firstChild);gs(a,"video-js")||An(a,"video-js"),a.appendChild(i),s=this.playerElIngest_=a,Object.keys(a).forEach(function(y){try{i[y]=a[y]}catch{}})}if(i.setAttribute("tabindex","-1"),l.tabindex="-1",(Hu||Gn&&N2)&&(i.setAttribute("role","application"),l.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(y){o&&y==="class"||a.setAttribute(y,l[y]),o&&i.setAttribute(y,l[y])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=a.player=this,this.addClass("vjs-paused"),L.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Q2("vjs-styles-dimensions");var c=ka(".vjs-styles-defaults"),u=ka("head");u.insertBefore(this.styleEl_,c?c.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=i.getElementsByTagName("a"),h=0;h<d.length;h++){var p=d.item(h);An(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!s&&i.parentNode.insertBefore(a,i),bv(i,a),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a},r.crossOrigin=function(i){if(!i)return this.techGet_("crossOrigin");if(i!=="anonymous"&&i!=="use-credentials"){Xe.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"');return}this.techCall_("setCrossOrigin",i)},r.width=function(i){return this.dimension("width",i)},r.height=function(i){return this.dimension("height",i)},r.dimension=function(i,a){var s=i+"_";if(a===void 0)return this[s]||0;if(a===""||a==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(a);if(isNaN(o)){Xe.error('Improper value "'+a+'" supplied for for '+i);return}this[s]=o,this.updateStyleEl_()},r.fluid=function(i){var a=this;if(i===void 0)return!!this.fluid_;this.fluid_=!!i,In(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),D9(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.fill=function(i){if(i===void 0)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},r.aspectRatio=function(i){if(i===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},r.updateStyleEl_=function(){if(L.VIDEOJS_NO_DYNAMIC_STYLE===!0){var i=typeof this.width_=="number"?this.width_:this.options_.width,a=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(i>=0&&(s.width=i),a>=0&&(s.height=a));return}var o,l,c,u;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?c=this.aspectRatio_:this.videoWidth()>0?c=this.videoWidth()+":"+this.videoHeight():c="16:9";var d=c.split(":"),h=d[1]/d[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/h:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*h,/^[^a-zA-Z]/.test(this.id())?u="dimensions-"+this.id():u=this.id()+"-dimensions",this.addClass(u),J2(this.styleEl_,`
      .`+u+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+u+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+h*100+`%;
      }
    `)},r.loadTech_=function(i,a){var s=this;this.tech_&&this.unloadTech_();var o=jt(i),l=i.charAt(0).toLowerCase()+i.slice(1);o!=="Html5"&&this.tag&&(bt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var c=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(c=!1);var u={source:a,autoplay:c,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Lr.names.forEach(function(h){var p=Lr[h];u[p.getterName]=s[p.privateName]}),Ot(u,this.options_[o]),Ot(u,this.options_[l]),Ot(u,this.options_[i.toLowerCase()]),this.tag&&(u.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(u.startTime=this.cache_.currentTime);var d=bt.getTech(i);if(!d)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new d(u),this.tech_.ready(Et(this,this.handleTechReady_),!0),h1.jsonToTextTracks(this.textTracksJson_||[],this.tech_),RP.forEach(function(h){s.on(s.tech_,h,function(p){return s["handleTech"+jt(h)+"_"](p)})}),Object.keys(im).forEach(function(h){s.on(s.tech_,h,function(p){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+im[h]+"_"].bind(s),event:p});return}s["handleTech"+im[h]+"_"](p)})}),this.on(this.tech_,"loadstart",function(h){return s.handleTechLoadStart_(h)}),this.on(this.tech_,"sourceset",function(h){return s.handleTechSourceset_(h)}),this.on(this.tech_,"waiting",function(h){return s.handleTechWaiting_(h)}),this.on(this.tech_,"ended",function(h){return s.handleTechEnded_(h)}),this.on(this.tech_,"seeking",function(h){return s.handleTechSeeking_(h)}),this.on(this.tech_,"play",function(h){return s.handleTechPlay_(h)}),this.on(this.tech_,"firstplay",function(h){return s.handleTechFirstPlay_(h)}),this.on(this.tech_,"pause",function(h){return s.handleTechPause_(h)}),this.on(this.tech_,"durationchange",function(h){return s.handleTechDurationChange_(h)}),this.on(this.tech_,"fullscreenchange",function(h,p){return s.handleTechFullscreenChange_(h,p)}),this.on(this.tech_,"fullscreenerror",function(h,p){return s.handleTechFullscreenError_(h,p)}),this.on(this.tech_,"enterpictureinpicture",function(h){return s.handleTechEnterPictureInPicture_(h)}),this.on(this.tech_,"leavepictureinpicture",function(h){return s.handleTechLeavePictureInPicture_(h)}),this.on(this.tech_,"error",function(h){return s.handleTechError_(h)}),this.on(this.tech_,"posterchange",function(h){return s.handleTechPosterChange_(h)}),this.on(this.tech_,"textdata",function(h){return s.handleTechTextData_(h)}),this.on(this.tech_,"ratechange",function(h){return s.handleTechRateChange_(h)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&bv(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.unloadTech_=function(){var i=this;Lr.names.forEach(function(a){var s=Lr[a];i[s.privateName]=i[s.getterName]()}),this.textTracksJson_=h1.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.tech=function(i){return i===void 0&&Xe.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},r.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},r.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},r.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},r.manualAutoplay_=function(i){var a=this;if(!(!this.tech_||typeof i!="string")){var s=function(){var c=a.muted();a.muted(!0);var u=function(){a.muted(c)};a.playTerminatedQueue_.push(u);var d=a.play();if(!!xc(d))return d.catch(function(h){throw u(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(h||""))})},o;if(i==="any"&&!this.muted()?(o=this.play(),xc(o)&&(o=o.catch(s))):i==="muted"&&!this.muted()?o=s():o=this.play(),!!xc(o))return o.then(function(){a.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:i})})}},r.updateSourceCaches_=function(i){i===void 0&&(i="");var a=i,s="";typeof a!="string"&&(a=i.src,s=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=uW(this,a)),this.cache_.source=Tt({},i,{src:a,type:s});for(var o=this.cache_.sources.filter(function(p){return p.src&&p.src===a}),l=[],c=this.$$("source"),u=[],d=0;d<c.length;d++){var h=gn(c[d]);l.push(h),h.src&&h.src===a&&u.push(h.src)}u.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},r.handleTechSourceset_=function(i){var a=this;if(!this.changingSrc_){var s=function(u){return a.updateSourceCaches_(u)},o=this.currentSource().src,l=i.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(s=function(){}),s(l),i.src||this.tech_.any(["sourceset","loadstart"],function(c){if(c.type!=="sourceset"){var u=a.techGet("currentSrc");a.lastSource_.tech=u,a.updateSourceCaches_(u)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},r.hasStarted=function(i){if(i===void 0)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.handleTechWaiting_=function(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime(),s=function o(){a!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",o))};this.on("timeupdate",s)},r.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},r.handleTechFirstPlay_=function(){this.options_.starttime&&(Xe.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.handleTechClick_=function(i){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,i):this.paused()?Wi(this.play()):this.pause())},r.handleTechDoubleClick_=function(i){if(!!this.controls_){var a=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(i.target)});a||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},r.handleTechTap_=function(){this.userActive(!this.userActive())},r.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.handleTechTouchEnd_=function(i){i.cancelable&&i.preventDefault()},r.handleStageClick_=function(){this.reportUserActivity()},r.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.documentFullscreenChange_=function(i){var a=i.target.player;if(!(a&&a!==this)){var s=this.el(),o=ce[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},r.handleTechFullscreenChange_=function(i,a){var s=this;a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))},r.handleTechFullscreenError_=function(i,a){this.trigger("fullscreenerror",a)},r.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},r.handleTechEnterPictureInPicture_=function(i){this.isInPictureInPicture(!0)},r.handleTechLeavePictureInPicture_=function(i){this.isInPictureInPicture(!1)},r.handleTechError_=function(){var i=this.tech_.error();this.error(i)},r.handleTechTextData_=function(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},r.getCache=function(){return this.cache_},r.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},r.techCall_=function(i,a){this.ready(function(){if(i in aW)return iW(this.middleware_,this.tech_,i,a);if(i in y1)return v1(this.middleware_,this.tech_,i,a);try{this.tech_&&this.tech_[i](a)}catch(s){throw Xe(s),s}},!0)},r.techGet_=function(i){if(!(!this.tech_||!this.tech_.isReady_)){if(i in nW)return rW(this.middleware_,this.tech_,i);if(i in y1)return v1(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(a){throw this.tech_[i]===void 0?(Xe("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",a),a):a.name==="TypeError"?(Xe("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a):(Xe(a),a)}}},r.play=function(){var i=this,a=this.options_.Promise||L.Promise;return a?new a(function(s){i.play_(s)}):this.play_()},r.play_=function(i){var a=this;i===void 0&&(i=Wi),this.playCallbacks_.push(i);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(l){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&(Op||Br)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},r.runPlayTerminatedQueue_=function(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(a){a()})},r.runPlayCallbacks_=function(i){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(s){s(i)})},r.pause=function(){this.techCall_("pause")},r.paused=function(){return this.techGet_("paused")!==!1},r.played=function(){return this.techGet_("played")||ms(0,0)},r.scrubbing=function(i){if(typeof i=="undefined")return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.currentTime=function(i){if(typeof i!="undefined"){if(i<0&&(i=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",i),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},r.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},r.duration=function(i){if(i===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;i=parseFloat(i),i<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},r.remainingTime=function(){return this.duration()-this.currentTime()},r.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.buffered=function(){var i=this.techGet_("buffered");return(!i||!i.length)&&(i=ms(0,0)),i},r.bufferedPercent=function(){return nP(this.buffered(),this.duration())},r.bufferedEnd=function(){var i=this.buffered(),a=this.duration(),s=i.end(i.length-1);return s>a&&(s=a),s},r.volume=function(i){var a;if(i!==void 0){a=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a},r.muted=function(i){if(i!==void 0){this.techCall_("setMuted",i);return}return this.techGet_("muted")||!1},r.defaultMuted=function(i){return i!==void 0?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},r.lastVolume_=function(i){if(i!==void 0&&i!==0){this.cache_.lastVolume=i;return}return this.cache_.lastVolume},r.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.isFullscreen=function(i){if(i!==void 0){var a=this.isFullscreen_;this.isFullscreen_=Boolean(i),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},r.requestFullscreen=function(i){var a=this.options_.Promise||L.Promise;if(a){var s=this;return new a(function(o,l){function c(){s.off("fullscreenerror",d),s.off("fullscreenchange",u)}function u(){c(),o()}function d(p,y){c(),l(y)}s.one("fullscreenchange",u),s.one("fullscreenerror",d);var h=s.requestFullscreenHelper_(i);h&&(h.then(c,c),h.then(o,l))})}return this.requestFullscreenHelper_()},r.requestFullscreenHelper_=function(i){var a=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},i!==void 0&&(s=i)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},r.exitFullscreen=function(){var i=this.options_.Promise||L.Promise;if(i){var a=this;return new i(function(s,o){function l(){a.off("fullscreenerror",u),a.off("fullscreenchange",c)}function c(){l(),s()}function u(h,p){l(),o(p)}a.one("fullscreenchange",c),a.one("fullscreenerror",u);var d=a.exitFullscreenHelper_();d&&(d.then(l,l),d.then(s,o))})}return this.exitFullscreenHelper_()},r.exitFullscreenHelper_=function(){var i=this;if(this.fsApi_.requestFullscreen){var a=ce[this.fsApi_.exitFullscreen]();return a&&Wi(a.then(function(){return i.isFullscreen(!1)})),a}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},r.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=ce.documentElement.style.overflow,li(ce,"keydown",this.boundFullWindowOnEscKey_),ce.documentElement.style.overflow="hidden",An(ce.body,"vjs-full-window"),this.trigger("enterFullWindow")},r.fullWindowOnEscKey=function(i){ze.isEventKey(i,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},r.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,_r(ce,"keydown",this.boundFullWindowOnEscKey_),ce.documentElement.style.overflow=this.docOrigOverflow,qu(ce.body,"vjs-full-window"),this.trigger("exitFullWindow")},r.disablePictureInPicture=function(i){if(i===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},r.isInPictureInPicture=function(i){if(i!==void 0){this.isInPictureInPicture_=!!i,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},r.requestPictureInPicture=function(){if("pictureInPictureEnabled"in ce&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},r.exitPictureInPicture=function(){if("pictureInPictureEnabled"in ce)return ce.exitPictureInPicture()},r.handleKeyDown=function(i){var a=this.options_.userActions;if(!(!a||!a.hotkeys)){var s=function(l){var c=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var u=["button","checkbox","hidden","radio","reset","submit"];if(c==="input")return u.indexOf(l.type)===-1;var d=["textarea"];return d.indexOf(c)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,i):this.handleHotkeys(i))}},r.handleHotkeys=function(i){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},s=a.fullscreenKey,o=s===void 0?function(w){return ze.isEventKey(w,"f")}:s,l=a.muteKey,c=l===void 0?function(w){return ze.isEventKey(w,"m")}:l,u=a.playPauseKey,d=u===void 0?function(w){return ze.isEventKey(w,"k")||ze.isEventKey(w,"Space")}:u;if(o.call(this,i)){i.preventDefault(),i.stopPropagation();var h=Z.getComponent("FullscreenToggle");ce[this.fsApi_.fullscreenEnabled]!==!1&&h.prototype.handleClick.call(this,i)}else if(c.call(this,i)){i.preventDefault(),i.stopPropagation();var p=Z.getComponent("MuteToggle");p.prototype.handleClick.call(this,i)}else if(d.call(this,i)){i.preventDefault(),i.stopPropagation();var y=Z.getComponent("PlayToggle");y.prototype.handleClick.call(this,i)}},r.canPlayType=function(i){for(var a,s=0,o=this.options_.techOrder;s<o.length;s++){var l=o[s],c=bt.getTech(l);if(c||(c=Z.getComponent(l)),!c){Xe.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(c.isSupported()&&(a=c.canPlayType(i),a))return a}return""},r.selectSource=function(i){var a=this,s=this.options_.techOrder.map(function(d){return[d,bt.getTech(d)]}).filter(function(d){var h=d[0],p=d[1];return p?p.isSupported():(Xe.error('The "'+h+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(h,p,y){var w;return h.some(function(v){return p.some(function(T){if(w=y(v,T),w)return!0})}),w},l,c=function(h){return function(p,y){return h(y,p)}},u=function(h,p){var y=h[0],w=h[1];if(w.canPlaySource(p,a.options_[y.toLowerCase()]))return{source:p,tech:y}};return this.options_.sourceOrder?l=o(i,s,c(u)):l=o(s,i,u),l||!1},r.handleSrc_=function(i,a){var s=this;if(typeof i=="undefined")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=dW(i);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),eW(this,o[0],function(u,d){s.middleware_=d,a||(s.cache_.sources=o),s.updateSourceCaches_(u);var h=s.src_(u);if(h){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}tW(d,s.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},c=function(){s.off("error",l)};this.one("error",l),this.one("playing",c),this.resetRetryOnError_=function(){s.off("error",l),s.off("playing",c)}}},r.src=function(i){return this.handleSrc_(i,!1)},r.src_=function(i){var a=this,s=this.selectSource([i]);return s?M9(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1):!0},r.load=function(){this.techCall_("load")},r.reset=function(){var i=this,a=this.options_.Promise||L.Promise;if(this.paused()||!a)this.doReset_();else{var s=this.play();Wi(s.then(function(){return i.doReset_()}))}},r.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),In(this)&&this.trigger("playerreset")},r.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},r.resetProgressBar_=function(){this.currentTime(0);var i=this.controlBar||{},a=i.durationDisplay,s=i.remainingTimeDisplay;a&&a.updateContent(),s&&s.updateContent()},r.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},r.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},r.currentSources=function(){var i=this.currentSource(),a=[];return Object.keys(i).length!==0&&a.push(i),this.cache_.sources||a},r.currentSource=function(){return this.cache_.source||{}},r.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.preload=function(i){if(i!==void 0){this.techCall_("setPreload",i),this.options_.preload=i;return}return this.techGet_("preload")},r.autoplay=function(i){if(i===void 0)return this.options_.autoplay||!1;var a;typeof i=="string"&&/(any|play|muted)/.test(i)||i===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_(typeof i=="string"?i:"play"),a=!1):i?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a=="undefined"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},r.playsinline=function(i){return i!==void 0?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},r.loop=function(i){if(i!==void 0){this.techCall_("setLoop",i),this.options_.loop=i;return}return this.techGet_("loop")},r.poster=function(i){if(i===void 0)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.controls=function(i){if(i===void 0)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.usingNativeControls=function(i){if(i===void 0)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.error=function(i){var a=this;if(i===void 0)return this.error_||null;if(Sa("beforeerror").forEach(function(o){var l=o(a,i);if(!(zn(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){a.log.error("please return a value that MediaError expects in beforeerror hooks");return}i=l}),this.options_.suppressNotSupportedError&&i&&i.code===4){var s=function(){this.error(i)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(i===null){this.error_=i,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new jr(i),this.addClass("vjs-error"),Xe.error("(CODE:"+this.error_.code+" "+jr.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Sa("error").forEach(function(o){return o(a,a.error_)})},r.reportUserActivity=function(i){this.userActivity_=!0},r.userActive=function(i){if(i===void 0)return this.userActive_;if(i=!!i,i!==this.userActive_){if(this.userActive_=i,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.listenForUserActivity_=function(){var i,a,s,o=Et(this,this.reportUserActivity),l=function(y){(y.screenX!==a||y.screenY!==s)&&(a=y.screenX,s=y.screenY,o())},c=function(){o(),this.clearInterval(i),i=this.setInterval(o,250)},u=function(y){o(),this.clearInterval(i)};this.on("mousedown",c),this.on("mousemove",l),this.on("mouseup",u),this.on("mouseleave",u);var d=this.getChild("controlBar");d&&!Br&&!qn&&(d.on("mouseenter",function(p){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),d.on("mouseleave",function(p){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var h;this.setInterval(function(){if(!!this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(h);var p=this.options_.inactivityTimeout;p<=0||(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},p))}},250)},r.playbackRate=function(i){if(i!==void 0){this.techCall_("setPlaybackRate",i);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},r.defaultPlaybackRate=function(i){return i!==void 0?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.isAudio=function(i){if(i!==void 0){this.isAudio_=!!i;return}return!!this.isAudio_},r.enableAudioOnlyUI_=function(){var i=this;this.addClass("vjs-audio-only-mode");var a=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();a.forEach(function(l){l!==s&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),i.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},r.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(i){return i.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},r.audioOnlyMode=function(i){var a=this;if(typeof i!="boolean"||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var s=this.options_.Promise||L.Promise;if(s){if(i){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return a.enableAudioOnlyUI_()})}return s.resolve().then(function(){return a.disableAudioOnlyUI_()})}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},r.enablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.disablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.audioPosterMode=function(i){var a=this;if(typeof i!="boolean"||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var s=this.options_.Promise||L.Promise;if(s){if(i){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.disablePosterModeUI_()})}if(i){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},r.addTextTrack=function(i,a,s){if(this.tech_)return this.tech_.addTextTrack(i,a,s)},r.addRemoteTextTrack=function(i,a){if(this.tech_)return this.tech_.addRemoteTextTrack(i,a)},r.removeRemoteTextTrack=function(i){i===void 0&&(i={});var a=i,s=a.track;if(s||(s=i),this.tech_)return this.tech_.removeRemoteTextTrack(s)},r.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.language=function(i){if(i===void 0)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),In(this)&&this.trigger("languagechange"))},r.languages=function(){return Tt(e.prototype.options_.languages,this.languages_)},r.toJSON=function(){var i=Tt(this.options_),a=i.tracks;i.tracks=[];for(var s=0;s<a.length;s++){var o=a[s];o=Tt(o),o.player=void 0,i.tracks[s]=o}return i},r.createModal=function(i,a){var s=this;a=a||{},a.content=i||"";var o=new _l(this,a);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},r.updateCurrentBreakpoint_=function(){if(!!this.responsive())for(var i=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<Cv.length;s++){var o=Cv[s],l=this.breakpoints_[o];if(a<=l){if(i===o)return;i&&this.removeClass(ph[i]),this.addClass(ph[o]),this.breakpoint_=o;break}}},r.removeCurrentBreakpoint_=function(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},r.breakpoints=function(i){return i===void 0?Ot(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Ot({},zW,i),this.updateCurrentBreakpoint_(),Ot(this.breakpoints_))},r.responsive=function(i){if(i===void 0)return this.responsive_;i=Boolean(i);var a=this.responsive_;if(i!==a)return this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i},r.currentBreakpoint=function(){return this.breakpoint_},r.currentBreakpointClass=function(){return ph[this.breakpoint_]||""},r.loadMedia=function(i,a){var s=this;if(!(!i||typeof i!="object")){this.reset(),this.cache_.media=Tt(i);var o=this.cache_.media,l=o.artwork,c=o.poster,u=o.src,d=o.textTracks;!l&&c&&(this.cache_.media.artwork=[{src:c,type:lf(c)}]),u&&this.src(u),c&&this.poster(c),Array.isArray(d)&&d.forEach(function(h){return s.addRemoteTextTrack(h,!1)}),this.ready(a)}},r.getMedia=function(){if(!this.cache_.media){var i=this.poster(),a=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:a,textTracks:s};return i&&(o.poster=i,o.artwork=[{src:o.poster,type:lf(o.poster)}]),o}return Tt(this.cache_.media)},e.getTagSettings=function(i){var a={sources:[],tracks:[]},s=gn(i),o=s["data-setup"];if(gs(i,"vjs-fill")&&(s.fill=!0),gs(i,"vjs-fluid")&&(s.fluid=!0),o!==null){var l=E7(o||"{}"),c=l[0],u=l[1];c&&Xe.error(c),Ot(s,u)}if(Ot(a,s),i.hasChildNodes())for(var d=i.childNodes,h=0,p=d.length;h<p;h++){var y=d[h],w=y.nodeName.toLowerCase();w==="source"?a.sources.push(gn(y)):w==="track"&&a.tracks.push(gn(y))}return a},r.flexNotSupported_=function(){var i=ce.createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},r.debug=function(i){if(i===void 0)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},r.playbackRates=function(i){if(i===void 0)return this.cache_.playbackRates;!Array.isArray(i)||!i.every(function(a){return typeof a=="number"})||(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},e}(Z);Lr.names.forEach(function(t){var e=Lr[t];Vt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Vt.prototype.crossorigin=Vt.prototype.crossOrigin;Vt.players={};var $l=L.navigator;Vt.prototype.options_={techOrder:bt.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:$l&&($l.languages&&$l.languages[0]||$l.userLanguage||$l.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Vt.prototype[t]=function(){return this.techGet_(t)}});RP.forEach(function(t){Vt.prototype["handleTech"+jt(t)+"_"]=function(){return this.trigger(t)}});Z.registerComponent("Player",Vt);var df="plugin",To="activePlugins_",co={},hf=function(e){return co.hasOwnProperty(e)},gh=function(e){return hf(e)?co[e]:void 0},MP=function(e,r){e[To]=e[To]||{},e[To][r]=!0},ff=function(e,r,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,r),e.trigger(i+":"+r.name,r)},$W=function(e,r){var n=function(){ff(this,{name:e,plugin:r,instance:null},!0);var a=r.apply(this,arguments);return MP(this,e),ff(this,{name:e,plugin:r,instance:a}),a};return Object.keys(r).forEach(function(i){n[i]=r[i]}),n},D1=function(e,r){return r.prototype.name=e,function(){ff(this,{name:e,plugin:r,instance:null},!0);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=uh(r,[this].concat(i));return this[e]=function(){return s},ff(this,s.getEventHash()),s}},cn=function(){function t(r){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=r,this.log||(this.log=this.player.log.createLogger(this.name)),_b(this),delete this.trigger,iP(this,this.constructor.defaultState),MP(r,this.name),this.dispose=this.dispose.bind(this),r.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(n){return n===void 0&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},e.trigger=function(n,i){return i===void 0&&(i={}),wl(this.eventBusEl_,n,this.getEventHash(i))},e.handleStateChanged=function(n){},e.dispose=function(){var n=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[To][n]=!1,this.player=this.state=null,i[n]=D1(n,co[n])},t.isBasic=function(n){var i=typeof n=="string"?gh(n):n;return typeof i=="function"&&!t.prototype.isPrototypeOf(i.prototype)},t.registerPlugin=function(n,i){if(typeof n!="string")throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(hf(n))Xe.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if(Vt.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if(typeof i!="function")throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof i+".");return co[n]=i,n!==df&&(t.isBasic(i)?Vt.prototype[n]=$W(n,i):Vt.prototype[n]=D1(n,i)),i},t.deregisterPlugin=function(n){if(n===df)throw new Error("Cannot de-register base plugin.");hf(n)&&(delete co[n],delete Vt.prototype[n])},t.getPlugins=function(n){n===void 0&&(n=Object.keys(co));var i;return n.forEach(function(a){var s=gh(a);s&&(i=i||{},i[a]=s)}),i},t.getPluginVersion=function(n){var i=gh(n);return i&&i.VERSION||""},t}();cn.getPlugin=gh;cn.BASE_PLUGIN_NAME=df;cn.registerPlugin(df,cn);Vt.prototype.usingPlugin=function(t){return!!this[To]&&this[To][t]===!0};Vt.prototype.hasPlugin=function(t){return!!hf(t)};var VW=function(e,r){r===void 0&&(r={});var n=function(){e.apply(this,arguments)},i={};typeof r=="object"?(r.constructor!==Object.prototype.constructor&&(n=r.constructor),i=r):typeof r=="function"&&(n=r),pq(n,e),e&&(n.super_=e);for(var a in i)i.hasOwnProperty(a)&&(n.prototype[a]=i[a]);return n},NP=function(e){return e.indexOf("#")===0?e.slice(1):e};function H(t,e,r){var n=H.getPlayer(t);if(n)return e&&Xe.warn('Player "'+t+'" is already initialised. Options will not be applied.'),r&&n.ready(r),n;var i=typeof t=="string"?ka("#"+NP(t)):t;if(!bl(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Xe.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Sa("beforesetup").forEach(function(s){var o=s(i,Tt(e));if(!zn(o)||Array.isArray(o)){Xe.error("please return an object in beforesetup hooks");return}e=Tt(e,o)});var a=Z.getComponent("Player");return n=new a(i,e,r),Sa("setup").forEach(function(s){return s(n)}),n}H.hooks_=wn;H.hooks=Sa;H.hook=m9;H.hookOnce=v9;H.removeHook=A2;if(L.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&yl()){var Gd=ka(".vjs-styles-defaults");if(!Gd){Gd=Q2("vjs-styles-defaults");var nm=ka("head");nm&&nm.insertBefore(Gd,nm.firstChild),J2(Gd,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}_v(1,H);H.VERSION=C2;H.options=Vt.prototype.options_;H.getPlayers=function(){return Vt.players};H.getPlayer=function(t){var e=Vt.players,r;if(typeof t=="string"){var n=NP(t),i=e[n];if(i)return i;r=ka("#"+n)}else r=t;if(bl(r)){var a=r,s=a.player,o=a.playerId;if(s||e[o])return s||e[o]}};H.getAllPlayers=function(){return Object.keys(Vt.players).map(function(t){return Vt.players[t]}).filter(Boolean)};H.players=Vt.players;H.getComponent=Z.getComponent;H.registerComponent=function(t,e){bt.isTech(e)&&Xe.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Z.registerComponent.call(Z,t,e)};H.getTech=bt.getTech;H.registerTech=bt.registerTech;H.use=Z9;Object.defineProperty(H,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(H.middleware,"TERMINATOR",{value:of,writeable:!1,enumerable:!0});H.browser=T9;H.TOUCH_ENABLED=Ho;H.extend=VW;H.mergeOptions=Tt;H.bind=Et;H.registerPlugin=cn.registerPlugin;H.deregisterPlugin=cn.deregisterPlugin;H.plugin=function(t,e){return Xe.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),cn.registerPlugin(t,e)};H.getPlugins=cn.getPlugins;H.getPlugin=cn.getPlugin;H.getPluginVersion=cn.getPluginVersion;H.addLanguage=function(t,e){var r;return t=(""+t).toLowerCase(),H.options.languages=Tt(H.options.languages,(r={},r[t]=e,r)),H.options.languages[t]};H.log=Xe;H.createLogger=P2;H.createTimeRange=H.createTimeRanges=ms;H.formatTime=Yo;H.setFormatTime=yW;H.resetFormatTime=bW;H.parseUrl=Tb;H.isCrossOrigin=jp;H.EventTarget=ar;H.on=li;H.one=Mp;H.off=_r;H.trigger=wl;H.xhr=OI;H.TextTrack=Gu;H.AudioTrack=oP;H.VideoTrack=lP;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){H[t]=function(){return Xe.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),Y2[t].apply(null,arguments)}});H.computedStyle=ou;H.dom=Y2;H.url=Y9;H.defineLazyProperty=$b;H.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.14.3 @license Apache-2.0 */var ki=Sp,pf=function(e,r,n){return e&&n&&n.responseURL&&r!==n.responseURL?n.responseURL:r},ji=function(e){return H.log.debug?H.log.debug.bind(H,"VHS:",e+" >"):function(){}},Ea=1/30,Ki=Ea*3,jP=function(e,r){var n=[],i;if(e&&e.length)for(i=0;i<e.length;i++)r(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return H.createTimeRanges(n)},uo=function(e,r){return jP(e,function(n,i){return n-Ki<=r&&i+Ki>=r})},Wd=function(e,r){return jP(e,function(n){return n-Ea>=r})},HW=function(e){if(e.length<2)return H.createTimeRanges();for(var r=[],n=1;n<e.length;n++){var i=e.end(n-1),a=e.start(n);r.push([i,a])}return H.createTimeRanges(r)},qW=function(e,r){var n=null,i=null,a=0,s=[],o=[];if(!e||!e.length||!r||!r.length)return H.createTimeRange();for(var l=e.length;l--;)s.push({time:e.start(l),type:"start"}),s.push({time:e.end(l),type:"end"});for(l=r.length;l--;)s.push({time:r.start(l),type:"start"}),s.push({time:r.end(l),type:"end"});for(s.sort(function(c,u){return c.time-u.time}),l=0;l<s.length;l++)s[l].type==="start"?(a++,a===2&&(n=s[l].time)):s[l].type==="end"&&(a--,a===1&&(i=s[l].time)),n!==null&&i!==null&&(o.push([n,i]),n=null,i=null);return H.createTimeRanges(o)},FP=function(e){var r=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)r.push(e.start(n)+" => "+e.end(n));return r.join(", ")},GW=function(e,r,n){n===void 0&&(n=1);var i=e.length?e.end(e.length-1):0;return(i-r)/n},ss=function(e){for(var r=[],n=0;n<e.length;n++)r.push({start:e.start(n),end:e.end(n)});return r},WW=function(e,r){if(e===r)return!1;if(!e&&r||!r&&e||e.length!==r.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==r.start(n)||e.end(n)!==r.end(n))return!0;return!1},L1=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},Vb=function(e,r){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var a=e.start(i),s=e.end(i);if(!(r>s)){if(r>a&&r<=s){n+=s-r;continue}n+=s-a}}return n},R1=H.createTimeRange,Hb=function(e,r){if(!r.preload)return r.duration;var n=0;return(r.parts||[]).forEach(function(i){n+=i.duration}),(r.preloadHints||[]).forEach(function(i){i.type==="PART"&&(n+=e.partTargetDuration)}),n},Av=function(e){return(e.segments||[]).reduce(function(r,n,i){return n.parts?n.parts.forEach(function(a,s){r.push({duration:a.duration,segmentIndex:i,partIndex:s,part:a,segment:n})}):r.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),r},[])},BP=function(e){var r=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return r&&r.parts||[]},UP=function(e){var r=e.preloadSegment;if(!!r){var n=r.parts,i=r.preloadHints,a=(i||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return a+=n&&n.length?n.length:0,a}},zP=function(e,r){if(r.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=BP(r).length>0;return n&&r.serverControl&&r.serverControl.partHoldBack?r.serverControl.partHoldBack:n&&r.partTargetDuration?r.partTargetDuration*3:r.serverControl&&r.serverControl.holdBack?r.serverControl.holdBack:r.targetDuration?r.targetDuration*3:0},KW=function(e,r){var n=0,i=r-e.mediaSequence,a=e.segments[i];if(a){if(typeof a.start!="undefined")return{result:a.start,precise:!0};if(typeof a.end!="undefined")return{result:a.end-a.duration,precise:!0}}for(;i--;){if(a=e.segments[i],typeof a.end!="undefined")return{result:n+a.end,precise:!0};if(n+=Hb(e,a),typeof a.start!="undefined")return{result:n+a.start,precise:!0}}return{result:n,precise:!1}},YW=function(e,r){for(var n=0,i,a=r-e.mediaSequence;a<e.segments.length;a++){if(i=e.segments[a],typeof i.start!="undefined")return{result:i.start-n,precise:!0};if(n+=Hb(e,i),typeof i.end!="undefined")return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},$P=function(e,r,n){if(typeof r=="undefined"&&(r=e.mediaSequence+e.segments.length),r<e.mediaSequence)return 0;var i=KW(e,r);if(i.precise)return i.result;var a=YW(e,r);return a.precise?a.result:i.result+n},VP=function(e,r,n){if(!e)return 0;if(typeof n!="number"&&(n=0),typeof r=="undefined"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return L.Infinity}return $P(e,r,n)},Tc=function(e){var r=e.defaultDuration,n=e.durationList,i=e.startIndex,a=e.endIndex,s=0;if(i>a){var o=[a,i];i=o[0],a=o[1]}if(i<0){for(var l=i;l<Math.min(0,a);l++)s+=r;i=0}for(var c=i;c<a;c++)s+=n[c].duration;return s},HP=function(e,r,n,i){if(!e||!e.segments)return null;if(e.endList)return VP(e);if(r===null)return null;r=r||0;var a=$P(e,e.mediaSequence+e.segments.length,r);return n&&(i=typeof i=="number"?i:zP(null,e),a-=i),Math.max(0,a)},XW=function(e,r,n){var i=!0,a=r||0,s=HP(e,r,i,n);return s===null?R1():R1(a,s)},QW=function(e){for(var r=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,a=e.startingPartIndex,s=e.startTime,o=e.experimentalExactManifestTimings,l=n-s,c=Av(r),u=0,d=0;d<c.length;d++){var h=c[d];if(i===h.segmentIndex&&!(typeof a=="number"&&typeof h.partIndex=="number"&&a!==h.partIndex)){u=d;break}}if(l<0){if(u>0)for(var p=u-1;p>=0;p--){var y=c[p];if(l+=y.duration,o){if(l<0)continue}else if(l+Ea<=0)continue;return{partIndex:y.partIndex,segmentIndex:y.segmentIndex,startTime:s-Tc({defaultDuration:r.targetDuration,durationList:c,startIndex:u,endIndex:p})}}return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:n}}if(u<0){for(var w=u;w<0;w++)if(l-=r.targetDuration,l<0)return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:n};u=0}for(var v=u;v<c.length;v++){var T=c[v];if(l-=T.duration,o){if(l>0)continue}else if(l-Ea>=0)continue;return{partIndex:T.partIndex,segmentIndex:T.segmentIndex,startTime:s+Tc({defaultDuration:r.targetDuration,durationList:c,startIndex:u,endIndex:v})}}return{segmentIndex:c[c.length-1].segmentIndex,partIndex:c[c.length-1].partIndex,startTime:n}},qP=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},qb=function(e){return e.excludeUntil&&e.excludeUntil===1/0},zp=function(e){var r=qP(e);return!e.disabled&&!r},JW=function(e){return e.disabled},ZW=function(e){for(var r=0;r<e.segments.length;r++)if(e.segments[r].key)return!0;return!1},GP=function(e,r){return r.attributes&&r.attributes[e]},eK=function(e,r,n,i){if(i===void 0&&(i=0),!GP("BANDWIDTH",n))return NaN;var a=e*n.attributes.BANDWIDTH;return(a-i*8)/r},Iv=function(e,r){if(e.playlists.length===1)return!0;var n=r.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(i){return zp(i)?(i.attributes.BANDWIDTH||0)<n:!1}).length===0},Gb=function(e,r){return!e&&!r||!e&&r||e&&!r?!1:!!(e===r||e.id&&r.id&&e.id===r.id||e.resolvedUri&&r.resolvedUri&&e.resolvedUri===r.resolvedUri||e.uri&&r.uri&&e.uri===r.uri)},M1=function(e,r){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var a in n){for(var s in n[a])if(i=r(n[a][s]),i)break;if(i)break}return!!i},Yu=function(e){if(!e||!e.playlists||!e.playlists.length){var r=M1(e,function(s){return s.playlists&&s.playlists.length||s.uri});return r}for(var n=function(o){var l=e.playlists[o],c=l.attributes&&l.attributes.CODECS;if(c&&c.split(",").every(function(d){return FI(d)}))return"continue";var u=M1(e,function(d){return Gb(l,d)});return u?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var a=n(i);if(a!=="continue"&&typeof a=="object")return a.v}return!0},Hr={liveEdgeDelay:zP,duration:VP,seekable:XW,getMediaInfoForTime:QW,isEnabled:zp,isDisabled:JW,isBlacklisted:qP,isIncompatible:qb,playlistEnd:HP,isAes:ZW,hasAttribute:GP,estimateSegmentRequestTime:eK,isLowestEnabledRendition:Iv,isAudioOnly:Yu,playlistMatch:Gb,segmentDurationWithParts:Hb},WP=H.log,Wb=function(e,r){return e+"-"+r},tK=function(e){var r=e.onwarn,n=e.oninfo,i=e.manifestString,a=e.customTagParsers,s=a===void 0?[]:a,o=e.customTagMappers,l=o===void 0?[]:o,c=e.experimentalLLHLS,u=new _q;r&&u.on("warn",r),n&&u.on("info",n),s.forEach(function(w){return u.addParser(w)}),l.forEach(function(w){return u.addTagMapper(w)}),u.push(i),u.end();var d=u.manifest;if(c||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(w){d.hasOwnProperty(w)&&delete d[w]}),d.segments&&d.segments.forEach(function(w){["parts","preloadHints"].forEach(function(v){w.hasOwnProperty(v)&&delete w[v]})})),!d.targetDuration){var h=10;d.segments&&d.segments.length&&(h=d.segments.reduce(function(w,v){return Math.max(w,v.duration)},0)),r&&r("manifest has no targetDuration defaulting to "+h),d.targetDuration=h}var p=BP(d);if(p.length&&!d.partTargetDuration){var y=p.reduce(function(w,v){return Math.max(w,v.duration)},0);r&&(r("manifest has no partTargetDuration defaulting to "+y),WP.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),d.partTargetDuration=y}return d},Xu=function(e,r){!e.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(n){if(!!e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var a in e.mediaGroups[n][i]){var s=e.mediaGroups[n][i][a];r(s,n,i,a)}})},KP=function(e){var r=e.playlist,n=e.uri,i=e.id;r.id=i,r.playlistErrors_=0,n&&(r.uri=n),r.attributes=r.attributes||{}},rK=function(e){for(var r=e.playlists.length;r--;){var n=e.playlists[r];KP({playlist:n,id:Wb(r,n.uri)}),n.resolvedUri=ki(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||WP.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},iK=function(e){Xu(e,function(r){r.uri&&(r.resolvedUri=ki(e.uri,r.uri))})},nK=function(e,r){var n=Wb(0,r),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:L.location.href,resolvedUri:L.location.href,playlists:[{uri:r,id:n,resolvedUri:r,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[r]=i.playlists[0],i},YP=function(e,r){e.uri=r;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var i="placeholder-uri-"+n;e.playlists[n].uri=i}var a=Yu(e);Xu(e,function(s,o,l,c){var u="placeholder-uri-"+o+"-"+l+"-"+c;if(!s.playlists||!s.playlists.length){if(a&&o==="AUDIO"&&!s.uri)for(var d=0;d<e.playlists.length;d++){var h=e.playlists[d];if(h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===l)return}s.playlists=[yi({},s)]}s.playlists.forEach(function(p,y){var w=Wb(y,u);p.uri?p.resolvedUri=p.resolvedUri||ki(e.uri,p.uri):(p.uri=y===0?u:w,p.resolvedUri=p.uri),p.id=p.id||w,p.attributes=p.attributes||{},e.playlists[p.id]=p,e.playlists[p.uri]=p})}),rK(e),iK(e)},gf=H.mergeOptions,aK=H.EventTarget,sK=function(e,r){if(r.endList||!r.serverControl)return e;var n={};if(r.serverControl.canBlockReload){var i=r.preloadSegment,a=r.mediaSequence+r.segments.length;if(i){var s=i.parts||[],o=UP(r)-1;o>-1&&o!==s.length-1&&(n._HLS_part=o),(o>-1||s.length)&&a--}n._HLS_msn=a}if(r.serverControl&&r.serverControl.canSkipUntil&&(n._HLS_skip=r.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var l=new L.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(c){!n.hasOwnProperty(c)||l.searchParams.set(c,n[c])}),e=l.toString()}return e},oK=function(e,r){if(!e)return r;var n=gf(e,r);if(e.preloadHints&&!r.preloadHints&&delete n.preloadHints,e.parts&&!r.parts)delete n.parts;else if(e.parts&&r.parts)for(var i=0;i<r.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=gf(e.parts[i],r.parts[i]));return!e.skipped&&r.skipped&&(n.skipped=!1),e.preload&&!r.preload&&(n.preload=!1),n},lK=function(e,r,n){var i=e.slice(),a=r.slice();n=n||0;for(var s=[],o,l=0;l<a.length;l++){var c=i[l+n],u=a[l];c?(o=c.map||o,s.push(oK(c,u))):(o&&!u.map&&(u.map=o),s.push(u))}return s},XP=function(e,r){!e.resolvedUri&&e.uri&&(e.resolvedUri=ki(r,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=ki(r,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=ki(r,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=ki(r,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=ki(r,n.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=ki(r,n.uri))})},QP=function(e){var r=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(var i=0;i<n.preloadHints.length;i++)if(n.preloadHints[i].type==="MAP")return r}n.duration=e.targetDuration,n.preload=!0,r.push(n)}return r},JP=function(e,r){return e===r||e.segments&&r.segments&&e.segments.length===r.segments.length&&e.endList===r.endList&&e.mediaSequence===r.mediaSequence&&e.preloadSegment===r.preloadSegment},Pv=function(e,r,n){n===void 0&&(n=JP);var i=gf(e,{}),a=i.playlists[r.id];if(!a||n(a,r))return null;r.segments=QP(r);var s=gf(a,r);if(s.preloadSegment&&!r.preloadSegment&&delete s.preloadSegment,a.segments){if(r.skip){r.segments=r.segments||[];for(var o=0;o<r.skip.skippedSegments;o++)r.segments.unshift({skipped:!0})}s.segments=lK(a.segments,r.segments,r.mediaSequence-a.mediaSequence)}s.segments.forEach(function(c){XP(c,s.resolvedUri)});for(var l=0;l<i.playlists.length;l++)i.playlists[l].id===r.id&&(i.playlists[l]=s);return i.playlists[r.id]=s,i.playlists[r.uri]=s,Xu(e,function(c,u,d,h){if(!!c.playlists)for(var p=0;p<c.playlists.length;p++)r.id===c.playlists[p].id&&(c.playlists[p]=s)}),i},Ov=function(e,r){var n=e.segments||[],i=n[n.length-1],a=i&&i.parts&&i.parts[i.parts.length-1],s=a&&a.duration||i&&i.duration;return r&&s?s*1e3:(e.partTargetDuration||e.targetDuration||10)*500},ho=function(t){ge(e,t);function e(n,i,a){var s;if(a===void 0&&(a={}),s=t.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");s.logger_=ji("PlaylistLoader");var o=a,l=o.withCredentials,c=l===void 0?!1:l,u=o.handleManifestRedirects,d=u===void 0?!1:u;s.src=n,s.vhs_=i,s.withCredentials=c,s.handleManifestRedirects=d;var h=i.options_;return s.customTagParsers=h&&h.customTagParsers||[],s.customTagMappers=h&&h.customTagMappers||[],s.experimentalLLHLS=h&&h.experimentalLLHLS||!1,H.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(Ne(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var r=e.prototype;return r.handleMediaupdatetimeout_=function(){var i=this;if(this.state==="HAVE_METADATA"){var a=this.media(),s=ki(this.master.uri,a.uri);this.experimentalLLHLS&&(s=sK(s,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,l){if(!!i.request){if(o)return i.playlistRequestError(i.request,i.media(),"HAVE_METADATA");i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}})}},r.playlistRequestError=function(i,a,s){var o=a.uri,l=a.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[l],status:i.status,message:"HLS playlist request error at URL: "+o+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},r.parseManifest_=function(i){var a=this,s=i.url,o=i.manifestString;return tK({onwarn:function(c){var u=c.message;return a.logger_("m3u8-parser warn for "+s+": "+u)},oninfo:function(c){var u=c.message;return a.logger_("m3u8-parser info for "+s+": "+u)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},r.haveMetadata=function(i){var a=i.playlistString,s=i.playlistObject,o=i.url,l=i.id;this.request=null,this.state="HAVE_METADATA";var c=s||this.parseManifest_({url:o,manifestString:a});c.lastRequest=Date.now(),KP({playlist:c,uri:o,id:l});var u=Pv(this.master,c);this.targetDuration=c.partTargetDuration||c.targetDuration,this.pendingMedia_=null,u?(this.master=u,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Ov(this.media(),!!u)),this.trigger("loadedplaylist")},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),L.clearTimeout(this.mediaUpdateTimeout),L.clearTimeout(this.finalRenditionTimeout),this.off()},r.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},r.media=function(i,a){var s=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof i=="string"){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(L.clearTimeout(this.finalRenditionTimeout),a){var o=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=L.setTimeout(this.media.bind(this,i,!1),o);return}var l=this.state,c=!this.media_||i.id!==this.media_.id,u=this.master.playlists[i.id];if(u&&u.endList||i.endList&&i.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,c&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Ov(i,!0)),!!c){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(d,h){if(!!s.request){if(i.lastRequest=Date.now(),i.resolvedUri=pf(s.handleManifestRedirects,i.resolvedUri,h),d)return s.playlistRequestError(s.request,i,l);s.haveMetadata({playlistString:h.responseText,url:i.uri,id:i.id}),l==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},r.pause=function(){this.mediaUpdateTimeout&&(L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},r.load=function(i){var a=this;this.mediaUpdateTimeout&&(L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(i){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=L.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},r.updateMediaUpdateTimeout_=function(i){var a=this;this.mediaUpdateTimeout&&(L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=L.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(i)},i))},r.start=function(){var i=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=L.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){i.setupInitialPlaylist(i.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(!!i.request){if(i.request=null,a)return i.error={status:s.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:s.responseText,code:2},i.state==="HAVE_NOTHING"&&(i.started=!1),i.trigger("error");i.src=pf(i.handleManifestRedirects,i.src,s);var o=i.parseManifest_({manifestString:s.responseText,url:i.src});i.setupInitialPlaylist(o)}})},r.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},r.setupInitialPlaylist=function(i){if(this.state="HAVE_MASTER",i.playlists){this.master=i,YP(this.master,this.srcUri()),i.playlists.forEach(function(s){s.segments=QP(s),s.segments.forEach(function(o){XP(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var a=this.srcUri()||L.location.href;this.master=nK(i,a),this.haveMetadata({playlistObject:i,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(aK),cK=H.xhr,uK=H.mergeOptions,Dv=function(e,r,n,i){var a=e.responseType==="arraybuffer"?e.response:e.responseText;!r&&a&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=a.byteLength||a.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),r&&r.code==="ETIMEDOUT"&&(e.timedout=!0),!r&&!e.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(r=new Error("XHR Failed with a response of: "+(e&&(a||e.responseText)))),i(r,e)},ZP=function(){var e=function r(n,i){n=uK({timeout:45e3},n);var a=r.beforeRequest||H.Vhs.xhr.beforeRequest;if(a&&typeof a=="function"){var s=a(n);s&&(n=s)}var o=H.Vhs.xhr.original===!0?cK:H.Vhs.xhr,l=o(n,function(u,d){return Dv(l,u,d,i)}),c=l.abort;return l.abort=function(){return l.aborted=!0,c.apply(l,arguments)},l.uri=n.uri,l.requestTime=Date.now(),l};return e.original=!0,e},dK=function(e){var r,n=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?r=L.BigInt(e.offset)+L.BigInt(e.length)-L.BigInt(1):r=e.offset+e.length-1,"bytes="+n+"-"+r},Lv=function(e){var r={};return e.byterange&&(r.Range=dK(e.byterange)),r},hK=function(e,r){return e.start(r)+"-"+e.end(r)},fK=function(e,r){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(r%2?" ":"")},pK=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},eO=function(e){var r={};return Object.keys(e).forEach(function(n){var i=e[n];UI(i)?r[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:r[n]=i}),r},mf=function(e){var r=e.byterange||{length:1/0,offset:0};return[r.length,r.offset,e.resolvedUri].join(",")},tO=function(e){return e.resolvedUri},rO=function(e){for(var r=Array.prototype.slice.call(e),n=16,i="",a,s,o=0;o<r.length/n;o++)a=r.slice(o*n,o*n+n).map(fK).join(""),s=r.slice(o*n,o*n+n).map(pK).join(""),i+=a+" "+s+`
`;return i},gK=function(e){var r=e.bytes;return rO(r)},mK=function(e){var r="",n;for(n=0;n<e.length;n++)r+=hK(e,n)+" ";return r},vK=Object.freeze({__proto__:null,createTransferableMessage:eO,initSegmentId:mf,segmentKeyId:tO,hexDump:rO,tagDump:gK,textRanges:mK}),iO=.25,yK=function(e,r){if(!r.dateTimeObject)return null;var n=r.videoTimingInfo.transmuxerPrependedSeconds,i=r.videoTimingInfo.transmuxedPresentationStart,a=i+n,s=e-a;return new Date(r.dateTimeObject.getTime()+s*1e3)},bK=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},wK=function(e,r){var n;try{n=new Date(e)}catch{return null}if(!r||!r.segments||r.segments.length===0)return null;var i=r.segments[0];if(n<i.dateTimeObject)return null;for(var a=0;a<r.segments.length-1;a++){i=r.segments[a];var s=r.segments[a+1].dateTimeObject;if(n<s)break}var o=r.segments[r.segments.length-1],l=o.dateTimeObject,c=o.videoTimingInfo?bK(o.videoTimingInfo):o.duration+o.duration*iO,u=new Date(l.getTime()+c*1e3);return n>u?null:(n>l&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Hr.duration(r,r.mediaSequence+r.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},_K=function(e,r){if(!r||!r.segments||r.segments.length===0)return null;for(var n=0,i,a=0;a<r.segments.length&&(i=r.segments[a],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,!(e<=n));a++);var s=r.segments[r.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+s.duration*iO)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},xK=function(e,r){var n,i;try{n=new Date(e),i=new Date(r)}catch{}var a=n.getTime(),s=i.getTime();return(s-a)/1e3},TK=function(e){if(!e.segments||e.segments.length===0)return!1;for(var r=0;r<e.segments.length;r++){var n=e.segments[r];if(!n.dateTimeObject)return!1}return!0},SK=function(e){var r=e.playlist,n=e.time,i=n===void 0?void 0:n,a=e.callback;if(!a)throw new Error("getProgramTime: callback must be provided");if(!r||i===void 0)return a({message:"getProgramTime: playlist and time must be provided"});var s=_K(i,r);if(!s)return a({message:"valid programTime was not found"});if(s.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:i},l=yK(i,s.segment);return l&&(o.programDateTime=l.toISOString()),a(null,o)},kK=function t(e){var r=e.programTime,n=e.playlist,i=e.retryCount,a=i===void 0?2:i,s=e.seekTo,o=e.pauseAfterSeek,l=o===void 0?!0:o,c=e.tech,u=e.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if(typeof r=="undefined"||!n||!s)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!c.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!TK(n))return u({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var d=wK(r,n);if(!d)return u({message:r+" was not found in the stream"});var h=d.segment,p=xK(h.dateTimeObject,r);if(d.type==="estimate"){if(a===0)return u({message:r+" is not buffered yet. Try again"});s(d.estimatedStart+p),c.one("seeked",function(){t({programTime:r,playlist:n,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:c,callback:u})});return}var y=h.start+p,w=function(){return u(null,c.currentTime())};c.one("seeked",w),l&&c.pause(),s(y)},am=function(e,r){if(e.readyState===4)return r()},EK=function(e,r,n){var i=[],a,s=!1,o=function(h,p,y,w){return p.abort(),s=!0,n(h,p,y,w)},l=function(h,p){if(!s){if(h)return o(h,p,"",i);var y=p.responseText.substring(i&&i.byteLength||0,p.responseText.length);if(i=Lq(i,zI(y,!0)),a=a||nc(i),i.length<10||a&&i.length<a+2)return am(p,function(){return o(h,p,"",i)});var w=cb(i);return w==="ts"&&i.length<188?am(p,function(){return o(h,p,"",i)}):!w&&i.length<376?am(p,function(){return o(h,p,"",i)}):o(null,p,w,i)}},c={uri:e,beforeSend:function(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function(p){return p.total,p.loaded,Dv(h,null,{statusCode:h.status},l)})}},u=r(c,function(d,h){return Dv(u,d,h,l)});return u},CK=H.EventTarget,nO=H.mergeOptions,N1=function(e,r){if(!JP(e,r)||e.sidx&&r.sidx&&(e.sidx.offset!==r.sidx.offset||e.sidx.length!==r.sidx.length))return!1;if(!e.sidx&&r.sidx||e.sidx&&!r.sidx||e.segments&&!r.segments||!e.segments&&r.segments)return!1;if(!e.segments&&!r.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],a=r.segments[n];if(i.uri!==a.uri)return!1;if(!(!i.byterange&&!a.byterange)){var s=i.byterange,o=a.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},AK=function(e){var r=e.masterXml,n=e.srcUrl,i=e.clientOffset,a=e.sidxMapping,s=e.previousManifest,o=YG(r,{manifestUri:n,clientOffset:i,sidxMapping:a,previousManifest:s});return YP(o,n),o},IK=function(e,r,n){for(var i=!0,a=nO(e,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod,timelineStarts:r.timelineStarts}),s=0;s<r.playlists.length;s++){var o=r.playlists[s];if(o.sidx){var l=Ap(o.sidx);n&&n[l]&&n[l].sidx&&ab(o,n[l].sidx,o.sidx.resolvedUri)}var c=Pv(a,o,N1);c&&(a=c,i=!1)}return Xu(r,function(u,d,h,p){if(u.playlists&&u.playlists.length){var y=u.playlists[0].id,w=Pv(a,u.playlists[0],N1);w&&(a=w,a.mediaGroups[d][h][p].playlists[0]=a.playlists[y],i=!1)}}),r.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:a},PK=function(e,r){var n=Boolean(!e.map&&!r.map),i=n||Boolean(e.map&&r.map&&e.map.byterange.offset===r.map.byterange.offset&&e.map.byterange.length===r.map.byterange.length);return i&&e.uri===r.uri&&e.byterange.offset===r.byterange.offset&&e.byterange.length===r.byterange.length},j1=function(e,r){var n={};for(var i in e){var a=e[i],s=a.sidx;if(s){var o=Ap(s);if(!r[o])break;var l=r[o].sidxInfo;PK(l,s)&&(n[o]=r[o])}}return n},OK=function(e,r){var n=j1(e.playlists,r),i=n;return Xu(e,function(a,s,o,l){if(a.playlists&&a.playlists.length){var c=a.playlists;i=nO(i,j1(c,r))}}),i},Rv=function(t){ge(e,t);function e(n,i,a,s){var o;a===void 0&&(a={}),o=t.call(this)||this,o.masterPlaylistLoader_=s||Ne(o),s||(o.isMaster_=!0);var l=a,c=l.withCredentials,u=c===void 0?!1:c,d=l.handleManifestRedirects,h=d===void 0?!1:d;if(o.vhs_=i,o.withCredentials=u,o.handleManifestRedirects=h,!n)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=ji("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=n,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=n,o}var r=e.prototype;return r.requestErrored_=function(i,a,s){if(!this.request)return!0;if(this.request=null,i)return this.error=typeof i=="object"&&!(i instanceof Error)?i:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},s&&(this.state=s),this.trigger("error"),!0},r.addSidxSegments_=function(i,a,s){var o=this,l=i.sidx&&Ap(i.sidx);if(!i.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=L.setTimeout(function(){return s(!1)},0);return}var c=pf(this.handleManifestRedirects,i.sidx.resolvedUri),u=function(h,p){if(!o.requestErrored_(h,p,a)){var y=o.masterPlaylistLoader_.sidxMapping_,w;try{w=e9(Ie(p.response).subarray(8))}catch(v){o.requestErrored_(v,p,a);return}return y[l]={sidxInfo:i.sidx,sidx:w},ab(i,w,i.sidx.resolvedUri),s(!0)}};this.request=EK(c,this.vhs_.xhr,function(d,h,p,y){if(d)return u(d,h);if(!p||p!=="mp4")return u({status:h.status,message:"Unsupported "+(p||"unknown")+" container type for sidx segment at URL: "+c,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},h);var w=i.sidx.byterange,v=w.offset,T=w.length;if(y.length>=T+v)return u(d,{response:y.subarray(v,v+T),status:h.status,uri:h.uri});o.request=o.vhs_.xhr({uri:c,responseType:"arraybuffer",headers:Lv({byterange:i.sidx.byterange})},u)})},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},L.clearTimeout(this.minimumUpdatePeriodTimeout_),L.clearTimeout(this.mediaRequest_),L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},r.hasPendingRequest=function(){return this.request||this.mediaRequest_},r.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},r.media=function(i){var a=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof i=="string"){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var o=!this.media_||i.id!==this.media_.id;if(o&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList){this.state="HAVE_METADATA",this.media_=i,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!o||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,s,function(l){a.haveMetadata({startingState:s,playlist:i})}))},r.haveMetadata=function(i){var a=i.startingState,s=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),a==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},r.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(L.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},r.load=function(i){var a=this;L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(i){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=L.setTimeout(function(){return a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},r.start=function(){var i=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=L.setTimeout(function(){return i.haveMaster_()},0);return}this.requestMaster_(function(a,s){i.haveMaster_(),!i.hasPendingRequest()&&!i.media_&&i.media(i.masterPlaylistLoader_.master.playlists[0])})},r.requestMaster_=function(i){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(a.requestErrored_(s,o)){a.state==="HAVE_NOTHING"&&(a.started=!1);return}var l=o.responseText!==a.masterPlaylistLoader_.masterXml_;if(a.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?a.masterLoaded_=Date.parse(o.responseHeaders.date):a.masterLoaded_=Date.now(),a.masterPlaylistLoader_.srcUrl=pf(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,o),l){a.handleMaster_(),a.syncClientServerClock_(function(){return i(o,l)});return}return i(o,l)})},r.syncClientServerClock_=function(i){var a=this,s=XG(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),i();this.request=this.vhs_.xhr({uri:ki(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,l){if(!!a.request){if(o)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),i();var c;s.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?c=a.masterLoaded_:c=Date.parse(l.responseHeaders.date):c=Date.parse(l.responseText),a.masterPlaylistLoader_.clientOffset_=c-Date.now(),i()}})},r.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},r.handleMaster_=function(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,a=AK({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(a=IK(i,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a||i;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!i||a&&a.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(a)},r.updateMinimumUpdatePeriodTimeout_=function(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(L.clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var a=i.master&&i.master.minimumUpdatePeriod;if(a===0&&(i.media()?a=i.media().targetDuration*1e3:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout");return}this.createMUPTimeout_(a)},r.createMUPTimeout_=function(i){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=L.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(i)},i)},r.refreshXml_=function(){var i=this;this.requestMaster_(function(a,s){!s||(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=OK(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(o){i.refreshMedia_(i.media().id)}))})},r.refreshMedia_=function(i){var a=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[i];if(o?this.media_=s[i]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function c(){a.media().endList||(a.mediaUpdateTimeout=L.setTimeout(function(){a.trigger("mediaupdatetimeout"),c()},Ov(a.media(),Boolean(o))))};l()}this.trigger("loadedplaylist")},e}(CK),Zt={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},DK=function(e){for(var r=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r.buffer},aO=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},LK=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var r=new BlobBuilder;return r.append(e),URL.createObjectURL(r.getBlob())}},sO=function(e){return function(){var r=LK(e),n=aO(new Worker(r));n.objURL=r;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(r),i.call(this)},n}},oO=function(e){return"var browserWorkerPolyFill = "+aO.toString()+`;
browserWorkerPolyFill(self);
`+e},lO=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},RK=oO(lO(function(){var t=function(){this.init=function(){var f={};this.on=function(m,g){f[m]||(f[m]=[]),f[m]=f[m].concat(g)},this.off=function(m,g){var b;return f[m]?(b=f[m].indexOf(g),f[m]=f[m].slice(),f[m].splice(b,1),b>-1):!1},this.trigger=function(m){var g,b,_,x;if(g=f[m],!!g)if(arguments.length===2)for(_=g.length,b=0;b<_;++b)g[b].call(this,arguments[1]);else{for(x=[],b=arguments.length,b=1;b<arguments.length;++b)x.push(arguments[b]);for(_=g.length,b=0;b<_;++b)g[b].apply(this,x)}},this.dispose=function(){f={}}}};t.prototype.pipe=function(S){return this.on("data",function(f){S.push(f)}),this.on("done",function(f){S.flush(f)}),this.on("partialdone",function(f){S.partialFlush(f)}),this.on("endedtimeline",function(f){S.endTimeline(f)}),this.on("reset",function(f){S.reset(f)}),S},t.prototype.push=function(S){this.trigger("data",S)},t.prototype.flush=function(S){this.trigger("done",S)},t.prototype.partialFlush=function(S){this.trigger("partialdone",S)},t.prototype.endTimeline=function(S){this.trigger("endedtimeline",S)},t.prototype.reset=function(S){this.trigger("reset",S)};var e=t,r=Math.pow(2,32),n=function(f){var m=new DataView(f.buffer,f.byteOffset,f.byteLength),g;return m.getBigUint64?(g=m.getBigUint64(0),g<Number.MAX_SAFE_INTEGER?Number(g):g):m.getUint32(0)*r+m.getUint32(4)},i={getUint64:n,MAX_UINT32:r},a=i.MAX_UINT32,s,o,l,c,u,d,h,p,y,w,v,T,k,A,E,I,F,j,D,z,M,U,P,q,X,fe,te,se,le,Re,Le,pt,it,gt,Gt,K;(function(){var S;if(P={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array!="undefined"){for(S in P)P.hasOwnProperty(S)&&(P[S]=[S.charCodeAt(0),S.charCodeAt(1),S.charCodeAt(2),S.charCodeAt(3)]);q=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),fe=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),X=new Uint8Array([0,0,0,1]),te=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),se=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),le={video:te,audio:se},pt=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Le=new Uint8Array([0,0,0,0,0,0,0,0]),it=new Uint8Array([0,0,0,0,0,0,0,0]),gt=it,Gt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),K=it,Re=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(f){var m=[],g=0,b,_,x;for(b=1;b<arguments.length;b++)m.push(arguments[b]);for(b=m.length;b--;)g+=m[b].byteLength;for(_=new Uint8Array(g+8),x=new DataView(_.buffer,_.byteOffset,_.byteLength),x.setUint32(0,_.byteLength),_.set(f,4),b=0,g=8;b<m.length;b++)_.set(m[b],g),g+=m[b].byteLength;return _},o=function(){return s(P.dinf,s(P.dref,pt))},l=function(f){return s(P.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},c=function(){return s(P.ftyp,q,X,q,fe)},I=function(f){return s(P.hdlr,le[f])},u=function(f){return s(P.mdat,f)},E=function(f){var m=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(m[12]=f.samplerate>>>24&255,m[13]=f.samplerate>>>16&255,m[14]=f.samplerate>>>8&255,m[15]=f.samplerate&255),s(P.mdhd,m)},A=function(f){return s(P.mdia,E(f),I(f.type),h(f))},d=function(f){return s(P.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},h=function(f){return s(P.minf,f.type==="video"?s(P.vmhd,Re):s(P.smhd,Le),o(),j(f))},p=function(f,m){for(var g=[],b=m.length;b--;)g[b]=z(m[b]);return s.apply(null,[P.moof,d(f)].concat(g))},y=function(f){for(var m=f.length,g=[];m--;)g[m]=T(f[m]);return s.apply(null,[P.moov,v(4294967295)].concat(g).concat(w(f)))},w=function(f){for(var m=f.length,g=[];m--;)g[m]=M(f[m]);return s.apply(null,[P.mvex].concat(g))},v=function(f){var m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(P.mvhd,m)},F=function(f){var m=f.samples||[],g=new Uint8Array(4+m.length),b,_;for(_=0;_<m.length;_++)b=m[_].flags,g[_+4]=b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return s(P.sdtp,g)},j=function(f){return s(P.stbl,D(f),s(P.stts,K),s(P.stsc,gt),s(P.stsz,Gt),s(P.stco,it))},function(){var S,f;D=function(g){return s(P.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),g.type==="video"?S(g):f(g))},S=function(g){var b=g.sps||[],_=g.pps||[],x=[],C=[],O,B;for(O=0;O<b.length;O++)x.push((b[O].byteLength&65280)>>>8),x.push(b[O].byteLength&255),x=x.concat(Array.prototype.slice.call(b[O]));for(O=0;O<_.length;O++)C.push((_[O].byteLength&65280)>>>8),C.push(_[O].byteLength&255),C=C.concat(Array.prototype.slice.call(_[O]));if(B=[P.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(g.width&65280)>>8,g.width&255,(g.height&65280)>>8,g.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(P.avcC,new Uint8Array([1,g.profileIdc,g.profileCompatibility,g.levelIdc,255].concat([b.length],x,[_.length],C))),s(P.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],g.sarRatio){var N=g.sarRatio[0],$=g.sarRatio[1];B.push(s(P.pasp,new Uint8Array([(N&4278190080)>>24,(N&16711680)>>16,(N&65280)>>8,N&255,($&4278190080)>>24,($&16711680)>>16,($&65280)>>8,$&255])))}return s.apply(null,B)},f=function(g){return s(P.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(g.channelcount&65280)>>8,g.channelcount&255,(g.samplesize&65280)>>8,g.samplesize&255,0,0,0,0,(g.samplerate&65280)>>8,g.samplerate&255,0,0]),l(g))}}(),k=function(f){var m=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return s(P.tkhd,m)},z=function(f){var m,g,b,_,x,C,O;return m=s(P.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),C=Math.floor(f.baseMediaDecodeTime/a),O=Math.floor(f.baseMediaDecodeTime%a),g=s(P.tfdt,new Uint8Array([1,0,0,0,C>>>24&255,C>>>16&255,C>>>8&255,C&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255])),x=32+20+8+16+8+8,f.type==="audio"?(b=U(f,x),s(P.traf,m,g,b)):(_=F(f),b=U(f,_.length+x),s(P.traf,m,g,b,_))},T=function(f){return f.duration=f.duration||4294967295,s(P.trak,k(f),A(f))},M=function(f){var m=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(m[m.length-1]=0),s(P.trex,m)},function(){var S,f,m;m=function(b,_){var x=0,C=0,O=0,B=0;return b.length&&(b[0].duration!==void 0&&(x=1),b[0].size!==void 0&&(C=2),b[0].flags!==void 0&&(O=4),b[0].compositionTimeOffset!==void 0&&(B=8)),[0,0,x|C|O|B,1,(b.length&4278190080)>>>24,(b.length&16711680)>>>16,(b.length&65280)>>>8,b.length&255,(_&4278190080)>>>24,(_&16711680)>>>16,(_&65280)>>>8,_&255]},f=function(b,_){var x,C,O,B,N,$;for(B=b.samples||[],_+=8+12+16*B.length,O=m(B,_),C=new Uint8Array(O.length+B.length*16),C.set(O),x=O.length,$=0;$<B.length;$++)N=B[$],C[x++]=(N.duration&4278190080)>>>24,C[x++]=(N.duration&16711680)>>>16,C[x++]=(N.duration&65280)>>>8,C[x++]=N.duration&255,C[x++]=(N.size&4278190080)>>>24,C[x++]=(N.size&16711680)>>>16,C[x++]=(N.size&65280)>>>8,C[x++]=N.size&255,C[x++]=N.flags.isLeading<<2|N.flags.dependsOn,C[x++]=N.flags.isDependedOn<<6|N.flags.hasRedundancy<<4|N.flags.paddingValue<<1|N.flags.isNonSyncSample,C[x++]=N.flags.degradationPriority&240<<8,C[x++]=N.flags.degradationPriority&15,C[x++]=(N.compositionTimeOffset&4278190080)>>>24,C[x++]=(N.compositionTimeOffset&16711680)>>>16,C[x++]=(N.compositionTimeOffset&65280)>>>8,C[x++]=N.compositionTimeOffset&255;return s(P.trun,C)},S=function(b,_){var x,C,O,B,N,$;for(B=b.samples||[],_+=8+12+8*B.length,O=m(B,_),x=new Uint8Array(O.length+B.length*8),x.set(O),C=O.length,$=0;$<B.length;$++)N=B[$],x[C++]=(N.duration&4278190080)>>>24,x[C++]=(N.duration&16711680)>>>16,x[C++]=(N.duration&65280)>>>8,x[C++]=N.duration&255,x[C++]=(N.size&4278190080)>>>24,x[C++]=(N.size&16711680)>>>16,x[C++]=(N.size&65280)>>>8,x[C++]=N.size&255;return s(P.trun,x)},U=function(b,_){return b.type==="audio"?S(b,_):f(b,_)}}();var ve={ftyp:c,mdat:u,moof:p,moov:y,initSegment:function(f){var m=c(),g=y(f),b;return b=new Uint8Array(m.byteLength+g.byteLength),b.set(m),b.set(g,m.byteLength),b}},ue=function(f){var m,g,b=[],_=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,b.byteLength=0,m=0;m<f.length;m++)g=f[m],g.nalUnitType==="access_unit_delimiter_rbsp"?(b.length&&(b.duration=g.dts-b.dts,_.byteLength+=b.byteLength,_.nalCount+=b.length,_.duration+=b.duration,_.push(b)),b=[g],b.byteLength=g.data.byteLength,b.pts=g.pts,b.dts=g.dts):(g.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(b.keyFrame=!0),b.duration=g.dts-b.dts,b.byteLength+=g.data.byteLength,b.push(g));return _.length&&(!b.duration||b.duration<=0)&&(b.duration=_[_.length-1].duration),_.byteLength+=b.byteLength,_.nalCount+=b.length,_.duration+=b.duration,_.push(b),_},be=function(f){var m,g,b=[],_=[];for(b.byteLength=0,b.nalCount=0,b.duration=0,b.pts=f[0].pts,b.dts=f[0].dts,_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=f[0].pts,_.dts=f[0].dts,m=0;m<f.length;m++)g=f[m],g.keyFrame?(b.length&&(_.push(b),_.byteLength+=b.byteLength,_.nalCount+=b.nalCount,_.duration+=b.duration),b=[g],b.nalCount=g.length,b.byteLength=g.byteLength,b.pts=g.pts,b.dts=g.dts,b.duration=g.duration):(b.duration+=g.duration,b.nalCount+=g.length,b.byteLength+=g.byteLength,b.push(g));return _.length&&b.duration<=0&&(b.duration=_[_.length-1].duration),_.byteLength+=b.byteLength,_.nalCount+=b.nalCount,_.duration+=b.duration,_.push(b),_},Qe=function(f){var m;return!f[0][0].keyFrame&&f.length>1&&(m=f.shift(),f.byteLength-=m.byteLength,f.nalCount-=m.nalCount,f[0][0].dts=m.dts,f[0][0].pts=m.pts,f[0][0].duration+=m.duration),f},st=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Be=function(f,m){var g=st();return g.dataOffset=m,g.compositionTimeOffset=f.pts-f.dts,g.duration=f.duration,g.size=4*f.length,g.size+=f.byteLength,f.keyFrame&&(g.flags.dependsOn=2,g.flags.isNonSyncSample=0),g},Ue=function(f,m){var g,b,_,x,C,O=m||0,B=[];for(g=0;g<f.length;g++)for(x=f[g],b=0;b<x.length;b++)C=x[b],_=Be(C,O),O+=_.size,B.push(_);return B},R=function(f){var m,g,b,_,x,C,O=0,B=f.byteLength,N=f.nalCount,$=B+4*N,W=new Uint8Array($),pe=new DataView(W.buffer);for(m=0;m<f.length;m++)for(_=f[m],g=0;g<_.length;g++)for(x=_[g],b=0;b<x.length;b++)C=x[b],pe.setUint32(O,C.data.byteLength),O+=4,W.set(C.data,O),O+=C.data.byteLength;return W},V=function(f,m){var g,b=m||0,_=[];return g=Be(f,b),_.push(g),_},G=function(f){var m,g,b=0,_=f.byteLength,x=f.length,C=_+4*x,O=new Uint8Array(C),B=new DataView(O.buffer);for(m=0;m<f.length;m++)g=f[m],B.setUint32(b,g.data.byteLength),b+=4,O.set(g.data,b),b+=g.data.byteLength;return O},Q={groupNalsIntoFrames:ue,groupFramesIntoGops:be,extendFirstKeyFrame:Qe,generateSampleTable:Ue,concatenateNalData:R,generateSampleTableForFrame:V,concatenateNalDataForFrame:G},Y=[33,16,5,32,164,27],de=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ee=function(f){for(var m=[];f--;)m.push(0);return m},ie=function(f){return Object.keys(f).reduce(function(m,g){return m[g]=new Uint8Array(f[g].reduce(function(b,_){return b.concat(_)},[])),m},{})},he,re=function(){if(!he){var f={96e3:[Y,[227,64],ee(154),[56]],88200:[Y,[231],ee(170),[56]],64e3:[Y,[248,192],ee(240),[56]],48e3:[Y,[255,192],ee(268),[55,148,128],ee(54),[112]],44100:[Y,[255,192],ee(268),[55,163,128],ee(84),[112]],32e3:[Y,[255,192],ee(268),[55,234],ee(226),[112]],24e3:[Y,[255,192],ee(268),[55,255,128],ee(268),[111,112],ee(126),[224]],16e3:[Y,[255,192],ee(268),[55,255,128],ee(268),[111,255],ee(269),[223,108],ee(195),[1,192]],12e3:[de,ee(268),[3,127,248],ee(268),[6,255,240],ee(268),[13,255,224],ee(268),[27,253,128],ee(259),[56]],11025:[de,ee(268),[3,127,248],ee(268),[6,255,240],ee(268),[13,255,224],ee(268),[27,255,192],ee(268),[55,175,128],ee(108),[112]],8e3:[de,ee(268),[3,121,16],ee(47),[7]]};he=ie(f)}return he},Se=9e4,_e,ke,Pe,We,rt,ot,ht;_e=function(f){return f*Se},ke=function(f,m){return f*m},Pe=function(f){return f/Se},We=function(f,m){return f/m},rt=function(f,m){return _e(We(f,m))},ot=function(f,m){return ke(Pe(f),m)},ht=function(f,m,g){return Pe(g?f:f-m)};var $e={ONE_SECOND_IN_TS:Se,secondsToVideoTs:_e,secondsToAudioTs:ke,videoTsToSeconds:Pe,audioTsToSeconds:We,audioTsToVideoTs:rt,videoTsToAudioTs:ot,metadataTsToSeconds:ht},Kn=function(f){var m,g,b=0;for(m=0;m<f.length;m++)g=f[m],b+=g.data.byteLength;return b},Zu=function(f,m,g,b){var _,x=0,C=0,O=0,B=0,N,$,W;if(!!m.length&&(_=$e.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),x=Math.ceil($e.ONE_SECOND_IN_TS/(f.samplerate/1024)),g&&b&&(C=_-Math.max(g,b),O=Math.floor(C/x),B=O*x),!(O<1||B>$e.ONE_SECOND_IN_TS/2))){for(N=re()[f.samplerate],N||(N=m[0].data),$=0;$<O;$++)W=m[0],m.splice(0,0,{data:N,dts:W.dts-x,pts:W.pts-x});return f.baseMediaDecodeTime-=Math.floor($e.videoTsToAudioTs(B,f.samplerate)),B}},Ra=function(f,m,g){return m.minSegmentDts>=g?f:(m.minSegmentDts=1/0,f.filter(function(b){return b.dts>=g?(m.minSegmentDts=Math.min(m.minSegmentDts,b.dts),m.minSegmentPts=m.minSegmentDts,!0):!1}))},ed=function(f){var m,g,b=[];for(m=0;m<f.length;m++)g=f[m],b.push({size:g.data.byteLength,duration:1024});return b},kr=function(f){var m,g,b=0,_=new Uint8Array(Kn(f));for(m=0;m<f.length;m++)g=f[m],_.set(g.data,b),b+=g.data.byteLength;return _},Er={prefixWithSilence:Zu,trimAdtsFramesByEarliestDts:Ra,generateSampleTable:ed,concatenateFrameData:kr},td=$e.ONE_SECOND_IN_TS,ZO=function(f,m){typeof m.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=m.pts),f.minSegmentPts===void 0?f.minSegmentPts=m.pts:f.minSegmentPts=Math.min(f.minSegmentPts,m.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=m.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,m.pts)),typeof m.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=m.dts),f.minSegmentDts===void 0?f.minSegmentDts=m.dts:f.minSegmentDts=Math.min(f.minSegmentDts,m.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=m.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,m.dts))},eD=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},tD=function(f,m){var g,b,_=f.minSegmentDts;return m||(_-=f.timelineStartInfo.dts),g=f.timelineStartInfo.baseMediaDecodeTime,g+=_,g=Math.max(0,g),f.type==="audio"&&(b=f.samplerate/td,g*=b,g=Math.floor(g)),g},xi={clearDtsInfo:eD,calculateTrackBaseMediaDecodeTime:tD,collectDtsInfo:ZO},lw=4,rD=128,iD=function(f){for(var m=0,g={payloadType:-1,payloadSize:0},b=0,_=0;m<f.byteLength&&f[m]!==rD;){for(;f[m]===255;)b+=255,m++;for(b+=f[m++];f[m]===255;)_+=255,m++;if(_+=f[m++],!g.payload&&b===lw){var x=String.fromCharCode(f[m+3],f[m+4],f[m+5],f[m+6]);if(x==="GA94"){g.payloadType=b,g.payloadSize=_,g.payload=f.subarray(m,m+_);break}else g.payload=void 0}m+=_,b=0,_=0}return g},nD=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},aD=function(f,m){var g=[],b,_,x,C;if(!(m[0]&64))return g;for(_=m[0]&31,b=0;b<_;b++)x=b*3,C={type:m[x+2]&3,pts:f},m[x+2]&4&&(C.ccData=m[x+3]<<8|m[x+4],g.push(C));return g},sD=function(f){for(var m=f.byteLength,g=[],b=1,_,x;b<m-2;)f[b]===0&&f[b+1]===0&&f[b+2]===3?(g.push(b+2),b+=2):b++;if(g.length===0)return f;_=m-g.length,x=new Uint8Array(_);var C=0;for(b=0;b<_;C++,b++)C===g[0]&&(C++,g.shift()),x[b]=f[C];return x},kl={parseSei:iD,parseUserData:nD,parseCaptionPackets:aD,discardEmulationPreventionBytes:sD,USER_DATA_REGISTERED_ITU_T_T35:lw},Jr=function S(f){f=f||{},S.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Pt(0,0),new Pt(0,1),new Pt(1,0),new Pt(1,1)],this.parse708captions_&&(this.cc708Stream_=new wt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(m){m.on("data",this.trigger.bind(this,"data")),m.on("partialdone",this.trigger.bind(this,"partialdone")),m.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Jr.prototype=new e,Jr.prototype.push=function(S){var f,m,g;if(S.nalUnitType==="sei_rbsp"&&(f=kl.parseSei(S.escapedRBSP),!!f.payload&&f.payloadType===kl.USER_DATA_REGISTERED_ITU_T_T35&&(m=kl.parseUserData(f),!!m))){if(S.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(S.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}g=kl.parseCaptionPackets(S.pts,m),this.captionPackets_=this.captionPackets_.concat(g),this.latestDts_!==S.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=S.dts}},Jr.prototype.flushCCStreams=function(S){this.ccStreams_.forEach(function(f){return S==="flush"?f.flush():f.partialFlush()},this)},Jr.prototype.flushStream=function(S){if(!this.captionPackets_.length){this.flushCCStreams(S);return}this.captionPackets_.forEach(function(f,m){f.presortIndex=m}),this.captionPackets_.sort(function(f,m){return f.pts===m.pts?f.presortIndex-m.presortIndex:f.pts-m.pts}),this.captionPackets_.forEach(function(f){f.type<2?this.dispatchCea608Packet(f):this.dispatchCea708Packet(f)},this),this.captionPackets_.length=0,this.flushCCStreams(S)},Jr.prototype.flush=function(){return this.flushStream("flush")},Jr.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Jr.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(S){S.reset()})},Jr.prototype.dispatchCea608Packet=function(S){this.setsTextOrXDSActive(S)?this.activeCea608Channel_[S.type]=null:this.setsChannel1Active(S)?this.activeCea608Channel_[S.type]=0:this.setsChannel2Active(S)&&(this.activeCea608Channel_[S.type]=1),this.activeCea608Channel_[S.type]!==null&&this.ccStreams_[(S.type<<1)+this.activeCea608Channel_[S.type]].push(S)},Jr.prototype.setsChannel1Active=function(S){return(S.ccData&30720)===4096},Jr.prototype.setsChannel2Active=function(S){return(S.ccData&30720)===6144},Jr.prototype.setsTextOrXDSActive=function(S){return(S.ccData&28928)===256||(S.ccData&30974)===4138||(S.ccData&30974)===6186},Jr.prototype.dispatchCea708Packet=function(S){this.parse708captions_&&this.cc708Stream_.push(S)};var oD={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},lD=function(f){var m=oD[f]||f;return f&4096&&f===m?"":String.fromCharCode(m)},rd=function(f){return 32<=f&&f<=127||160<=f&&f<=255},hn=function(f){this.windowNum=f,this.reset()};hn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},hn.prototype.getText=function(){return this.rows.join(`
`)},hn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},hn.prototype.newLine=function(S){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(S),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},hn.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},hn.prototype.addText=function(S){this.rows[this.rowIdx]+=S},hn.prototype.backspace=function(){if(!this.isEmpty()){var S=this.rows[this.rowIdx];this.rows[this.rowIdx]=S.substr(0,S.length-1)}};var id=function(f,m,g){this.serviceNum=f,this.text="",this.currentWindow=new hn(-1),this.windows=[],this.stream=g,typeof m=="string"&&this.createTextDecoder(m)};id.prototype.init=function(S,f){this.startPts=S;for(var m=0;m<8;m++)this.windows[m]=new hn(m),typeof f=="function"&&(this.windows[m].beforeRowOverflow=f)},id.prototype.setCurrentWindow=function(S){this.currentWindow=this.windows[S]},id.prototype.createTextDecoder=function(S){if(typeof TextDecoder=="undefined")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(S)}catch(f){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+S+" encoding. "+f})}};var wt=function S(f){f=f||{},S.prototype.init.call(this);var m=this,g=f.captionServices||{},b={},_;Object.keys(g).forEach(function(x){_=g[x],/^SERVICE/.test(x)&&(b[x]=_.encoding)}),this.serviceEncodings=b,this.current708Packet=null,this.services={},this.push=function(x){x.type===3?(m.new708Packet(),m.add708Bytes(x)):(m.current708Packet===null&&m.new708Packet(),m.add708Bytes(x))}};wt.prototype=new e,wt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},wt.prototype.add708Bytes=function(S){var f=S.ccData,m=f>>>8,g=f&255;this.current708Packet.ptsVals.push(S.pts),this.current708Packet.data.push(m),this.current708Packet.data.push(g)},wt.prototype.push708Packet=function(){var S=this.current708Packet,f=S.data,m=null,g=null,b=0,_=f[b++];for(S.seq=_>>6,S.sizeCode=_&63;b<f.length;b++)_=f[b++],m=_>>5,g=_&31,m===7&&g>0&&(_=f[b++],m=_),this.pushServiceBlock(m,b,g),g>0&&(b+=g-1)},wt.prototype.pushServiceBlock=function(S,f,m){var g,b=f,_=this.current708Packet.data,x=this.services[S];for(x||(x=this.initService(S,b));b<f+m&&b<_.length;b++)g=_[b],rd(g)?b=this.handleText(b,x):g===24?b=this.multiByteCharacter(b,x):g===16?b=this.extendedCommands(b,x):128<=g&&g<=135?b=this.setCurrentWindow(b,x):152<=g&&g<=159?b=this.defineWindow(b,x):g===136?b=this.clearWindows(b,x):g===140?b=this.deleteWindows(b,x):g===137?b=this.displayWindows(b,x):g===138?b=this.hideWindows(b,x):g===139?b=this.toggleWindows(b,x):g===151?b=this.setWindowAttributes(b,x):g===144?b=this.setPenAttributes(b,x):g===145?b=this.setPenColor(b,x):g===146?b=this.setPenLocation(b,x):g===143?x=this.reset(b,x):g===8?x.currentWindow.backspace():g===12?x.currentWindow.clearText():g===13?x.currentWindow.pendingNewLine=!0:g===14?x.currentWindow.clearText():g===141&&b++},wt.prototype.extendedCommands=function(S,f){var m=this.current708Packet.data,g=m[++S];return rd(g)&&(S=this.handleText(S,f,{isExtended:!0})),S},wt.prototype.getPts=function(S){return this.current708Packet.ptsVals[Math.floor(S/2)]},wt.prototype.initService=function(S,f){var g="SERVICE"+S,m=this,g,b;return g in this.serviceEncodings&&(b=this.serviceEncodings[g]),this.services[S]=new id(S,b,m),this.services[S].init(this.getPts(f),function(_){m.flushDisplayed(_,m.services[S])}),this.services[S]},wt.prototype.handleText=function(S,f,m){var g=m&&m.isExtended,b=m&&m.isMultiByte,_=this.current708Packet.data,x=g?4096:0,C=_[S],O=_[S+1],B=f.currentWindow,N,$;return f.textDecoder_&&!g?(b?($=[C,O],S++):$=[C],N=f.textDecoder_.decode(new Uint8Array($))):N=lD(x|C),B.pendingNewLine&&!B.isEmpty()&&B.newLine(this.getPts(S)),B.pendingNewLine=!1,B.addText(N),S},wt.prototype.multiByteCharacter=function(S,f){var m=this.current708Packet.data,g=m[S+1],b=m[S+2];return rd(g)&&rd(b)&&(S=this.handleText(++S,f,{isMultiByte:!0})),S},wt.prototype.setCurrentWindow=function(S,f){var m=this.current708Packet.data,g=m[S],b=g&7;return f.setCurrentWindow(b),S},wt.prototype.defineWindow=function(S,f){var m=this.current708Packet.data,g=m[S],b=g&7;f.setCurrentWindow(b);var _=f.currentWindow;return g=m[++S],_.visible=(g&32)>>5,_.rowLock=(g&16)>>4,_.columnLock=(g&8)>>3,_.priority=g&7,g=m[++S],_.relativePositioning=(g&128)>>7,_.anchorVertical=g&127,g=m[++S],_.anchorHorizontal=g,g=m[++S],_.anchorPoint=(g&240)>>4,_.rowCount=g&15,g=m[++S],_.columnCount=g&63,g=m[++S],_.windowStyle=(g&56)>>3,_.penStyle=g&7,_.virtualRowCount=_.rowCount+1,S},wt.prototype.setWindowAttributes=function(S,f){var m=this.current708Packet.data,g=m[S],b=f.currentWindow.winAttr;return g=m[++S],b.fillOpacity=(g&192)>>6,b.fillRed=(g&48)>>4,b.fillGreen=(g&12)>>2,b.fillBlue=g&3,g=m[++S],b.borderType=(g&192)>>6,b.borderRed=(g&48)>>4,b.borderGreen=(g&12)>>2,b.borderBlue=g&3,g=m[++S],b.borderType+=(g&128)>>5,b.wordWrap=(g&64)>>6,b.printDirection=(g&48)>>4,b.scrollDirection=(g&12)>>2,b.justify=g&3,g=m[++S],b.effectSpeed=(g&240)>>4,b.effectDirection=(g&12)>>2,b.displayEffect=g&3,S},wt.prototype.flushDisplayed=function(S,f){for(var m=[],g=0;g<8;g++)f.windows[g].visible&&!f.windows[g].isEmpty()&&m.push(f.windows[g].getText());f.endPts=S,f.text=m.join(`

`),this.pushCaption(f),f.startPts=S},wt.prototype.pushCaption=function(S){S.text!==""&&(this.trigger("data",{startPts:S.startPts,endPts:S.endPts,text:S.text,stream:"cc708_"+S.serviceNum}),S.text="",S.startPts=S.endPts)},wt.prototype.displayWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],b=this.getPts(S);this.flushDisplayed(b,f);for(var _=0;_<8;_++)g&1<<_&&(f.windows[_].visible=1);return S},wt.prototype.hideWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],b=this.getPts(S);this.flushDisplayed(b,f);for(var _=0;_<8;_++)g&1<<_&&(f.windows[_].visible=0);return S},wt.prototype.toggleWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],b=this.getPts(S);this.flushDisplayed(b,f);for(var _=0;_<8;_++)g&1<<_&&(f.windows[_].visible^=1);return S},wt.prototype.clearWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],b=this.getPts(S);this.flushDisplayed(b,f);for(var _=0;_<8;_++)g&1<<_&&f.windows[_].clearText();return S},wt.prototype.deleteWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],b=this.getPts(S);this.flushDisplayed(b,f);for(var _=0;_<8;_++)g&1<<_&&f.windows[_].reset();return S},wt.prototype.setPenAttributes=function(S,f){var m=this.current708Packet.data,g=m[S],b=f.currentWindow.penAttr;return g=m[++S],b.textTag=(g&240)>>4,b.offset=(g&12)>>2,b.penSize=g&3,g=m[++S],b.italics=(g&128)>>7,b.underline=(g&64)>>6,b.edgeType=(g&56)>>3,b.fontStyle=g&7,S},wt.prototype.setPenColor=function(S,f){var m=this.current708Packet.data,g=m[S],b=f.currentWindow.penColor;return g=m[++S],b.fgOpacity=(g&192)>>6,b.fgRed=(g&48)>>4,b.fgGreen=(g&12)>>2,b.fgBlue=g&3,g=m[++S],b.bgOpacity=(g&192)>>6,b.bgRed=(g&48)>>4,b.bgGreen=(g&12)>>2,b.bgBlue=g&3,g=m[++S],b.edgeRed=(g&48)>>4,b.edgeGreen=(g&12)>>2,b.edgeBlue=g&3,S},wt.prototype.setPenLocation=function(S,f){var m=this.current708Packet.data,g=m[S],b=f.currentWindow.penLoc;return f.currentWindow.pendingNewLine=!0,g=m[++S],b.row=g&15,g=m[++S],b.column=g&63,S},wt.prototype.reset=function(S,f){var m=this.getPts(S);return this.flushDisplayed(m,f),this.initService(f.serviceNum,S)};var cD={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},nd=function(f){return f===null?"":(f=cD[f]||f,String.fromCharCode(f))},ad=14,uD=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ma=function(){for(var f=[],m=ad+1;m--;)f.push("");return f},Pt=function S(f,m){S.prototype.init.call(this),this.field_=f||0,this.dataChannel_=m||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(g){var b,_,x,C,O;if(b=g.ccData&32639,b===this.lastControlCode_){this.lastControlCode_=null;return}if((b&61440)===4096?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),x=b>>>8,C=b&255,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(g.pts),this.flushDisplayed(g.pts),_=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=_,this.startPts_=g.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(g.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(g.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(g.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(g.pts),this.flushDisplayed(g.pts),this.shiftRowsUp_(),this.startPts_=g.pts;else if(b===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(g.pts),this.displayed_=Ma();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ma();else if(b===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(g.pts),this.displayed_=Ma()),this.mode_="paintOn",this.startPts_=g.pts;else if(this.isSpecialCharacter(x,C))x=(x&3)<<8,O=nd(x|C),this[this.mode_](g.pts,O),this.column_++;else if(this.isExtCharacter(x,C))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),x=(x&3)<<8,O=nd(x|C),this[this.mode_](g.pts,O),this.column_++;else if(this.isMidRowCode(x,C))this.clearFormatting(g.pts),this[this.mode_](g.pts," "),this.column_++,(C&14)===14&&this.addFormatting(g.pts,["i"]),(C&1)===1&&this.addFormatting(g.pts,["u"]);else if(this.isOffsetControlCode(x,C))this.column_+=C&3;else if(this.isPAC(x,C)){var B=uD.indexOf(b&7968);this.mode_==="rollUp"&&(B-this.rollUpRows_+1<0&&(B=this.rollUpRows_-1),this.setRollUp(g.pts,B)),B!==this.row_&&(this.clearFormatting(g.pts),this.row_=B),C&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(g.pts,["u"]),(b&16)===16&&(this.column_=((b&14)>>1)*4),this.isColorPAC(C)&&(C&14)===14&&this.addFormatting(g.pts,["i"])}else this.isNormalChar(x)&&(C===0&&(C=null),O=nd(x),O+=nd(C),this[this.mode_](g.pts,O),this.column_+=O.length)}};Pt.prototype=new e,Pt.prototype.flushDisplayed=function(S){var f=this.displayed_.map(function(m,g){try{return m.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+g+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");f.length&&this.trigger("data",{startPts:this.startPts_,endPts:S,text:f,stream:this.name_})},Pt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ma(),this.nonDisplayed_=Ma(),this.lastControlCode_=null,this.column_=0,this.row_=ad,this.rollUpRows_=2,this.formatting_=[]},Pt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Pt.prototype.isSpecialCharacter=function(S,f){return S===this.EXT_&&f>=48&&f<=63},Pt.prototype.isExtCharacter=function(S,f){return(S===this.EXT_+1||S===this.EXT_+2)&&f>=32&&f<=63},Pt.prototype.isMidRowCode=function(S,f){return S===this.EXT_&&f>=32&&f<=47},Pt.prototype.isOffsetControlCode=function(S,f){return S===this.OFFSET_&&f>=33&&f<=35},Pt.prototype.isPAC=function(S,f){return S>=this.BASE_&&S<this.BASE_+8&&f>=64&&f<=127},Pt.prototype.isColorPAC=function(S){return S>=64&&S<=79||S>=96&&S<=127},Pt.prototype.isNormalChar=function(S){return S>=32&&S<=127},Pt.prototype.setRollUp=function(S,f){if(this.mode_!=="rollUp"&&(this.row_=ad,this.mode_="rollUp",this.flushDisplayed(S),this.nonDisplayed_=Ma(),this.displayed_=Ma()),f!==void 0&&f!==this.row_)for(var m=0;m<this.rollUpRows_;m++)this.displayed_[f-m]=this.displayed_[this.row_-m],this.displayed_[this.row_-m]="";f===void 0&&(f=this.row_),this.topRow_=f-this.rollUpRows_+1},Pt.prototype.addFormatting=function(S,f){this.formatting_=this.formatting_.concat(f);var m=f.reduce(function(g,b){return g+"<"+b+">"},"");this[this.mode_](S,m)},Pt.prototype.clearFormatting=function(S){if(!!this.formatting_.length){var f=this.formatting_.reverse().reduce(function(m,g){return m+"</"+g+">"},"");this.formatting_=[],this[this.mode_](S,f)}},Pt.prototype.popOn=function(S,f){var m=this.nonDisplayed_[this.row_];m+=f,this.nonDisplayed_[this.row_]=m},Pt.prototype.rollUp=function(S,f){var m=this.displayed_[this.row_];m+=f,this.displayed_[this.row_]=m},Pt.prototype.shiftRowsUp_=function(){var S;for(S=0;S<this.topRow_;S++)this.displayed_[S]="";for(S=this.row_+1;S<ad+1;S++)this.displayed_[S]="";for(S=this.topRow_;S<this.row_;S++)this.displayed_[S]=this.displayed_[S+1];this.displayed_[this.row_]=""},Pt.prototype.paintOn=function(S,f){var m=this.displayed_[this.row_];m+=f,this.displayed_[this.row_]=m};var sd={CaptionStream:Jr,Cea608Stream:Pt,Cea708Stream:wt},or={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},dD=8589934592,hD=4294967296,cw="shared",qp=function(f,m){var g=1;for(f>m&&(g=-1);Math.abs(m-f)>hD;)f+=g*dD;return f},uw=function S(f){var m,g;S.prototype.init.call(this),this.type_=f||cw,this.push=function(b){this.type_!==cw&&b.type!==this.type_||(g===void 0&&(g=b.dts),b.dts=qp(b.dts,g),b.pts=qp(b.pts,g),m=b.dts,this.trigger("data",b))},this.flush=function(){g=m,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){g=void 0,m=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};uw.prototype=new e;var dw={TimestampRolloverStream:uw,handleRollover:qp},hw=function(f,m,g){var b,_="";for(b=m;b<g;b++)_+="%"+("00"+f[b].toString(16)).slice(-2);return _},od=function(f,m,g){return decodeURIComponent(hw(f,m,g))},fD=function(f,m,g){return unescape(hw(f,m,g))},ld=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},fw={TXXX:function(f){var m;if(f.data[0]===3){for(m=1;m<f.data.length;m++)if(f.data[m]===0){f.description=od(f.data,1,m),f.value=od(f.data,m+1,f.data.length).replace(/\0*$/,"");break}f.data=f.value}},WXXX:function(f){var m;if(f.data[0]===3){for(m=1;m<f.data.length;m++)if(f.data[m]===0){f.description=od(f.data,1,m),f.url=od(f.data,m+1,f.data.length);break}}},PRIV:function(f){var m;for(m=0;m<f.data.length;m++)if(f.data[m]===0){f.owner=fD(f.data,0,m);break}f.privateData=f.data.subarray(m+1),f.data=f.privateData}},cd;cd=function(f){var m={descriptor:f&&f.descriptor},g=0,b=[],_=0,x;if(cd.prototype.init.call(this),this.dispatchType=or.METADATA_STREAM_TYPE.toString(16),m.descriptor)for(x=0;x<m.descriptor.length;x++)this.dispatchType+=("00"+m.descriptor[x].toString(16)).slice(-2);this.push=function(C){var O,B,N,$,W,pe;if(C.type==="timed-metadata"){if(C.dataAlignmentIndicator&&(_=0,b.length=0),b.length===0&&(C.data.length<10||C.data[0]!=="I".charCodeAt(0)||C.data[1]!=="D".charCodeAt(0)||C.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(b.push(C),_+=C.data.byteLength,b.length===1&&(g=ld(C.data.subarray(6,10)),g+=10),!(_<g)){for(O={data:new Uint8Array(g),frames:[],pts:b[0].pts,dts:b[0].dts},W=0;W<g;)O.data.set(b[0].data.subarray(0,g-W),W),W+=b[0].data.byteLength,_-=b[0].data.byteLength,b.shift();B=10,O.data[5]&64&&(B+=4,B+=ld(O.data.subarray(10,14)),g-=ld(O.data.subarray(16,20)));do{if(N=ld(O.data.subarray(B+4,B+8)),N<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(pe=String.fromCharCode(O.data[B],O.data[B+1],O.data[B+2],O.data[B+3]),$={id:pe,data:O.data.subarray(B+10,B+N+10)},$.key=$.id,fw[$.id]&&(fw[$.id]($),$.owner==="com.apple.streaming.transportStreamTimestamp")){var we=$.data,ae=(we[3]&1)<<30|we[4]<<22|we[5]<<14|we[6]<<6|we[7]>>>2;ae*=4,ae+=we[7]&3,$.timeStamp=ae,O.pts===void 0&&O.dts===void 0&&(O.pts=$.timeStamp,O.dts=$.timeStamp),this.trigger("timestamp",$)}O.frames.push($),B+=10,B+=N}while(B<g);this.trigger("data",O)}}}},cd.prototype=new e;var pD=cd,gD=dw.TimestampRolloverStream,ud,El,dd,Bs=188,Gp=71;ud=function(){var f=new Uint8Array(Bs),m=0;ud.prototype.init.call(this),this.push=function(g){var b=0,_=Bs,x;for(m?(x=new Uint8Array(g.byteLength+m),x.set(f.subarray(0,m)),x.set(g,m),m=0):x=g;_<x.byteLength;){if(x[b]===Gp&&x[_]===Gp){this.trigger("data",x.subarray(b,_)),b+=Bs,_+=Bs;continue}b++,_++}b<x.byteLength&&(f.set(x.subarray(b),0),m=x.byteLength-b)},this.flush=function(){m===Bs&&f[0]===Gp&&(this.trigger("data",f),m=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){m=0,this.trigger("reset")}},ud.prototype=new e,El=function(){var f,m,g,b;El.prototype.init.call(this),b=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(x,C){var O=0;C.payloadUnitStartIndicator&&(O+=x[O]+1),C.type==="pat"?m(x.subarray(O),C):g(x.subarray(O),C)},m=function(x,C){C.section_number=x[7],C.last_section_number=x[8],b.pmtPid=(x[10]&31)<<8|x[11],C.pmtPid=b.pmtPid},g=function(x,C){var O,B,N,$;if(!!(x[5]&1)){for(b.programMapTable={video:null,audio:null,"timed-metadata":{}},O=(x[1]&15)<<8|x[2],B=3+O-4,N=(x[10]&15)<<8|x[11],$=12+N;$<B;){var W=x[$],pe=(x[$+1]&31)<<8|x[$+2];W===or.H264_STREAM_TYPE&&b.programMapTable.video===null?b.programMapTable.video=pe:W===or.ADTS_STREAM_TYPE&&b.programMapTable.audio===null?b.programMapTable.audio=pe:W===or.METADATA_STREAM_TYPE&&(b.programMapTable["timed-metadata"][pe]=W),$+=((x[$+3]&15)<<8|x[$+4])+5}C.programMapTable=b.programMapTable}},this.push=function(_){var x={},C=4;if(x.payloadUnitStartIndicator=!!(_[1]&64),x.pid=_[1]&31,x.pid<<=8,x.pid|=_[2],(_[3]&48)>>>4>1&&(C+=_[C]+1),x.pid===0)x.type="pat",f(_.subarray(C),x),this.trigger("data",x);else if(x.pid===this.pmtPid)for(x.type="pmt",f(_.subarray(C),x),this.trigger("data",x);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([_,C,x]):this.processPes_(_,C,x)},this.processPes_=function(_,x,C){C.pid===this.programMapTable.video?C.streamType=or.H264_STREAM_TYPE:C.pid===this.programMapTable.audio?C.streamType=or.ADTS_STREAM_TYPE:C.streamType=this.programMapTable["timed-metadata"][C.pid],C.type="pes",C.data=_.subarray(x),this.trigger("data",C)}},El.prototype=new e,El.STREAM_TYPES={h264:27,adts:15},dd=function(){var f=this,m=!1,g={data:[],size:0},b={data:[],size:0},_={data:[],size:0},x,C=function(N,$){var W,pe=N[0]<<16|N[1]<<8|N[2];$.data=new Uint8Array,pe===1&&($.packetLength=6+(N[4]<<8|N[5]),$.dataAlignmentIndicator=(N[6]&4)!==0,W=N[7],W&192&&($.pts=(N[9]&14)<<27|(N[10]&255)<<20|(N[11]&254)<<12|(N[12]&255)<<5|(N[13]&254)>>>3,$.pts*=4,$.pts+=(N[13]&6)>>>1,$.dts=$.pts,W&64&&($.dts=(N[14]&14)<<27|(N[15]&255)<<20|(N[16]&254)<<12|(N[17]&255)<<5|(N[18]&254)>>>3,$.dts*=4,$.dts+=(N[18]&6)>>>1)),$.data=N.subarray(9+N[8]))},O=function(N,$,W){var pe=new Uint8Array(N.size),we={type:$},ae=0,Oe=0,Wt=!1,Ar;if(!(!N.data.length||N.size<9)){for(we.trackId=N.data[0].pid,ae=0;ae<N.data.length;ae++)Ar=N.data[ae],pe.set(Ar.data,Oe),Oe+=Ar.data.byteLength;C(pe,we),Wt=$==="video"||we.packetLength<=N.size,(W||Wt)&&(N.size=0,N.data.length=0),Wt&&f.trigger("data",we)}};dd.prototype.init.call(this),this.push=function(B){({pat:function(){},pes:function(){var $,W;switch(B.streamType){case or.H264_STREAM_TYPE:$=g,W="video";break;case or.ADTS_STREAM_TYPE:$=b,W="audio";break;case or.METADATA_STREAM_TYPE:$=_,W="timed-metadata";break;default:return}B.payloadUnitStartIndicator&&O($,W,!0),$.data.push(B),$.size+=B.data.byteLength},pmt:function(){var $={type:"metadata",tracks:[]};x=B.programMapTable,x.video!==null&&$.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.video,codec:"avc",type:"video"}),x.audio!==null&&$.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.audio,codec:"adts",type:"audio"}),m=!0,f.trigger("data",$)}})[B.type]()},this.reset=function(){g.size=0,g.data.length=0,b.size=0,b.data.length=0,this.trigger("reset")},this.flushStreams_=function(){O(g,"video"),O(b,"audio"),O(_,"timed-metadata")},this.flush=function(){if(!m&&x){var B={type:"metadata",tracks:[]};x.video!==null&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.video,codec:"avc",type:"video"}),x.audio!==null&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.audio,codec:"adts",type:"audio"}),f.trigger("data",B)}m=!1,this.flushStreams_(),this.trigger("done")}},dd.prototype=new e;var pw={PAT_PID:0,MP2T_PACKET_LENGTH:Bs,TransportPacketStream:ud,TransportParseStream:El,ElementaryStream:dd,TimestampRolloverStream:gD,CaptionStream:sd.CaptionStream,Cea608Stream:sd.Cea608Stream,Cea708Stream:sd.Cea708Stream,MetadataStream:pD};for(var Wp in or)or.hasOwnProperty(Wp)&&(pw[Wp]=or[Wp]);var fn=pw,mD=$e.ONE_SECOND_IN_TS,hd,gw=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];hd=function(f){var m,g=0;hd.prototype.init.call(this),this.skipWarn_=function(b,_){this.trigger("log",{level:"warn",message:"adts skiping bytes "+b+" to "+_+" in frame "+g+" outside syncword"})},this.push=function(b){var _=0,x,C,O,B,N;if(f||(g=0),b.type==="audio"){m&&m.length?(O=m,m=new Uint8Array(O.byteLength+b.data.byteLength),m.set(O),m.set(b.data,O.byteLength)):m=b.data;for(var $;_+7<m.length;){if(m[_]!==255||(m[_+1]&246)!==240){typeof $!="number"&&($=_),_++;continue}if(typeof $=="number"&&(this.skipWarn_($,_),$=null),C=(~m[_+1]&1)*2,x=(m[_+3]&3)<<11|m[_+4]<<3|(m[_+5]&224)>>5,B=((m[_+6]&3)+1)*1024,N=B*mD/gw[(m[_+2]&60)>>>2],m.byteLength-_<x)break;this.trigger("data",{pts:b.pts+g*N,dts:b.dts+g*N,sampleCount:B,audioobjecttype:(m[_+2]>>>6&3)+1,channelcount:(m[_+2]&1)<<2|(m[_+3]&192)>>>6,samplerate:gw[(m[_+2]&60)>>>2],samplingfrequencyindex:(m[_+2]&60)>>>2,samplesize:16,data:m.subarray(_+7+C,_+x)}),g++,_+=x}typeof $=="number"&&(this.skipWarn_($,_),$=null),m=m.subarray(_)}},this.flush=function(){g=0,this.trigger("done")},this.reset=function(){m=void 0,this.trigger("reset")},this.endTimeline=function(){m=void 0,this.trigger("endedtimeline")}},hd.prototype=new e;var mw=hd,vw;vw=function(f){var m=f.byteLength,g=0,b=0;this.length=function(){return 8*m},this.bitsAvailable=function(){return 8*m+b},this.loadWord=function(){var _=f.byteLength-m,x=new Uint8Array(4),C=Math.min(4,m);if(C===0)throw new Error("no bytes available");x.set(f.subarray(_,_+C)),g=new DataView(x.buffer).getUint32(0),b=C*8,m-=C},this.skipBits=function(_){var x;b>_?(g<<=_,b-=_):(_-=b,x=Math.floor(_/8),_-=x*8,m-=x,this.loadWord(),g<<=_,b-=_)},this.readBits=function(_){var x=Math.min(b,_),C=g>>>32-x;return b-=x,b>0?g<<=x:m>0&&this.loadWord(),x=_-x,x>0?C<<x|this.readBits(x):C},this.skipLeadingZeros=function(){var _;for(_=0;_<b;++_)if((g&2147483648>>>_)!==0)return g<<=_,b-=_,_;return this.loadWord(),_+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var _=this.skipLeadingZeros();return this.readBits(_+1)-1},this.readExpGolomb=function(){var _=this.readUnsignedExpGolomb();return 1&_?1+_>>>1:-1*(_>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var vD=vw,fd,Cl,yw;Cl=function(){var f=0,m,g;Cl.prototype.init.call(this),this.push=function(b){var _;g?(_=new Uint8Array(g.byteLength+b.data.byteLength),_.set(g),_.set(b.data,g.byteLength),g=_):g=b.data;for(var x=g.byteLength;f<x-3;f++)if(g[f+2]===1){m=f+5;break}for(;m<x;)switch(g[m]){case 0:if(g[m-1]!==0){m+=2;break}else if(g[m-2]!==0){m++;break}f+3!==m-2&&this.trigger("data",g.subarray(f+3,m-2));do m++;while(g[m]!==1&&m<x);f=m-2,m+=3;break;case 1:if(g[m-1]!==0||g[m-2]!==0){m+=3;break}this.trigger("data",g.subarray(f+3,m-2)),f=m-2,m+=3;break;default:m+=3;break}g=g.subarray(f),m-=f,f=0},this.reset=function(){g=null,f=0,this.trigger("reset")},this.flush=function(){g&&g.byteLength>3&&this.trigger("data",g.subarray(f+3)),g=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Cl.prototype=new e,yw={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},fd=function(){var f=new Cl,m,g,b,_,x,C,O;fd.prototype.init.call(this),m=this,this.push=function(B){B.type==="video"&&(g=B.trackId,b=B.pts,_=B.dts,f.push(B))},f.on("data",function(B){var N={trackId:g,pts:b,dts:_,data:B,nalUnitTypeCode:B[0]&31};switch(N.nalUnitTypeCode){case 5:N.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:N.nalUnitType="sei_rbsp",N.escapedRBSP=x(B.subarray(1));break;case 7:N.nalUnitType="seq_parameter_set_rbsp",N.escapedRBSP=x(B.subarray(1)),N.config=C(N.escapedRBSP);break;case 8:N.nalUnitType="pic_parameter_set_rbsp";break;case 9:N.nalUnitType="access_unit_delimiter_rbsp";break}m.trigger("data",N)}),f.on("done",function(){m.trigger("done")}),f.on("partialdone",function(){m.trigger("partialdone")}),f.on("reset",function(){m.trigger("reset")}),f.on("endedtimeline",function(){m.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},O=function(N,$){var W=8,pe=8,we,ae;for(we=0;we<N;we++)pe!==0&&(ae=$.readExpGolomb(),pe=(W+ae+256)%256),W=pe===0?W:pe},x=function(N){for(var $=N.byteLength,W=[],pe=1,we,ae;pe<$-2;)N[pe]===0&&N[pe+1]===0&&N[pe+2]===3?(W.push(pe+2),pe+=2):pe++;if(W.length===0)return N;we=$-W.length,ae=new Uint8Array(we);var Oe=0;for(pe=0;pe<we;Oe++,pe++)Oe===W[0]&&(Oe++,W.shift()),ae[pe]=N[Oe];return ae},C=function(N){var $=0,W=0,pe=0,we=0,ae,Oe,Wt,Ar,Ba,Zp,jw,Fw,Bw,eg,Uw,Mt=[1,1],zw,Ua;if(ae=new vD(N),Oe=ae.readUnsignedByte(),Ar=ae.readUnsignedByte(),Wt=ae.readUnsignedByte(),ae.skipUnsignedExpGolomb(),yw[Oe]&&(Ba=ae.readUnsignedExpGolomb(),Ba===3&&ae.skipBits(1),ae.skipUnsignedExpGolomb(),ae.skipUnsignedExpGolomb(),ae.skipBits(1),ae.readBoolean()))for(Uw=Ba!==3?8:12,Ua=0;Ua<Uw;Ua++)ae.readBoolean()&&(Ua<6?O(16,ae):O(64,ae));if(ae.skipUnsignedExpGolomb(),Zp=ae.readUnsignedExpGolomb(),Zp===0)ae.readUnsignedExpGolomb();else if(Zp===1)for(ae.skipBits(1),ae.skipExpGolomb(),ae.skipExpGolomb(),jw=ae.readUnsignedExpGolomb(),Ua=0;Ua<jw;Ua++)ae.skipExpGolomb();if(ae.skipUnsignedExpGolomb(),ae.skipBits(1),Fw=ae.readUnsignedExpGolomb(),Bw=ae.readUnsignedExpGolomb(),eg=ae.readBits(1),eg===0&&ae.skipBits(1),ae.skipBits(1),ae.readBoolean()&&($=ae.readUnsignedExpGolomb(),W=ae.readUnsignedExpGolomb(),pe=ae.readUnsignedExpGolomb(),we=ae.readUnsignedExpGolomb()),ae.readBoolean()&&ae.readBoolean()){switch(zw=ae.readUnsignedByte(),zw){case 1:Mt=[1,1];break;case 2:Mt=[12,11];break;case 3:Mt=[10,11];break;case 4:Mt=[16,11];break;case 5:Mt=[40,33];break;case 6:Mt=[24,11];break;case 7:Mt=[20,11];break;case 8:Mt=[32,11];break;case 9:Mt=[80,33];break;case 10:Mt=[18,11];break;case 11:Mt=[15,11];break;case 12:Mt=[64,33];break;case 13:Mt=[160,99];break;case 14:Mt=[4,3];break;case 15:Mt=[3,2];break;case 16:Mt=[2,1];break;case 255:{Mt=[ae.readUnsignedByte()<<8|ae.readUnsignedByte(),ae.readUnsignedByte()<<8|ae.readUnsignedByte()];break}}Mt&&Mt[0]/Mt[1]}return{profileIdc:Oe,levelIdc:Wt,profileCompatibility:Ar,width:(Fw+1)*16-$*2-W*2,height:(2-eg)*(Bw+1)*16-pe*2-we*2,sarRatio:Mt}}},fd.prototype=new e;var yD={H264Stream:fd,NalByteStream:Cl},bD=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],bw=function(f,m){var g=f[m+6]<<21|f[m+7]<<14|f[m+8]<<7|f[m+9],b=f[m+5],_=(b&16)>>4;return g=g>=0?g:0,_?g+20:g+10},wD=function S(f,m){return f.length-m<10||f[m]!=="I".charCodeAt(0)||f[m+1]!=="D".charCodeAt(0)||f[m+2]!=="3".charCodeAt(0)?m:(m+=bw(f,m),S(f,m))},_D=function(f){var m=wD(f,0);return f.length>=m+2&&(f[m]&255)===255&&(f[m+1]&240)===240&&(f[m+1]&22)===16},ww=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},xD=function(f,m,g){var b,_="";for(b=m;b<g;b++)_+="%"+("00"+f[b].toString(16)).slice(-2);return _},TD=function(f,m,g){return unescape(xD(f,m,g))},SD=function(f,m){var g=(f[m+5]&224)>>5,b=f[m+4]<<3,_=f[m+3]&3<<11;return _|b|g},kD=function(f,m){return f[m]==="I".charCodeAt(0)&&f[m+1]==="D".charCodeAt(0)&&f[m+2]==="3".charCodeAt(0)?"timed-metadata":f[m]&!0&&(f[m+1]&240)===240?"audio":null},ED=function(f){for(var m=0;m+5<f.length;){if(f[m]!==255||(f[m+1]&246)!==240){m++;continue}return bD[(f[m+2]&60)>>>2]}return null},CD=function(f){var m,g,b,_;m=10,f[5]&64&&(m+=4,m+=ww(f.subarray(10,14)));do{if(g=ww(f.subarray(m+4,m+8)),g<1)return null;if(_=String.fromCharCode(f[m],f[m+1],f[m+2],f[m+3]),_==="PRIV"){b=f.subarray(m+10,m+g+10);for(var x=0;x<b.byteLength;x++)if(b[x]===0){var C=TD(b,0,x);if(C==="com.apple.streaming.transportStreamTimestamp"){var O=b.subarray(x+1),B=(O[3]&1)<<30|O[4]<<22|O[5]<<14|O[6]<<6|O[7]>>>2;return B*=4,B+=O[7]&3,B}break}}m+=10,m+=g}while(m<f.byteLength);return null},pd={isLikelyAacData:_D,parseId3TagSize:bw,parseAdtsSize:SD,parseType:kD,parseSampleRate:ED,parseAacTimestamp:CD},gd;gd=function(){var f=new Uint8Array,m=0;gd.prototype.init.call(this),this.setTimestamp=function(g){m=g},this.push=function(g){var b=0,_=0,x,C,O,B;for(f.length?(B=f.length,f=new Uint8Array(g.byteLength+B),f.set(f.subarray(0,B)),f.set(g,B)):f=g;f.length-_>=3;){if(f[_]==="I".charCodeAt(0)&&f[_+1]==="D".charCodeAt(0)&&f[_+2]==="3".charCodeAt(0)){if(f.length-_<10||(b=pd.parseId3TagSize(f,_),_+b>f.length))break;C={type:"timed-metadata",data:f.subarray(_,_+b)},this.trigger("data",C),_+=b;continue}else if((f[_]&255)===255&&(f[_+1]&240)===240){if(f.length-_<7||(b=pd.parseAdtsSize(f,_),_+b>f.length))break;O={type:"audio",data:f.subarray(_,_+b),pts:m,dts:m},this.trigger("data",O),_+=b;continue}_++}x=f.length-_,x>0?f=f.subarray(_):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},gd.prototype=new e;var AD=gd,ID=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Kp=ID,PD=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Yp=PD,OD=yD.H264Stream,DD=pd.isLikelyAacData,LD=$e.ONE_SECOND_IN_TS,Al,Us,md,Na,RD=function(f,m){m.stream=f,this.trigger("log",m)},_w=function(f,m){for(var g=Object.keys(m),b=0;b<g.length;b++){var _=g[b];_==="headOfPipeline"||!m[_].on||m[_].on("log",RD.bind(f,_))}},xw=function(f,m){var g;if(f.length!==m.length)return!1;for(g=0;g<f.length;g++)if(f[g]!==m[g])return!1;return!0},Xp=function(f,m,g,b,_,x){var C=g-m,O=b-m,B=_-g;return{start:{dts:f,pts:f+C},end:{dts:f+O,pts:f+B},prependedContentDuration:x,baseMediaDecodeTime:f}};Us=function(f,m){var g=[],b,_=0,x=0,C=1/0;m=m||{},b=m.firstSequenceNumber||0,Us.prototype.init.call(this),this.push=function(O){xi.collectDtsInfo(f,O),f&&Kp.forEach(function(B){f[B]=O[B]}),g.push(O)},this.setEarliestDts=function(O){_=O},this.setVideoBaseMediaDecodeTime=function(O){C=O},this.setAudioAppendStart=function(O){x=O},this.flush=function(){var O,B,N,$,W,pe,we;if(g.length===0){this.trigger("done","AudioSegmentStream");return}O=Er.trimAdtsFramesByEarliestDts(g,f,_),f.baseMediaDecodeTime=xi.calculateTrackBaseMediaDecodeTime(f,m.keepOriginalTimestamps),we=Er.prefixWithSilence(f,O,x,C),f.samples=Er.generateSampleTable(O),N=ve.mdat(Er.concatenateFrameData(O)),g=[],B=ve.moof(b,[f]),$=new Uint8Array(B.byteLength+N.byteLength),b++,$.set(B),$.set(N,B.byteLength),xi.clearDtsInfo(f),W=Math.ceil(LD*1024/f.samplerate),O.length&&(pe=O.length*W,this.trigger("segmentTimingInfo",Xp($e.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),O[0].dts,O[0].pts,O[0].dts+pe,O[0].pts+pe,we||0)),this.trigger("timingInfo",{start:O[0].pts,end:O[0].pts+pe})),this.trigger("data",{track:f,boxes:$}),this.trigger("done","AudioSegmentStream")},this.reset=function(){xi.clearDtsInfo(f),g=[],this.trigger("reset")}},Us.prototype=new e,Al=function(f,m){var g,b=[],_=[],x,C;m=m||{},g=m.firstSequenceNumber||0,Al.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(O){xi.collectDtsInfo(f,O),O.nalUnitType==="seq_parameter_set_rbsp"&&!x&&(x=O.config,f.sps=[O.data],Yp.forEach(function(B){f[B]=x[B]},this)),O.nalUnitType==="pic_parameter_set_rbsp"&&!C&&(C=O.data,f.pps=[O.data]),b.push(O)},this.flush=function(){for(var O,B,N,$,W,pe,we=0,ae,Oe;b.length&&b[0].nalUnitType!=="access_unit_delimiter_rbsp";)b.shift();if(b.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(O=Q.groupNalsIntoFrames(b),N=Q.groupFramesIntoGops(O),N[0][0].keyFrame||(B=this.getGopForFusion_(b[0],f),B?(we=B.duration,N.unshift(B),N.byteLength+=B.byteLength,N.nalCount+=B.nalCount,N.pts=B.pts,N.dts=B.dts,N.duration+=B.duration):N=Q.extendFirstKeyFrame(N)),_.length){var Wt;if(m.alignGopsAtEnd?Wt=this.alignGopsAtEnd_(N):Wt=this.alignGopsAtStart_(N),!Wt){this.gopCache_.unshift({gop:N.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}xi.clearDtsInfo(f),N=Wt}xi.collectDtsInfo(f,N),f.samples=Q.generateSampleTable(N),W=ve.mdat(Q.concatenateNalData(N)),f.baseMediaDecodeTime=xi.calculateTrackBaseMediaDecodeTime(f,m.keepOriginalTimestamps),this.trigger("processedGopsInfo",N.map(function(Ar){return{pts:Ar.pts,dts:Ar.dts,byteLength:Ar.byteLength}})),ae=N[0],Oe=N[N.length-1],this.trigger("segmentTimingInfo",Xp(f.baseMediaDecodeTime,ae.dts,ae.pts,Oe.dts+Oe.duration,Oe.pts+Oe.duration,we)),this.trigger("timingInfo",{start:N[0].pts,end:N[N.length-1].pts+N[N.length-1].duration}),this.gopCache_.unshift({gop:N.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),b=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),$=ve.moof(g,[f]),pe=new Uint8Array($.byteLength+W.byteLength),g++,pe.set($),pe.set(W,$.byteLength),this.trigger("data",{track:f,boxes:pe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),b=[],this.gopCache_.length=0,_.length=0,this.trigger("reset")},this.resetStream_=function(){xi.clearDtsInfo(f),x=void 0,C=void 0},this.getGopForFusion_=function(O){var B=45e3,N=1e4,$=1/0,W,pe,we,ae,Oe;for(Oe=0;Oe<this.gopCache_.length;Oe++)ae=this.gopCache_[Oe],we=ae.gop,!(!(f.pps&&xw(f.pps[0],ae.pps[0]))||!(f.sps&&xw(f.sps[0],ae.sps[0])))&&(we.dts<f.timelineStartInfo.dts||(W=O.dts-we.dts-we.duration,W>=-N&&W<=B&&(!pe||$>W)&&(pe=ae,$=W)));return pe?pe.gop:null},this.alignGopsAtStart_=function(O){var B,N,$,W,pe,we,ae,Oe;for(pe=O.byteLength,we=O.nalCount,ae=O.duration,B=N=0;B<_.length&&N<O.length&&($=_[B],W=O[N],$.pts!==W.pts);){if(W.pts>$.pts){B++;continue}N++,pe-=W.byteLength,we-=W.nalCount,ae-=W.duration}return N===0?O:N===O.length?null:(Oe=O.slice(N),Oe.byteLength=pe,Oe.duration=ae,Oe.nalCount=we,Oe.pts=Oe[0].pts,Oe.dts=Oe[0].dts,Oe)},this.alignGopsAtEnd_=function(O){var B,N,$,W,pe,we;for(B=_.length-1,N=O.length-1,pe=null,we=!1;B>=0&&N>=0;){if($=_[B],W=O[N],$.pts===W.pts){we=!0;break}if($.pts>W.pts){B--;continue}B===_.length-1&&(pe=N),N--}if(!we&&pe===null)return null;var ae;if(we?ae=N:ae=pe,ae===0)return O;var Oe=O.slice(ae),Wt=Oe.reduce(function(Ar,Ba){return Ar.byteLength+=Ba.byteLength,Ar.duration+=Ba.duration,Ar.nalCount+=Ba.nalCount,Ar},{byteLength:0,duration:0,nalCount:0});return Oe.byteLength=Wt.byteLength,Oe.duration=Wt.duration,Oe.nalCount=Wt.nalCount,Oe.pts=Oe[0].pts,Oe.dts=Oe[0].dts,Oe},this.alignGopsWith=function(O){_=O}},Al.prototype=new e,Na=function(f,m){this.numberOfTracks=0,this.metadataStream=m,f=f||{},typeof f.remux!="undefined"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Na.prototype.init.call(this),this.push=function(g){if(g.text)return this.pendingCaptions.push(g);if(g.frames)return this.pendingMetadata.push(g);this.pendingTracks.push(g.track),this.pendingBytes+=g.boxes.byteLength,g.track.type==="video"&&(this.videoTrack=g.track,this.pendingBoxes.push(g.boxes)),g.track.type==="audio"&&(this.audioTrack=g.track,this.pendingBoxes.unshift(g.boxes))}},Na.prototype=new e,Na.prototype.flush=function(S){var f=0,m={captions:[],captionStreams:{},metadata:[],info:{}},g,b,_,x=0,C;if(this.pendingTracks.length<this.numberOfTracks){if(S!=="VideoSegmentStream"&&S!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(x=this.videoTrack.timelineStartInfo.pts,Yp.forEach(function(O){m.info[O]=this.videoTrack[O]},this)):this.audioTrack&&(x=this.audioTrack.timelineStartInfo.pts,Kp.forEach(function(O){m.info[O]=this.audioTrack[O]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?m.type=this.pendingTracks[0].type:m.type="combined",this.emittedTracks+=this.pendingTracks.length,_=ve.initSegment(this.pendingTracks),m.initSegment=new Uint8Array(_.byteLength),m.initSegment.set(_),m.data=new Uint8Array(this.pendingBytes),C=0;C<this.pendingBoxes.length;C++)m.data.set(this.pendingBoxes[C],f),f+=this.pendingBoxes[C].byteLength;for(C=0;C<this.pendingCaptions.length;C++)g=this.pendingCaptions[C],g.startTime=$e.metadataTsToSeconds(g.startPts,x,this.keepOriginalTimestamps),g.endTime=$e.metadataTsToSeconds(g.endPts,x,this.keepOriginalTimestamps),m.captionStreams[g.stream]=!0,m.captions.push(g);for(C=0;C<this.pendingMetadata.length;C++)b=this.pendingMetadata[C],b.cueTime=$e.metadataTsToSeconds(b.pts,x,this.keepOriginalTimestamps),m.metadata.push(b);for(m.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",m),C=0;C<m.captions.length;C++)g=m.captions[C],this.trigger("caption",g);for(C=0;C<m.metadata.length;C++)b=m.metadata[C],this.trigger("id3Frame",b)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Na.prototype.setRemux=function(S){this.remuxTracks=S},md=function(f){var m=this,g=!0,b,_;md.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var x={};this.transmuxPipeline_=x,x.type="aac",x.metadataStream=new fn.MetadataStream,x.aacStream=new AD,x.audioTimestampRolloverStream=new fn.TimestampRolloverStream("audio"),x.timedMetadataTimestampRolloverStream=new fn.TimestampRolloverStream("timed-metadata"),x.adtsStream=new mw,x.coalesceStream=new Na(f,x.metadataStream),x.headOfPipeline=x.aacStream,x.aacStream.pipe(x.audioTimestampRolloverStream).pipe(x.adtsStream),x.aacStream.pipe(x.timedMetadataTimestampRolloverStream).pipe(x.metadataStream).pipe(x.coalesceStream),x.metadataStream.on("timestamp",function(C){x.aacStream.setTimestamp(C.timeStamp)}),x.aacStream.on("data",function(C){C.type!=="timed-metadata"&&C.type!=="audio"||x.audioSegmentStream||(_=_||{timelineStartInfo:{baseMediaDecodeTime:m.baseMediaDecodeTime},codec:"adts",type:"audio"},x.coalesceStream.numberOfTracks++,x.audioSegmentStream=new Us(_,f),x.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),x.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),x.adtsStream.pipe(x.audioSegmentStream).pipe(x.coalesceStream),m.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!b}))}),x.coalesceStream.on("data",this.trigger.bind(this,"data")),x.coalesceStream.on("done",this.trigger.bind(this,"done")),_w(this,x)},this.setupTsPipeline=function(){var x={};this.transmuxPipeline_=x,x.type="ts",x.metadataStream=new fn.MetadataStream,x.packetStream=new fn.TransportPacketStream,x.parseStream=new fn.TransportParseStream,x.elementaryStream=new fn.ElementaryStream,x.timestampRolloverStream=new fn.TimestampRolloverStream,x.adtsStream=new mw,x.h264Stream=new OD,x.captionStream=new fn.CaptionStream(f),x.coalesceStream=new Na(f,x.metadataStream),x.headOfPipeline=x.packetStream,x.packetStream.pipe(x.parseStream).pipe(x.elementaryStream).pipe(x.timestampRolloverStream),x.timestampRolloverStream.pipe(x.h264Stream),x.timestampRolloverStream.pipe(x.adtsStream),x.timestampRolloverStream.pipe(x.metadataStream).pipe(x.coalesceStream),x.h264Stream.pipe(x.captionStream).pipe(x.coalesceStream),x.elementaryStream.on("data",function(C){var O;if(C.type==="metadata"){for(O=C.tracks.length;O--;)!b&&C.tracks[O].type==="video"?(b=C.tracks[O],b.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime):!_&&C.tracks[O].type==="audio"&&(_=C.tracks[O],_.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime);b&&!x.videoSegmentStream&&(x.coalesceStream.numberOfTracks++,x.videoSegmentStream=new Al(b,f),x.videoSegmentStream.on("log",m.getLogTrigger_("videoSegmentStream")),x.videoSegmentStream.on("timelineStartInfo",function(B){_&&!f.keepOriginalTimestamps&&(_.timelineStartInfo=B,x.audioSegmentStream.setEarliestDts(B.dts-m.baseMediaDecodeTime))}),x.videoSegmentStream.on("processedGopsInfo",m.trigger.bind(m,"gopInfo")),x.videoSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"videoSegmentTimingInfo")),x.videoSegmentStream.on("baseMediaDecodeTime",function(B){_&&x.audioSegmentStream.setVideoBaseMediaDecodeTime(B)}),x.videoSegmentStream.on("timingInfo",m.trigger.bind(m,"videoTimingInfo")),x.h264Stream.pipe(x.videoSegmentStream).pipe(x.coalesceStream)),_&&!x.audioSegmentStream&&(x.coalesceStream.numberOfTracks++,x.audioSegmentStream=new Us(_,f),x.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),x.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),x.audioSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"audioSegmentTimingInfo")),x.adtsStream.pipe(x.audioSegmentStream).pipe(x.coalesceStream)),m.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!b})}}),x.coalesceStream.on("data",this.trigger.bind(this,"data")),x.coalesceStream.on("id3Frame",function(C){C.dispatchType=x.metadataStream.dispatchType,m.trigger("id3Frame",C)}),x.coalesceStream.on("caption",this.trigger.bind(this,"caption")),x.coalesceStream.on("done",this.trigger.bind(this,"done")),_w(this,x)},this.setBaseMediaDecodeTime=function(x){var C=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=x),_&&(_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,xi.clearDtsInfo(_),C.audioTimestampRolloverStream&&C.audioTimestampRolloverStream.discontinuity()),b&&(C.videoSegmentStream&&(C.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,xi.clearDtsInfo(b),C.captionStream.reset()),C.timestampRolloverStream&&C.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(x){_&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(x)},this.setRemux=function(x){var C=this.transmuxPipeline_;f.remux=x,C&&C.coalesceStream&&C.coalesceStream.setRemux(x)},this.alignGopsWith=function(x){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(x)},this.getLogTrigger_=function(x){var C=this;return function(O){O.stream=x,C.trigger("log",O)}},this.push=function(x){if(g){var C=DD(x);C&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!C&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),g=!1}this.transmuxPipeline_.headOfPipeline.push(x)},this.flush=function(){g=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},md.prototype=new e;var MD={Transmuxer:md,VideoSegmentStream:Al,AudioSegmentStream:Us,AUDIO_PROPERTIES:Kp,VIDEO_PROPERTIES:Yp,generateSegmentTimingInfo:Xp},ND=function(f){return f>>>0},jD=function(f){return("00"+f.toString(16)).slice(-2)},vd={toUnsigned:ND,toHexString:jD},FD=function(f){var m="";return m+=String.fromCharCode(f[0]),m+=String.fromCharCode(f[1]),m+=String.fromCharCode(f[2]),m+=String.fromCharCode(f[3]),m},ja=FD,BD=vd.toUnsigned,UD=function S(f,m){var g=[],b,_,x,C,O;if(!m.length)return null;for(b=0;b<f.byteLength;)_=BD(f[b]<<24|f[b+1]<<16|f[b+2]<<8|f[b+3]),x=ja(f.subarray(b+4,b+8)),C=_>1?b+_:f.byteLength,x===m[0]&&(m.length===1?g.push(f.subarray(b+8,C)):(O=S(f.subarray(b+8,C),m.slice(1)),O.length&&(g=g.concat(O)))),b=C;return g},xt=UD,zD=vd.toUnsigned,$D=i.getUint64,VD=function(f){var m={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return m.version===1?m.baseMediaDecodeTime=$D(f.subarray(4)):m.baseMediaDecodeTime=zD(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),m},Tw=VD,HD=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},Sw=HD,qD=function(f){var m={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},g=new DataView(f.buffer,f.byteOffset,f.byteLength),b=m.flags[2]&1,_=m.flags[2]&4,x=m.flags[1]&1,C=m.flags[1]&2,O=m.flags[1]&4,B=m.flags[1]&8,N=g.getUint32(4),$=8,W;for(b&&(m.dataOffset=g.getInt32($),$+=4),_&&N&&(W={flags:Sw(f.subarray($,$+4))},$+=4,x&&(W.duration=g.getUint32($),$+=4),C&&(W.size=g.getUint32($),$+=4),B&&(m.version===1?W.compositionTimeOffset=g.getInt32($):W.compositionTimeOffset=g.getUint32($),$+=4),m.samples.push(W),N--);N--;)W={},x&&(W.duration=g.getUint32($),$+=4),C&&(W.size=g.getUint32($),$+=4),O&&(W.flags=Sw(f.subarray($,$+4)),$+=4),B&&(m.version===1?W.compositionTimeOffset=g.getInt32($):W.compositionTimeOffset=g.getUint32($),$+=4),m.samples.push(W);return m},kw=qD,GD=function(f){var m=new DataView(f.buffer,f.byteOffset,f.byteLength),g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:m.getUint32(4)},b=g.flags[2]&1,_=g.flags[2]&2,x=g.flags[2]&8,C=g.flags[2]&16,O=g.flags[2]&32,B=g.flags[0]&65536,N=g.flags[0]&131072,$;return $=8,b&&($+=4,g.baseDataOffset=m.getUint32(12),$+=4),_&&(g.sampleDescriptionIndex=m.getUint32($),$+=4),x&&(g.defaultSampleDuration=m.getUint32($),$+=4),C&&(g.defaultSampleSize=m.getUint32($),$+=4),O&&(g.defaultSampleFlags=m.getUint32($)),B&&(g.durationIsEmpty=!0),!b&&N&&(g.baseDataOffsetIsMoof=!0),g},Ew=GD,Cw=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Il;typeof window!="undefined"?Il=window:typeof Cw!="undefined"?Il=Cw:typeof self!="undefined"?Il=self:Il={};var Pl=Il,WD=kl.discardEmulationPreventionBytes,KD=sd.CaptionStream,YD=function(f,m){for(var g=f,b=0;b<m.length;b++){var _=m[b];if(g<_.size)return _;g-=_.size}return null},XD=function(f,m,g){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),_={logs:[],seiNals:[]},x,C,O,B;for(C=0;C+4<f.length;C+=O)if(O=b.getUint32(C),C+=4,!(O<=0))switch(f[C]&31){case 6:var N=f.subarray(C+1,C+1+O),$=YD(C,m);if(x={nalUnitType:"sei_rbsp",size:O,data:N,escapedRBSP:WD(N),trackId:g},$)x.pts=$.pts,x.dts=$.dts,B=$;else if(B)x.pts=B.pts,x.dts=B.dts;else{_.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+C+" for trackId "+g+". See mux.js#223."});break}_.seiNals.push(x);break}return _},QD=function(f,m,g){var b=m,_=g.defaultSampleDuration||0,x=g.defaultSampleSize||0,C=g.trackId,O=[];return f.forEach(function(B){var N=kw(B),$=N.samples;$.forEach(function(W){W.duration===void 0&&(W.duration=_),W.size===void 0&&(W.size=x),W.trackId=C,W.dts=b,W.compositionTimeOffset===void 0&&(W.compositionTimeOffset=0),typeof b=="bigint"?(W.pts=b+Pl.BigInt(W.compositionTimeOffset),b+=Pl.BigInt(W.duration)):(W.pts=b+W.compositionTimeOffset,b+=W.duration)}),O=O.concat($)}),O},JD=function(f,m){var g=xt(f,["moof","traf"]),b=xt(f,["mdat"]),_={},x=[];return b.forEach(function(C,O){var B=g[O];x.push({mdat:C,traf:B})}),x.forEach(function(C){var O=C.mdat,B=C.traf,N=xt(B,["tfhd"]),$=Ew(N[0]),W=$.trackId,pe=xt(B,["tfdt"]),we=pe.length>0?Tw(pe[0]).baseMediaDecodeTime:0,ae=xt(B,["trun"]),Oe,Wt;m===W&&ae.length>0&&(Oe=QD(ae,we,$),Wt=XD(O,Oe,W),_[W]||(_[W]={seiNals:[],logs:[]}),_[W].seiNals=_[W].seiNals.concat(Wt.seiNals),_[W].logs=_[W].logs.concat(Wt.logs))}),_},ZD=function(f,m,g){var b;if(m===null)return null;b=JD(f,m);var _=b[m]||{};return{seiNals:_.seiNals,logs:_.logs,timescale:g}},eL=function(){var f=!1,m,g,b,_,x,C;this.isInitialized=function(){return f},this.init=function(O){m=new KD,f=!0,C=O?O.isPartial:!1,m.on("data",function(B){B.startTime=B.startPts/_,B.endTime=B.endPts/_,x.captions.push(B),x.captionStreams[B.stream]=!0}),m.on("log",function(B){x.logs.push(B)})},this.isNewInit=function(O,B){return O&&O.length===0||B&&typeof B=="object"&&Object.keys(B).length===0?!1:b!==O[0]||_!==B[b]},this.parse=function(O,B,N){var $;if(this.isInitialized()){if(!B||!N)return null;if(this.isNewInit(B,N))b=B[0],_=N[b];else if(b===null||!_)return g.push(O),null}else return null;for(;g.length>0;){var W=g.shift();this.parse(W,B,N)}return $=ZD(O,b,_),$&&$.logs&&(x.logs=x.logs.concat($.logs)),$===null||!$.seiNals?x.logs.length?{logs:x.logs,captions:[],captionStreams:[]}:null:(this.pushNals($.seiNals),this.flushStream(),x)},this.pushNals=function(O){if(!this.isInitialized()||!O||O.length===0)return null;O.forEach(function(B){m.push(B)})},this.flushStream=function(){if(!this.isInitialized())return null;C?m.partialFlush():m.flush()},this.clearParsedCaptions=function(){x.captions=[],x.captionStreams={},x.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;m.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){g=[],b=null,_=null,x?this.clearParsedCaptions():x={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},tL=eL,yd=vd.toUnsigned,Ol=vd.toHexString,rL=i.getUint64,Aw,Iw,Pw,Ow,Dw,Qp;Aw=function(f){var m={},g=xt(f,["moov","trak"]);return g.reduce(function(b,_){var x,C,O,B,N;return x=xt(_,["tkhd"])[0],!x||(C=x[0],O=C===0?12:20,B=yd(x[O]<<24|x[O+1]<<16|x[O+2]<<8|x[O+3]),N=xt(_,["mdia","mdhd"])[0],!N)?null:(C=N[0],O=C===0?12:20,b[B]=yd(N[O]<<24|N[O+1]<<16|N[O+2]<<8|N[O+3]),b)},m)},Iw=function(f,m){var g;g=xt(m,["moof","traf"]);var b=g.reduce(function(_,x){var C=xt(x,["tfhd"])[0],O=yd(C[4]<<24|C[5]<<16|C[6]<<8|C[7]),B=f[O]||9e4,N=xt(x,["tfdt"])[0],$=new DataView(N.buffer,N.byteOffset,N.byteLength),W;N[0]===1?W=rL(N.subarray(4,12)):W=$.getUint32(4);var pe;return typeof W=="bigint"?pe=W/Pl.BigInt(B):typeof W=="number"&&!isNaN(W)&&(pe=W/B),pe<Number.MAX_SAFE_INTEGER&&(pe=Number(pe)),pe<_&&(_=pe),_},1/0);return typeof b=="bigint"||isFinite(b)?b:0},Pw=function(f,m){var g=xt(m,["moof","traf"]),b=0,_=0,x;if(g&&g.length){var C=xt(g[0],["tfhd"])[0],O=xt(g[0],["trun"])[0],B=xt(g[0],["tfdt"])[0];if(C){var N=Ew(C);x=N.trackId}if(B){var $=Tw(B);b=$.baseMediaDecodeTime}if(O){var W=kw(O);W.samples&&W.samples.length&&(_=W.samples[0].compositionTimeOffset||0)}}var pe=f[x]||9e4;typeof b=="bigint"&&(_=Pl.BigInt(_),pe=Pl.BigInt(pe));var we=(b+_)/pe;return typeof we=="bigint"&&we<Number.MAX_SAFE_INTEGER&&(we=Number(we)),we},Ow=function(f){var m=xt(f,["moov","trak"]),g=[];return m.forEach(function(b){var _=xt(b,["mdia","hdlr"]),x=xt(b,["tkhd"]);_.forEach(function(C,O){var B=ja(C.subarray(8,12)),N=x[O],$,W,pe;B==="vide"&&($=new DataView(N.buffer,N.byteOffset,N.byteLength),W=$.getUint8(0),pe=W===0?$.getUint32(12):$.getUint32(20),g.push(pe))})}),g},Qp=function(f){var m=f[0],g=m===0?12:20;return yd(f[g]<<24|f[g+1]<<16|f[g+2]<<8|f[g+3])},Dw=function(f){var m=xt(f,["moov","trak"]),g=[];return m.forEach(function(b){var _={},x=xt(b,["tkhd"])[0],C,O;x&&(C=new DataView(x.buffer,x.byteOffset,x.byteLength),O=C.getUint8(0),_.id=O===0?C.getUint32(12):C.getUint32(20));var B=xt(b,["mdia","hdlr"])[0];if(B){var N=ja(B.subarray(8,12));N==="vide"?_.type="video":N==="soun"?_.type="audio":_.type=N}var $=xt(b,["mdia","minf","stbl","stsd"])[0];if($){var W=$.subarray(8);_.codec=ja(W.subarray(4,8));var pe=xt(W,[_.codec])[0],we,ae;pe&&(/^[asm]vc[1-9]$/i.test(_.codec)?(we=pe.subarray(78),ae=ja(we.subarray(4,8)),ae==="avcC"&&we.length>11?(_.codec+=".",_.codec+=Ol(we[9]),_.codec+=Ol(we[10]),_.codec+=Ol(we[11])):_.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(_.codec)?(we=pe.subarray(28),ae=ja(we.subarray(4,8)),ae==="esds"&&we.length>20&&we[19]!==0?(_.codec+="."+Ol(we[19]),_.codec+="."+Ol(we[20]>>>2&63).replace(/^0/,"")):_.codec="mp4a.40.2"):_.codec=_.codec.toLowerCase())}var Oe=xt(b,["mdia","mdhd"])[0];Oe&&(_.timescale=Qp(Oe)),g.push(_)}),g};var Lw={findBox:xt,parseType:ja,timescale:Aw,startTime:Iw,compositionStartTime:Pw,videoTrackIds:Ow,tracks:Dw,getTimescaleFromMediaHeader:Qp},Rw=function(f){var m=f[1]&31;return m<<=8,m|=f[2],m},bd=function(f){return!!(f[1]&64)},wd=function(f){var m=0;return(f[3]&48)>>>4>1&&(m+=f[4]+1),m},iL=function(f,m){var g=Rw(f);return g===0?"pat":g===m?"pmt":m?"pes":null},nL=function(f){var m=bd(f),g=4+wd(f);return m&&(g+=f[g]+1),(f[g+10]&31)<<8|f[g+11]},aL=function(f){var m={},g=bd(f),b=4+wd(f);if(g&&(b+=f[b]+1),!!(f[b+5]&1)){var _,x,C;_=(f[b+1]&15)<<8|f[b+2],x=3+_-4,C=(f[b+10]&15)<<8|f[b+11];for(var O=12+C;O<x;){var B=b+O;m[(f[B+1]&31)<<8|f[B+2]]=f[B],O+=((f[B+3]&15)<<8|f[B+4])+5}return m}},sL=function(f,m){var g=Rw(f),b=m[g];switch(b){case or.H264_STREAM_TYPE:return"video";case or.ADTS_STREAM_TYPE:return"audio";case or.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},oL=function(f){var m=bd(f);if(!m)return null;var g=4+wd(f);if(g>=f.byteLength)return null;var b=null,_;return _=f[g+7],_&192&&(b={},b.pts=(f[g+9]&14)<<27|(f[g+10]&255)<<20|(f[g+11]&254)<<12|(f[g+12]&255)<<5|(f[g+13]&254)>>>3,b.pts*=4,b.pts+=(f[g+13]&6)>>>1,b.dts=b.pts,_&64&&(b.dts=(f[g+14]&14)<<27|(f[g+15]&255)<<20|(f[g+16]&254)<<12|(f[g+17]&255)<<5|(f[g+18]&254)>>>3,b.dts*=4,b.dts+=(f[g+18]&6)>>>1)),b},Jp=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},lL=function(f){for(var m=4+wd(f),g=f.subarray(m),b=0,_=0,x=!1,C;_<g.byteLength-3;_++)if(g[_+2]===1){b=_+5;break}for(;b<g.byteLength;)switch(g[b]){case 0:if(g[b-1]!==0){b+=2;break}else if(g[b-2]!==0){b++;break}_+3!==b-2&&(C=Jp(g[_+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0));do b++;while(g[b]!==1&&b<g.length);_=b-2,b+=3;break;case 1:if(g[b-1]!==0||g[b-2]!==0){b+=3;break}C=Jp(g[_+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0),_=b-2,b+=3;break;default:b+=3;break}return g=g.subarray(_),b-=_,_=0,g&&g.byteLength>3&&(C=Jp(g[_+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0)),x},cL={parseType:iL,parsePat:nL,parsePmt:aL,parsePayloadUnitStartIndicator:bd,parsePesType:sL,parsePesTime:oL,videoPacketContainsKeyFrame:lL},zs=dw.handleRollover,ut={};ut.ts=cL,ut.aac=pd;var Fa=$e.ONE_SECOND_IN_TS,Cr=188,Fi=71,uL=function(f,m){for(var g=0,b=Cr,_,x;b<f.byteLength;){if(f[g]===Fi&&f[b]===Fi){switch(_=f.subarray(g,b),x=ut.ts.parseType(_,m.pid),x){case"pat":m.pid=ut.ts.parsePat(_);break;case"pmt":var C=ut.ts.parsePmt(_);m.table=m.table||{},Object.keys(C).forEach(function(O){m.table[O]=C[O]});break}g+=Cr,b+=Cr;continue}g++,b++}},Mw=function(f,m,g){for(var b=0,_=Cr,x,C,O,B,N,$=!1;_<=f.byteLength;){if(f[b]===Fi&&(f[_]===Fi||_===f.byteLength)){switch(x=f.subarray(b,_),C=ut.ts.parseType(x,m.pid),C){case"pes":O=ut.ts.parsePesType(x,m.table),B=ut.ts.parsePayloadUnitStartIndicator(x),O==="audio"&&B&&(N=ut.ts.parsePesTime(x),N&&(N.type="audio",g.audio.push(N),$=!0));break}if($)break;b+=Cr,_+=Cr;continue}b++,_++}for(_=f.byteLength,b=_-Cr,$=!1;b>=0;){if(f[b]===Fi&&(f[_]===Fi||_===f.byteLength)){switch(x=f.subarray(b,_),C=ut.ts.parseType(x,m.pid),C){case"pes":O=ut.ts.parsePesType(x,m.table),B=ut.ts.parsePayloadUnitStartIndicator(x),O==="audio"&&B&&(N=ut.ts.parsePesTime(x),N&&(N.type="audio",g.audio.push(N),$=!0));break}if($)break;b-=Cr,_-=Cr;continue}b--,_--}},dL=function(f,m,g){for(var b=0,_=Cr,x,C,O,B,N,$,W,pe,we=!1,ae={data:[],size:0};_<f.byteLength;){if(f[b]===Fi&&f[_]===Fi){switch(x=f.subarray(b,_),C=ut.ts.parseType(x,m.pid),C){case"pes":if(O=ut.ts.parsePesType(x,m.table),B=ut.ts.parsePayloadUnitStartIndicator(x),O==="video"&&(B&&!we&&(N=ut.ts.parsePesTime(x),N&&(N.type="video",g.video.push(N),we=!0)),!g.firstKeyFrame)){if(B&&ae.size!==0){for($=new Uint8Array(ae.size),W=0;ae.data.length;)pe=ae.data.shift(),$.set(pe,W),W+=pe.byteLength;if(ut.ts.videoPacketContainsKeyFrame($)){var Oe=ut.ts.parsePesTime($);Oe?(g.firstKeyFrame=Oe,g.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}ae.size=0}ae.data.push(x),ae.size+=x.byteLength}break}if(we&&g.firstKeyFrame)break;b+=Cr,_+=Cr;continue}b++,_++}for(_=f.byteLength,b=_-Cr,we=!1;b>=0;){if(f[b]===Fi&&f[_]===Fi){switch(x=f.subarray(b,_),C=ut.ts.parseType(x,m.pid),C){case"pes":O=ut.ts.parsePesType(x,m.table),B=ut.ts.parsePayloadUnitStartIndicator(x),O==="video"&&B&&(N=ut.ts.parsePesTime(x),N&&(N.type="video",g.video.push(N),we=!0));break}if(we)break;b-=Cr,_-=Cr;continue}b--,_--}},hL=function(f,m){if(f.audio&&f.audio.length){var g=m;(typeof g=="undefined"||isNaN(g))&&(g=f.audio[0].dts),f.audio.forEach(function(x){x.dts=zs(x.dts,g),x.pts=zs(x.pts,g),x.dtsTime=x.dts/Fa,x.ptsTime=x.pts/Fa})}if(f.video&&f.video.length){var b=m;if((typeof b=="undefined"||isNaN(b))&&(b=f.video[0].dts),f.video.forEach(function(x){x.dts=zs(x.dts,b),x.pts=zs(x.pts,b),x.dtsTime=x.dts/Fa,x.ptsTime=x.pts/Fa}),f.firstKeyFrame){var _=f.firstKeyFrame;_.dts=zs(_.dts,b),_.pts=zs(_.pts,b),_.dtsTime=_.dts/Fa,_.ptsTime=_.pts/Fa}}},fL=function(f){for(var m=!1,g=0,b=null,_=null,x=0,C=0,O;f.length-C>=3;){var B=ut.aac.parseType(f,C);switch(B){case"timed-metadata":if(f.length-C<10){m=!0;break}if(x=ut.aac.parseId3TagSize(f,C),x>f.length){m=!0;break}_===null&&(O=f.subarray(C,C+x),_=ut.aac.parseAacTimestamp(O)),C+=x;break;case"audio":if(f.length-C<7){m=!0;break}if(x=ut.aac.parseAdtsSize(f,C),x>f.length){m=!0;break}b===null&&(O=f.subarray(C,C+x),b=ut.aac.parseSampleRate(O)),g++,C+=x;break;default:C++;break}if(m)return null}if(b===null||_===null)return null;var N=Fa/b,$={audio:[{type:"audio",dts:_,pts:_},{type:"audio",dts:_+g*1024*N,pts:_+g*1024*N}]};return $},pL=function(f){var m={pid:null,table:null},g={};uL(f,m);for(var b in m.table)if(m.table.hasOwnProperty(b)){var _=m.table[b];switch(_){case or.H264_STREAM_TYPE:g.video=[],dL(f,m,g),g.video.length===0&&delete g.video;break;case or.ADTS_STREAM_TYPE:g.audio=[],Mw(f,m,g),g.audio.length===0&&delete g.audio;break}}return g},gL=function(f,m){var g=ut.aac.isLikelyAacData(f),b;return g?b=fL(f):b=pL(f),!b||!b.audio&&!b.video?null:(hL(b,m),b)},mL={inspect:gL,parseAudioPes_:Mw},vL=function(f,m){m.on("data",function(g){var b=g.initSegment;g.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};var _=g.data;g.data=_.buffer,f.postMessage({action:"data",segment:g,byteOffset:_.byteOffset,byteLength:_.byteLength},[g.data])}),m.on("done",function(g){f.postMessage({action:"done"})}),m.on("gopInfo",function(g){f.postMessage({action:"gopInfo",gopInfo:g})}),m.on("videoSegmentTimingInfo",function(g){var b={start:{decode:$e.videoTsToSeconds(g.start.dts),presentation:$e.videoTsToSeconds(g.start.pts)},end:{decode:$e.videoTsToSeconds(g.end.dts),presentation:$e.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:$e.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(b.prependedContentDuration=$e.videoTsToSeconds(g.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}),m.on("audioSegmentTimingInfo",function(g){var b={start:{decode:$e.videoTsToSeconds(g.start.dts),presentation:$e.videoTsToSeconds(g.start.pts)},end:{decode:$e.videoTsToSeconds(g.end.dts),presentation:$e.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:$e.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(b.prependedContentDuration=$e.videoTsToSeconds(g.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:b})}),m.on("id3Frame",function(g){f.postMessage({action:"id3Frame",id3Frame:g})}),m.on("caption",function(g){f.postMessage({action:"caption",caption:g})}),m.on("trackinfo",function(g){f.postMessage({action:"trackinfo",trackInfo:g})}),m.on("audioTimingInfo",function(g){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:$e.videoTsToSeconds(g.start),end:$e.videoTsToSeconds(g.end)}})}),m.on("videoTimingInfo",function(g){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:$e.videoTsToSeconds(g.start),end:$e.videoTsToSeconds(g.end)}})}),m.on("log",function(g){f.postMessage({action:"log",log:g})})},Nw=function(){function S(m,g){this.options=g||{},this.self=m,this.init()}var f=S.prototype;return f.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new MD.Transmuxer(this.options),vL(this.self,this.transmuxer)},f.pushMp4Captions=function(g){this.captionParser||(this.captionParser=new tL,this.captionParser.init());var b=new Uint8Array(g.data,g.byteOffset,g.byteLength),_=this.captionParser.parse(b,g.trackIds,g.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],logs:_&&_.logs||[],data:b.buffer},[b.buffer])},f.probeMp4StartTime=function(g){var b=g.timescales,_=g.data,x=Lw.startTime(b,_);this.self.postMessage({action:"probeMp4StartTime",startTime:x,data:_},[_.buffer])},f.probeMp4Tracks=function(g){var b=g.data,_=Lw.tracks(b);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:b},[b.buffer])},f.probeTs=function(g){var b=g.data,_=g.baseStartTime,x=typeof _=="number"&&!isNaN(_)?_*$e.ONE_SECOND_IN_TS:void 0,C=mL.inspect(b,x),O=null;C&&(O={hasVideo:C.video&&C.video.length===2||!1,hasAudio:C.audio&&C.audio.length===2||!1},O.hasVideo&&(O.videoStart=C.video[0].ptsTime),O.hasAudio&&(O.audioStart=C.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:O,data:b},[b.buffer])},f.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},f.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},f.push=function(g){var b=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.transmuxer.push(b)},f.reset=function(){this.transmuxer.reset()},f.setTimestampOffset=function(g){var b=g.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round($e.secondsToVideoTs(b)))},f.setAudioAppendStart=function(g){this.transmuxer.setAudioAppendStart(Math.ceil($e.secondsToVideoTs(g.appendStart)))},f.setRemux=function(g){this.transmuxer.setRemux(g.remux)},f.flush=function(g){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},f.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},f.alignGopsWith=function(g){this.transmuxer.alignGopsWith(g.gopsToAlignWith.slice())},S}();self.onmessage=function(S){if(S.data.action==="init"&&S.data.options){this.messageHandlers=new Nw(self,S.data.options);return}this.messageHandlers||(this.messageHandlers=new Nw(self)),S.data&&S.data.action&&S.data.action!=="init"&&this.messageHandlers[S.data.action]&&this.messageHandlers[S.data.action](S.data)}})),MK=sO(RK),NK=function(e,r,n){var i=e.data.segment,a=i.type,s=i.initSegment,o=i.captions,l=i.captionStreams,c=i.metadata,u=i.videoFrameDtsTime,d=i.videoFramePtsTime;r.buffer.push({captions:o,captionStreams:l,metadata:c});var h=e.data.segment.boxes||{data:e.data.segment.data},p={type:a,data:new Uint8Array(h.data,h.data.byteOffset,h.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof u!="undefined"&&(p.videoFrameDtsTime=u),typeof d!="undefined"&&(p.videoFramePtsTime=d),n(p)},jK=function(e){var r=e.transmuxedData,n=e.callback;r.buffer=[],n(r)},FK=function(e,r){r.gopInfo=e.data.gopInfo},cO=function(e){var r=e.transmuxer,n=e.bytes,i=e.audioAppendStart,a=e.gopsToAlignWith,s=e.remux,o=e.onData,l=e.onTrackInfo,c=e.onAudioTimingInfo,u=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,h=e.onAudioSegmentTimingInfo,p=e.onId3,y=e.onCaptions,w=e.onDone,v=e.onEndedTimeline,T=e.onTransmuxerLog,k=e.isEndOfTimeline,A={buffer:[]},E=k,I=function(z){r.currentTransmux===e&&(z.data.action==="data"&&NK(z,A,o),z.data.action==="trackinfo"&&l(z.data.trackInfo),z.data.action==="gopInfo"&&FK(z,A),z.data.action==="audioTimingInfo"&&c(z.data.audioTimingInfo),z.data.action==="videoTimingInfo"&&u(z.data.videoTimingInfo),z.data.action==="videoSegmentTimingInfo"&&d(z.data.videoSegmentTimingInfo),z.data.action==="audioSegmentTimingInfo"&&h(z.data.audioSegmentTimingInfo),z.data.action==="id3Frame"&&p([z.data.id3Frame],z.data.id3Frame.dispatchType),z.data.action==="caption"&&y(z.data.caption),z.data.action==="endedtimeline"&&(E=!1,v()),z.data.action==="log"&&T(z.data.log),z.data.type==="transmuxed"&&(E||(r.onmessage=null,jK({transmuxedData:A,callback:w}),uO(r))))};if(r.onmessage=I,i&&r.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(a)&&r.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof s!="undefined"&&r.postMessage({action:"setRemux",remux:s}),n.byteLength){var F=n instanceof ArrayBuffer?n:n.buffer,j=n instanceof ArrayBuffer?0:n.byteOffset;r.postMessage({action:"push",data:F,byteOffset:j,byteLength:n.byteLength},[F])}k&&r.postMessage({action:"endTimeline"}),r.postMessage({action:"flush"})},uO=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():cO(e.currentTransmux))},F1=function(e,r){e.postMessage({action:r}),uO(e)},dO=function(e,r){if(!r.currentTransmux){r.currentTransmux=e,F1(r,e);return}r.transmuxQueue.push(F1.bind(null,r,e))},BK=function(e){dO("reset",e)},UK=function(e){dO("endTimeline",e)},hO=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,cO(e);return}e.transmuxer.transmuxQueue.push(e)},zK=function(e){var r=new MK;r.currentTransmux=null,r.transmuxQueue=[];var n=r.terminate;return r.terminate=function(){return r.currentTransmux=null,r.transmuxQueue.length=0,n.call(r)},r.postMessage({action:"init",options:e}),r},sm={reset:BK,endTimeline:UK,transmux:hO,createTransmuxer:zK},vf=function(e){var r=e.transmuxer,n=e.endAction||e.action,i=e.callback,a=yi({},e,{endAction:null,transmuxer:null,callback:null}),s=function c(u){u.data.action===n&&(r.removeEventListener("message",c),u.data.data&&(u.data.data=new Uint8Array(u.data.data,e.byteOffset||0,e.byteLength||u.data.data.byteLength),e.data&&(e.data=u.data.data)),i(u.data))};if(r.addEventListener("message",s),e.data){var o=e.data instanceof ArrayBuffer;a.byteOffset=o?0:e.data.byteOffset,a.byteLength=e.data.byteLength;var l=[o?e.data:e.data.buffer];r.postMessage(a,l)}else r.postMessage(a)},Yi={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Mv=function(e){e.forEach(function(r){r.abort()})},$K=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},VK=function(e){var r=e.target,n=Date.now()-r.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},Kb=function(e,r){return r.timedout?{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:Yi.TIMEOUT,xhr:r}:r.aborted?{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:Yi.ABORTED,xhr:r}:e?{status:r.status,message:"HLS request errored at URL: "+r.uri,code:Yi.FAILURE,xhr:r}:r.responseType==="arraybuffer"&&r.response.byteLength===0?{status:r.status,message:"Empty HLS response at URL: "+r.uri,code:Yi.FAILURE,xhr:r}:null},B1=function(e,r,n){return function(i,a){var s=a.response,o=Kb(i,a);if(o)return n(o,e);if(s.byteLength!==16)return n({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:Yi.FAILURE,xhr:a},e);for(var l=new DataView(s),c=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),u=0;u<r.length;u++)r[u].bytes=c;return n(null,e)}},fO=function(e,r){var n=cb(e.map.bytes);if(n!=="mp4"){var i=e.map.resolvedUri||e.map.uri;return r({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:Yi.FAILURE})}vf({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(s){var o=s.tracks,l=s.data;return e.map.bytes=l,o.forEach(function(c){e.map.tracks=e.map.tracks||{},!e.map.tracks[c.type]&&(e.map.tracks[c.type]=c,typeof c.id=="number"&&c.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[c.id]=c.timescale))}),r(null)}})},HK=function(e){var r=e.segment,n=e.finishProcessingFn;return function(i,a){var s=Kb(i,a);if(s)return n(s,r);var o=new Uint8Array(a.response);if(r.map.key)return r.map.encryptedBytes=o,n(null,r);r.map.bytes=o,fO(r,function(l){if(l)return l.xhr=a,l.status=a.status,n(l,r);n(null,r)})}},qK=function(e){var r=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(a,s){var o=Kb(a,s);if(o)return n(o,r);var l=i==="arraybuffer"||!s.responseText?s.response:DK(s.responseText.substring(r.lastReachedChar||0));return r.stats=$K(s),r.key?r.encryptedBytes=new Uint8Array(l):r.bytes=new Uint8Array(l),n(null,r)}},GK=function(e){var r=e.segment,n=e.bytes,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,y=e.onTransmuxerLog,w=r.map&&r.map.tracks||{},v=Boolean(w.audio&&w.video),T=a.bind(null,r,"audio","start"),k=a.bind(null,r,"audio","end"),A=a.bind(null,r,"video","start"),E=a.bind(null,r,"video","end"),I=function(){return hO({bytes:n,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:v,onData:function(D){D.type=D.type==="combined"?"video":D.type,h(r,D)},onTrackInfo:function(D){i&&(v&&(D.isMuxed=!0),i(r,D))},onAudioTimingInfo:function(D){T&&typeof D.start!="undefined"&&(T(D.start),T=null),k&&typeof D.end!="undefined"&&k(D.end)},onVideoTimingInfo:function(D){A&&typeof D.start!="undefined"&&(A(D.start),A=null),E&&typeof D.end!="undefined"&&E(D.end)},onVideoSegmentTimingInfo:function(D){s(D)},onAudioSegmentTimingInfo:function(D){o(D)},onId3:function(D,z){l(r,D,z)},onCaptions:function(D){c(r,[D])},isEndOfTimeline:u,onEndedTimeline:function(){d()},onTransmuxerLog:y,onDone:function(D){!p||(D.type=D.type==="combined"?"video":D.type,p(null,r,D))}})};vf({action:"probeTs",transmuxer:r.transmuxer,data:n,baseStartTime:r.baseStartTime,callback:function(j){r.bytes=n=j.data;var D=j.result;D&&(i(r,{hasAudio:D.hasAudio,hasVideo:D.hasVideo,isMuxed:v}),i=null,D.hasAudio&&!v&&T(D.audioStart),D.hasVideo&&A(D.videoStart),T=null,A=null),I()}})},pO=function(e){var r=e.segment,n=e.bytes,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,y=e.onTransmuxerLog,w=new Uint8Array(n);if(g9(w)){r.isFmp4=!0;var v=r.map.tracks,T={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(T.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(T.videoCodec=v.video.codec),v.video&&v.audio&&(T.isMuxed=!0),i(r,T);var k=function(E){h(r,{data:w,type:T.hasAudio&&!T.isMuxed?"audio":"video"}),E&&E.length&&c(r,E),p(null,r,{})};vf({action:"probeMp4StartTime",timescales:r.map.timescales,data:w,transmuxer:r.transmuxer,callback:function(E){var I=E.data,F=E.startTime;if(n=I.buffer,r.bytes=w=I,T.hasAudio&&!T.isMuxed&&a(r,"audio","start",F),T.hasVideo&&a(r,"video","start",F),!v.video||!I.byteLength||!r.transmuxer){k();return}vf({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:w,timescales:r.map.timescales,trackIds:[v.video.id],callback:function(D){n=D.data.buffer,r.bytes=w=D.data,D.logs.forEach(function(z){y(H.mergeOptions(z,{stream:"mp4CaptionParser"}))}),k(D.captions)}})}});return}if(!r.transmuxer){p(null,r,{});return}if(typeof r.container=="undefined"&&(r.container=cb(w)),r.container!=="ts"&&r.container!=="aac"){i(r,{hasAudio:!1,hasVideo:!1}),p(null,r,{});return}GK({segment:r,bytes:n,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:y})},gO=function(e,r){var n=e.id,i=e.key,a=e.encryptedBytes,s=e.decryptionWorker,o=function c(u){if(u.data.source===n){s.removeEventListener("message",c);var d=u.data.decrypted;r(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};s.addEventListener("message",o);var l;i.bytes.slice?l=i.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(i.bytes)),s.postMessage(eO({source:n,encrypted:a,key:l,iv:i.iv}),[a.buffer,l.buffer])},WK=function(e){var r=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,y=e.onTransmuxerLog;gO({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:r},function(w){n.bytes=w,pO({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:y})})},KK=function(e){var r=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,y=e.onTransmuxerLog,w=0,v=!1;return function(T,k){if(!v){if(T)return v=!0,Mv(r),p(T,k);if(w+=1,w===r.length){var A=function(){if(k.encryptedBytes)return WK({decryptionWorker:n,segment:k,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:y});pO({segment:k,bytes:k.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:y})};if(k.endOfAllRequests=Date.now(),k.map&&k.map.encryptedBytes&&!k.map.bytes)return gO({decryptionWorker:n,id:k.requestId+"-init",encryptedBytes:k.map.encryptedBytes,key:k.map.key},function(E){k.map.bytes=E,fO(k,function(I){if(I)return Mv(r),p(I,k);A()})});A()}}}},YK=function(e){var r=e.loadendState,n=e.abortFn;return function(i){var a=i.target;a.aborted&&n&&!r.calledAbortFn&&(n(),r.calledAbortFn=!0)}},XK=function(e){var r=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(i){var a=i.target;if(!a.aborted)return r.stats=H.mergeOptions(r.stats,VK(i)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),n(i,r)}},QK=function(e){var r=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,l=e.trackInfoFn,c=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,d=e.audioSegmentTimingInfoFn,h=e.id3Fn,p=e.captionsFn,y=e.isEndOfTimeline,w=e.endedTimelineFn,v=e.dataFn,T=e.doneFn,k=e.onTransmuxerLog,A=[],E=KK({activeXhrs:A,decryptionWorker:i,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:d,id3Fn:h,captionsFn:p,isEndOfTimeline:y,endedTimelineFn:w,dataFn:v,doneFn:T,onTransmuxerLog:k});if(a.key&&!a.key.bytes){var I=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&I.push(a.map.key);var F=H.mergeOptions(n,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),j=B1(a,I,E),D=r(F,j);A.push(D)}if(a.map&&!a.map.bytes){var z=a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri);if(z){var M=H.mergeOptions(n,{uri:a.map.key.resolvedUri,responseType:"arraybuffer"}),U=B1(a,[a.map.key],E),P=r(M,U);A.push(P)}var q=H.mergeOptions(n,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:Lv(a.map)}),X=HK({segment:a,finishProcessingFn:E}),fe=r(q,X);A.push(fe)}var te=H.mergeOptions(n,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:Lv(a)}),se=qK({segment:a,finishProcessingFn:E,responseType:te.responseType}),le=r(te,se);le.addEventListener("progress",XK({segment:a,progressFn:o,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:d,id3Fn:h,captionsFn:p,isEndOfTimeline:y,endedTimelineFn:w,dataFn:v})),A.push(le);var Re={};return A.forEach(function(Le){Le.addEventListener("loadend",YK({loadendState:Re,abortFn:s}))}),function(){return Mv(A)}},JK=ji("CodecUtils"),ZK=function(e){var r=e.attributes||{};if(r.CODECS)return $i(r.CODECS)},mO=function(e,r){var n=r.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},eY=function(e,r){if(!mO(e,r))return!0;var n=r.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var a in i)if(!i[a].uri&&!i[a].playlists)return!0;return!1},yf=function(e){var r={};return e.forEach(function(n){var i=n.mediaType,a=n.type,s=n.details;r[i]=r[i]||[],r[i].push(jI(""+a+s))}),Object.keys(r).forEach(function(n){if(r[n].length>1){JK("multiple "+n+" codecs found as attributes: "+r[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),r[n]=null;return}r[n]=r[n][0]}),r},U1=function(e){var r=0;return e.audio&&r++,e.video&&r++,r},Sc=function(e,r){var n=r.attributes||{},i=yf(ZK(r)||[]);if(mO(e,r)&&!i.audio&&!eY(e,r)){var a=yf(Tq(e,n.AUDIO)||[]);a.audio&&(i.audio=a.audio)}return i},Kd=ji("PlaylistSelector"),z1=function(e){if(!(!e||!e.playlist)){var r=e.playlist;return JSON.stringify({id:r.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:r.attributes&&r.attributes.CODECS||""})}},bf=function(e,r){if(!e)return"";var n=L.getComputedStyle(e);return n?n[r]:""},So=function(e,r){var n=e.slice();e.sort(function(i,a){var s=r(i,a);return s===0?n.indexOf(i)-n.indexOf(a):s})},Yb=function(e,r){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||L.Number.MAX_VALUE,r.attributes.BANDWIDTH&&(i=r.attributes.BANDWIDTH),i=i||L.Number.MAX_VALUE,n-i},tY=function(e,r){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||L.Number.MAX_VALUE,r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(i=r.attributes.RESOLUTION.width),i=i||L.Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&r.attributes.BANDWIDTH?e.attributes.BANDWIDTH-r.attributes.BANDWIDTH:n-i},vO=function(e,r,n,i,a,s){if(!!e){var o={bandwidth:r,width:n,height:i,limitRenditionByPlayerDimensions:a},l=e.playlists;Hr.isAudioOnly(e)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var c=l.map(function(M){var U,P=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.width,q=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.height;return U=M.attributes&&M.attributes.BANDWIDTH,U=U||L.Number.MAX_VALUE,{bandwidth:U,width:P,height:q,playlist:M}});So(c,function(M,U){return M.bandwidth-U.bandwidth}),c=c.filter(function(M){return!Hr.isIncompatible(M.playlist)});var u=c.filter(function(M){return Hr.isEnabled(M.playlist)});u.length||(u=c.filter(function(M){return!Hr.isDisabled(M.playlist)}));var d=u.filter(function(M){return M.bandwidth*Zt.BANDWIDTH_VARIANCE<r}),h=d[d.length-1],p=d.filter(function(M){return M.bandwidth===h.bandwidth})[0];if(a===!1){var y=p||u[0]||c[0];if(y&&y.playlist){var w="sortedPlaylistReps";return p&&(w="bandwidthBestRep"),u[0]&&(w="enabledPlaylistReps"),Kd("choosing "+z1(y)+" using "+w+" with options",o),y.playlist}return Kd("could not choose a playlist with options",o),null}var v=d.filter(function(M){return M.width&&M.height});So(v,function(M,U){return M.width-U.width});var T=v.filter(function(M){return M.width===n&&M.height===i});h=T[T.length-1];var k=T.filter(function(M){return M.bandwidth===h.bandwidth})[0],A,E,I;k||(A=v.filter(function(M){return M.width>n||M.height>i}),E=A.filter(function(M){return M.width===A[0].width&&M.height===A[0].height}),h=E[E.length-1],I=E.filter(function(M){return M.bandwidth===h.bandwidth})[0]);var F;if(s.experimentalLeastPixelDiffSelector){var j=v.map(function(M){return M.pixelDiff=Math.abs(M.width-n)+Math.abs(M.height-i),M});So(j,function(M,U){return M.pixelDiff===U.pixelDiff?U.bandwidth-M.bandwidth:M.pixelDiff-U.pixelDiff}),F=j[0]}var D=F||I||k||p||u[0]||c[0];if(D&&D.playlist){var z="sortedPlaylistReps";return F?z="leastPixelDiffRep":I?z="resolutionPlusOneRep":k?z="resolutionBestRep":p?z="bandwidthBestRep":u[0]&&(z="enabledPlaylistReps"),Kd("choosing "+z1(D)+" using "+z+" with options",o),D.playlist}return Kd("could not choose a playlist with options",o),null}},$1=function(){var e=this.useDevicePixelRatio&&L.devicePixelRatio||1;return vO(this.playlists.master,this.systemBandwidth,parseInt(bf(this.tech_.el(),"width"),10)*e,parseInt(bf(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},rY=function(e){var r=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&L.devicePixelRatio||1;return r<0&&(r=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(r=e*this.systemBandwidth+(1-e)*r,n=this.systemBandwidth),vO(this.playlists.master,r,parseInt(bf(this.tech_.el(),"width"),10)*i,parseInt(bf(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},iY=function(e){var r=e.master,n=e.currentTime,i=e.bandwidth,a=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,l=e.currentTimeline,c=e.syncController,u=r.playlists.filter(function(w){return!Hr.isIncompatible(w)}),d=u.filter(Hr.isEnabled);d.length||(d=u.filter(function(w){return!Hr.isDisabled(w)}));var h=d.filter(Hr.hasAttribute.bind(null,"BANDWIDTH")),p=h.map(function(w){var v=c.getSyncPoint(w,a,l,n),T=v?1:2,k=Hr.estimateSegmentRequestTime(s,i,w),A=k*T-o;return{playlist:w,rebufferingImpact:A}}),y=p.filter(function(w){return w.rebufferingImpact<=0});return So(y,function(w,v){return Yb(v.playlist,w.playlist)}),y.length?y[0]:(So(p,function(w,v){return w.rebufferingImpact-v.rebufferingImpact}),p[0]||null)},nY=function(){var e=this,r=this.playlists.master.playlists.filter(Hr.isEnabled);So(r,function(i,a){return Yb(i,a)});var n=r.filter(function(i){return!!Sc(e.playlists.master,i).video});return n[0]||null},aY=function(e){var r=0,n;return e.bytes&&(n=new Uint8Array(e.bytes),e.segments.forEach(function(i){n.set(i,r),r+=i.byteLength})),n},sY=function(e,r,n){if(!e[n]){r.trigger({type:"usage",name:"vhs-608"}),r.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var a=r.textTracks().getTrackById(i);if(a)e[n]=a;else{var s=r.options_.vhs&&r.options_.vhs.captionServices||{},o=n,l=n,c=!1,u=s[i];u&&(o=u.label,l=u.language,c=u.default),e[n]=r.addRemoteTextTrack({kind:"captions",id:i,default:c,label:o,language:l},!1).track}}},oY=function(e){var r=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(!!n){var a=L.WebKitDataCue||L.VTTCue;n.forEach(function(s){var o=s.stream;r[o].addCue(new a(s.startTime+i,s.endTime+i,s.text))})}},lY=function(e){Object.defineProperties(e.frame,{id:{get:function(){return H.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return H.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return H.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},cY=function(e){var r=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,a=e.videoDuration;if(!!n){var s=L.WebKitDataCue||L.VTTCue,o=r.metadataTrack_;if(!!o&&(n.forEach(function(p){var y=p.cueTime+i;typeof y!="number"||L.isNaN(y)||y<0||!(y<1/0)||p.frames.forEach(function(w){var v=new s(y,y,w.value||w.url||w.data||"");v.frame=w,v.value=w,lY(v),o.addCue(v)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,c=[],u=0;u<l.length;u++)l[u]&&c.push(l[u]);var d=c.reduce(function(p,y){var w=p[y.startTime]||[];return w.push(y),p[y.startTime]=w,p},{}),h=Object.keys(d).sort(function(p,y){return Number(p)-Number(y)});h.forEach(function(p,y){var w=d[p],v=Number(h[y+1])||a;w.forEach(function(T){T.endTime=v})})}}},uY=function(e,r,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=r)},sc=function(e,r,n){var i,a;if(!!n&&!!n.cues)for(i=n.cues.length;i--;)a=n.cues[i],a.startTime>=e&&a.endTime<=r&&n.removeCue(a)},dY=function(e){var r=e.cues;if(!!r)for(var n=0;n<r.length;n++){for(var i=[],a=0,s=0;s<r.length;s++)r[n].startTime===r[s].startTime&&r[n].endTime===r[s].endTime&&r[n].text===r[s].text&&(a++,a>1&&i.push(r[s]));i.length&&i.forEach(function(o){return e.removeCue(o)})}},hY=function(e,r,n){if(typeof r=="undefined"||r===null||!e.length)return[];var i=Math.ceil((r-n+3)*nf.ONE_SECOND_IN_TS),a;for(a=0;a<e.length&&!(e[a].pts>i);a++);return e.slice(a)},fY=function(e,r,n){if(!r.length)return e;if(n)return r.slice();var i=r[0].pts,a=0;for(a;a<e.length&&!(e[a].pts>=i);a++);return e.slice(0,a).concat(r)},pY=function(e,r,n,i){for(var a=Math.ceil((r-i)*nf.ONE_SECOND_IN_TS),s=Math.ceil((n-i)*nf.ONE_SECOND_IN_TS),o=e.slice(),l=e.length;l--&&!(e[l].pts<=s););if(l===-1)return o;for(var c=l+1;c--&&!(e[c].pts<=a););return c=Math.max(c,0),o.splice(c,l-c+1),o},gY=function(e,r){if(!e&&!r||!e&&r||e&&!r)return!1;if(e===r)return!0;var n=Object.keys(e).sort(),i=Object.keys(r).sort();if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++){var s=n[a];if(s!==i[a]||e[s]!==r[s])return!1}return!0},yO=22,mY=function(e,r,n){r=r||[];for(var i=[],a=0,s=0;s<r.length;s++){var o=r[s];if(e===o.timeline&&(i.push(s),a+=o.duration,a>n))return s}return i.length===0?0:i[i.length-1]},Vl=1,vY=500,V1=function(e){return typeof e=="number"&&isFinite(e)},Yd=1/60,yY=function(e,r,n){return e!=="main"||!r||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":r.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},bY=function(e,r,n){var i=r-Zt.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var a=r-n;return Math.min(a,i)},Js=function(e){var r=e.startOfSegment,n=e.duration,i=e.segment,a=e.part,s=e.playlist,o=s.mediaSequence,l=s.id,c=s.segments,u=c===void 0?[]:c,d=e.mediaIndex,h=e.partIndex,p=e.timeline,y=u.length-1,w="mediaIndex/partIndex increment";e.getMediaInfoForTime?w="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(w="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(w+=" with independent "+e.independent);var v=typeof h=="number",T=e.segment.uri?"segment":"pre-segment",k=v?UP({preloadSegment:i})-1:0;return T+" ["+(o+d)+"/"+(o+y)+"]"+(v?" part ["+h+"/"+k+"]":"")+(" segment start/end ["+i.start+" => "+i.end+"]")+(v?" part start/end ["+a.start+" => "+a.end+"]":"")+(" startOfSegment ["+r+"]")+(" duration ["+n+"]")+(" timeline ["+p+"]")+(" selected by ["+w+"]")+(" playlist ["+l+"]")},H1=function(e){return e+"TimingInfo"},wY=function(e){var r=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,a=e.buffered,s=e.overrideCheck;return!s&&r===n?null:r<n?i:a.length?a.end(a.length-1):i},q1=function(e){var r=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,a=e.loaderType,s=e.audioDisabled;if(n===i)return!1;if(a==="audio"){var o=r.lastTimelineChange({type:"main"});return!o||o.to!==i}if(a==="main"&&s){var l=r.pendingTimelineChange({type:"audio"});return!(l&&l.to===i)}return!1},_Y=function(e){var r=0;return["video","audio"].forEach(function(n){var i=e[n+"TimingInfo"];if(!!i){var a=i.start,s=i.end,o;typeof a=="bigint"||typeof s=="bigint"?o=L.BigInt(s)-L.BigInt(a):typeof a=="number"&&typeof s=="number"&&(o=s-a),typeof o!="undefined"&&o>r&&(r=o)}}),typeof r=="bigint"&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r},G1=function(e){var r=e.segmentDuration,n=e.maxDuration;return r?Math.round(r)>n+Ea:!1},xY=function(e,r){if(r!=="hls")return null;var n=_Y({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var i=e.playlist.targetDuration,a=G1({segmentDuration:n,maxDuration:i*2}),s=G1({segmentDuration:n,maxDuration:i}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+n+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+i+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:o}:null},Nv=function(t){ge(e,t);function e(n,i){var a;if(a=t.call(this)||this,!n)throw new TypeError("Initialization settings are required");if(typeof n.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return a.bandwidth=n.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.partIndex=null,a.hasPlayed_=n.hasPlayed,a.currentTime_=n.currentTime,a.seekable_=n.seekable,a.seeking_=n.seeking,a.duration_=n.duration,a.mediaSource_=n.mediaSource,a.vhs_=n.vhs,a.loaderType_=n.loaderType,a.currentMediaInfo_=void 0,a.startingMediaInfo_=void 0,a.segmentMetadataTrack_=n.segmentMetadataTrack,a.goalBufferLength_=n.goalBufferLength,a.sourceType_=n.sourceType,a.sourceUpdater_=n.sourceUpdater,a.inbandTextTracks_=n.inbandTextTracks,a.state_="INIT",a.timelineChangeController_=n.timelineChangeController,a.shouldSaveSegmentTimingInfo_=!0,a.parse708captions_=n.parse708captions,a.useDtsForTimestampOffset_=n.useDtsForTimestampOffset,a.captionServices_=n.captionServices,a.experimentalExactManifestTimings=n.experimentalExactManifestTimings,a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.xhrOptions_=null,a.pendingSegments_=[],a.audioDisabled_=!1,a.isPendingTimestampOffset_=!1,a.gopBuffer_=[],a.timeMapping_=0,a.safeAppend_=H.browser.IE_VERSION>=11,a.appendInitSegment_={audio:!0,video:!0},a.playlistOfLastInitSegment_={audio:null,video:null},a.callQueue_=[],a.loadQueue_=[],a.metadataQueue_={id3:[],caption:[]},a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=n.cacheEncryptionKeys,a.keyCache_={},a.decrypter_=n.decrypter,a.syncController_=n.syncController,a.syncPoint_={segmentIndex:0,time:0},a.transmuxer_=a.createTransmuxer_(),a.triggerSyncInfoUpdate_=function(){return a.trigger("syncinfoupdate")},a.syncController_.on("syncinfoupdate",a.triggerSyncInfoUpdate_),a.mediaSource_.addEventListener("sourceopen",function(){a.isEndOfStream_()||(a.ended_=!1)}),a.fetchAtBuffer_=!1,a.logger_=ji("SegmentLoader["+a.loaderType_+"]"),Object.defineProperty(Ne(a),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),a.sourceUpdater_.on("ready",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="main"&&a.timelineChangeController_.on("pendingtimelinechange",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="audio"&&a.timelineChangeController_.on("timelinechange",function(){a.hasEnoughInfoToLoad_()&&a.processLoadQueue_(),a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a}var r=e.prototype;return r.createTransmuxer_=function(){return sm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},r.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},r.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&L.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},r.setAudio=function(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},r.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},r.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,L.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},r.checkForAbort_=function(i){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==i},r.error=function(i){return typeof i!="undefined"&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},r.endOfStream=function(){this.ended_=!0,this.transmuxer_&&sm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},r.buffered_=function(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return H.createTimeRanges();if(this.loaderType_==="main"){var a=i.hasAudio,s=i.hasVideo,o=i.isMuxed;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},r.initSegmentForMap=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=mf(i),o=this.initSegments_[s];return a&&!o&&i.bytes&&(this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),o||i},r.segmentKey=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=tO(i),o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&i.bytes&&(this.keyCache_[s]=o={resolvedUri:i.resolvedUri,bytes:i.bytes});var l={resolvedUri:(o||i).resolvedUri};return o&&(l.bytes=o.bytes),l},r.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},r.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.playlist=function(i,a){if(a===void 0&&(a={}),!!i){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=a,this.state==="INIT"&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(i));var l=null;if(s&&(s.id?l=s.id:s.uri&&(l=s.uri)),this.logger_("playlist update ["+l+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==i.uri){this.mediaIndex!==null&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var c=i.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+c+"]"),this.mediaIndex!==null)if(this.mediaIndex-=c,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var u=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!u.parts||!u.parts.length||!u.parts[this.partIndex])){var d=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=d}}o&&(o.mediaIndex-=c,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=i.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,i)}},r.pause=function(){this.checkBufferTimeout_&&(L.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},r.paused=function(){return this.checkBufferTimeout_===null},r.resetEverything=function(i){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},r.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},r.resyncLoader=function(){this.transmuxer_&&sm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},r.remove=function(i,a,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),a===1/0&&(a=this.duration_()),a<=i){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,c=function(){l--,l===0&&s()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(i,a,c)),(o||this.loaderType_==="main")&&(this.gopBuffer_=pY(this.gopBuffer_,i,a,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(i,a,c));for(var u in this.inbandTextTracks_)sc(i,a,this.inbandTextTracks_[u]);sc(i,a,this.segmentMetadataTrack_),c()},r.monitorBuffer_=function(){this.checkBufferTimeout_&&L.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=L.setTimeout(this.monitorBufferTick_.bind(this),1)},r.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&L.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=L.setTimeout(this.monitorBufferTick_.bind(this),vY)},r.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();!i||(typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},r.isEndOfStream_=function(i,a,s){if(i===void 0&&(i=this.mediaIndex),a===void 0&&(a=this.playlist_),s===void 0&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var o=typeof i=="number"&&a.segments[i],l=i+1===a.segments.length,c=!o||!o.parts||s+1===o.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&l&&c},r.chooseNextRequest_=function(){var i=this.buffered_(),a=L1(i)||0,s=Vb(i,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,l=s>=this.goalBufferLength_(),c=this.playlist_.segments;if(!c.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var u={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(u.isSyncRequest)u.mediaIndex=mY(this.currentTimeline_,c,a);else if(this.mediaIndex!==null){var d=c[this.mediaIndex],h=typeof this.partIndex=="number"?this.partIndex:-1;u.startOfSegment=d.end?d.end:a,d.parts&&d.parts[h+1]?(u.mediaIndex=this.mediaIndex,u.partIndex=h+1):u.mediaIndex=this.mediaIndex+1}else{var p=Hr.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),y=p.segmentIndex,w=p.startTime,v=p.partIndex;u.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+a:"currentTime "+this.currentTime_(),u.mediaIndex=y,u.startOfSegment=w,u.partIndex=v}var T=c[u.mediaIndex],k=T&&typeof u.partIndex=="number"&&T.parts&&T.parts[u.partIndex];if(!T||typeof u.partIndex=="number"&&!k)return null;if(typeof u.partIndex!="number"&&T.parts&&(u.partIndex=0,k=T.parts[0]),!s&&k&&!k.independent)if(u.partIndex===0){var A=c[u.mediaIndex-1],E=A.parts&&A.parts.length&&A.parts[A.parts.length-1];E&&E.independent&&(u.mediaIndex-=1,u.partIndex=A.parts.length-1,u.independent="previous segment")}else T.parts[u.partIndex-1].independent&&(u.partIndex-=1,u.independent="previous part");var I=this.mediaSource_&&this.mediaSource_.readyState==="ended";return u.mediaIndex>=c.length-1&&I&&!this.seeking_()?null:this.generateSegmentInfo_(u)},r.generateSegmentInfo_=function(i){var a=i.independent,s=i.playlist,o=i.mediaIndex,l=i.startOfSegment,c=i.isSyncRequest,u=i.partIndex,d=i.forceTimestampOffset,h=i.getMediaInfoForTime,p=s.segments[o],y=typeof u=="number"&&p.parts[u],w={requestId:"segment-loader-"+Math.random(),uri:y&&y.resolvedUri||p.resolvedUri,mediaIndex:o,partIndex:y?u:null,isSyncRequest:c,startOfSegment:l,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:p.timeline,duration:y&&y.duration||p.duration,segment:p,part:y,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:h,independent:a},v=typeof d!="undefined"?d:this.isPendingTimestampOffset_;w.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:p.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:v});var T=L1(this.sourceUpdater_.audioBuffered());return typeof T=="number"&&(w.audioAppendStart=T-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(w.gopsToAlignWith=hY(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),w},r.timestampOffsetForSegment_=function(i){return wY(i)},r.earlyAbortWhenNeeded_=function(i){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),s=i.bandwidth,o=this.pendingSegment_.duration,l=Hr.estimateSegmentRequestTime(o,s,this.playlist_,i.bytesReceived),c=GW(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(l<=c)){var u=iY({master:this.vhs_.playlists.master,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:c,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!!u){var d=l-c,h=d-u.rebufferingImpact,p=.5;c<=Ea&&(p=1),!(!u.playlist||u.playlist.uri===this.playlist_.uri||h<p)&&(this.bandwidth=u.playlist.attributes.BANDWIDTH*Zt.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},r.handleAbort_=function(i){this.logger_("Aborting "+Js(i)),this.mediaRequestsAborted+=1},r.handleProgress_=function(i,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")},r.handleTrackInfo_=function(i,a){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},gY(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(i.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},r.handleTimingInfo_=function(i,a,s,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var l=this.pendingSegment_,c=H1(a);l[c]=l[c]||{},l[c][s]=o,this.logger_("timinginfo: "+a+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},r.handleCaptions_=function(i,a){var s=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,a));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),c={};a.forEach(function(u){c[u.stream]=c[u.stream]||{startTime:1/0,captions:[],endTime:0};var d=c[u.stream];d.startTime=Math.min(d.startTime,u.startTime+l),d.endTime=Math.max(d.endTime,u.endTime+l),d.captions.push(u)}),Object.keys(c).forEach(function(u){var d=c[u],h=d.startTime,p=d.endTime,y=d.captions,w=s.inbandTextTracks_;s.logger_("adding cues from "+h+" -> "+p+" for "+u),sY(w,s.vhs_.tech_,u),sc(h,p,w[u]),oY({captionArray:y,inbandTextTracks:w,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},r.handleId3_=function(i,a,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,a,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();uY(this.inbandTextTracks_,s,this.vhs_.tech_),cY({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:l,videoDuration:this.duration_()})}},r.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},r.processCallQueue_=function(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(a){return a()})},r.processLoadQueue_=function(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(a){return a()})},r.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var i=this.pendingSegment_;return i?this.getCurrentMediaInfo_()?!q1({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},r.getCurrentMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},r.getMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},r.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!i||!a)return!1;var s=a.hasAudio,o=a.hasVideo,l=a.isMuxed;return!(o&&!i.videoTimingInfo||s&&!this.audioDisabled_&&!l&&!i.audioTimingInfo||q1({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.handleData_=function(i,a){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,i,a));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),s.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),s.isFmp4=i.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[H1(a.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,c;l&&(c=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:c,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var u=this.chooseNextRequest_();if(u.mediaIndex!==s.mediaIndex||u.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}},r.updateAppendInitSegmentStatus=function(i,a){this.loaderType_==="main"&&typeof i.timestampOffset=="number"&&!i.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==i.playlist&&(this.appendInitSegment_[a]=!0)},r.getInitSegmentAndUpdateState_=function(i){var a=i.type,s=i.initSegment,o=i.map,l=i.playlist;if(o){var c=mf(o);if(this.activeInitSegmentId_===c)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=c}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=l,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},r.handleQuotaExceededError_=function(i,a){var s=this,o=i.segmentInfo,l=i.type,c=i.bytes,u=this.sourceUpdater_.audioBuffered(),d=this.sourceUpdater_.videoBuffered();u.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ss(u).join(", ")),d.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ss(d).join(", "));var h=u.length?u.start(0):0,p=u.length?u.end(u.length-1):0,y=d.length?d.start(0):0,w=d.length?d.end(d.length-1):0;if(p-h<=Vl&&w-y<=Vl){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+c.byteLength+", ")+("audio buffer: "+ss(u).join(", ")+", ")+("video buffer: "+ss(d).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:c}));var v=this.currentTime_(),T=v-Vl;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+T),this.remove(0,T,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+Vl+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=L.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},Vl*1e3)},!0)},r.handleAppendError_=function(i,a){var s=i.segmentInfo,o=i.type,l=i.bytes;if(!!a){if(a.code===yO){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(o+" append of "+l.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},r.appendToSourceBuffer_=function(i){var a=i.segmentInfo,s=i.type,o=i.initSegment,l=i.data,c=i.bytes;if(!c){var u=[l],d=l.byteLength;o&&(u.unshift(o),d+=o.byteLength),c=aY({bytes:d,segments:u})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:s,bytes:c},this.handleAppendError_.bind(this,{segmentInfo:a,type:s,bytes:c}))},r.handleSegmentTimingInfo_=function(i,a,s){if(!(!this.pendingSegment_||a!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=i+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[l].transmuxedPresentationStart=s.start.presentation,o[l].transmuxedDecodeStart=s.start.decode,o[l].transmuxedPresentationEnd=s.end.presentation,o[l].transmuxedDecodeEnd=s.end.decode,o[l].baseMediaDecodeTime=s.baseMediaDecodeTime}},r.appendData_=function(i,a){var s=a.type,o=a.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:s,initSegment:l,data:o})}},r.loadSegment_=function(i){var a=this;if(this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),typeof i.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=yi({},i,{forceTimestampOffset:!0});yi(i,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(i)});return}this.updateTransmuxerAndRequestSegment_(i)},r.updateTransmuxerAndRequestSegment_=function(i){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var s=this.createSimplifiedSegmentObj_(i),o=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex),l=this.mediaIndex!==null,c=i.timeline!==this.currentTimeline_&&i.timeline>0,u=o||l&&c;this.logger_("Requesting "+Js(i)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=QK({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:u,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(h){var p=h.message,y=h.level,w=h.stream;a.logger_(Js(i)+" logged from transmuxer stream "+w+" as a "+y+": "+p)}})},r.trimBackBuffer_=function(i){var a=bY(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},r.createSimplifiedSegmentObj_=function(i){var a=i.segment,s=i.part,o={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},l=i.playlist.segments[i.mediaIndex-1];if(l&&l.timeline===a.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),a.key){var c=a.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);o.key=this.segmentKey(a.key),o.key.iv=c}return a.map&&(o.map=this.initSegmentForMap(a.map)),o},r.saveTransferStats_=function(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},r.saveBandwidthRelatedStats_=function(i,a){if(this.pendingSegment_.byteLength=a.bytesReceived,i<Yd){this.logger_("Ignoring segment's bandwidth because its duration of "+i+(" is less than the min to record "+Yd));return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime},r.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},r.segmentRequestFinished_=function(i,a,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,a,s));return}if(this.saveTransferStats_(a.stats),!!this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===Yi.ABORTED)return;if(this.pause(),i.code===Yi.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(i),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=fY(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},r.setTimeMapping_=function(i){var a=this.syncController_.mappingForTimeline(i);a!==null&&(this.timeMapping_=a)},r.updateMediaSecondsLoaded_=function(i){typeof i.start=="number"&&typeof i.end=="number"?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration},r.shouldUpdateTransmuxerTimestampOffset_=function(i){return i===null?!1:this.loaderType_==="main"&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset()},r.trueSegmentStart_=function(i){var a=i.currentStart,s=i.playlist,o=i.mediaIndex,l=i.firstVideoFrameTimeForData,c=i.currentVideoTimestampOffset,u=i.useVideoTimingInfo,d=i.videoTimingInfo,h=i.audioTimingInfo;if(typeof a!="undefined")return a;if(!u)return h.start;var p=s.segments[o-1];return o===0||!p||typeof p.start=="undefined"||p.end!==l+c?l:d.start},r.waitForAppendsToComplete_=function(i){var a=this.getCurrentMediaInfo_(i);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=a.hasAudio,o=a.hasVideo,l=a.isMuxed,c=this.loaderType_==="main"&&o,u=!this.audioDisabled_&&s&&!l;if(i.waitingOnAppends=0,!i.hasAppendedData_){!i.timingInfo&&typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),this.checkAppendsDone_(i);return}c&&i.waitingOnAppends++,u&&i.waitingOnAppends++,c&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),u&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},r.checkAppendsDone_=function(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,i.waitingOnAppends===0&&this.handleAppendsDone_())},r.checkForIllegalMediaSwitch=function(i){var a=yY(this.loaderType_,this.getCurrentMediaInfo_(),i);return a?(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0):!1},r.updateSourceBufferTimestampOffset_=function(i){if(!(i.timestampOffset===null||typeof i.timingInfo.start!="number"||i.changedTimestampOffset||this.loaderType_!=="main")){var a=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),a=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},r.getSegmentStartTimeForTimestampOffsetCalculation_=function(i){var a=i.videoTimingInfo,s=i.audioTimingInfo,o=i.timingInfo;return this.useDtsForTimestampOffset_?a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},r.updateTimingInfoEnd_=function(i){i.timingInfo=i.timingInfo||{};var a=this.getMediaInfo_(),s=this.loaderType_==="main"&&a&&a.hasVideo,o=s&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;!o||(i.timingInfo.end=typeof o.end=="number"?o.end:o.start+i.duration)},r.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});var a=xY(i,this.sourceType_);if(a&&(a.severity==="warn"?H.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest&&(this.trigger("syncinfoupdate"),!i.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+Js(i));return}this.logger_("Appended "+Js(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var s=i.segment,o=i.part,l=s.end&&this.currentTime_()-s.end>i.playlist.targetDuration*3,c=o&&o.end&&this.currentTime_()-o.end>i.playlist.partTargetDuration*3;if(l||c){this.logger_("bad "+(l?"segment":"part")+" "+Js(i)),this.resetEverything();return}var u=this.mediaIndex!==null;u&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},r.recordThroughput_=function(i){if(i.duration<Yd){this.logger_("Ignoring segment's throughput because its duration of "+i.duration+(" is less than the min to record "+Yd));return}var a=this.throughput.rate,s=Date.now()-i.endOfAllRequests+1,o=Math.floor(i.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count},r.addSegmentMetadataCue_=function(i){if(!!this.segmentMetadataTrack_){var a=i.segment,s=a.start,o=a.end;if(!(!V1(s)||!V1(o))){sc(s,o,this.segmentMetadataTrack_);var l=L.WebKitDataCue||L.VTTCue,c={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:s,end:o},u=JSON.stringify(c),d=new l(s,o,u);d.value=c,this.segmentMetadataTrack_.addCue(d)}}},e}(H.EventTarget);function _n(){}var bO=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toUpperCase()})},TY=["video","audio"],jv=function(e,r){var n=r[e+"Buffer"];return n&&n.updating||r.queuePending[e]},SY=function(e,r){for(var n=0;n<r.length;n++){var i=r[n];if(i.type==="mediaSource")return null;if(i.type===e)return n}return null},Xb=function t(e,r){if(r.queue.length!==0){var n=0,i=r.queue[n];if(i.type==="mediaSource"){!r.updating()&&r.mediaSource.readyState!=="closed"&&(r.queue.shift(),i.action(r),i.doneFn&&i.doneFn(),t("audio",r),t("video",r));return}if(e!=="mediaSource"&&!(!r.ready()||r.mediaSource.readyState==="closed"||jv(e,r))){if(i.type!==e){if(n=SY(e,r.queue),n===null)return;i=r.queue[n]}if(r.queue.splice(n,1),r.queuePending[e]=i,i.action(e,r),!i.doneFn){r.queuePending[e]=null,t(e,r);return}}}},wO=function(e,r){var n=r[e+"Buffer"],i=bO(e);!n||(n.removeEventListener("updateend",r["on"+i+"UpdateEnd_"]),n.removeEventListener("error",r["on"+i+"Error_"]),r.codecs[e]=null,r[e+"Buffer"]=null)},Hi=function(e,r){return e&&r&&Array.prototype.indexOf.call(e.sourceBuffers,r)!==-1},Zr={appendBuffer:function(e,r,n){return function(i,a){var s=a[i+"Buffer"];if(!!Hi(a.mediaSource,s)){a.logger_("Appending segment "+r.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{s.appendBuffer(e)}catch(o){a.logger_("Error with code "+o.code+" "+(o.code===yO?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+r.mediaIndex+" to "+i+"Buffer")),a.queuePending[i]=null,n(o)}}}},remove:function(e,r){return function(n,i){var a=i[n+"Buffer"];if(!!Hi(i.mediaSource,a)){i.logger_("Removing "+e+" to "+r+" from "+n+"Buffer");try{a.remove(e,r)}catch{i.logger_("Remove "+e+" to "+r+" from "+n+"Buffer failed")}}}},timestampOffset:function(e){return function(r,n){var i=n[r+"Buffer"];!Hi(n.mediaSource,i)||(n.logger_("Setting "+r+"timestampOffset to "+e),i.timestampOffset=e)}},callback:function(e){return function(r,n){e()}},endOfStream:function(e){return function(r){if(r.mediaSource.readyState==="open"){r.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{r.mediaSource.endOfStream(e)}catch(n){H.log.warn("Failed to call media source endOfStream",n)}}}},duration:function(e){return function(r){r.logger_("Setting mediaSource duration to "+e);try{r.mediaSource.duration=e}catch(n){H.log.warn("Failed to set media source duration",n)}}},abort:function(){return function(e,r){if(r.mediaSource.readyState==="open"){var n=r[e+"Buffer"];if(!!Hi(r.mediaSource,n)){r.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(i){H.log.warn("Failed to abort on "+e+"Buffer",i)}}}}},addSourceBuffer:function(e,r){return function(n){var i=bO(e),a=tu(r);n.logger_("Adding "+e+"Buffer with codec "+r+" to mediaSource");var s=n.mediaSource.addSourceBuffer(a);s.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),s.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=r,n[e+"Buffer"]=s}},removeSourceBuffer:function(e){return function(r){var n=r[e+"Buffer"];if(wO(e,r),!!Hi(r.mediaSource,n)){r.logger_("Removing "+e+"Buffer with codec "+r.codecs[e]+" from mediaSource");try{r.mediaSource.removeSourceBuffer(n)}catch(i){H.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},changeType:function(e){return function(r,n){var i=n[r+"Buffer"],a=tu(e);!Hi(n.mediaSource,i)||n.codecs[r]!==e&&(n.logger_("changing "+r+"Buffer codec from "+n.codecs[r]+" to "+e),i.changeType(a),n.codecs[r]=e)}}},ei=function(e){var r=e.type,n=e.sourceUpdater,i=e.action,a=e.doneFn,s=e.name;n.queue.push({type:r,action:i,doneFn:a,name:s}),Xb(r,n)},W1=function(e,r){return function(n){if(r.queuePending[e]){var i=r.queuePending[e].doneFn;r.queuePending[e]=null,i&&i(r[e+"Error_"])}Xb(e,r)}},_O=function(t){ge(e,t);function e(n){var i;return i=t.call(this)||this,i.mediaSource=n,i.sourceopenListener_=function(){return Xb("mediaSource",Ne(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=ji("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=W1("video",Ne(i)),i.onAudioUpdateEnd_=W1("audio",Ne(i)),i.onVideoError_=function(a){i.videoError_=a},i.onAudioError_=function(a){i.audioError_=a},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}var r=e.prototype;return r.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},r.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},r.hasInitializedAnyEme=function(){return this.initializedEme_},r.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},r.createSourceBuffers=function(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},r.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},r.addSourceBuffer=function(i,a){ei({type:"mediaSource",sourceUpdater:this,action:Zr.addSourceBuffer(i,a),name:"addSourceBuffer"})},r.abort=function(i){ei({type:i,sourceUpdater:this,action:Zr.abort(i),name:"abort"})},r.removeSourceBuffer=function(i){if(!this.canRemoveSourceBuffer()){H.log.error("removeSourceBuffer is not supported!");return}ei({type:"mediaSource",sourceUpdater:this,action:Zr.removeSourceBuffer(i),name:"removeSourceBuffer"})},r.canRemoveSourceBuffer=function(){return!H.browser.IE_VERSION&&!H.browser.IS_FIREFOX&&L.MediaSource&&L.MediaSource.prototype&&typeof L.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return L.SourceBuffer&&L.SourceBuffer.prototype&&typeof L.SourceBuffer.prototype.changeType=="function"},r.canChangeType=function(){return this.constructor.canChangeType()},r.changeType=function(i,a){if(!this.canChangeType()){H.log.error("changeType is not supported!");return}ei({type:i,sourceUpdater:this,action:Zr.changeType(a),name:"changeType"})},r.addOrChangeSourceBuffers=function(i){var a=this;if(!i||typeof i!="object"||Object.keys(i).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(s){var o=i[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,o);a.canChangeType()&&a.changeType(s,o)})},r.appendBuffer=function(i,a){var s=this,o=i.segmentInfo,l=i.type,c=i.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([i,a]),this.logger_("delayed audio append of "+c.length+" until video append");return}var u=a;if(ei({type:l,sourceUpdater:this,action:Zr.appendBuffer(c,o||{mediaIndex:-1},u),doneFn:a,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var d=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+d.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,d.forEach(function(h){s.appendBuffer.apply(s,h)})}},r.audioBuffered=function(){return Hi(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:H.createTimeRange()},r.videoBuffered=function(){return Hi(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:H.createTimeRange()},r.buffered=function(){var i=Hi(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=Hi(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!i?this.audioBuffered():i&&!a?this.videoBuffered():qW(this.audioBuffered(),this.videoBuffered())},r.setDuration=function(i,a){a===void 0&&(a=_n),ei({type:"mediaSource",sourceUpdater:this,action:Zr.duration(i),name:"duration",doneFn:a})},r.endOfStream=function(i,a){i===void 0&&(i=null),a===void 0&&(a=_n),typeof i!="string"&&(i=void 0),ei({type:"mediaSource",sourceUpdater:this,action:Zr.endOfStream(i),name:"endOfStream",doneFn:a})},r.removeAudio=function(i,a,s){if(s===void 0&&(s=_n),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}ei({type:"audio",sourceUpdater:this,action:Zr.remove(i,a),doneFn:s,name:"remove"})},r.removeVideo=function(i,a,s){if(s===void 0&&(s=_n),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}ei({type:"video",sourceUpdater:this,action:Zr.remove(i,a),doneFn:s,name:"remove"})},r.updating=function(){return!!(jv("audio",this)||jv("video",this))},r.audioTimestampOffset=function(i){return typeof i!="undefined"&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(ei({type:"audio",sourceUpdater:this,action:Zr.timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},r.videoTimestampOffset=function(i){return typeof i!="undefined"&&this.videoBuffer&&this.videoTimestampOffset!==i&&(ei({type:"video",sourceUpdater:this,action:Zr.timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},r.audioQueueCallback=function(i){!this.audioBuffer||ei({type:"audio",sourceUpdater:this,action:Zr.callback(i),name:"callback"})},r.videoQueueCallback=function(i){!this.videoBuffer||ei({type:"video",sourceUpdater:this,action:Zr.callback(i),name:"callback"})},r.dispose=function(){var i=this;this.trigger("dispose"),TY.forEach(function(a){i.abort(a),i.canRemoveSourceBuffer()?i.removeSourceBuffer(a):i[a+"QueueCallback"](function(){return wO(a,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(H.EventTarget),K1=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Y1=new Uint8Array(`

`.split("").map(function(t){return t.charCodeAt(0)})),kY=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,a.mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=n.featuresNativeTextTracks,a.shouldSaveSegmentTimingInfo_=!1,a}var r=e.prototype;return r.createTransmuxer_=function(){return null},r.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return H.createTimeRanges();var i=this.subtitlesTrack_.cues,a=i[0].startTime,s=i[i.length-1].startTime;return H.createTimeRanges([[a,s]])},r.initSegmentForMap=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=mf(i),o=this.initSegments_[s];if(a&&!o&&i.bytes){var l=Y1.byteLength+i.bytes.byteLength,c=new Uint8Array(l);c.set(i.bytes),c.set(Y1,i.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:c}}return o||i},r.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.track=function(i){return typeof i=="undefined"?this.subtitlesTrack_:(this.subtitlesTrack_=i,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},r.remove=function(i,a){sc(i,a,this.subtitlesTrack_)},r.fillBuffer_=function(){var i=this,a=this.chooseNextRequest_();if(!!a){if(this.syncController_.timestampOffsetForTimeline(a.timeline)===null){var s=function(){i.state="READY",i.paused()||i.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(a)}},r.timestampOffsetForSegment_=function(){return null},r.chooseNextRequest_=function(){return this.skipEmptySegments_(t.prototype.chooseNextRequest_.call(this))},r.skipEmptySegments_=function(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},r.stopForError=function(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},r.segmentRequestFinished_=function(i,a,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(i){i.code===Yi.TIMEOUT&&this.handleTimeout_(),i.code===Yi.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(i);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");var c=l.segment;if(c.map&&(c.map.bytes=a.map.bytes),l.bytes=a.bytes,typeof L.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var u,d=function(){o.subtitlesTrack_.tech_.off("vttjsloaded",u),o.stopForError({message:"Error loading vtt.js"})};u=function(){o.subtitlesTrack_.tech_.off("vttjserror",d),o.segmentRequestFinished_(i,a,s)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",u),this.subtitlesTrack_.tech_.one("vttjserror",d);return}c.requested=!0;try{this.parseVTTCues_(l)}catch(h){this.stopForError({message:h.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,l.cues.forEach(function(h){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new L.VTTCue(h.startTime,h.endTime,h.text):h)}),dY(this.subtitlesTrack_),this.handleAppendsDone_()},r.handleData_=function(){},r.updateTimingInfoEnd_=function(){},r.parseVTTCues_=function(i){var a,s=!1;typeof L.TextDecoder=="function"?a=new L.TextDecoder("utf8"):(a=L.WebVTT.StringDecoder(),s=!0);var o=new L.WebVTT.Parser(L,L.vttjs,a);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=i.cues.push.bind(i.cues),o.ontimestampmap=function(u){i.timestampmap=u},o.onparsingerror=function(u){H.log.warn("Error encountered when parsing cues: "+u.message)},i.segment.map){var l=i.segment.map.bytes;s&&(l=K1(l)),o.parse(l)}var c=i.bytes;s&&(c=K1(c)),o.parse(c),o.flush()},r.updateTimeMapping_=function(i,a,s){var o=i.segment;if(!!a){if(!i.cues.length){o.empty=!0;return}var l=i.timestampmap,c=l.MPEGTS/nf.ONE_SECOND_IN_TS-l.LOCAL+a.mapping;if(i.cues.forEach(function(h){h.startTime+=c,h.endTime+=c}),!s.syncInfo){var u=i.cues[0].startTime,d=i.cues[i.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+i.mediaIndex,time:Math.min(u,d-o.duration)}}}},e}(Nv),EY=function(e,r){for(var n=e.cues,i=0;i<n.length;i++){var a=n[i];if(r>=a.adStartTime&&r<=a.adEndTime)return a}return null},CY=function(e,r,n){if(n===void 0&&(n=0),!!e.segments)for(var i=n,a,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=EY(r,i+o.duration/2)),a){if("cueIn"in o){a.endTime=i,a.adEndTime=i,i+=o.duration,a=null;continue}if(i<a.endTime){i+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new L.VTTCue(i,i+o.duration,o.cueOut),a.adStartTime=i,a.adEndTime=i+parseFloat(o.cueOut),r.addCue(a)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),c=l[0],u=l[1];a=new L.VTTCue(i,i+o.duration,""),a.adStartTime=i-c,a.adEndTime=a.adStartTime+u,r.addCue(a)}i+=o.duration}},AY=86400,X1=[{name:"VOD",run:function(e,r,n,i,a){if(n!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(e,r,n,i,a){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,o=null,l=Av(r);a=a||0;for(var c=0;c<l.length;c++){var u=r.endList||a===0?c:l.length-(c+1),d=l[u],h=d.segment,p=e.timelineToDatetimeMappings[h.timeline];if(!(!p||!h.dateTimeObject)){var y=h.dateTimeObject.getTime()/1e3,w=y+p;if(h.parts&&typeof d.partIndex=="number")for(var v=0;v<d.partIndex;v++)w+=h.parts[v].duration;var T=Math.abs(a-w);if(o!==null&&(T===0||o<T))break;o=T,s={time:w,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}}return s}},{name:"Segment",run:function(e,r,n,i,a){var s=null,o=null;a=a||0;for(var l=Av(r),c=0;c<l.length;c++){var u=r.endList||a===0?c:l.length-(c+1),d=l[u],h=d.segment,p=d.part&&d.part.start||h&&h.start;if(h.timeline===i&&typeof p!="undefined"){var y=Math.abs(a-p);if(o!==null&&o<y)break;(!s||o===null||o>=y)&&(o=y,s={time:p,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return s}},{name:"Discontinuity",run:function(e,r,n,i,a){var s=null;if(a=a||0,r.discontinuityStarts&&r.discontinuityStarts.length)for(var o=null,l=0;l<r.discontinuityStarts.length;l++){var c=r.discontinuityStarts[l],u=r.discontinuitySequence+l+1,d=e.discontinuities[u];if(d){var h=Math.abs(a-d.time);if(o!==null&&o<h)break;(!s||o===null||o>=h)&&(o=h,s={time:d.time,segmentIndex:c,partIndex:null})}}return s}},{name:"Playlist",run:function(e,r,n,i,a){if(r.syncInfo){var s={time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence,partIndex:null};return s}return null}}],IY=function(t){ge(e,t);function e(n){var i;return i=t.call(this)||this,i.timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=ji("SyncController"),i}var r=e.prototype;return r.getSyncPoint=function(i,a,s,o){var l=this.runStrategies_(i,a,s,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},r.getExpiredTime=function(i,a){if(!i||!i.segments)return null;var s=this.runStrategies_(i,a,i.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+Tc({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:o.segmentIndex,endIndex:0}))},r.runStrategies_=function(i,a,s,o){for(var l=[],c=0;c<X1.length;c++){var u=X1[c],d=u.run(this,i,a,s,o);d&&(d.strategy=u.name,l.push({strategy:u.name,syncPoint:d}))}return l},r.selectSyncPoint_=function(i,a){for(var s=i[0].syncPoint,o=Math.abs(i[0].syncPoint[a.key]-a.value),l=i[0].strategy,c=1;c<i.length;c++){var u=Math.abs(i[c].syncPoint[a.key]-a.value);u<o&&(o=u,s=i[c].syncPoint,l=i[c].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy"+(" ["+l+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},r.saveExpiredSegmentInfo=function(i,a){var s=a.mediaSequence-i.mediaSequence;if(s>AY){H.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var l=i.segments[o];if(l&&typeof l.start!="undefined"){a.syncInfo={mediaSequence:i.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+","+(" mediaSequence: "+a.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},r.setDateTimeMappingForStart=function(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var a=i.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}},r.saveSegmentTimingInfo=function(i){var a=i.segmentInfo,s=i.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(a,a.timingInfo,s),l=a.segment;o&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:l.start}));var c=l.dateTimeObject;l.discontinuity&&s&&c&&(this.timelineToDatetimeMappings[l.timeline]=-(c.getTime()/1e3))},r.timestampOffsetForTimeline=function(i){return typeof this.timelines[i]=="undefined"?null:this.timelines[i].time},r.mappingForTimeline=function(i){return typeof this.timelines[i]=="undefined"?null:this.timelines[i].mapping},r.calculateSegmentTimeMapping_=function(i,a,s){var o=i.segment,l=i.part,c=this.timelines[i.timeline],u,d;if(typeof i.timestampOffset=="number")c={time:i.startOfSegment,mapping:i.startOfSegment-a.start},s&&(this.timelines[i.timeline]=c,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": "+("[time: "+c.time+"] [mapping: "+c.mapping+"]"))),u=i.startOfSegment,d=a.end+c.mapping;else if(c)u=a.start+c.mapping,d=a.end+c.mapping;else return!1;return l&&(l.start=u,l.end=d),(!o.start||u<o.start)&&(o.start=u),o.end=d,!0},r.saveDiscontinuitySyncInfo_=function(i){var a=i.playlist,s=i.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var o=0;o<a.discontinuityStarts.length;o++){var l=a.discontinuityStarts[o],c=a.discontinuitySequence+o+1,u=l-i.mediaIndex,d=Math.abs(u);if(!this.discontinuities[c]||this.discontinuities[c].accuracy>d){var h=void 0;u<0?h=s.start-Tc({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex,endIndex:l}):h=s.end+Tc({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex+1,endIndex:l}),this.discontinuities[c]={time:h,accuracy:d}}}},r.dispose=function(){this.trigger("dispose"),this.off()},e}(H.EventTarget),PY=function(t){ge(e,t);function e(){var n;return n=t.call(this)||this,n.pendingTimelineChanges_={},n.lastTimelineChanges_={},n}var r=e.prototype;return r.clearPendingTimelineChange=function(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},r.pendingTimelineChange=function(i){var a=i.type,s=i.from,o=i.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},r.lastTimelineChange=function(i){var a=i.type,s=i.from,o=i.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[a]={type:a,from:s,to:o},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},r.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(H.EventTarget),OY=oO(lO(function(){var t=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function e(E,I,F){return F={path:I,exports:{},require:function(D,z){return r(D,z==null?F.path:z)}},E(F,F.exports),F.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n=e(function(E){function I(j,D){for(var z=0;z<D.length;z++){var M=D[z];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}function F(j,D,z){return D&&I(j.prototype,D),z&&I(j,z),j}E.exports=F,E.exports.default=E.exports,E.exports.__esModule=!0}),i=e(function(E){function I(F,j){return E.exports=I=Object.setPrototypeOf||function(z,M){return z.__proto__=M,z},E.exports.default=E.exports,E.exports.__esModule=!0,I(F,j)}E.exports=I,E.exports.default=E.exports,E.exports.__esModule=!0}),a=e(function(E){function I(F,j){F.prototype=Object.create(j.prototype),F.prototype.constructor=F,i(F,j)}E.exports=I,E.exports.default=E.exports,E.exports.__esModule=!0}),s=function(){function E(){this.listeners={}}var I=E.prototype;return I.on=function(j,D){this.listeners[j]||(this.listeners[j]=[]),this.listeners[j].push(D)},I.off=function(j,D){if(!this.listeners[j])return!1;var z=this.listeners[j].indexOf(D);return this.listeners[j]=this.listeners[j].slice(0),this.listeners[j].splice(z,1),z>-1},I.trigger=function(j){var D=this.listeners[j];if(!!D)if(arguments.length===2)for(var z=D.length,M=0;M<z;++M)D[M].call(this,arguments[1]);else for(var U=Array.prototype.slice.call(arguments,1),P=D.length,q=0;q<P;++q)D[q].apply(this,U)},I.dispose=function(){this.listeners={}},I.pipe=function(j){this.on("data",function(D){j.push(D)})},E}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function o(E){return E.subarray(0,E.byteLength-E[E.byteLength-1])}/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */var l=function(){var I=[[[],[],[],[],[]],[[],[],[],[],[]]],F=I[0],j=I[1],D=F[4],z=j[4],M,U,P,q=[],X=[],fe,te,se,le,Re,Le;for(M=0;M<256;M++)X[(q[M]=M<<1^(M>>7)*283)^M]=M;for(U=P=0;!D[U];U^=fe||1,P=X[P]||1)for(le=P^P<<1^P<<2^P<<3^P<<4,le=le>>8^le&255^99,D[U]=le,z[le]=U,se=q[te=q[fe=q[U]]],Le=se*16843009^te*65537^fe*257^U*16843008,Re=q[le]*257^le*16843008,M=0;M<4;M++)F[M][U]=Re=Re<<24^Re>>>8,j[M][le]=Le=Le<<24^Le>>>8;for(M=0;M<5;M++)F[M]=F[M].slice(0),j[M]=j[M].slice(0);return I},c=null,u=function(){function E(F){c||(c=l()),this._tables=[[c[0][0].slice(),c[0][1].slice(),c[0][2].slice(),c[0][3].slice(),c[0][4].slice()],[c[1][0].slice(),c[1][1].slice(),c[1][2].slice(),c[1][3].slice(),c[1][4].slice()]];var j,D,z,M=this._tables[0][4],U=this._tables[1],P=F.length,q=1;if(P!==4&&P!==6&&P!==8)throw new Error("Invalid aes key size");var X=F.slice(0),fe=[];for(this._key=[X,fe],j=P;j<4*P+28;j++)z=X[j-1],(j%P===0||P===8&&j%P===4)&&(z=M[z>>>24]<<24^M[z>>16&255]<<16^M[z>>8&255]<<8^M[z&255],j%P===0&&(z=z<<8^z>>>24^q<<24,q=q<<1^(q>>7)*283)),X[j]=X[j-P]^z;for(D=0;j;D++,j--)z=X[D&3?j:j-4],j<=4||D<4?fe[D]=z:fe[D]=U[0][M[z>>>24]]^U[1][M[z>>16&255]]^U[2][M[z>>8&255]]^U[3][M[z&255]]}var I=E.prototype;return I.decrypt=function(j,D,z,M,U,P){var q=this._key[1],X=j^q[0],fe=M^q[1],te=z^q[2],se=D^q[3],le,Re,Le,pt=q.length/4-2,it,gt=4,Gt=this._tables[1],K=Gt[0],ve=Gt[1],ue=Gt[2],be=Gt[3],Qe=Gt[4];for(it=0;it<pt;it++)le=K[X>>>24]^ve[fe>>16&255]^ue[te>>8&255]^be[se&255]^q[gt],Re=K[fe>>>24]^ve[te>>16&255]^ue[se>>8&255]^be[X&255]^q[gt+1],Le=K[te>>>24]^ve[se>>16&255]^ue[X>>8&255]^be[fe&255]^q[gt+2],se=K[se>>>24]^ve[X>>16&255]^ue[fe>>8&255]^be[te&255]^q[gt+3],gt+=4,X=le,fe=Re,te=Le;for(it=0;it<4;it++)U[(3&-it)+P]=Qe[X>>>24]<<24^Qe[fe>>16&255]<<16^Qe[te>>8&255]<<8^Qe[se&255]^q[gt++],le=X,X=fe,fe=te,te=se,se=le},E}(),d=function(E){a(I,E);function I(){var j;return j=E.call(this,s)||this,j.jobs=[],j.delay=1,j.timeout_=null,j}var F=I.prototype;return F.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},F.push=function(D){this.jobs.push(D),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},I}(s),h=function(I){return I<<24|(I&65280)<<8|(I&16711680)>>8|I>>>24},p=function(I,F,j){var D=new Int32Array(I.buffer,I.byteOffset,I.byteLength>>2),z=new u(Array.prototype.slice.call(F)),M=new Uint8Array(I.byteLength),U=new Int32Array(M.buffer),P,q,X,fe,te,se,le,Re,Le;for(P=j[0],q=j[1],X=j[2],fe=j[3],Le=0;Le<D.length;Le+=4)te=h(D[Le]),se=h(D[Le+1]),le=h(D[Le+2]),Re=h(D[Le+3]),z.decrypt(te,se,le,Re,U,Le),U[Le]=h(U[Le]^P),U[Le+1]=h(U[Le+1]^q),U[Le+2]=h(U[Le+2]^X),U[Le+3]=h(U[Le+3]^fe),P=te,q=se,X=le,fe=Re;return M},y=function(){function E(F,j,D,z){var M=E.STEP,U=new Int32Array(F.buffer),P=new Uint8Array(F.byteLength),q=0;for(this.asyncStream_=new d,this.asyncStream_.push(this.decryptChunk_(U.subarray(q,q+M),j,D,P)),q=M;q<U.length;q+=M)D=new Uint32Array([h(U[q-4]),h(U[q-3]),h(U[q-2]),h(U[q-1])]),this.asyncStream_.push(this.decryptChunk_(U.subarray(q,q+M),j,D,P));this.asyncStream_.push(function(){z(null,o(P))})}var I=E.prototype;return I.decryptChunk_=function(j,D,z,M){return function(){var U=p(j,D,z);M.set(U,j.byteOffset)}},n(E,null,[{key:"STEP",get:function(){return 32e3}}]),E}(),w;typeof window!="undefined"?w=window:typeof t!="undefined"?w=t:typeof self!="undefined"?w=self:w={};var v=w,T=function(I){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(I):I&&I.buffer instanceof ArrayBuffer},k=v.BigInt||Number;k("0x1"),k("0x100"),k("0x10000"),k("0x1000000"),k("0x100000000"),k("0x10000000000"),k("0x1000000000000"),k("0x100000000000000"),k("0x10000000000000000");var A=function(I){var F={};return Object.keys(I).forEach(function(j){var D=I[j];T(D)?F[j]={bytes:D.buffer,byteOffset:D.byteOffset,byteLength:D.byteLength}:F[j]=D}),F};self.onmessage=function(E){var I=E.data,F=new Uint8Array(I.encrypted.bytes,I.encrypted.byteOffset,I.encrypted.byteLength),j=new Uint32Array(I.key.bytes,I.key.byteOffset,I.key.byteLength/4),D=new Uint32Array(I.iv.bytes,I.iv.byteOffset,I.iv.byteLength/4);new y(F,j,D,function(z,M){self.postMessage(A({source:I.source,decrypted:M}),[M.buffer])})}})),DY=sO(OY),LY=function(e){var r=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(r="main-desc"),r},wf=function(e,r){e.abort(),e.pause(),r&&r.activePlaylistLoader&&(r.activePlaylistLoader.pause(),r.activePlaylistLoader=null)},Fv=function(e,r){r.activePlaylistLoader=e,e.load()},RY=function(e,r){return function(){var n=r.segmentLoaders,i=n[e],a=n.main,s=r.mediaTypes[e],o=s.activeTrack(),l=s.getActiveGroup(),c=s.activePlaylistLoader,u=s.lastGroup_;if(!(l&&u&&l.id===u.id)&&(s.lastGroup_=l,s.lastTrack_=o,wf(i,s),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){c&&a.resetEverything();return}i.resyncLoader(),Fv(l.playlistLoader,s)}}},MY=function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e];i.lastGroup_=null,n.abort(),n.pause()}},NY=function(e,r){return function(){var n=r.masterPlaylistLoader,i=r.segmentLoaders,a=i[e],s=i.main,o=r.mediaTypes[e],l=o.activeTrack(),c=o.getActiveGroup(),u=o.activePlaylistLoader,d=o.lastTrack_;if(!(d&&l&&d.id===l.id)&&(o.lastGroup_=c,o.lastTrack_=l,wf(a,o),!!c)){if(c.isMasterPlaylist){if(!l||!d||l.id===d.id)return;var h=r.vhs.masterPlaylistController_,p=h.selectPlaylist();if(h.media()===p)return;o.logger_("track change. Switching master audio from "+d.id+" to "+l.id),n.pause(),s.resetEverything(),h.fastQualityChange_(p);return}if(e==="AUDIO"){if(!c.playlistLoader){s.setAudio(!0),s.resetEverything();return}a.setAudio(!0),s.setAudio(!1)}if(u===c.playlistLoader){Fv(c.playlistLoader,o);return}a.track&&a.track(l),a.resetEverything(),Fv(c.playlistLoader,o)}}},_f={AUDIO:function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e],a=r.blacklistCurrentPlaylist;wf(n,i);var s=i.activeTrack(),o=i.activeGroup(),l=(o.filter(function(d){return d.default})[0]||o[0]).id,c=i.tracks[l];if(s===c){a({message:"Problem encountered loading the default audio track."});return}H.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var u in i.tracks)i.tracks[u].enabled=i.tracks[u]===c;i.onTrackChanged()}},SUBTITLES:function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e];H.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),wf(n,i);var a=i.activeTrack();a&&(a.mode="disabled"),i.onTrackChanged()}}},Q1={AUDIO:function(e,r,n){if(!!r){var i=n.tech,a=n.requestOptions,s=n.segmentLoaders[e];r.on("loadedmetadata",function(){var o=r.media();s.playlist(o,a),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),a),i.paused()||s.load()}),r.on("error",_f[e](e,n))}},SUBTITLES:function(e,r,n){var i=n.tech,a=n.requestOptions,s=n.segmentLoaders[e],o=n.mediaTypes[e];r.on("loadedmetadata",function(){var l=r.media();s.playlist(l,a),s.track(o.activeTrack()),(!i.paused()||l.endList&&i.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),a),i.paused()||s.load()}),r.on("error",_f[e](e,n))}},jY={AUDIO:function(e,r){var n=r.vhs,i=r.sourceType,a=r.segmentLoaders[e],s=r.requestOptions,o=r.master.mediaGroups,l=r.mediaTypes[e],c=l.groups,u=l.tracks,d=l.logger_,h=r.masterPlaylistLoader,p=Yu(h.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},p&&(o[e].main.default.playlists=h.master.playlists));for(var y in o[e]){c[y]||(c[y]=[]);for(var w in o[e][y]){var v=o[e][y][w],T=void 0;if(p?(d("AUDIO group '"+y+"' label '"+w+"' is a master playlist"),v.isMasterPlaylist=!0,T=null):i==="vhs-json"&&v.playlists?T=new ho(v.playlists[0],n,s):v.resolvedUri?T=new ho(v.resolvedUri,n,s):v.playlists&&i==="dash"?T=new Rv(v.playlists[0],n,s,h):T=null,v=H.mergeOptions({id:w,playlistLoader:T},v),Q1[e](e,v.playlistLoader,r),c[y].push(v),typeof u[w]=="undefined"){var k=new H.AudioTrack({id:w,kind:LY(v),enabled:!1,language:v.language,default:v.default,label:w});u[w]=k}}}a.on("error",_f[e](e,r))},SUBTITLES:function(e,r){var n=r.tech,i=r.vhs,a=r.sourceType,s=r.segmentLoaders[e],o=r.requestOptions,l=r.master.mediaGroups,c=r.mediaTypes[e],u=c.groups,d=c.tracks,h=r.masterPlaylistLoader;for(var p in l[e]){u[p]||(u[p]=[]);for(var y in l[e][p])if(!l[e][p][y].forced){var w=l[e][p][y],v=void 0;if(a==="hls")v=new ho(w.resolvedUri,i,o);else if(a==="dash"){var T=w.playlists.filter(function(A){return A.excludeUntil!==1/0});if(!T.length)return;v=new Rv(w.playlists[0],i,o,h)}else a==="vhs-json"&&(v=new ho(w.playlists?w.playlists[0]:w.resolvedUri,i,o));if(w=H.mergeOptions({id:y,playlistLoader:v},w),Q1[e](e,w.playlistLoader,r),u[p].push(w),typeof d[y]=="undefined"){var k=n.addRemoteTextTrack({id:y,kind:"subtitles",default:w.default&&w.autoselect,language:w.language,label:y},!1).track;d[y]=k}}}s.on("error",_f[e](e,r))},"CLOSED-CAPTIONS":function(e,r){var n=r.tech,i=r.master.mediaGroups,a=r.mediaTypes[e],s=a.groups,o=a.tracks;for(var l in i[e]){s[l]||(s[l]=[]);for(var c in i[e][l]){var u=i[e][l][c];if(!!/^(?:CC|SERVICE)/.test(u.instreamId)){var d=n.options_.vhs&&n.options_.vhs.captionServices||{},h={label:c,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(d[h.instreamId]&&(h=H.mergeOptions(h,d[h.instreamId])),h.default===void 0&&delete h.default,s[l].push(H.mergeOptions({id:c},u)),typeof o[c]=="undefined"){var p=n.addRemoteTextTrack({id:h.instreamId,kind:"captions",default:h.default,language:h.language,label:h.label},!1).track;o[c]=p}}}}}},FY=function t(e,r){for(var n=0;n<e.length;n++)if(Gb(r,e[n])||e[n].playlists&&t(e[n].playlists,r))return!0;return!1},BY=function(e,r){return function(n){var i=r.masterPlaylistLoader,a=r.mediaTypes[e].groups,s=i.media();if(!s)return null;var o=null;s.attributes[e]&&(o=a[s.attributes[e]]);var l=Object.keys(a);if(!o)if(e==="AUDIO"&&l.length>1&&Yu(r.master))for(var c=0;c<l.length;c++){var u=a[l[c]];if(FY(u,s)){o=u;break}}else a.main?o=a.main:l.length===1&&(o=a[l[0]]);return typeof n=="undefined"?o:n===null||!o?null:o.filter(function(d){return d.id===n.id})[0]||null}},UY={AUDIO:function(e,r){return function(){var n=r.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,r){return function(){var n=r.mediaTypes[e].tracks;for(var i in n)if(n[i].mode==="showing"||n[i].mode==="hidden")return n[i];return null}}},zY=function(e,r){var n=r.mediaTypes;return function(){var i=n[e].activeTrack();return i?n[e].activeGroup(i):null}},$Y=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(y){jY[y](y,e)});var r=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,a=e.vhs,s=e.segmentLoaders,o=s.AUDIO,l=s.main;["AUDIO","SUBTITLES"].forEach(function(y){r[y].activeGroup=BY(y,e),r[y].activeTrack=UY[y](y,e),r[y].onGroupChanged=RY(y,e),r[y].onGroupChanging=MY(y,e),r[y].onTrackChanged=NY(y,e),r[y].getActiveGroup=zY(y,e)});var c=r.AUDIO.activeGroup();if(c){var u=(c.filter(function(y){return y.default})[0]||c[0]).id;r.AUDIO.tracks[u].enabled=!0,r.AUDIO.onGroupChanged(),r.AUDIO.onTrackChanged();var d=r.AUDIO.getActiveGroup();d.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(y){return r[y].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(y){return r[y].onGroupChanging()})});var h=function(){r.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",h),i.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged),a.on("dispose",function(){i.audioTracks().removeEventListener("change",h),i.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(var p in r.AUDIO.tracks)i.audioTracks().addTrack(r.AUDIO.tracks[p])},VY=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(r){e[r]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:_n,activeTrack:_n,getActiveGroup:_n,onGroupChanged:_n,onTrackChanged:_n,lastTrack_:null,logger_:ji("MediaGroups["+r+"]")}}),e},HY=60*2,pn,qY=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],GY=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},WY=function(e){var r=e.currentPlaylist,n=e.buffered,i=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,l=e.duration,c=e.experimentalBufferBasedABR,u=e.log;if(!a)return H.log.warn("We received no playlist to switch to. Please check your stream."),!1;var d="allowing switch "+(r&&r.id||"null")+" -> "+a.id;if(!r)return u(d+" as current playlist is not set"),!0;if(a.id===r.id)return!1;var h=Boolean(uo(n,i).length);if(!r.endList)return!h&&typeof r.partTargetDuration=="number"?(u("not "+d+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(u(d+" as current playlist is live"),!0);var p=Vb(n,i),y=c?Zt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Zt.MAX_BUFFER_LOW_WATER_LINE;if(l<y)return u(d+" as duration < max low water line ("+l+" < "+y+")"),!0;var w=a.attributes.BANDWIDTH,v=r.attributes.BANDWIDTH;if(w<v&&(!c||p<o)){var T=d+" as next bandwidth < current bandwidth ("+w+" < "+v+")";return c&&(T+=" and forwardBuffer < bufferHighWaterLine ("+p+" < "+o+")"),u(T),!0}if((!c||w>v)&&p>=s){var k=d+" as forwardBuffer >= bufferLowWaterLine ("+p+" >= "+s+")";return c&&(k+=" and next bandwidth > current bandwidth ("+w+" > "+v+")"),u(k),!0}return u("not "+d+" as no switching criteria met"),!1},KY=function(t){ge(e,t);function e(n){var i;i=t.call(this)||this;var a=n.src,s=n.handleManifestRedirects,o=n.withCredentials,l=n.tech,c=n.bandwidth,u=n.externVhs,d=n.useCueTags,h=n.blacklistDuration,p=n.enableLowInitialPlaylist,y=n.sourceType,w=n.cacheEncryptionKeys,v=n.experimentalBufferBasedABR,T=n.experimentalLeastPixelDiffSelector,k=n.captionServices;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");var A=n.maxPlaylistRetries;(A===null||typeof A=="undefined")&&(A=1/0),pn=u,i.experimentalBufferBasedABR=Boolean(v),i.experimentalLeastPixelDiffSelector=Boolean(T),i.withCredentials=o,i.tech_=l,i.vhs_=l.vhs,i.sourceType_=y,i.useCueTags_=d,i.blacklistDuration=h,i.maxPlaylistRetries=A,i.enableLowInitialPlaylist=p,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:A,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=VY(),i.mediaSource=new L.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(Ne(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Ne(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Ne(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=H.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new IY(n),i.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new DY,i.sourceUpdater_=new _O(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new PY;var E={vhs:i.vhs_,parse708captions:n.parse708captions,useDtsForTimestampOffset:n.useDtsForTimestampOffset,captionServices:k,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:c,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:w,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};i.masterPlaylistLoader_=i.sourceType_==="dash"?new Rv(a,i.vhs_,i.requestOptions_):new ho(a,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Nv(H.mergeOptions(E,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new Nv(H.mergeOptions(E,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new kY(H.mergeOptions(E,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),n),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),qY.forEach(function(F){i[F+"_"]=GY.bind(Ne(i),F)}),i.logger_=ji("MPC"),i.triggeredFmp4Usage=!1,i.tech_.preload()==="none"?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var I=i.tech_.preload()==="none"?"play":"loadstart";return i.tech_.one(I,function(){var F=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-F,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}var r=e.prototype;return r.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},r.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},r.appendsToLoadedData_=function(){var i=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return i===-1||a===-1?-1:i+a},r.timeToLoadedData_=function(){return this.timeToLoadedData__},r.checkABR_=function(){var i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,"abr")},r.switchMedia_=function(i,a,s){var o=this.media(),l=o&&(o.id||o.uri),c=i.id||i.uri;l&&l!==c&&(this.logger_("switch media "+l+" -> "+c+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(i,s)},r.startABRTimer_=function(){var i=this;this.stopABRTimer_(),this.abrTimer_=L.setInterval(function(){return i.checkABR_()},250)},r.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(L.clearInterval(this.abrTimer_),this.abrTimer_=null)},r.getAudioTrackPlaylists_=function(){var i=this.master(),a=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return a;var s=i.mediaGroups.AUDIO,o=Object.keys(s),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var c=s.main||o.length&&s[o[0]];for(var u in c)if(c[u].default){l={label:u};break}}if(!l)return a;var d=[];for(var h in s)if(s[h][l.label]){var p=s[h][l.label];if(p.playlists&&p.playlists.length)d.push.apply(d,p.playlists);else if(p.uri)d.push(p);else if(i.playlists.length)for(var y=0;y<i.playlists.length;y++){var w=i.playlists[y];w.attributes&&w.attributes.AUDIO&&w.attributes.AUDIO===h&&d.push(w)}}return d.length?d:a},r.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=i.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Iv(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,a.endList&&i.tech_.preload()!=="none"&&(i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load()),$Y({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),a),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var a=i.masterPlaylistLoader_.media();if(!a){i.excludeUnsupportedVariants_();var s;if(i.enableLowInitialPlaylist&&(s=i.selectInitialPlaylist()),s||(s=i.selectPlaylist()),!s||!i.shouldSwitchToMedia_(s))return;i.initialMedia_=s,i.switchMedia_(i.initialMedia_,"initial");var o=i.sourceType_==="vhs-json"&&i.initialMedia_.segments;if(!o)return;a=i.initialMedia_}i.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=i.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Iv(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=i.masterPlaylistLoader_.media();if(a.lastExcludeReason_!=="playlist-unchanged"){var s=i.stuckAtPlaylistEnd_(a);s&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},r.handleUpdatedMediaPlaylist=function(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},r.triggerPresenceUsage_=function(i,a){var s=i.mediaGroups||{},o=!0,l=Object.keys(s.AUDIO);for(var c in s.AUDIO)for(var u in s.AUDIO[c]){var d=s.AUDIO[c][u];d.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),pn.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(s.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},r.shouldSwitchToMedia_=function(i){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),c=this.tech_.buffered();return WY({buffered:c,currentTime:s,currentPlaylist:a,nextPlaylist:i,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},r.setupSegmentLoaderListeners_=function(){var i=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var s=i.selectPlaylist();i.shouldSwitchToMedia_(s)&&i.switchMedia_(s,"bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},HY))});var a=function(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var o=i.getCodecsOrExclude_();!o||i.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},r.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},r.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},r.smoothQualityChange_=function(i){i===void 0&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},r.fastQualityChange_=function(i){var a=this;if(i===void 0&&(i=this.selectPlaylist()),i===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){H.browser.IE_VERSION||H.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())})},r.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0))return this.tech_.setCurrentTime(i.end(i.length-1))}},r.setupFirstPlay=function(){var i=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(H.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(s.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},r.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();typeof i!="undefined"&&typeof i.then=="function"&&i.then(null,function(a){})}this.trigger("sourceopen")},r.handleSourceEnded_=function(){if(!!this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(!(!i||!i.length)){var a=this.duration();i[i.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},r.handleDurationChange_=function(){this.tech_.trigger("durationchange")},r.onEndOfStream=function(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?i=i&&this.audioSegmentLoader_.ended_:i=this.audioSegmentLoader_.ended_}!i||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},r.stuckAtPlaylistEnd_=function(i){var a=this.seekable();if(!a.length)return!1;var s=this.syncController_.getExpiredTime(i,this.duration());if(s===null)return!1;var o=pn.Playlist.playlistEnd(i,s),l=this.tech_.currentTime(),c=this.tech_.buffered();if(!c.length)return o-l<=Ki;var u=c.end(c.length-1);return u-l<=Ki&&o-u<=Ki},r.blacklistCurrentPlaylist=function(i,a){i===void 0&&(i={});var s=i.playlist||this.masterPlaylistLoader_.media();if(a=a||i.blacklistDuration||this.blacklistDuration,!s){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(zp),c=l.length===1&&l[0]===s;if(o.length===1&&a!==1/0)return H.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(c);if(c){var u=!1;o.forEach(function(T){if(T!==s){var k=T.excludeUntil;typeof k!="undefined"&&k!==1/0&&(u=!0,delete T.excludeUntil)}}),u&&(H.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var d;s.playlistErrors_>this.maxPlaylistRetries?d=1/0:d=Date.now()+a*1e3,s.excludeUntil=d,i.reason&&(s.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var h=this.selectPlaylist();if(!h){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var p=i.internal?this.logger_:H.log.warn,y=i.message?" "+i.message:"";p((i.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(y+" Switching to playlist "+h.id+".")),h.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),h.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var w=h.targetDuration/2*1e3||5*1e3,v=typeof h.lastRequest=="number"&&Date.now()-h.lastRequest<=w;return this.switchMedia_(h,"exclude",c||v)},r.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},r.delegateLoaders_=function(i,a){var s=this,o=[],l=i==="all";(l||i==="main")&&o.push(this.masterPlaylistLoader_);var c=[];(l||i==="audio")&&c.push("AUDIO"),(l||i==="subtitle")&&(c.push("CLOSED-CAPTIONS"),c.push("SUBTITLES")),c.forEach(function(u){var d=s.mediaTypes_[u]&&s.mediaTypes_[u].activePlaylistLoader;d&&o.push(d)}),["main","audio","subtitle"].forEach(function(u){var d=s[u+"SegmentLoader_"];d&&(i===u||i==="all")&&o.push(d)}),o.forEach(function(u){return a.forEach(function(d){typeof u[d]=="function"&&u[d]()})})},r.setCurrentTime=function(i){var a=uo(this.tech_.buffered(),i);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(a&&a.length)return i;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},r.duration=function(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:pn.Playlist.duration(i):1/0:0},r.seekable=function(){return this.seekable_},r.onSyncInfoUpdate_=function(){var i;if(!!this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(!!a){var s=this.syncController_.getExpiredTime(a,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,l=pn.Playlist.seekable(a,s,pn.Playlist.liveEdgeDelay(o,a));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(a,this.duration()),s===null||(i=pn.Playlist.seekable(a,s,pn.Playlist.liveEdgeDelay(o,a)),i.length===0)))){var c,u;this.seekable_&&this.seekable_.length&&(c=this.seekable_.end(0),u=this.seekable_.start(0)),i?i.start(0)>l.end(0)||l.start(0)>i.end(0)?this.seekable_=l:this.seekable_=H.createTimeRanges([[i.start(0)>l.start(0)?i.start(0):l.start(0),i.end(0)<l.end(0)?i.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===c&&this.seekable_.start(0)===u)&&(this.logger_("seekable updated ["+FP(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},r.updateDuration=function(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,i),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(i){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}var s=this.tech_.buffered(),o=pn.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},r.dispose=function(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s=i.mediaTypes_[a].groups;for(var o in s)s[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},r.master=function(){return this.masterPlaylistLoader_.master},r.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},r.areMediaTypesKnown_=function(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=i?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!s)},r.getCodecsOrExclude_=function(){var i=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};a.video=a.main;var s=Sc(this.master(),this.media()),o={},l=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(o.video=s.video||a.main.videoCodec||kq),a.main.isMuxed&&(o.video+=","+(s.audio||a.main.audioCodec||MT)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||l)&&(o.audio=s.audio||a.main.audioCodec||a.audio.audioCodec||MT,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),!o.audio&&!o.video){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(v,T){return v?dh(T):$g(T)},u={},d;if(["video","audio"].forEach(function(w){if(o.hasOwnProperty(w)&&!c(a[w].isFmp4,o[w])){var v=a[w].isFmp4?"browser":"muxer";u[v]=u[v]||[],u[v].push(o[w]),w==="audio"&&(d=v)}}),l&&d&&this.media().attributes.AUDIO){var h=this.media().attributes.AUDIO;this.master().playlists.forEach(function(w){var v=w.attributes&&w.attributes.AUDIO;v===h&&w!==i.media()&&(w.excludeUntil=1/0)}),this.logger_("excluding audio group "+h+" as "+d+' does not support codec(s): "'+o.audio+'"')}if(Object.keys(u).length){var p=Object.keys(u).reduce(function(w,v){return w&&(w+=", "),w+=v+' does not support codec(s): "'+u[v].join(",")+'"',w},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:p,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var y=[];if(["video","audio"].forEach(function(w){var v=($i(i.sourceUpdater_.codecs[w]||"")[0]||{}).type,T=($i(o[w]||"")[0]||{}).type;v&&T&&v.toLowerCase()!==T.toLowerCase()&&y.push('"'+i.sourceUpdater_.codecs[w]+'" -> "'+o[w]+'"')}),y.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+y.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return o},r.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&!!this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(!!i){this.sourceUpdater_.createSourceBuffers(i);var a=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},r.excludeUnsupportedVariants_=function(){var i=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(o){var l=a[o];if(s.indexOf(l.id)===-1){s.push(l.id);var c=Sc(i.master,l),u=[];c.audio&&!$g(c.audio)&&!dh(c.audio)&&u.push("audio codec "+c.audio),c.video&&!$g(c.video)&&!dh(c.video)&&u.push("video codec "+c.video),c.text&&c.text==="stpp.ttml.im1t"&&u.push("text codec "+c.text),u.length&&(l.excludeUntil=1/0,i.logger_("excluding "+l.id+" for unsupported: "+u.join(", ")))}})},r.excludeIncompatibleVariants_=function(i){var a=this,s=[],o=this.master().playlists,l=yf($i(i)),c=U1(l),u=l.video&&$i(l.video)[0]||null,d=l.audio&&$i(l.audio)[0]||null;Object.keys(o).forEach(function(h){var p=o[h];if(!(s.indexOf(p.id)!==-1||p.excludeUntil===1/0)){s.push(p.id);var y=[],w=Sc(a.masterPlaylistLoader_.master,p),v=U1(w);if(!(!w.audio&&!w.video)){if(v!==c&&y.push('codec count "'+v+'" !== "'+c+'"'),!a.sourceUpdater_.canChangeType()){var T=w.video&&$i(w.video)[0]||null,k=w.audio&&$i(w.audio)[0]||null;T&&u&&T.type.toLowerCase()!==u.type.toLowerCase()&&y.push('video codec "'+T.type+'" !== "'+u.type+'"'),k&&d&&k.type.toLowerCase()!==d.type.toLowerCase()&&y.push('audio codec "'+k.type+'" !== "'+d.type+'"')}y.length&&(p.excludeUntil=1/0,a.logger_("blacklisting "+p.id+": "+y.join(" && ")))}}})},r.updateAdCues_=function(i){var a=0,s=this.seekable();s.length&&(a=s.start(0)),CY(i,this.cueTagsTrack_,a)},r.goalBufferLength=function(){var i=this.tech_.currentTime(),a=Zt.GOAL_BUFFER_LENGTH,s=Zt.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,Zt.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+i*s,o)},r.bufferLowWaterLine=function(){var i=this.tech_.currentTime(),a=Zt.BUFFER_LOW_WATER_LINE,s=Zt.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,Zt.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(a,Zt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+i*s,this.experimentalBufferBasedABR?l:o)},r.bufferHighWaterLine=function(){return Zt.BUFFER_HIGH_WATER_LINE},e}(H.EventTarget),YY=function(e,r,n){return function(i){var a=e.master.playlists[r],s=qb(a),o=zp(a);return typeof i=="undefined"?o:(i?delete a.disabled:a.disabled=!0,i!==o&&!s&&(n(),i?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),i)}},XY=function(e,r,n){var i=e.masterPlaylistController_,a=e.options_.smoothQualityChange,s=a?"smooth":"fast",o=i[s+"QualityChange_"].bind(i);if(r.attributes){var l=r.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=r.attributes.BANDWIDTH}this.codecs=Sc(i.master(),r),this.playlist=r,this.id=n,this.enabled=YY(e.playlists,r.id,o)},QY=function(e){e.representations=function(){var r=e.masterPlaylistController_.master(),n=Yu(r)?e.masterPlaylistController_.getAudioTrackPlaylists_():r.playlists;return n?n.filter(function(i){return!qb(i)}).map(function(i,a){return new XY(e,i,i.id)}):[]}},J1=["seeking","seeked","pause","playing","error"],JY=function(){function t(r){var n=this;this.masterPlaylistController_=r.masterPlaylistController,this.tech_=r.tech,this.seekable=r.seekable,this.allowSeeksWithinUnsafeLiveWindow=r.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=r.liveRangeSafeTimeDelta,this.media=r.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=ji("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},a=function(){return n.monitorCurrentTime_()},s=function(){return n.techWaiting_()},o=function(){return n.cancelTimer_()},l=this.masterPlaylistController_,c=["main","subtitle","audio"],u={};c.forEach(function(h){u[h]={reset:function(){return n.resetSegmentDownloads_(h)},updateend:function(){return n.checkSegmentDownloads_(h)}},l[h+"SegmentLoader_"].on("appendsdone",u[h].updateend),l[h+"SegmentLoader_"].on("playlistupdate",u[h].reset),n.tech_.on(["seeked","seeking"],u[h].reset)});var d=function(p){["main","audio"].forEach(function(y){l[y+"SegmentLoader_"][p]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=function(){return d("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(J1,o),this.tech_.on("canplay",a),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",s),n.tech_.off(J1,o),n.tech_.off("canplay",a),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),c.forEach(function(h){l[h+"SegmentLoader_"].off("appendsdone",u[h].updateend),l[h+"SegmentLoader_"].off("playlistupdate",u[h].reset),n.tech_.off(["seeked","seeking"],u[h].reset)}),n.checkCurrentTimeTimeout_&&L.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var e=t.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&L.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=L.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(n){var i=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=i.buffered_()},e.checkSegmentDownloads_=function(n){var i=this.masterPlaylistController_,a=i[n+"SegmentLoader_"],s=a.buffered_(),o=WW(this[n+"Buffered_"],s);if(this[n+"Buffered_"]=s,o){this.resetSegmentDownloads_(n);return}this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:ss(s)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),n!=="subtitle"&&i.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var n=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===n&&(!i.length||n+Ki>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var n=this.tech_.seeking();if(!n)return!1;var i=this.seekable(),a=this.tech_.currentTime(),s=this.afterSeekableWindow_(i,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var l=i.end(i.length-1);o=l}if(this.beforeSeekableWindow_(i,a)){var c=i.start(0);o=c+(c===i.end(0)?0:Ki)}if(typeof o!="undefined")return this.logger_("Trying to seek outside of seekable at time "+a+" with "+("seekable range "+FP(i)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var u=this.masterPlaylistController_.sourceUpdater_,d=this.tech_.buffered(),h=u.audioBuffer?u.audioBuffered():null,p=u.videoBuffer?u.videoBuffered():null,y=this.media(),w=y.partTargetDuration?y.partTargetDuration:(y.targetDuration-Ea)*2,v=[h,p],T=0;T<v.length;T++)if(!!v[T]){var k=Vb(v[T],a);if(k<w)return!1}var A=Wd(d,a);return A.length===0?!1:(o=A.start(0)+Ki,this.logger_("Buffered region starts ("+A.start(0)+") "+(" just beyond seek point ("+a+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),i=this.tech_.buffered(),a=uo(i,n);if(a.length&&n+3<=a.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region "+("["+a.start(0)+" -> "+a.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var n=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(n,i)){var a=n.end(n.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:i});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var c=Wd(o,i);if(c.length>0){var u=c.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+u+", seeking "+("to "+c.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),u*1e3,i),!0}return!1},e.afterSeekableWindow_=function(n,i,a,s){if(s===void 0&&(s=!1),!n.length)return!1;var o=n.end(n.length-1)+Ki,l=!a.endList;return l&&s&&(o=n.end(n.length-1)+a.targetDuration*3),i>o},e.beforeSeekableWindow_=function(n,i){return!!(n.length&&n.start(0)>0&&i<n.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(n){var i=n.videoBuffered,a=n.audioBuffered,s=n.currentTime;if(!!i){var o;if(i.length&&a.length){var l=uo(i,s-3),c=uo(i,s),u=uo(a,s);u.length&&!c.length&&l.length&&(o={start:l.end(0),end:u.end(0)})}else{var d=Wd(i,s);d.length||(o=this.gapFromVideoUnderflow_(i,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},e.skipTheGap_=function(n){var i=this.tech_.buffered(),a=this.tech_.currentTime(),s=Wd(i,a);this.cancelTimer_(),!(s.length===0||a!==n)&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",n,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Ea),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(n,i){for(var a=HW(n),s=0;s<a.length;s++){var o=a.start(s),l=a.end(s);if(i-o<4&&i-o>2)return{start:o,end:l}}return null},t}(),ZY={errorInterval:30,getSource:function(e){var r=this.tech({IWillNotUseThisInPlugins:!0}),n=r.currentSource_||this.currentSource();return e(n)}},eX=function t(e,r){var n=0,i=0,a=H.mergeOptions(ZY,r);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){i&&e.currentTime(i)},o=function(h){h!=null&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(h),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-n<a.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){H.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),a.getSource.call(e,o)},c=function d(){e.off("loadedmetadata",s),e.off("error",l),e.off("dispose",d)},u=function(h){c(),t(e,h)};e.on("error",l),e.on("dispose",c),e.reloadSourceOnError=u},tX=function(e){eX(this,e)},xO="2.14.3",rX="6.0.1",iX="0.21.1",nX="4.7.1",aX="3.1.3",ur={PlaylistLoader:ho,Playlist:Hr,utils:vK,STANDARD_PLAYLIST_SELECTOR:$1,INITIAL_PLAYLIST_SELECTOR:nY,lastBandwidthSelector:$1,movingAverageBandwidthSelector:rY,comparePlaylistBandwidth:Yb,comparePlaylistResolution:tY,xhr:ZP()};Object.keys(Zt).forEach(function(t){Object.defineProperty(ur,t,{get:function(){return H.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),Zt[t]},set:function(r){if(H.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),typeof r!="number"||r<0){H.log.warn("value of Vhs."+t+" must be greater than or equal to 0");return}Zt[t]=r}})});var TO="videojs-vhs",SO=function(e,r){for(var n=r.media(),i=-1,a=0;a<e.length;a++)if(e[a].id===n.id){i=a;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},sX=function(e,r){r.representations().forEach(function(n){e.addQualityLevel(n)}),SO(e,r.playlists)};ur.canPlaySource=function(){return H.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var oX=function(e,r,n){if(!e)return e;var i={};r&&r.attributes&&r.attributes.CODECS&&(i=yf($i(r.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var a=tu(i.video),s=tu(i.audio),o={};for(var l in e)o[l]={},s&&(o[l].audioContentType=s),a&&(o[l].videoContentType=a),r.contentProtection&&r.contentProtection[l]&&r.contentProtection[l].pssh&&(o[l].pssh=r.contentProtection[l].pssh),typeof e[l]=="string"&&(o[l].url=e[l]);return H.mergeOptions(e,o)},lX=function(e,r){return e.reduce(function(n,i){if(!i.contentProtection)return n;var a=r.reduce(function(s,o){var l=i.contentProtection[o];return l&&l.pssh&&(s[o]={pssh:l.pssh}),s},{});return Object.keys(a).length&&n.push(a),n},[])},cX=function(e){var r=e.player,n=e.sourceKeySystems,i=e.audioMedia,a=e.mainPlaylists;if(!r.eme.initializeMediaKeys)return Promise.resolve();var s=i?a.concat([i]):a,o=lX(s,Object.keys(n)),l=[],c=[];return o.forEach(function(u){c.push(new Promise(function(d,h){r.tech_.one("keysessioncreated",d)})),l.push(new Promise(function(d,h){r.eme.initializeMediaKeys({keySystems:u},function(p){if(p){h(p);return}d()})}))}),Promise.race([Promise.all(l),Promise.race(c)])},uX=function(e){var r=e.player,n=e.sourceKeySystems,i=e.media,a=e.audioMedia,s=oX(n,i,a);return s?(r.currentSource().keySystems=s,s&&!r.eme?(H.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},kO=function(){if(!L.localStorage)return null;var e=L.localStorage.getItem(TO);if(!e)return null;try{return JSON.parse(e)}catch{return null}},dX=function(e){if(!L.localStorage)return!1;var r=kO();r=r?H.mergeOptions(r,e):e;try{L.localStorage.setItem(TO,JSON.stringify(r))}catch{return!1}return r},hX=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};ur.supportsNativeHls=function(){if(!ce||!ce.createElement)return!1;var t=ce.createElement("video");if(!H.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(r){return/maybe|probably/i.test(t.canPlayType(r))})}();ur.supportsNativeDash=function(){return!ce||!ce.createElement||!H.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(ce.createElement("video").canPlayType("application/dash+xml"))}();ur.supportsTypeNatively=function(t){return t==="hls"?ur.supportsNativeHls:t==="dash"?ur.supportsNativeDash:!1};ur.isSupported=function(){return H.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var fX=H.getComponent("Component"),Qb=function(t){ge(e,t);function e(n,i,a){var s;if(s=t.call(this,i,H.mergeOptions(a.hls,a.vhs))||this,a.hls&&Object.keys(a.hls).length&&H.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof a.initialBandwidth=="number"&&(s.options_.bandwidth=a.initialBandwidth),s.logger_=ji("VhsHandler"),i.options_&&i.options_.playerId){var o=H(i.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return H.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Ne(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return H.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Ne(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return H.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ne(s)},configurable:!0}),s.player_=o}if(s.tech_=i,s.source_=n,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(ce,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var c=ce.fullscreenElement||ce.webkitFullscreenElement||ce.mozFullScreenElement||ce.msFullscreenElement;c&&c.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var r=e.prototype;return r.setOptions_=function(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var a=kO();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Zt.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Zt.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof i.source_[s]!="undefined"&&(i.options_[s]=i.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},r.src=function(i,a){var s=this;if(!!i){this.setOptions_(),this.options_.src=hX(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ur,this.options_.sourceType=BI(a),this.options_.seekTo=function(c){s.tech_.setCurrentTime(c)},this.options_.smoothQualityChange&&H.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new KY(this.options_);var o=H.mergeOptions({liveRangeSafeTimeDelta:Ki},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new JY(o),this.masterPlaylistController_.on("error",function(){var c=H.players[s.tech_.options_.playerId],u=s.masterPlaylistController_.error;typeof u=="object"&&!u.code?u.code=3:typeof u=="string"&&(u={message:u,code:3}),c.error(u)});var l=this.options_.experimentalBufferBasedABR?ur.movingAverageBandwidthSelector(.55):ur.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ur.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(u){this.masterPlaylistController_.selectPlaylist=u.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(u){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=u,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var u=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,d=L.navigator.connection||L.navigator.mozConnection||L.navigator.webkitConnection,h=1e7;if(this.options_.useNetworkInformationApi&&d){var p=d.downlink*1e3*1e3;p>=h&&u>=h?u=Math.max(u,p):u=p}return u},set:function(u){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=u,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var u=1/(this.bandwidth||1),d;this.throughput>0?d=1/this.throughput:d=0;var h=Math.floor(1/(u+d));return h},set:function(){H.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return ss(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return ss(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&dX({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){QY(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=L.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},r.createKeySessions_=function(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),cX({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){i.logger_("error while creating EME key session",s),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})},r.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},r.setupEme_=function(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=uX({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=i.masterPlaylistController_.master();if(!(!l||!l.playlists)){var c=[];if(l.playlists.forEach(function(d){d&&d.attributes&&d.attributes.RESOLUTION&&d.attributes.RESOLUTION.height>=720&&(!d.excludeUntil||d.excludeUntil<1/0)&&(d.excludeUntil=1/0,c.push(d))}),c.length){var u;(u=H.log).warn.apply(u,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(c)),i.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),H.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},r.setupQualityLevels_=function(){var i=this,a=H.players[this.tech_.options_.playerId];!a||!a.qualityLevels||this.qualityLevels_||(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){sX(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){SO(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":xO,"mux.js":rX,"mpd-parser":iX,"m3u8-parser":nX,"aes-decrypter":aX}},r.version=function(){return this.constructor.version()},r.canChangeType=function(){return _O.canChangeType()},r.play=function(){this.masterPlaylistController_.play()},r.setCurrentTime=function(i){this.masterPlaylistController_.setCurrentTime(i)},r.duration=function(){return this.masterPlaylistController_.duration()},r.seekable=function(){return this.masterPlaylistController_.seekable()},r.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&L.URL.revokeObjectURL&&(L.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),t.prototype.dispose.call(this)},r.convertToProgramTime=function(i,a){return SK({playlist:this.masterPlaylistController_.media(),time:i,callback:a})},r.seekToProgramTime=function(i,a,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),kK({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},e}(fX),$p={name:"videojs-http-streaming",VERSION:xO,canHandleSource:function(e,r){r===void 0&&(r={});var n=H.mergeOptions(H.options,r);return $p.canPlayType(e.type,n)},handleSource:function(e,r,n){n===void 0&&(n={});var i=H.mergeOptions(H.options,n);return r.vhs=new Qb(e,r,i),H.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return H.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),r.vhs},configurable:!0}),r.vhs.xhr=ZP(),r.vhs.src(e.src,e.type),r.vhs},canPlayType:function(e,r){r===void 0&&(r={});var n=H.mergeOptions(H.options,r),i=n.vhs;i=i===void 0?{}:i;var a=i.overrideNative,s=a===void 0?!H.browser.IS_ANY_SAFARI:a,o=n.hls;o=o===void 0?{}:o;var l=o.overrideNative,c=l===void 0?!1:l,u=BI(e),d=u&&(!ur.supportsTypeNatively(u)||c||s);return d?"maybe":""}},pX=function(){return dh("avc1.4d400d,mp4a.40.2")};pX()&&H.getTech("Html5").registerSourceHandler($p,0);H.VhsHandler=Qb;Object.defineProperty(H,"HlsHandler",{get:function(){return H.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Qb},configurable:!0});H.VhsSourceHandler=$p;Object.defineProperty(H,"HlsSourceHandler",{get:function(){return H.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),$p},configurable:!0});H.Vhs=ur;Object.defineProperty(H,"Hls",{get:function(){return H.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),ur},configurable:!0});H.use||(H.registerComponent("Hls",ur),H.registerComponent("Vhs",ur));H.options.vhs=H.options.vhs||{};H.options.hls=H.options.hls||{};if(!H.getPlugin||!H.getPlugin("reloadSourceOnError")){var gX=H.registerPlugin||H.plugin;gX("reloadSourceOnError",tX)}const mX={name:"VideoPlayer",props:{options:{type:Object,default(){return{}}}},data(){return{player:null}},mounted(){this.player=H(this.$refs.videoPlayer,this.options,()=>{this.player.log("onPlayerReady",this)})},beforeDestroy(){this.player&&this.player.dispose()}},vX={ref:"videoPlayer",class:"video-js"};function yX(t,e,r,n,i,a){return Ye(),Kt("div",null,[ne("video",vX,null,512)])}var bX=y0(mX,[["render",yX]]);const wX={name:"VideoExample",components:{VideoPlayer:bX},data(){return{videoOptions:{autoplay:"muted",controls:!1,loop:!0,sources:[{src:"https://firebasestorage.googleapis.com/v0/b/thecinemat-3606a.appspot.com/o/incoherenceWebsiteMP4.mp4?alt=media&token=9fa7e0a1-52d0-420d-a2f0-0d9240b1e386",type:"video/mp4"}]}}}},_X={class:"swiper-slide"},xX={class:"card absolute w-50 bottom-5 left-[570px] bg-primary text-primary-content"},TX=ne("div",{class:"card-body p-4"},[ne("h1",{class:"card-title italic text-md"},"Incoherence"),ne("p",{class:"text-xs"},"Dir. Emily Rodriguez")],-1),SX=[TX];function kX(t,e,r,n,i,a){const s=Dc("video-player"),o=Dc("swiper"),l=MR("auto-animate");return Ye(),zt(o,{slidesPerView:"auto",spaceBetween:30,pagination:{clickable:!0},autoplay:{delay:2500,disableOnInteraction:!1},modules:t.modules,class:"mySwiper"},{default:Ke(()=>[ne("div",_X,[xe(s,{options:i.videoOptions},null,8,["options"]),LR((Ye(),Kt("div",xX,SX)),[[l]])])]),_:1},8,["modules"])}var EX=y0(wX,[["render",kX]]);var CX="/theCinemat/assets/annelise+camera.bdc1e8de.jpg",AX="/theCinemat/assets/charlie+Jonas.6d67ce13.jpg",IX="/theCinemat/assets/ciara+slate-1.b95d9912.jpg",PX="/theCinemat/assets/eli+slate.76c3d49a.jpg",OX="/theCinemat/assets/Emily+light.37062a7c.jpg",DX="/theCinemat/assets/Renee+looking+at+monitor.e5d317a7.jpg";const LX={components:{Swiper:b7,SwiperSlide:w7},setup(){return{onSwiper:r=>{console.log(r)},onSlideChange:()=>{console.log("slide change")},modules:[l7,c7,u7,d7,h7]}}},RX=ne("img",{src:CX},null,-1),MX=ne("img",{src:AX},null,-1),NX=ne("img",{src:IX},null,-1),jX=ne("img",{src:PX},null,-1),FX=ne("img",{src:OX},null,-1),BX=ne("img",{src:DX},null,-1);function UX(t,e,r,n,i,a){const s=Dc("swiper-slide"),o=Dc("swiper");return Ye(),zt(o,{modules:n.modules,"slides-per-view":"auto","space-between":50,loop:!0,autoplay:{delay:2500,disableOnInteraction:!1},onSwiper:n.onSwiper,onSlideChange:n.onSlideChange},{default:Ke(()=>[xe(s,{class:"swiper-slide"},{default:Ke(()=>[RX]),_:1}),xe(s,{class:"swiper-slide"},{default:Ke(()=>[MX]),_:1}),xe(s,{class:"swiper-slide"},{default:Ke(()=>[NX]),_:1}),xe(s,{class:"swiper-slide"},{default:Ke(()=>[jX]),_:1}),xe(s,{class:"swiper-slide"},{default:Ke(()=>[FX]),_:1}),xe(s,{class:"swiper-slide"},{default:Ke(()=>[BX]),_:1})]),_:1},8,["modules","onSwiper","onSlideChange"])}var zX=y0(LX,[["render",UX]]);const $X={class:"relative bg-gray-50 overflow-hidden"},VX=fu('<div class="block absolute inset-y-0 h-full w-full" aria-hidden="true"><div class="relative h-full max-w-7xl mx-auto"><svg class="absolute right-full transform translate-y-1/4 translate-x-1/4 lg:translate-x-1/2" width="404" height="784" fill="none" viewBox="0 0 404 784"><defs><pattern id="f210dbf6-a58d-4871-961e-36d5016a0f49" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect x="0" y="0" width="4" height="4" class="text-gray-200" fill="currentColor"></rect></pattern></defs><rect width="404" height="784" fill="url(#f210dbf6-a58d-4871-961e-36d5016a0f49)"></rect></svg><svg class="absolute left-full transform -translate-y-3/4 -translate-x-1/4 md:-translate-y-1/2 lg:-translate-x-1/2" width="404" height="784" fill="none" viewBox="0 0 404 784"><defs><pattern id="5d0dd344-b041-4d26-bec4-8d33ea57ec9b" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect x="0" y="0" width="4" height="4" class="text-gray-200" fill="currentColor"></rect></pattern></defs><rect width="404" height="784" fill="url(#5d0dd344-b041-4d26-bec4-8d33ea57ec9b)"></rect></svg></div></div>',1),HX={class:"relative"},qX={class:"flex flex-row flex-wrap justify-center lg:justify-start lg:flex-nowrap min-h-[1000px] lg:min-h-[500px]"},GX=fu('<main class="absolute z-20 mt-16 px-12 sm:px-4 sm:mt-24 max-w-xl lg:ml-16 xl:ml-36 pt-6 pb-16 sm:pb-24"><div class="text-center"><h1 class=""><img class="block xl:inline" src="'+aV+'" alt=""></h1><p class="pt-6 mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">Yale University\u2019s only student-led production company with the mission to provide a hands-on education in the craft of filmmaking.</p><div class="mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8"><div class="rounded-md shadow"><a href="#" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-light hover:bg-primary md:py-4 md:text-lg md:px-10"> Join a set </a></div><div class="mt-3 rounded-md shadow sm:mt-0 sm:ml-3"><a href="#" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-primary-light bg-white hover:bg-gray-50 md:py-4 md:text-lg md:px-10"> Attend a workshop </a></div></div></div></main><div class="flex-1 dummylol"></div>',2),WX={class:"flex flex-1 lg:w-1/2"},KX=ne("div",null,[ne("svg",{class:"hidden lg:block absolute z-10 h-full w-40 text-gray-50",fill:"currentColor",viewBox:"0 0 100 100",preserveAspectRatio:"none","aria-hidden":"true"},[ne("polygon",{points:"0,0 100,0 50,100 0,100"})]),ne("svg",{class:"hidden lg:block absolute z-10 h-full w-40 text-gray-50",fill:"currentColor",viewBox:"0 0 100 100",preserveAspectRatio:"none","aria-hidden":"true"},[ne("polygon",{points:"50,0 100,0 50,100 0,100"})])],-1),YX={class:"mt-12 sm:mt-0 lg:mx-auto lg:grid lg:max-w-7xl lg:grid-cols-2 lg:items-start lg:gap-24 lg:px-8"},XX={class:"relative sm:py-16 lg:py-0"},QX=fu('<div aria-hidden="true" class="hidden sm:block lg:absolute lg:inset-y-0 lg:right-0 lg:w-screen"><div class="absolute inset-y-0 right-1/2 w-full rounded-r-3xl bg-gray-50 lg:right-72"></div><svg class="absolute top-8 left-1/2 -ml-3 lg:-right-8 lg:left-auto lg:top-12" width="404" height="392" fill="none" viewBox="0 0 404 392"><defs><pattern id="02f20b47-fd69-4224-a62a-4c9de5c763f7" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect x="0" y="0" width="4" height="4" class="text-gray-200" fill="currentColor"></rect></pattern></defs><rect width="404" height="392" fill="url(#02f20b47-fd69-4224-a62a-4c9de5c763f7)"></rect></svg></div>',1),JX={class:"relative mx-auto max-w-md px-6 sm:max-w-3xl lg:max-w-none lg:px-0 lg:py-20"},ZX={class:"z-10 relative overflow-hidden rounded-2xl shadow-xl"},eQ=fu('<div class="relative mx-auto max-w-md px-6 sm:max-w-3xl lg:px-0"><div class="pt-12 sm:pt-0 lg:pt-20"><h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">On a mission to empower students</h2><div class="mt-6 space-y-6 text-gray-500"><p class="text-lg">The Cinemat is more than a student organization. It\u2019s a social enterprise.</p><p class="text-base leading-7">Our model prioritizes mentorship, community, and kindness. The base of our programming starts around technical workshops, providing educational equity to all our members.</p><p class="text-base leading-7">As members increase their technical skills, our programming expands to provide on-set opportunities through the production of narrative short films. Members get hands-on experience working on a film set and get the opportunity to participate on our own the 24-hour film festival.</p><p class="text-base leading-7">We also collaborate with local non-profits to create videos that raise awareness about important social issues. This provides members with an opportunity to apply their technical skills to make a positive impact on the community while also learning about the non-profits&#39; mission.</p><p class="text-base leading-7">Want to join the movement? </p></div></div><div class="mt-10"><div class="mt-10"><a href="/about" class="text-lg font-medium text-indigo-600"> Learn more about membership <span aria-hidden="true"> \u2192</span></a></div></div></div>',1),tQ=ne("div",{class:"relative bg-gray-50 sm:py-6"},null,-1),rQ={__name:"HomeView",setup(t){return(e,r)=>(Ye(),Kt(St,null,[ne("div",$X,[VX,ne("div",HX,[ne("div",qX,[GX,ne("div",WX,[KX,ne("div",null,[xe(EX,{class:"w-screen"})])])])]),ne("div",YX,[ne("div",XX,[QX,ne("div",JX,[ne("div",ZX,[xe(zX,{class:"z-0"})])])]),eQ])]),tQ],64))}},iQ=rj({history:bN("/theCinemat/"),routes:[{path:"/:pathMatch(.*)*",component:()=>ui(()=>import("./PathNotFoundView.f3bde111.js"),[])},{path:"/",name:"home",component:rQ},{path:"/about",name:"about",component:()=>ui(()=>import("./AboutView.087ca47c.js"),[])},{path:"/projects",name:"projects",component:()=>ui(()=>import("./AllProjects.fdbb859d.js"),["assets/AllProjects.fdbb859d.js","assets/disclosure.a365ea1f.js"])},{path:"/opportunities/filmmakers",name:"opportunitiesFilmmakers",component:()=>ui(()=>import("./OpportunitiesFilmmakersView.d8d3fd99.js"),["assets/OpportunitiesFilmmakersView.d8d3fd99.js","assets/OpportunitiesFilmmakersView.c5b14b29.css"])},{path:"/opportunities/actors",name:"opportunitiesActors",component:()=>ui(()=>import("./OpportunitiesActorsView.37d6eeba.js"),[])},{path:"/screenings",name:"screenings",component:()=>ui(()=>import("./ScreeningsView.d056fad4.js"),[])},{path:"/events/calendar",name:"calendar",component:()=>ui(()=>import("./EventsView.7d640344.js"),[])},{path:"/resources",name:"resources",component:()=>ui(()=>import("./StudentResourcesView.05c20f7e.js"),["assets/StudentResourcesView.05c20f7e.js","assets/disclosure.a365ea1f.js"])},{path:"/create",name:"create",component:()=>ui(()=>import("./CreateView.8ad05154.js"),[]),beforeEnter:t=>va.getters.user.loggedIn===!1?(alert("Log-in with your netId!"),{name:"home"}):!0},{path:"/edit",name:"edit",component:()=>ui(()=>import("./EditView.86c7c2d5.js"),[]),beforeEnter:t=>va.getters.user.loggedIn===!1?(alert("Log-in with your netId!"),{name:"home"}):!0},{path:"/edit/:id",name:"EditOne",props:!0,component:()=>ui(()=>import("./EditOneView.84e6c1fd.js"),[]),beforeEnter:t=>va.getters.user.loggedIn===!1?(alert("Log-in with your netId!"),{name:"home"}):!0},{path:"/test",name:"test",component:()=>ui(()=>import("./TestView.cb39c0cc.js"),[])}]}),EO=new Set,Gr=new WeakMap,ko=new WeakMap,Cs=new WeakMap,Bv=new WeakMap,nQ=new WeakMap,Xo=new WeakMap,xf=new WeakMap,oc=new WeakSet;let Ca;const kn="__aa_tgt",Uv="__aa_del",aQ=t=>{const e=uQ(t);e&&e.forEach(r=>dQ(r))},sQ=t=>{t.forEach(e=>{e.target===Ca&&lQ(),Gr.has(e.target)&&Fs(e.target)})};function oQ(t){const e=Bv.get(t);e==null||e.disconnect();let r=Gr.get(t),n=0;const i=5;r||(r=Qo(t),Gr.set(t,r));const{offsetWidth:a,offsetHeight:s}=Ca,l=[r.top-i,a-(r.left+i+r.width),s-(r.top+i+r.height),r.left-i].map(u=>`${-1*Math.floor(u)}px`).join(" "),c=new IntersectionObserver(()=>{++n>1&&Fs(t)},{root:Ca,threshold:1,rootMargin:l});c.observe(t),Bv.set(t,c)}function Fs(t){clearTimeout(xf.get(t));const e=Vp(t),r=typeof e=="function"?500:e.duration;xf.set(t,setTimeout(async()=>{const n=Cs.get(t);(!n||await n.finished)&&(Gr.set(t,Qo(t)),oQ(t))},r))}function lQ(){clearTimeout(xf.get(Ca)),xf.set(Ca,setTimeout(()=>{EO.forEach(t=>PO(t,e=>CO(()=>Fs(e))))},100))}function cQ(t){setTimeout(()=>{nQ.set(t,setInterval(()=>CO(Fs.bind(null,t)),2e3))},Math.round(2e3*Math.random()))}function CO(t){typeof requestIdleCallback=="function"?requestIdleCallback(()=>t()):requestAnimationFrame(()=>t())}let zv,fo;typeof window!="undefined"&&(Ca=document.documentElement,zv=new MutationObserver(aQ),fo=new ResizeObserver(sQ),fo.observe(Ca));function uQ(t){return t.reduce((n,i)=>[...n,...Array.from(i.addedNodes),...Array.from(i.removedNodes)],[]).every(n=>n.nodeName==="#comment")?!1:t.reduce((n,i)=>{if(n===!1)return!1;if(i.target instanceof Element){if(om(i.target),!n.has(i.target)){n.add(i.target);for(let a=0;a<i.target.children.length;a++){const s=i.target.children.item(a);if(!!s){if(Uv in s)return!1;om(i.target,s),n.add(s)}}}if(i.removedNodes.length)for(let a=0;a<i.removedNodes.length;a++){const s=i.removedNodes[a];if(Uv in s)return!1;s instanceof Element&&(n.add(s),om(i.target,s),ko.set(s,[i.previousSibling,i.nextSibling]))}}return n},new Set)}function om(t,e){!e&&!(kn in t)?Object.defineProperty(t,kn,{value:t}):e&&!(kn in e)&&Object.defineProperty(e,kn,{value:t})}function dQ(t){var e;const r=Ca.contains(t),n=Gr.has(t);r&&ko.has(t)&&ko.delete(t),Cs.has(t)&&((e=Cs.get(t))===null||e===void 0||e.cancel()),n&&r?hQ(t):n&&!r?pQ(t):fQ(t)}function zi(t){return Number(t.replace(/[^0-9.\-]/g,""))}function Qo(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX,width:e.width,height:e.height}}function AO(t,e,r){let n=e.width,i=e.height,a=r.width,s=r.height;const o=getComputedStyle(t);if(o.getPropertyValue("box-sizing")==="content-box"){const c=zi(o.paddingTop)+zi(o.paddingBottom)+zi(o.borderTopWidth)+zi(o.borderBottomWidth),u=zi(o.paddingLeft)+zi(o.paddingRight)+zi(o.borderRightWidth)+zi(o.borderLeftWidth);n-=u,a-=u,i-=c,s-=c}return[n,a,i,s].map(Math.round)}function Vp(t){return kn in t&&Xo.has(t[kn])?Xo.get(t[kn]):{duration:250,easing:"ease-in-out"}}function IO(t){if(kn in t)return t[kn]}function Jb(t){const e=IO(t);return e?oc.has(e):!1}function PO(t,...e){e.forEach(r=>r(t,Xo.has(t)));for(let r=0;r<t.children.length;r++){const n=t.children.item(r);n&&e.forEach(i=>i(n,Xo.has(n)))}}function hQ(t){const e=Gr.get(t),r=Qo(t);if(!Jb(t))return Gr.set(t,r);let n;if(!e)return;const i=Vp(t);if(typeof i!="function"){const a=e.left-r.left,s=e.top-r.top,[o,l,c,u]=AO(t,e,r),d={transform:`translate(${a}px, ${s}px)`},h={transform:"translate(0, 0)"};o!==l&&(d.width=`${o}px`,h.width=`${l}px`),c!==u&&(d.height=`${c}px`,h.height=`${u}px`),n=t.animate([d,h],{duration:i.duration,easing:i.easing})}else n=new Animation(i(t,"remain",e,r)),n.play();Cs.set(t,n),Gr.set(t,r),n.addEventListener("finish",Fs.bind(null,t))}function fQ(t){const e=Qo(t);Gr.set(t,e);const r=Vp(t);if(!Jb(t))return;let n;typeof r!="function"?n=t.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:r.duration*1.5,easing:"ease-in"}):(n=new Animation(r(t,"add",e)),n.play()),Cs.set(t,n),n.addEventListener("finish",Fs.bind(null,t))}function pQ(t){var e;if(!ko.has(t)||!Gr.has(t))return;const[r,n]=ko.get(t);Object.defineProperty(t,Uv,{value:!0}),n&&n.parentNode&&n.parentNode instanceof Element?n.parentNode.insertBefore(t,n):r&&r.parentNode?r.parentNode.appendChild(t):(e=IO(t))===null||e===void 0||e.appendChild(t);function i(){var h;t.remove(),Gr.delete(t),ko.delete(t),Cs.delete(t),(h=Bv.get(t))===null||h===void 0||h.disconnect()}if(!Jb(t))return i();const[a,s,o,l]=gQ(t),c=Vp(t),u=Gr.get(t);let d;Object.assign(t.style,{position:"absolute",top:`${a}px`,left:`${s}px`,width:`${o}px`,height:`${l}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof c!="function"?d=t.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:c.duration,easing:"ease-out"}):(d=new Animation(c(t,"remove",u)),d.play()),Cs.set(t,d),d.addEventListener("finish",i)}function gQ(t){const e=Gr.get(t),[r,,n]=AO(t,e,Qo(t));let i=t.parentElement;for(;i&&(getComputedStyle(i).position==="static"||i instanceof HTMLBodyElement);)i=i.parentElement;i||(i=document.body);const a=getComputedStyle(i),s=Gr.get(i)||Qo(i),o=Math.round(e.top-s.top)-zi(a.borderTopWidth),l=Math.round(e.left-s.left)-zi(a.borderLeftWidth);return[o,l,r,n]}function mQ(t,e={}){return zv&&fo&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&typeof e!="function"&&!e.disrespectUserMotionPreference||(oc.add(t),getComputedStyle(t).position==="static"&&Object.assign(t.style,{position:"relative"}),PO(t,Fs,cQ,i=>fo==null?void 0:fo.observe(i)),typeof e=="function"?Xo.set(t,e):Xo.set(t,{duration:250,easing:"ease-in-out",...e}),zv.observe(t,{childList:!0}),EO.add(t))),Object.freeze({parent:t,enable:()=>{oc.add(t)},disable:()=>{oc.delete(t)},isEnabled:()=>oc.has(t)})}const vQ={mounted:(t,e)=>{mQ(t,e.value||{})}},yQ={install(t){t.directive("auto-animate",vQ)}};const $v={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:()=>{},onClose:()=>{},onToggle:()=>{}};class OO{constructor(e=[],r={}){this._items=e,this._options={...$v,...r},this._init()}_init(){this._items.length&&this._items.map(e=>{e.active&&this.open(e.id),e.triggerEl.addEventListener("click",()=>{this.toggle(e.id)})})}getItem(e){return this._items.filter(r=>r.id===e)[0]}open(e){const r=this.getItem(e);this._options.alwaysOpen||this._items.map(n=>{n!==r&&(n.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),n.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),n.targetEl.classList.add("hidden"),n.triggerEl.setAttribute("aria-expanded",!1),n.active=!1,n.iconEl&&n.iconEl.classList.remove("rotate-180"))}),r.triggerEl.classList.add(...this._options.activeClasses.split(" ")),r.triggerEl.classList.remove(...this._options.inactiveClasses.split(" ")),r.triggerEl.setAttribute("aria-expanded",!0),r.targetEl.classList.remove("hidden"),r.active=!0,r.iconEl&&r.iconEl.classList.add("rotate-180"),this._options.onOpen(this,r)}toggle(e){const r=this.getItem(e);r.active?this.close(e):this.open(e),this._options.onToggle(this,r)}close(e){const r=this.getItem(e);r.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),r.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),r.targetEl.classList.add("hidden"),r.triggerEl.setAttribute("aria-expanded",!1),r.active=!1,r.iconEl&&r.iconEl.classList.remove("rotate-180"),this._options.onClose(this,r)}}window.Accordion=OO;function bQ(){document.querySelectorAll("[data-accordion]").forEach(t=>{const e=t.getAttribute("data-accordion"),r=t.getAttribute("data-active-classes"),n=t.getAttribute("data-inactive-classes"),i=[];t.querySelectorAll("[data-accordion-target]").forEach(a=>{const s={id:a.getAttribute("data-accordion-target"),triggerEl:a,targetEl:document.querySelector(a.getAttribute("data-accordion-target")),iconEl:a.querySelector("[data-accordion-icon]"),active:a.getAttribute("aria-expanded")==="true"};i.push(s)}),new OO(i,{alwaysOpen:e==="open",activeClasses:r||$v.activeClasses,inactiveClasses:n||$v.inactiveClasses})})}const Z1={triggerEl:null,onCollapse:()=>{},onExpand:()=>{},onToggle:()=>{}};class DO{constructor(e=null,r={}){this._targetEl=e,this._triggerEl=r.triggerEl||Z1.triggerEl,this._options={...Z1,...r},this._visible=!1,this._init()}_init(){this._triggerEl&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._triggerEl.addEventListener("click",()=>{this._visible?this.collapse():this.expand()}))}collapse(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)}expand(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)}toggle(){this._visible?this.collapse():this.expand()}}window.Collapse=DO;function wQ(){document.querySelectorAll("[data-collapse-toggle]").forEach(t=>{const e=document.getElementById(t.getAttribute("data-collapse-toggle"));!e||new DO(e,{triggerEl:t})})}const Vv={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:()=>{},onPrev:()=>{},onChange:()=>{}};class LO{constructor(e=[],r={}){this._items=e,this._options={...Vv,...r,indicators:{...Vv.indicators,...r.indicators}},this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._interval=null,this._init()}_init(){this._items.map(e=>{e.el.classList.add("absolute","inset-0","transition-all","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map((e,r)=>{e.el.addEventListener("click",()=>{this.slideTo(r)})})}getItem(e){return this._items[e]}slideTo(e){const r=this._items[e],n={left:r.position===0?this._items[this._items.length-1]:this._items[r.position-1],middle:r,right:r.position===this._items.length-1?this._items[0]:this._items[r.position+1]};this._rotate(n),this._setActiveItem(r.position),this._interval&&(this.pause(),this.cycle()),this._options.onChange(this)}next(){const e=this._getActiveItem();let r=null;e.position===this._items.length-1?r=this._items[0]:r=this._items[e.position+1],this.slideTo(r.position),this._options.onNext(this)}prev(){const e=this._getActiveItem();let r=null;e.position===0?r=this._items[this._items.length-1]:r=this._items[e.position-1],this.slideTo(r.position),this._options.onPrev(this)}_rotate(e){this._items.map(r=>{r.el.classList.add("hidden")}),e.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.left.el.classList.add("-translate-x-full","z-10"),e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-20"),e.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.right.el.classList.add("translate-x-full","z-10")}cycle(){this._interval=setInterval(()=>{this.next()},this._options.interval)}pause(){clearInterval(this._interval)}_getActiveItem(){return this._activeItem}_setActiveItem(e){this._activeItem=this._items[e],this._indicators.length&&(this._indicators.map(r=>{r.el.setAttribute("aria-current","false"),r.el.classList.remove(...this._options.indicators.activeClasses.split(" ")),r.el.classList.add(...this._options.indicators.inactiveClasses.split(" "))}),this._indicators[e].el.classList.add(...this._options.indicators.activeClasses.split(" ")),this._indicators[e].el.classList.remove(...this._options.indicators.inactiveClasses.split(" ")),this._indicators[e].el.setAttribute("aria-current","true"))}}window.Carousel=LO;function _Q(){document.querySelectorAll("[data-carousel]").forEach(t=>{const e=t.getAttribute("data-carousel-interval"),r=t.getAttribute("data-carousel")==="slide",n=[];let i=0;t.querySelectorAll("[data-carousel-item]").length&&[...t.querySelectorAll("[data-carousel-item]")].map((c,u)=>{n.push({position:u,el:c}),c.getAttribute("data-carousel-item")==="active"&&(i=u)});const a=[];t.querySelectorAll("[data-carousel-slide-to]").length&&[...t.querySelectorAll("[data-carousel-slide-to]")].map(c=>{a.push({position:c.getAttribute("data-carousel-slide-to"),el:c})});const s=new LO(n,{defaultPosition:i,indicators:{items:a},interval:e||Vv.interval});r&&s.cycle();const o=t.querySelector("[data-carousel-next]"),l=t.querySelector("[data-carousel-prev]");o&&o.addEventListener("click",()=>{s.next()}),l&&l.addEventListener("click",()=>{s.prev()})})}const eS={triggerEl:null,transition:"transition-opacity",duration:300,timing:"ease-out",onHide:()=>{}};class RO{constructor(e=null,r={}){this._targetEl=e,this._triggerEl=r.triggerEl||eS.triggerEl,this._options={...eS,...r},this._init()}_init(){this._triggerEl&&this._triggerEl.addEventListener("click",()=>{this.hide()})}hide(){this._targetEl.classList.add(this._options.transition,`duration-${this._options.duration}`,this._options.timing,"opacity-0"),setTimeout(()=>{this._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)}}window.Dismiss=RO;function xQ(){document.querySelectorAll("[data-dismiss-target]").forEach(t=>{const e=document.querySelector(t.getAttribute("data-dismiss-target"));new RO(e,{triggerEl:t})})}var Wr="top",bi="bottom",wi="right",Kr="left",Zb="auto",Qu=[Wr,bi,wi,Kr],Jo="start",uu="end",TQ="clippingParents",MO="viewport",Hl="popper",SQ="reference",tS=Qu.reduce(function(t,e){return t.concat([e+"-"+Jo,e+"-"+uu])},[]),NO=[].concat(Qu,[Zb]).reduce(function(t,e){return t.concat([e,e+"-"+Jo,e+"-"+uu])},[]),kQ="beforeRead",EQ="read",CQ="afterRead",AQ="beforeMain",IQ="main",PQ="afterMain",OQ="beforeWrite",DQ="write",LQ="afterWrite",RQ=[kQ,EQ,CQ,AQ,IQ,PQ,OQ,DQ,LQ];function un(t){return t?(t.nodeName||"").toLowerCase():null}function _i(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function As(t){var e=_i(t).Element;return t instanceof e||t instanceof Element}function vi(t){var e=_i(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ew(t){if(typeof ShadowRoot=="undefined")return!1;var e=_i(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function MQ(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},a=e.elements[r];!vi(a)||!un(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var o=i[s];o===!1?a.removeAttribute(s):a.setAttribute(s,o===!0?"":o)}))})}function NQ(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),o=s.reduce(function(l,c){return l[c]="",l},{});!vi(i)||!un(i)||(Object.assign(i.style,o),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}var jQ={name:"applyStyles",enabled:!0,phase:"write",fn:MQ,effect:NQ,requires:["computeStyles"]};function an(t){return t.split("-")[0]}var ys=Math.max,Tf=Math.min,Zo=Math.round;function Hv(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function jO(){return!/^((?!chrome|android).)*safari/i.test(Hv())}function el(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,a=1;e&&vi(t)&&(i=t.offsetWidth>0&&Zo(n.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Zo(n.height)/t.offsetHeight||1);var s=As(t)?_i(t):window,o=s.visualViewport,l=!jO()&&r,c=(n.left+(l&&o?o.offsetLeft:0))/i,u=(n.top+(l&&o?o.offsetTop:0))/a,d=n.width/i,h=n.height/a;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function tw(t){var e=el(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function FO(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&ew(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Vn(t){return _i(t).getComputedStyle(t)}function FQ(t){return["table","td","th"].indexOf(un(t))>=0}function La(t){return((As(t)?t.ownerDocument:t.document)||window.document).documentElement}function Hp(t){return un(t)==="html"?t:t.assignedSlot||t.parentNode||(ew(t)?t.host:null)||La(t)}function rS(t){return!vi(t)||Vn(t).position==="fixed"?null:t.offsetParent}function BQ(t){var e=/firefox/i.test(Hv()),r=/Trident/i.test(Hv());if(r&&vi(t)){var n=Vn(t);if(n.position==="fixed")return null}var i=Hp(t);for(ew(i)&&(i=i.host);vi(i)&&["html","body"].indexOf(un(i))<0;){var a=Vn(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Ju(t){for(var e=_i(t),r=rS(t);r&&FQ(r)&&Vn(r).position==="static";)r=rS(r);return r&&(un(r)==="html"||un(r)==="body"&&Vn(r).position==="static")?e:r||BQ(t)||e}function rw(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function kc(t,e,r){return ys(t,Tf(e,r))}function UQ(t,e,r){var n=kc(t,e,r);return n>r?r:n}function BO(){return{top:0,right:0,bottom:0,left:0}}function UO(t){return Object.assign({},BO(),t)}function zO(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var zQ=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,UO(typeof e!="number"?e:zO(e,Qu))};function $Q(t){var e,r=t.state,n=t.name,i=t.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,o=an(r.placement),l=rw(o),c=[Kr,wi].indexOf(o)>=0,u=c?"height":"width";if(!(!a||!s)){var d=zQ(i.padding,r),h=tw(a),p=l==="y"?Wr:Kr,y=l==="y"?bi:wi,w=r.rects.reference[u]+r.rects.reference[l]-s[l]-r.rects.popper[u],v=s[l]-r.rects.reference[l],T=Ju(a),k=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,A=w/2-v/2,E=d[p],I=k-h[u]-d[y],F=k/2-h[u]/2+A,j=kc(E,F,I),D=l;r.modifiersData[n]=(e={},e[D]=j,e.centerOffset=j-F,e)}}function VQ(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!FO(e.elements.popper,i)||(e.elements.arrow=i))}var HQ={name:"arrow",enabled:!0,phase:"main",fn:$Q,effect:VQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tl(t){return t.split("-")[1]}var qQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function GQ(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:Zo(e*i)/i||0,y:Zo(r*i)/i||0}}function iS(t){var e,r=t.popper,n=t.popperRect,i=t.placement,a=t.variation,s=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=s.x,p=h===void 0?0:h,y=s.y,w=y===void 0?0:y,v=typeof u=="function"?u({x:p,y:w}):{x:p,y:w};p=v.x,w=v.y;var T=s.hasOwnProperty("x"),k=s.hasOwnProperty("y"),A=Kr,E=Wr,I=window;if(c){var F=Ju(r),j="clientHeight",D="clientWidth";if(F===_i(r)&&(F=La(r),Vn(F).position!=="static"&&o==="absolute"&&(j="scrollHeight",D="scrollWidth")),F=F,i===Wr||(i===Kr||i===wi)&&a===uu){E=bi;var z=d&&F===I&&I.visualViewport?I.visualViewport.height:F[j];w-=z-n.height,w*=l?1:-1}if(i===Kr||(i===Wr||i===bi)&&a===uu){A=wi;var M=d&&F===I&&I.visualViewport?I.visualViewport.width:F[D];p-=M-n.width,p*=l?1:-1}}var U=Object.assign({position:o},c&&qQ),P=u===!0?GQ({x:p,y:w}):{x:p,y:w};if(p=P.x,w=P.y,l){var q;return Object.assign({},U,(q={},q[E]=k?"0":"",q[A]=T?"0":"",q.transform=(I.devicePixelRatio||1)<=1?"translate("+p+"px, "+w+"px)":"translate3d("+p+"px, "+w+"px, 0)",q))}return Object.assign({},U,(e={},e[E]=k?w+"px":"",e[A]=T?p+"px":"",e.transform="",e))}function WQ(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,o=r.roundOffsets,l=o===void 0?!0:o,c={placement:an(e.placement),variation:tl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,iS(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,iS(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var KQ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:WQ,data:{}},Xd={passive:!0};function YQ(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,o=s===void 0?!0:s,l=_i(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",r.update,Xd)}),o&&l.addEventListener("resize",r.update,Xd),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",r.update,Xd)}),o&&l.removeEventListener("resize",r.update,Xd)}}var XQ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:YQ,data:{}},QQ={left:"right",right:"left",bottom:"top",top:"bottom"};function mh(t){return t.replace(/left|right|bottom|top/g,function(e){return QQ[e]})}var JQ={start:"end",end:"start"};function nS(t){return t.replace(/start|end/g,function(e){return JQ[e]})}function iw(t){var e=_i(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function nw(t){return el(La(t)).left+iw(t).scrollLeft}function ZQ(t,e){var r=_i(t),n=La(t),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;var c=jO();(c||!c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o+nw(t),y:l}}function eJ(t){var e,r=La(t),n=iw(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=ys(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=ys(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-n.scrollLeft+nw(t),l=-n.scrollTop;return Vn(i||r).direction==="rtl"&&(o+=ys(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function aw(t){var e=Vn(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function $O(t){return["html","body","#document"].indexOf(un(t))>=0?t.ownerDocument.body:vi(t)&&aw(t)?t:$O(Hp(t))}function Ec(t,e){var r;e===void 0&&(e=[]);var n=$O(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),a=_i(n),s=i?[a].concat(a.visualViewport||[],aw(n)?n:[]):n,o=e.concat(s);return i?o:o.concat(Ec(Hp(s)))}function qv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function tJ(t,e){var r=el(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function aS(t,e,r){return e===MO?qv(ZQ(t,r)):As(e)?tJ(e,r):qv(eJ(La(t)))}function rJ(t){var e=Ec(Hp(t)),r=["absolute","fixed"].indexOf(Vn(t).position)>=0,n=r&&vi(t)?Ju(t):t;return As(n)?e.filter(function(i){return As(i)&&FO(i,n)&&un(i)!=="body"}):[]}function iJ(t,e,r,n){var i=e==="clippingParents"?rJ(t):[].concat(e),a=[].concat(i,[r]),s=a[0],o=a.reduce(function(l,c){var u=aS(t,c,n);return l.top=ys(u.top,l.top),l.right=Tf(u.right,l.right),l.bottom=Tf(u.bottom,l.bottom),l.left=ys(u.left,l.left),l},aS(t,s,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function VO(t){var e=t.reference,r=t.element,n=t.placement,i=n?an(n):null,a=n?tl(n):null,s=e.x+e.width/2-r.width/2,o=e.y+e.height/2-r.height/2,l;switch(i){case Wr:l={x:s,y:e.y-r.height};break;case bi:l={x:s,y:e.y+e.height};break;case wi:l={x:e.x+e.width,y:o};break;case Kr:l={x:e.x-r.width,y:o};break;default:l={x:e.x,y:e.y}}var c=i?rw(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(a){case Jo:l[c]=l[c]-(e[u]/2-r[u]/2);break;case uu:l[c]=l[c]+(e[u]/2-r[u]/2);break}}return l}function du(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,a=r.strategy,s=a===void 0?t.strategy:a,o=r.boundary,l=o===void 0?TQ:o,c=r.rootBoundary,u=c===void 0?MO:c,d=r.elementContext,h=d===void 0?Hl:d,p=r.altBoundary,y=p===void 0?!1:p,w=r.padding,v=w===void 0?0:w,T=UO(typeof v!="number"?v:zO(v,Qu)),k=h===Hl?SQ:Hl,A=t.rects.popper,E=t.elements[y?k:h],I=iJ(As(E)?E:E.contextElement||La(t.elements.popper),l,u,s),F=el(t.elements.reference),j=VO({reference:F,element:A,strategy:"absolute",placement:i}),D=qv(Object.assign({},A,j)),z=h===Hl?D:F,M={top:I.top-z.top+T.top,bottom:z.bottom-I.bottom+T.bottom,left:I.left-z.left+T.left,right:z.right-I.right+T.right},U=t.modifiersData.offset;if(h===Hl&&U){var P=U[i];Object.keys(M).forEach(function(q){var X=[wi,bi].indexOf(q)>=0?1:-1,fe=[Wr,bi].indexOf(q)>=0?"y":"x";M[q]+=P[fe]*X})}return M}function nJ(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,o=r.flipVariations,l=r.allowedAutoPlacements,c=l===void 0?NO:l,u=tl(n),d=u?o?tS:tS.filter(function(y){return tl(y)===u}):Qu,h=d.filter(function(y){return c.indexOf(y)>=0});h.length===0&&(h=d);var p=h.reduce(function(y,w){return y[w]=du(t,{placement:w,boundary:i,rootBoundary:a,padding:s})[an(w)],y},{});return Object.keys(p).sort(function(y,w){return p[y]-p[w]})}function aJ(t){if(an(t)===Zb)return[];var e=mh(t);return[nS(t),e,nS(e)]}function sJ(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!0:s,l=r.fallbackPlacements,c=r.padding,u=r.boundary,d=r.rootBoundary,h=r.altBoundary,p=r.flipVariations,y=p===void 0?!0:p,w=r.allowedAutoPlacements,v=e.options.placement,T=an(v),k=T===v,A=l||(k||!y?[mh(v)]:aJ(v)),E=[v].concat(A).reduce(function(Gt,K){return Gt.concat(an(K)===Zb?nJ(e,{placement:K,boundary:u,rootBoundary:d,padding:c,flipVariations:y,allowedAutoPlacements:w}):K)},[]),I=e.rects.reference,F=e.rects.popper,j=new Map,D=!0,z=E[0],M=0;M<E.length;M++){var U=E[M],P=an(U),q=tl(U)===Jo,X=[Wr,bi].indexOf(P)>=0,fe=X?"width":"height",te=du(e,{placement:U,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),se=X?q?wi:Kr:q?bi:Wr;I[fe]>F[fe]&&(se=mh(se));var le=mh(se),Re=[];if(a&&Re.push(te[P]<=0),o&&Re.push(te[se]<=0,te[le]<=0),Re.every(function(Gt){return Gt})){z=U,D=!1;break}j.set(U,Re)}if(D)for(var Le=y?3:1,pt=function(K){var ve=E.find(function(ue){var be=j.get(ue);if(be)return be.slice(0,K).every(function(Qe){return Qe})});if(ve)return z=ve,"break"},it=Le;it>0;it--){var gt=pt(it);if(gt==="break")break}e.placement!==z&&(e.modifiersData[n]._skip=!0,e.placement=z,e.reset=!0)}}var oJ={name:"flip",enabled:!0,phase:"main",fn:sJ,requiresIfExists:["offset"],data:{_skip:!1}};function sS(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function oS(t){return[Wr,wi,bi,Kr].some(function(e){return t[e]>=0})}function lJ(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=du(e,{elementContext:"reference"}),o=du(e,{altBoundary:!0}),l=sS(s,n),c=sS(o,i,a),u=oS(l),d=oS(c);e.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var cJ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:lJ};function uJ(t,e,r){var n=an(t),i=[Kr,Wr].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=a[0],o=a[1];return s=s||0,o=(o||0)*i,[Kr,wi].indexOf(n)>=0?{x:o,y:s}:{x:s,y:o}}function dJ(t){var e=t.state,r=t.options,n=t.name,i=r.offset,a=i===void 0?[0,0]:i,s=NO.reduce(function(u,d){return u[d]=uJ(d,e.rects,a),u},{}),o=s[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=s}var hJ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dJ};function fJ(t){var e=t.state,r=t.name;e.modifiersData[r]=VO({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var pJ={name:"popperOffsets",enabled:!0,phase:"read",fn:fJ,data:{}};function gJ(t){return t==="x"?"y":"x"}function mJ(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!1:s,l=r.boundary,c=r.rootBoundary,u=r.altBoundary,d=r.padding,h=r.tether,p=h===void 0?!0:h,y=r.tetherOffset,w=y===void 0?0:y,v=du(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),T=an(e.placement),k=tl(e.placement),A=!k,E=rw(T),I=gJ(E),F=e.modifiersData.popperOffsets,j=e.rects.reference,D=e.rects.popper,z=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,M=typeof z=="number"?{mainAxis:z,altAxis:z}:Object.assign({mainAxis:0,altAxis:0},z),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(!!F){if(a){var q,X=E==="y"?Wr:Kr,fe=E==="y"?bi:wi,te=E==="y"?"height":"width",se=F[E],le=se+v[X],Re=se-v[fe],Le=p?-D[te]/2:0,pt=k===Jo?j[te]:D[te],it=k===Jo?-D[te]:-j[te],gt=e.elements.arrow,Gt=p&&gt?tw(gt):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:BO(),ve=K[X],ue=K[fe],be=kc(0,j[te],Gt[te]),Qe=A?j[te]/2-Le-be-ve-M.mainAxis:pt-be-ve-M.mainAxis,st=A?-j[te]/2+Le+be+ue+M.mainAxis:it+be+ue+M.mainAxis,Be=e.elements.arrow&&Ju(e.elements.arrow),Ue=Be?E==="y"?Be.clientTop||0:Be.clientLeft||0:0,R=(q=U==null?void 0:U[E])!=null?q:0,V=se+Qe-R-Ue,G=se+st-R,Q=kc(p?Tf(le,V):le,se,p?ys(Re,G):Re);F[E]=Q,P[E]=Q-se}if(o){var Y,de=E==="x"?Wr:Kr,ee=E==="x"?bi:wi,ie=F[I],he=I==="y"?"height":"width",re=ie+v[de],Se=ie-v[ee],_e=[Wr,Kr].indexOf(T)!==-1,ke=(Y=U==null?void 0:U[I])!=null?Y:0,Pe=_e?re:ie-j[he]-D[he]-ke+M.altAxis,We=_e?ie+j[he]+D[he]-ke-M.altAxis:Se,rt=p&&_e?UQ(Pe,ie,We):kc(p?Pe:re,ie,p?We:Se);F[I]=rt,P[I]=rt-ie}e.modifiersData[n]=P}}var vJ={name:"preventOverflow",enabled:!0,phase:"main",fn:mJ,requiresIfExists:["offset"]};function yJ(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function bJ(t){return t===_i(t)||!vi(t)?iw(t):yJ(t)}function wJ(t){var e=t.getBoundingClientRect(),r=Zo(e.width)/t.offsetWidth||1,n=Zo(e.height)/t.offsetHeight||1;return r!==1||n!==1}function _J(t,e,r){r===void 0&&(r=!1);var n=vi(e),i=vi(e)&&wJ(e),a=La(e),s=el(t,i,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((un(e)!=="body"||aw(a))&&(o=bJ(e)),vi(e)?(l=el(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=nw(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function xJ(t){var e=new Map,r=new Set,n=[];t.forEach(function(a){e.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!r.has(o)){var l=e.get(o);l&&i(l)}}),n.push(a)}return t.forEach(function(a){r.has(a.name)||i(a)}),n}function TJ(t){var e=xJ(t);return RQ.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function SJ(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function kJ(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var lS={placement:"bottom",modifiers:[],strategy:"absolute"};function cS(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function EJ(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,a=i===void 0?lS:i;return function(o,l,c){c===void 0&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},lS,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(T){var k=typeof T=="function"?T(u.options):T;w(),u.options=Object.assign({},a,u.options,k),u.scrollParents={reference:As(o)?Ec(o):o.contextElement?Ec(o.contextElement):[],popper:Ec(l)};var A=TJ(kJ([].concat(n,u.options.modifiers)));return u.orderedModifiers=A.filter(function(E){return E.enabled}),y(),p.update()},forceUpdate:function(){if(!h){var T=u.elements,k=T.reference,A=T.popper;if(!!cS(k,A)){u.rects={reference:_J(k,Ju(A),u.options.strategy==="fixed"),popper:tw(A)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var I=u.orderedModifiers[E],F=I.fn,j=I.options,D=j===void 0?{}:j,z=I.name;typeof F=="function"&&(u=F({state:u,options:D,name:z,instance:p})||u)}}}},update:SJ(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){w(),h=!0}};if(!cS(o,l))return p;p.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function y(){u.orderedModifiers.forEach(function(v){var T=v.name,k=v.options,A=k===void 0?{}:k,E=v.effect;if(typeof E=="function"){var I=E({state:u,name:T,instance:p,options:A}),F=function(){};d.push(I||F)}})}function w(){d.forEach(function(v){return v()}),d=[]}return p}}var CJ=[XQ,pJ,KQ,jQ,hJ,oJ,vJ,HQ,cJ],sw=EJ({defaultModifiers:CJ});const HO={placement:"bottom",triggerType:"click",onShow:()=>{},onHide:()=>{}};class qO{constructor(e=null,r=null,n={}){this._targetEl=e,this._triggerEl=r,this._options={...HO,...n},this._popperInstance=this._createPopperInstace(),this._visible=!1,this._init()}_init(){this._triggerEl&&this._triggerEl.addEventListener("click",()=>{this.toggle()})}_createPopperInstace(){return sw(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,10]}}]})}_handleClickOutside(e,r){const n=e.target;n!==r&&!r.contains(n)&&!this._triggerEl.contains(n)&&this._visible&&this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)}toggle(){this._visible?(this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)):this.show()}show(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!0}]})),document.body.addEventListener("click",e=>{this._handleClickOutside(e,this._targetEl)},!0),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)}hide(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!1}]})),this._visible=!1,this._options.onHide(this)}}window.Dropdown=qO;function AJ(){document.querySelectorAll("[data-dropdown-toggle]").forEach(t=>{const e=document.getElementById(t.getAttribute("data-dropdown-toggle")),r=t.getAttribute("data-dropdown-placement");new qO(e,t,{placement:r||HO.placement})})}const Gv={placement:"center",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",backdrop:"dynamic",onHide:()=>{},onShow:()=>{},onToggle:()=>{}};class GO{constructor(e=null,r={}){this._targetEl=e,this._options={...Gv,...r},this._isHidden=!0,this._backdropEl=null,this._init()}_init(){this._targetEl&&(this._getPlacementClasses().map(e=>{this._targetEl.classList.add(e)}),this._targetEl.addEventListener("click",e=>{this._handleOutsideClick(e.target)}),this._targetEl.addEventListener("keydown",e=>{e.key==="Escape"&&this.hide()}))}_createBackdrop(){if(this._isHidden){const e=document.createElement("div");e.setAttribute("modal-backdrop",""),e.classList.add(...this._options.backdropClasses.split(" ")),document.querySelector("body").append(e),this._backdropEl=e}}_destroyBackdropEl(){this._isHidden||document.querySelector("[modal-backdrop]").remove()}_handleOutsideClick(e){this._options.backdrop==="dynamic"&&(e===this._targetEl||e===this._backdropEl)&&this.hide()}_getPlacementClasses(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}}toggle(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)}show(){this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,document.body.classList.add("overflow-hidden"),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.hide()}),this._options.onShow(this)}hide(){this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.onHide(this)}isHidden(){return this._isHidden}}window.Modal=GO;const uS=(t,e)=>e.some(r=>r.id===t)?e.find(r=>r.id===t):!1;function IJ(){let t=[];document.querySelectorAll("[data-modal-toggle]").forEach(e=>{const r=e.getAttribute("data-modal-toggle"),n=document.getElementById(r),i=n.getAttribute("data-modal-placement"),a=n.getAttribute("data-modal-backdrop");n&&!n.hasAttribute("aria-hidden")&&!n.hasAttribute("aria-modal")&&n.setAttribute("aria-hidden","true");let s=null;uS(r,t)?(s=uS(r,t),s=s.object):(s=new GO(n,{placement:i||Gv.placement,backdrop:a||Gv.backdrop}),t.push({id:r,object:s})),n.hasAttribute("data-modal-show")&&n.getAttribute("data-modal-show")==="true"&&s.show(),e.addEventListener("click",()=>{s.toggle()})})}const no={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-30",onShow:()=>{},onHide:()=>{},onToggle:()=>{}};class WO{constructor(e=null,r){this._targetEl=e,this._options={...no,...r},this._visible=!1,this._init()}_init(){this._targetEl&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform")),this._getPlacementClasses(this._options.placement).base.map(e=>{this._targetEl.classList.add(e)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isVisible()&&this.hide()})}isVisible(){return this._visible}hide(){this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(e=>{this._targetEl.classList.remove(e)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(e=>{this._targetEl.classList.add(e)})):(this._getPlacementClasses(this._options.placement).active.map(e=>{this._targetEl.classList.remove(e)}),this._getPlacementClasses(this._options.placement).inactive.map(e=>{this._targetEl.classList.add(e)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)}show(){this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(e=>{this._targetEl.classList.add(e)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(e=>{this._targetEl.classList.remove(e)})):(this._getPlacementClasses(this._options.placement).active.map(e=>{this._targetEl.classList.add(e)}),this._getPlacementClasses(this._options.placement).inactive.map(e=>{this._targetEl.classList.remove(e)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)}toggle(){this.isVisible()?this.hide():this.show()}_createBackdrop(){if(!this._visible){const e=document.createElement("div");e.setAttribute("drawer-backdrop",""),e.classList.add(...this._options.backdropClasses.split(" ")),document.querySelector("body").append(e),e.addEventListener("click",()=>{this.hide()})}}_destroyBackdropEl(){this._visible&&document.querySelector("[drawer-backdrop]").remove()}_getPlacementClasses(e){switch(e){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}}}window.Drawer=WO;const ql=(t,e)=>e.some(r=>r.id===t)?e.find(r=>r.id===t):!1;function PJ(){let t=[];document.querySelectorAll("[data-drawer-target]").forEach(e=>{const r=document.getElementById(e.getAttribute("data-drawer-target")),n=r.id,i=e.getAttribute("data-drawer-placement"),a=e.getAttribute("data-drawer-body-scrolling"),s=e.getAttribute("data-drawer-backdrop"),o=e.getAttribute("data-drawer-edge"),l=e.getAttribute("data-drawer-edge-offset");let c=null;ql(n,t)?(c=ql(n,t),c=c.object):(c=new WO(r,{placement:i||no.placement,bodyScrolling:a?a==="true":no.bodyScrolling,backdrop:s?s==="true":no.backdrop,edge:o?o==="true":no.edge,edgeOffset:l||no.edgeOffset}),t.push({id:n,object:c}))}),document.querySelectorAll("[data-drawer-toggle]").forEach(e=>{const n=document.getElementById(e.getAttribute("data-drawer-toggle")).id,i=ql(n,t);e.addEventListener("click",()=>{i.object.isVisible()?i.object.hide():i.object.show()})}),document.querySelectorAll("[data-drawer-dismiss]").forEach(e=>{const n=document.getElementById(e.getAttribute("data-drawer-dismiss")).id,i=ql(n,t);e.addEventListener("click",()=>{i.object.hide()})}),document.querySelectorAll("[data-drawer-show]").forEach(e=>{const n=document.getElementById(e.getAttribute("data-drawer-show")).id,i=ql(n,t);e.addEventListener("click",()=>{i.object.show()})})}const OJ={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:()=>{}};class KO{constructor(e=[],r={}){this._items=e,this._activeTab=r?this.getTab(r.defaultTabId):null,this._options={...OJ,...r},this._init()}_init(){this._items.length&&(this._activeTab||this._setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(e=>{e.triggerEl.addEventListener("click",()=>{this.show(e.id)})}))}getActiveTab(){return this._activeTab}_setActiveTab(e){this._activeTab=e}getTab(e){return this._items.filter(r=>r.id===e)[0]}show(e,r=!1){const n=this.getTab(e);n===this._activeTab&&!r||(this._items.map(i=>{i!==n&&(i.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),i.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-selected",!1))}),n.triggerEl.classList.add(...this._options.activeClasses.split(" ")),n.triggerEl.classList.remove(...this._options.inactiveClasses.split(" ")),n.triggerEl.setAttribute("aria-selected",!0),n.targetEl.classList.remove("hidden"),this._setActiveTab(n),this._options.onShow(this,n))}}window.Tabs=KO;function DJ(){document.querySelectorAll("[data-tabs-toggle]").forEach(t=>{const e=[];let r=null;t.querySelectorAll('[role="tab"]').forEach(n=>{const i=n.getAttribute("aria-selected")==="true",a={id:n.getAttribute("data-tabs-target"),triggerEl:n,targetEl:document.querySelector(n.getAttribute("data-tabs-target"))};e.push(a),i&&(r=a.id)}),new KO(e,{defaultTabId:r})})}const Wv={placement:"top",triggerType:"hover",onShow:()=>{},onHide:()=>{}};class YO{constructor(e=null,r=null,n={}){this._targetEl=e,this._triggerEl=r,this._options={...Wv,...n},this._popperInstance=this._createPopperInstace(),this._init()}_init(){if(this._triggerEl){const e=this._getTriggerEvents();e.showEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{this.show()})}),e.hideEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{this.hide()})})}}_createPopperInstace(){return sw(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}show(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!0}]})),this._popperInstance.update(),this._options.onShow(this)}hide(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!1}]})),this._options.onHide(this)}}window.Tooltip=YO;function LJ(){document.querySelectorAll("[data-tooltip-target]").forEach(t=>{const e=document.getElementById(t.getAttribute("data-tooltip-target")),r=t.getAttribute("data-tooltip-trigger"),n=t.getAttribute("data-tooltip-placement");new YO(e,t,{placement:n||Wv.placement,triggerType:r||Wv.triggerType})})}const vh={placement:"top",offset:10,triggerType:"hover",onShow:()=>{},onHide:()=>{}};class XO{constructor(e=null,r=null,n={}){this._targetEl=e,this._triggerEl=r,this._options={...vh,...n},this._popperInstance=this._createPopperInstace(),this._init()}_init(){if(this._triggerEl){const e=this._getTriggerEvents();e.showEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{this.show()}),this._targetEl.addEventListener(r,()=>{this.show()})}),e.hideEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{setTimeout(()=>{this._targetEl.matches(":hover")||this.hide()},100)}),this._targetEl.addEventListener(r,()=>{setTimeout(()=>{this._triggerEl.matches(":hover")||this.hide()},100)})})}}_createPopperInstace(){return sw(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}show(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!0}]})),this._popperInstance.update(),this._options.onShow(this)}hide(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!1}]})),this._options.onHide(this)}}window.Popover=XO;function RJ(){document.querySelectorAll("[data-popover-target]").forEach(t=>{const e=document.getElementById(t.getAttribute("data-popover-target")),r=t.getAttribute("data-popover-trigger"),n=t.getAttribute("data-popover-placement"),i=t.getAttribute("data-popover-offset");new XO(e,t,{placement:n||vh.placement,offset:i?parseInt(i):vh.offset,triggerType:r||vh.triggerType})})}const QO={triggerType:"hover",onShow:()=>{},onHide:()=>{},onToggle:()=>{}};class JO{constructor(e=null,r=null,n=null,i){this._parentEl=e,this._triggerEl=r,this._targetEl=n,this._options={...QO,...i},this._visible=!1,this._init()}_init(){if(this._triggerEl){const e=this._getTriggerEvents();e.showEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{this.show()}),this._targetEl.addEventListener(r,()=>{this.show()})}),e.hideEvents.forEach(r=>{this._parentEl.addEventListener(r,()=>{setTimeout(()=>{this._parentEl.matches(":hover")||this.hide()},100)})})}}hide(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)}show(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)}toggle(){this._visible?this.hide():this.show()}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}}window.Dial=JO;function MJ(){document.querySelectorAll("[data-dial-init]").forEach(t=>{const e=t.querySelector("[data-dial-toggle]"),r=document.getElementById(e.getAttribute("data-dial-toggle")),n=e.getAttribute("data-dial-trigger");new JO(t,e,r,{triggerType:n||QO.triggerType})})}class NJ{constructor(e,r=[]){this._eventType=e,this._eventFunctions=r}init(){this._eventFunctions.forEach(e=>{window.addEventListener(this._eventType,e)})}}const jJ=new NJ("load",[bQ,wQ,_Q,xQ,AJ,IJ,PJ,DJ,LJ,RJ,MJ]);jJ.init();const ow=qM(rV);ow.use(iQ);ow.use(yQ);ow.mount("#app");export{qJ as $,dj as A,iU as B,Ik as C,aa as D,Os as E,St as F,lt as G,FJ as H,Dc as I,QJ as J,va as K,JJ as L,YJ as M,XJ as N,$J as O,ol as P,KJ as Q,Nc as R,UJ as S,P4 as T,zJ as U,BJ as V,VJ as W,HJ as X,O4 as Y,WJ as Z,y0 as _,fu as a,GJ as a0,bX as a1,ne as b,Kt as c,jz as d,vt as e,Ps as f,ZJ as g,MR as h,xe as i,Ke as j,ii as k,ba as l,He as m,uj as n,Ye as o,Xi as p,It as q,bn as r,jc as s,Si as t,ft as u,vo as v,LR as w,Nf as x,pi as y,Is as z};
