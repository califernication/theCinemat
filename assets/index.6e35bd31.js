const iL=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}};iL();function $v(t,e){const r=Object.create(null),n=t.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return e?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const nL="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aL=$v(nL);function J1(t){return!!t||t===""}function Vv(t){if(De(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=Vt(n)?lL(n):Vv(n);if(i)for(const a in i)e[a]=i[a]}return e}else{if(Vt(t))return t;if(Dt(t))return t}}const sL=/;(?![^(]*\))/g,oL=/:(.+)/;function lL(t){const e={};return t.split(sL).forEach(r=>{if(r){const n=r.split(oL);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Qa(t){let e="";if(Vt(t))e=t;else if(De(t))for(let r=0;r<t.length;r++){const n=Qa(t[r]);n&&(e+=n+" ")}else if(Dt(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function cL(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=_f(t[n],e[n]);return r}function _f(t,e){if(t===e)return!0;let r=Ow(t),n=Ow(e);if(r||n)return r&&n?t.getTime()===e.getTime():!1;if(r=_c(t),n=_c(e),r||n)return t===e;if(r=De(t),n=De(e),r||n)return r&&n?cL(t,e):!1;if(r=Dt(t),n=Dt(e),r||n){if(!r||!n)return!1;const i=Object.keys(t).length,a=Object.keys(e).length;if(i!==a)return!1;for(const s in t){const o=t.hasOwnProperty(s),l=e.hasOwnProperty(s);if(o&&!l||!o&&l||!_f(t[s],e[s]))return!1}}return String(t)===String(e)}function Z1(t,e){return t.findIndex(r=>_f(r,e))}const gn=t=>Vt(t)?t:t==null?"":De(t)||Dt(t)&&(t.toString===rS||!Ge(t.toString))?JSON.stringify(t,eS,2):String(t),eS=(t,e)=>e&&e.__v_isRef?eS(t,e.value):ho(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:Tf(e)?{[`Set(${e.size})`]:[...e.values()]}:Dt(e)&&!De(e)&&!iS(e)?String(e):e,vt={},uo=[],Ci=()=>{},uL=()=>!1,dL=/^on[^a-z]/,xf=t=>dL.test(t),Hv=t=>t.startsWith("onUpdate:"),dr=Object.assign,qv=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},hL=Object.prototype.hasOwnProperty,et=(t,e)=>hL.call(t,e),De=Array.isArray,ho=t=>su(t)==="[object Map]",Tf=t=>su(t)==="[object Set]",Ow=t=>su(t)==="[object Date]",Ge=t=>typeof t=="function",Vt=t=>typeof t=="string",_c=t=>typeof t=="symbol",Dt=t=>t!==null&&typeof t=="object",tS=t=>Dt(t)&&Ge(t.then)&&Ge(t.catch),rS=Object.prototype.toString,su=t=>rS.call(t),fL=t=>su(t).slice(8,-1),iS=t=>su(t)==="[object Object]",Gv=t=>Vt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,qd=$v(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sf=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},pL=/-(\w)/g,nn=Sf(t=>t.replace(pL,(e,r)=>r?r.toUpperCase():"")),gL=/\B([A-Z])/g,Zo=Sf(t=>t.replace(gL,"-$1").toLowerCase()),Ef=Sf(t=>t.charAt(0).toUpperCase()+t.slice(1)),Xp=Sf(t=>t?`on${Ef(t)}`:""),xc=(t,e)=>!Object.is(t,e),Gd=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},ph=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},gh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Dw;const mL=()=>Dw||(Dw=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ji;class nS{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&ji&&(this.parent=ji,this.index=(ji.scopes||(ji.scopes=[])).push(this)-1)}run(e){if(this.active){const r=ji;try{return ji=this,e()}finally{ji=r}}}on(){ji=this}off(){ji=this.parent}stop(e){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function vL(t){return new nS(t)}function yL(t,e=ji){e&&e.active&&e.effects.push(t)}const Wv=t=>{const e=new Set(t);return e.w=0,e.n=0,e},aS=t=>(t.w&ma)>0,sS=t=>(t.n&ma)>0,bL=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ma},wL=t=>{const{deps:e}=t;if(e.length){let r=0;for(let n=0;n<e.length;n++){const i=e[n];aS(i)&&!sS(i)?i.delete(t):e[r++]=i,i.w&=~ma,i.n&=~ma}e.length=r}},im=new WeakMap;let $l=0,ma=1;const nm=30;let Si;const ss=Symbol(""),am=Symbol("");class Kv{constructor(e,r=null,n){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,yL(this,n)}run(){if(!this.active)return this.fn();let e=Si,r=ca;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Si,Si=this,ca=!0,ma=1<<++$l,$l<=nm?bL(this):Lw(this),this.fn()}finally{$l<=nm&&wL(this),ma=1<<--$l,Si=this.parent,ca=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Si===this?this.deferStop=!0:this.active&&(Lw(this),this.onStop&&this.onStop(),this.active=!1)}}function Lw(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let ca=!0;const oS=[];function el(){oS.push(ca),ca=!1}function tl(){const t=oS.pop();ca=t===void 0?!0:t}function ni(t,e,r){if(ca&&Si){let n=im.get(t);n||im.set(t,n=new Map);let i=n.get(r);i||n.set(r,i=Wv()),lS(i)}}function lS(t,e){let r=!1;$l<=nm?sS(t)||(t.n|=ma,r=!aS(t)):r=!t.has(Si),r&&(t.add(Si),Si.deps.push(t))}function Cn(t,e,r,n,i,a){const s=im.get(t);if(!s)return;let o=[];if(e==="clear")o=[...s.values()];else if(r==="length"&&De(t))s.forEach((l,c)=>{(c==="length"||c>=n)&&o.push(l)});else switch(r!==void 0&&o.push(s.get(r)),e){case"add":De(t)?Gv(r)&&o.push(s.get("length")):(o.push(s.get(ss)),ho(t)&&o.push(s.get(am)));break;case"delete":De(t)||(o.push(s.get(ss)),ho(t)&&o.push(s.get(am)));break;case"set":ho(t)&&o.push(s.get(ss));break}if(o.length===1)o[0]&&sm(o[0]);else{const l=[];for(const c of o)c&&l.push(...c);sm(Wv(l))}}function sm(t,e){const r=De(t)?t:[...t];for(const n of r)n.computed&&Rw(n);for(const n of r)n.computed||Rw(n)}function Rw(t,e){(t!==Si||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const _L=$v("__proto__,__v_isRef,__isVue"),cS=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_c)),xL=Yv(),TL=Yv(!1,!0),SL=Yv(!0),Mw=EL();function EL(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const n=at(this);for(let a=0,s=this.length;a<s;a++)ni(n,"get",a+"");const i=n[e](...r);return i===-1||i===!1?n[e](...r.map(at)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){el();const n=at(this)[e].apply(this,r);return tl(),n}}),t}function Yv(t=!1,e=!1){return function(n,i,a){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&a===(t?e?zL:pS:e?fS:hS).get(n))return n;const s=De(n);if(!t&&s&&et(Mw,i))return Reflect.get(Mw,i,a);const o=Reflect.get(n,i,a);return(_c(i)?cS.has(i):_L(i))||(t||ni(n,"get",i),e)?o:yr(o)?s&&Gv(i)?o:o.value:Dt(o)?t?gS(o):rl(o):o}}const kL=uS(),CL=uS(!0);function uS(t=!1){return function(r,n,i,a){let s=r[n];if(Tc(s)&&yr(s)&&!yr(i))return!1;if(!t&&!Tc(i)&&(om(i)||(i=at(i),s=at(s)),!De(r)&&yr(s)&&!yr(i)))return s.value=i,!0;const o=De(r)&&Gv(n)?Number(n)<r.length:et(r,n),l=Reflect.set(r,n,i,a);return r===at(a)&&(o?xc(i,s)&&Cn(r,"set",n,i):Cn(r,"add",n,i)),l}}function AL(t,e){const r=et(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&Cn(t,"delete",e,void 0),n}function IL(t,e){const r=Reflect.has(t,e);return(!_c(e)||!cS.has(e))&&ni(t,"has",e),r}function PL(t){return ni(t,"iterate",De(t)?"length":ss),Reflect.ownKeys(t)}const dS={get:xL,set:kL,deleteProperty:AL,has:IL,ownKeys:PL},OL={get:SL,set(t,e){return!0},deleteProperty(t,e){return!0}},DL=dr({},dS,{get:TL,set:CL}),Xv=t=>t,kf=t=>Reflect.getPrototypeOf(t);function pd(t,e,r=!1,n=!1){t=t.__v_raw;const i=at(t),a=at(e);r||(e!==a&&ni(i,"get",e),ni(i,"get",a));const{has:s}=kf(i),o=n?Xv:r?Zv:Sc;if(s.call(i,e))return o(t.get(e));if(s.call(i,a))return o(t.get(a));t!==i&&t.get(e)}function gd(t,e=!1){const r=this.__v_raw,n=at(r),i=at(t);return e||(t!==i&&ni(n,"has",t),ni(n,"has",i)),t===i?r.has(t):r.has(t)||r.has(i)}function md(t,e=!1){return t=t.__v_raw,!e&&ni(at(t),"iterate",ss),Reflect.get(t,"size",t)}function Nw(t){t=at(t);const e=at(this);return kf(e).has.call(e,t)||(e.add(t),Cn(e,"add",t,t)),this}function jw(t,e){e=at(e);const r=at(this),{has:n,get:i}=kf(r);let a=n.call(r,t);a||(t=at(t),a=n.call(r,t));const s=i.call(r,t);return r.set(t,e),a?xc(e,s)&&Cn(r,"set",t,e):Cn(r,"add",t,e),this}function Fw(t){const e=at(this),{has:r,get:n}=kf(e);let i=r.call(e,t);i||(t=at(t),i=r.call(e,t)),n&&n.call(e,t);const a=e.delete(t);return i&&Cn(e,"delete",t,void 0),a}function Bw(){const t=at(this),e=t.size!==0,r=t.clear();return e&&Cn(t,"clear",void 0,void 0),r}function vd(t,e){return function(n,i){const a=this,s=a.__v_raw,o=at(s),l=e?Xv:t?Zv:Sc;return!t&&ni(o,"iterate",ss),s.forEach((c,u)=>n.call(i,l(c),l(u),a))}}function yd(t,e,r){return function(...n){const i=this.__v_raw,a=at(i),s=ho(a),o=t==="entries"||t===Symbol.iterator&&s,l=t==="keys"&&s,c=i[t](...n),u=r?Xv:e?Zv:Sc;return!e&&ni(a,"iterate",l?am:ss),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:o?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function qn(t){return function(...e){return t==="delete"?!1:this}}function LL(){const t={get(a){return pd(this,a)},get size(){return md(this)},has:gd,add:Nw,set:jw,delete:Fw,clear:Bw,forEach:vd(!1,!1)},e={get(a){return pd(this,a,!1,!0)},get size(){return md(this)},has:gd,add:Nw,set:jw,delete:Fw,clear:Bw,forEach:vd(!1,!0)},r={get(a){return pd(this,a,!0)},get size(){return md(this,!0)},has(a){return gd.call(this,a,!0)},add:qn("add"),set:qn("set"),delete:qn("delete"),clear:qn("clear"),forEach:vd(!0,!1)},n={get(a){return pd(this,a,!0,!0)},get size(){return md(this,!0)},has(a){return gd.call(this,a,!0)},add:qn("add"),set:qn("set"),delete:qn("delete"),clear:qn("clear"),forEach:vd(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=yd(a,!1,!1),r[a]=yd(a,!0,!1),e[a]=yd(a,!1,!0),n[a]=yd(a,!0,!0)}),[t,r,e,n]}const[RL,ML,NL,jL]=LL();function Qv(t,e){const r=e?t?jL:NL:t?ML:RL;return(n,i,a)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?n:Reflect.get(et(r,i)&&i in n?r:n,i,a)}const FL={get:Qv(!1,!1)},BL={get:Qv(!1,!0)},UL={get:Qv(!0,!1)},hS=new WeakMap,fS=new WeakMap,pS=new WeakMap,zL=new WeakMap;function $L(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VL(t){return t.__v_skip||!Object.isExtensible(t)?0:$L(fL(t))}function rl(t){return Tc(t)?t:Jv(t,!1,dS,FL,hS)}function HL(t){return Jv(t,!1,DL,BL,fS)}function gS(t){return Jv(t,!0,OL,UL,pS)}function Jv(t,e,r,n,i){if(!Dt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=i.get(t);if(a)return a;const s=VL(t);if(s===0)return t;const o=new Proxy(t,s===2?n:r);return i.set(t,o),o}function fo(t){return Tc(t)?fo(t.__v_raw):!!(t&&t.__v_isReactive)}function Tc(t){return!!(t&&t.__v_isReadonly)}function om(t){return!!(t&&t.__v_isShallow)}function mS(t){return fo(t)||Tc(t)}function at(t){const e=t&&t.__v_raw;return e?at(e):t}function vS(t){return ph(t,"__v_skip",!0),t}const Sc=t=>Dt(t)?rl(t):t,Zv=t=>Dt(t)?gS(t):t;function yS(t){ca&&Si&&(t=at(t),lS(t.dep||(t.dep=Wv())))}function bS(t,e){t=at(t),t.dep&&sm(t.dep)}function yr(t){return!!(t&&t.__v_isRef===!0)}function mt(t){return _S(t,!1)}function wS(t){return _S(t,!0)}function _S(t,e){return yr(t)?t:new qL(t,e)}class qL{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:at(e),this._value=r?e:Sc(e)}get value(){return yS(this),this._value}set value(e){e=this.__v_isShallow?e:at(e),xc(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Sc(e),bS(this))}}function Et(t){return yr(t)?t.value:t}const GL={get:(t,e,r)=>Et(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return yr(i)&&!yr(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function xS(t){return fo(t)?t:new Proxy(t,GL)}class WL{constructor(e,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Kv(e,()=>{this._dirty||(this._dirty=!0,bS(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=at(this);return yS(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function KL(t,e,r=!1){let n,i;const a=Ge(t);return a?(n=t,i=Ci):(n=t.get,i=t.set),new WL(n,i,a||!i,r)}function ua(t,e,r,n){let i;try{i=n?t(...n):t()}catch(a){Cf(a,e,r)}return i}function hi(t,e,r,n){if(Ge(t)){const a=ua(t,e,r,n);return a&&tS(a)&&a.catch(s=>{Cf(s,e,r)}),a}const i=[];for(let a=0;a<t.length;a++)i.push(hi(t[a],e,r,n));return i}function Cf(t,e,r,n=!0){const i=e?e.vnode:null;if(e){let a=e.parent;const s=e.proxy,o=r;for(;a;){const c=a.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,s,o)===!1)return}a=a.parent}const l=e.appContext.config.errorHandler;if(l){ua(l,null,10,[t,s,o]);return}}YL(t,r,i,n)}function YL(t,e,r,n=!0){console.error(t)}let mh=!1,lm=!1;const ei=[];let mn=0;const tc=[];let Vl=null,Qs=0;const rc=[];let Jn=null,Js=0;const TS=Promise.resolve();let e0=null,cm=null;function t0(t){const e=e0||TS;return t?e.then(this?t.bind(this):t):e}function XL(t){let e=mn+1,r=ei.length;for(;e<r;){const n=e+r>>>1;Ec(ei[n])<t?e=n+1:r=n}return e}function SS(t){(!ei.length||!ei.includes(t,mh&&t.allowRecurse?mn+1:mn))&&t!==cm&&(t.id==null?ei.push(t):ei.splice(XL(t.id),0,t),ES())}function ES(){!mh&&!lm&&(lm=!0,e0=TS.then(AS))}function QL(t){const e=ei.indexOf(t);e>mn&&ei.splice(e,1)}function kS(t,e,r,n){De(t)?r.push(...t):(!e||!e.includes(t,t.allowRecurse?n+1:n))&&r.push(t),ES()}function JL(t){kS(t,Vl,tc,Qs)}function ZL(t){kS(t,Jn,rc,Js)}function Af(t,e=null){if(tc.length){for(cm=e,Vl=[...new Set(tc)],tc.length=0,Qs=0;Qs<Vl.length;Qs++)Vl[Qs]();Vl=null,Qs=0,cm=null,Af(t,e)}}function CS(t){if(Af(),rc.length){const e=[...new Set(rc)];if(rc.length=0,Jn){Jn.push(...e);return}for(Jn=e,Jn.sort((r,n)=>Ec(r)-Ec(n)),Js=0;Js<Jn.length;Js++)Jn[Js]();Jn=null,Js=0}}const Ec=t=>t.id==null?1/0:t.id;function AS(t){lm=!1,mh=!0,Af(t),ei.sort((r,n)=>Ec(r)-Ec(n));const e=Ci;try{for(mn=0;mn<ei.length;mn++){const r=ei[mn];r&&r.active!==!1&&ua(r,null,14)}}finally{mn=0,ei.length=0,CS(),mh=!1,e0=null,(ei.length||tc.length||rc.length)&&AS(t)}}function eR(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||vt;let i=r;const a=e.startsWith("update:"),s=a&&e.slice(7);if(s&&s in n){const u=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:h}=n[u]||vt;h&&(i=r.map(p=>p.trim())),d&&(i=r.map(gh))}let o,l=n[o=Xp(e)]||n[o=Xp(nn(e))];!l&&a&&(l=n[o=Xp(Zo(e))]),l&&hi(l,t,6,i);const c=n[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,hi(c,t,6,i)}}function IS(t,e,r=!1){const n=e.emitsCache,i=n.get(t);if(i!==void 0)return i;const a=t.emits;let s={},o=!1;if(!Ge(t)){const l=c=>{const u=IS(c,e,!0);u&&(o=!0,dr(s,u))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!a&&!o?(n.set(t,null),null):(De(a)?a.forEach(l=>s[l]=null):dr(s,a),n.set(t,s),s)}function If(t,e){return!t||!xf(e)?!1:(e=e.slice(2).replace(/Once$/,""),et(t,e[0].toLowerCase()+e.slice(1))||et(t,Zo(e))||et(t,e))}let di=null,PS=null;function vh(t){const e=di;return di=t,PS=t&&t.type.__scopeId||null,e}function Je(t,e=di,r){if(!e||t._n)return t;const n=(...i)=>{n._d&&Qw(-1);const a=vh(e),s=t(...i);return vh(a),n._d&&Qw(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function Qp(t){const{type:e,vnode:r,proxy:n,withProxy:i,props:a,propsOptions:[s],slots:o,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:p,ctx:b,inheritAttrs:w}=t;let v,T;const E=vh(t);try{if(r.shapeFlag&4){const k=i||n;v=Ui(u.call(k,k,d,a,p,h,b)),T=l}else{const k=e;v=Ui(k.length>1?k(a,{attrs:l,slots:o,emit:c}):k(a,null)),T=e.props?l:tR(l)}}catch(k){nc.length=0,Cf(k,t,1),v=xe(Ai)}let A=v;if(T&&w!==!1){const k=Object.keys(T),{shapeFlag:I}=A;k.length&&I&7&&(s&&k.some(Hv)&&(T=rR(T,s)),A=An(A,T))}return r.dirs&&(A=An(A),A.dirs=A.dirs?A.dirs.concat(r.dirs):r.dirs),r.transition&&(A.transition=r.transition),v=A,vh(E),v}const tR=t=>{let e;for(const r in t)(r==="class"||r==="style"||xf(r))&&((e||(e={}))[r]=t[r]);return e},rR=(t,e)=>{const r={};for(const n in t)(!Hv(n)||!(n.slice(9)in e))&&(r[n]=t[n]);return r};function iR(t,e,r){const{props:n,children:i,component:a}=t,{props:s,children:o,patchFlag:l}=e,c=a.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Uw(n,s,c):!!s;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(s[h]!==n[h]&&!If(c,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===s?!1:n?s?Uw(n,s,c):!0:!!s;return!1}function Uw(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(e[a]!==t[a]&&!If(r,a))return!0}return!1}function nR({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const aR=t=>t.__isSuspense;function sR(t,e){e&&e.pendingBranch?De(t)?e.effects.push(...t):e.effects.push(t):ZL(t)}function Wi(t,e){if(Zt){let r=Zt.provides;const n=Zt.parent&&Zt.parent.provides;n===r&&(r=Zt.provides=Object.create(n)),r[t]=e}}function fi(t,e,r=!1){const n=Zt||di;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return r&&Ge(e)?e.call(n.proxy):e}}function As(t,e){return r0(t,null,e)}const zw={};function os(t,e,r){return r0(t,e,r)}function r0(t,e,{immediate:r,deep:n,flush:i,onTrack:a,onTrigger:s}=vt){const o=Zt;let l,c=!1,u=!1;if(yr(t)?(l=()=>t.value,c=om(t)):fo(t)?(l=()=>t,n=!0):De(t)?(u=!0,c=t.some(T=>fo(T)||om(T)),l=()=>t.map(T=>{if(yr(T))return T.value;if(fo(T))return Ja(T);if(Ge(T))return ua(T,o,2)})):Ge(t)?e?l=()=>ua(t,o,2):l=()=>{if(!(o&&o.isUnmounted))return d&&d(),hi(t,o,3,[h])}:l=Ci,e&&n){const T=l;l=()=>Ja(T())}let d,h=T=>{d=v.onStop=()=>{ua(T,o,4)}};if(Ac)return h=Ci,e?r&&hi(e,o,3,[l(),u?[]:void 0,h]):l(),Ci;let p=u?[]:zw;const b=()=>{if(!!v.active)if(e){const T=v.run();(n||c||(u?T.some((E,A)=>xc(E,p[A])):xc(T,p)))&&(d&&d(),hi(e,o,3,[T,p===zw?void 0:p,h]),p=T)}else v.run()};b.allowRecurse=!!e;let w;i==="sync"?w=b:i==="post"?w=()=>Ur(b,o&&o.suspense):w=()=>JL(b);const v=new Kv(l,w);return e?r?b():p=v.run():i==="post"?Ur(v.run.bind(v),o&&o.suspense):v.run(),()=>{v.stop(),o&&o.scope&&qv(o.scope.effects,v)}}function oR(t,e,r){const n=this.proxy,i=Vt(t)?t.includes(".")?OS(n,t):()=>n[t]:t.bind(n,n);let a;Ge(e)?a=e:(a=e.handler,r=e);const s=Zt;To(this);const o=r0(i,a.bind(n),r);return s?To(s):ls(),o}function OS(t,e){const r=e.split(".");return()=>{let n=t;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Ja(t,e){if(!Dt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),yr(t))Ja(t.value,e);else if(De(t))for(let r=0;r<t.length;r++)Ja(t[r],e);else if(Tf(t)||ho(t))t.forEach(r=>{Ja(r,e)});else if(iS(t))for(const r in t)Ja(t[r],e);return t}function lR(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Is(()=>{t.isMounted=!0}),Df(()=>{t.isUnmounting=!0}),t}const oi=[Function,Array],cR={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:oi,onEnter:oi,onAfterEnter:oi,onEnterCancelled:oi,onBeforeLeave:oi,onLeave:oi,onAfterLeave:oi,onLeaveCancelled:oi,onBeforeAppear:oi,onAppear:oi,onAfterAppear:oi,onAppearCancelled:oi},setup(t,{slots:e}){const r=WR(),n=lR();let i;return()=>{const a=e.default&&RS(e.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){for(const w of a)if(w.type!==Ai){s=w;break}}const o=at(t),{mode:l}=o;if(n.isLeaving)return Jp(s);const c=$w(s);if(!c)return Jp(s);const u=um(c,o,n,r);dm(c,u);const d=r.subTree,h=d&&$w(d);let p=!1;const{getTransitionKey:b}=c.type;if(b){const w=b();i===void 0?i=w:w!==i&&(i=w,p=!0)}if(h&&h.type!==Ai&&(!Wa(c,h)||p)){const w=um(h,o,n,r);if(dm(h,w),l==="out-in")return n.isLeaving=!0,w.afterLeave=()=>{n.isLeaving=!1,r.update()},Jp(s);l==="in-out"&&c.type!==Ai&&(w.delayLeave=(v,T,E)=>{const A=LS(n,h);A[String(h.key)]=h,v._leaveCb=()=>{T(),v._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=E})}return s}}},DS=cR;function LS(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function um(t,e,r,n){const{appear:i,mode:a,persisted:s=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:b,onBeforeAppear:w,onAppear:v,onAfterAppear:T,onAppearCancelled:E}=e,A=String(t.key),k=LS(r,t),I=(D,z)=>{D&&hi(D,n,9,z)},F=(D,z)=>{const M=z[1];I(D,z),De(D)?D.every(U=>U.length<=1)&&M():D.length<=1&&M()},j={mode:a,persisted:s,beforeEnter(D){let z=o;if(!r.isMounted)if(i)z=w||o;else return;D._leaveCb&&D._leaveCb(!0);const M=k[A];M&&Wa(t,M)&&M.el._leaveCb&&M.el._leaveCb(),I(z,[D])},enter(D){let z=l,M=c,U=u;if(!r.isMounted)if(i)z=v||l,M=T||c,U=E||u;else return;let P=!1;const q=D._enterCb=X=>{P||(P=!0,X?I(U,[D]):I(M,[D]),j.delayedLeave&&j.delayedLeave(),D._enterCb=void 0)};z?F(z,[D,q]):q()},leave(D,z){const M=String(t.key);if(D._enterCb&&D._enterCb(!0),r.isUnmounting)return z();I(d,[D]);let U=!1;const P=D._leaveCb=q=>{U||(U=!0,z(),q?I(b,[D]):I(p,[D]),D._leaveCb=void 0,k[M]===t&&delete k[M])};k[M]=t,h?F(h,[D,P]):P()},clone(D){return um(D,e,r,n)}};return j}function Jp(t){if(Pf(t))return t=An(t),t.children=null,t}function $w(t){return Pf(t)?t.children?t.children[0]:void 0:t}function dm(t,e){t.shapeFlag&6&&t.component?dm(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function RS(t,e=!1,r){let n=[],i=0;for(let a=0;a<t.length;a++){let s=t[a];const o=r==null?s.key:String(r)+String(s.key!=null?s.key:a);s.type===Ct?(s.patchFlag&128&&i++,n=n.concat(RS(s.children,e,o))):(e||s.type!==Ai)&&n.push(o!=null?An(s,{key:o}):s)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function ti(t){return Ge(t)?{setup:t,name:t.name}:t}const Wd=t=>!!t.type.__asyncLoader,Pf=t=>t.type.__isKeepAlive;function uR(t,e){MS(t,"a",e)}function dR(t,e){MS(t,"da",e)}function MS(t,e,r=Zt){const n=t.__wdc||(t.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Of(e,n,r),r){let i=r.parent;for(;i&&i.parent;)Pf(i.parent.vnode)&&hR(n,e,r,i),i=i.parent}}function hR(t,e,r,n){const i=Of(e,t,n,!0);Lf(()=>{qv(n[e],i)},r)}function Of(t,e,r=Zt,n=!1){if(r){const i=r[t]||(r[t]=[]),a=e.__weh||(e.__weh=(...s)=>{if(r.isUnmounted)return;el(),To(r);const o=hi(e,r,t,s);return ls(),tl(),o});return n?i.unshift(a):i.push(a),a}}const Un=t=>(e,r=Zt)=>(!Ac||t==="sp")&&Of(t,e,r),fR=Un("bm"),Is=Un("m"),NS=Un("bu"),i0=Un("u"),Df=Un("bum"),Lf=Un("um"),pR=Un("sp"),gR=Un("rtg"),mR=Un("rtc");function vR(t,e=Zt){Of("ec",t,e)}function yR(t,e){const r=di;if(r===null)return t;const n=Mf(r)||r.proxy,i=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[s,o,l,c=vt]=e[a];Ge(s)&&(s={mounted:s,updated:s}),s.deep&&Ja(o),i.push({dir:s,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c})}return t}function Ba(t,e,r,n){const i=t.dirs,a=e&&e.dirs;for(let s=0;s<i.length;s++){const o=i[s];a&&(o.oldValue=a[s].value);let l=o.dir[n];l&&(el(),hi(l,r,8,[t.el,o,t,e]),tl())}}const n0="components",bR="directives";function kc(t,e){return a0(n0,t,!0,e)||t}const jS=Symbol();function Kd(t){return Vt(t)?a0(n0,t,!1)||t:t||jS}function wR(t){return a0(bR,t)}function a0(t,e,r=!0,n=!1){const i=di||Zt;if(i){const a=i.type;if(t===n0){const o=JR(a,!1);if(o&&(o===e||o===nn(e)||o===Ef(nn(e))))return a}const s=Vw(i[t]||a[t],e)||Vw(i.appContext[t],e);return!s&&n?a:s}}function Vw(t,e){return t&&(t[e]||t[nn(e)]||t[Ef(nn(e))])}function sa(t,e,r,n){let i;const a=r&&r[n];if(De(t)||Vt(t)){i=new Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=e(t[s],s,void 0,a&&a[s])}else if(typeof t=="number"){i=new Array(t);for(let s=0;s<t;s++)i[s]=e(s+1,s,void 0,a&&a[s])}else if(Dt(t))if(t[Symbol.iterator])i=Array.from(t,(s,o)=>e(s,o,void 0,a&&a[o]));else{const s=Object.keys(t);i=new Array(s.length);for(let o=0,l=s.length;o<l;o++){const c=s[o];i[o]=e(t[c],c,o,a&&a[o])}}else i=[];return r&&(r[n]=i),i}const hm=t=>t?KS(t)?Mf(t)||t.proxy:hm(t.parent):null,yh=dr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>hm(t.parent),$root:t=>hm(t.root),$emit:t=>t.emit,$options:t=>BS(t),$forceUpdate:t=>t.f||(t.f=()=>SS(t.update)),$nextTick:t=>t.n||(t.n=t0.bind(t.proxy)),$watch:t=>oR.bind(t)}),_R={get({_:t},e){const{ctx:r,setupState:n,data:i,props:a,accessCache:s,type:o,appContext:l}=t;let c;if(e[0]!=="$"){const p=s[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return r[e];case 3:return a[e]}else{if(n!==vt&&et(n,e))return s[e]=1,n[e];if(i!==vt&&et(i,e))return s[e]=2,i[e];if((c=t.propsOptions[0])&&et(c,e))return s[e]=3,a[e];if(r!==vt&&et(r,e))return s[e]=4,r[e];fm&&(s[e]=0)}}const u=yh[e];let d,h;if(u)return e==="$attrs"&&ni(t,"get",e),u(t);if((d=o.__cssModules)&&(d=d[e]))return d;if(r!==vt&&et(r,e))return s[e]=4,r[e];if(h=l.config.globalProperties,et(h,e))return h[e]},set({_:t},e,r){const{data:n,setupState:i,ctx:a}=t;return i!==vt&&et(i,e)?(i[e]=r,!0):n!==vt&&et(n,e)?(n[e]=r,!0):et(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:i,propsOptions:a}},s){let o;return!!r[s]||t!==vt&&et(t,s)||e!==vt&&et(e,s)||(o=a[0])&&et(o,s)||et(n,s)||et(yh,s)||et(i.config.globalProperties,s)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:et(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};let fm=!0;function xR(t){const e=BS(t),r=t.proxy,n=t.ctx;fm=!1,e.beforeCreate&&Hw(e.beforeCreate,t,"bc");const{data:i,computed:a,methods:s,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:b,activated:w,deactivated:v,beforeDestroy:T,beforeUnmount:E,destroyed:A,unmounted:k,render:I,renderTracked:F,renderTriggered:j,errorCaptured:D,serverPrefetch:z,expose:M,inheritAttrs:U,components:P,directives:q,filters:X}=e;if(c&&TR(c,n,null,t.appContext.config.unwrapInjectedRef),s)for(const ae in s){const oe=s[ae];Ge(oe)&&(n[ae]=oe.bind(r))}if(i){const ae=i.call(r,r);Dt(ae)&&(t.data=rl(ae))}if(fm=!0,a)for(const ae in a){const oe=a[ae],Re=Ge(oe)?oe.bind(r,r):Ge(oe.get)?oe.get.bind(r,r):Ci,Le=!Ge(oe)&&Ge(oe.set)?oe.set.bind(r):Ci,ft=It({get:Re,set:Le});Object.defineProperty(n,ae,{enumerable:!0,configurable:!0,get:()=>ft.value,set:it=>ft.value=it})}if(o)for(const ae in o)FS(o[ae],n,r,ae);if(l){const ae=Ge(l)?l.call(r):l;Reflect.ownKeys(ae).forEach(oe=>{Wi(oe,ae[oe])})}u&&Hw(u,t,"c");function te(ae,oe){De(oe)?oe.forEach(Re=>ae(Re.bind(r))):oe&&ae(oe.bind(r))}if(te(fR,d),te(Is,h),te(NS,p),te(i0,b),te(uR,w),te(dR,v),te(vR,D),te(mR,F),te(gR,j),te(Df,E),te(Lf,k),te(pR,z),De(M))if(M.length){const ae=t.exposed||(t.exposed={});M.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>r[oe],set:Re=>r[oe]=Re})})}else t.exposed||(t.exposed={});I&&t.render===Ci&&(t.render=I),U!=null&&(t.inheritAttrs=U),P&&(t.components=P),q&&(t.directives=q)}function TR(t,e,r=Ci,n=!1){De(t)&&(t=pm(t));for(const i in t){const a=t[i];let s;Dt(a)?"default"in a?s=fi(a.from||i,a.default,!0):s=fi(a.from||i):s=fi(a),yr(s)&&n?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function Hw(t,e,r){hi(De(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,r)}function FS(t,e,r,n){const i=n.includes(".")?OS(r,n):()=>r[n];if(Vt(t)){const a=e[t];Ge(a)&&os(i,a)}else if(Ge(t))os(i,t.bind(r));else if(Dt(t))if(De(t))t.forEach(a=>FS(a,e,r,n));else{const a=Ge(t.handler)?t.handler.bind(r):e[t.handler];Ge(a)&&os(i,a,t)}}function BS(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:s}}=t.appContext,o=a.get(e);let l;return o?l=o:!i.length&&!r&&!n?l=e:(l={},i.length&&i.forEach(c=>bh(l,c,s,!0)),bh(l,e,s)),a.set(e,l),l}function bh(t,e,r,n=!1){const{mixins:i,extends:a}=e;a&&bh(t,a,r,!0),i&&i.forEach(s=>bh(t,s,r,!0));for(const s in e)if(!(n&&s==="expose")){const o=SR[s]||r&&r[s];t[s]=o?o(t[s],e[s]):e[s]}return t}const SR={data:qw,props:Ha,emits:Ha,methods:Ha,computed:Ha,beforeCreate:Or,created:Or,beforeMount:Or,mounted:Or,beforeUpdate:Or,updated:Or,beforeDestroy:Or,beforeUnmount:Or,destroyed:Or,unmounted:Or,activated:Or,deactivated:Or,errorCaptured:Or,serverPrefetch:Or,components:Ha,directives:Ha,watch:kR,provide:qw,inject:ER};function qw(t,e){return e?t?function(){return dr(Ge(t)?t.call(this,this):t,Ge(e)?e.call(this,this):e)}:e:t}function ER(t,e){return Ha(pm(t),pm(e))}function pm(t){if(De(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Or(t,e){return t?[...new Set([].concat(t,e))]:e}function Ha(t,e){return t?dr(dr(Object.create(null),t),e):e}function kR(t,e){if(!t)return e;if(!e)return t;const r=dr(Object.create(null),t);for(const n in e)r[n]=Or(t[n],e[n]);return r}function CR(t,e,r,n=!1){const i={},a={};ph(a,Rf,1),t.propsDefaults=Object.create(null),US(t,e,i,a);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);r?t.props=n?i:HL(i):t.type.props?t.props=i:t.props=a,t.attrs=a}function AR(t,e,r,n){const{props:i,attrs:a,vnode:{patchFlag:s}}=t,o=at(i),[l]=t.propsOptions;let c=!1;if((n||s>0)&&!(s&16)){if(s&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(If(t.emitsOptions,h))continue;const p=e[h];if(l)if(et(a,h))p!==a[h]&&(a[h]=p,c=!0);else{const b=nn(h);i[b]=gm(l,o,b,p,t,!1)}else p!==a[h]&&(a[h]=p,c=!0)}}}else{US(t,e,i,a)&&(c=!0);let u;for(const d in o)(!e||!et(e,d)&&((u=Zo(d))===d||!et(e,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(i[d]=gm(l,o,d,void 0,t,!0)):delete i[d]);if(a!==o)for(const d in a)(!e||!et(e,d)&&!0)&&(delete a[d],c=!0)}c&&Cn(t,"set","$attrs")}function US(t,e,r,n){const[i,a]=t.propsOptions;let s=!1,o;if(e)for(let l in e){if(qd(l))continue;const c=e[l];let u;i&&et(i,u=nn(l))?!a||!a.includes(u)?r[u]=c:(o||(o={}))[u]=c:If(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,s=!0)}if(a){const l=at(r),c=o||vt;for(let u=0;u<a.length;u++){const d=a[u];r[d]=gm(i,l,d,c[d],t,!et(c,d))}}return s}function gm(t,e,r,n,i,a){const s=t[r];if(s!=null){const o=et(s,"default");if(o&&n===void 0){const l=s.default;if(s.type!==Function&&Ge(l)){const{propsDefaults:c}=i;r in c?n=c[r]:(To(i),n=c[r]=l.call(null,e),ls())}else n=l}s[0]&&(a&&!o?n=!1:s[1]&&(n===""||n===Zo(r))&&(n=!0))}return n}function zS(t,e,r=!1){const n=e.propsCache,i=n.get(t);if(i)return i;const a=t.props,s={},o=[];let l=!1;if(!Ge(t)){const u=d=>{l=!0;const[h,p]=zS(d,e,!0);dr(s,h),p&&o.push(...p)};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!a&&!l)return n.set(t,uo),uo;if(De(a))for(let u=0;u<a.length;u++){const d=nn(a[u]);Gw(d)&&(s[d]=vt)}else if(a)for(const u in a){const d=nn(u);if(Gw(d)){const h=a[u],p=s[d]=De(h)||Ge(h)?{type:h}:h;if(p){const b=Yw(Boolean,p.type),w=Yw(String,p.type);p[0]=b>-1,p[1]=w<0||b<w,(b>-1||et(p,"default"))&&o.push(d)}}}const c=[s,o];return n.set(t,c),c}function Gw(t){return t[0]!=="$"}function Ww(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Kw(t,e){return Ww(t)===Ww(e)}function Yw(t,e){return De(e)?e.findIndex(r=>Kw(r,t)):Ge(e)&&Kw(e,t)?0:-1}const $S=t=>t[0]==="_"||t==="$stable",s0=t=>De(t)?t.map(Ui):[Ui(t)],IR=(t,e,r)=>{if(e._n)return e;const n=Je((...i)=>s0(e(...i)),r);return n._c=!1,n},VS=(t,e,r)=>{const n=t._ctx;for(const i in t){if($S(i))continue;const a=t[i];if(Ge(a))e[i]=IR(i,a,n);else if(a!=null){const s=s0(a);e[i]=()=>s}}},HS=(t,e)=>{const r=s0(e);t.slots.default=()=>r},PR=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=at(e),ph(e,"_",r)):VS(e,t.slots={})}else t.slots={},e&&HS(t,e);ph(t.slots,Rf,1)},OR=(t,e,r)=>{const{vnode:n,slots:i}=t;let a=!0,s=vt;if(n.shapeFlag&32){const o=e._;o?r&&o===1?a=!1:(dr(i,e),!r&&o===1&&delete i._):(a=!e.$stable,VS(e,i)),s=e}else e&&(HS(t,e),s={default:1});if(a)for(const o in i)!$S(o)&&!(o in s)&&delete i[o]};function qS(){return{app:null,config:{isNativeTag:uL,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let DR=0;function LR(t,e){return function(n,i=null){Ge(n)||(n=Object.assign({},n)),i!=null&&!Dt(i)&&(i=null);const a=qS(),s=new Set;let o=!1;const l=a.app={_uid:DR++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:eM,get config(){return a.config},set config(c){},use(c,...u){return s.has(c)||(c&&Ge(c.install)?(s.add(c),c.install(l,...u)):Ge(c)&&(s.add(c),c(l,...u))),l},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),l},component(c,u){return u?(a.components[c]=u,l):a.components[c]},directive(c,u){return u?(a.directives[c]=u,l):a.directives[c]},mount(c,u,d){if(!o){const h=xe(n,i);return h.appContext=a,u&&e?e(h,c):t(h,c,d),o=!0,l._container=c,c.__vue_app__=l,Mf(h.component)||h.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return a.provides[c]=u,l}};return l}}function mm(t,e,r,n,i=!1){if(De(t)){t.forEach((h,p)=>mm(h,e&&(De(e)?e[p]:e),r,n,i));return}if(Wd(n)&&!i)return;const a=n.shapeFlag&4?Mf(n.component)||n.component.proxy:n.el,s=i?null:a,{i:o,r:l}=t,c=e&&e.r,u=o.refs===vt?o.refs={}:o.refs,d=o.setupState;if(c!=null&&c!==l&&(Vt(c)?(u[c]=null,et(d,c)&&(d[c]=null)):yr(c)&&(c.value=null)),Ge(l))ua(l,o,12,[s,u]);else{const h=Vt(l),p=yr(l);if(h||p){const b=()=>{if(t.f){const w=h?u[l]:l.value;i?De(w)&&qv(w,a):De(w)?w.includes(a)||w.push(a):h?(u[l]=[a],et(d,l)&&(d[l]=u[l])):(l.value=[a],t.k&&(u[t.k]=l.value))}else h?(u[l]=s,et(d,l)&&(d[l]=s)):p&&(l.value=s,t.k&&(u[t.k]=s))};s?(b.id=-1,Ur(b,r)):b()}}}const Ur=sR;function RR(t){return MR(t)}function MR(t,e){const r=mL();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:s,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=Ci,cloneNode:b,insertStaticContent:w}=t,v=(R,V,G,Q=null,Y=null,ue=null,ee=!1,ie=null,de=!!V.dynamicChildren)=>{if(R===V)return;R&&!Wa(R,V)&&(Q=be(R),pt(R,Y,ue,!0),R=null),V.patchFlag===-2&&(de=!1,V.dynamicChildren=null);const{type:re,ref:Se,shapeFlag:_e}=V;switch(re){case l0:T(R,V,G,Q);break;case Ai:E(R,V,G,Q);break;case Yd:R==null&&A(V,G,Q,ee);break;case Ct:q(R,V,G,Q,Y,ue,ee,ie,de);break;default:_e&1?F(R,V,G,Q,Y,ue,ee,ie,de):_e&6?X(R,V,G,Q,Y,ue,ee,ie,de):(_e&64||_e&128)&&re.process(R,V,G,Q,Y,ue,ee,ie,de,st)}Se!=null&&Y&&mm(Se,R&&R.ref,ue,V||R,!V)},T=(R,V,G,Q)=>{if(R==null)n(V.el=o(V.children),G,Q);else{const Y=V.el=R.el;V.children!==R.children&&c(Y,V.children)}},E=(R,V,G,Q)=>{R==null?n(V.el=l(V.children||""),G,Q):V.el=R.el},A=(R,V,G,Q)=>{[R.el,R.anchor]=w(R.children,V,G,Q,R.el,R.anchor)},k=({el:R,anchor:V},G,Q)=>{let Y;for(;R&&R!==V;)Y=h(R),n(R,G,Q),R=Y;n(V,G,Q)},I=({el:R,anchor:V})=>{let G;for(;R&&R!==V;)G=h(R),i(R),R=G;i(V)},F=(R,V,G,Q,Y,ue,ee,ie,de)=>{ee=ee||V.type==="svg",R==null?j(V,G,Q,Y,ue,ee,ie,de):M(R,V,Y,ue,ee,ie,de)},j=(R,V,G,Q,Y,ue,ee,ie)=>{let de,re;const{type:Se,props:_e,shapeFlag:Ee,transition:Pe,patchFlag:We,dirs:rt}=R;if(R.el&&b!==void 0&&We===-1)de=R.el=b(R.el);else{if(de=R.el=s(R.type,ue,_e&&_e.is,_e),Ee&8?u(de,R.children):Ee&16&&z(R.children,de,null,Q,Y,ue&&Se!=="foreignObject",ee,ie),rt&&Ba(R,null,Q,"created"),_e){for(const ht in _e)ht!=="value"&&!qd(ht)&&a(de,ht,null,_e[ht],ue,R.children,Q,Y,ce);"value"in _e&&a(de,"value",null,_e.value),(re=_e.onVnodeBeforeMount)&&Ni(re,Q,R)}D(de,R,R.scopeId,ee,Q)}rt&&Ba(R,null,Q,"beforeMount");const ot=(!Y||Y&&!Y.pendingBranch)&&Pe&&!Pe.persisted;ot&&Pe.beforeEnter(de),n(de,V,G),((re=_e&&_e.onVnodeMounted)||ot||rt)&&Ur(()=>{re&&Ni(re,Q,R),ot&&Pe.enter(de),rt&&Ba(R,null,Q,"mounted")},Y)},D=(R,V,G,Q,Y)=>{if(G&&p(R,G),Q)for(let ue=0;ue<Q.length;ue++)p(R,Q[ue]);if(Y){let ue=Y.subTree;if(V===ue){const ee=Y.vnode;D(R,ee,ee.scopeId,ee.slotScopeIds,Y.parent)}}},z=(R,V,G,Q,Y,ue,ee,ie,de=0)=>{for(let re=de;re<R.length;re++){const Se=R[re]=ie?Zn(R[re]):Ui(R[re]);v(null,Se,V,G,Q,Y,ue,ee,ie)}},M=(R,V,G,Q,Y,ue,ee)=>{const ie=V.el=R.el;let{patchFlag:de,dynamicChildren:re,dirs:Se}=V;de|=R.patchFlag&16;const _e=R.props||vt,Ee=V.props||vt;let Pe;G&&Ua(G,!1),(Pe=Ee.onVnodeBeforeUpdate)&&Ni(Pe,G,V,R),Se&&Ba(V,R,G,"beforeUpdate"),G&&Ua(G,!0);const We=Y&&V.type!=="foreignObject";if(re?U(R.dynamicChildren,re,ie,G,Q,We,ue):ee||Re(R,V,ie,null,G,Q,We,ue,!1),de>0){if(de&16)P(ie,V,_e,Ee,G,Q,Y);else if(de&2&&_e.class!==Ee.class&&a(ie,"class",null,Ee.class,Y),de&4&&a(ie,"style",_e.style,Ee.style,Y),de&8){const rt=V.dynamicProps;for(let ot=0;ot<rt.length;ot++){const ht=rt[ot],$e=_e[ht],Hn=Ee[ht];(Hn!==$e||ht==="value")&&a(ie,ht,$e,Hn,Y,R.children,G,Q,ce)}}de&1&&R.children!==V.children&&u(ie,V.children)}else!ee&&re==null&&P(ie,V,_e,Ee,G,Q,Y);((Pe=Ee.onVnodeUpdated)||Se)&&Ur(()=>{Pe&&Ni(Pe,G,V,R),Se&&Ba(V,R,G,"updated")},Q)},U=(R,V,G,Q,Y,ue,ee)=>{for(let ie=0;ie<V.length;ie++){const de=R[ie],re=V[ie],Se=de.el&&(de.type===Ct||!Wa(de,re)||de.shapeFlag&70)?d(de.el):G;v(de,re,Se,null,Q,Y,ue,ee,!0)}},P=(R,V,G,Q,Y,ue,ee)=>{if(G!==Q){for(const ie in Q){if(qd(ie))continue;const de=Q[ie],re=G[ie];de!==re&&ie!=="value"&&a(R,ie,re,de,ee,V.children,Y,ue,ce)}if(G!==vt)for(const ie in G)!qd(ie)&&!(ie in Q)&&a(R,ie,G[ie],null,ee,V.children,Y,ue,ce);"value"in Q&&a(R,"value",G.value,Q.value)}},q=(R,V,G,Q,Y,ue,ee,ie,de)=>{const re=V.el=R?R.el:o(""),Se=V.anchor=R?R.anchor:o("");let{patchFlag:_e,dynamicChildren:Ee,slotScopeIds:Pe}=V;Pe&&(ie=ie?ie.concat(Pe):Pe),R==null?(n(re,G,Q),n(Se,G,Q),z(V.children,G,Se,Y,ue,ee,ie,de)):_e>0&&_e&64&&Ee&&R.dynamicChildren?(U(R.dynamicChildren,Ee,G,Y,ue,ee,ie),(V.key!=null||Y&&V===Y.subTree)&&o0(R,V,!0)):Re(R,V,G,Se,Y,ue,ee,ie,de)},X=(R,V,G,Q,Y,ue,ee,ie,de)=>{V.slotScopeIds=ie,R==null?V.shapeFlag&512?Y.ctx.activate(V,G,Q,ee,de):fe(V,G,Q,Y,ue,ee,de):te(R,V,de)},fe=(R,V,G,Q,Y,ue,ee)=>{const ie=R.component=GR(R,Q,Y);if(Pf(R)&&(ie.ctx.renderer=st),KR(ie),ie.asyncDep){if(Y&&Y.registerDep(ie,ae),!R.el){const de=ie.subTree=xe(Ai);E(null,de,V,G)}return}ae(ie,R,V,G,Y,ue,ee)},te=(R,V,G)=>{const Q=V.component=R.component;if(iR(R,V,G))if(Q.asyncDep&&!Q.asyncResolved){oe(Q,V,G);return}else Q.next=V,QL(Q.update),Q.update();else V.el=R.el,Q.vnode=V},ae=(R,V,G,Q,Y,ue,ee)=>{const ie=()=>{if(R.isMounted){let{next:Se,bu:_e,u:Ee,parent:Pe,vnode:We}=R,rt=Se,ot;Ua(R,!1),Se?(Se.el=We.el,oe(R,Se,ee)):Se=We,_e&&Gd(_e),(ot=Se.props&&Se.props.onVnodeBeforeUpdate)&&Ni(ot,Pe,Se,We),Ua(R,!0);const ht=Qp(R),$e=R.subTree;R.subTree=ht,v($e,ht,d($e.el),be($e),R,Y,ue),Se.el=ht.el,rt===null&&nR(R,ht.el),Ee&&Ur(Ee,Y),(ot=Se.props&&Se.props.onVnodeUpdated)&&Ur(()=>Ni(ot,Pe,Se,We),Y)}else{let Se;const{el:_e,props:Ee}=V,{bm:Pe,m:We,parent:rt}=R,ot=Wd(V);if(Ua(R,!1),Pe&&Gd(Pe),!ot&&(Se=Ee&&Ee.onVnodeBeforeMount)&&Ni(Se,rt,V),Ua(R,!0),_e&&Ue){const ht=()=>{R.subTree=Qp(R),Ue(_e,R.subTree,R,Y,null)};ot?V.type.__asyncLoader().then(()=>!R.isUnmounted&&ht()):ht()}else{const ht=R.subTree=Qp(R);v(null,ht,G,Q,R,Y,ue),V.el=ht.el}if(We&&Ur(We,Y),!ot&&(Se=Ee&&Ee.onVnodeMounted)){const ht=V;Ur(()=>Ni(Se,rt,ht),Y)}(V.shapeFlag&256||rt&&Wd(rt.vnode)&&rt.vnode.shapeFlag&256)&&R.a&&Ur(R.a,Y),R.isMounted=!0,V=G=Q=null}},de=R.effect=new Kv(ie,()=>SS(re),R.scope),re=R.update=()=>de.run();re.id=R.uid,Ua(R,!0),re()},oe=(R,V,G)=>{V.component=R;const Q=R.vnode.props;R.vnode=V,R.next=null,AR(R,V.props,Q,G),OR(R,V.children,G),el(),Af(void 0,R.update),tl()},Re=(R,V,G,Q,Y,ue,ee,ie,de=!1)=>{const re=R&&R.children,Se=R?R.shapeFlag:0,_e=V.children,{patchFlag:Ee,shapeFlag:Pe}=V;if(Ee>0){if(Ee&128){ft(re,_e,G,Q,Y,ue,ee,ie,de);return}else if(Ee&256){Le(re,_e,G,Q,Y,ue,ee,ie,de);return}}Pe&8?(Se&16&&ce(re,Y,ue),_e!==re&&u(G,_e)):Se&16?Pe&16?ft(re,_e,G,Q,Y,ue,ee,ie,de):ce(re,Y,ue,!0):(Se&8&&u(G,""),Pe&16&&z(_e,G,Q,Y,ue,ee,ie,de))},Le=(R,V,G,Q,Y,ue,ee,ie,de)=>{R=R||uo,V=V||uo;const re=R.length,Se=V.length,_e=Math.min(re,Se);let Ee;for(Ee=0;Ee<_e;Ee++){const Pe=V[Ee]=de?Zn(V[Ee]):Ui(V[Ee]);v(R[Ee],Pe,G,null,Y,ue,ee,ie,de)}re>Se?ce(R,Y,ue,!0,!1,_e):z(V,G,Q,Y,ue,ee,ie,de,_e)},ft=(R,V,G,Q,Y,ue,ee,ie,de)=>{let re=0;const Se=V.length;let _e=R.length-1,Ee=Se-1;for(;re<=_e&&re<=Ee;){const Pe=R[re],We=V[re]=de?Zn(V[re]):Ui(V[re]);if(Wa(Pe,We))v(Pe,We,G,null,Y,ue,ee,ie,de);else break;re++}for(;re<=_e&&re<=Ee;){const Pe=R[_e],We=V[Ee]=de?Zn(V[Ee]):Ui(V[Ee]);if(Wa(Pe,We))v(Pe,We,G,null,Y,ue,ee,ie,de);else break;_e--,Ee--}if(re>_e){if(re<=Ee){const Pe=Ee+1,We=Pe<Se?V[Pe].el:Q;for(;re<=Ee;)v(null,V[re]=de?Zn(V[re]):Ui(V[re]),G,We,Y,ue,ee,ie,de),re++}}else if(re>Ee)for(;re<=_e;)pt(R[re],Y,ue,!0),re++;else{const Pe=re,We=re,rt=new Map;for(re=We;re<=Ee;re++){const Er=V[re]=de?Zn(V[re]):Ui(V[re]);Er.key!=null&&rt.set(Er.key,re)}let ot,ht=0;const $e=Ee-We+1;let Hn=!1,Gu=0;const Da=new Array($e);for(re=0;re<$e;re++)Da[re]=0;for(re=Pe;re<=_e;re++){const Er=R[re];if(ht>=$e){pt(Er,Y,ue,!0);continue}let kr;if(Er.key!=null)kr=rt.get(Er.key);else for(ot=We;ot<=Ee;ot++)if(Da[ot-We]===0&&Wa(Er,V[ot])){kr=ot;break}kr===void 0?pt(Er,Y,ue,!0):(Da[kr-We]=re+1,kr>=Gu?Gu=kr:Hn=!0,v(Er,V[kr],G,null,Y,ue,ee,ie,de),ht++)}const Wu=Hn?NR(Da):uo;for(ot=Wu.length-1,re=$e-1;re>=0;re--){const Er=We+re,kr=V[Er],Ku=Er+1<Se?V[Er+1].el:Q;Da[re]===0?v(null,kr,G,Ku,Y,ue,ee,ie,de):Hn&&(ot<0||re!==Wu[ot]?it(kr,G,Ku,2):ot--)}}},it=(R,V,G,Q,Y=null)=>{const{el:ue,type:ee,transition:ie,children:de,shapeFlag:re}=R;if(re&6){it(R.component.subTree,V,G,Q);return}if(re&128){R.suspense.move(V,G,Q);return}if(re&64){ee.move(R,V,G,st);return}if(ee===Ct){n(ue,V,G);for(let _e=0;_e<de.length;_e++)it(de[_e],V,G,Q);n(R.anchor,V,G);return}if(ee===Yd){k(R,V,G);return}if(Q!==2&&re&1&&ie)if(Q===0)ie.beforeEnter(ue),n(ue,V,G),Ur(()=>ie.enter(ue),Y);else{const{leave:_e,delayLeave:Ee,afterLeave:Pe}=ie,We=()=>n(ue,V,G),rt=()=>{_e(ue,()=>{We(),Pe&&Pe()})};Ee?Ee(ue,We,rt):rt()}else n(ue,V,G)},pt=(R,V,G,Q=!1,Y=!1)=>{const{type:ue,props:ee,ref:ie,children:de,dynamicChildren:re,shapeFlag:Se,patchFlag:_e,dirs:Ee}=R;if(ie!=null&&mm(ie,null,G,R,!0),Se&256){V.ctx.deactivate(R);return}const Pe=Se&1&&Ee,We=!Wd(R);let rt;if(We&&(rt=ee&&ee.onVnodeBeforeUnmount)&&Ni(rt,V,R),Se&6)ve(R.component,G,Q);else{if(Se&128){R.suspense.unmount(G,Q);return}Pe&&Ba(R,null,V,"beforeUnmount"),Se&64?R.type.remove(R,V,G,Y,st,Q):re&&(ue!==Ct||_e>0&&_e&64)?ce(re,V,G,!1,!0):(ue===Ct&&_e&384||!Y&&Se&16)&&ce(de,V,G),Q&&Ht(R)}(We&&(rt=ee&&ee.onVnodeUnmounted)||Pe)&&Ur(()=>{rt&&Ni(rt,V,R),Pe&&Ba(R,null,V,"unmounted")},G)},Ht=R=>{const{type:V,el:G,anchor:Q,transition:Y}=R;if(V===Ct){K(G,Q);return}if(V===Yd){I(R);return}const ue=()=>{i(G),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(R.shapeFlag&1&&Y&&!Y.persisted){const{leave:ee,delayLeave:ie}=Y,de=()=>ee(G,ue);ie?ie(R.el,ue,de):de()}else ue()},K=(R,V)=>{let G;for(;R!==V;)G=h(R),i(R),R=G;i(V)},ve=(R,V,G)=>{const{bum:Q,scope:Y,update:ue,subTree:ee,um:ie}=R;Q&&Gd(Q),Y.stop(),ue&&(ue.active=!1,pt(ee,R,V,G)),ie&&Ur(ie,V),Ur(()=>{R.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},ce=(R,V,G,Q=!1,Y=!1,ue=0)=>{for(let ee=ue;ee<R.length;ee++)pt(R[ee],V,G,Q,Y)},be=R=>R.shapeFlag&6?be(R.component.subTree):R.shapeFlag&128?R.suspense.next():h(R.anchor||R.el),Ye=(R,V,G)=>{R==null?V._vnode&&pt(V._vnode,null,null,!0):v(V._vnode||null,R,V,null,null,null,G),CS(),V._vnode=R},st={p:v,um:pt,m:it,r:Ht,mt:fe,mc:z,pc:Re,pbc:U,n:be,o:t};let Be,Ue;return e&&([Be,Ue]=e(st)),{render:Ye,hydrate:Be,createApp:LR(Ye,Be)}}function Ua({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function o0(t,e,r=!1){const n=t.children,i=e.children;if(De(n)&&De(i))for(let a=0;a<n.length;a++){const s=n[a];let o=i[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[a]=Zn(i[a]),o.el=s.el),r||o0(s,o))}}function NR(t){const e=t.slice(),r=[0];let n,i,a,s,o;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(i=r[r.length-1],t[i]<c){e[n]=i,r.push(n);continue}for(a=0,s=r.length-1;a<s;)o=a+s>>1,t[r[o]]<c?a=o+1:s=o;c<t[r[a]]&&(a>0&&(e[n]=r[a-1]),r[a]=n)}}for(a=r.length,s=r[a-1];a-- >0;)r[a]=s,s=e[s];return r}const jR=t=>t.__isTeleport,ic=t=>t&&(t.disabled||t.disabled===""),Xw=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,vm=(t,e)=>{const r=t&&t.to;return Vt(r)?e?e(r):null:r},FR={__isTeleport:!0,process(t,e,r,n,i,a,s,o,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:b,createText:w,createComment:v}}=c,T=ic(e.props);let{shapeFlag:E,children:A,dynamicChildren:k}=e;if(t==null){const I=e.el=w(""),F=e.anchor=w("");p(I,r,n),p(F,r,n);const j=e.target=vm(e.props,b),D=e.targetAnchor=w("");j&&(p(D,j),s=s||Xw(j));const z=(M,U)=>{E&16&&u(A,M,U,i,a,s,o,l)};T?z(r,F):j&&z(j,D)}else{e.el=t.el;const I=e.anchor=t.anchor,F=e.target=t.target,j=e.targetAnchor=t.targetAnchor,D=ic(t.props),z=D?r:F,M=D?I:j;if(s=s||Xw(F),k?(h(t.dynamicChildren,k,z,i,a,s,o),o0(t,e,!0)):l||d(t,e,z,M,i,a,s,o,!1),T)D||bd(e,r,I,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const U=e.target=vm(e.props,b);U&&bd(e,U,null,c,0)}else D&&bd(e,F,j,c,1)}},remove(t,e,r,n,{um:i,o:{remove:a}},s){const{shapeFlag:o,children:l,anchor:c,targetAnchor:u,target:d,props:h}=t;if(d&&a(u),(s||!ic(h))&&(a(c),o&16))for(let p=0;p<l.length;p++){const b=l[p];i(b,e,r,!0,!!b.dynamicChildren)}},move:bd,hydrate:BR};function bd(t,e,r,{o:{insert:n},m:i},a=2){a===0&&n(t.targetAnchor,e,r);const{el:s,anchor:o,shapeFlag:l,children:c,props:u}=t,d=a===2;if(d&&n(s,e,r),(!d||ic(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],e,r,2);d&&n(o,e,r)}function BR(t,e,r,n,i,a,{o:{nextSibling:s,parentNode:o,querySelector:l}},c){const u=e.target=vm(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(ic(e.props))e.anchor=c(s(t),e,o(t),r,n,i,a),e.targetAnchor=d;else{e.anchor=s(t);let h=d;for(;h;)if(h=s(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}c(d,e,u,r,n,i,a)}}return e.anchor&&s(e.anchor)}const CJ=FR,Ct=Symbol(void 0),l0=Symbol(void 0),Ai=Symbol(void 0),Yd=Symbol(void 0),nc=[];let ki=null;function Xe(t=!1){nc.push(ki=t?null:[])}function UR(){nc.pop(),ki=nc[nc.length-1]||null}let Cc=1;function Qw(t){Cc+=t}function GS(t){return t.dynamicChildren=Cc>0?ki||uo:null,UR(),Cc>0&&ki&&ki.push(t),t}function Xt(t,e,r,n,i,a){return GS(he(t,e,r,n,i,a,!0))}function Gt(t,e,r,n,i){return GS(xe(t,e,r,n,i,!0))}function ym(t){return t?t.__v_isVNode===!0:!1}function Wa(t,e){return t.type===e.type&&t.key===e.key}const Rf="__vInternal",WS=({key:t})=>t!=null?t:null,Xd=({ref:t,ref_key:e,ref_for:r})=>t!=null?Vt(t)||yr(t)||Ge(t)?{i:di,r:t,k:e,f:!!r}:t:null;function he(t,e=null,r=null,n=0,i=null,a=t===Ct?0:1,s=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&WS(e),ref:e&&Xd(e),scopeId:PS,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return o?(c0(l,r),a&128&&t.normalize(l)):r&&(l.shapeFlag|=Vt(r)?8:16),Cc>0&&!s&&ki&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&ki.push(l),l}const xe=zR;function zR(t,e=null,r=null,n=0,i=null,a=!1){if((!t||t===jS)&&(t=Ai),ym(t)){const o=An(t,e,!0);return r&&c0(o,r),Cc>0&&!a&&ki&&(o.shapeFlag&6?ki[ki.indexOf(t)]=o:ki.push(o)),o.patchFlag|=-2,o}if(ZR(t)&&(t=t.__vccOpts),e){e=$R(e);let{class:o,style:l}=e;o&&!Vt(o)&&(e.class=Qa(o)),Dt(l)&&(mS(l)&&!De(l)&&(l=dr({},l)),e.style=Vv(l))}const s=Vt(t)?1:aR(t)?128:jR(t)?64:Dt(t)?4:Ge(t)?2:0;return he(t,e,r,n,i,s,a,!0)}function $R(t){return t?mS(t)||Rf in t?dr({},t):t:null}function An(t,e,r=!1){const{props:n,ref:i,patchFlag:a,children:s}=t,o=e?VR(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&WS(o),ref:e&&e.ref?r&&i?De(i)?i.concat(Xd(e)):[i,Xd(e)]:Xd(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ct?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&An(t.ssContent),ssFallback:t.ssFallback&&An(t.ssFallback),el:t.el,anchor:t.anchor}}function ka(t=" ",e=0){return xe(l0,null,t,e)}function ou(t,e){const r=xe(Yd,null,t);return r.staticCount=e,r}function AJ(t="",e=!1){return e?(Xe(),Gt(Ai,null,t)):xe(Ai,null,t)}function Ui(t){return t==null||typeof t=="boolean"?xe(Ai):De(t)?xe(Ct,null,t.slice()):typeof t=="object"?Zn(t):xe(l0,null,String(t))}function Zn(t){return t.el===null||t.memo?t:An(t)}function c0(t,e){let r=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(De(e))r=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),c0(t,i()),i._c&&(i._d=!0));return}else{r=32;const i=e._;!i&&!(Rf in e)?e._ctx=di:i===3&&di&&(di.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ge(e)?(e={default:e,_ctx:di},r=32):(e=String(e),n&64?(r=16,e=[ka(e)]):r=8);t.children=e,t.shapeFlag|=r}function VR(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=Qa([e.class,n.class]));else if(i==="style")e.style=Vv([e.style,n.style]);else if(xf(i)){const a=e[i],s=n[i];s&&a!==s&&!(De(a)&&a.includes(s))&&(e[i]=a?[].concat(a,s):s)}else i!==""&&(e[i]=n[i])}return e}function Ni(t,e,r,n=null){hi(t,e,7,[r,n])}const HR=qS();let qR=0;function GR(t,e,r){const n=t.type,i=(e?e.appContext:t.appContext)||HR,a={uid:qR++,vnode:t,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new nS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zS(n,i),emitsOptions:IS(n,i),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:n.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=eR.bind(null,a),t.ce&&t.ce(a),a}let Zt=null;const WR=()=>Zt||di,To=t=>{Zt=t,t.scope.on()},ls=()=>{Zt&&Zt.scope.off(),Zt=null};function KS(t){return t.vnode.shapeFlag&4}let Ac=!1;function KR(t,e=!1){Ac=e;const{props:r,children:n}=t.vnode,i=KS(t);CR(t,r,i,e),PR(t,n);const a=i?YR(t,e):void 0;return Ac=!1,a}function YR(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=vS(new Proxy(t.ctx,_R));const{setup:n}=r;if(n){const i=t.setupContext=n.length>1?QR(t):null;To(t),el();const a=ua(n,t,0,[t.props,i]);if(tl(),ls(),tS(a)){if(a.then(ls,ls),e)return a.then(s=>{Jw(t,s,e)}).catch(s=>{Cf(s,t,0)});t.asyncDep=a}else Jw(t,a,e)}else YS(t,e)}function Jw(t,e,r){Ge(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Dt(e)&&(t.setupState=xS(e)),YS(t,r)}let Zw;function YS(t,e,r){const n=t.type;if(!t.render){if(!e&&Zw&&!n.render){const i=n.template;if(i){const{isCustomElement:a,compilerOptions:s}=t.appContext.config,{delimiters:o,compilerOptions:l}=n,c=dr(dr({isCustomElement:a,delimiters:o},s),l);n.render=Zw(i,c)}}t.render=n.render||Ci}To(t),el(),xR(t),tl(),ls()}function XR(t){return new Proxy(t.attrs,{get(e,r){return ni(t,"get","$attrs"),e[r]}})}function QR(t){const e=n=>{t.exposed=n||{}};let r;return{get attrs(){return r||(r=XR(t))},slots:t.slots,emit:t.emit,expose:e}}function Mf(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(xS(vS(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in yh)return yh[r](t)}}))}function JR(t,e=!0){return Ge(t)?t.displayName||t.name:t.name||e&&t.__name}function ZR(t){return Ge(t)&&"__vccOpts"in t}const It=(t,e)=>KL(t,e,Ac);function lt(t,e,r){const n=arguments.length;return n===2?Dt(e)&&!De(e)?ym(e)?xe(t,null,[e]):xe(t,e):xe(t,null,e):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&ym(r)&&(r=[r]),xe(t,e,r))}const eM="3.2.37",tM="http://www.w3.org/2000/svg",Ka=typeof document!="undefined"?document:null,e_=Ka&&Ka.createElement("template"),rM={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i=e?Ka.createElementNS(tM,t):Ka.createElement(t,r?{is:r}:void 0);return t==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:t=>Ka.createTextNode(t),createComment:t=>Ka.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ka.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,r,n,i,a){const s=r?r.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{e_.innerHTML=n?`<svg>${t}</svg>`:t;const o=e_.content;if(n){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[s?s.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function iM(t,e,r){const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function nM(t,e,r){const n=t.style,i=Vt(r);if(r&&!i){for(const a in r)bm(n,a,r[a]);if(e&&!Vt(e))for(const a in e)r[a]==null&&bm(n,a,"")}else{const a=n.display;i?e!==r&&(n.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(n.display=a)}}const t_=/\s*!important$/;function bm(t,e,r){if(De(r))r.forEach(n=>bm(t,e,n));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=aM(t,e);t_.test(r)?t.setProperty(Zo(n),r.replace(t_,""),"important"):t[n]=r}}const r_=["Webkit","Moz","ms"],Zp={};function aM(t,e){const r=Zp[e];if(r)return r;let n=nn(e);if(n!=="filter"&&n in t)return Zp[e]=n;n=Ef(n);for(let i=0;i<r_.length;i++){const a=r_[i]+n;if(a in t)return Zp[e]=a}return e}const i_="http://www.w3.org/1999/xlink";function sM(t,e,r,n,i){if(n&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(i_,e.slice(6,e.length)):t.setAttributeNS(i_,e,r);else{const a=aL(e);r==null||a&&!J1(r)?t.removeAttribute(e):t.setAttribute(e,a?"":r)}}function oM(t,e,r,n,i,a,s){if(e==="innerHTML"||e==="textContent"){n&&s(n,i,a),t[e]=r==null?"":r;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=r;const l=r==null?"":r;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),r==null&&t.removeAttribute(e);return}let o=!1;if(r===""||r==null){const l=typeof t[e];l==="boolean"?r=J1(r):r==null&&l==="string"?(r="",o=!0):l==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(e)}const[XS,lM]=(()=>{let t=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(r&&Number(r[1])<=53)}return[t,e]})();let wm=0;const cM=Promise.resolve(),uM=()=>{wm=0},dM=()=>wm||(cM.then(uM),wm=XS());function Ya(t,e,r,n){t.addEventListener(e,r,n)}function hM(t,e,r,n){t.removeEventListener(e,r,n)}function fM(t,e,r,n,i=null){const a=t._vei||(t._vei={}),s=a[e];if(n&&s)s.value=n;else{const[o,l]=pM(e);if(n){const c=a[e]=gM(n,i);Ya(t,o,c,l)}else s&&(hM(t,o,s,l),a[e]=void 0)}}const n_=/(?:Once|Passive|Capture)$/;function pM(t){let e;if(n_.test(t)){e={};let r;for(;r=t.match(n_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[Zo(t.slice(2)),e]}function gM(t,e){const r=n=>{const i=n.timeStamp||XS();(lM||i>=r.attached-1)&&hi(mM(n,r.value),e,5,[n])};return r.value=t,r.attached=dM(),r}function mM(t,e){if(De(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const a_=/^on[a-z]/,vM=(t,e,r,n,i=!1,a,s,o,l)=>{e==="class"?iM(t,n,i):e==="style"?nM(t,r,n):xf(e)?Hv(e)||fM(t,e,r,n,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yM(t,e,n,i))?oM(t,e,n,a,s,o,l):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),sM(t,e,n,i))};function yM(t,e,r,n){return n?!!(e==="innerHTML"||e==="textContent"||e in t&&a_.test(e)&&Ge(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||a_.test(e)&&Vt(r)?!1:e in t}const Gn="transition",Il="animation",ac=(t,{slots:e})=>lt(DS,bM(t),e);ac.displayName="Transition";const QS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ac.props=dr({},DS.props,QS);const za=(t,e=[])=>{De(t)?t.forEach(r=>r(...e)):t&&t(...e)},s_=t=>t?De(t)?t.some(e=>e.length>1):t.length>1:!1;function bM(t){const e={};for(const P in t)P in QS||(e[P]=t[P]);if(t.css===!1)return e;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:s=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=a,appearActiveClass:c=s,appearToClass:u=o,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=t,b=wM(i),w=b&&b[0],v=b&&b[1],{onBeforeEnter:T,onEnter:E,onEnterCancelled:A,onLeave:k,onLeaveCancelled:I,onBeforeAppear:F=T,onAppear:j=E,onAppearCancelled:D=A}=e,z=(P,q,X)=>{$a(P,q?u:o),$a(P,q?c:s),X&&X()},M=(P,q)=>{P._isLeaving=!1,$a(P,d),$a(P,p),$a(P,h),q&&q()},U=P=>(q,X)=>{const fe=P?j:E,te=()=>z(q,P,X);za(fe,[q,te]),o_(()=>{$a(q,P?l:a),Wn(q,P?u:o),s_(fe)||l_(q,n,w,te)})};return dr(e,{onBeforeEnter(P){za(T,[P]),Wn(P,a),Wn(P,s)},onBeforeAppear(P){za(F,[P]),Wn(P,l),Wn(P,c)},onEnter:U(!1),onAppear:U(!0),onLeave(P,q){P._isLeaving=!0;const X=()=>M(P,q);Wn(P,d),TM(),Wn(P,h),o_(()=>{!P._isLeaving||($a(P,d),Wn(P,p),s_(k)||l_(P,n,v,X))}),za(k,[P,X])},onEnterCancelled(P){z(P,!1),za(A,[P])},onAppearCancelled(P){z(P,!0),za(D,[P])},onLeaveCancelled(P){M(P),za(I,[P])}})}function wM(t){if(t==null)return null;if(Dt(t))return[eg(t.enter),eg(t.leave)];{const e=eg(t);return[e,e]}}function eg(t){return gh(t)}function Wn(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t._vtc||(t._vtc=new Set)).add(e)}function $a(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:r}=t;r&&(r.delete(e),r.size||(t._vtc=void 0))}function o_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let _M=0;function l_(t,e,r,n){const i=t._endId=++_M,a=()=>{i===t._endId&&n()};if(r)return setTimeout(a,r);const{type:s,timeout:o,propCount:l}=xM(t,e);if(!s)return n();const c=s+"end";let u=0;const d=()=>{t.removeEventListener(c,h),a()},h=p=>{p.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),t.addEventListener(c,h)}function xM(t,e){const r=window.getComputedStyle(t),n=b=>(r[b]||"").split(", "),i=n(Gn+"Delay"),a=n(Gn+"Duration"),s=c_(i,a),o=n(Il+"Delay"),l=n(Il+"Duration"),c=c_(o,l);let u=null,d=0,h=0;e===Gn?s>0&&(u=Gn,d=s,h=a.length):e===Il?c>0&&(u=Il,d=c,h=l.length):(d=Math.max(s,c),u=d>0?s>c?Gn:Il:null,h=u?u===Gn?a.length:l.length:0);const p=u===Gn&&/\b(transform|all)(,|$)/.test(r[Gn+"Property"]);return{type:u,timeout:d,propCount:h,hasTransform:p}}function c_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,n)=>u_(r)+u_(t[n])))}function u_(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function TM(){return document.body.offsetHeight}const wh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return De(e)?r=>Gd(e,r):e};function SM(t){t.target.composing=!0}function d_(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const IJ={created(t,{modifiers:{lazy:e,trim:r,number:n}},i){t._assign=wh(i);const a=n||i.props&&i.props.type==="number";Ya(t,e?"change":"input",s=>{if(s.target.composing)return;let o=t.value;r&&(o=o.trim()),a&&(o=gh(o)),t._assign(o)}),r&&Ya(t,"change",()=>{t.value=t.value.trim()}),e||(Ya(t,"compositionstart",SM),Ya(t,"compositionend",d_),Ya(t,"change",d_))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:r,trim:n,number:i}},a){if(t._assign=wh(a),t.composing||document.activeElement===t&&t.type!=="range"&&(r||n&&t.value.trim()===e||(i||t.type==="number")&&gh(t.value)===e))return;const s=e==null?"":e;t.value!==s&&(t.value=s)}},PJ={deep:!0,created(t,e,r){t._assign=wh(r),Ya(t,"change",()=>{const n=t._modelValue,i=EM(t),a=t.checked,s=t._assign;if(De(n)){const o=Z1(n,i),l=o!==-1;if(a&&!l)s(n.concat(i));else if(!a&&l){const c=[...n];c.splice(o,1),s(c)}}else if(Tf(n)){const o=new Set(n);a?o.add(i):o.delete(i),s(o)}else s(JS(t,a))})},mounted:h_,beforeUpdate(t,e,r){t._assign=wh(r),h_(t,e,r)}};function h_(t,{value:e,oldValue:r},n){t._modelValue=e,De(e)?t.checked=Z1(e,n.props.value)>-1:Tf(e)?t.checked=e.has(n.props.value):e!==r&&(t.checked=_f(e,JS(t,!0)))}function EM(t){return"_value"in t?t._value:t.value}function JS(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const kM=["ctrl","shift","alt","meta"],CM={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>kM.some(r=>t[`${r}Key`]&&!e.includes(r))},OJ=(t,e)=>(r,...n)=>{for(let i=0;i<e.length;i++){const a=CM[e[i]];if(a&&a(r,e))return}return t(r,...n)},AM=dr({patchProp:vM},rM);let f_;function IM(){return f_||(f_=RR(AM))}const PM=(...t)=>{const e=IM().createApp(...t),{mount:r}=e;return e.mount=n=>{const i=OM(n);if(!i)return;const a=e._component;!Ge(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const s=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function OM(t){return Vt(t)?document.querySelector(t):t}function DM(){return ZS().__VUE_DEVTOOLS_GLOBAL_HOOK__}function ZS(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const LM=typeof Proxy=="function",RM="devtools-plugin:setup",MM="plugin:settings:set";let Us,_m;function NM(){var t;return Us!==void 0||(typeof window!="undefined"&&window.performance?(Us=!0,_m=window.performance):typeof global!="undefined"&&((t=global.perf_hooks)===null||t===void 0?void 0:t.performance)?(Us=!0,_m=global.perf_hooks.performance):Us=!1),Us}function jM(){return NM()?_m.now():Date.now()}class FM{constructor(e,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=r;const n={};if(e.settings)for(const s in e.settings){const o=e.settings[s];n[s]=o.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let a=Object.assign({},n);try{const s=localStorage.getItem(i),o=JSON.parse(s);Object.assign(a,o)}catch{}this.fallbacks={getSettings(){return a},setSettings(s){try{localStorage.setItem(i,JSON.stringify(s))}catch{}a=s},now(){return jM()}},r&&r.on(MM,(s,o)=>{s===this.plugin.id&&this.fallbacks.setSettings(o)}),this.proxiedOn=new Proxy({},{get:(s,o)=>this.target?this.target.on[o]:(...l)=>{this.onQueue.push({method:o,args:l})}}),this.proxiedTarget=new Proxy({},{get:(s,o)=>this.target?this.target[o]:o==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(o)?(...l)=>(this.targetQueue.push({method:o,args:l,resolve:()=>{}}),this.fallbacks[o](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:o,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function BM(t,e){const r=t,n=ZS(),i=DM(),a=LM&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!a))i.emit(RM,t,e);else{const s=a?new FM(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:e,proxy:s}),s&&e(s.proxiedTarget)}}/*!
  * vue-router v4.0.16
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const eE=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",il=t=>eE?Symbol(t):"_vr_"+t,UM=il("rvlm"),p_=il("rvd"),u0=il("r"),tE=il("rl"),xm=il("rvl"),Zs=typeof window!="undefined";function zM(t){return t.__esModule||eE&&t[Symbol.toStringTag]==="Module"}const gt=Object.assign;function tg(t,e){const r={};for(const n in e){const i=e[n];r[n]=Array.isArray(i)?i.map(t):t(i)}return r}const sc=()=>{},$M=/\/$/,VM=t=>t.replace($M,"");function rg(t,e,r="/"){let n,i={},a="",s="";const o=e.indexOf("?"),l=e.indexOf("#",o>-1?o:0);return o>-1&&(n=e.slice(0,o),a=e.slice(o+1,l>-1?l:e.length),i=t(a)),l>-1&&(n=n||e.slice(0,l),s=e.slice(l,e.length)),n=WM(n!=null?n:e,r),{fullPath:n+(a&&"?")+a+s,path:n,query:i,hash:s}}function HM(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function g_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function qM(t,e,r){const n=e.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&So(e.matched[n],r.matched[i])&&rE(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function So(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function rE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!GM(t[r],e[r]))return!1;return!0}function GM(t,e){return Array.isArray(t)?m_(t,e):Array.isArray(e)?m_(e,t):t===e}function m_(t,e){return Array.isArray(e)?t.length===e.length&&t.every((r,n)=>r===e[n]):t.length===1&&t[0]===e}function WM(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),n=t.split("/");let i=r.length-1,a,s;for(a=0;a<n.length;a++)if(s=n[a],!(i===1||s==="."))if(s==="..")i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var Ic;(function(t){t.pop="pop",t.push="push"})(Ic||(Ic={}));var oc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(oc||(oc={}));function KM(t){if(!t)if(Zs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),VM(t)}const YM=/^[^#]+#/;function XM(t,e){return t.replace(YM,"#")+e}function QM(t,e){const r=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-r.left-(e.left||0),top:n.top-r.top-(e.top||0)}}const Nf=()=>({left:window.pageXOffset,top:window.pageYOffset});function JM(t){let e;if("el"in t){const r=t.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;e=QM(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function v_(t,e){return(history.state?history.state.position-e:-1)+t}const Tm=new Map;function ZM(t,e){Tm.set(t,e)}function eN(t){const e=Tm.get(t);return Tm.delete(t),e}let tN=()=>location.protocol+"//"+location.host;function iE(t,e){const{pathname:r,search:n,hash:i}=e,a=t.indexOf("#");if(a>-1){let o=i.includes(t.slice(a))?t.slice(a).length:1,l=i.slice(o);return l[0]!=="/"&&(l="/"+l),g_(l,"")}return g_(r,t)+n+i}function rN(t,e,r,n){let i=[],a=[],s=null;const o=({state:h})=>{const p=iE(t,location),b=r.value,w=e.value;let v=0;if(h){if(r.value=p,e.value=h,s&&s===b){s=null;return}v=w?h.position-w.position:0}else n(p);i.forEach(T=>{T(r.value,b,{delta:v,type:Ic.pop,direction:v?v>0?oc.forward:oc.back:oc.unknown})})};function l(){s=r.value}function c(h){i.push(h);const p=()=>{const b=i.indexOf(h);b>-1&&i.splice(b,1)};return a.push(p),p}function u(){const{history:h}=window;!h.state||h.replaceState(gt({},h.state,{scroll:Nf()}),"")}function d(){for(const h of a)h();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:d}}function y_(t,e,r,n=!1,i=!1){return{back:t,current:e,forward:r,replaced:n,position:window.history.length,scroll:i?Nf():null}}function iN(t){const{history:e,location:r}=window,n={value:iE(t,r)},i={value:e.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(l,c,u){const d=t.indexOf("#"),h=d>-1?(r.host&&document.querySelector("base")?t:t.slice(d))+l:tN()+t+l;try{e[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(p){console.error(p),r[u?"replace":"assign"](h)}}function s(l,c){const u=gt({},e.state,y_(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});a(l,u,!0),n.value=l}function o(l,c){const u=gt({},i.value,e.state,{forward:l,scroll:Nf()});a(u.current,u,!0);const d=gt({},y_(n.value,l,null),{position:u.position+1},c);a(l,d,!1),n.value=l}return{location:n,state:i,push:o,replace:s}}function nN(t){t=KM(t);const e=iN(t),r=rN(t,e.state,e.location,e.replace);function n(a,s=!0){s||r.pauseListeners(),history.go(a)}const i=gt({location:"",base:t,go:n,createHref:XM.bind(null,t)},e,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function aN(t){return typeof t=="string"||t&&typeof t=="object"}function nE(t){return typeof t=="string"||typeof t=="symbol"}const Kn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},aE=il("nf");var b_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(b_||(b_={}));function Eo(t,e){return gt(new Error,{type:t,[aE]:!0},e)}function Yn(t,e){return t instanceof Error&&aE in t&&(e==null||!!(t.type&e))}const w_="[^/]+?",sN={sensitive:!1,strict:!1,start:!0,end:!0},oN=/[.+*?^${}()[\]/\\]/g;function lN(t,e){const r=gt({},sN,e),n=[];let i=r.start?"^":"";const a=[];for(const c of t){const u=c.length?[]:[90];r.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const h=c[d];let p=40+(r.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(oN,"\\$&"),p+=40;else if(h.type===1){const{value:b,repeatable:w,optional:v,regexp:T}=h;a.push({name:b,repeatable:w,optional:v});const E=T||w_;if(E!==w_){p+=10;try{new RegExp(`(${E})`)}catch(k){throw new Error(`Invalid custom RegExp for param "${b}" (${E}): `+k.message)}}let A=w?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(A=v&&c.length<2?`(?:/${A})`:"/"+A),v&&(A+="?"),i+=A,p+=20,v&&(p+=-8),w&&(p+=-20),E===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const s=new RegExp(i,r.sensitive?"":"i");function o(c){const u=c.match(s),d={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",b=a[h-1];d[b.name]=p&&b.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const h of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:b,repeatable:w,optional:v}=p,T=b in c?c[b]:"";if(Array.isArray(T)&&!w)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const E=Array.isArray(T)?T.join("/"):T;if(!E)if(v)h.length<2&&t.length>1&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${b}"`);u+=E}}return u}return{re:s,score:n,keys:a,parse:o,stringify:l}}function cN(t,e){let r=0;for(;r<t.length&&r<e.length;){const n=e[r]-t[r];if(n)return n;r++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function uN(t,e){let r=0;const n=t.score,i=e.score;for(;r<n.length&&r<i.length;){const a=cN(n[r],i[r]);if(a)return a;r++}if(Math.abs(i.length-n.length)===1){if(__(n))return 1;if(__(i))return-1}return i.length-n.length}function __(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const dN={type:0,value:""},hN=/[a-zA-Z0-9_]/;function fN(t){if(!t)return[[]];if(t==="/")return[[dN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const i=[];let a;function s(){a&&i.push(a),a=[]}let o=0,l,c="",u="";function d(){!c||(r===0?a.push({type:0,value:c}):r===1||r===2||r===3?(a.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<t.length;){if(l=t[o++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),s()):l===":"?(d(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:hN.test(l)?h():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),s(),i}function pN(t,e,r){const n=lN(fN(t.path),r),i=gt(n,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function gN(t,e){const r=[],n=new Map;e=T_({strict:!1,end:!0,sensitive:!1},e);function i(u){return n.get(u)}function a(u,d,h){const p=!h,b=vN(u);b.aliasOf=h&&h.record;const w=T_(e,u),v=[b];if("alias"in u){const A=typeof u.alias=="string"?[u.alias]:u.alias;for(const k of A)v.push(gt({},b,{components:h?h.record.components:b.components,path:k,aliasOf:h?h.record:b}))}let T,E;for(const A of v){const{path:k}=A;if(d&&k[0]!=="/"){const I=d.record.path,F=I[I.length-1]==="/"?"":"/";A.path=d.record.path+(k&&F+k)}if(T=pN(A,d,w),h?h.alias.push(T):(E=E||T,E!==T&&E.alias.push(T),p&&u.name&&!x_(T)&&s(u.name)),"children"in b){const I=b.children;for(let F=0;F<I.length;F++)a(I[F],T,h&&h.children[F])}h=h||T,l(T)}return E?()=>{s(E)}:sc}function s(u){if(nE(u)){const d=n.get(u);d&&(n.delete(u),r.splice(r.indexOf(d),1),d.children.forEach(s),d.alias.forEach(s))}else{const d=r.indexOf(u);d>-1&&(r.splice(d,1),u.record.name&&n.delete(u.record.name),u.children.forEach(s),u.alias.forEach(s))}}function o(){return r}function l(u){let d=0;for(;d<r.length&&uN(u,r[d])>=0&&(u.record.path!==r[d].record.path||!sE(u,r[d]));)d++;r.splice(d,0,u),u.record.name&&!x_(u)&&n.set(u.record.name,u)}function c(u,d){let h,p={},b,w;if("name"in u&&u.name){if(h=n.get(u.name),!h)throw Eo(1,{location:u});w=h.record.name,p=gt(mN(d.params,h.keys.filter(E=>!E.optional).map(E=>E.name)),u.params),b=h.stringify(p)}else if("path"in u)b=u.path,h=r.find(E=>E.re.test(b)),h&&(p=h.parse(b),w=h.record.name);else{if(h=d.name?n.get(d.name):r.find(E=>E.re.test(d.path)),!h)throw Eo(1,{location:u,currentLocation:d});w=h.record.name,p=gt({},d.params,u.params),b=h.stringify(p)}const v=[];let T=h;for(;T;)v.unshift(T.record),T=T.parent;return{name:w,path:b,params:p,matched:v,meta:bN(v)}}return t.forEach(u=>a(u)),{addRoute:a,resolve:c,removeRoute:s,getRoutes:o,getRecordMatcher:i}}function mN(t,e){const r={};for(const n of e)n in t&&(r[n]=t[n]);return r}function vN(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:yN(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function yN(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const n in t.components)e[n]=typeof r=="boolean"?r:r[n];return e}function x_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function bN(t){return t.reduce((e,r)=>gt(e,r.meta),{})}function T_(t,e){const r={};for(const n in t)r[n]=n in e?e[n]:t[n];return r}function sE(t,e){return e.children.some(r=>r===t||sE(t,r))}const oE=/#/g,wN=/&/g,_N=/\//g,xN=/=/g,TN=/\?/g,lE=/\+/g,SN=/%5B/g,EN=/%5D/g,cE=/%5E/g,kN=/%60/g,uE=/%7B/g,CN=/%7C/g,dE=/%7D/g,AN=/%20/g;function d0(t){return encodeURI(""+t).replace(CN,"|").replace(SN,"[").replace(EN,"]")}function IN(t){return d0(t).replace(uE,"{").replace(dE,"}").replace(cE,"^")}function Sm(t){return d0(t).replace(lE,"%2B").replace(AN,"+").replace(oE,"%23").replace(wN,"%26").replace(kN,"`").replace(uE,"{").replace(dE,"}").replace(cE,"^")}function PN(t){return Sm(t).replace(xN,"%3D")}function ON(t){return d0(t).replace(oE,"%23").replace(TN,"%3F")}function DN(t){return t==null?"":ON(t).replace(_N,"%2F")}function _h(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function LN(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(lE," "),s=a.indexOf("="),o=_h(s<0?a:a.slice(0,s)),l=s<0?null:_h(a.slice(s+1));if(o in e){let c=e[o];Array.isArray(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function S_(t){let e="";for(let r in t){const n=t[r];if(r=PN(r),n==null){n!==void 0&&(e+=(e.length?"&":"")+r);continue}(Array.isArray(n)?n.map(a=>a&&Sm(a)):[n&&Sm(n)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+r,a!=null&&(e+="="+a))})}return e}function RN(t){const e={};for(const r in t){const n=t[r];n!==void 0&&(e[r]=Array.isArray(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}function Pl(){let t=[];function e(n){return t.push(n),()=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)}}function r(){t=[]}return{add:e,list:()=>t,reset:r}}function ea(t,e,r,n,i){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,o)=>{const l=d=>{d===!1?o(Eo(4,{from:r,to:e})):d instanceof Error?o(d):aN(d)?o(Eo(2,{from:e,to:d})):(a&&n.enterCallbacks[i]===a&&typeof d=="function"&&a.push(d),s())},c=t.call(n&&n.instances[i],e,r,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(d=>o(d))})}function ig(t,e,r,n){const i=[];for(const a of t)for(const s in a.components){let o=a.components[s];if(!(e!=="beforeRouteEnter"&&!a.instances[s]))if(MN(o)){const c=(o.__vccOpts||o)[e];c&&i.push(ea(c,r,n,a,s))}else{let l=o();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${a.path}"`));const u=zM(c)?c.default:c;a.components[s]=u;const h=(u.__vccOpts||u)[e];return h&&ea(h,r,n,a,s)()}))}}return i}function MN(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function E_(t){const e=fi(u0),r=fi(tE),n=It(()=>e.resolve(Et(t.to))),i=It(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const h=d.findIndex(So.bind(null,u));if(h>-1)return h;const p=k_(l[c-2]);return c>1&&k_(u)===p&&d[d.length-1].path!==p?d.findIndex(So.bind(null,l[c-2])):h}),a=It(()=>i.value>-1&&BN(r.params,n.value.params)),s=It(()=>i.value>-1&&i.value===r.matched.length-1&&rE(r.params,n.value.params));function o(l={}){return FN(l)?e[Et(t.replace)?"replace":"push"](Et(t.to)).catch(sc):Promise.resolve()}return{route:n,href:It(()=>n.value.href),isActive:a,isExactActive:s,navigate:o}}const NN=ti({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:E_,setup(t,{slots:e}){const r=rl(E_(t)),{options:n}=fi(u0),i=It(()=>({[C_(t.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[C_(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const a=e.default&&e.default(r);return t.custom?a:lt("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},a)}}}),jN=NN;function FN(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function BN(t,e){for(const r in e){const n=e[r],i=t[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Array.isArray(i)||i.length!==n.length||n.some((a,s)=>a!==i[s]))return!1}return!0}function k_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const C_=(t,e,r)=>t!=null?t:e!=null?e:r,UN=ti({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const n=fi(xm),i=It(()=>t.route||n.value),a=fi(p_,0),s=It(()=>i.value.matched[a]);Wi(p_,a+1),Wi(UM,s),Wi(xm,i);const o=mt();return os(()=>[o.value,s.value,t.name],([l,c,u],[d,h,p])=>{c&&(c.instances[u]=l,h&&h!==c&&l&&l===d&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),l&&c&&(!h||!So(c,h)||!d)&&(c.enterCallbacks[u]||[]).forEach(b=>b(l))},{flush:"post"}),()=>{const l=i.value,c=s.value,u=c&&c.components[t.name],d=t.name;if(!u)return A_(r.default,{Component:u,route:l});const h=c.props[t.name],p=h?h===!0?l.params:typeof h=="function"?h(l):h:null,w=lt(u,gt({},p,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(c.instances[d]=null)},ref:o}));return A_(r.default,{Component:w,route:l})||w}}});function A_(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const hE=UN;function zN(t){const e=gN(t.routes,t),r=t.parseQuery||LN,n=t.stringifyQuery||S_,i=t.history,a=Pl(),s=Pl(),o=Pl(),l=wS(Kn);let c=Kn;Zs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=tg.bind(null,K=>""+K),d=tg.bind(null,DN),h=tg.bind(null,_h);function p(K,ve){let ce,be;return nE(K)?(ce=e.getRecordMatcher(K),be=ve):be=K,e.addRoute(be,ce)}function b(K){const ve=e.getRecordMatcher(K);ve&&e.removeRoute(ve)}function w(){return e.getRoutes().map(K=>K.record)}function v(K){return!!e.getRecordMatcher(K)}function T(K,ve){if(ve=gt({},ve||l.value),typeof K=="string"){const Ue=rg(r,K,ve.path),R=e.resolve({path:Ue.path},ve),V=i.createHref(Ue.fullPath);return gt(Ue,R,{params:h(R.params),hash:_h(Ue.hash),redirectedFrom:void 0,href:V})}let ce;if("path"in K)ce=gt({},K,{path:rg(r,K.path,ve.path).path});else{const Ue=gt({},K.params);for(const R in Ue)Ue[R]==null&&delete Ue[R];ce=gt({},K,{params:d(K.params)}),ve.params=d(ve.params)}const be=e.resolve(ce,ve),Ye=K.hash||"";be.params=u(h(be.params));const st=HM(n,gt({},K,{hash:IN(Ye),path:be.path})),Be=i.createHref(st);return gt({fullPath:st,hash:Ye,query:n===S_?RN(K.query):K.query||{}},be,{redirectedFrom:void 0,href:Be})}function E(K){return typeof K=="string"?rg(r,K,l.value.path):gt({},K)}function A(K,ve){if(c!==K)return Eo(8,{from:ve,to:K})}function k(K){return j(K)}function I(K){return k(gt(E(K),{replace:!0}))}function F(K){const ve=K.matched[K.matched.length-1];if(ve&&ve.redirect){const{redirect:ce}=ve;let be=typeof ce=="function"?ce(K):ce;return typeof be=="string"&&(be=be.includes("?")||be.includes("#")?be=E(be):{path:be},be.params={}),gt({query:K.query,hash:K.hash,params:K.params},be)}}function j(K,ve){const ce=c=T(K),be=l.value,Ye=K.state,st=K.force,Be=K.replace===!0,Ue=F(ce);if(Ue)return j(gt(E(Ue),{state:Ye,force:st,replace:Be}),ve||ce);const R=ce;R.redirectedFrom=ve;let V;return!st&&qM(n,be,ce)&&(V=Eo(16,{to:R,from:be}),Le(be,be,!0,!1)),(V?Promise.resolve(V):z(R,be)).catch(G=>Yn(G)?Yn(G,2)?G:Re(G):ae(G,R,be)).then(G=>{if(G){if(Yn(G,2))return j(gt(E(G.to),{state:Ye,force:st,replace:Be}),ve||R)}else G=U(R,be,!0,Be,Ye);return M(R,be,G),G})}function D(K,ve){const ce=A(K,ve);return ce?Promise.reject(ce):Promise.resolve()}function z(K,ve){let ce;const[be,Ye,st]=$N(K,ve);ce=ig(be.reverse(),"beforeRouteLeave",K,ve);for(const Ue of be)Ue.leaveGuards.forEach(R=>{ce.push(ea(R,K,ve))});const Be=D.bind(null,K,ve);return ce.push(Be),zs(ce).then(()=>{ce=[];for(const Ue of a.list())ce.push(ea(Ue,K,ve));return ce.push(Be),zs(ce)}).then(()=>{ce=ig(Ye,"beforeRouteUpdate",K,ve);for(const Ue of Ye)Ue.updateGuards.forEach(R=>{ce.push(ea(R,K,ve))});return ce.push(Be),zs(ce)}).then(()=>{ce=[];for(const Ue of K.matched)if(Ue.beforeEnter&&!ve.matched.includes(Ue))if(Array.isArray(Ue.beforeEnter))for(const R of Ue.beforeEnter)ce.push(ea(R,K,ve));else ce.push(ea(Ue.beforeEnter,K,ve));return ce.push(Be),zs(ce)}).then(()=>(K.matched.forEach(Ue=>Ue.enterCallbacks={}),ce=ig(st,"beforeRouteEnter",K,ve),ce.push(Be),zs(ce))).then(()=>{ce=[];for(const Ue of s.list())ce.push(ea(Ue,K,ve));return ce.push(Be),zs(ce)}).catch(Ue=>Yn(Ue,8)?Ue:Promise.reject(Ue))}function M(K,ve,ce){for(const be of o.list())be(K,ve,ce)}function U(K,ve,ce,be,Ye){const st=A(K,ve);if(st)return st;const Be=ve===Kn,Ue=Zs?history.state:{};ce&&(be||Be?i.replace(K.fullPath,gt({scroll:Be&&Ue&&Ue.scroll},Ye)):i.push(K.fullPath,Ye)),l.value=K,Le(K,ve,ce,Be),Re()}let P;function q(){P||(P=i.listen((K,ve,ce)=>{const be=T(K),Ye=F(be);if(Ye){j(gt(Ye,{replace:!0}),be).catch(sc);return}c=be;const st=l.value;Zs&&ZM(v_(st.fullPath,ce.delta),Nf()),z(be,st).catch(Be=>Yn(Be,12)?Be:Yn(Be,2)?(j(Be.to,be).then(Ue=>{Yn(Ue,20)&&!ce.delta&&ce.type===Ic.pop&&i.go(-1,!1)}).catch(sc),Promise.reject()):(ce.delta&&i.go(-ce.delta,!1),ae(Be,be,st))).then(Be=>{Be=Be||U(be,st,!1),Be&&(ce.delta?i.go(-ce.delta,!1):ce.type===Ic.pop&&Yn(Be,20)&&i.go(-1,!1)),M(be,st,Be)}).catch(sc)}))}let X=Pl(),fe=Pl(),te;function ae(K,ve,ce){Re(K);const be=fe.list();return be.length?be.forEach(Ye=>Ye(K,ve,ce)):console.error(K),Promise.reject(K)}function oe(){return te&&l.value!==Kn?Promise.resolve():new Promise((K,ve)=>{X.add([K,ve])})}function Re(K){return te||(te=!K,q(),X.list().forEach(([ve,ce])=>K?ce(K):ve()),X.reset()),K}function Le(K,ve,ce,be){const{scrollBehavior:Ye}=t;if(!Zs||!Ye)return Promise.resolve();const st=!ce&&eN(v_(K.fullPath,0))||(be||!ce)&&history.state&&history.state.scroll||null;return t0().then(()=>Ye(K,ve,st)).then(Be=>Be&&JM(Be)).catch(Be=>ae(Be,K,ve))}const ft=K=>i.go(K);let it;const pt=new Set;return{currentRoute:l,addRoute:p,removeRoute:b,hasRoute:v,getRoutes:w,resolve:T,options:t,push:k,replace:I,go:ft,back:()=>ft(-1),forward:()=>ft(1),beforeEach:a.add,beforeResolve:s.add,afterEach:o.add,onError:fe.add,isReady:oe,install(K){const ve=this;K.component("RouterLink",jN),K.component("RouterView",hE),K.config.globalProperties.$router=ve,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>Et(l)}),Zs&&!it&&l.value===Kn&&(it=!0,k(i.location).catch(Ye=>{}));const ce={};for(const Ye in Kn)ce[Ye]=It(()=>l.value[Ye]);K.provide(u0,ve),K.provide(tE,rl(ce)),K.provide(xm,l);const be=K.unmount;pt.add(K),K.unmount=function(){pt.delete(K),pt.size<1&&(c=Kn,P&&P(),P=null,l.value=Kn,it=!1,te=!1),be()}}}}function zs(t){return t.reduce((e,r)=>e.then(()=>r()),Promise.resolve())}function $N(t,e){const r=[],n=[],i=[],a=Math.max(e.matched.length,t.matched.length);for(let s=0;s<a;s++){const o=e.matched[s];o&&(t.matched.find(c=>So(c,o))?n.push(o):r.push(o));const l=t.matched[s];l&&(e.matched.find(c=>So(c,l))||i.push(l))}return[r,n,i]}var h0=(t,e)=>{const r=t.__vccOpts||t;for(const[n,i]of e)r[n]=i;return r},fE="/theCinemat/assets/inverted-icon.245532f3.svg";function va(t,e,...r){if(t in e){let i=e[t];return typeof i=="function"?i(...r):i}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,va),n}var Pc=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Pc||{}),VN=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(VN||{});function nl({visible:t=!0,features:e=0,ourProps:r,theirProps:n,...i}){var a;let s=HN(n,r),o=Object.assign(i,{props:s});if(t||e&2&&s.static)return ng(o);if(e&1){let l=(a=s.unmount)==null||a?0:1;return va(l,{[0](){return null},[1](){return ng({...i,props:{...s,hidden:!0,style:{display:"none"}}})}})}return ng(o)}function ng({props:t,attrs:e,slots:r,slot:n,name:i}){var a;let{as:s,...o}=qN(t,["unmount","static"]),l=(a=r.default)==null?void 0:a.call(r,n),c={};if(n){let u=!1,d=[];for(let[h,p]of Object.entries(n))typeof p=="boolean"&&(u=!0),p===!0&&d.push(h);u&&(c["data-headlessui-state"]=d.join(" "))}if(s==="template"){if(l=pE(l!=null?l:[]),Object.keys(o).length>0||Object.keys(e).length>0){let[u,...d]=l!=null?l:[];if(!GN(u)||d.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${i} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(o).concat(Object.keys(e)).sort((h,p)=>h.localeCompare(p)).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`));return An(u,Object.assign({},o,c))}return Array.isArray(l)&&l.length===1?l[0]:l}return lt(s,Object.assign({},o,c),{default:()=>l})}function pE(t){return t.flatMap(e=>e.type===Ct?pE(e.children):[e])}function HN(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let i in n)i.startsWith("on")&&typeof n[i]=="function"?(r[i]!=null||(r[i]=[]),r[i].push(n[i])):e[i]=n[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(r).map(n=>[n,void 0])));for(let n in r)Object.assign(e,{[n](i,...a){let s=r[n];for(let o of s){if(i instanceof Event&&i.defaultPrevented)return;o(i,...a)}}});return e}function qN(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function GN(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}let WN=0;function KN(){return++WN}function po(){return KN()}var ta=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(ta||{});function He(t){var e;return t==null||t.value==null?null:(e=t.value.$el)!=null?e:t.value}let gE=Symbol("Context");var Oc=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Oc||{});function mE(){return fi(gE,null)}function YN(t){Wi(gE,t)}function I_(t,e){if(t)return t;let r=e!=null?e:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function XN(t,e){let r=mt(I_(t.value.type,t.value.as));return Is(()=>{r.value=I_(t.value.type,t.value.as)}),As(()=>{var n;r.value||!He(e)||He(e)instanceof HTMLButtonElement&&!((n=He(e))!=null&&n.hasAttribute("type"))&&(r.value="button")}),r}const jf=typeof window=="undefined"||typeof document=="undefined";function lu(t){if(jf)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=He(t);if(e)return e.ownerDocument}return document}let Em=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Za=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Za||{}),QN=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(QN||{}),JN=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(JN||{});function f0(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Em)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var p0=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(p0||{});function vE(t,e=0){var r;return t===((r=lu(t))==null?void 0:r.body)?!1:va(e,{[0](){return t.matches(Em)},[1](){let n=t;for(;n!==null;){if(n.matches(Em))return!0;n=n.parentElement}return!1}})}let ZN=["textarea","input"].join(",");function ej(t){var e,r;return(r=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,ZN))!=null?r:!1}function tj(t,e=r=>r){return t.slice().sort((r,n)=>{let i=e(r),a=e(n);if(i===null||a===null)return 0;let s=i.compareDocumentPosition(a);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function io(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:i=[]}={}){var a;let s=(a=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?a:document,o=Array.isArray(t)?r?tj(t):t:f0(t);i.length>0&&(o=o.filter(b=>!i.includes(b))),n=n!=null?n:s.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(n))-1;if(e&4)return Math.max(0,o.indexOf(n))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},d=0,h=o.length,p;do{if(d>=h||d+h<=0)return 0;let b=c+d;if(e&16)b=(b+h)%h;else{if(b<0)return 3;if(b>=h)return 1}p=o[b],p==null||p.focus(u),d+=l}while(p!==s.activeElement);return e&6&&ej(p)&&p.select(),p.hasAttribute("tabindex")||p.setAttribute("tabindex","0"),2}function ag(t,e,r){jf||As(n=>{document.addEventListener(t,e,r),n(()=>document.removeEventListener(t,e,r))})}function rj(t,e,r=It(()=>!0)){function n(a,s){if(!r.value||a.defaultPrevented)return;let o=s(a);if(o===null||!o.getRootNode().contains(o))return;let l=function c(u){return typeof u=="function"?c(u()):Array.isArray(u)||u instanceof Set?u:[u]}(t);for(let c of l){if(c===null)continue;let u=c instanceof HTMLElement?c:He(c);if(u!=null&&u.contains(o)||a.composed&&a.composedPath().includes(u))return}return!vE(o,p0.Loose)&&o.tabIndex!==-1&&a.preventDefault(),e(a,o)}let i=mt(null);ag("mousedown",a=>{var s,o;r.value&&(i.value=((o=(s=a.composedPath)==null?void 0:s.call(a))==null?void 0:o[0])||a.target)},!0),ag("click",a=>{!i.value||(n(a,()=>i.value),i.value=null)},!0),ag("blur",a=>n(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}var xh=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(xh||{});let km=ti({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:e,attrs:r}){return()=>{let{features:n,...i}=t,a={"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return nl({ourProps:a,theirProps:i,slot:{},attrs:r,slots:e,name:"Hidden"})}}});function ij(t,e,r){jf||As(n=>{window.addEventListener(t,e,r),n(()=>window.removeEventListener(t,e,r))})}var es=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(es||{});function yE(){let t=mt(0);return ij("keydown",e=>{e.key==="Tab"&&(t.value=e.shiftKey?1:0)}),t}function nj(t,e,r,n){jf||As(i=>{t=t!=null?t:window,t.addEventListener(e,r,n),i(()=>t.removeEventListener(e,r,n))})}var aj=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(aj||{});let bE=Symbol("PopoverContext");function Ff(t){let e=fi(bE,null);if(e===null){let r=new Error(`<${t} /> is missing a parent <${Qd.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ff),r}return e}let wE=Symbol("PopoverGroupContext");function _E(){return fi(wE,null)}let xE=Symbol("PopoverPanelContext");function sj(){return fi(xE,null)}let Qd=ti({name:"Popover",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:r,expose:n}){var i;let a=mt(null);n({el:a,$el:a});let s=mt(1),o=mt(null),l=mt(null),c=mt(null),u=mt(null),d=It(()=>lu(a)),h=It(()=>{var E,A;if(!He(o)||!He(u))return!1;for(let M of document.querySelectorAll("body > *"))if(Number(M==null?void 0:M.contains(He(o)))^Number(M==null?void 0:M.contains(He(u))))return!0;let k=f0(),I=k.indexOf(He(o)),F=(I+k.length-1)%k.length,j=(I+1)%k.length,D=k[F],z=k[j];return!((E=He(u))!=null&&E.contains(D))&&!((A=He(u))!=null&&A.contains(z))}),p={popoverState:s,buttonId:mt(null),panelId:mt(null),panel:u,button:o,isPortalled:h,beforePanelSentinel:l,afterPanelSentinel:c,togglePopover(){s.value=va(s.value,{[0]:1,[1]:0})},closePopover(){s.value!==1&&(s.value=1)},close(E){p.closePopover();let A=(()=>E?E instanceof HTMLElement?E:E.value instanceof HTMLElement?He(E):He(p.button):He(p.button))();A==null||A.focus()}};Wi(bE,p),YN(It(()=>va(s.value,{[0]:Oc.Open,[1]:Oc.Closed})));let b={buttonId:p.buttonId,panelId:p.panelId,close(){p.closePopover()}},w=_E(),v=w==null?void 0:w.registerPopover;function T(){var E,A,k,I;return(I=w==null?void 0:w.isFocusWithinPopoverGroup())!=null?I:((E=d.value)==null?void 0:E.activeElement)&&(((A=He(o))==null?void 0:A.contains(d.value.activeElement))||((k=He(u))==null?void 0:k.contains(d.value.activeElement)))}return As(()=>v==null?void 0:v(b)),nj((i=d.value)==null?void 0:i.defaultView,"focus",E=>{var A,k;s.value===0&&(T()||!o||!u||E.target!==window&&((A=He(p.beforePanelSentinel))!=null&&A.contains(E.target)||(k=He(p.afterPanelSentinel))!=null&&k.contains(E.target)||p.closePopover()))},!0),rj([o,u],(E,A)=>{var k;p.closePopover(),vE(A,p0.Loose)||(E.preventDefault(),(k=He(o))==null||k.focus())},It(()=>s.value===0)),()=>{let E={open:s.value===0,close:p.close};return nl({theirProps:t,ourProps:{ref:a},slot:E,slots:e,attrs:r,name:"Popover"})}}}),wd=ti({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${po()}`}},inheritAttrs:!1,setup(t,{attrs:e,slots:r,expose:n}){let i=Ff("PopoverButton"),a=It(()=>lu(i.button));n({el:i.button,$el:i.button}),Is(()=>{i.buttonId.value=t.id}),Lf(()=>{i.buttonId.value=null});let s=_E(),o=s==null?void 0:s.closeOthers,l=sj(),c=It(()=>l===null?!1:l.value===i.panelId.value),u=mt(null),d=`headlessui-focus-sentinel-${po()}`;c.value||As(()=>{i.button.value=u.value});let h=XN(It(()=>({as:t.as,type:e.type})),u);function p(T){var E,A,k,I,F;if(c.value){if(i.popoverState.value===1)return;switch(T.key){case ta.Space:case ta.Enter:T.preventDefault(),(A=(E=T.target).click)==null||A.call(E),i.closePopover(),(k=He(i.button))==null||k.focus();break}}else switch(T.key){case ta.Space:case ta.Enter:T.preventDefault(),T.stopPropagation(),i.popoverState.value===1&&(o==null||o(i.buttonId.value)),i.togglePopover();break;case ta.Escape:if(i.popoverState.value!==0)return o==null?void 0:o(i.buttonId.value);if(!He(i.button)||((I=a.value)==null?void 0:I.activeElement)&&!((F=He(i.button))!=null&&F.contains(a.value.activeElement)))return;T.preventDefault(),T.stopPropagation(),i.closePopover();break}}function b(T){c.value||T.key===ta.Space&&T.preventDefault()}function w(T){var E,A;t.disabled||(c.value?(i.closePopover(),(E=He(i.button))==null||E.focus()):(T.preventDefault(),T.stopPropagation(),i.popoverState.value===1&&(o==null||o(i.buttonId.value)),i.togglePopover(),(A=He(i.button))==null||A.focus()))}function v(T){T.preventDefault(),T.stopPropagation()}return()=>{let T=i.popoverState.value===0,E={open:T},{id:A,...k}=t,I=c.value?{ref:u,type:h.value,onKeydown:p,onClick:w}:{ref:u,id:A,type:h.value,"aria-expanded":t.disabled?void 0:i.popoverState.value===0,"aria-controls":He(i.panel)?i.panelId.value:void 0,disabled:t.disabled?!0:void 0,onKeydown:p,onKeyup:b,onClick:w,onMousedown:v},F=yE();function j(){let D=He(i.panel);if(!D)return;function z(){va(F.value,{[es.Forwards]:()=>io(D,Za.First),[es.Backwards]:()=>io(D,Za.Last)})}z()}return lt(Ct,[nl({ourProps:I,theirProps:{...e,...k},slot:E,attrs:e,slots:r,name:"PopoverButton"}),T&&!c.value&&i.isPortalled.value&&lt(km,{id:d,features:xh.Focusable,as:"button",type:"button",onFocus:j})])}}});ti({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(t,{attrs:e,slots:r}){let n=Ff("PopoverOverlay"),i=`headlessui-popover-overlay-${po()}`,a=mE(),s=It(()=>a!==null?a.value===Oc.Open:n.popoverState.value===0);function o(){n.closePopover()}return()=>{let l={open:n.popoverState.value===0};return nl({ourProps:{id:i,"aria-hidden":!0,onClick:o},theirProps:t,slot:l,attrs:e,slots:r,features:Pc.RenderStrategy|Pc.Static,visible:s.value,name:"PopoverOverlay"})}}});let sg=ti({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${po()}`}},inheritAttrs:!1,setup(t,{attrs:e,slots:r,expose:n}){let{focus:i}=t,a=Ff("PopoverPanel"),s=It(()=>lu(a.panel)),o=`headlessui-focus-sentinel-before-${po()}`,l=`headlessui-focus-sentinel-after-${po()}`;n({el:a.panel,$el:a.panel}),Is(()=>{a.panelId.value=t.id}),Lf(()=>{a.panelId.value=null}),Wi(xE,a.panelId),As(()=>{var v,T;if(!i||a.popoverState.value!==0||!a.panel)return;let E=(v=s.value)==null?void 0:v.activeElement;(T=He(a.panel))!=null&&T.contains(E)||io(He(a.panel),Za.First)});let c=mE(),u=It(()=>c!==null?c.value===Oc.Open:a.popoverState.value===0);function d(v){var T,E;switch(v.key){case ta.Escape:if(a.popoverState.value!==0||!He(a.panel)||s.value&&!((T=He(a.panel))!=null&&T.contains(s.value.activeElement)))return;v.preventDefault(),v.stopPropagation(),a.closePopover(),(E=He(a.button))==null||E.focus();break}}function h(v){var T,E,A,k,I;let F=v.relatedTarget;!F||!He(a.panel)||(T=He(a.panel))!=null&&T.contains(F)||(a.closePopover(),(((A=(E=He(a.beforePanelSentinel))==null?void 0:E.contains)==null?void 0:A.call(E,F))||((I=(k=He(a.afterPanelSentinel))==null?void 0:k.contains)==null?void 0:I.call(k,F)))&&F.focus({preventScroll:!0}))}let p=yE();function b(){let v=He(a.panel);if(!v)return;function T(){va(p.value,{[es.Forwards]:()=>{io(v,Za.Next)},[es.Backwards]:()=>{var E;(E=He(a.button))==null||E.focus({preventScroll:!0})}})}T()}function w(){let v=He(a.panel);if(!v)return;function T(){va(p.value,{[es.Forwards]:()=>{var E,A;let k=He(a.button),I=He(a.panel);if(!k)return;let F=f0(),j=F.indexOf(k),D=F.slice(0,j+1),z=[...F.slice(j+1),...D];for(let M of z.slice())if(((A=(E=M==null?void 0:M.id)==null?void 0:E.startsWith)==null?void 0:A.call(E,"headlessui-focus-sentinel-"))||(I==null?void 0:I.contains(M))){let U=z.indexOf(M);U!==-1&&z.splice(U,1)}io(z,Za.First,{sorted:!1})},[es.Backwards]:()=>io(v,Za.Previous)})}T()}return()=>{let v={open:a.popoverState.value===0,close:a.close},{id:T,focus:E,...A}=t,k={ref:a.panel,id:T,onKeydown:d,onFocusout:i&&a.popoverState.value===0?h:void 0,tabIndex:-1};return nl({ourProps:k,theirProps:{...e,...A},attrs:e,slot:v,slots:{...r,default:(...I)=>{var F;return[lt(Ct,[u.value&&a.isPortalled.value&&lt(km,{id:o,ref:a.beforePanelSentinel,features:xh.Focusable,as:"button",type:"button",onFocus:b}),(F=r.default)==null?void 0:F.call(r,...I),u.value&&a.isPortalled.value&&lt(km,{id:l,ref:a.afterPanelSentinel,features:xh.Focusable,as:"button",type:"button",onFocus:w})])]}},features:Pc.RenderStrategy|Pc.Static,visible:u.value,name:"PopoverPanel"})}}}),oj=ti({name:"PopoverGroup",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:e,slots:r,expose:n}){let i=mt(null),a=wS([]),s=It(()=>lu(i));n({el:i,$el:i});function o(d){let h=a.value.indexOf(d);h!==-1&&a.value.splice(h,1)}function l(d){return a.value.push(d),()=>{o(d)}}function c(){var d;let h=s.value;if(!h)return!1;let p=h.activeElement;return(d=He(i))!=null&&d.contains(p)?!0:a.value.some(b=>{var w,v;return((w=h.getElementById(b.buttonId.value))==null?void 0:w.contains(p))||((v=h.getElementById(b.panelId.value))==null?void 0:v.contains(p))})}function u(d){for(let h of a.value)h.buttonId.value!==d&&h.close()}return Wi(wE,{registerPopover:l,unregisterPopover:o,isFocusWithinPopoverGroup:c,closeOthers:u}),()=>nl({ourProps:{ref:i},theirProps:t,slot:{},attrs:e,slots:r,name:"PopoverGroup"})}});function lj(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 4v12l-4-2-4 2V4M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])}function cj(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])}function uj(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})])}function P_(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])}function dj(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])}function hj(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})])}function fj(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})])}function pj(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[xe("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}function O_(t,e){return Xe(),Gt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[xe("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},gj=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],o=t[r++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},SE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=a>>2,d=(a&3)<<4|o>>4;let h=(o&15)<<2|c>>6,p=c&63;l||(p=64,s||(h=64)),n.push(r[u],r[d],r[h],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],o=i<t.length?r[t.charAt(i)]:0;++i;const c=i<t.length?r[t.charAt(i)]:64;++i;const d=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||o==null||c==null||d==null)throw Error();const h=a<<2|o>>4;if(n.push(h),c!==64){const p=o<<4&240|c>>2;if(n.push(p),d!==64){const b=c<<6&192|d;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},mj=function(t){const e=TE(t);return SE.encodeByteArray(e,!0)},Th=function(t){return mj(t).replace(/\./g,"")},EE=function(t){try{return SE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vj(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xr())}function yj(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _j(){const t=xr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xj(){try{return typeof indexedDB=="object"}catch{return!1}}function Tj(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}function Sj(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=()=>Sj().__FIREBASE_DEFAULTS__,kj=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Cj=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&EE(t[1]);return e&&JSON.parse(e)},g0=()=>{try{return Ej()||kj()||Cj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kE=t=>{var e,r;return(r=(e=g0())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},CE=t=>{const e=kE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Aj=()=>{var t;return(t=g0())===null||t===void 0?void 0:t.config},AE=t=>{var e;return(e=g0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t),o="";return[Th(JSON.stringify(r)),Th(JSON.stringify(s)),o].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj="FirebaseError";class cn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Pj,Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?Oj(a,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new cn(i,o,n)}}function Oj(t,e){return t.replace(Dj,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Dj=/\{\$([^}]+)}/g;function Lj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(D_(a)&&D_(s)){if(!Sh(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function D_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Rj(t,e){const r=new Mj(t,e);return r.subscribe.bind(r)}class Mj{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Nj(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=og),i.error===void 0&&(i.error=og),i.complete===void 0&&(i.complete=og);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console!="undefined"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nj(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t){return t&&t._delegate?t._delegate:t}class ya{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Ij;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bj(e))try{this.getOrInitializeService({instanceIdentifier:qa})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qa){return this.instances.has(e)}getOptions(e=qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(!!n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Fj(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=qa){return this.component?this.component.multipleInstances?e:qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fj(t){return t===qa?void 0:t}function Bj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new jj(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const zj={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},$j=nt.INFO,Vj={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},Hj=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Vj[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m0{constructor(e){this.name=e,this._logLevel=$j,this._logHandler=Hj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const qj=(t,e)=>e.some(r=>t instanceof r);let L_,R_;function Gj(){return L_||(L_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wj(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PE=new WeakMap,Cm=new WeakMap,OE=new WeakMap,lg=new WeakMap,v0=new WeakMap;function Kj(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(da(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&PE.set(r,t)}).catch(()=>{}),v0.set(e,t),e}function Yj(t){if(Cm.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});Cm.set(t,e)}let Am={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Cm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return da(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Xj(t){Am=t(Am)}function Qj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(cg(this),e,...r);return OE.set(n,e.sort?e.sort():[e]),da(n)}:Wj().includes(t)?function(...e){return t.apply(cg(this),e),da(PE.get(this))}:function(...e){return da(t.apply(cg(this),e))}}function Jj(t){return typeof t=="function"?Qj(t):(t instanceof IDBTransaction&&Yj(t),qj(t,Gj())?new Proxy(t,Am):t)}function da(t){if(t instanceof IDBRequest)return Kj(t);if(lg.has(t))return lg.get(t);const e=Jj(t);return e!==t&&(lg.set(t,e),v0.set(e,t)),e}const cg=t=>v0.get(t);function Zj(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=da(s);return n&&s.addEventListener("upgradeneeded",l=>{n(da(s.result),l.oldVersion,l.newVersion,da(s.transaction))}),r&&s.addEventListener("blocked",()=>r()),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),o}const e5=["get","getKey","getAll","getAllKeys","count"],t5=["put","add","delete","clear"],ug=new Map;function M_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=t5.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||e5.includes(r)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),i&&l.done]))[0]};return ug.set(e,a),a}Xj(t=>({...t,get:(e,r,n)=>M_(e,r)||t.get(e,r,n),has:(e,r)=>!!M_(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(i5(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function i5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Im="@firebase/app",N_="0.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new m0("@firebase/app"),n5="@firebase/app-compat",a5="@firebase/analytics-compat",s5="@firebase/analytics",o5="@firebase/app-check-compat",l5="@firebase/app-check",c5="@firebase/auth",u5="@firebase/auth-compat",d5="@firebase/database",h5="@firebase/database-compat",f5="@firebase/functions",p5="@firebase/functions-compat",g5="@firebase/installations",m5="@firebase/installations-compat",v5="@firebase/messaging",y5="@firebase/messaging-compat",b5="@firebase/performance",w5="@firebase/performance-compat",_5="@firebase/remote-config",x5="@firebase/remote-config-compat",T5="@firebase/storage",S5="@firebase/storage-compat",E5="@firebase/firestore",k5="@firebase/firestore-compat",C5="firebase",A5="9.15.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="[DEFAULT]",I5={[Im]:"fire-core",[n5]:"fire-core-compat",[s5]:"fire-analytics",[a5]:"fire-analytics-compat",[l5]:"fire-app-check",[o5]:"fire-app-check-compat",[c5]:"fire-auth",[u5]:"fire-auth-compat",[d5]:"fire-rtdb",[h5]:"fire-rtdb-compat",[f5]:"fire-fn",[p5]:"fire-fn-compat",[g5]:"fire-iid",[m5]:"fire-iid-compat",[v5]:"fire-fcm",[y5]:"fire-fcm-compat",[b5]:"fire-perf",[w5]:"fire-perf-compat",[_5]:"fire-rc",[x5]:"fire-rc-compat",[T5]:"fire-gcs",[S5]:"fire-gcs-compat",[E5]:"fire-fst",[k5]:"fire-fst-compat","fire-js":"fire-js",[C5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,Om=new Map;function P5(t,e){try{t.container.addComponent(e)}catch(r){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function bs(t){const e=t.name;if(Om.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,t);for(const r of Eh.values())P5(r,t);return!0}function Bf(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ha=new cu("app","Firebase",O5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=A5;function DE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Pm,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ha.create("bad-app-name",{appName:String(i)});if(r||(r=Aj()),!r)throw ha.create("no-options");const a=Eh.get(i);if(a){if(Sh(r,a.options)&&Sh(n,a.config))return a;throw ha.create("duplicate-app",{appName:i})}const s=new Uj(i);for(const l of Om.values())s.addComponent(l);const o=new D5(r,n,s);return Eh.set(i,o),o}function y0(t=Pm){const e=Eh.get(t);if(!e&&t===Pm)return DE();if(!e)throw ha.create("no-app",{appName:t});return e}function Ki(t,e,r){var n;let i=(n=I5[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(o.join(" "));return}bs(new ya(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="firebase-heartbeat-database",R5=1,Dc="firebase-heartbeat-store";let dg=null;function LE(){return dg||(dg=Zj(L5,R5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Dc)}}}).catch(t=>{throw ha.create("idb-open",{originalErrorMessage:t.message})})),dg}async function M5(t){try{return(await LE()).transaction(Dc).objectStore(Dc).get(RE(t))}catch(e){if(e instanceof cn)ys.warn(e.message);else{const r=ha.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(r.message)}}}async function j_(t,e){try{const n=(await LE()).transaction(Dc,"readwrite");return await n.objectStore(Dc).put(e,RE(t)),n.done}catch(r){if(r instanceof cn)ys.warn(r.message);else{const n=ha.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ys.warn(n.message)}}}function RE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=1024,j5=30*24*60*60*1e3;class F5{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new U5(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=F_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=j5}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=F_(),{heartbeatsToSend:r,unsentEntries:n}=B5(this._heartbeatsCache.heartbeats),i=Th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function F_(){return new Date().toISOString().substring(0,10)}function B5(t,e=N5){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),B_(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),B_(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class U5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xj()?Tj().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await M5(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return j_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return j_(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function B_(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t){bs(new ya("platform-logger",e=>new r5(e),"PRIVATE")),bs(new ya("heartbeat",e=>new F5(e),"PRIVATE")),Ki(Im,N_,t),Ki(Im,N_,"esm2017"),Ki("fire-js","")}z5("");var $5="firebase",V5="9.15.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ki($5,V5,"app");var H5=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ke,b0=b0||{},Fe=H5||self;function kh(){}function Uf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function du(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function q5(t){return Object.prototype.hasOwnProperty.call(t,hg)&&t[hg]||(t[hg]=++G5)}var hg="closure_uid_"+(1e9*Math.random()>>>0),G5=0;function W5(t,e,r){return t.call.apply(t.bind,arguments)}function K5(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function br(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?br=W5:br=K5,br.apply(null,arguments)}function _d(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function fr(t,e){function r(){}r.prototype=e.prototype,t.X=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.Wb=function(n,i,a){for(var s=Array(arguments.length-2),o=2;o<arguments.length;o++)s[o-2]=arguments[o];return e.prototype[i].apply(n,s)}}function Ca(){this.s=this.s,this.o=this.o}var Y5=0;Ca.prototype.s=!1;Ca.prototype.na=function(){!this.s&&(this.s=!0,this.M(),Y5!=0)&&q5(this)};Ca.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ME=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1};function w0(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function U_(t,e){for(let r=1;r<arguments.length;r++){const n=arguments[r];if(Uf(n)){const i=t.length||0,a=n.length||0;t.length=i+a;for(let s=0;s<a;s++)t[i+s]=n[s]}else t.push(n)}}function wr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}wr.prototype.h=function(){this.defaultPrevented=!0};var X5=function(){if(!Fe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Fe.addEventListener("test",kh,e),Fe.removeEventListener("test",kh,e)}catch{}return t}();function Ch(t){return/^[\s\xa0]*$/.test(t)}var z_=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function fg(t,e){return t<e?-1:t>e?1:0}function zf(){var t=Fe.navigator;return t&&(t=t.userAgent)?t:""}function $i(t){return zf().indexOf(t)!=-1}function _0(t){return _0[" "](t),t}_0[" "]=kh;function Q5(t){var e=eF;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var J5=$i("Opera"),ko=$i("Trident")||$i("MSIE"),NE=$i("Edge"),Dm=NE||ko,jE=$i("Gecko")&&!(zf().toLowerCase().indexOf("webkit")!=-1&&!$i("Edge"))&&!($i("Trident")||$i("MSIE"))&&!$i("Edge"),Z5=zf().toLowerCase().indexOf("webkit")!=-1&&!$i("Edge");function FE(){var t=Fe.document;return t?t.documentMode:void 0}var Ah;e:{var pg="",gg=function(){var t=zf();if(jE)return/rv:([^\);]+)(\)|;)/.exec(t);if(NE)return/Edge\/([\d\.]+)/.exec(t);if(ko)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Z5)return/WebKit\/(\S+)/.exec(t);if(J5)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(gg&&(pg=gg?gg[1]:""),ko){var mg=FE();if(mg!=null&&mg>parseFloat(pg)){Ah=String(mg);break e}}Ah=pg}var eF={};function tF(){return Q5(function(){let t=0;const e=z_(String(Ah)).split("."),r=z_("9").split("."),n=Math.max(e.length,r.length);for(let s=0;t==0&&s<n;s++){var i=e[s]||"",a=r[s]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],i[0].length==0&&a[0].length==0)break;t=fg(i[1].length==0?0:parseInt(i[1],10),a[1].length==0?0:parseInt(a[1],10))||fg(i[2].length==0,a[2].length==0)||fg(i[2],a[2]),i=i[3],a=a[3]}while(t==0)}return 0<=t})}var Lm;if(Fe.document&&ko){var $_=FE();Lm=$_||parseInt(Ah,10)||void 0}else Lm=void 0;var rF=Lm;function Lc(t,e){if(wr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(jE){e:{try{_0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:iF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Lc.X.h.call(this)}}fr(Lc,wr);var iF={2:"touch",3:"pen",4:"mouse"};Lc.prototype.h=function(){Lc.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var hu="closure_listenable_"+(1e6*Math.random()|0),nF=0;function aF(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.ha=i,this.key=++nF,this.ba=this.ea=!1}function $f(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function x0(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function BE(t){const e={};for(const r in t)e[r]=t[r];return e}const V_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function UE(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let a=0;a<V_.length;a++)r=V_[a],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function Vf(t){this.src=t,this.g={},this.h=0}Vf.prototype.add=function(t,e,r,n,i){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var s=Mm(t,e,n,i);return-1<s?(e=t[s],r||(e.ea=!1)):(e=new aF(e,this.src,a,!!n,i),e.ea=r,t.push(e)),e};function Rm(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=ME(n,e),a;(a=0<=i)&&Array.prototype.splice.call(n,i,1),a&&($f(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function Mm(t,e,r,n){for(var i=0;i<t.length;++i){var a=t[i];if(!a.ba&&a.listener==e&&a.capture==!!r&&a.ha==n)return i}return-1}var T0="closure_lm_"+(1e6*Math.random()|0),vg={};function zE(t,e,r,n,i){if(n&&n.once)return VE(t,e,r,n,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)zE(t,e[a],r,n,i);return null}return r=k0(r),t&&t[hu]?t.N(e,r,du(n)?!!n.capture:!!n,i):$E(t,e,r,!1,n,i)}function $E(t,e,r,n,i,a){if(!e)throw Error("Invalid event type");var s=du(i)?!!i.capture:!!i,o=E0(t);if(o||(t[T0]=o=new Vf(t)),r=o.add(e,r,n,s,a),r.proxy)return r;if(n=sF(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)X5||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(qE(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function sF(){function t(r){return e.call(t.src,t.listener,r)}const e=oF;return t}function VE(t,e,r,n,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)VE(t,e[a],r,n,i);return null}return r=k0(r),t&&t[hu]?t.O(e,r,du(n)?!!n.capture:!!n,i):$E(t,e,r,!0,n,i)}function HE(t,e,r,n,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)HE(t,e[a],r,n,i);else n=du(n)?!!n.capture:!!n,r=k0(r),t&&t[hu]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],r=Mm(a,r,n,i),-1<r&&($f(a[r]),Array.prototype.splice.call(a,r,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=E0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Mm(e,r,n,i)),(r=-1<t?e[t]:null)&&S0(r))}function S0(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[hu])Rm(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(qE(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=E0(e))?(Rm(r,t),r.h==0&&(r.src=null,e[T0]=null)):$f(t)}}}function qE(t){return t in vg?vg[t]:vg[t]="on"+t}function oF(t,e){if(t.ba)t=!0;else{e=new Lc(e,this);var r=t.listener,n=t.ha||t.src;t.ea&&S0(t),t=r.call(n,e)}return t}function E0(t){return t=t[T0],t instanceof Vf?t:null}var yg="__closure_events_fn_"+(1e9*Math.random()>>>0);function k0(t){return typeof t=="function"?t:(t[yg]||(t[yg]=function(e){return t.handleEvent(e)}),t[yg])}function rr(){Ca.call(this),this.i=new Vf(this),this.P=this,this.I=null}fr(rr,Ca);rr.prototype[hu]=!0;rr.prototype.removeEventListener=function(t,e,r,n){HE(this,t,e,r,n)};function ur(t,e){var r,n=t.I;if(n)for(r=[];n;n=n.I)r.push(n);if(t=t.P,n=e.type||e,typeof e=="string")e=new wr(e,t);else if(e instanceof wr)e.target=e.target||t;else{var i=e;e=new wr(n,t),UE(e,i)}if(i=!0,r)for(var a=r.length-1;0<=a;a--){var s=e.g=r[a];i=xd(s,n,!0,e)&&i}if(s=e.g=t,i=xd(s,n,!0,e)&&i,i=xd(s,n,!1,e)&&i,r)for(a=0;a<r.length;a++)s=e.g=r[a],i=xd(s,n,!1,e)&&i}rr.prototype.M=function(){if(rr.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)$f(r[n]);delete t.g[e],t.h--}}this.I=null};rr.prototype.N=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};rr.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function xd(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var s=e[a];if(s&&!s.ba&&s.capture==r){var o=s.listener,l=s.ha||s.src;s.ea&&Rm(t.i,s),i=o.call(l,n)!==!1&&i}}return i&&!n.defaultPrevented}var C0=Fe.JSON.stringify;function lF(){var t=KE;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class cF{constructor(){this.h=this.g=null}add(e,r){const n=GE.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var GE=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new uF,t=>t.reset());class uF{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function dF(t){Fe.setTimeout(()=>{throw t},0)}function WE(t,e){Nm||hF(),jm||(Nm(),jm=!0),KE.add(t,e)}var Nm;function hF(){var t=Fe.Promise.resolve(void 0);Nm=function(){t.then(fF)}}var jm=!1,KE=new cF;function fF(){for(var t;t=lF();){try{t.h.call(t.g)}catch(r){dF(r)}var e=GE;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}jm=!1}function Hf(t,e){rr.call(this),this.h=t||1,this.g=e||Fe,this.j=br(this.lb,this),this.l=Date.now()}fr(Hf,rr);ke=Hf.prototype;ke.ca=!1;ke.R=null;ke.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ur(this,"tick"),this.ca&&(A0(this),this.start()))}};ke.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function A0(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}ke.M=function(){Hf.X.M.call(this),A0(this),delete this.g};function I0(t,e,r){if(typeof t=="function")r&&(t=br(t,r));else if(t&&typeof t.handleEvent=="function")t=br(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Fe.setTimeout(t,e||0)}function YE(t){t.g=I0(()=>{t.g=null,t.i&&(t.i=!1,YE(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class pF extends Ca{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:YE(this)}M(){super.M(),this.g&&(Fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rc(t){Ca.call(this),this.h=t,this.g={}}fr(Rc,Ca);var H_=[];function XE(t,e,r,n){Array.isArray(r)||(r&&(H_[0]=r.toString()),r=H_);for(var i=0;i<r.length;i++){var a=zE(e,r[i],n||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function QE(t){x0(t.g,function(e,r){this.g.hasOwnProperty(r)&&S0(e)},t),t.g={}}Rc.prototype.M=function(){Rc.X.M.call(this),QE(this)};Rc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function qf(){this.g=!0}qf.prototype.Aa=function(){this.g=!1};function gF(t,e,r,n,i,a){t.info(function(){if(t.g)if(a)for(var s="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+c+"&"):s+(u+"=redacted&")}}else s=null;else s=a;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+s})}function mF(t,e,r,n,i,a,s){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+a+" "+s})}function no(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+yF(t,r)+(n?" "+n:"")})}function vF(t,e){t.info(function(){return"TIMEOUT: "+e})}qf.prototype.info=function(){};function yF(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if(a!="noop"&&a!="stop"&&a!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return C0(r)}catch{return e}}var Ps={},q_=null;function Gf(){return q_=q_||new rr}Ps.Pa="serverreachability";function JE(t){wr.call(this,Ps.Pa,t)}fr(JE,wr);function Mc(t){const e=Gf();ur(e,new JE(e))}Ps.STAT_EVENT="statevent";function ZE(t,e){wr.call(this,Ps.STAT_EVENT,t),this.stat=e}fr(ZE,wr);function Fr(t){const e=Gf();ur(e,new ZE(e,t))}Ps.Qa="timingevent";function ek(t,e){wr.call(this,Ps.Qa,t),this.size=e}fr(ek,wr);function fu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Fe.setTimeout(function(){t()},e)}var Wf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},tk={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function P0(){}P0.prototype.h=null;function G_(t){return t.h||(t.h=t.i())}function rk(){}var pu={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function O0(){wr.call(this,"d")}fr(O0,wr);function D0(){wr.call(this,"c")}fr(D0,wr);var Fm;function Kf(){}fr(Kf,P0);Kf.prototype.g=function(){return new XMLHttpRequest};Kf.prototype.i=function(){return{}};Fm=new Kf;function gu(t,e,r,n){this.l=t,this.j=e,this.m=r,this.U=n||1,this.S=new Rc(this),this.O=bF,t=Dm?125:void 0,this.T=new Hf(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ik}function ik(){this.i=null,this.g="",this.h=!1}var bF=45e3,Bm={},Ih={};ke=gu.prototype;ke.setTimeout=function(t){this.O=t};function Um(t,e,r){t.K=1,t.v=Xf(In(e)),t.s=r,t.P=!0,nk(t,null)}function nk(t,e){t.F=Date.now(),mu(t),t.A=In(t.v);var r=t.A,n=t.U;Array.isArray(n)||(n=[String(n)]),hk(r.i,"t",n),t.C=0,r=t.l.H,t.h=new ik,t.g=Lk(t.l,r?e:null,!t.s),0<t.N&&(t.L=new pF(br(t.La,t,t.g),t.N)),XE(t.S,t.g,"readystatechange",t.ib),e=t.H?BE(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Mc(),gF(t.j,t.u,t.A,t.m,t.U,t.s)}ke.ib=function(t){t=t.target;const e=this.L;e&&bn(t)==3?e.l():this.La(t)};ke.La=function(t){try{if(t==this.g)e:{const u=bn(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(u!=3||Dm||this.g&&(this.h.h||this.g.fa()||X_(this.g)))){this.I||u!=4||e==7||(e==8||0>=d?Mc(3):Mc(2)),Yf(this);var r=this.g.aa();this.Y=r;t:if(ak(this)){var n=X_(this.g);t="";var i=n.length,a=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){ts(this),lc(this);var s="";break t}this.h.i=new Fe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:a&&e==i-1});n.splice(0,i),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=r==200,mF(this.j,this.u,this.A,this.m,this.U,u,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var o,l=this.g;if((o=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ch(o)){var c=o;break t}}c=null}if(r=c)no(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zm(this,r);else{this.i=!1,this.o=3,Fr(12),ts(this),lc(this);break e}}this.P?(sk(this,u,s),Dm&&this.i&&u==3&&(XE(this.S,this.T,"tick",this.hb),this.T.start())):(no(this.j,this.m,s,null),zm(this,s)),u==4&&ts(this),this.i&&!this.I&&(u==4?Ik(this.l,this):(this.i=!1,mu(this)))}else r==400&&0<s.indexOf("Unknown SID")?(this.o=3,Fr(12)):(this.o=0,Fr(13)),ts(this),lc(this)}}}catch{}finally{}};function ak(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function sk(t,e,r){let n=!0,i;for(;!t.I&&t.C<r.length;)if(i=wF(t,r),i==Ih){e==4&&(t.o=4,Fr(14),n=!1),no(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Bm){t.o=4,Fr(15),no(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else no(t.j,t.m,i,null),zm(t,i);ak(t)&&i!=Ih&&i!=Bm&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,Fr(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),B0(e),e.K=!0,Fr(11))):(no(t.j,t.m,r,"[Invalid Chunked Response]"),ts(t),lc(t))}ke.hb=function(){if(this.g){var t=bn(this.g),e=this.g.fa();this.C<e.length&&(Yf(this),sk(this,t,e),this.i&&t!=4&&mu(this))}};function wF(t,e){var r=t.C,n=e.indexOf(`
`,r);return n==-1?Ih:(r=Number(e.substring(r,n)),isNaN(r)?Bm:(n+=1,n+r>e.length?Ih:(e=e.substr(n,r),t.C=n+r,e)))}ke.cancel=function(){this.I=!0,ts(this)};function mu(t){t.V=Date.now()+t.O,ok(t,t.O)}function ok(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=fu(br(t.gb,t),e)}function Yf(t){t.B&&(Fe.clearTimeout(t.B),t.B=null)}ke.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(vF(this.j,this.A),this.K!=2&&(Mc(),Fr(17)),ts(this),this.o=2,lc(this)):ok(this,this.V-t)};function lc(t){t.l.G==0||t.I||Ik(t.l,t)}function ts(t){Yf(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,A0(t.T),QE(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function zm(t,e){try{var r=t.l;if(r.G!=0&&(r.g==t||$m(r.h,t))){if(!t.J&&$m(r.h,t)&&r.G==3){try{var n=r.Fa.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.F+3e3<t.F)Dh(r),Zf(r);else break e;F0(r),Fr(18)}}else r.Ba=i[1],0<r.Ba-r.T&&37500>i[2]&&r.L&&r.A==0&&!r.v&&(r.v=fu(br(r.cb,r),6e3));if(1>=gk(r.h)&&r.ja){try{r.ja()}catch{}r.ja=void 0}}else rs(r,11)}else if((t.J||r.g==t)&&Dh(r),!Ch(e))for(i=r.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(r.T=c[0],c=c[1],r.G==2)if(c[0]=="c"){r.I=c[1],r.ka=c[2];const u=c[3];u!=null&&(r.ma=u,r.j.info("VER="+r.ma));const d=c[4];d!=null&&(r.Ca=d,r.j.info("SVER="+r.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,r.J=n,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;const p=t.g;if(p){const b=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var a=n.h;a.g||b.indexOf("spdy")==-1&&b.indexOf("quic")==-1&&b.indexOf("h2")==-1||(a.j=a.l,a.g=new Set,a.h&&(L0(a,a.h),a.h=null))}if(n.D){const w=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(n.za=w,At(n.F,n.D,w))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-t.F,r.j.info("Handshake RTT: "+r.P+"ms")),n=r;var s=t;if(n.sa=Dk(n,n.H?n.ka:null,n.V),s.J){mk(n.h,s);var o=s,l=n.J;l&&o.setTimeout(l),o.B&&(Yf(o),mu(o)),n.g=s}else Ck(n);0<r.i.length&&ep(r)}else c[0]!="stop"&&c[0]!="close"||rs(r,7);else r.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?rs(r,7):j0(r):c[0]!="noop"&&r.l&&r.l.wa(c),r.A=0)}}Mc(4)}catch{}}function _F(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map!="undefined"&&t instanceof Map||typeof Set!="undefined"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Uf(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function xF(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map!="undefined"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set!="undefined"&&t instanceof Set)){if(Uf(t)||typeof t=="string"){var e=[];t=t.length;for(var r=0;r<t;r++)e.push(r);return e}e=[],r=0;for(const n in t)e[r++]=n;return e}}}function lk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Uf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var r=xF(t),n=_F(t),i=n.length,a=0;a<i;a++)e.call(void 0,n[a],r&&r[a],t)}var ck=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TF(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var a=t[r].substring(0,n);i=t[r].substring(n+1)}else a=t[r];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function cs(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof cs){this.h=e!==void 0?e:t.h,Ph(this,t.j),this.s=t.s,this.g=t.g,Oh(this,t.m),this.l=t.l,e=t.i;var r=new Nc;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),W_(this,r),this.o=t.o}else t&&(r=String(t).match(ck))?(this.h=!!e,Ph(this,r[1]||"",!0),this.s=Hl(r[2]||""),this.g=Hl(r[3]||"",!0),Oh(this,r[4]),this.l=Hl(r[5]||"",!0),W_(this,r[6]||"",!0),this.o=Hl(r[7]||"")):(this.h=!!e,this.i=new Nc(null,this.h))}cs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ql(e,K_,!0),":");var r=this.g;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ql(e,K_,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.g&&r.charAt(0)!="/"&&t.push("/"),t.push(ql(r,r.charAt(0)=="/"?kF:EF,!0))),(r=this.i.toString())&&t.push("?",r),(r=this.o)&&t.push("#",ql(r,AF)),t.join("")};function In(t){return new cs(t)}function Ph(t,e,r){t.j=r?Hl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Oh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function W_(t,e,r){e instanceof Nc?(t.i=e,IF(t.i,t.h)):(r||(e=ql(e,CF)),t.i=new Nc(e,t.h))}function At(t,e,r){t.i.set(e,r)}function Xf(t){return At(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Hl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ql(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,SF),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function SF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var K_=/[#\/\?@]/g,EF=/[#\?:]/g,kF=/[#\?]/g,CF=/[#\?@]/g,AF=/#/g;function Nc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Aa(t){t.g||(t.g=new Map,t.h=0,t.i&&TF(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}ke=Nc.prototype;ke.add=function(t,e){Aa(this),this.i=null,t=sl(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function uk(t,e){Aa(t),e=sl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function dk(t,e){return Aa(t),e=sl(t,e),t.g.has(e)}ke.forEach=function(t,e){Aa(this),this.g.forEach(function(r,n){r.forEach(function(i){t.call(e,i,n,this)},this)},this)};ke.oa=function(){Aa(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let n=0;n<e.length;n++){const i=t[n];for(let a=0;a<i.length;a++)r.push(e[n])}return r};ke.W=function(t){Aa(this);let e=[];if(typeof t=="string")dk(this,t)&&(e=e.concat(this.g.get(sl(this,t))));else{t=Array.from(this.g.values());for(let r=0;r<t.length;r++)e=e.concat(t[r])}return e};ke.set=function(t,e){return Aa(this),this.i=null,t=sl(this,t),dk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ke.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function hk(t,e,r){uk(t,e),0<r.length&&(t.i=null,t.g.set(sl(t,e),w0(r)),t.h+=r.length)}ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var n=e[r];const a=encodeURIComponent(String(n)),s=this.W(n);for(n=0;n<s.length;n++){var i=a;s[n]!==""&&(i+="="+encodeURIComponent(String(s[n]))),t.push(i)}}return this.i=t.join("&")};function sl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function IF(t,e){e&&!t.j&&(Aa(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(uk(this,n),hk(this,i,r))},t)),t.j=e}var PF=class{constructor(t,e){this.h=t,this.g=e}};function fk(t){this.l=t||OF,Fe.PerformanceNavigationTiming?(t=Fe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Fe.g&&Fe.g.Ga&&Fe.g.Ga()&&Fe.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var OF=10;function pk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function gk(t){return t.h?1:t.g?t.g.size:0}function $m(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function L0(t,e){t.g?t.g.add(e):t.h=e}function mk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}fk.prototype.cancel=function(){if(this.i=vk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function vk(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.D);return e}return w0(t.i)}function R0(){}R0.prototype.stringify=function(t){return Fe.JSON.stringify(t,void 0)};R0.prototype.parse=function(t){return Fe.JSON.parse(t,void 0)};function DF(){this.g=new R0}function LF(t,e,r){const n=r||"";try{lk(t,function(i,a){let s=i;du(i)&&(s=C0(i)),e.push(n+a+"="+encodeURIComponent(s))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function RF(t,e){const r=new qf;if(Fe.Image){const n=new Image;n.onload=_d(Td,r,n,"TestLoadImage: loaded",!0,e),n.onerror=_d(Td,r,n,"TestLoadImage: error",!1,e),n.onabort=_d(Td,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=_d(Td,r,n,"TestLoadImage: timeout",!1,e),Fe.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Td(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function vu(t){this.l=t.ac||null,this.j=t.jb||!1}fr(vu,P0);vu.prototype.g=function(){return new Qf(this.l,this.j)};vu.prototype.i=function(t){return function(){return t}}({});function Qf(t,e){rr.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=M0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fr(Qf,rr);var M0=0;ke=Qf.prototype;ke.open=function(t,e){if(this.readyState!=M0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,jc(this)};ke.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Fe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yu(this)),this.readyState=M0};ke.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Fe.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yk(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function yk(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}ke.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?yu(this):jc(this),this.readyState==3&&yk(this)}};ke.Va=function(t){this.g&&(this.response=this.responseText=t,yu(this))};ke.Ua=function(t){this.g&&(this.response=t,yu(this))};ke.ga=function(){this.g&&yu(this)};function yu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,jc(t)}ke.setRequestHeader=function(t,e){this.v.append(t,e)};ke.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ke.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function jc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Qf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var MF=Fe.JSON.parse;function Lt(t){rr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bk,this.K=this.L=!1}fr(Lt,rr);var bk="",NF=/^https?$/i,jF=["POST","PUT"];ke=Lt.prototype;ke.Ka=function(t){this.L=t};ke.da=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fm.g(),this.C=this.u?G_(this.u):G_(Fm),this.g.onreadystatechange=br(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(a){Y_(this,a);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)r.set(i,n[i]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(const a of n.keys())r.set(a,n.get(a));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(r.keys()).find(a=>a.toLowerCase()=="content-type"),i=Fe.FormData&&t instanceof Fe.FormData,!(0<=ME(jF,e))||n||i||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,s]of r)this.g.setRequestHeader(a,s);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xk(this),0<this.B&&((this.K=FF(this.g))?(this.g.timeout=this.B,this.g.ontimeout=br(this.qa,this)):this.A=I0(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){Y_(this,a)}};function FF(t){return ko&&tF()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ke.qa=function(){typeof b0!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ur(this,"timeout"),this.abort(8))};function Y_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,wk(t),Jf(t)}function wk(t){t.D||(t.D=!0,ur(t,"complete"),ur(t,"error"))}ke.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ur(this,"complete"),ur(this,"abort"),Jf(this))};ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jf(this,!0)),Lt.X.M.call(this)};ke.Ha=function(){this.s||(this.F||this.v||this.l?_k(this):this.fb())};ke.fb=function(){_k(this)};function _k(t){if(t.h&&typeof b0!="undefined"&&(!t.C[1]||bn(t)!=4||t.aa()!=2)){if(t.v&&bn(t)==4)I0(t.Ha,0,t);else if(ur(t,"readystatechange"),bn(t)==4){t.h=!1;try{const o=t.aa();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=o===0){var i=String(t.H).match(ck)[1]||null;if(!i&&Fe.self&&Fe.self.location){var a=Fe.self.location.protocol;i=a.substr(0,a.length-1)}n=!NF.test(i?i.toLowerCase():"")}r=n}if(r)ur(t,"complete"),ur(t,"success");else{t.m=6;try{var s=2<bn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.aa()+"]",wk(t)}}finally{Jf(t)}}}}function Jf(t,e){if(t.g){xk(t);const r=t.g,n=t.C[0]?kh:null;t.g=null,t.C=null,e||ur(t,"ready");try{r.onreadystatechange=n}catch{}}}function xk(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Fe.clearTimeout(t.A),t.A=null)}function bn(t){return t.g?t.g.readyState:0}ke.aa=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}};ke.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};ke.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),MF(e)}};function X_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case bk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ke.Ea=function(){return this.m};ke.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Tk(t){let e="";return x0(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function N0(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=Tk(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):At(t,e,r))}function Ol(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function Sk(t){this.Ca=0,this.i=[],this.j=new qf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ol("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ol("baseRetryDelayMs",5e3,t),this.bb=Ol("retryDelaySeedMs",1e4,t),this.$a=Ol("forwardChannelMaxRetries",2,t),this.ta=Ol("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new fk(t&&t.concurrentRequestLimit),this.Fa=new DF,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}ke=Sk.prototype;ke.ma=8;ke.G=1;function j0(t){if(Ek(t),t.G==3){var e=t.U++,r=In(t.F);At(r,"SID",t.I),At(r,"RID",e),At(r,"TYPE","terminate"),bu(t,r),e=new gu(t,t.j,e,void 0),e.K=2,e.v=Xf(In(r)),r=!1,Fe.navigator&&Fe.navigator.sendBeacon&&(r=Fe.navigator.sendBeacon(e.v.toString(),"")),!r&&Fe.Image&&(new Image().src=e.v,r=!0),r||(e.g=Lk(e.l,null),e.g.da(e.v)),e.F=Date.now(),mu(e)}Ok(t)}function Zf(t){t.g&&(B0(t),t.g.cancel(),t.g=null)}function Ek(t){Zf(t),t.u&&(Fe.clearTimeout(t.u),t.u=null),Dh(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Fe.clearTimeout(t.m),t.m=null)}function ep(t){pk(t.h)||t.m||(t.m=!0,WE(t.Ja,t),t.C=0)}function BF(t,e){return gk(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=fu(br(t.Ja,t,e),Pk(t,t.C)),t.C++,!0)}ke.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new gu(this,this.j,t,void 0);let a=this.s;if(this.S&&(a?(a=BE(a),UE(a,this.S)):a=this.S),this.o!==null||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){t:{var n=this.i[r];if("__data__"in n.g&&(n=n.g.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=kk(this,i,e),r=In(this.F),At(r,"RID",t),At(r,"CVER",22),this.D&&At(r,"X-HTTP-Session-Id",this.D),bu(this,r),a&&(this.N?e="headers="+encodeURIComponent(String(Tk(a)))+"&"+e:this.o&&N0(r,this.o,a)),L0(this.h,i),this.Ya&&At(r,"TYPE","init"),this.O?(At(r,"$req",e),At(r,"SID","null"),i.Z=!0,Um(i,r,null)):Um(i,r,e),this.G=2}}else this.G==3&&(t?Q_(this,t):this.i.length==0||pk(this.h)||Q_(this))};function Q_(t,e){var r;e?r=e.m:r=t.U++;const n=In(t.F);At(n,"SID",t.I),At(n,"RID",r),At(n,"AID",t.T),bu(t,n),t.o&&t.s&&N0(n,t.o,t.s),r=new gu(t,t.j,r,t.C+1),t.o===null&&(r.H=t.s),e&&(t.i=e.D.concat(t.i)),e=kk(t,r,1e3),r.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),L0(t.h,r),Um(r,n,e)}function bu(t,e){t.ia&&x0(t.ia,function(r,n){At(e,n,r)}),t.l&&lk({},function(r,n){At(e,n,r)})}function kk(t,e,r){r=Math.min(t.i.length,r);var n=t.l?br(t.l.Ra,t.l,t):null;e:{var i=t.i;let a=-1;for(;;){const s=["count="+r];a==-1?0<r?(a=i[0].h,s.push("ofs="+a)):a=0:s.push("ofs="+a);let o=!0;for(let l=0;l<r;l++){let c=i[l].h;const u=i[l].g;if(c-=a,0>c)a=Math.max(0,i[l].h-100),o=!1;else try{LF(u,s,"req"+c+"_")}catch{n&&n(u)}}if(o){n=s.join("&");break e}}}return t=t.i.splice(0,r),e.D=t,n}function Ck(t){t.g||t.u||(t.Z=1,WE(t.Ia,t),t.A=0)}function F0(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=fu(br(t.Ia,t),Pk(t,t.A)),t.A++,!0)}ke.Ia=function(){if(this.u=null,Ak(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=fu(br(this.eb,this),t)}};ke.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Fr(10),Zf(this),Ak(this))};function B0(t){t.B!=null&&(Fe.clearTimeout(t.B),t.B=null)}function Ak(t){t.g=new gu(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=In(t.sa);At(e,"RID","rpc"),At(e,"SID",t.I),At(e,"CI",t.L?"0":"1"),At(e,"AID",t.T),At(e,"TYPE","xmlhttp"),bu(t,e),t.o&&t.s&&N0(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var r=t.g;t=t.ka,r.K=1,r.v=Xf(In(e)),r.s=null,r.P=!0,nk(r,t)}ke.cb=function(){this.v!=null&&(this.v=null,Zf(this),F0(this),Fr(19))};function Dh(t){t.v!=null&&(Fe.clearTimeout(t.v),t.v=null)}function Ik(t,e){var r=null;if(t.g==e){Dh(t),B0(t),t.g=null;var n=2}else if($m(t.h,e))r=e.D,mk(t.h,e),n=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(n==1){r=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;n=Gf(),ur(n,new ek(n,r)),ep(t)}else Ck(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(n==1&&BF(t,e)||n==2&&F0(t)))switch(r&&0<r.length&&(e=t.h,e.i=e.i.concat(r)),i){case 1:rs(t,5);break;case 4:rs(t,10);break;case 3:rs(t,6);break;default:rs(t,2)}}}function Pk(t,e){let r=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(r*=2),r*e}function rs(t,e){if(t.j.info("Error code "+e),e==2){var r=null;t.l&&(r=null);var n=br(t.kb,t);r||(r=new cs("//www.google.com/images/cleardot.gif"),Fe.location&&Fe.location.protocol=="http"||Ph(r,"https"),Xf(r)),RF(r.toString(),n)}else Fr(2);t.G=0,t.l&&t.l.va(e),Ok(t),Ek(t)}ke.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Fr(2)):(this.j.info("Failed to ping google.com"),Fr(1))};function Ok(t){if(t.G=0,t.la=[],t.l){const e=vk(t.h);(e.length!=0||t.i.length!=0)&&(U_(t.la,e),U_(t.la,t.i),t.h.i.length=0,w0(t.i),t.i.length=0),t.l.ua()}}function Dk(t,e,r){var n=r instanceof cs?In(r):new cs(r,void 0);if(n.g!="")e&&(n.g=e+"."+n.g),Oh(n,n.m);else{var i=Fe.location;n=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new cs(null,void 0);n&&Ph(a,n),e&&(a.g=e),i&&Oh(a,i),r&&(a.l=r),n=a}return r=t.D,e=t.za,r&&e&&At(n,r,e),At(n,"VER",t.ma),bu(t,n),n}function Lk(t,e,r){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Da&&!t.ra?new Lt(new vu({jb:!0})):new Lt(t.ra),e.Ka(t.H),e}function Rk(){}ke=Rk.prototype;ke.xa=function(){};ke.wa=function(){};ke.va=function(){};ke.ua=function(){};ke.Ra=function(){};function Lh(){if(ko&&!(10<=Number(rF)))throw Error("Environmental error: no available transport.")}Lh.prototype.g=function(t,e){return new ai(t,e)};function ai(t,e){rr.call(this),this.g=new Sk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Ch(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ch(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ol(this)}fr(ai,rr);ai.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,r=this.h||void 0;Fr(0),t.V=e,t.ia=r||{},t.L=t.Y,t.F=Dk(t,null,t.V),ep(t)};ai.prototype.close=function(){j0(this.g)};ai.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var r={};r.__data__=t,t=r}else this.v&&(r={},r.__data__=C0(t),t=r);e.i.push(new PF(e.ab++,t)),e.G==3&&ep(e)};ai.prototype.M=function(){this.g.l=null,delete this.j,j0(this.g),delete this.g,ai.X.M.call(this)};function Mk(t){O0.call(this);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}fr(Mk,O0);function Nk(){D0.call(this),this.status=1}fr(Nk,D0);function ol(t){this.g=t}fr(ol,Rk);ol.prototype.xa=function(){ur(this.g,"a")};ol.prototype.wa=function(t){ur(this.g,new Mk(t))};ol.prototype.va=function(t){ur(this.g,new Nk)};ol.prototype.ua=function(){ur(this.g,"b")};Lh.prototype.createWebChannel=Lh.prototype.g;ai.prototype.send=ai.prototype.u;ai.prototype.open=ai.prototype.m;ai.prototype.close=ai.prototype.close;Wf.NO_ERROR=0;Wf.TIMEOUT=8;Wf.HTTP_ERROR=6;tk.COMPLETE="complete";rk.EventType=pu;pu.OPEN="a";pu.CLOSE="b";pu.ERROR="c";pu.MESSAGE="d";rr.prototype.listen=rr.prototype.N;Lt.prototype.listenOnce=Lt.prototype.O;Lt.prototype.getLastError=Lt.prototype.Oa;Lt.prototype.getLastErrorCode=Lt.prototype.Ea;Lt.prototype.getStatus=Lt.prototype.aa;Lt.prototype.getResponseJson=Lt.prototype.Sa;Lt.prototype.getResponseText=Lt.prototype.fa;Lt.prototype.send=Lt.prototype.da;Lt.prototype.setWithCredentials=Lt.prototype.Ka;var UF=function(){return new Lh},zF=function(){return Gf()},bg=Wf,$F=tk,VF=Ps,J_={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},HF=vu,Sd=rk,qF=Lt;const Z_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pr.UNAUTHENTICATED=new pr(null),pr.GOOGLE_CREDENTIALS=new pr("google-credentials-uid"),pr.FIRST_PARTY=new pr("first-party-uid"),pr.MOCK_USER=new pr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="9.15.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new m0("@firebase/firestore");function ex(){return ws.logLevel}function Ce(t,...e){if(ws.logLevel<=nt.DEBUG){const r=e.map(U0);ws.debug(`Firestore (${ll}): ${t}`,...r)}}function Pn(t,...e){if(ws.logLevel<=nt.ERROR){const r=e.map(U0);ws.error(`Firestore (${ll}): ${t}`,...r)}}function Vm(t,...e){if(ws.logLevel<=nt.WARN){const r=e.map(U0);ws.warn(`Firestore (${ll}): ${t}`,...r)}}function U0(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t="Unexpected state"){const e=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: `+t;throw Pn(e),new Error(e)}function wt(t,e){t||Me()}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends cn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(pr.UNAUTHENTICATED))}shutdown(){}}class WF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class KF{constructor(e){this.t=e,this.currentUser=pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fa,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fa)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(wt(typeof n.accessToken=="string"),new jk(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string"),new pr(e)}}class YF{constructor(e,r,n,i){this.h=e,this.l=r,this.m=n,this.g=i,this.type="FirstParty",this.user=pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(wt(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class XF{constructor(e,r,n,i){this.h=e,this.l=r,this.m=n,this.g=i}getToken(){return Promise.resolve(new YF(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JF{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const n=a=>{a.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.A;return this.A=a.token,Ce("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(wt(typeof r.token=="string"),this.A=r.token,new QF(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=ZF(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function ct(t,e){return t<e?-1:t>e?1:0}function Co(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Te(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Te(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Te(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Wt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Wt(0,0))}static max(){return new Ve(new Wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,r,n){r===void 0?r=0:r>e.length&&Me(),n===void 0?n=e.length-r:n>e.length-r&&Me(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Fc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Fc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),s=r.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Tt extends Fc{construct(e,r,n){return new Tt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Te(Z.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Tt(r)}static emptyPath(){return new Tt([])}}const eB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends Fc{construct(e,r,n){return new vr(e,r,n)}static isValidIdentifier(e){return eB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new Te(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Te(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Te(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(n+=o,i++):(a(),i++)}if(a(),s)throw new Te(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(r)}static emptyPath(){return new vr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Tt.fromString(e))}static fromName(e){return new Ae(Tt.fromString(e).popFirst(5))}static empty(){return new Ae(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Tt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Tt(e.slice()))}}function tB(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(n===1e9?new Wt(r+1,0):new Wt(r,n));return new ba(i,Ae.empty(),e)}function rB(t){return new ba(t.readTime,t.key,-1)}class ba{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ba(Ve.min(),Ae.empty(),-1)}static max(){return new ba(Ve.max(),Ae.empty(),-1)}}function iB(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ae.comparator(t.documentKey,e.documentKey),r!==0?r:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==nB)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Me(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new se((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof se?r:se.resolve(r)}catch(r){return se.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):se.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):se.reject(r)}static resolve(e){return new se((r,n)=>{r(e)})}static reject(e){return new se((r,n)=>{n(e)})}static waitFor(e){return new se((r,n)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&r()},l=>n(l))}),s=!0,a===i&&r()})}static or(e){let r=se.resolve(!1);for(const n of e)r=r.next(i=>i?se.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new se((n,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const c=l;r(e[c]).next(u=>{s[c]=u,++o,o===a&&n(s)},u=>i(u))}})}static doWhile(e,r){return new se((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function _u(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ut(n),this.ct=n=>r.writeSequenceNumber(n))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}z0.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,r,n,i,a,s,o,l){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=l}}class Bc{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function cl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Bk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t){return t==null}function Rh(t){return t===0&&1/t==-1/0}function oB(t){return typeof t=="number"&&Number.isInteger(t)&&!Rh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Tr(r)}static fromUint8Array(e){const r=function(n){let i="";for(let a=0;a<n.length;++a)i+=String.fromCharCode(n[a]);return i}(e);return new Tr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const lB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wa(t){if(wt(!!t),typeof t=="string"){let e=0;const r=lB.exec(t);if(wt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ao(t){return typeof t=="string"?Tr.fromBase64String(t):Tr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function zk(t){const e=t.mapValue.fields.__previous_value__;return Uk(e)?zk(e):e}function Uc(t){const e=wa(t.mapValue.fields.__local_write_time__.timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uk(t)?4:cB(t)?9007199254740991:10:Me()}function an(t,e){if(t===e)return!0;const r=_s(t);if(r!==_s(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uc(t).isEqual(Uc(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const a=wa(n.timestampValue),s=wa(i.timestampValue);return a.seconds===s.seconds&&a.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,i){return Ao(n.bytesValue).isEqual(Ao(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,i){return Ut(n.geoPointValue.latitude)===Ut(i.geoPointValue.latitude)&&Ut(n.geoPointValue.longitude)===Ut(i.geoPointValue.longitude)}(t,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Ut(n.integerValue)===Ut(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const a=Ut(n.doubleValue),s=Ut(i.doubleValue);return a===s?Rh(a)===Rh(s):isNaN(a)&&isNaN(s)}return!1}(t,e);case 9:return Co(t.arrayValue.values||[],e.arrayValue.values||[],an);case 10:return function(n,i){const a=n.mapValue.fields||{},s=i.mapValue.fields||{};if(tx(a)!==tx(s))return!1;for(const o in a)if(a.hasOwnProperty(o)&&(s[o]===void 0||!an(a[o],s[o])))return!1;return!0}(t,e);default:return Me()}}function zc(t,e){return(t.values||[]).find(r=>an(r,e))!==void 0}function Io(t,e){if(t===e)return 0;const r=_s(t),n=_s(e);if(r!==n)return ct(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return function(i,a){const s=Ut(i.integerValue||i.doubleValue),o=Ut(a.integerValue||a.doubleValue);return s<o?-1:s>o?1:s===o?0:isNaN(s)?isNaN(o)?0:-1:1}(t,e);case 3:return rx(t.timestampValue,e.timestampValue);case 4:return rx(Uc(t),Uc(e));case 5:return ct(t.stringValue,e.stringValue);case 6:return function(i,a){const s=Ao(i),o=Ao(a);return s.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const s=i.split("/"),o=a.split("/");for(let l=0;l<s.length&&l<o.length;l++){const c=ct(s[l],o[l]);if(c!==0)return c}return ct(s.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const s=ct(Ut(i.latitude),Ut(a.latitude));return s!==0?s:ct(Ut(i.longitude),Ut(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,a){const s=i.values||[],o=a.values||[];for(let l=0;l<s.length&&l<o.length;++l){const c=Io(s[l],o[l]);if(c)return c}return ct(s.length,o.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Ed.mapValue&&a===Ed.mapValue)return 0;if(i===Ed.mapValue)return 1;if(a===Ed.mapValue)return-1;const s=i.fields||{},o=Object.keys(s),l=a.fields||{},c=Object.keys(l);o.sort(),c.sort();for(let u=0;u<o.length&&u<c.length;++u){const d=ct(o[u],c[u]);if(d!==0)return d;const h=Io(s[o[u]],l[c[u]]);if(h!==0)return h}return ct(o.length,c.length)}(t.mapValue,e.mapValue);default:throw Me()}}function rx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const r=wa(t),n=wa(e),i=ct(r.seconds,n.seconds);return i!==0?i:ct(r.nanos,n.nanos)}function Po(t){return Hm(t)}function Hm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=wa(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ao(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,Ae.fromName(r).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(n){let i="[",a=!0;for(const s of n.values||[])a?a=!1:i+=",",i+=Hm(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",s=!0;for(const o of i)s?s=!1:a+=",",a+=`${o}:${Hm(n.fields[o])}`;return a+"}"}(t.mapValue):Me();var e,r}function ix(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qm(t){return!!t&&"integerValue"in t}function $0(t){return!!t&&"arrayValue"in t}function nx(t){return!!t&&"nullValue"in t}function ax(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jd(t){return!!t&&"mapValue"in t}function cc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cl(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=cc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=cc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function cB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,r){this.position=e,this.inclusive=r}}function sx(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=Ae.comparator(Ae.fromName(s.referenceValue),r.key):n=Io(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function ox(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!an(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{}class zt extends $k{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new hB(e,r,n):r==="array-contains"?new gB(e,n):r==="in"?new mB(e,n):r==="not-in"?new vB(e,n):r==="array-contains-any"?new yB(e,n):new zt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new fB(e,n):new pB(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Io(r,this.value)):r!==null&&_s(this.value)===_s(r)&&this.matchesComparison(Io(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Oi extends $k{constructor(e,r){super(),this.filters=e,this.op=r,this.ht=null}static create(e,r){return new Oi(e,r)}matches(e){return Vk(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(r=>r.isInequality());return e!==null?e.field:null}lt(e){for(const r of this.getFlattenedFilters())if(e(r))return r;return null}}function Vk(t){return t.op==="and"}function uB(t){return dB(t)&&Vk(t)}function dB(t){for(const e of t.filters)if(e instanceof Oi)return!1;return!0}function Hk(t){if(t instanceof zt)return t.field.canonicalString()+t.op.toString()+Po(t.value);{const e=t.filters.map(r=>Hk(r)).join(",");return`${t.op}(${e})`}}function qk(t,e){return t instanceof zt?function(r,n){return n instanceof zt&&r.op===n.op&&r.field.isEqual(n.field)&&an(r.value,n.value)}(t,e):t instanceof Oi?function(r,n){return n instanceof Oi&&r.op===n.op&&r.filters.length===n.filters.length?r.filters.reduce((i,a,s)=>i&&qk(a,n.filters[s]),!0):!1}(t,e):void Me()}function Gk(t){return t instanceof zt?function(e){return`${e.field.canonicalString()} ${e.op} ${Po(e.value)}`}(t):t instanceof Oi?function(e){return e.op.toString()+" {"+e.getFilters().map(Gk).join(" ,")+"}"}(t):"Filter"}class hB extends zt{constructor(e,r,n){super(e,r,n),this.key=Ae.fromName(n.referenceValue)}matches(e){const r=Ae.comparator(e.key,this.key);return this.matchesComparison(r)}}class fB extends zt{constructor(e,r){super(e,"in",r),this.keys=Wk("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class pB extends zt{constructor(e,r){super(e,"not-in",r),this.keys=Wk("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Wk(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ae.fromName(n.referenceValue))}class gB extends zt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return $0(r)&&zc(r.arrayValue,this.value)}}class mB extends zt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&zc(this.value.arrayValue,r)}}class vB extends zt{constructor(e,r){super(e,"not-in",r)}matches(e){if(zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!zc(this.value.arrayValue,r)}}class yB extends zt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!$0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>zc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,r="asc"){this.field=e,this.dir=r}}function bB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,r){this.comparator=e,this.root=r||lr.EMPTY}insert(e,r){return new Yt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,lr.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kd(this.root,e,this.comparator,!0)}}class kd{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lr{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n!=null?n:lr.RED,this.left=i!=null?i:lr.EMPTY,this.right=a!=null?a:lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new lr(e!=null?e:this.key,r!=null?r:this.value,n!=null?n:this.color,i!=null?i:this.left,a!=null?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return lr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Me();const e=this.left.check();if(e!==this.right.check())throw Me();return e+(this.isRed()?0:1)}}lr.EMPTY=null,lr.RED=!0,lr.BLACK=!1;lr.EMPTY=new class{constructor(){this.size=0}get key(){throw Me()}get value(){throw Me()}get color(){throw Me()}get left(){throw Me()}get right(){throw Me()}copy(t,e,r,n,i){return this}insert(t,e,r){return new lr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new lx(this.data.getIterator())}getIteratorFrom(e){return new lx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Kt(this.comparator);return r.data=e,r}}class lx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Yi([])}unionWith(e){let r=new Kt(vr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Yi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Jd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(r)}setAll(e){let r=vr.emptyPath(),n={},i=[];e.forEach((s,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=o.popLast()}s?n[o.lastSegment()]=cc(s):i.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());Jd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return an(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Jd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){cl(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new ui(cc(this.value))}}function Kk(t){const e=[];return cl(t.fields,(r,n)=>{const i=new vr([r]);if(Jd(n)){const a=Kk(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new Yi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,r,n,i,a,s,o){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new mr(e,0,Ve.min(),Ve.min(),Ve.min(),ui.empty(),0)}static newFoundDocument(e,r,n,i){return new mr(e,1,r,Ve.min(),n,i,0)}static newNoDocument(e,r){return new mr(e,2,r,Ve.min(),Ve.min(),ui.empty(),0)}static newUnknownDocument(e,r){return new mr(e,3,r,Ve.min(),Ve.min(),ui.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,r=null,n=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.ft=null}}function cx(t,e=null,r=[],n=[],i=null,a=null,s=null){return new wB(t,e,r,n,i,a,s)}function V0(t){const e=qe(t);if(e.ft===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Hk(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),tp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Po(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Po(n)).join(",")),e.ft=r}return e.ft}function H0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!bB(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!qk(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ox(t.startAt,e.startAt)&&ox(t.endAt,e.endAt)}function Gm(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,r=null,n=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.dt=null,this._t=null,this.startAt,this.endAt}}function _B(t,e,r,n,i,a,s,o){return new xu(t,e,r,n,i,a,s,o)}function Yk(t){return new xu(t)}function ux(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Xk(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function q0(t){for(const e of t.filters){const r=e.getFirstInequalityField();if(r!==null)return r}return null}function Qk(t){return t.collectionGroup!==null}function go(t){const e=qe(t);if(e.dt===null){e.dt=[];const r=q0(e),n=Xk(e);if(r!==null&&n===null)r.isKeyField()||e.dt.push(new uc(r)),e.dt.push(new uc(vr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new uc(vr.keyField(),a))}}}return e.dt}function On(t){const e=qe(t);if(!e._t)if(e.limitType==="F")e._t=cx(e.path,e.collectionGroup,go(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const a of go(e)){const s=a.dir==="desc"?"asc":"desc";r.push(new uc(a.field,s))}const n=e.endAt?new Mh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Mh(e.startAt.position,e.startAt.inclusive):null;e._t=cx(e.path,e.collectionGroup,r,e.filters,e.limit,n,i)}return e._t}function Wm(t,e){e.getFirstInequalityField(),q0(t);const r=t.filters.concat([e]);return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Km(t,e,r){return new xu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function rp(t,e){return H0(On(t),On(e))&&t.limitType===e.limitType}function Jk(t){return`${V0(On(t))}|lt:${t.limitType}`}function Ym(t){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(n=>Gk(n)).join(", ")}]`),tp(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Po(n)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Po(n)).join(",")),`Target(${r})`}(On(t))}; limitType=${t.limitType})`}function G0(t,e){return e.isFoundDocument()&&function(r,n){const i=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,n){for(const i of go(r))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const i of r.filters)if(!i.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(i,a,s){const o=sx(i,a,s);return i.inclusive?o<=0:o<0}(r.startAt,go(r),n)||r.endAt&&!function(i,a,s){const o=sx(i,a,s);return i.inclusive?o>=0:o>0}(r.endAt,go(r),n))}(t,e)}function xB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Zk(t){return(e,r)=>{let n=!1;for(const i of go(t)){const a=TB(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function TB(t,e,r){const n=t.field.isKeyField()?Ae.comparator(e.key,r.key):function(i,a,s){const o=a.data.field(i),l=s.data.field(i);return o!==null&&l!==null?Io(o,l):Me()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Me()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function tC(t){return{integerValue:""+t}}function SB(t,e){return oB(e)?tC(e):eC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this._=void 0}}function EB(t,e,r){return t instanceof Nh?function(n,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof $c?iC(t,e):t instanceof Vc?nC(t,e):function(n,i){const a=rC(n,i),s=dx(a)+dx(n.gt);return qm(a)&&qm(n.gt)?tC(s):eC(n.yt,s)}(t,e)}function kB(t,e,r){return t instanceof $c?iC(t,e):t instanceof Vc?nC(t,e):r}function rC(t,e){return t instanceof jh?qm(r=e)||function(n){return!!n&&"doubleValue"in n}(r)?e:{integerValue:0}:null;var r}class Nh extends ip{}class $c extends ip{constructor(e){super(),this.elements=e}}function iC(t,e){const r=aC(e);for(const n of t.elements)r.some(i=>an(i,n))||r.push(n);return{arrayValue:{values:r}}}class Vc extends ip{constructor(e){super(),this.elements=e}}function nC(t,e){let r=aC(e);for(const n of t.elements)r=r.filter(i=>!an(i,n));return{arrayValue:{values:r}}}class jh extends ip{constructor(e,r){super(),this.yt=e,this.gt=r}}function dx(t){return Ut(t.integerValue||t.doubleValue)}function aC(t){return $0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CB(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof $c&&n instanceof $c||r instanceof Vc&&n instanceof Vc?Co(r.elements,n.elements,an):r instanceof jh&&n instanceof jh?an(r.gt,n.gt):r instanceof Nh&&n instanceof Nh}(t.transform,e.transform)}class AB{constructor(e,r){this.version=e,this.transformResults=r}}class Tn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class np{}function sC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lC(t.key,Tn.none()):new Tu(t.key,t.data,Tn.none());{const r=t.data,n=ui.empty();let i=new Kt(vr.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new Os(t.key,n,new Yi(i.toArray()),Tn.none())}}function IB(t,e,r){t instanceof Tu?function(n,i,a){const s=n.value.clone(),o=fx(n.fieldTransforms,i,a.transformResults);s.setAll(o),i.convertToFoundDocument(a.version,s).setHasCommittedMutations()}(t,e,r):t instanceof Os?function(n,i,a){if(!Zd(n.precondition,i))return void i.convertToUnknownDocument(a.version);const s=fx(n.fieldTransforms,i,a.transformResults),o=i.data;o.setAll(oC(n)),o.setAll(s),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):function(n,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function dc(t,e,r,n){return t instanceof Tu?function(i,a,s,o){if(!Zd(i.precondition,a))return s;const l=i.value.clone(),c=px(i.fieldTransforms,o,a);return l.setAll(c),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),null}(t,e,r,n):t instanceof Os?function(i,a,s,o){if(!Zd(i.precondition,a))return s;const l=px(i.fieldTransforms,o,a),c=a.data;return c.setAll(oC(i)),c.setAll(l),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),s===null?null:s.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(t,e,r,n):function(i,a,s){return Zd(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):s}(t,e,r)}function PB(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=rC(n.transform,i||null);a!=null&&(r===null&&(r=ui.empty()),r.set(n.field,a))}return r||null}function hx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&Co(r,n,(i,a)=>CB(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tu extends np{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Os extends np{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function oC(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function fx(t,e,r){const n=new Map;wt(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);n.set(a.field,kB(s,o,r[i]))}return n}function px(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,EB(a,s,e))}return n}class lC extends np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OB extends np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Ze;function LB(t){switch(t){default:return Me();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function cC(t){if(t===void 0)return Pn("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Bt.OK:return Z.OK;case Bt.CANCELLED:return Z.CANCELLED;case Bt.UNKNOWN:return Z.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return Z.INTERNAL;case Bt.UNAVAILABLE:return Z.UNAVAILABLE;case Bt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Bt.NOT_FOUND:return Z.NOT_FOUND;case Bt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Bt.ABORTED:return Z.ABORTED;case Bt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Bt.DATA_LOSS:return Z.DATA_LOSS;default:return Me()}}(Ze=Bt||(Bt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cl(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return Bk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=new Yt(Ae.comparator);function Dn(){return RB}const uC=new Yt(Ae.comparator);function Gl(...t){let e=uC;for(const r of t)e=e.insert(r.key,r);return e}function dC(t){let e=uC;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function is(){return hc()}function hC(){return hc()}function hc(){return new ul(t=>t.toString(),(t,e)=>t.isEqual(e))}const MB=new Yt(Ae.comparator),NB=new Kt(Ae.comparator);function Qe(...t){let e=NB;for(const r of t)e=e.add(r);return e}const jB=new Kt(ct);function fC(){return jB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new ap(Ve.min(),i,fC(),Dn(),Qe())}}class Su{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Su(n,r,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,r,n,i){this.It=e,this.removedTargetIds=r,this.key=n,this.Tt=i}}class pC{constructor(e,r){this.targetId=e,this.Et=r}}class gC{constructor(e,r,n=Tr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class gx{constructor(){this.At=0,this.Rt=vx(),this.bt=Tr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Qe(),r=Qe(),n=Qe();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Me()}}),new Su(this.bt,this.Pt,e,r,n)}xt(){this.vt=!1,this.Rt=vx()}Nt(e,r){this.vt=!0,this.Rt=this.Rt.insert(e,r)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class FB{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Dn(),this.qt=mx(),this.Ut=new Kt(ct)}Kt(e){for(const r of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt);for(const r of e.removedTargetIds)this.Qt(r,e.key,e.Tt)}jt(e){this.forEachTarget(e,r=>{const n=this.Wt(r);switch(e.state){case 0:this.zt(r)&&n.Dt(e.resumeToken);break;case 1:n.Mt(),n.Vt||n.xt(),n.Dt(e.resumeToken);break;case 2:n.Mt(),n.Vt||this.removeTarget(r);break;case 3:this.zt(r)&&(n.Ft(),n.Dt(e.resumeToken));break;case 4:this.zt(r)&&(this.Ht(r),n.Dt(e.resumeToken));break;default:Me()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Bt.forEach((n,i)=>{this.zt(i)&&r(i)})}Jt(e){const r=e.targetId,n=e.Et.count,i=this.Yt(r);if(i){const a=i.target;if(Gm(a))if(n===0){const s=new Ae(a.path);this.Qt(r,s,mr.newNoDocument(s,Ve.min()))}else wt(n===1);else this.Xt(r)!==n&&(this.Ht(r),this.Ut=this.Ut.add(r))}}Zt(e){const r=new Map;this.Bt.forEach((a,s)=>{const o=this.Yt(s);if(o){if(a.current&&Gm(o.target)){const l=new Ae(o.target.path);this.Lt.get(l)!==null||this.te(s,l)||this.Qt(s,l,mr.newNoDocument(l,e))}a.St&&(r.set(s,a.Ct()),a.xt())}});let n=Qe();this.qt.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const c=this.Yt(l);return!c||c.purpose===2||(o=!1,!1)}),o&&(n=n.add(a))}),this.Lt.forEach((a,s)=>s.setReadTime(e));const i=new ap(e,r,this.Ut,this.Lt,n);return this.Lt=Dn(),this.qt=mx(),this.Ut=new Kt(ct),i}Gt(e,r){if(!this.zt(e))return;const n=this.te(e,r.key)?2:0;this.Wt(e).Nt(r.key,n),this.Lt=this.Lt.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ee(r.key).add(e))}Qt(e,r,n){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,r)?i.Nt(r,1):i.kt(r),this.qt=this.qt.insert(r,this.ee(r).delete(e)),n&&(this.Lt=this.Lt.insert(r,n))}removeTarget(e){this.Bt.delete(e)}Xt(e){const r=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let r=this.Bt.get(e);return r||(r=new gx,this.Bt.set(e,r)),r}ee(e){let r=this.qt.get(e);return r||(r=new Kt(ct),this.qt=this.qt.insert(e,r)),r}zt(e){const r=this.Yt(e)!==null;return r||Ce("WatchChangeAggregator","Detected inactive target",e),r}Yt(e){const r=this.Bt.get(e);return r&&r.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new gx),this.$t.getRemoteKeysForTarget(e).forEach(r=>{this.Qt(e,r,null)})}te(e,r){return this.$t.getRemoteKeysForTarget(e).has(r)}}function mx(){return new Yt(Ae.comparator)}function vx(){return new Yt(Ae.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),UB=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),zB=(()=>({and:"AND",or:"OR"}))();class $B{constructor(e,r){this.databaseId=e,this.wt=r}}function Fh(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mC(t,e){return t.wt?e.toBase64():e.toUint8Array()}function VB(t,e){return Fh(t,e.toTimestamp())}function Xi(t){return wt(!!t),Ve.fromTimestamp(function(e){const r=wa(e);return new Wt(r.seconds,r.nanos)}(t))}function W0(t,e){return function(r){return new Tt(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function vC(t){const e=Tt.fromString(t);return wt(_C(e)),e}function Xm(t,e){return W0(t.databaseId,e.path)}function wg(t,e){const r=vC(e);if(r.get(1)!==t.databaseId.projectId)throw new Te(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Te(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ae(yC(r))}function Qm(t,e){return W0(t.databaseId,e)}function HB(t){const e=vC(t);return e.length===4?Tt.emptyPath():yC(e)}function Jm(t){return new Tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yC(t){return wt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yx(t,e,r){return{name:Xm(t,e),fields:r.value.mapValue.fields}}function qB(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Me()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(l,c){return l.wt?(wt(c===void 0||typeof c=="string"),Tr.fromBase64String(c||"")):(wt(c===void 0||c instanceof Uint8Array),Tr.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(l){const c=l.code===void 0?Z.UNKNOWN:cC(l.code);return new Te(c,l.message||"")}(s);r=new gC(n,i,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=wg(t,n.document.name),a=Xi(n.document.updateTime),s=n.document.createTime?Xi(n.document.createTime):Ve.min(),o=new ui({mapValue:{fields:n.document.fields}}),l=mr.newFoundDocument(i,a,s,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new eh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=wg(t,n.document),a=n.readTime?Xi(n.readTime):Ve.min(),s=mr.newNoDocument(i,a),o=n.removedTargetIds||[];r=new eh([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=wg(t,n.document),a=n.removedTargetIds||[];r=new eh([],a,i,null)}else{if(!("filter"in e))return Me();{e.filter;const n=e.filter;n.targetId;const i=n.count||0,a=new DB(i),s=n.targetId;r=new pC(s,a)}}return r}function GB(t,e){let r;if(e instanceof Tu)r={update:yx(t,e.key,e.value)};else if(e instanceof lC)r={delete:Xm(t,e.key)};else if(e instanceof Os)r={update:yx(t,e.key,e.data),updateMask:t3(e.fieldMask)};else{if(!(e instanceof OB))return Me();r={verify:Xm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const s=a.transform;if(s instanceof Nh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof $c)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Vc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof jh)return{fieldPath:a.field.canonicalString(),increment:s.gt};throw Me()}(0,n))),e.precondition.isNone||(r.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:VB(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Me()}(t,e.precondition)),r}function WB(t,e){return t&&t.length>0?(wt(e!==void 0),t.map(r=>function(n,i){let a=n.updateTime?Xi(n.updateTime):Xi(i);return a.isEqual(Ve.min())&&(a=Xi(i)),new AB(a,n.transformResults||[])}(r,e))):[]}function KB(t,e){return{documents:[Qm(t,e.path)]}}function YB(t,e){const r={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(r.parent=Qm(t,n),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=Qm(t,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(l){if(l.length!==0)return wC(Oi.create(l,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:eo(u.field),direction:JB(u.dir)}}(c))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const s=function(l,c){return l.wt||tp(c)?c:{value:c}}(t,e.limit);var o;return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt={before:(o=e.startAt).inclusive,values:o.position}),e.endAt&&(r.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),r}function XB(t){let e=HB(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){wt(n===1);const u=r.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];r.where&&(a=function(u){const d=bC(u);return d instanceof Oi&&uB(d)?d.getFilters():[d]}(r.where));let s=[];r.orderBy&&(s=r.orderBy.map(u=>function(d){return new uc(to(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(u)));let o=null;r.limit&&(o=function(u){let d;return d=typeof u=="object"?u.value:u,tp(d)?null:d}(r.limit));let l=null;r.startAt&&(l=function(u){const d=!!u.before,h=u.values||[];return new Mh(h,d)}(r.startAt));let c=null;return r.endAt&&(c=function(u){const d=!u.before,h=u.values||[];return new Mh(h,d)}(r.endAt)),_B(e,i,s,a,o,"F",l,c)}function QB(t,e){const r=function(n,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Me()}}(0,e.purpose);return r==null?null:{"goog-listen-tags":r}}function bC(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=to(e.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const n=to(e.unaryFilter.field);return zt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=to(e.unaryFilter.field);return zt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=to(e.unaryFilter.field);return zt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Me()}}(t):t.fieldFilter!==void 0?function(e){return zt.create(to(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Me()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Oi.create(e.compositeFilter.filters.map(r=>bC(r)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Me()}}(e.compositeFilter.op))}(t):Me()}function JB(t){return BB[t]}function ZB(t){return UB[t]}function e3(t){return zB[t]}function eo(t){return{fieldPath:t.canonicalString()}}function to(t){return vr.fromServerFormat(t.fieldPath)}function wC(t){return t instanceof zt?function(e){if(e.op==="=="){if(ax(e.value))return{unaryFilter:{field:eo(e.field),op:"IS_NAN"}};if(nx(e.value))return{unaryFilter:{field:eo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ax(e.value))return{unaryFilter:{field:eo(e.field),op:"IS_NOT_NAN"}};if(nx(e.value))return{unaryFilter:{field:eo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(e.field),op:ZB(e.op),value:e.value}}}(t):t instanceof Oi?function(e){const r=e.getFilters().map(n=>wC(n));return r.length===1?r[0]:{compositeFilter:{op:e3(e.op),filters:r}}}(t):Me()}function t3(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function _C(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&IB(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=dc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=dc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=hC();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=r.has(i.key)?null:o;const l=sC(s,o);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ve.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(r,n)=>hx(r,n))&&Co(this.baseMutations,e.baseMutations,(r,n)=>hx(r,n))}}class K0{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){wt(e.mutations.length===n.length);let i=MB;const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new K0(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,r,n,i,a=Ve.min(),s=Ve.min(),o=Tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.ie=e}}function a3(t){const e=XB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.Je=new o3}addToCollectionParentIndex(e,r){return this.Je.add(r),se.resolve()}getCollectionParents(e,r){return se.resolve(this.Je.getEntries(r))}addFieldIndex(e,r){return se.resolve()}deleteFieldIndex(e,r){return se.resolve()}getDocumentsMatchingTarget(e,r){return se.resolve(null)}getIndexType(e,r){return se.resolve(0)}getFieldIndexes(e,r){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,r){return se.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,r){return se.resolve(ba.min())}updateCollectionGroup(e,r,n){return se.resolve()}updateIndexEntries(e,r){return se.resolve()}}class o3{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Kt(Tt.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Kt(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Oo(0)}static vn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.changes=new ul(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?se.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&dc(n.mutation,i,Yi.empty(),Wt.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Qe()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Qe()){const i=is();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let s=Gl();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=is();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Qe()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{r.set(s,o)})})}computeViews(e,r,n,i){let a=Dn();const s=hc(),o=hc();return r.forEach((l,c)=>{const u=n.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Os)?a=a.insert(c.key,c):u!==void 0&&(s.set(c.key,u.mutation.getFieldMask()),dc(u.mutation,c,u.mutation.getFieldMask(),Wt.now()))}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((c,u)=>s.set(c,u)),r.forEach((c,u)=>{var d;return o.set(c,new c3(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,r){const n=hc();let i=new Yt((s,o)=>s-o),a=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const o of s)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||Yi.empty();u=o.applyToLocalView(c,u),n.set(l,u);const d=(i.get(o.batchId)||Qe()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=hC();u.forEach(h=>{if(!a.has(h)){const p=sC(r.get(h),n.get(h));p!==null&&d.set(h,p),a=a.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return se.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n){return function(i){return Ae.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Qk(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n):this.getDocumentsMatchingCollectionQuery(e,r,n)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):se.resolve(is());let o=-1,l=a;return s.next(c=>se.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),a.get(u)?se.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,l,c,Qe())).next(u=>({batchId:o,changes:dC(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ae(r)).next(n=>{let i=Gl();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n){const i=r.collectionGroup;let a=Gl();return this.indexManager.getCollectionParents(e,i).next(s=>se.forEach(s,o=>{const l=function(c,u){return new xu(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(r,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,n).next(c=>{c.forEach((u,d)=>{a=a.insert(u,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n){let i;return this.remoteDocumentCache.getAllFromCollection(e,r.path,n).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId))).next(a=>{a.forEach((o,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,mr.newInvalidDocument(c)))});let s=Gl();return i.forEach((o,l)=>{const c=a.get(o);c!==void 0&&dc(c.mutation,l,Yi.empty(),Wt.now()),G0(r,l)&&(s=s.insert(o,l))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,r){return se.resolve(this.Zn.get(r))}saveBundleMetadata(e,r){var n;return this.Zn.set(r.id,{id:(n=r).id,version:n.version,createTime:Xi(n.createTime)}),se.resolve()}getNamedQuery(e,r){return se.resolve(this.ts.get(r))}saveNamedQuery(e,r){return this.ts.set(r.name,function(n){return{name:n.name,query:a3(n.bundledQuery),readTime:Xi(n.readTime)}}(r)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.overlays=new Yt(Ae.comparator),this.es=new Map}getOverlay(e,r){return se.resolve(this.overlays.get(r))}getOverlays(e,r){const n=is();return se.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.oe(e,r,a)}),se.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.es.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(n)),se.resolve()}getOverlaysForCollection(e,r,n){const i=is(),a=r.length+1,s=new Ae(r.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>n&&i.set(l.getKey(),l)}return se.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new Yt((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=a.get(c.largestBatchId);u===null&&(u=is(),a=a.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=is(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=i)););return se.resolve(o)}oe(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.es.get(i.largestBatchId).delete(n.key);this.es.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new i3(r,n));let a=this.es.get(r);a===void 0&&(a=Qe(),this.es.set(r,a)),this.es.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.ns=new Kt(Qt.ss),this.rs=new Kt(Qt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,r){const n=new Qt(e,r);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}us(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.cs(new Qt(e,r))}hs(e,r){e.forEach(n=>this.removeReference(n,r))}ls(e){const r=new Ae(new Tt([])),n=new Qt(r,e),i=new Qt(r,e+1),a=[];return this.rs.forEachInRange([n,i],s=>{this.cs(s),a.push(s.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const r=new Ae(new Tt([])),n=new Qt(r,e),i=new Qt(r,e+1);let a=Qe();return this.rs.forEachInRange([n,i],s=>{a=a.add(s.key)}),a}containsKey(e){const r=new Qt(e,0),n=this.ns.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Qt{constructor(e,r){this.key=e,this._s=r}static ss(e,r){return Ae.comparator(e.key,r.key)||ct(e._s,r._s)}static os(e,r){return ct(e._s,r._s)||Ae.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this.gs=new Kt(Qt.ss)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new r3(a,r,n,i);this.mutationQueue.push(s);for(const o of i)this.gs=this.gs.add(new Qt(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return se.resolve(s)}lookupMutationBatch(e,r){return se.resolve(this.ys(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ps(n),a=i<0?0:i;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Qt(r,0),i=new Qt(r,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([n,i],s=>{const o=this.ys(s._s);a.push(o)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Kt(ct);return r.forEach(i=>{const a=new Qt(i,0),s=new Qt(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,s],o=>{n=n.add(o._s)})}),se.resolve(this.Is(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;Ae.isDocumentKey(a)||(a=a.child(""));const s=new Qt(new Ae(a),0);let o=new Kt(ct);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===i&&(o=o.add(l._s)),!0)},s),se.resolve(this.Is(o))}Is(e){const r=[];return e.forEach(n=>{const i=this.ys(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){wt(this.Ts(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.gs;return se.forEach(r.mutations,i=>{const a=new Qt(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=n})}An(e){}containsKey(e,r){const n=new Qt(r,0),i=this.gs.firstAfterOrEqual(n);return se.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Ts(e,r){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.Es=e,this.docs=new Yt(Ae.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.Es(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return se.resolve(n?n.document.mutableCopy():mr.newInvalidDocument(r))}getEntries(e,r){let n=Dn();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():mr.newInvalidDocument(i))}),se.resolve(n)}getAllFromCollection(e,r,n){let i=Dn();const a=new Ae(r.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:o,value:{document:l}}=s.getNext();if(!r.isPrefixOf(o.path))break;o.path.length>r.length+1||iB(rB(l),n)<=0||(i=i.insert(l.key,l.mutableCopy()))}return se.resolve(i)}getAllFromCollectionGroup(e,r,n,i){Me()}As(e,r){return se.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new g3(this)}getSize(e){return se.resolve(this.size)}}class g3 extends l3{constructor(e){super(),this.Yn=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(n)}),se.waitFor(r)}getFromCache(e,r){return this.Yn.getEntry(e,r)}getAllFromCache(e,r){return this.Yn.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.persistence=e,this.Rs=new ul(r=>V0(r),H0),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Y0,this.targetCount=0,this.vs=Oo.Pn()}forEachTarget(e,r){return this.Rs.forEach((n,i)=>r(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.bs&&(this.bs=r),se.resolve()}Dn(e){this.Rs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.vs=new Oo(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.Dn(r),this.targetCount+=1,se.resolve()}updateTargetData(e,r){return this.Dn(r),se.resolve()}removeTargetData(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Rs.forEach((s,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Rs.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),se.waitFor(a).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,r){const n=this.Rs.get(r)||null;return se.resolve(n)}addMatchingKeys(e,r,n){return this.Ps.us(r,n),se.resolve()}removeMatchingKeys(e,r,n){this.Ps.hs(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Ps.ls(r),se.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Ps.ds(r);return se.resolve(n)}containsKey(e,r){return se.resolve(this.Ps.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,r){this.Vs={},this.overlays={},this.Ss=new z0(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new m3(this),this.indexManager=new s3,this.remoteDocumentCache=function(n){return new p3(n)}(n=>this.referenceDelegate.xs(n)),this.yt=new n3(r),this.Ns=new d3(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new h3,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Vs[e.toKey()];return n||(n=new f3(r,this.referenceDelegate),this.Vs[e.toKey()]=n),n}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,r,n){Ce("MemoryPersistence","Starting transaction:",e);const i=new y3(this.Ss.next());return this.referenceDelegate.ks(),n(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,r){return se.or(Object.values(this.Vs).map(n=>()=>n.containsKey(e,r)))}}class y3 extends aB{constructor(e){super(),this.currentSequenceNumber=e}}class X0{constructor(e){this.persistence=e,this.Fs=new Y0,this.$s=null}static Bs(e){return new X0(e)}get Ls(){if(this.$s)return this.$s;throw Me()}addReference(e,r,n){return this.Fs.addReference(n,r),this.Ls.delete(n.toString()),se.resolve()}removeReference(e,r,n){return this.Fs.removeReference(n,r),this.Ls.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,r){return this.Ls.add(r.toString()),se.resolve()}removeTarget(e,r){this.Fs.ls(r.targetId).forEach(i=>this.Ls.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}ks(){this.$s=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,n=>{const i=Ae.fromPath(n);return this.qs(e,i).next(a=>{a||r.removeEntry(i,Ve.min())})}).next(()=>(this.$s=null,r.apply(e)))}updateLimboDocument(e,r){return this.qs(e,r).next(n=>{n?this.Ls.delete(r.toString()):this.Ls.add(r.toString())})}xs(e){return 0}qs(e,r){return se.or([()=>se.resolve(this.Fs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ms(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Si=n,this.Di=i}static Ci(e,r){let n=Qe(),i=Qe();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Q0(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.xi=!1}initialize(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}getDocumentsMatchingQuery(e,r,n,i){return this.ki(e,r).next(a=>a||this.Oi(e,r,i,n)).next(a=>a||this.Mi(e,r))}ki(e,r){if(ux(r))return se.resolve(null);let n=On(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Km(r,null,"F"),n=On(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const s=Qe(...a);return this.Ni.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.Fi(r,o);return this.$i(r,c,s,l.readTime)?this.ki(e,Km(r,null,"F")):this.Bi(e,c,r,l)}))})))}Oi(e,r,n,i){return ux(r)||i.isEqual(Ve.min())?this.Mi(e,r):this.Ni.getDocuments(e,n).next(a=>{const s=this.Fi(r,a);return this.$i(r,s,n,i)?this.Mi(e,r):(ex()<=nt.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ym(r)),this.Bi(e,s,r,tB(i,-1)))})}Fi(e,r){let n=new Kt(Zk(e));return r.forEach((i,a)=>{G0(e,a)&&(n=n.add(a))}),n}$i(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,r){return ex()<=nt.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",Ym(r)),this.Ni.getDocumentsMatchingQuery(e,r,ba.min())}Bi(e,r,n,i){return this.Ni.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,r,n,i){this.persistence=e,this.Li=r,this.yt=i,this.qi=new Yt(ct),this.Ui=new ul(a=>V0(a),H0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(n)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u3(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.qi))}}function _3(t,e,r,n){return new w3(t,e,r,n)}async function xC(t,e){const r=qe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.Qi(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const s=[],o=[];let l=Qe();for(const c of i){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of a){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({ji:c,removedBatchIds:s,addedBatchIds:o}))})})}function x3(t,e){const r=qe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.Gi.newChangeBuffer({trackRemovals:!0});return function(s,o,l,c){const u=l.batch,d=u.keys();let h=se.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(o,p)).next(b=>{const w=l.docVersions.get(p);wt(w!==null),b.version.compareTo(w)<0&&(u.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),c.addEntry(b)))})}),h.next(()=>s.mutationQueue.removeMutationBatch(o,u))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(s){let o=Qe();for(let l=0;l<s.mutationResults.length;++l)s.mutationResults[l].transformResults.length>0&&(o=o.add(s.batch.mutations[l].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function TC(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Cs.getLastRemoteSnapshotVersion(r))}function T3(t,e){const r=qe(t),n=e.snapshotVersion;let i=r.qi;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=r.Gi.newChangeBuffer({trackRemovals:!0});i=r.qi;const o=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;o.push(r.Cs.removeMatchingKeys(a,u.removedDocuments,d).next(()=>r.Cs.addMatchingKeys(a,u.addedDocuments,d)));let p=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.has(d)?p=p.withResumeToken(Tr.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),i=i.insert(d,p),function(b,w,v){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,p,u)&&o.push(r.Cs.updateTargetData(a,p))});let l=Dn(),c=Qe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,u))}),o.push(S3(a,s,e.documentUpdates).next(u=>{l=u.Wi,c=u.zi})),!n.isEqual(Ve.min())){const u=r.Cs.getLastRemoteSnapshotVersion(a).next(d=>r.Cs.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(u)}return se.waitFor(o).next(()=>s.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(r.qi=i,a))}function S3(t,e,r){let n=Qe(),i=Qe();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let s=Dn();return r.forEach((o,l)=>{const c=a.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ve.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):Ce("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Wi:s,zi:i}})}function E3(t,e){const r=qe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function k3(t,e){const r=qe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Cs.getTargetData(n,e).next(a=>a?(i=a,se.resolve(i)):r.Cs.allocateTargetId(n).next(s=>(i=new us(e,s,0,n.currentSequenceNumber),r.Cs.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.qi.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.qi=r.qi.insert(n.targetId,n),r.Ui.set(e,n.targetId)),n})}async function Zm(t,e,r){const n=qe(t),i=n.qi.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!_u(s))throw s;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.qi=n.qi.remove(e),n.Ui.delete(i.target)}function bx(t,e,r){const n=qe(t);let i=Ve.min(),a=Qe();return n.persistence.runTransaction("Execute query","readonly",s=>function(o,l,c){const u=qe(o),d=u.Ui.get(c);return d!==void 0?se.resolve(u.qi.get(d)):u.Cs.getTargetData(l,c)}(n,s,On(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Cs.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>n.Li.getDocumentsMatchingQuery(s,e,r?i:Ve.min(),r?a:Qe())).next(o=>(C3(n,xB(e),o),{documents:o,Hi:a})))}function C3(t,e,r){let n=t.Ki.get(e)||Ve.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Ki.set(e,n)}class wx{constructor(){this.activeTargetIds=fC()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class A3{constructor(){this.Lr=new wx,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,r,n){this.qr[e]=r}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wx,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http";this.oo=r+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,r,n,i,a){const s=this.ho(e,r);Ce("RestConnection","Sending: ",s,n);const o={};return this.lo(o,i,a),this.fo(e,s,o,n).then(l=>(Ce("RestConnection","Received: ",l),l),l=>{throw Vm("RestConnection",`${e} failed with error: `,l,"url: ",s,"request:",n),l})}_o(e,r,n,i,a,s){return this.ao(e,r,n,i,a)}lo(e,r,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ll,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}ho(e,r){const n=P3[e];return`${this.oo}/v1/${r}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,r,n,i){return new Promise((a,s)=>{const o=new qF;o.setWithCredentials(!0),o.listenOnce($F.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case bg.NO_ERROR:const c=o.getResponseJson();Ce("Connection","XHR received:",JSON.stringify(c)),a(c);break;case bg.TIMEOUT:Ce("Connection",'RPC "'+e+'" timed out'),s(new Te(Z.DEADLINE_EXCEEDED,"Request time out"));break;case bg.HTTP_ERROR:const u=o.getStatus();if(Ce("Connection",'RPC "'+e+'" failed with status:',u,"response text:",o.getResponseText()),u>0){let d=o.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(w)>=0?w:Z.UNKNOWN}(h.status);s(new Te(p,h.message))}else s(new Te(Z.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Te(Z.UNAVAILABLE,"Connection failed."));break;default:Me()}}finally{Ce("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);o.send(r,"POST",l,n,15)})}wo(e,r,n){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=UF(),s=zF(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new HF({})),this.lo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const l=i.join("");Ce("Connection","Creating WebChannel: "+l,o);const c=a.createWebChannel(l,o);let u=!1,d=!1;const h=new O3({Hr:b=>{d?Ce("Connection","Not sending because WebChannel is closed:",b):(u||(Ce("Connection","Opening WebChannel transport."),c.open(),u=!0),Ce("Connection","WebChannel sending:",b),c.send(b))},Jr:()=>c.close()}),p=(b,w,v)=>{b.listen(w,T=>{try{v(T)}catch(E){setTimeout(()=>{throw E},0)}})};return p(c,Sd.EventType.OPEN,()=>{d||Ce("Connection","WebChannel transport opened.")}),p(c,Sd.EventType.CLOSE,()=>{d||(d=!0,Ce("Connection","WebChannel transport closed"),h.io())}),p(c,Sd.EventType.ERROR,b=>{d||(d=!0,Vm("Connection","WebChannel transport errored:",b),h.io(new Te(Z.UNAVAILABLE,"The operation could not be completed")))}),p(c,Sd.EventType.MESSAGE,b=>{var w;if(!d){const v=b.data[0];wt(!!v);const T=v,E=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(E){Ce("Connection","WebChannel received error:",E);const A=E.status;let k=function(F){const j=Bt[F];if(j!==void 0)return cC(j)}(A),I=E.message;k===void 0&&(k=Z.INTERNAL,I="Unknown error status: "+A+" with message "+E.message),d=!0,h.io(new Te(k,I)),c.close()}else Ce("Connection","WebChannel received:",v),h.ro(v)}}),p(s,VF.STAT_EVENT,b=>{b.stat===J_.PROXY?Ce("Connection","Detected buffering proxy"):b.stat===J_.NOPROXY&&Ce("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function _g(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){return new $B(t,!0)}class SC{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=r,this.mo=n,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const r=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),i=Math.max(0,r-n);i>0&&Ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,r,n,i,a,s,o,l){this.Hs=e,this.vo=n,this.Vo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new SC(e,r)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,r){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():r&&r.code===Z.RESOURCE_EXHAUSTED?(Pn(r.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):r&&r.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(r)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),r=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.So===r&&this.Go(n,i)},n=>{e(()=>{const i=new Te(Z.UNKNOWN,"Fetching auth token failed: "+n.message);return this.Qo(i)})})}Go(e,r){const n=this.Ko(this.So);this.stream=this.jo(e,r),this.stream.Yr(()=>{n(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{n(()=>this.Qo(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return r=>{this.Hs.enqueueAndForget(()=>this.So===e?r():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L3 extends EC{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.yt=a}jo(e,r){return this.connection.wo("Listen",e,r)}onMessage(e){this.xo.reset();const r=qB(this.yt,e),n=function(i){if(!("targetChange"in i))return Ve.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ve.min():a.readTime?Xi(a.readTime):Ve.min()}(e);return this.listener.Wo(r,n)}zo(e){const r={};r.database=Jm(this.yt),r.addTarget=function(i,a){let s;const o=a.target;return s=Gm(o)?{documents:KB(i,o)}:{query:YB(i,o)},s.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?s.resumeToken=mC(i,a.resumeToken):a.snapshotVersion.compareTo(Ve.min())>0&&(s.readTime=Fh(i,a.snapshotVersion.toTimestamp())),s}(this.yt,e);const n=QB(this.yt,e);n&&(r.labels=n),this.Bo(r)}Ho(e){const r={};r.database=Jm(this.yt),r.removeTarget=e,this.Bo(r)}}class R3 extends EC{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,r){return this.connection.wo("Write",e,r)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const r=WB(e.writeResults,e.commitTime),n=Xi(e.commitTime);return this.listener.Zo(n,r)}return wt(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Jm(this.yt),this.Bo(e)}Xo(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>GB(this.yt,n))};this.Bo(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3 extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Te(Z.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,r,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,r,n,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Te(Z.UNKNOWN,i.toString())})}_o(e,r,n,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection._o(e,r,n,a,s,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(Z.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class N3{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Pn(r),this.ou=!1):Ce("OnlineStateTracker",r)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(s=>{n.enqueueAndForget(async()=>{Ds(this)&&(Ce("RemoteStore","Restarting streams for network reachability change."),await async function(o){const l=qe(o);l._u.add(4),await Eu(l),l.gu.set("Unknown"),l._u.delete(4),await op(l)}(this))})}),this.gu=new N3(n,i)}}async function op(t){if(Ds(t))for(const e of t.wu)await e(!0)}async function Eu(t){for(const e of t.wu)await e(!1)}function kC(t,e){const r=qe(t);r.du.has(e.targetId)||(r.du.set(e.targetId,e),ey(r)?Z0(r):dl(r).ko()&&J0(r,e))}function CC(t,e){const r=qe(t),n=dl(r);r.du.delete(e),n.ko()&&AC(r,e),r.du.size===0&&(n.ko()?n.Fo():Ds(r)&&r.gu.set("Unknown"))}function J0(t,e){t.yu.Ot(e.targetId),dl(t).zo(e)}function AC(t,e){t.yu.Ot(e),dl(t).Ho(e)}function Z0(t){t.yu=new FB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),dl(t).start(),t.gu.uu()}function ey(t){return Ds(t)&&!dl(t).No()&&t.du.size>0}function Ds(t){return qe(t)._u.size===0}function IC(t){t.yu=void 0}async function F3(t){t.du.forEach((e,r)=>{J0(t,e)})}async function B3(t,e){IC(t),ey(t)?(t.gu.hu(e),Z0(t)):t.gu.set("Unknown")}async function U3(t,e,r){if(t.gu.set("Online"),e instanceof gC&&e.state===2&&e.cause)try{await async function(n,i){const a=i.cause;for(const s of i.targetIds)n.du.has(s)&&(await n.remoteSyncer.rejectListen(s,a),n.du.delete(s),n.yu.removeTarget(s))}(t,e)}catch(n){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Bh(t,n)}else if(e instanceof eh?t.yu.Kt(e):e instanceof pC?t.yu.Jt(e):t.yu.jt(e),!r.isEqual(Ve.min()))try{const n=await TC(t.localStore);r.compareTo(n)>=0&&await function(i,a){const s=i.yu.Zt(a);return s.targetChanges.forEach((o,l)=>{if(o.resumeToken.approximateByteSize()>0){const c=i.du.get(l);c&&i.du.set(l,c.withResumeToken(o.resumeToken,a))}}),s.targetMismatches.forEach(o=>{const l=i.du.get(o);if(!l)return;i.du.set(o,l.withResumeToken(Tr.EMPTY_BYTE_STRING,l.snapshotVersion)),AC(i,o);const c=new us(l.target,o,1,l.sequenceNumber);J0(i,c)}),i.remoteSyncer.applyRemoteEvent(s)}(t,r)}catch(n){Ce("RemoteStore","Failed to raise snapshot:",n),await Bh(t,n)}}async function Bh(t,e,r){if(!_u(e))throw e;t._u.add(1),await Eu(t),t.gu.set("Offline"),r||(r=()=>TC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ce("RemoteStore","Retrying IndexedDB access"),await r(),t._u.delete(1),await op(t)})}function PC(t,e){return e().catch(r=>Bh(t,r,e))}async function lp(t){const e=qe(t),r=_a(e);let n=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;z3(e);)try{const i=await E3(e.localStore,n);if(i===null){e.fu.length===0&&r.Fo();break}n=i.batchId,$3(e,i)}catch(i){await Bh(e,i)}OC(e)&&DC(e)}function z3(t){return Ds(t)&&t.fu.length<10}function $3(t,e){t.fu.push(e);const r=_a(t);r.ko()&&r.Yo&&r.Xo(e.mutations)}function OC(t){return Ds(t)&&!_a(t).No()&&t.fu.length>0}function DC(t){_a(t).start()}async function V3(t){_a(t).eu()}async function H3(t){const e=_a(t);for(const r of t.fu)e.Xo(r.mutations)}async function q3(t,e,r){const n=t.fu.shift(),i=K0.from(n,e,r);await PC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await lp(t)}async function G3(t,e){e&&_a(t).Yo&&await async function(r,n){if(i=n.code,LB(i)&&i!==Z.ABORTED){const a=r.fu.shift();_a(r).Mo(),await PC(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,n)),await lp(r)}var i}(t,e),OC(t)&&DC(t)}async function xx(t,e){const r=qe(t);r.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const n=Ds(r);r._u.add(3),await Eu(r),n&&r.gu.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r._u.delete(3),await op(r)}async function W3(t,e){const r=qe(t);e?(r._u.delete(2),await op(r)):e||(r._u.add(2),await Eu(r),r.gu.set("Unknown"))}function dl(t){return t.pu||(t.pu=function(e,r,n){const i=qe(e);return i.su(),new L3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:F3.bind(null,t),Zr:B3.bind(null,t),Wo:U3.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),ey(t)?Z0(t):t.gu.set("Unknown")):(await t.pu.stop(),IC(t))})),t.pu}function _a(t){return t.Iu||(t.Iu=function(e,r,n){const i=qe(e);return i.su(),new R3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,n)}(t.datastore,t.asyncQueue,{Yr:V3.bind(null,t),Zr:G3.bind(null,t),tu:H3.bind(null,t),Zo:q3.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await lp(t)):(await t.Iu.stop(),t.fu.length>0&&(Ce("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,o=new ty(e,r,s,i,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ry(t,e){if(Pn("AsyncQueue",`${e}: ${t}`),_u(t))return new Te(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Ae.comparator(r.key,n.key):(r,n)=>Ae.comparator(r.key,n.key),this.keyedMap=Gl(),this.sortedSet=new Yt(this.comparator)}static emptySet(e){return new mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new mo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.Tu=new Yt(Ae.comparator)}track(e){const r=e.doc.key,n=this.Tu.get(r);n?e.type!==0&&n.type===3?this.Tu=this.Tu.insert(r,e):e.type===3&&n.type!==1?this.Tu=this.Tu.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Tu=this.Tu.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Tu=this.Tu.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Tu=this.Tu.remove(r):e.type===1&&n.type===2?this.Tu=this.Tu.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Tu=this.Tu.insert(r,{type:2,doc:e.doc}):Me():this.Tu=this.Tu.insert(r,e)}Eu(){const e=[];return this.Tu.inorderTraversal((r,n)=>{e.push(n)}),e}}class Do{constructor(e,r,n,i,a,s,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach(o=>{s.push({type:0,doc:o})}),new Do(e,r,mo.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this.Au=void 0,this.listeners=[]}}class Y3{constructor(){this.queries=new ul(e=>Jk(e),rp),this.onlineState="Unknown",this.Ru=new Set}}async function X3(t,e){const r=qe(t),n=e.query;let i=!1,a=r.queries.get(n);if(a||(i=!0,a=new K3),i)try{a.Au=await r.onListen(n)}catch(s){const o=ry(s,`Initialization of query '${Ym(e.query)}' failed`);return void e.onError(o)}r.queries.set(n,a),a.listeners.push(e),e.bu(r.onlineState),a.Au&&e.Pu(a.Au)&&iy(r)}async function Q3(t,e){const r=qe(t),n=e.query;let i=!1;const a=r.queries.get(n);if(a){const s=a.listeners.indexOf(e);s>=0&&(a.listeners.splice(s,1),i=a.listeners.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function J3(t,e){const r=qe(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const o of s.listeners)o.Pu(i)&&(n=!0);s.Au=i}}n&&iy(r)}function Z3(t,e,r){const n=qe(t),i=n.queries.get(e);if(i)for(const a of i.listeners)a.onError(r);n.queries.delete(e)}function iy(t){t.Ru.forEach(e=>{e.next()})}class e4{constructor(e,r,n){this.query=e,this.vu=r,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=n||{}}Pu(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Do(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),r=!0):this.Cu(e,this.onlineState)&&(this.xu(e),r=!0),this.Su=e,r}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let r=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),r=!0),r}Cu(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const r=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}xu(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.key=e}}class RC{constructor(e){this.key=e}}class t4{constructor(e,r){this.query=e,this.qu=r,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Qe(),this.mutatedKeys=Qe(),this.Gu=Zk(e),this.Qu=new mo(this.Gu)}get ju(){return this.qu}Wu(e,r){const n=r?r.zu:new Tx,i=r?r.Qu:this.Qu;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),p=G0(this.query,d)?d:null,b=!!h&&this.mutatedKeys.has(h.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;h&&p?h.data.isEqual(p.data)?b!==w&&(n.track({type:3,doc:p}),v=!0):this.Hu(h,p)||(n.track({type:2,doc:p}),v=!0,(l&&this.Gu(p,l)>0||c&&this.Gu(p,c)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),v=!0):h&&!p&&(n.track({type:1,doc:h}),v=!0,(l||c)&&(o=!0)),v&&(p?(s=s.add(p),a=w?a.add(u):a.delete(u)):(s=s.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),a=a.delete(u.key),n.track({type:1,doc:u})}return{Qu:s,zu:n,$i:o,mutatedKeys:a}}Hu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((c,u)=>function(d,h){const p=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me()}};return p(d)-p(h)}(c.type,u.type)||this.Gu(c.doc,u.doc)),this.Ju(n);const s=r?this.Yu():[],o=this.Ku.size===0&&this.current?1:0,l=o!==this.Uu;return this.Uu=o,a.length!==0||l?{snapshot:new Do(this.query,e.Qu,i,a,e.mutatedKeys,o===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:s}:{Xu:s}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Tx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(r=>this.qu=this.qu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.qu=this.qu.delete(r)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qe(),this.Qu.forEach(n=>{this.Zu(n.key)&&(this.Ku=this.Ku.add(n.key))});const r=[];return e.forEach(n=>{this.Ku.has(n)||r.push(new RC(n))}),this.Ku.forEach(n=>{e.has(n)||r.push(new LC(n))}),r}tc(e){this.qu=e.Hi,this.Ku=Qe();const r=this.Wu(e.documents);return this.applyChanges(r,!0)}ec(){return Do.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class r4{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class i4{constructor(e){this.key=e,this.nc=!1}}class n4{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.sc={},this.ic=new ul(o=>Jk(o),rp),this.rc=new Map,this.oc=new Set,this.uc=new Yt(Ae.comparator),this.cc=new Map,this.ac=new Y0,this.hc={},this.lc=new Map,this.fc=Oo.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function a4(t,e){const r=g4(t);let n,i;const a=r.ic.get(e);if(a)n=a.targetId,r.sharedClientState.addLocalQueryTarget(n),i=a.view.ec();else{const s=await k3(r.localStore,On(e));r.isPrimaryClient&&kC(r.remoteStore,s);const o=r.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,i=await s4(r,e,n,o==="current",s.resumeToken)}return i}async function s4(t,e,r,n,i){t._c=(d,h,p)=>async function(b,w,v,T){let E=w.view.Wu(v);E.$i&&(E=await bx(b.localStore,w.query,!1).then(({documents:I})=>w.view.Wu(I,E)));const A=T&&T.targetChanges.get(w.targetId),k=w.view.applyChanges(E,b.isPrimaryClient,A);return Ex(b,w.targetId,k.Xu),k.snapshot}(t,d,h,p);const a=await bx(t.localStore,e,!0),s=new t4(e,a.Hi),o=s.Wu(a.documents),l=Su.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),c=s.applyChanges(o,t.isPrimaryClient,l);Ex(t,r,c.Xu);const u=new r4(e,r,s);return t.ic.set(e,u),t.rc.has(r)?t.rc.get(r).push(e):t.rc.set(r,[e]),c.snapshot}async function o4(t,e){const r=qe(t),n=r.ic.get(e),i=r.rc.get(n.targetId);if(i.length>1)return r.rc.set(n.targetId,i.filter(a=>!rp(a,e))),void r.ic.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await Zm(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),CC(r.remoteStore,n.targetId),ev(r,n.targetId)}).catch(wu)):(ev(r,n.targetId),await Zm(r.localStore,n.targetId,!0))}async function l4(t,e,r){const n=m4(t);try{const i=await function(a,s){const o=qe(a),l=Wt.now(),c=s.reduce((h,p)=>h.add(p.key),Qe());let u,d;return o.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Dn(),b=Qe();return o.Gi.getEntries(h,c).next(w=>{p=w,p.forEach((v,T)=>{T.isValidDocument()||(b=b.add(v))})}).next(()=>o.localDocuments.getOverlayedDocuments(h,p)).next(w=>{u=w;const v=[];for(const T of s){const E=PB(T,u.get(T.key).overlayedDocument);E!=null&&v.push(new Os(T.key,E,Kk(E.value.mapValue),Tn.exists(!0)))}return o.mutationQueue.addMutationBatch(h,l,v,s)}).next(w=>{d=w;const v=w.applyToLocalDocumentSet(u,b);return o.documentOverlayCache.saveOverlays(h,w.batchId,v)})}).then(()=>({batchId:d.batchId,changes:dC(u)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,s,o){let l=a.hc[a.currentUser.toKey()];l||(l=new Yt(ct)),l=l.insert(s,o),a.hc[a.currentUser.toKey()]=l}(n,i.batchId,r),await ku(n,i.changes),await lp(n.remoteStore)}catch(i){const a=ry(i,"Failed to persist write");r.reject(a)}}async function MC(t,e){const r=qe(t);try{const n=await T3(r.localStore,e);e.targetChanges.forEach((i,a)=>{const s=r.cc.get(a);s&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.nc=!0:i.modifiedDocuments.size>0?wt(s.nc):i.removedDocuments.size>0&&(wt(s.nc),s.nc=!1))}),await ku(r,n,e)}catch(n){await wu(n)}}function Sx(t,e,r){const n=qe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ic.forEach((a,s)=>{const o=s.view.bu(e);o.snapshot&&i.push(o.snapshot)}),function(a,s){const o=qe(a);o.onlineState=s;let l=!1;o.queries.forEach((c,u)=>{for(const d of u.listeners)d.bu(s)&&(l=!0)}),l&&iy(o)}(n.eventManager,e),i.length&&n.sc.Wo(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function c4(t,e,r){const n=qe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.cc.get(e),a=i&&i.key;if(a){let s=new Yt(Ae.comparator);s=s.insert(a,mr.newNoDocument(a,Ve.min()));const o=Qe().add(a),l=new ap(Ve.min(),new Map,new Kt(ct),s,o);await MC(n,l),n.uc=n.uc.remove(a),n.cc.delete(e),ny(n)}else await Zm(n.localStore,e,!1).then(()=>ev(n,e,r)).catch(wu)}async function u4(t,e){const r=qe(t),n=e.batch.batchId;try{const i=await x3(r.localStore,e);jC(r,n,null),NC(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ku(r,i)}catch(i){await wu(i)}}async function d4(t,e,r){const n=qe(t);try{const i=await function(a,s){const o=qe(a);return o.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return o.mutationQueue.lookupMutationBatch(l,s).next(u=>(wt(u!==null),c=u.keys(),o.mutationQueue.removeMutationBatch(l,u))).next(()=>o.mutationQueue.performConsistencyCheck(l)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(l,c,s)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>o.localDocuments.getDocuments(l,c))})}(n.localStore,e);jC(n,e,r),NC(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ku(n,i)}catch(i){await wu(i)}}function NC(t,e){(t.lc.get(e)||[]).forEach(r=>{r.resolve()}),t.lc.delete(e)}function jC(t,e,r){const n=qe(t);let i=n.hc[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.hc[n.currentUser.toKey()]=i}}function ev(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.rc.get(e))t.ic.delete(n),r&&t.sc.wc(n,r);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(n=>{t.ac.containsKey(n)||FC(t,n)})}function FC(t,e){t.oc.delete(e.path.canonicalString());const r=t.uc.get(e);r!==null&&(CC(t.remoteStore,r),t.uc=t.uc.remove(e),t.cc.delete(r),ny(t))}function Ex(t,e,r){for(const n of r)n instanceof LC?(t.ac.addReference(n.key,e),h4(t,n)):n instanceof RC?(Ce("SyncEngine","Document no longer in limbo: "+n.key),t.ac.removeReference(n.key,e),t.ac.containsKey(n.key)||FC(t,n.key)):Me()}function h4(t,e){const r=e.key,n=r.path.canonicalString();t.uc.get(r)||t.oc.has(n)||(Ce("SyncEngine","New document in limbo: "+r),t.oc.add(n),ny(t))}function ny(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const r=new Ae(Tt.fromString(e)),n=t.fc.next();t.cc.set(n,new i4(r)),t.uc=t.uc.insert(r,n),kC(t.remoteStore,new us(On(Yk(r.path)),n,2,z0.at))}}async function ku(t,e,r){const n=qe(t),i=[],a=[],s=[];n.ic.isEmpty()||(n.ic.forEach((o,l)=>{s.push(n._c(l,e,r).then(c=>{if((c||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=Q0.Ci(l.targetId,c);a.push(u)}}))}),await Promise.all(s),n.sc.Wo(i),await async function(o,l){const c=qe(o);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>se.forEach(l,d=>se.forEach(d.Si,h=>c.persistence.referenceDelegate.addReference(u,d.targetId,h)).next(()=>se.forEach(d.Di,h=>c.persistence.referenceDelegate.removeReference(u,d.targetId,h)))))}catch(u){if(!_u(u))throw u;Ce("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const d=u.targetId;if(!u.fromCache){const h=c.qi.get(d),p=h.snapshotVersion,b=h.withLastLimboFreeSnapshotVersion(p);c.qi=c.qi.insert(d,b)}}}(n.localStore,a))}async function f4(t,e){const r=qe(t);if(!r.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const n=await xC(r.localStore,e);r.currentUser=e,function(i,a){i.lc.forEach(s=>{s.forEach(o=>{o.reject(new Te(Z.CANCELLED,a))})}),i.lc.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ku(r,n.ji)}}function p4(t,e){const r=qe(t),n=r.cc.get(e);if(n&&n.nc)return Qe().add(n.key);{let i=Qe();const a=r.rc.get(e);if(!a)return i;for(const s of a){const o=r.ic.get(s);i=i.unionWith(o.view.ju)}return i}}function g4(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c4.bind(null,e),e.sc.Wo=J3.bind(null,e.eventManager),e.sc.wc=Z3.bind(null,e.eventManager),e}function m4(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d4.bind(null,e),e}class v4{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=sp(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,r){return null}Ec(e,r){return null}Ic(e){return _3(this.persistence,new b3,e.initialUser,this.yt)}yc(e){return new v3(X0.Bs,this.yt)}gc(e){return new A3}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class y4{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Sx(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=f4.bind(null,this.syncEngine),await W3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Y3}createDatastore(e){const r=sp(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new D3(i));var i;return function(a,s,o,l){return new M3(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return r=this.localStore,n=this.datastore,i=e.asyncQueue,a=o=>Sx(this.syncEngine,o,0),s=_x.C()?new _x:new I3,new j3(r,n,i,a,s);var r,n,i,a,s}createSyncEngine(e,r){return function(n,i,a,s,o,l,c){const u=new n4(n,i,a,s,o,l);return c&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return async function(e){const r=qe(e);Ce("RemoteStore","RemoteStore shutting down."),r._u.add(5),await Eu(r),r.mu.shutdown(),r.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t,e,r){if(!r)throw new Te(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function b4(t,e,r,n){if(e===!0&&n===!0)throw new Te(Z.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function kx(t){if(!Ae.isDocumentKey(t))throw new Te(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cx(t){if(Ae.isDocumentKey(t))throw new Te(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me()}function Uh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=cp(t);throw new Te(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Map;class Ix{constructor(e){var r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,b4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ix({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Te(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ix(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GF;switch(r.type){case"gapi":const n=r.client;return new XF(n,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Ax.get(e);r&&(Ce("ComponentProvider","Removing Datastore"),Ax.delete(e),r.terminate())}(this),Promise.resolve()}}function w4(t,e,r,n={}){var i;const a=(t=Uh(t,up))._getSettings();if(a.host!=="firestore.googleapis.com"&&a.host!==e&&Vm("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${r}`,ssl:!1})),n.mockUserToken){let s,o;if(typeof n.mockUserToken=="string")s=n.mockUserToken,o=pr.MOCK_USER;else{s=IE(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new Te(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new pr(l)}t._authCredentials=new WF(new jk(s,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pi(this.firestore,e,this._key)}}class hl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new hl(this.firestore,e,this._query)}}class pa extends hl{constructor(e,r,n){super(e,r,Yk(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pi(this.firestore,null,new Ae(e))}withConverter(e){return new pa(this.firestore,e,this._path)}}function _4(t,e,...r){if(t=hr(t),BC("collection","path",e),t instanceof up){const n=Tt.fromString(e,...r);return Cx(n),new pa(t,null,n)}{if(!(t instanceof pi||t instanceof pa))throw new Te(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Tt.fromString(e,...r));return Cx(n),new pa(t.firestore,null,n)}}function x4(t,e,...r){if(t=hr(t),arguments.length===1&&(e=Fk.R()),BC("doc","path",e),t instanceof up){const n=Tt.fromString(e,...r);return kx(n),new pi(t,null,new Ae(n))}{if(!(t instanceof pi||t instanceof pa))throw new Te(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Tt.fromString(e,...r));return kx(n),new pi(t.firestore,t instanceof pa?t.converter:null,new Ae(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=pr.UNAUTHENTICATED,this.clientId=Fk.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async a=>{Ce("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ce("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(Z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ry(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function E4(t,e){t.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const r=await t.getConfiguration();await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await xC(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function k4(t,e){t.asyncQueue.verifyOperationInProgress();const r=await C4(t);Ce("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(r,n),t.setCredentialChangeListener(i=>xx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>xx(e.remoteStore,a)),t.onlineComponents=e}async function C4(t){return t.offlineComponents||(Ce("FirestoreClient","Using default OfflineComponentProvider"),await E4(t,new v4)),t.offlineComponents}async function UC(t){return t.onlineComponents||(Ce("FirestoreClient","Using default OnlineComponentProvider"),await k4(t,new y4)),t.onlineComponents}function A4(t){return UC(t).then(e=>e.syncEngine)}async function I4(t){const e=await UC(t),r=e.eventManager;return r.onListen=a4.bind(null,e.syncEngine),r.onUnlisten=o4.bind(null,e.syncEngine),r}function P4(t,e,r={}){const n=new fa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,s,o,l){const c=new T4({next:d=>{a.enqueueAndForget(()=>Q3(i,u)),d.fromCache&&o.source==="server"?l.reject(new Te(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new e4(s,c,{includeMetadataChanges:!0,Nu:!0});return X3(i,u)}(await I4(t),t.asyncQueue,e,r,n)),n.promise}class O4{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new SC(this,"async_queue_retry"),this.Wc=()=>{const r=_g();r&&Ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.xo.Po()};const e=_g();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const r=_g();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const r=new fa;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!_u(e))throw e;Ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const r=this.Bc.then(()=>(this.Gc=!0,e().catch(n=>{this.Kc=n,this.Gc=!1;const i=function(a){let s=a.message||"";return a.stack&&(s=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),s}(n);throw Pn("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Gc=!1,n))));return this.Bc=r,r}enqueueAfterDelay(e,r,n){this.zc(),this.jc.indexOf(e)>-1&&(r=0);const i=ty.createAndSchedule(this,e,r,n,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&Me()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const r of this.Uc)if(r.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Uc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const r=this.Uc.indexOf(e);this.Uc.splice(r,1)}}class ay extends up{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new O4,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$C(this),this._firestoreClient.terminate()}}function D4(t,e){const r=typeof t=="object"?t:y0(),n=typeof t=="string"?t:e||"(default)",i=Bf(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=CE("firestore");a&&w4(i,...a)}return i}function zC(t){return t._firestoreClient||$C(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $C(t){var e;const r=t._freezeSettings(),n=function(i,a,s,o){return new sB(i,a,s,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new S4(t._authCredentials,t._appCheckCredentials,t._queue,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(Tr.fromBase64String(e))}catch(r){throw new Te(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Lo(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Te(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Te(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Te(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=/^__.*__$/;class R4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,r,this.fieldTransforms):new Tu(e,this.data,r,this.fieldTransforms)}}function HC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me()}}class ly{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.yt=n,this.ignoreUndefinedProperties=i,a===void 0&&this.na(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ly(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.ia({path:n,oa:!1});return i.ua(e),i}ca(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.ia({path:n,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return zh(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(HC(this.sa)&&L4.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class M4{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.yt=n||sp(e)}da(e,r,n,i=!1){return new ly({sa:e,methodName:r,fa:n,path:vr.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function qC(t){const e=t._freezeSettings(),r=sp(t._databaseId);return new M4(t._databaseId,!!e.ignoreUndefinedProperties,r)}function N4(t,e,r,n,i,a={}){const s=t.da(a.merge||a.mergeFields?2:0,e,r,i);KC("Data must be an object, but it was:",s,n);const o=GC(n,s);let l,c;if(a.merge)l=new Yi(s.fieldMask),c=s.fieldTransforms;else if(a.mergeFields){const u=[];for(const d of a.mergeFields){const h=F4(e,d,r);if(!s.contains(h))throw new Te(Z.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);U4(u,h)||u.push(h)}l=new Yi(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new R4(new ui(o),l,c)}function j4(t,e,r,n=!1){return cy(r,t.da(n?4:3,e))}function cy(t,e){if(WC(t=hr(t)))return KC("Unsupported field value:",e,t),GC(t,e);if(t instanceof VC)return function(r,n){if(!HC(n.sa))throw n.ha(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.ha(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(r,n){const i=[];let a=0;for(const s of r){let o=cy(s,n.aa(a));o==null&&(o={nullValue:"NULL_VALUE"}),i.push(o),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,n){if((r=hr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SB(n.yt,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Wt.fromDate(r);return{timestampValue:Fh(n.yt,i)}}if(r instanceof Wt){const i=new Wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fh(n.yt,i)}}if(r instanceof oy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lo)return{bytesValue:mC(n.yt,r._byteString)};if(r instanceof pi){const i=n.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw n.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:W0(r.firestore._databaseId||n.databaseId,r._key.path)}}throw n.ha(`Unsupported field value: ${cp(r)}`)}(t,e)}function GC(t,e){const r={};return Bk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cl(t,(n,i)=>{const a=cy(i,e.ra(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function WC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Wt||t instanceof oy||t instanceof Lo||t instanceof pi||t instanceof VC)}function KC(t,e,r){if(!WC(r)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(r)){const n=cp(r);throw n==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+n)}}function F4(t,e,r){if((e=hr(e))instanceof sy)return e._internalPath;if(typeof e=="string")return YC(t,e);throw zh("Field path arguments must be of type string or ",t,!1,void 0,r)}const B4=new RegExp("[~\\*/\\[\\]]");function YC(t,e,r){if(e.search(B4)>=0)throw zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new sy(...e.split("."))._internalPath}catch{throw zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function zh(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new Te(Z.INVALID_ARGUMENT,o+t+l)}function U4(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(uy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class z4 extends XC{data(){return super.data()}}function uy(t,e){return typeof e=="string"?YC(t,e):e instanceof sy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class V4 extends dy{}function DJ(t,e,...r){let n=[];e instanceof dy&&n.push(e),n=n.concat(r),function(i){const a=i.filter(o=>o instanceof hy).length,s=i.filter(o=>o instanceof dp).length;if(a>1||a>0&&s>0)throw new Te(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class dp extends V4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new dp(e,r,n)}_apply(e){const r=this._parse(e);return QC(e._query,r),new hl(e.firestore,e.converter,Wm(e._query,r))}_parse(e){const r=qC(e.firestore);return function(i,a,s,o,l,c,u){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Te(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Ox(u,c);const h=[];for(const p of u)h.push(Px(o,i,p));d={arrayValue:{values:h}}}else d=Px(o,i,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Ox(u,c),d=j4(s,a,u,c==="in"||c==="not-in");return zt.create(l,c,d)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function LJ(t,e,r){const n=e,i=uy("where",t);return dp._create(i,n,r)}class hy extends dy{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new hy(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Oi.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(n,i){let a=n;const s=i.getFlattenedFilters();for(const o of s)QC(a,o),a=Wm(a,o)}(e._query,r),new hl(e.firestore,e.converter,Wm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Px(t,e,r){if(typeof(r=hr(r))=="string"){if(r==="")throw new Te(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qk(e)&&r.indexOf("/")!==-1)throw new Te(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Tt.fromString(r));if(!Ae.isDocumentKey(n))throw new Te(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ix(t,new Ae(n))}if(r instanceof pi)return ix(t,r._key);throw new Te(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(r)}.`)}function Ox(t,e){if(!Array.isArray(t)||t.length===0)throw new Te(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Te(Z.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function QC(t,e){if(e.isInequality()){const n=q0(t),i=e.field;if(n!==null&&!n.isEqual(i))throw new Te(Z.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const a=Xk(t);a!==null&&H4(t,i,a)}const r=function(n,i){for(const a of n)for(const s of a.getFlattenedFilters())if(i.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Te(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function H4(t,e,r){if(!r.isEqual(e))throw new Te(Z.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class q4{convertValue(e,r="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Me()}}convertObject(e,r){const n={};return cl(e.fields,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertGeoPoint(e){return new oy(Ut(e.latitude),Ut(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=zk(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const r=wa(e);return new Wt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Tt.fromString(e);wt(_C(n));const i=new Bc(n.get(1),n.get(3)),a=new Ae(n.popFirst(5));return i.isEqual(r)||Pn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class W4 extends XC{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(uy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class th extends W4{data(e={}){return super.data(e)}}class K4{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Cd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new th(this._firestore,this._userDataWriter,n.key,n,new Cd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Te(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let a=0;return n._snapshot.docChanges.map(s=>{const o=new th(n._firestore,n._userDataWriter,s.doc.key,s.doc,new Cd(n._snapshot.mutatedKeys.has(s.doc.key),n._snapshot.fromCache),n.query.converter);return s.doc,{type:"added",doc:o,oldIndex:-1,newIndex:a++}})}{let a=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(s=>i||s.type!==3).map(s=>{const o=new th(n._firestore,n._userDataWriter,s.doc.key,s.doc,new Cd(n._snapshot.mutatedKeys.has(s.doc.key),n._snapshot.fromCache),n.query.converter);let l=-1,c=-1;return s.type!==0&&(l=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),c=a.indexOf(s.doc.key)),{type:Y4(s.type),doc:o,oldIndex:l,newIndex:c}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Y4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me()}}class X4 extends q4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new pi(this.firestore,null,r)}}function Q4(t){t=Uh(t,hl);const e=Uh(t.firestore,ay),r=zC(e),n=new X4(e);return $4(t._query),P4(r,t._query).then(i=>new K4(e,n,t,i))}function RJ(t,e){const r=Uh(t.firestore,ay),n=x4(t),i=G4(t.converter,e);return J4(r,[N4(qC(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Tn.exists(!1))]).then(()=>n)}function J4(t,e){return function(r,n){const i=new fa;return r.asyncQueue.enqueueAndForget(async()=>l4(await A4(r),n,i)),i.promise}(zC(t),e)}(function(t,e=!0){(function(r){ll=r})(al),bs(new ya("firestore",(r,{instanceIdentifier:n,options:i})=>{const a=r.getProvider("app").getImmediate(),s=new ay(new KF(r.getProvider("auth-internal")),new JF(r.getProvider("app-check-internal")),function(o,l){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Te(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(o.options.projectId,l)}(a,n),a);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),Ki(Z_,"3.8.0",t),Ki(Z_,"3.8.0","esm2017")})();function fy(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function JC(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z4=JC,ZC=new cu("auth","Firebase",JC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new m0("@firebase/auth");function rh(t,...e){Dx.logLevel<=nt.ERROR&&Dx.error(`Auth (${al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,...e){throw py(t,...e)}function Qi(t,...e){return py(t,...e)}function eA(t,e,r){const n=Object.assign(Object.assign({},Z4()),{[e]:r});return new cu("auth","Firebase",n).create(e,{appName:t.name})}function eU(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&sn(t,"argument-error"),eA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function py(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return ZC.create(t,...e)}function je(t,e,...r){if(!t)throw py(e,...r)}function wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rh(e),new Error(e)}function Ln(t,e){t||wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=new Map;function _n(t){Ln(t instanceof Function,"Expected a class definition");let e=Lx.get(t);return e?(Ln(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lx.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t,e){const r=Bf(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(Sh(a,e!=null?e:{}))return i;sn(i,"already-initialized")}return r.initialize({options:e})}function rU(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(_n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iU(){return Rx()==="http:"||Rx()==="https:"}function Rx(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iU()||bj()||"connection"in navigator)?navigator.onLine:!0}function aU(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ln(r>e,"Short delay should be less than long delay!"),this.isMobile=vj()||wj()}get(){return nU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t,e){Ln(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=new Cu(3e4,6e4);function lU(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hp(t,e,r,n,i={}){return rA(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const o=uu(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),tA.fetch()(iA(t,t.config.apiHost,r,o),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},a))})}async function rA(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},sU),e);try{const i=new uU(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Ad(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ad(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Ad(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Ad(t,"user-disabled",s);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eA(t,u,c);sn(t,u)}}catch(i){if(i instanceof cn)throw i;sn(t,"network-request-failed")}}async function cU(t,e,r,n,i={}){const a=await hp(t,e,r,n,i);return"mfaPendingCredential"in a&&sn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function iA(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?gy(t.config,i):`${t.config.apiScheme}://${i}`}class uU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Qi(this.auth,"network-request-failed")),oU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ad(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Qi(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(t,e){return hp(t,"POST","/v1/accounts:delete",e)}async function hU(t,e){return hp(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fU(t,e=!1){const r=hr(t),n=await r.getIdToken(e),i=my(n);je(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:fc(xg(i.auth_time)),issuedAtTime:fc(xg(i.iat)),expirationTime:fc(xg(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function xg(t){return Number(t)*1e3}function my(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{const i=EE(r);return i?JSON.parse(i):(rh("Failed to decode base64 JWT payload"),null)}catch(i){return rh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pU(t){const e=my(t);return je(e,"internal-error"),je(typeof e.exp!="undefined","internal-error"),je(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof cn&&gU(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function gU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=fc(this.lastLoginAt),this.creationTime=fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Hc(t,hU(r,{idToken:n}));je(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?bU(a.providerUserInfo):[],o=yU(t.providerData,s),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new nA(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function vU(t){const e=hr(t);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yU(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function bU(t){return t.map(e=>{var{providerId:r}=e,n=fy(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e){const r=await rA(t,{},async()=>{const n=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=iA(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",tA.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken!="undefined","internal-error"),je(typeof e.refreshToken!="undefined","internal-error");const r="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):pU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}async getToken(e,r=!1){return je(!this.accessToken||this.refreshToken,e,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await wU(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new qc;return n&&(je(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(je(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(je(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qc,this.toJSON())}_performRefresh(){return wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,e){je(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class ds{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=fy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new nA(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Hc(this,this.stsTokenManager.getToken(this.auth,e));return je(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return fU(this,e)}reload(){return vU(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ds(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await $h(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Hc(this,dU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,s,o,l,c,u;const d=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(i=r.email)!==null&&i!==void 0?i:void 0,p=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,b=(s=r.photoURL)!==null&&s!==void 0?s:void 0,w=(o=r.tenantId)!==null&&o!==void 0?o:void 0,v=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=r.createdAt)!==null&&c!==void 0?c:void 0,E=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:A,emailVerified:k,isAnonymous:I,providerData:F,stsTokenManager:j}=r;je(A&&j,e,"internal-error");const D=qc.fromJSON(this.name,j);je(typeof A=="string",e,"internal-error"),Xn(d,e.name),Xn(h,e.name),je(typeof k=="boolean",e,"internal-error"),je(typeof I=="boolean",e,"internal-error"),Xn(p,e.name),Xn(b,e.name),Xn(w,e.name),Xn(v,e.name),Xn(T,e.name),Xn(E,e.name);const z=new ds({uid:A,auth:e,email:h,emailVerified:k,displayName:d,isAnonymous:I,photoURL:b,phoneNumber:p,tenantId:w,stsTokenManager:D,createdAt:T,lastLoginAt:E});return F&&Array.isArray(F)&&(z.providerData=F.map(M=>Object.assign({},M))),v&&(z._redirectEventId=v),z}static async _fromIdTokenResponse(e,r,n=!1){const i=new qc;i.updateFromServerResponse(r);const a=new ds({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await $h(a),a}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}aA.type="NONE";const Mx=aA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t,e,r){return`firebase:${t}:${e}:${r}`}class vo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=ih(this.userKey,i.apiKey,a),this.fullPersistenceKey=ih("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ds._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new vo(_n(Mx),e,n);const i=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=i[0]||_n(Mx);const s=ih(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(s);if(u){const d=ds._fromJSON(e,u);c!==a&&(o=d),a=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new vo(a,e,n):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(s)}catch{}})),new vo(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uA(e))return"Blackberry";if(dA(e))return"Webos";if(vy(e))return"Safari";if((e.includes("chrome/")||oA(e))&&!e.includes("edge/"))return"Chrome";if(cA(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function sA(t=xr()){return/firefox\//i.test(t)}function vy(t=xr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oA(t=xr()){return/crios\//i.test(t)}function lA(t=xr()){return/iemobile/i.test(t)}function cA(t=xr()){return/android/i.test(t)}function uA(t=xr()){return/blackberry/i.test(t)}function dA(t=xr()){return/webos/i.test(t)}function fp(t=xr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _U(t=xr()){var e;return fp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xU(){return _j()&&document.documentMode===10}function hA(t=xr()){return fp(t)||cA(t)||dA(t)||uA(t)||/windows phone/i.test(t)||lA(t)}function TU(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t,e=[]){let r;switch(t){case"Browser":r=Nx(xr());break;case"Worker":r=`${Nx(xr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${al}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,r,n){this.app=e,this.heartbeatServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jx(this),this.idTokenSubscription=new jx(this),this.beforeStateQueue=new SU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZC,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=_n(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var r;const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l==null?void 0:l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const r=e?hr(e):null;return r&&je(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&_n(e)||this._popupRedirectResolver;je(r,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[_n(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r),s=this._isInitialized?Promise.resolve():this._initializationPromise;return je(s,this,"internal-error"),s.then(()=>a(this.currentUser)),typeof r=="function"?e.addObserver(r,n,i):e.addObserver(r)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return n&&(r["X-Firebase-Client"]=n),r}}function pp(t){return hr(t)}class jx{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rj(r=>this.observer=r)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function kU(t,e,r){const n=pp(t);je(n._canInitEmulator,n,"emulator-config-failed"),je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(r!=null&&r.disableWarnings),a=pA(e),{host:s,port:o}=CU(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${a}//${s}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||AU()}function pA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CU(t){const e=pA(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:Fx(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:Fx(s)}}}function Fx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AU(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return wn("not implemented")}_getIdTokenResponse(e){return wn("not implemented")}_linkToIdToken(e,r){return wn("not implemented")}_getReauthenticationResolver(e){return wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t,e){return cU(t,"POST","/v1/accounts:signInWithIdp",lU(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU="http://localhost";class xs extends gA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):sn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=fy(r,["providerId","signInMethod"]);if(!n||!i)return null;const s=new xs(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return yo(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,yo(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,yo(e,r)}buildRequest(){const e={requestUri:IU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=uu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends yy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Au{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ra.credential(e.oauthAccessToken)}catch{return null}}}ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";ra.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return xs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ei.credential(r,n)}catch{return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com";Ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Au{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.GITHUB_SIGN_IN_METHOD="github.com";ia.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Au{constructor(){super("twitter.com")}static credential(e,r){return xs._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return na.credential(r,n)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await ds._fromIdTokenResponse(e,n,i),s=Bx(n);return new Ro({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=Bx(n);return new Ro({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function Bx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends cn{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Vh(e,r,n,i)}}function mA(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(t,a,e,n):a})}async function PU(t,e,r=!1){const n=await Hc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ro._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(t,e,r=!1){const{auth:n}=t,i="reauthenticate";try{const a=await Hc(t,mA(n,i,e,t),r);je(a.idToken,n,"internal-error");const s=my(a.idToken);je(s,n,"internal-error");const{sub:o}=s;return je(t.uid===o,n,"user-mismatch"),Ro._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&sn(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e,r=!1){const n="signIn",i=await mA(t,n,e),a=await Ro._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}function LU(t,e,r,n){return hr(t).onIdTokenChanged(e,r,n)}function RU(t,e,r){return hr(t).beforeAuthStateChanged(e,r)}function MU(t){return hr(t).signOut()}const Hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Hh,"1"),this.storage.removeItem(Hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(){const t=xr();return vy(t)||fp(t)}const jU=1e3,FU=10;class yA extends vA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=NU()&&TU(),this.fallbackToPolling=hA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const n=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(n);if(e.newValue!==s)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!r)return}const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);xU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,FU):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},jU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}yA.type="LOCAL";const BU=yA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends vA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}bA.type="SESSION";const wA=bA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(t){return Promise.all(t.map(async e=>{try{const r=await e;return{fulfilled:!0,value:r}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new gp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async c=>c(r.origin,a)),l=await UU(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((o,l)=>{const c=by("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(h.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(){return window}function $U(t){Ji().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(){return typeof Ji().WorkerGlobalScope!="undefined"&&typeof Ji().importScripts=="function"}async function VU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qU(){return _A()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firebaseLocalStorageDb",GU=1,qh="firebaseLocalStorage",TA="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function mp(t,e){return t.transaction([qh],e?"readwrite":"readonly").objectStore(qh)}function WU(){const t=indexedDB.deleteDatabase(xA);return new Iu(t).toPromise()}function rv(){const t=indexedDB.open(xA,GU);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(qh,{keyPath:TA})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(qh)?e(n):(n.close(),await WU(),e(await rv()))})})}async function Ux(t,e,r){const n=mp(t,!0).put({[TA]:e,value:r});return new Iu(n).toPromise()}async function KU(t,e){const r=mp(t,!1).get(e),n=await new Iu(r).toPromise();return n===void 0?null:n.value}function zx(t,e){const r=mp(t,!0).delete(e);return new Iu(r).toPromise()}const YU=800,XU=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rv(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>XU)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _A()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gp._getInstance(qU()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await VU(),!this.activeServiceWorker)return;this.sender=new zU(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);!n||((e=n[0])===null||e===void 0?void 0:e.fulfilled)&&((r=n[0])===null||r===void 0?void 0:r.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rv();return await Ux(e,Hh,"1"),await zx(e,Hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ux(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>KU(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>zx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=mp(i,!1).getAll();return new Iu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const QU=SA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function ZU(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Qi("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",JU().appendChild(n)})}function e6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new Cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e){return e?_n(e):(je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy extends gA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return yo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function t6(t){return DU(t.auth,new wy(t),t.bypassAuthState)}function r6(t){const{auth:e,user:r}=t;return je(r,e,"internal-error"),OU(r,new wy(t),t.bypassAuthState)}async function i6(t){const{auth:e,user:r}=t;return je(r,e,"internal-error"),PU(r,new wy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return t6;case"linkViaPopup":case"linkViaRedirect":return i6;case"reauthViaPopup":case"reauthViaRedirect":return r6;default:sn(this.auth,"internal-error")}}resolve(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=new Cu(2e3,1e4);async function a6(t,e,r){const n=pp(t);eU(t,e,yy);const i=EA(n,r);return new ns(n,"signInViaPopup",e,i).executeNotNull()}class ns extends kA{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){Ln(this.filter.length===1,"Popup operations only handle one event");const e=by();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,n6.get())};e()}}ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="pendingRedirect",nh=new Map;class o6 extends kA{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const n=await l6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function l6(t,e){const r=d6(e),n=u6(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function c6(t,e){nh.set(t._key(),e)}function u6(t){return _n(t._redirectPersistence)}function d6(t){return ih(s6,t.config.apiKey,t.name)}async function h6(t,e,r=!1){const n=pp(t),i=EA(n,e),s=await new o6(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=10*60*1e3;class p6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!CA(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Qi(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f6&&this.cachedEventUids.clear(),this.cachedEventUids.has($x(e))}saveEventToCache(e){this.cachedEventUids.add($x(e)),this.lastProcessedEventTime=Date.now()}}function $x(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function g6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m6(t,e={}){return hp(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y6=/^https?/;async function b6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await m6(t);for(const r of e)try{if(w6(r))return}catch{}sn(t,"unauthorized-domain")}function w6(t){const e=tv(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!y6.test(r))return!1;if(v6.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new Cu(3e4,6e4);function Vx(){const t=Ji().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function x6(t){return new Promise((e,r)=>{var n,i,a;function s(){Vx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vx(),r(Qi(t,"network-request-failed"))},timeout:_6.get()})}if(!((i=(n=Ji().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ji().gapi)===null||a===void 0)&&a.load)s();else{const o=e6("iframefcb");return Ji()[o]=()=>{gapi.load?s():r(Qi(t,"network-request-failed"))},ZU(`https://apis.google.com/js/api.js?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw ah=null,e})}let ah=null;function T6(t){return ah=ah||x6(t),ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=new Cu(5e3,15e3),E6="__/auth/iframe",k6="emulator/auth/iframe",C6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I6(t){const e=t.config;je(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?gy(e,k6):`https://${t.config.authDomain}/${E6}`,n={apiKey:e.apiKey,appName:t.name,v:al},i=A6.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${uu(n).slice(1)}`}async function P6(t){const e=await T6(t),r=Ji().gapi;return je(r,t,"internal-error"),e.open({where:document.body,url:I6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C6,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=Qi(t,"network-request-failed"),o=Ji().setTimeout(()=>{a(s)},S6.get());function l(){Ji().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D6=500,L6=600,R6="_blank",M6="http://localhost";class Hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N6(t,e,r,n=D6,i=L6){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},O6),{width:n.toString(),height:i.toString(),top:a,left:s}),c=xr().toLowerCase();r&&(o=oA(c)?R6:r),sA(c)&&(e=e||M6,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[p,b])=>`${h}${p}=${b},`,"");if(_U(c)&&o!=="_self")return j6(e||"",o),new Hx(null);const d=window.open(e||"",o,u);je(d,t,"popup-blocked");try{d.focus()}catch{}return new Hx(d)}function j6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="__/auth/handler",B6="emulator/auth/handler";function qx(t,e,r,n,i,a){je(t.config.authDomain,t,"auth-domain-config-required"),je(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:al,eventId:i};if(e instanceof yy){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Lj(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(a||{}))s[l]=c}if(e instanceof Au){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(s.scopes=l.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const l of Object.keys(o))o[l]===void 0&&delete o[l];return`${U6(t)}?${uu(o).slice(1)}`}function U6({config:t}){return t.emulator?gy(t,B6):`https://${t.authDomain}/${F6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="webStorageSupport";class z6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wA,this._completeRedirectFn=h6,this._overrideRedirectResult=c6}async _openPopup(e,r,n,i){var a;Ln((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=qx(e,r,n,tv(),i);return N6(e,s,by())}async _openRedirect(e,r,n,i){return await this._originValidation(e),$U(qx(e,r,n,tv(),i)),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(Ln(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await P6(e),n=new p6(e);return r.register("authEvent",i=>(je(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Tg,{type:Tg},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Tg];s!==void 0&&r(!!s),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=b6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return hA()||vy()||fp()}}const $6=z6;var Gx="@firebase/auth",Wx="0.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);!r||(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function q6(t){bs(new ya("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:a,authDomain:s}=n.options;return((o,l)=>{je(a&&!a.includes(":"),"invalid-api-key",{appName:o.name}),je(!(s!=null&&s.includes(":")),"argument-error",{appName:o.name});const c={apiKey:a,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fA(t)},u=new EU(o,l,c);return rU(u,r),u})(n,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),bs(new ya("auth-internal",e=>{const r=pp(e.getProvider("auth").getImmediate());return(n=>new V6(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(Gx,Wx,H6(t)),Ki(Gx,Wx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=5*60,W6=AE("authIdTokenMaxAge")||G6;let Kx=null;const K6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>W6)return;const i=r==null?void 0:r.token;Kx!==i&&(Kx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Y6(t=y0()){const e=Bf(t,"auth");if(e.isInitialized())return e.getImmediate();const r=tU(t,{popupRedirectResolver:$6,persistence:[QU,BU,wA]}),n=AE("authTokenSyncURL");if(n){const a=K6(n);RU(r,a,()=>a(r.currentUser)),LU(r,s=>a(s))}const i=kE("auth");return i&&kU(r,`http://${i}`),r}q6("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firebasestorage.googleapis.com",IA="storageBucket",X6=2*60*1e3,Q6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt extends cn{constructor(e,r,n=0){super(Sg(e),`Firebase Storage: ${r} (${Sg(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Sg(t){return"storage/"+t}function _y(){const t="An unknown error occurred, please check the error payload for server response.";return new Rt("unknown",t)}function J6(t){return new Rt("object-not-found","Object '"+t+"' does not exist.")}function Z6(t){return new Rt("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e8(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rt("unauthenticated",t)}function t8(){return new Rt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function r8(t){return new Rt("unauthorized","User does not have permission to access '"+t+"'.")}function i8(){return new Rt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function n8(){return new Rt("canceled","User canceled the upload/download.")}function a8(t){return new Rt("invalid-url","Invalid URL '"+t+"'.")}function s8(t){return new Rt("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function o8(){return new Rt("no-default-bucket","No default bucket found. Did you set the '"+IA+"' property when initializing the app?")}function l8(){return new Rt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function c8(){return new Rt("no-download-url","The given file does not have any download URLs.")}function u8(t){return new Rt("unsupported-environment",`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function iv(t){return new Rt("invalid-argument",t)}function PA(){return new Rt("app-deleted","The Firebase app was deleted.")}function d8(t){return new Rt("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pc(t,e){return new Rt("invalid-format","String does not match format '"+t+"': "+e)}function Dl(t){throw new Rt("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ii.makeFromUrl(e,r)}catch{return new ii(e,"")}if(n.path==="")return n;throw s8(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const u="v[A-Za-z0-9_]+",d=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),b={bucket:1,path:3},w=r===AA?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",T=new RegExp(`^https?://${w}/${i}/${v}`,"i"),A=[{regex:o,indices:l,postModify:a},{regex:p,indices:b,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<A.length;k++){const I=A[k],F=I.regex.exec(e);if(F){const j=F[I.indices.bucket];let D=F[I.indices.path];D||(D=""),n=new ii(j,D),I.postModify(n);break}}if(n==null)throw a8(e);return n}}class h8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(t,e,r){let n=1,i=null,a=null,s=!1,o=0;function l(){return o===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,t(p,l())},v)}function h(){a&&clearTimeout(a)}function p(v,...T){if(c){h();return}if(v){h(),u.call(null,v,...T);return}if(l()||s){h(),u.call(null,v,...T);return}n<64&&(n*=2);let A;o===1?(o=2,A=0):A=(n+Math.random())*1e3,d(A)}let b=!1;function w(v){b||(b=!0,h(),!c&&(i!==null?(v||(o=2),clearTimeout(i),d(0)):v||(o=1)))}return d(0),a=setTimeout(()=>{s=!0,w(!0)},r),w}function p8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){return t!==void 0}function m8(t){return typeof t=="object"&&!Array.isArray(t)}function xy(t){return typeof t=="string"||t instanceof String}function Yx(t){return Ty()&&t instanceof Blob}function Ty(){return typeof Blob!="undefined"&&!yj()}function Xx(t,e,r,n){if(n<e)throw iv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw iv(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function OA(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hs||(hs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,r,n,i,a,s,o,l,c,u,d,h=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,b)=>{this.resolve_=p,this.reject_=b,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Id(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const o=a.getErrorCode()===hs.NO_ERROR,l=a.getStatus();if((!o||v8(l,this.additionalRetryCodes_))&&this.retry){const u=a.getErrorCode()===hs.ABORT;n(!1,new Id(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new Id(c,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());g8(l)?a(l):a()}catch(l){s(l)}else if(o!==null){const l=_y();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(i.canceled){const l=this.appDelete_?PA():n8();s(l)}else{const l=i8();s(l)}};this.canceled_?r(!1,new Id(!1,null,!0)):this.backoffId_=f8(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&p8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Id{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function b8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function w8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function _8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function x8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function T8(t,e,r,n,i,a,s=!0){const o=OA(t.urlParams),l=t.url+o,c=Object.assign({},t.headers);return _8(c,e),b8(c,r),w8(c,a),x8(c,n),new y8(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function E8(...t){const e=S8();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(Ty())return new Blob(t);throw new Rt("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function k8(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(t){if(typeof atob=="undefined")throw u8("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Eg{constructor(e,r){this.data=e,this.contentType=r||null}}function A8(t,e){switch(t){case Vi.RAW:return new Eg(DA(e));case Vi.BASE64:case Vi.BASE64URL:return new Eg(LA(t,e));case Vi.DATA_URL:return new Eg(P8(e),O8(e))}throw _y()}function DA(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,s=t.charCodeAt(++r);n=65536|(a&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function I8(t){let e;try{e=decodeURIComponent(t)}catch{throw pc(Vi.DATA_URL,"Malformed data URL.")}return DA(e)}function LA(t,e){switch(t){case Vi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw pc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw pc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=C8(e)}catch(i){throw i.message.includes("polyfill")?i:pc(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class RA{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw pc(Vi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=D8(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function P8(t){const e=new RA(t);return e.base64?LA(Vi.BASE64,e.rest):I8(e.rest)}function O8(t){return new RA(t).contentType}function D8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,r){let n=0,i="";Yx(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(Yx(this.data_)){const n=this.data_,i=k8(n,e,r);return i===null?null:new aa(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new aa(n,!0)}}static getBlob(...e){if(Ty()){const r=e.map(n=>n instanceof aa?n.data_:n);return new aa(E8.apply(null,r))}else{const r=e.map(s=>xy(s)?A8(Vi.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(s=>{for(let o=0;o<s.length;o++)i[a++]=s[o]}),new aa(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){let e;try{e=JSON.parse(t)}catch{return null}return m8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function R8(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function NA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t,e){return e}class Ir{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||M8}}let Pd=null;function N8(t){return!xy(t)||t.length<2?t:NA(t)}function jA(){if(Pd)return Pd;const t=[];t.push(new Ir("bucket")),t.push(new Ir("generation")),t.push(new Ir("metageneration")),t.push(new Ir("name","fullPath",!0));function e(a,s){return N8(s)}const r=new Ir("name");r.xform=e,t.push(r);function n(a,s){return s!==void 0?Number(s):s}const i=new Ir("size");return i.xform=n,t.push(i),t.push(new Ir("timeCreated")),t.push(new Ir("updated")),t.push(new Ir("md5Hash",null,!0)),t.push(new Ir("cacheControl",null,!0)),t.push(new Ir("contentDisposition",null,!0)),t.push(new Ir("contentEncoding",null,!0)),t.push(new Ir("contentLanguage",null,!0)),t.push(new Ir("contentType",null,!0)),t.push(new Ir("metadata","customMetadata",!0)),Pd=t,Pd}function j8(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new ii(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function F8(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const s=r[a];n[s.local]=s.xform(n,e[s.server])}return j8(n,t),n}function FA(t,e,r){const n=MA(e);return n===null?null:F8(t,n,r)}function B8(t,e,r,n){const i=MA(e);if(i===null||!xy(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+s(u)+"/o/"+s(d),p=Sy(h,r,n),b=OA({alt:"media",token:c});return p+b})[0]}function U8(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class BA{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){if(!t)throw _y()}function z8(t,e){function r(n,i){const a=FA(t,i,e);return UA(a!==null),a}return r}function $8(t,e){function r(n,i){const a=FA(t,i,e);return UA(a!==null),B8(a,i,t.host,t._protocol)}return r}function zA(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=t8():i=e8():r.getStatus()===402?i=Z6(t.bucket):r.getStatus()===403?i=r8(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function V8(t){const e=zA(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=J6(t.path)),a.serverResponse=i.serverResponse,a}return r}function H8(t,e,r){const n=e.fullServerUrl(),i=Sy(n,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,o=new BA(i,a,$8(t,r),s);return o.errorHandler=V8(e),o}function q8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function G8(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=q8(null,e)),n}function W8(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function o(){let A="";for(let k=0;k<2;k++)A=A+Math.random().toString().slice(2);return A}const l=o();s["Content-Type"]="multipart/related; boundary="+l;const c=G8(e,n,i),u=U8(c,r),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=aa.getBlob(d,n,h);if(p===null)throw l8();const b={name:c.fullPath},w=Sy(a,t.host,t._protocol),v="POST",T=t.maxUploadRetryTime,E=new BA(w,v,z8(t,r),T);return E.urlParams=b,E.headers=s,E.body=p.uploadData(),E.errorHandler=zA(e),E}class K8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw Dl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Y8 extends K8{initXhr(){this.xhr_.responseType="text"}}function $A(){return new Y8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,r){this._service=e,r instanceof ii?this._location=r:this._location=ii.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Ts(e,r)}get root(){const e=new ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NA(this._location.path)}get storage(){return this._service}get parent(){const e=L8(this._location.path);if(e===null)return null;const r=new ii(this._location.bucket,e);return new Ts(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw d8(e)}}function X8(t,e,r){t._throwIfRoot("uploadBytes");const n=W8(t.storage,t._location,jA(),new aa(e,!0),r);return t.storage.makeRequestWithTokens(n,$A).then(i=>({metadata:i,ref:t}))}function Q8(t){t._throwIfRoot("getDownloadURL");const e=H8(t.storage,t._location,jA());return t.storage.makeRequestWithTokens(e,$A).then(r=>{if(r===null)throw c8();return r})}function J8(t,e){const r=R8(t._location.path,e),n=new ii(t._location.bucket,r);return new Ts(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(t){return/^[A-Za-z]+:\/\//.test(t)}function ez(t,e){return new Ts(t,e)}function VA(t,e){if(t instanceof Ey){const r=t;if(r._bucket==null)throw o8();const n=new Ts(r,r._bucket);return e!=null?VA(n,e):n}else return e!==void 0?J8(t,e):t}function tz(t,e){if(e&&Z8(e)){if(t instanceof Ey)return ez(t,e);throw iv("To use ref(service, url), the first argument must be a Storage instance.")}else return VA(t,e)}function Qx(t,e){const r=e==null?void 0:e[IA];return r==null?null:ii.makeFromBucketSpec(r,t)}function rz(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:IE(i,t.app.options.projectId))}class Ey{constructor(e,r,n,i,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=AA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X6,this._maxUploadRetryTime=Q6,this._requests=new Set,i!=null?this._bucket=ii.makeFromBucketSpec(i,this._host):this._bucket=Qx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ii.makeFromBucketSpec(this._url,e):this._bucket=Qx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ts(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new h8(PA());{const s=T8(e,this._appId,n,i,r,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const Jx="@firebase/storage",Zx="0.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="storage";function MJ(t,e,r){return t=hr(t),X8(t,e,r)}function NJ(t){return t=hr(t),Q8(t)}function jJ(t,e){return t=hr(t),tz(t,e)}function iz(t=y0(),e){t=hr(t);const n=Bf(t,HA).getImmediate({identifier:e}),i=CE("storage");return i&&nz(n,...i),n}function nz(t,e,r,n={}){rz(t,e,r,n)}function az(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ey(r,n,i,e,al)}function sz(){bs(new ya(HA,az,"PUBLIC").setMultipleInstances(!0)),Ki(Jx,Zx,""),Ki(Jx,Zx,"esm2017")}sz();/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var oz="store";function fl(t,e){Object.keys(t).forEach(function(r){return e(t[r],r)})}function lz(t){return t!==null&&typeof t=="object"}function cz(t){return t&&typeof t.then=="function"}function uz(t,e){return function(){return t(e)}}function qA(t,e,r){return e.indexOf(t)<0&&(r&&r.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function GA(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var r=t.state;vp(t,r,[],t._modules.root,!0),ky(t,r,e)}function ky(t,e,r){var n=t._state,i=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var a=t._wrappedGetters,s={},o={},l=vL(!0);l.run(function(){fl(a,function(c,u){s[u]=uz(c,t),o[u]=It(function(){return s[u]()}),Object.defineProperty(t.getters,u,{get:function(){return o[u].value},enumerable:!0})})}),t._state=rl({data:e}),t._scope=l,t.strict&&gz(t),n&&r&&t._withCommit(function(){n.data=null}),i&&i.stop()}function vp(t,e,r,n,i){var a=!r.length,s=t._modules.getNamespace(r);if(n.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=n),!a&&!i){var o=Cy(e,r.slice(0,-1)),l=r[r.length-1];t._withCommit(function(){o[l]=n.state})}var c=n.context=dz(t,s,r);n.forEachMutation(function(u,d){var h=s+d;hz(t,h,u,c)}),n.forEachAction(function(u,d){var h=u.root?d:s+d,p=u.handler||u;fz(t,h,p,c)}),n.forEachGetter(function(u,d){var h=s+d;pz(t,h,u,c)}),n.forEachChild(function(u,d){vp(t,e,r.concat(d),u,i)})}function dz(t,e,r){var n=e==="",i={dispatch:n?t.dispatch:function(a,s,o){var l=Gh(a,s,o),c=l.payload,u=l.options,d=l.type;return(!u||!u.root)&&(d=e+d),t.dispatch(d,c)},commit:n?t.commit:function(a,s,o){var l=Gh(a,s,o),c=l.payload,u=l.options,d=l.type;(!u||!u.root)&&(d=e+d),t.commit(d,c,u)}};return Object.defineProperties(i,{getters:{get:n?function(){return t.getters}:function(){return WA(t,e)}},state:{get:function(){return Cy(t.state,r)}}}),i}function WA(t,e){if(!t._makeLocalGettersCache[e]){var r={},n=e.length;Object.keys(t.getters).forEach(function(i){if(i.slice(0,n)===e){var a=i.slice(n);Object.defineProperty(r,a,{get:function(){return t.getters[i]},enumerable:!0})}}),t._makeLocalGettersCache[e]=r}return t._makeLocalGettersCache[e]}function hz(t,e,r,n){var i=t._mutations[e]||(t._mutations[e]=[]);i.push(function(s){r.call(t,n.state,s)})}function fz(t,e,r,n){var i=t._actions[e]||(t._actions[e]=[]);i.push(function(s){var o=r.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},s);return cz(o)||(o=Promise.resolve(o)),t._devtoolHook?o.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):o})}function pz(t,e,r,n){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(a){return r(n.state,n.getters,a.state,a.getters)})}function gz(t){os(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function Cy(t,e){return e.reduce(function(r,n){return r[n]},t)}function Gh(t,e,r){return lz(t)&&t.type&&(r=e,e=t,t=t.type),{type:t,payload:e,options:r}}var mz="vuex bindings",eT="vuex:mutations",kg="vuex:actions",$s="vuex",vz=0;function yz(t,e){BM({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[mz]},function(r){r.addTimelineLayer({id:eT,label:"Vuex Mutations",color:tT}),r.addTimelineLayer({id:kg,label:"Vuex Actions",color:tT}),r.addInspector({id:$s,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),r.on.getInspectorTree(function(n){if(n.app===t&&n.inspectorId===$s)if(n.filter){var i=[];QA(i,e._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[XA(e._modules.root,"")]}),r.on.getInspectorState(function(n){if(n.app===t&&n.inspectorId===$s){var i=n.nodeId;WA(e,i),n.state=_z(Tz(e._modules,i),i==="root"?e.getters:e._makeLocalGettersCache,i)}}),r.on.editInspectorState(function(n){if(n.app===t&&n.inspectorId===$s){var i=n.nodeId,a=n.path;i!=="root"&&(a=i.split("/").filter(Boolean).concat(a)),e._withCommit(function(){n.set(e._state.data,a,n.state.value)})}}),e.subscribe(function(n,i){var a={};n.payload&&(a.payload=n.payload),a.state=i,r.notifyComponentUpdate(),r.sendInspectorTree($s),r.sendInspectorState($s),r.addTimelineEvent({layerId:eT,event:{time:Date.now(),title:n.type,data:a}})}),e.subscribeAction({before:function(n,i){var a={};n.payload&&(a.payload=n.payload),n._id=vz++,n._time=Date.now(),a.state=i,r.addTimelineEvent({layerId:kg,event:{time:n._time,title:n.type,groupId:n._id,subtitle:"start",data:a}})},after:function(n,i){var a={},s=Date.now()-n._time;a.duration={_custom:{type:"duration",display:s+"ms",tooltip:"Action duration",value:s}},n.payload&&(a.payload=n.payload),a.state=i,r.addTimelineEvent({layerId:kg,event:{time:Date.now(),title:n.type,groupId:n._id,subtitle:"end",data:a}})}})})}var tT=8702998,bz=6710886,wz=16777215,KA={label:"namespaced",textColor:wz,backgroundColor:bz};function YA(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function XA(t,e){return{id:e||"root",label:YA(e),tags:t.namespaced?[KA]:[],children:Object.keys(t._children).map(function(r){return XA(t._children[r],e+r+"/")})}}function QA(t,e,r,n){n.includes(r)&&t.push({id:n||"root",label:n.endsWith("/")?n.slice(0,n.length-1):n||"Root",tags:e.namespaced?[KA]:[]}),Object.keys(e._children).forEach(function(i){QA(t,e._children[i],r,n+i+"/")})}function _z(t,e,r){e=r==="root"?e:e[r];var n=Object.keys(e),i={state:Object.keys(t.state).map(function(s){return{key:s,editable:!0,value:t.state[s]}})};if(n.length){var a=xz(e);i.getters=Object.keys(a).map(function(s){return{key:s.endsWith("/")?YA(s):s,editable:!1,value:nv(function(){return a[s]})}})}return i}function xz(t){var e={};return Object.keys(t).forEach(function(r){var n=r.split("/");if(n.length>1){var i=e,a=n.pop();n.forEach(function(s){i[s]||(i[s]={_custom:{value:{},display:s,tooltip:"Module",abstract:!0}}),i=i[s]._custom.value}),i[a]=nv(function(){return t[r]})}else e[r]=nv(function(){return t[r]})}),e}function Tz(t,e){var r=e.split("/").filter(function(n){return n});return r.reduce(function(n,i,a){var s=n[i];if(!s)throw new Error('Missing module "'+i+'" for path "'+e+'".');return a===r.length-1?s:s._children},e==="root"?t:t.root._children)}function nv(t){try{return t()}catch(e){return e}}var Li=function(e,r){this.runtime=r,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=(typeof n=="function"?n():n)||{}},JA={namespaced:{configurable:!0}};JA.namespaced.get=function(){return!!this._rawModule.namespaced};Li.prototype.addChild=function(e,r){this._children[e]=r};Li.prototype.removeChild=function(e){delete this._children[e]};Li.prototype.getChild=function(e){return this._children[e]};Li.prototype.hasChild=function(e){return e in this._children};Li.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Li.prototype.forEachChild=function(e){fl(this._children,e)};Li.prototype.forEachGetter=function(e){this._rawModule.getters&&fl(this._rawModule.getters,e)};Li.prototype.forEachAction=function(e){this._rawModule.actions&&fl(this._rawModule.actions,e)};Li.prototype.forEachMutation=function(e){this._rawModule.mutations&&fl(this._rawModule.mutations,e)};Object.defineProperties(Li.prototype,JA);var Ls=function(e){this.register([],e,!1)};Ls.prototype.get=function(e){return e.reduce(function(r,n){return r.getChild(n)},this.root)};Ls.prototype.getNamespace=function(e){var r=this.root;return e.reduce(function(n,i){return r=r.getChild(i),n+(r.namespaced?i+"/":"")},"")};Ls.prototype.update=function(e){ZA([],this.root,e)};Ls.prototype.register=function(e,r,n){var i=this;n===void 0&&(n=!0);var a=new Li(r,n);if(e.length===0)this.root=a;else{var s=this.get(e.slice(0,-1));s.addChild(e[e.length-1],a)}r.modules&&fl(r.modules,function(o,l){i.register(e.concat(l),o,n)})};Ls.prototype.unregister=function(e){var r=this.get(e.slice(0,-1)),n=e[e.length-1],i=r.getChild(n);!i||!i.runtime||r.removeChild(n)};Ls.prototype.isRegistered=function(e){var r=this.get(e.slice(0,-1)),n=e[e.length-1];return r?r.hasChild(n):!1};function ZA(t,e,r){if(e.update(r),r.modules)for(var n in r.modules){if(!e.getChild(n))return;ZA(t.concat(n),e.getChild(n),r.modules[n])}}function Sz(t){return new Wr(t)}var Wr=function(e){var r=this;e===void 0&&(e={});var n=e.plugins;n===void 0&&(n=[]);var i=e.strict;i===void 0&&(i=!1);var a=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ls(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=a;var s=this,o=this,l=o.dispatch,c=o.commit;this.dispatch=function(h,p){return l.call(s,h,p)},this.commit=function(h,p,b){return c.call(s,h,p,b)},this.strict=i;var u=this._modules.root.state;vp(this,u,[],this._modules.root),ky(this,u),n.forEach(function(d){return d(r)})},Ay={state:{configurable:!0}};Wr.prototype.install=function(e,r){e.provide(r||oz,this),e.config.globalProperties.$store=this;var n=this._devtools!==void 0?this._devtools:!1;n&&yz(e,this)};Ay.state.get=function(){return this._state.data};Ay.state.set=function(t){};Wr.prototype.commit=function(e,r,n){var i=this,a=Gh(e,r,n),s=a.type,o=a.payload,l={type:s,payload:o},c=this._mutations[s];!c||(this._withCommit(function(){c.forEach(function(d){d(o)})}),this._subscribers.slice().forEach(function(u){return u(l,i.state)}))};Wr.prototype.dispatch=function(e,r){var n=this,i=Gh(e,r),a=i.type,s=i.payload,o={type:a,payload:s},l=this._actions[a];if(!!l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(o,n.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(s)})):l[0](s);return new Promise(function(u,d){c.then(function(h){try{n._actionSubscribers.filter(function(p){return p.after}).forEach(function(p){return p.after(o,n.state)})}catch{}u(h)},function(h){try{n._actionSubscribers.filter(function(p){return p.error}).forEach(function(p){return p.error(o,n.state,h)})}catch{}d(h)})})}};Wr.prototype.subscribe=function(e,r){return qA(e,this._subscribers,r)};Wr.prototype.subscribeAction=function(e,r){var n=typeof e=="function"?{before:e}:e;return qA(n,this._actionSubscribers,r)};Wr.prototype.watch=function(e,r,n){var i=this;return os(function(){return e(i.state,i.getters)},r,Object.assign({},n))};Wr.prototype.replaceState=function(e){var r=this;this._withCommit(function(){r._state.data=e})};Wr.prototype.registerModule=function(e,r,n){n===void 0&&(n={}),typeof e=="string"&&(e=[e]),this._modules.register(e,r),vp(this,this.state,e,this._modules.get(e),n.preserveState),ky(this,this.state)};Wr.prototype.unregisterModule=function(e){var r=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var n=Cy(r.state,e.slice(0,-1));delete n[e[e.length-1]]}),GA(this)};Wr.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Wr.prototype.hotUpdate=function(e){this._modules.update(e),GA(this,!0)};Wr.prototype._withCommit=function(e){var r=this._committing;this._committing=!0,e(),this._committing=r};Object.defineProperties(Wr.prototype,Ay);var Ez=function(t){return function(e){return!!e&&typeof e=="object"}(t)&&!function(e){var r=Object.prototype.toString.call(e);return r==="[object RegExp]"||r==="[object Date]"||function(n){return n.$$typeof===kz}(e)}(t)},kz=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function Wl(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Mo(Array.isArray(t)?[]:{},t,e):t}function Cz(t,e,r){return t.concat(e).map(function(n){return Wl(n,r)})}function rT(t){return Object.keys(t).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(r){return e.propertyIsEnumerable(r)}):[]}(t))}function iT(t,e){try{return e in t}catch{return!1}}function Mo(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||Cz,r.isMergeableObject=r.isMergeableObject||Ez,r.cloneUnlessOtherwiseSpecified=Wl;var n=Array.isArray(e);return n===Array.isArray(t)?n?r.arrayMerge(t,e,r):function(i,a,s){var o={};return s.isMergeableObject(i)&&rT(i).forEach(function(l){o[l]=Wl(i[l],s)}),rT(a).forEach(function(l){(function(c,u){return iT(c,u)&&!(Object.hasOwnProperty.call(c,u)&&Object.propertyIsEnumerable.call(c,u))})(i,l)||(o[l]=iT(i,l)&&s.isMergeableObject(a[l])?function(c,u){if(!u.customMerge)return Mo;var d=u.customMerge(c);return typeof d=="function"?d:Mo}(l,s)(i[l],a[l],s):Wl(a[l],s))}),o}(t,e,r):Wl(e,r)}Mo.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,n){return Mo(r,n,e)},{})};var Az=Mo;function Iz(t){var e=(t=t||{}).storage||window&&window.localStorage,r=t.key||"vuex";function n(u,d){var h=d.getItem(u);try{return typeof h=="string"?JSON.parse(h):typeof h=="object"?h:void 0}catch{}}function i(){return!0}function a(u,d,h){return h.setItem(u,JSON.stringify(d))}function s(u,d){return Array.isArray(d)?d.reduce(function(h,p){return function(v,T,E,A){return!/^(__proto__|constructor|prototype)$/.test(T)&&((T=T.split?T.split("."):T.slice(0)).slice(0,-1).reduce(function(k,I){return k[I]=k[I]||{}},v)[T.pop()]=E),v}(h,p,(b=u,(b=((w=p).split?w.split("."):w).reduce(function(v,T){return v&&v[T]},b))===void 0?void 0:b));var b,w},{}):u}function o(u){return function(d){return u.subscribe(d)}}(t.assertStorage||function(){e.setItem("@@",1),e.removeItem("@@")})(e);var l,c=function(){return(t.getState||n)(r,e)};return t.fetchBeforeUse&&(l=c()),function(u){t.fetchBeforeUse||(l=c()),typeof l=="object"&&l!==null&&(u.replaceState(t.overwrite?l:Az(u.state,l,{arrayMerge:t.arrayMerger||function(d,h){return h},clone:!1})),(t.rehydrated||function(){})(u)),(t.subscriber||o)(u)(function(d,h){(t.filter||i)(d)&&(t.setState||a)(r,(t.reducer||s)(h,t.paths),e)})}}const ga=Sz({plugins:[Iz({storage:window.sessionStorage})],state:{user:{loggedIn:!1,data:null}},getters:{user(t){return t.user},username(t){return t.user.data.displayName},userEmail(t){return t.user.data.email},userPhotoURL(t){return t.user.data.photoURL}},mutations:{SET_LOGGED_IN(t,e){t.user.loggedIn=e},SET_USER(t,e){t.user.data=e}}}),Pz={apiKey:"AIzaSyDJDdYFekcMKz_LedlGXtlS9Vsaw7nALuk",authDomain:"thecinemat-3606a.firebaseapp.com",databaseURL:"https://thecinemat-3606a-default-rtdb.firebaseio.com",projectId:"thecinemat-3606a",storageBucket:"thecinemat-3606a.appspot.com",messagingSenderId:"912057146143",appId:"1:912057146143:web:70a2b8142049d9fd35ee2a",measurementId:"G-B94NPK3VQM"},Iy=DE(Pz),Oz=D4(Iy),nT=Y6(Iy),FJ=iz(Iy),Dz=new Ei,Lz=()=>{a6(nT,Dz).then(t=>{if(t.user.email.indexOf("@yale.edu")===-1){MU(nT).then(()=>{}).catch(n=>{}),alert("Please sign in with a Yale email address.");return}Ei.credentialFromResult(t).accessToken;const r=t.user;r&&(r.value=t,ga.commit("SET_LOGGED_IN",!0),ga.commit("SET_USER",{displayName:r.displayName,email:r.email,photoURL:r.photoURL}),console.log(ga.getters.user))}).catch(t=>{alert(t),t.code,t.message,t.customData.email,Ei.credentialFromError(t)})},BJ=async()=>{const t=_4(Oz,"allProjects"),e=await Q4(t),r=[];return e.forEach(n=>{r.push({id:n.id,...n.data()})}),r},Rz=he("div",{class:"idk"},null,-1),Mz={class:"app-main z-30"},Nz={class:"max-w-7xl mx-auto px-4 sm:px-6"},jz={class:"flex justify-between items-center border-b-2 border-gray-100 py-6 lg:justify-start lg:space-x-10"},Fz={class:"flex justify-start lg:w-0 lg:flex-1"},Bz=he("span",{class:"sr-only"},"Cinemat Logo",-1),Uz=he("img",{class:"h-8 w-auto sm:h-10",src:fE,alt:""},null,-1),zz={class:"-mr-2 -my-2 lg:hidden"},$z=he("span",{class:"sr-only"},"Open menu",-1),Vz=ka(" All Projects "),Hz=he("span",null,"Set Opportunities",-1),qz={class:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden"},Gz={class:"relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8"},Wz={class:"ml-4"},Kz={class:"text-base font-medium text-gray-900"},Yz={class:"mt-1 text-sm text-gray-500"},Xz=ka(" Events "),Qz=ka(" Resources "),Jz=ka(" About "),Zz={class:"hidden lg:flex items-center justify-end lg:flex-1 lg:w-0"},e$=ka(" Log-in with netID "),t$=["src"],r$={class:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 overflow-hidden"},i$={class:"relative grid gap-6 bg-white px-5 py-6 sm:gap-8 sm:p-8"},n$={class:"ml-4"},a$={class:"text-base font-medium text-gray-900"},s$={class:"rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 bg-white divide-y-2 divide-gray-50"},o$={class:"pt-5 pb-6 px-5"},l$={class:"flex items-center justify-between"},c$=he("span",{class:"sr-only"},"Cinemat Logo",-1),u$=he("img",{class:"h-8 w-auto sm:h-10",src:fE,alt:""},null,-1),d$={class:"-mr-2"},h$=he("span",{class:"sr-only"},"Close menu",-1),f$={class:"mt-6"},p$={class:"grid gap-y-8"},g$={class:"ml-3 text-base font-medium text-gray-900"},m$={class:"py-6 px-5 space-y-6"},v$={class:"grid grid-cols-2 gap-y-4 gap-x-8"},y$=ka(" Log-in with netID "),b$={__name:"Header",setup(t){const e=[{name:"Add a production",href:"/create"},{name:"Edit your productions",href:"/edit"},{name:"Sign out",href:"#"}],r=[{name:"For Filmmakers",description:"Get involved with a set and get some real-world experience.",href:"/opportunities/filmmakers",icon:fj},{name:"For Actors",description:"Make your on-screen debut.",href:"/opportunities/actors",icon:dj}],n=[{name:"All Projects",description:"Get all of your questions answered in our forums or contact support.",href:"/projects",icon:hj},{name:"Opportunities",description:"Learn how to maximize our platform to get the most out of it.",href:"/opportunities/filmmakers",icon:lj},{name:"Events",description:"See what meet-ups and other events we might be planning near you.",href:"/events",icon:cj},{name:"Resources",description:"Understand how we take your privacy seriously.",href:"/resources",icon:P_},{name:"About",description:"Understand how we take your privacy seriously.",href:"/about",icon:P_}];return(i,a)=>{const s=kc("router-link");return Xe(),Xt(Ct,null,[Rz,he("div",Mz,[xe(Et(Qd),{class:"relative bg-white z-30"},{default:Je(()=>[he("div",Nz,[he("div",jz,[he("div",Fz,[xe(s,{to:"/"},{default:Je(()=>[Bz,Uz]),_:1})]),he("div",zz,[xe(Et(wd),{class:"bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-light"},{default:Je(()=>[$z,xe(Et(uj),{class:"h-6 w-6","aria-hidden":"true"})]),_:1})]),xe(Et(oj),{as:"nav",class:"hidden lg:flex items-center space-x-10"},{default:Je(()=>[xe(s,{to:"/projects",class:"text-base font-semibold text-primary hover:text-gray-900"},{default:Je(()=>[Vz]),_:1}),xe(Et(Qd),{class:"relative"},{default:Je(({open:o})=>[xe(Et(wd),{class:Qa([o?"text-gray-900":"text-gray-500","group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light"])},{default:Je(()=>[Hz,xe(Et(O_),{class:Qa([o?"text-gray-600":"text-gray-400","ml-2 h-5 w-5 group-hover:text-gray-500"]),"aria-hidden":"true"},null,8,["class"])]),_:2},1032,["class"]),xe(ac,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:Je(()=>[he("div",null,[xe(Et(sg),{class:"absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-md sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2"},{default:Je(()=>[he("div",qz,[he("div",Gz,[(Xe(),Xt(Ct,null,sa(r,l=>xe(s,{key:l.name,to:l.href,class:"-m-3 p-3 flex items-start rounded-lg hover:bg-gray-50"},{default:Je(()=>[(Xe(),Gt(Kd(l.icon),{class:"flex-shrink-0 h-6 w-6 text-primary-light","aria-hidden":"true"})),he("div",Wz,[he("p",Kz,gn(l.name),1),he("p",Yz,gn(l.description),1)])]),_:2},1032,["to"])),64))])])]),_:1})])]),_:1})]),_:1}),xe(s,{to:"/events",class:"text-base font-medium text-gray-500 hover:text-gray-900"},{default:Je(()=>[Xz]),_:1}),xe(s,{to:"/resources",class:"text-base font-medium text-gray-500 hover:text-gray-900"},{default:Je(()=>[Qz]),_:1}),xe(s,{to:"/about",class:"text-base font-medium text-gray-500 hover:text-gray-900"},{default:Je(()=>[Jz]),_:1})]),_:1}),he("div",Zz,[Et(ga).getters.user.loggedIn===!1?(Xe(),Gt(s,{key:0,onClick:Et(Lz),to:"#",class:"ml-8 whitespace-nowrap hidden lg:inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary-light hover:bg-primary"},{default:Je(()=>[e$]),_:1},8,["onClick"])):(Xe(),Gt(Et(Qd),{key:1,class:"relative"},{default:Je(({open:o})=>[xe(Et(wd),{class:Qa([o?"text-gray-900":"text-gray-500","group bg-white rounded-md inline-flex items-center text-base font-medium hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light"])},{default:Je(()=>[he("img",{src:Et(ga).getters.userPhotoURL,referrerpolicy:"no-referrer",class:"h-10 w-10 rounded-full"},null,8,t$),xe(Et(O_),{class:Qa([o?"text-gray-600":"text-gray-400","ml-2 h-5 w-5 group-hover:text-gray-500"]),"aria-hidden":"true"},null,8,["class"])]),_:2},1032,["class"]),xe(ac,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:Je(()=>[he("div",null,[xe(Et(sg),{class:"absolute z-10 -ml-4 mt-3 transform px-2 w-screen max-w-md sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2"},{default:Je(()=>[he("div",r$,[he("div",i$,[(Xe(),Xt(Ct,null,sa(e,l=>xe(s,{key:l.name,to:l.href,class:"-m-3 p-3 flex items-start rounded-lg hover:bg-gray-50"},{default:Je(()=>[(Xe(),Gt(Kd(l.icon),{class:"flex-shrink-0 h-6 w-6 text-primary-light","aria-hidden":"true"})),he("div",n$,[he("p",a$,gn(l.name),1)])]),_:2},1032,["to"])),64))])])]),_:1})])]),_:1})]),_:1}))])])]),xe(ac,{"enter-active-class":"duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"duration-100 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:Je(()=>[he("div",null,[xe(Et(sg),{focus:"",class:"absolute top-0 inset-x-0 p-2 transition transform origin-top-right lg:hidden"},{default:Je(()=>[he("div",s$,[he("div",o$,[he("div",l$,[xe(s,{to:"/"},{default:Je(()=>[c$,u$]),_:1}),he("div",d$,[xe(Et(wd),{class:"bg-white rounded-md p-2 inline-flex items-center justify-center text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-light"},{default:Je(()=>[h$,xe(Et(pj),{class:"h-6 w-6","aria-hidden":"true"})]),_:1})])]),he("div",f$,[he("nav",p$,[(Xe(!0),Xt(Ct,null,sa(i.solutions,o=>(Xe(),Gt(s,{key:o.name,href:o.href,class:"-m-3 p-3 flex items-center rounded-md hover:bg-gray-50"},{default:Je(()=>[(Xe(),Gt(Kd(o.icon),{class:"flex-shrink-0 h-6 w-6 text-primary-light","aria-hidden":"true"})),he("span",g$,gn(o.name),1)]),_:2},1032,["href"]))),128))])])]),he("div",m$,[he("div",v$,[(Xe(),Xt(Ct,null,sa(n,o=>xe(s,{key:o.name,to:o.href,class:"text-base font-medium text-gray-900 hover:text-gray-700"},{default:Je(()=>[ka(gn(o.name),1)]),_:2},1032,["to"])),64))]),he("div",null,[xe(s,{to:"#",class:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary hover:bg-primary"},{default:Je(()=>[y$]),_:1})])])])]),_:1})])]),_:1})]),_:1})])],64)}}},w$={class:"bg-white","aria-labelledby":"footer-heading"},_$=he("h2",{id:"footer-heading",class:"sr-only"},"Footer",-1),x$={class:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8"},T$={class:"xl:grid xl:grid-cols-3 xl:gap-8"},S$={class:"grid grid-cols-2 gap-8 xl:col-span-2"},E$={class:"md:grid md:grid-cols-2 md:gap-8"},k$=he("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"},"Opportunities",-1),C$={role:"list",class:"mt-4 space-y-4"},A$=["href"],I$={class:"mt-12 md:mt-0"},P$=he("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"},"Events",-1),O$={role:"list",class:"mt-4 space-y-4"},D$=["href"],L$={class:"md:grid md:grid-cols-2 md:gap-8"},R$={class:"mt-12 md:mt-0"},M$=he("h3",{class:"text-sm font-semibold text-gray-400 tracking-wider uppercase"},"About",-1),N$={role:"list",class:"mt-4 space-y-4"},j$=["href"],F$=ou('<div class="mt-8 xl:mt-0"><h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Subscribe to our newsletter</h3><p class="mt-4 text-base text-gray-500">The latest news, articles, and resources, sent to your inbox weekly.</p><form class="mt-4 sm:flex sm:max-w-md"><label for="email-address" class="sr-only">Email address</label><input type="email" name="email-address" id="email-address" autocomplete="email" required="" class="appearance-none min-w-0 w-full bg-white border border-gray-300 rounded-md shadow-sm py-2 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-primary-light focus:border-primary-light focus:placeholder-gray-400" placeholder="Enter your email"><div class="mt-3 rounded-md sm:mt-0 sm:ml-3 sm:flex-shrink-0"><button type="submit" class="w-full bg-primary-light flex items-center justify-center border border-transparent rounded-md py-2 px-4 text-base font-medium text-white hover:bg-primary focus:ring-2 focus:ring-offset-2 focus:ring-primary-light">Subscribe</button></div></form></div>',1),B$={class:"mt-8 border-t border-gray-200 pt-8 md:flex md:items-center md:justify-between"},U$={class:"flex space-x-6 md:order-2"},z$=["href"],$$={class:"sr-only"},V$=he("p",{class:"mt-8 text-base text-gray-400 md:mt-0 md:order-1"},"\xA9 2022 The Cinemat at Yale University. All rights reserved.",-1),H$={__name:"Footer",setup(t){const e={opportunities:[{name:"For Filmmakers",href:"#"},{name:"For Actors",href:"#"}],events:[{name:"Screenings",href:"#"},{name:"Workshops",href:"#"},{name:"Calendar",href:"#"}],about:[{name:"The Team",href:"#"},{name:"Membership",href:"#"}],social:[{name:"Facebook",href:"https://www.facebook.com/YaleCinemat/",icon:ti({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{"fill-rule":"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z","clip-rule":"evenodd"})])})},{name:"Instagram",href:"https://www.instagram.com/yalecinemat/",icon:ti({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{"fill-rule":"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z","clip-rule":"evenodd"})])})},{name:"Twitter",href:"#",icon:ti({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})])})},{name:"GitHub",href:"https://github.com/califernication/theCinemat",icon:ti({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})])})},{name:"Dribbble",href:"#",icon:ti({render:()=>lt("svg",{fill:"currentColor",viewBox:"0 0 24 24"},[lt("path",{"fill-rule":"evenodd",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c5.51 0 10-4.48 10-10S17.51 2 12 2zm6.605 4.61a8.502 8.502 0 011.93 5.314c-.281-.054-3.101-.629-5.943-.271-.065-.141-.12-.293-.184-.445a25.416 25.416 0 00-.564-1.236c3.145-1.28 4.577-3.124 4.761-3.362zM12 3.475c2.17 0 4.154.813 5.662 2.148-.152.216-1.443 1.941-4.48 3.08-1.399-2.57-2.95-4.675-3.189-5A8.687 8.687 0 0112 3.475zm-3.633.803a53.896 53.896 0 013.167 4.935c-3.992 1.063-7.517 1.04-7.896 1.04a8.581 8.581 0 014.729-5.975zM3.453 12.01v-.26c.37.01 4.512.065 8.775-1.215.25.477.477.965.694 1.453-.109.033-.228.065-.336.098-4.404 1.42-6.747 5.303-6.942 5.629a8.522 8.522 0 01-2.19-5.705zM12 20.547a8.482 8.482 0 01-5.239-1.8c.152-.315 1.888-3.656 6.703-5.337.022-.01.033-.01.054-.022a35.318 35.318 0 011.823 6.475 8.4 8.4 0 01-3.341.684zm4.761-1.465c-.086-.52-.542-3.015-1.659-6.084 2.679-.423 5.022.271 5.314.369a8.468 8.468 0 01-3.655 5.715z","clip-rule":"evenodd"})])})}]};return(r,n)=>(Xe(),Xt("footer",w$,[_$,he("div",x$,[he("div",T$,[he("div",S$,[he("div",E$,[he("div",null,[k$,he("ul",C$,[(Xe(!0),Xt(Ct,null,sa(e.opportunities,i=>(Xe(),Xt("li",{key:i.name},[he("a",{href:i.href,class:"text-base text-gray-500 hover:text-gray-900"},gn(i.name),9,A$)]))),128))])]),he("div",I$,[P$,he("ul",O$,[(Xe(!0),Xt(Ct,null,sa(e.events,i=>(Xe(),Xt("li",{key:i.name},[he("a",{href:i.href,class:"text-base text-gray-500 hover:text-gray-900"},gn(i.name),9,D$)]))),128))])])]),he("div",L$,[he("div",R$,[M$,he("ul",N$,[(Xe(!0),Xt(Ct,null,sa(e.about,i=>(Xe(),Xt("li",{key:i.name},[he("a",{href:i.href,class:"text-base text-gray-500 hover:text-gray-900"},gn(i.name),9,j$)]))),128))])])])]),F$]),he("div",B$,[he("div",U$,[(Xe(!0),Xt(Ct,null,sa(e.social,i=>(Xe(),Xt("a",{key:i.name,href:i.href,class:"text-gray-400 hover:text-gray-500"},[he("span",$$,gn(i.name),1),(Xe(),Gt(Kd(i.icon),{class:"h-6 w-6","aria-hidden":"true"}))],8,z$))),128))]),V$])])]))}},q$={__name:"App",setup(t){return(e,r)=>(Xe(),Xt(Ct,null,[xe(b$),xe(Et(hE)),xe(H$)],64))}},G$="modulepreload",aT={},W$="/theCinemat/",li=function(e,r){return!r||r.length===0?e():Promise.all(r.map(n=>{if(n=`${W$}${n}`,n in aT)return;aT[n]=!0;const i=n.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const s=document.createElement("link");if(s.rel=i?"stylesheet":G$,i||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),i)return new Promise((o,l)=>{s.addEventListener("load",o),s.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())};var K$="/theCinemat/assets/inverted-logo.e8790b8b.svg";function sT(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Py(t={},e={}){Object.keys(e).forEach(r=>{typeof t[r]=="undefined"?t[r]=e[r]:sT(e[r])&&sT(t[r])&&Object.keys(e[r]).length>0&&Py(t[r],e[r])})}const eI={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function er(){const t=typeof document!="undefined"?document:{};return Py(t,eI),t}const Y$={document:eI,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout=="undefined"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout!="undefined"&&clearTimeout(t)}};function ar(){const t=typeof window!="undefined"?window:{};return Py(t,Y$),t}function X$(t){const e=t.__proto__;Object.defineProperty(t,"__proto__",{get(){return e},set(r){e.__proto__=r}})}class oa extends Array{constructor(e){typeof e=="number"?super(e):(super(...e||[]),X$(this))}}function Pu(t=[]){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...Pu(r)):e.push(r)}),e}function tI(t,e){return Array.prototype.filter.call(t,e)}function Q$(t){const e=[];for(let r=0;r<t.length;r+=1)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function J$(t,e){if(typeof t!="string")return[t];const r=[],n=e.querySelectorAll(t);for(let i=0;i<n.length;i+=1)r.push(n[i]);return r}function me(t,e){const r=ar(),n=er();let i=[];if(!e&&t instanceof oa)return t;if(!t)return new oa(i);if(typeof t=="string"){const a=t.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){let s="div";a.indexOf("<li")===0&&(s="ul"),a.indexOf("<tr")===0&&(s="tbody"),(a.indexOf("<td")===0||a.indexOf("<th")===0)&&(s="tr"),a.indexOf("<tbody")===0&&(s="table"),a.indexOf("<option")===0&&(s="select");const o=n.createElement(s);o.innerHTML=a;for(let l=0;l<o.childNodes.length;l+=1)i.push(o.childNodes[l])}else i=J$(t.trim(),e||n)}else if(t.nodeType||t===r||t===n)i.push(t);else if(Array.isArray(t)){if(t instanceof oa)return t;i=t}return new oa(Q$(i))}me.fn=oa.prototype;function Z$(...t){const e=Pu(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.add(...e)}),this}function eV(...t){const e=Pu(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.remove(...e)}),this}function tV(...t){const e=Pu(t.map(r=>r.split(" ")));this.forEach(r=>{e.forEach(n=>{r.classList.toggle(n)})})}function rV(...t){const e=Pu(t.map(r=>r.split(" ")));return tI(this,r=>e.filter(n=>r.classList.contains(n)).length>0).length>0}function iV(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(let r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(t,e);else for(const n in t)this[r][n]=t[n],this[r].setAttribute(n,t[n]);return this}function nV(t){for(let e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function aV(t){for(let e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function sV(t){for(let e=0;e<this.length;e+=1)this[e].style.transitionDuration=typeof t!="string"?`${t}ms`:t;return this}function oV(...t){let[e,r,n,i]=t;typeof t[1]=="function"&&([e,n,i]=t,r=void 0),i||(i=!1);function a(c){const u=c.target;if(!u)return;const d=c.target.dom7EventData||[];if(d.indexOf(c)<0&&d.unshift(c),me(u).is(r))n.apply(u,d);else{const h=me(u).parents();for(let p=0;p<h.length;p+=1)me(h[p]).is(r)&&n.apply(h[p],d)}}function s(c){const u=c&&c.target?c.target.dom7EventData||[]:[];u.indexOf(c)<0&&u.unshift(c),n.apply(this,u)}const o=e.split(" ");let l;for(let c=0;c<this.length;c+=1){const u=this[c];if(r)for(l=0;l<o.length;l+=1){const d=o[l];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[d]||(u.dom7LiveListeners[d]=[]),u.dom7LiveListeners[d].push({listener:n,proxyListener:a}),u.addEventListener(d,a,i)}else for(l=0;l<o.length;l+=1){const d=o[l];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[d]||(u.dom7Listeners[d]=[]),u.dom7Listeners[d].push({listener:n,proxyListener:s}),u.addEventListener(d,s,i)}}return this}function lV(...t){let[e,r,n,i]=t;typeof t[1]=="function"&&([e,n,i]=t,r=void 0),i||(i=!1);const a=e.split(" ");for(let s=0;s<a.length;s+=1){const o=a[s];for(let l=0;l<this.length;l+=1){const c=this[l];let u;if(!r&&c.dom7Listeners?u=c.dom7Listeners[o]:r&&c.dom7LiveListeners&&(u=c.dom7LiveListeners[o]),u&&u.length)for(let d=u.length-1;d>=0;d-=1){const h=u[d];n&&h.listener===n||n&&h.listener&&h.listener.dom7proxy&&h.listener.dom7proxy===n?(c.removeEventListener(o,h.proxyListener,i),u.splice(d,1)):n||(c.removeEventListener(o,h.proxyListener,i),u.splice(d,1))}}}return this}function cV(...t){const e=ar(),r=t[0].split(" "),n=t[1];for(let i=0;i<r.length;i+=1){const a=r[i];for(let s=0;s<this.length;s+=1){const o=this[s];if(e.CustomEvent){const l=new e.CustomEvent(a,{detail:n,bubbles:!0,cancelable:!0});o.dom7EventData=t.filter((c,u)=>u>0),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}}}return this}function uV(t){const e=this;function r(n){n.target===this&&(t.call(this,n),e.off("transitionend",r))}return t&&e.on("transitionend",r),this}function dV(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function hV(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function fV(){if(this.length>0){const t=ar(),e=er(),r=this[0],n=r.getBoundingClientRect(),i=e.body,a=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,o=r===t?t.scrollY:r.scrollTop,l=r===t?t.scrollX:r.scrollLeft;return{top:n.top+o-a,left:n.left+l-s}}return null}function pV(){const t=ar();return this[0]?t.getComputedStyle(this[0],null):{}}function gV(t,e){const r=ar();let n;if(arguments.length===1)if(typeof t=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(t)}else{for(n=0;n<this.length;n+=1)for(const i in t)this[n].style[i]=t[i];return this}if(arguments.length===2&&typeof t=="string"){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this}function mV(t){return t?(this.forEach((e,r)=>{t.apply(e,[e,r])}),this):this}function vV(t){const e=tI(this,t);return me(e)}function yV(t){if(typeof t=="undefined")return this[0]?this[0].innerHTML:null;for(let e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function bV(t){if(typeof t=="undefined")return this[0]?this[0].textContent.trim():null;for(let e=0;e<this.length;e+=1)this[e].textContent=t;return this}function wV(t){const e=ar(),r=er(),n=this[0];let i,a;if(!n||typeof t=="undefined")return!1;if(typeof t=="string"){if(n.matches)return n.matches(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);for(i=me(t),a=0;a<i.length;a+=1)if(i[a]===n)return!0;return!1}if(t===r)return n===r;if(t===e)return n===e;if(t.nodeType||t instanceof oa){for(i=t.nodeType?[t]:t,a=0;a<i.length;a+=1)if(i[a]===n)return!0;return!1}return!1}function _V(){let t=this[0],e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function xV(t){if(typeof t=="undefined")return this;const e=this.length;if(t>e-1)return me([]);if(t<0){const r=e+t;return r<0?me([]):me([this[r]])}return me([this[t]])}function TV(...t){let e;const r=er();for(let n=0;n<t.length;n+=1){e=t[n];for(let i=0;i<this.length;i+=1)if(typeof e=="string"){const a=r.createElement("div");for(a.innerHTML=e;a.firstChild;)this[i].appendChild(a.firstChild)}else if(e instanceof oa)for(let a=0;a<e.length;a+=1)this[i].appendChild(e[a]);else this[i].appendChild(e)}return this}function SV(t){const e=er();let r,n;for(r=0;r<this.length;r+=1)if(typeof t=="string"){const i=e.createElement("div");for(i.innerHTML=t,n=i.childNodes.length-1;n>=0;n-=1)this[r].insertBefore(i.childNodes[n],this[r].childNodes[0])}else if(t instanceof oa)for(n=0;n<t.length;n+=1)this[r].insertBefore(t[n],this[r].childNodes[0]);else this[r].insertBefore(t,this[r].childNodes[0]);return this}function EV(t){return this.length>0?t?this[0].nextElementSibling&&me(this[0].nextElementSibling).is(t)?me([this[0].nextElementSibling]):me([]):this[0].nextElementSibling?me([this[0].nextElementSibling]):me([]):me([])}function kV(t){const e=[];let r=this[0];if(!r)return me([]);for(;r.nextElementSibling;){const n=r.nextElementSibling;t?me(n).is(t)&&e.push(n):e.push(n),r=n}return me(e)}function CV(t){if(this.length>0){const e=this[0];return t?e.previousElementSibling&&me(e.previousElementSibling).is(t)?me([e.previousElementSibling]):me([]):e.previousElementSibling?me([e.previousElementSibling]):me([])}return me([])}function AV(t){const e=[];let r=this[0];if(!r)return me([]);for(;r.previousElementSibling;){const n=r.previousElementSibling;t?me(n).is(t)&&e.push(n):e.push(n),r=n}return me(e)}function IV(t){const e=[];for(let r=0;r<this.length;r+=1)this[r].parentNode!==null&&(t?me(this[r].parentNode).is(t)&&e.push(this[r].parentNode):e.push(this[r].parentNode));return me(e)}function PV(t){const e=[];for(let r=0;r<this.length;r+=1){let n=this[r].parentNode;for(;n;)t?me(n).is(t)&&e.push(n):e.push(n),n=n.parentNode}return me(e)}function OV(t){let e=this;return typeof t=="undefined"?me([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function DV(t){const e=[];for(let r=0;r<this.length;r+=1){const n=this[r].querySelectorAll(t);for(let i=0;i<n.length;i+=1)e.push(n[i])}return me(e)}function LV(t){const e=[];for(let r=0;r<this.length;r+=1){const n=this[r].children;for(let i=0;i<n.length;i+=1)(!t||me(n[i]).is(t))&&e.push(n[i])}return me(e)}function RV(){for(let t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}const oT={addClass:Z$,removeClass:eV,hasClass:rV,toggleClass:tV,attr:iV,removeAttr:nV,transform:aV,transition:sV,on:oV,off:lV,trigger:cV,transitionEnd:uV,outerWidth:dV,outerHeight:hV,styles:pV,offset:fV,css:gV,each:mV,html:yV,text:bV,is:wV,index:_V,eq:xV,append:TV,prepend:SV,next:EV,nextAll:kV,prev:CV,prevAll:AV,parent:IV,parents:PV,closest:OV,find:DV,children:LV,filter:vV,remove:RV};Object.keys(oT).forEach(t=>{Object.defineProperty(me.fn,t,{value:oT[t],writable:!0})});function MV(t){const e=t;Object.keys(e).forEach(r=>{try{e[r]=null}catch{}try{delete e[r]}catch{}})}function Gc(t,e=0){return setTimeout(t,e)}function Wc(){return Date.now()}function NV(t){const e=ar();let r;return e.getComputedStyle&&(r=e.getComputedStyle(t,null)),!r&&t.currentStyle&&(r=t.currentStyle),r||(r=t.style),r}function jV(t,e="x"){const r=ar();let n,i,a;const s=NV(t);return r.WebKitCSSMatrix?(i=s.transform||s.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(o=>o.replace(",",".")).join(", ")),a=new r.WebKitCSSMatrix(i==="none"?"":i)):(a=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),e==="x"&&(r.WebKitCSSMatrix?i=a.m41:n.length===16?i=parseFloat(n[12]):i=parseFloat(n[4])),e==="y"&&(r.WebKitCSSMatrix?i=a.m42:n.length===16?i=parseFloat(n[13]):i=parseFloat(n[5])),i||0}function Od(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function FV(t){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Zr(...t){const e=Object(t[0]),r=["__proto__","constructor","prototype"];for(let n=1;n<t.length;n+=1){const i=t[n];if(i!=null&&!FV(i)){const a=Object.keys(Object(i)).filter(s=>r.indexOf(s)<0);for(let s=0,o=a.length;s<o;s+=1){const l=a[s],c=Object.getOwnPropertyDescriptor(i,l);c!==void 0&&c.enumerable&&(Od(e[l])&&Od(i[l])?i[l].__swiper__?e[l]=i[l]:Zr(e[l],i[l]):!Od(e[l])&&Od(i[l])?(e[l]={},i[l].__swiper__?e[l]=i[l]:Zr(e[l],i[l])):e[l]=i[l])}}}return e}function Dd(t,e,r){t.style.setProperty(e,r)}function rI({swiper:t,targetPosition:e,side:r}){const n=ar(),i=-t.translate;let a=null,s;const o=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const l=e>i?"next":"prev",c=(d,h)=>l==="next"&&d>=h||l==="prev"&&d<=h,u=()=>{s=new Date().getTime(),a===null&&(a=s);const d=Math.max(Math.min((s-a)/o,1),0),h=.5-Math.cos(d*Math.PI)/2;let p=i+h*(e-i);if(c(p,e)&&(p=e),t.wrapperEl.scrollTo({[r]:p}),c(p,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:p})}),n.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=n.requestAnimationFrame(u)};u()}let Cg;function BV(){const t=ar(),e=er();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),passiveListener:function(){let n=!1;try{const i=Object.defineProperty({},"passive",{get(){n=!0}});t.addEventListener("testPassiveListener",null,i)}catch{}return n}(),gestures:function(){return"ongesturestart"in t}()}}function iI(){return Cg||(Cg=BV()),Cg}let Ag;function UV({userAgent:t}={}){const e=iI(),r=ar(),n=r.navigator.platform,i=t||r.navigator.userAgent,a={ios:!1,android:!1},s=r.screen.width,o=r.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const u=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=n==="Win32";let p=n==="MacIntel";const b=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&p&&e.touch&&b.indexOf(`${s}x${o}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),l&&!h&&(a.os="android",a.android=!0),(c||d||u)&&(a.os="ios",a.ios=!0),a}function zV(t={}){return Ag||(Ag=UV(t)),Ag}let Ig;function $V(){const t=ar();function e(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isSafari:e(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function VV(){return Ig||(Ig=$V()),Ig}function HV({swiper:t,on:e,emit:r}){const n=ar();let i=null,a=null;const s=()=>{!t||t.destroyed||!t.initialized||(r("beforeResize"),r("resize"))},o=()=>{!t||t.destroyed||!t.initialized||(i=new ResizeObserver(u=>{a=n.requestAnimationFrame(()=>{const{width:d,height:h}=t;let p=d,b=h;u.forEach(({contentBoxSize:w,contentRect:v,target:T})=>{T&&T!==t.el||(p=v?v.width:(w[0]||w).inlineSize,b=v?v.height:(w[0]||w).blockSize)}),(p!==d||b!==h)&&s()})}),i.observe(t.el))},l=()=>{a&&n.cancelAnimationFrame(a),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null)},c=()=>{!t||t.destroyed||!t.initialized||r("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof n.ResizeObserver!="undefined"){o();return}n.addEventListener("resize",s),n.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),n.removeEventListener("resize",s),n.removeEventListener("orientationchange",c)})}function qV({swiper:t,extendParams:e,on:r,emit:n}){const i=[],a=ar(),s=(c,u={})=>{const d=a.MutationObserver||a.WebkitMutationObserver,h=new d(p=>{if(p.length===1){n("observerUpdate",p[0]);return}const b=function(){n("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(b):a.setTimeout(b,0)});h.observe(c,{attributes:typeof u.attributes=="undefined"?!0:u.attributes,childList:typeof u.childList=="undefined"?!0:u.childList,characterData:typeof u.characterData=="undefined"?!0:u.characterData}),i.push(h)},o=()=>{if(!!t.params.observer){if(t.params.observeParents){const c=t.$el.parents();for(let u=0;u<c.length;u+=1)s(c[u])}s(t.$el[0],{childList:t.params.observeSlideChildren}),s(t.$wrapperEl[0],{attributes:!1})}},l=()=>{i.forEach(c=>{c.disconnect()}),i.splice(0,i.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",o),r("destroy",l)}var GV={on(t,e,r){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const i=r?"unshift":"push";return t.split(" ").forEach(a=>{n.eventsListeners[a]||(n.eventsListeners[a]=[]),n.eventsListeners[a][i](e)}),n},once(t,e,r){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function i(...a){n.off(t,i),i.__emitterProxy&&delete i.__emitterProxy,e.apply(n,a)}return i.__emitterProxy=e,n.on(t,i,r)},onAny(t,e){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const n=e?"unshift":"push";return r.eventsAnyListeners.indexOf(t)<0&&r.eventsAnyListeners[n](t),r},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const r=e.eventsAnyListeners.indexOf(t);return r>=0&&e.eventsAnyListeners.splice(r,1),e},off(t,e){const r=this;return!r.eventsListeners||r.destroyed||!r.eventsListeners||t.split(" ").forEach(n=>{typeof e=="undefined"?r.eventsListeners[n]=[]:r.eventsListeners[n]&&r.eventsListeners[n].forEach((i,a)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&r.eventsListeners[n].splice(a,1)})}),r},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let r,n,i;return typeof t[0]=="string"||Array.isArray(t[0])?(r=t[0],n=t.slice(1,t.length),i=e):(r=t[0].events,n=t[0].data,i=t[0].context||e),n.unshift(i),(Array.isArray(r)?r:r.split(" ")).forEach(s=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(o=>{o.apply(i,[s,...n])}),e.eventsListeners&&e.eventsListeners[s]&&e.eventsListeners[s].forEach(o=>{o.apply(i,n)})}),e}};function WV(){const t=this;let e,r;const n=t.$el;typeof t.params.width!="undefined"&&t.params.width!==null?e=t.params.width:e=n[0].clientWidth,typeof t.params.height!="undefined"&&t.params.height!==null?r=t.params.height:r=n[0].clientHeight,!(e===0&&t.isHorizontal()||r===0&&t.isVertical())&&(e=e-parseInt(n.css("padding-left")||0,10)-parseInt(n.css("padding-right")||0,10),r=r-parseInt(n.css("padding-top")||0,10)-parseInt(n.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(r)&&(r=0),Object.assign(t,{width:e,height:r,size:t.isHorizontal()?e:r}))}function KV(){const t=this;function e(M){return t.isHorizontal()?M:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[M]}function r(M,U){return parseFloat(M.getPropertyValue(e(U))||0)}const n=t.params,{$wrapperEl:i,size:a,rtlTranslate:s,wrongRTL:o}=t,l=t.virtual&&n.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,u=i.children(`.${t.params.slideClass}`),d=l?t.virtual.slides.length:u.length;let h=[];const p=[],b=[];let w=n.slidesOffsetBefore;typeof w=="function"&&(w=n.slidesOffsetBefore.call(t));let v=n.slidesOffsetAfter;typeof v=="function"&&(v=n.slidesOffsetAfter.call(t));const T=t.snapGrid.length,E=t.slidesGrid.length;let A=n.spaceBetween,k=-w,I=0,F=0;if(typeof a=="undefined")return;typeof A=="string"&&A.indexOf("%")>=0&&(A=parseFloat(A.replace("%",""))/100*a),t.virtualSize=-A,s?u.css({marginLeft:"",marginBottom:"",marginTop:""}):u.css({marginRight:"",marginBottom:"",marginTop:""}),n.centeredSlides&&n.cssMode&&(Dd(t.wrapperEl,"--swiper-centered-offset-before",""),Dd(t.wrapperEl,"--swiper-centered-offset-after",""));const j=n.grid&&n.grid.rows>1&&t.grid;j&&t.grid.initSlides(d);let D;const z=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(M=>typeof n.breakpoints[M].slidesPerView!="undefined").length>0;for(let M=0;M<d;M+=1){D=0;const U=u.eq(M);if(j&&t.grid.updateSlide(M,U,d,e),U.css("display")!=="none"){if(n.slidesPerView==="auto"){z&&(u[M].style[e("width")]="");const P=getComputedStyle(U[0]),q=U[0].style.transform,X=U[0].style.webkitTransform;if(q&&(U[0].style.transform="none"),X&&(U[0].style.webkitTransform="none"),n.roundLengths)D=t.isHorizontal()?U.outerWidth(!0):U.outerHeight(!0);else{const fe=r(P,"width"),te=r(P,"padding-left"),ae=r(P,"padding-right"),oe=r(P,"margin-left"),Re=r(P,"margin-right"),Le=P.getPropertyValue("box-sizing");if(Le&&Le==="border-box")D=fe+oe+Re;else{const{clientWidth:ft,offsetWidth:it}=U[0];D=fe+te+ae+oe+Re+(it-ft)}}q&&(U[0].style.transform=q),X&&(U[0].style.webkitTransform=X),n.roundLengths&&(D=Math.floor(D))}else D=(a-(n.slidesPerView-1)*A)/n.slidesPerView,n.roundLengths&&(D=Math.floor(D)),u[M]&&(u[M].style[e("width")]=`${D}px`);u[M]&&(u[M].swiperSlideSize=D),b.push(D),n.centeredSlides?(k=k+D/2+I/2+A,I===0&&M!==0&&(k=k-a/2-A),M===0&&(k=k-a/2-A),Math.abs(k)<1/1e3&&(k=0),n.roundLengths&&(k=Math.floor(k)),F%n.slidesPerGroup===0&&h.push(k),p.push(k)):(n.roundLengths&&(k=Math.floor(k)),(F-Math.min(t.params.slidesPerGroupSkip,F))%t.params.slidesPerGroup===0&&h.push(k),p.push(k),k=k+D+A),t.virtualSize+=D+A,I=D,F+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+v,s&&o&&(n.effect==="slide"||n.effect==="coverflow")&&i.css({width:`${t.virtualSize+n.spaceBetween}px`}),n.setWrapperSize&&i.css({[e("width")]:`${t.virtualSize+n.spaceBetween}px`}),j&&t.grid.updateWrapperSize(D,h,e),!n.centeredSlides){const M=[];for(let U=0;U<h.length;U+=1){let P=h[U];n.roundLengths&&(P=Math.floor(P)),h[U]<=t.virtualSize-a&&M.push(P)}h=M,Math.floor(t.virtualSize-a)-Math.floor(h[h.length-1])>1&&h.push(t.virtualSize-a)}if(h.length===0&&(h=[0]),n.spaceBetween!==0){const M=t.isHorizontal()&&s?"marginLeft":e("marginRight");u.filter((U,P)=>n.cssMode?P!==u.length-1:!0).css({[M]:`${A}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let M=0;b.forEach(P=>{M+=P+(n.spaceBetween?n.spaceBetween:0)}),M-=n.spaceBetween;const U=M-a;h=h.map(P=>P<0?-w:P>U?U+v:P)}if(n.centerInsufficientSlides){let M=0;if(b.forEach(U=>{M+=U+(n.spaceBetween?n.spaceBetween:0)}),M-=n.spaceBetween,M<a){const U=(a-M)/2;h.forEach((P,q)=>{h[q]=P-U}),p.forEach((P,q)=>{p[q]=P+U})}}if(Object.assign(t,{slides:u,snapGrid:h,slidesGrid:p,slidesSizesGrid:b}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Dd(t.wrapperEl,"--swiper-centered-offset-before",`${-h[0]}px`),Dd(t.wrapperEl,"--swiper-centered-offset-after",`${t.size/2-b[b.length-1]/2}px`);const M=-t.snapGrid[0],U=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(P=>P+M),t.slidesGrid=t.slidesGrid.map(P=>P+U)}if(d!==c&&t.emit("slidesLengthChange"),h.length!==T&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==E&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const M=`${n.containerModifierClass}backface-hidden`,U=t.$el.hasClass(M);d<=n.maxBackfaceHiddenSlides?U||t.$el.addClass(M):U&&t.$el.removeClass(M)}}function YV(t){const e=this,r=[],n=e.virtual&&e.params.virtual.enabled;let i=0,a;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const s=o=>n?e.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===o)[0]:e.slides.eq(o)[0];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||me([])).each(o=>{r.push(o)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const o=e.activeIndex+a;if(o>e.slides.length&&!n)break;r.push(s(o))}else r.push(s(e.activeIndex));for(a=0;a<r.length;a+=1)if(typeof r[a]!="undefined"){const o=r[a].offsetHeight;i=o>i?o:i}(i||i===0)&&e.$wrapperEl.css("height",`${i}px`)}function XV(){const t=this,e=t.slides;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop}function QV(t=this&&this.translate||0){const e=this,r=e.params,{slides:n,rtlTranslate:i,snapGrid:a}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset=="undefined"&&e.updateSlidesOffset();let s=-t;i&&(s=t),n.removeClass(r.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let o=0;o<n.length;o+=1){const l=n[o];let c=l.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(c-=n[0].swiperSlideOffset);const u=(s+(r.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+r.spaceBetween),d=(s-a[0]+(r.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+r.spaceBetween),h=-(s-c),p=h+e.slidesSizesGrid[o];(h>=0&&h<e.size-1||p>1&&p<=e.size||h<=0&&p>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(o),n.eq(o).addClass(r.slideVisibleClass)),l.progress=i?-u:u,l.originalProgress=i?-d:d}e.visibleSlides=me(e.visibleSlides)}function JV(t){const e=this;if(typeof t=="undefined"){const c=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*c||0}const r=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:a,isEnd:s}=e;const o=a,l=s;n===0?(i=0,a=!0,s=!0):(i=(t-e.minTranslate())/n,a=i<=0,s=i>=1),Object.assign(e,{progress:i,isBeginning:a,isEnd:s}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&e.updateSlidesProgress(t),a&&!o&&e.emit("reachBeginning toEdge"),s&&!l&&e.emit("reachEnd toEdge"),(o&&!a||l&&!s)&&e.emit("fromEdge"),e.emit("progress",i)}function ZV(){const t=this,{slides:e,params:r,$wrapperEl:n,activeIndex:i,realIndex:a}=t,s=t.virtual&&r.virtual.enabled;e.removeClass(`${r.slideActiveClass} ${r.slideNextClass} ${r.slidePrevClass} ${r.slideDuplicateActiveClass} ${r.slideDuplicateNextClass} ${r.slideDuplicatePrevClass}`);let o;s?o=t.$wrapperEl.find(`.${r.slideClass}[data-swiper-slide-index="${i}"]`):o=e.eq(i),o.addClass(r.slideActiveClass),r.loop&&(o.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${a}"]`).addClass(r.slideDuplicateActiveClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${a}"]`).addClass(r.slideDuplicateActiveClass));let l=o.nextAll(`.${r.slideClass}`).eq(0).addClass(r.slideNextClass);r.loop&&l.length===0&&(l=e.eq(0),l.addClass(r.slideNextClass));let c=o.prevAll(`.${r.slideClass}`).eq(0).addClass(r.slidePrevClass);r.loop&&c.length===0&&(c=e.eq(-1),c.addClass(r.slidePrevClass)),r.loop&&(l.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass),c.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()}function eH(t){const e=this,r=e.rtlTranslate?e.translate:-e.translate,{slidesGrid:n,snapGrid:i,params:a,activeIndex:s,realIndex:o,snapIndex:l}=e;let c=t,u;if(typeof c=="undefined"){for(let h=0;h<n.length;h+=1)typeof n[h+1]!="undefined"?r>=n[h]&&r<n[h+1]-(n[h+1]-n[h])/2?c=h:r>=n[h]&&r<n[h+1]&&(c=h+1):r>=n[h]&&(c=h);a.normalizeSlideIndex&&(c<0||typeof c=="undefined")&&(c=0)}if(i.indexOf(r)>=0)u=i.indexOf(r);else{const h=Math.min(a.slidesPerGroupSkip,c);u=h+Math.floor((c-h)/a.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),c===s){u!==l&&(e.snapIndex=u,e.emit("snapIndexChange"));return}const d=parseInt(e.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(e,{snapIndex:u,realIndex:d,previousIndex:s,activeIndex:c}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function tH(t){const e=this,r=e.params,n=me(t).closest(`.${r.slideClass}`)[0];let i=!1,a;if(n){for(let s=0;s<e.slides.length;s+=1)if(e.slides[s]===n){i=!0,a=s;break}}if(n&&i)e.clickedSlide=n,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(me(n).attr("data-swiper-slide-index"),10):e.clickedIndex=a;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}r.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var rH={updateSize:WV,updateSlides:KV,updateAutoHeight:YV,updateSlidesOffset:XV,updateSlidesProgress:QV,updateProgress:JV,updateSlidesClasses:ZV,updateActiveIndex:eH,updateClickedSlide:tH};function iH(t=this.isHorizontal()?"x":"y"){const e=this,{params:r,rtlTranslate:n,translate:i,$wrapperEl:a}=e;if(r.virtualTranslate)return n?-i:i;if(r.cssMode)return i;let s=jV(a[0],t);return n&&(s=-s),s||0}function nH(t,e){const r=this,{rtlTranslate:n,params:i,$wrapperEl:a,wrapperEl:s,progress:o}=r;let l=0,c=0;const u=0;r.isHorizontal()?l=n?-t:t:c=t,i.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),i.cssMode?s[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-l:-c:i.virtualTranslate||a.transform(`translate3d(${l}px, ${c}px, ${u}px)`),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?l:c;let d;const h=r.maxTranslate()-r.minTranslate();h===0?d=0:d=(t-r.minTranslate())/h,d!==o&&r.updateProgress(t),r.emit("setTranslate",r.translate,e)}function aH(){return-this.snapGrid[0]}function sH(){return-this.snapGrid[this.snapGrid.length-1]}function oH(t=0,e=this.params.speed,r=!0,n=!0,i){const a=this,{params:s,wrapperEl:o}=a;if(a.animating&&s.preventInteractionOnTransition)return!1;const l=a.minTranslate(),c=a.maxTranslate();let u;if(n&&t>l?u=l:n&&t<c?u=c:u=t,a.updateProgress(u),s.cssMode){const d=a.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!a.support.smoothScroll)return rI({swiper:a,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(u),r&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(u),r&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(h){!a||a.destroyed||h.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,r&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}var lH={getTranslate:iH,setTranslate:nH,minTranslate:aH,maxTranslate:sH,translateTo:oH};function cH(t,e){const r=this;r.params.cssMode||r.$wrapperEl.transition(t),r.emit("setTransition",t,e)}function nI({swiper:t,runCallbacks:e,direction:r,step:n}){const{activeIndex:i,previousIndex:a}=t;let s=r;if(s||(i>a?s="next":i<a?s="prev":s="reset"),t.emit(`transition${n}`),e&&i!==a){if(s==="reset"){t.emit(`slideResetTransition${n}`);return}t.emit(`slideChangeTransition${n}`),s==="next"?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`)}}function uH(t=!0,e){const r=this,{params:n}=r;n.cssMode||(n.autoHeight&&r.updateAutoHeight(),nI({swiper:r,runCallbacks:t,direction:e,step:"Start"}))}function dH(t=!0,e){const r=this,{params:n}=r;r.animating=!1,!n.cssMode&&(r.setTransition(0),nI({swiper:r,runCallbacks:t,direction:e,step:"End"}))}var hH={setTransition:cH,transitionStart:uH,transitionEnd:dH};function fH(t=0,e=this.params.speed,r=!0,n,i){if(typeof t!="number"&&typeof t!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof t}] given.`);if(typeof t=="string"){const A=parseInt(t,10);if(!isFinite(A))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=A}const a=this;let s=t;s<0&&(s=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:p,enabled:b}=a;if(a.animating&&o.preventInteractionOnTransition||!b&&!n&&!i)return!1;const w=Math.min(a.params.slidesPerGroupSkip,s);let v=w+Math.floor((s-w)/a.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const T=-l[v];if(o.normalizeSlideIndex)for(let A=0;A<c.length;A+=1){const k=-Math.floor(T*100),I=Math.floor(c[A]*100),F=Math.floor(c[A+1]*100);typeof c[A+1]!="undefined"?k>=I&&k<F-(F-I)/2?s=A:k>=I&&k<F&&(s=A+1):k>=I&&(s=A)}if(a.initialized&&s!==d&&(!a.allowSlideNext&&T<a.translate&&T<a.minTranslate()||!a.allowSlidePrev&&T>a.translate&&T>a.maxTranslate()&&(d||0)!==s))return!1;s!==(u||0)&&r&&a.emit("beforeSlideChangeStart"),a.updateProgress(T);let E;if(s>d?E="next":s<d?E="prev":E="reset",h&&-T===a.translate||!h&&T===a.translate)return a.updateActiveIndex(s),o.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),o.effect!=="slide"&&a.setTranslate(T),E!=="reset"&&(a.transitionStart(r,E),a.transitionEnd(r,E)),!1;if(o.cssMode){const A=a.isHorizontal(),k=h?T:-T;if(e===0){const I=a.virtual&&a.params.virtual.enabled;I&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),p[A?"scrollLeft":"scrollTop"]=k,I&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._swiperImmediateVirtual=!1})}else{if(!a.support.smoothScroll)return rI({swiper:a,targetPosition:k,side:A?"left":"top"}),!0;p.scrollTo({[A?"left":"top"]:k,behavior:"smooth"})}return!0}return a.setTransition(e),a.setTranslate(T),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,n),a.transitionStart(r,E),e===0?a.transitionEnd(r,E):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(k){!a||a.destroyed||k.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(r,E))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd)),!0}function pH(t=0,e=this.params.speed,r=!0,n){if(typeof t=="string"){const s=parseInt(t,10);if(!isFinite(s))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=s}const i=this;let a=t;return i.params.loop&&(a+=i.loopedSlides),i.slideTo(a,e,r,n)}function gH(t=this.params.speed,e=!0,r){const n=this,{animating:i,enabled:a,params:s}=n;if(!a)return n;let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<s.slidesPerGroupSkip?1:o;if(s.loop){if(i&&s.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}return s.rewind&&n.isEnd?n.slideTo(0,t,e,r):n.slideTo(n.activeIndex+l,t,e,r)}function mH(t=this.params.speed,e=!0,r){const n=this,{params:i,animating:a,snapGrid:s,slidesGrid:o,rtlTranslate:l,enabled:c}=n;if(!c)return n;if(i.loop){if(a&&i.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}const u=l?n.translate:-n.translate;function d(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}const h=d(u),p=s.map(v=>d(v));let b=s[p.indexOf(h)-1];if(typeof b=="undefined"&&i.cssMode){let v;s.forEach((T,E)=>{h>=T&&(v=E)}),typeof v!="undefined"&&(b=s[v>0?v-1:v])}let w=0;if(typeof b!="undefined"&&(w=o.indexOf(b),w<0&&(w=n.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(w=w-n.slidesPerViewDynamic("previous",!0)+1,w=Math.max(w,0))),i.rewind&&n.isBeginning){const v=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(v,t,e,r)}return n.slideTo(w,t,e,r)}function vH(t=this.params.speed,e=!0,r){const n=this;return n.slideTo(n.activeIndex,t,e,r)}function yH(t=this.params.speed,e=!0,r,n=.5){const i=this;let a=i.activeIndex;const s=Math.min(i.params.slidesPerGroupSkip,a),o=s+Math.floor((a-s)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[o]){const c=i.snapGrid[o],u=i.snapGrid[o+1];l-c>(u-c)*n&&(a+=i.params.slidesPerGroup)}else{const c=i.snapGrid[o-1],u=i.snapGrid[o];l-c<=(u-c)*n&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,t,e,r)}function bH(){const t=this,{params:e,$wrapperEl:r}=t,n=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,a;if(e.loop){if(t.animating)return;a=parseInt(me(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-n/2||i>t.slides.length-t.loopedSlides+n/2?(t.loopFix(),i=r.children(`.${e.slideClass}[data-swiper-slide-index="${a}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),Gc(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-n?(t.loopFix(),i=r.children(`.${e.slideClass}[data-swiper-slide-index="${a}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),Gc(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}var wH={slideTo:fH,slideToLoop:pH,slideNext:gH,slidePrev:mH,slideReset:vH,slideToClosest:yH,slideToClickedSlide:bH};function _H(){const t=this,e=er(),{params:r,$wrapperEl:n}=t,i=n.children().length>0?me(n.children()[0].parentNode):n;i.children(`.${r.slideClass}.${r.slideDuplicateClass}`).remove();let a=i.children(`.${r.slideClass}`);if(r.loopFillGroupWithBlank){const l=r.slidesPerGroup-a.length%r.slidesPerGroup;if(l!==r.slidesPerGroup){for(let c=0;c<l;c+=1){const u=me(e.createElement("div")).addClass(`${r.slideClass} ${r.slideBlankClass}`);i.append(u)}a=i.children(`.${r.slideClass}`)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=a.length),t.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),t.loopedSlides+=r.loopAdditionalSlides,t.loopedSlides>a.length&&t.params.loopedSlidesLimit&&(t.loopedSlides=a.length);const s=[],o=[];a.each((l,c)=>{me(l).attr("data-swiper-slide-index",c)});for(let l=0;l<t.loopedSlides;l+=1){const c=l-Math.floor(l/a.length)*a.length;o.push(a.eq(c)[0]),s.unshift(a.eq(a.length-c-1)[0])}for(let l=0;l<o.length;l+=1)i.append(me(o[l].cloneNode(!0)).addClass(r.slideDuplicateClass));for(let l=s.length-1;l>=0;l-=1)i.prepend(me(s[l].cloneNode(!0)).addClass(r.slideDuplicateClass))}function xH(){const t=this;t.emit("beforeLoopFix");const{activeIndex:e,slides:r,loopedSlides:n,allowSlidePrev:i,allowSlideNext:a,snapGrid:s,rtlTranslate:o}=t;let l;t.allowSlidePrev=!0,t.allowSlideNext=!0;const u=-s[e]-t.getTranslate();e<n?(l=r.length-n*3+e,l+=n,t.slideTo(l,0,!1,!0)&&u!==0&&t.setTranslate((o?-t.translate:t.translate)-u)):e>=r.length-n&&(l=-r.length+e+n,l+=n,t.slideTo(l,0,!1,!0)&&u!==0&&t.setTranslate((o?-t.translate:t.translate)-u)),t.allowSlidePrev=i,t.allowSlideNext=a,t.emit("loopFix")}function TH(){const t=this,{$wrapperEl:e,params:r,slides:n}=t;e.children(`.${r.slideClass}.${r.slideDuplicateClass},.${r.slideClass}.${r.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}var SH={loopCreate:_H,loopFix:xH,loopDestroy:TH};function EH(t){const e=this;if(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const r=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;r.style.cursor="move",r.style.cursor=t?"grabbing":"grab"}function kH(){const t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}var CH={setGrabCursor:EH,unsetGrabCursor:kH};function AH(t,e=this){function r(n){if(!n||n===er()||n===ar())return null;n.assignedSlot&&(n=n.assignedSlot);const i=n.closest(t);return!i&&!n.getRootNode?null:i||r(n.getRootNode().host)}return r(e)}function IH(t){const e=this,r=er(),n=ar(),i=e.touchEventsData,{params:a,touches:s,enabled:o}=e;if(!o||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let l=t;l.originalEvent&&(l=l.originalEvent);let c=me(l.target);if(a.touchEventsTarget==="wrapper"&&!c.closest(e.wrapperEl).length||(i.isTouchEvent=l.type==="touchstart",!i.isTouchEvent&&"which"in l&&l.which===3)||!i.isTouchEvent&&"button"in l&&l.button>0||i.isTouched&&i.isMoved)return;const u=!!a.noSwipingClass&&a.noSwipingClass!=="",d=t.composedPath?t.composedPath():t.path;u&&l.target&&l.target.shadowRoot&&d&&(c=me(d[0]));const h=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,p=!!(l.target&&l.target.shadowRoot);if(a.noSwiping&&(p?AH(h,c[0]):c.closest(h)[0])){e.allowClick=!0;return}if(a.swipeHandler&&!c.closest(a.swipeHandler)[0])return;s.currentX=l.type==="touchstart"?l.targetTouches[0].pageX:l.pageX,s.currentY=l.type==="touchstart"?l.targetTouches[0].pageY:l.pageY;const b=s.currentX,w=s.currentY,v=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,T=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(v&&(b<=T||b>=n.innerWidth-T))if(v==="prevent")t.preventDefault();else return;if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=b,s.startY=w,i.touchStartTime=Wc(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1),l.type!=="touchstart"){let E=!0;c.is(i.focusableElements)&&(E=!1,c[0].nodeName==="SELECT"&&(i.isTouched=!1)),r.activeElement&&me(r.activeElement).is(i.focusableElements)&&r.activeElement!==c[0]&&r.activeElement.blur();const A=E&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||A)&&!c[0].isContentEditable&&l.preventDefault()}e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function PH(t){const e=er(),r=this,n=r.touchEventsData,{params:i,touches:a,rtlTranslate:s,enabled:o}=r;if(!o)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!n.isTouched){n.startMoving&&n.isScrolling&&r.emit("touchMoveOpposite",l);return}if(n.isTouchEvent&&l.type!=="touchmove")return;const c=l.type==="touchmove"&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),u=l.type==="touchmove"?c.pageX:l.pageX,d=l.type==="touchmove"?c.pageY:l.pageY;if(l.preventedByNestedSwiper){a.startX=u,a.startY=d;return}if(!r.allowTouchMove){me(l.target).is(n.focusableElements)||(r.allowClick=!1),n.isTouched&&(Object.assign(a,{startX:u,startY:d,currentX:u,currentY:d}),n.touchStartTime=Wc());return}if(n.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop){if(r.isVertical()){if(d<a.startY&&r.translate<=r.maxTranslate()||d>a.startY&&r.translate>=r.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(u<a.startX&&r.translate<=r.maxTranslate()||u>a.startX&&r.translate>=r.minTranslate())return}if(n.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&me(l.target).is(n.focusableElements)){n.isMoved=!0,r.allowClick=!1;return}if(n.allowTouchCallbacks&&r.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;a.currentX=u,a.currentY=d;const h=a.currentX-a.startX,p=a.currentY-a.startY;if(r.params.threshold&&Math.sqrt(h**2+p**2)<r.params.threshold)return;if(typeof n.isScrolling=="undefined"){let T;r.isHorizontal()&&a.currentY===a.startY||r.isVertical()&&a.currentX===a.startX?n.isScrolling=!1:h*h+p*p>=25&&(T=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,n.isScrolling=r.isHorizontal()?T>i.touchAngle:90-T>i.touchAngle)}if(n.isScrolling&&r.emit("touchMoveOpposite",l),typeof n.startMoving=="undefined"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(n.startMoving=!0),n.isScrolling){n.isTouched=!1;return}if(!n.startMoving)return;r.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation(),n.isMoved||(i.loop&&!i.cssMode&&r.loopFix(),n.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,i.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",l)),r.emit("sliderMove",l),n.isMoved=!0;let b=r.isHorizontal()?h:p;a.diff=b,b*=i.touchRatio,s&&(b=-b),r.swipeDirection=b>0?"prev":"next",n.currentTranslate=b+n.startTranslate;let w=!0,v=i.resistanceRatio;if(i.touchReleaseOnEdges&&(v=0),b>0&&n.currentTranslate>r.minTranslate()?(w=!1,i.resistance&&(n.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+n.startTranslate+b)**v)):b<0&&n.currentTranslate<r.maxTranslate()&&(w=!1,i.resistance&&(n.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-n.startTranslate-b)**v)),w&&(l.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(n.currentTranslate=n.startTranslate),i.threshold>0)if(Math.abs(b)>i.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,n.currentTranslate=n.startTranslate,a.diff=r.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{n.currentTranslate=n.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&r.freeMode||i.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),r.params.freeMode&&i.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(n.currentTranslate),r.setTranslate(n.currentTranslate))}function OH(t){const e=this,r=e.touchEventsData,{params:n,touches:i,rtlTranslate:a,slidesGrid:s,enabled:o}=e;if(!o)return;let l=t;if(l.originalEvent&&(l=l.originalEvent),r.allowTouchCallbacks&&e.emit("touchEnd",l),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&n.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}n.grabCursor&&r.isMoved&&r.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=Wc(),u=c-r.touchStartTime;if(e.allowClick){const E=l.path||l.composedPath&&l.composedPath();e.updateClickedSlide(E&&E[0]||l.target),e.emit("tap click",l),u<300&&c-r.lastClickTime<300&&e.emit("doubleTap doubleClick",l)}if(r.lastClickTime=Wc(),Gc(()=>{e.destroyed||(e.allowClick=!0)}),!r.isTouched||!r.isMoved||!e.swipeDirection||i.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let d;if(n.followFinger?d=a?e.translate:-e.translate:d=-r.currentTranslate,n.cssMode)return;if(e.params.freeMode&&n.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:d});return}let h=0,p=e.slidesSizesGrid[0];for(let E=0;E<s.length;E+=E<n.slidesPerGroupSkip?1:n.slidesPerGroup){const A=E<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;typeof s[E+A]!="undefined"?d>=s[E]&&d<s[E+A]&&(h=E,p=s[E+A]-s[E]):d>=s[E]&&(h=E,p=s[s.length-1]-s[s.length-2])}let b=null,w=null;n.rewind&&(e.isBeginning?w=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(b=0));const v=(d-s[h])/p,T=h<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(u>n.longSwipesMs){if(!n.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(v>=n.longSwipesRatio?e.slideTo(n.rewind&&e.isEnd?b:h+T):e.slideTo(h)),e.swipeDirection==="prev"&&(v>1-n.longSwipesRatio?e.slideTo(h+T):w!==null&&v<0&&Math.abs(v)>n.longSwipesRatio?e.slideTo(w):e.slideTo(h))}else{if(!n.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(l.target===e.navigation.nextEl||l.target===e.navigation.prevEl)?l.target===e.navigation.nextEl?e.slideTo(h+T):e.slideTo(h):(e.swipeDirection==="next"&&e.slideTo(b!==null?b:h+T),e.swipeDirection==="prev"&&e.slideTo(w!==null?w:h))}}function lT(){const t=this,{params:e,el:r}=t;if(r&&r.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:i,snapGrid:a}=t;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=i,t.allowSlideNext=n,t.params.watchOverflow&&a!==t.snapGrid&&t.checkOverflow()}function DH(t){const e=this;!e.enabled||e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function LH(){const t=this,{wrapperEl:e,rtlTranslate:r,enabled:n}=t;if(!n)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const a=t.maxTranslate()-t.minTranslate();a===0?i=0:i=(t.translate-t.minTranslate())/a,i!==t.progress&&t.updateProgress(r?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}let cT=!1;function RH(){}const aI=(t,e)=>{const r=er(),{params:n,touchEvents:i,el:a,wrapperEl:s,device:o,support:l}=t,c=!!n.nested,u=e==="on"?"addEventListener":"removeEventListener",d=e;if(!l.touch)a[u](i.start,t.onTouchStart,!1),r[u](i.move,t.onTouchMove,c),r[u](i.end,t.onTouchEnd,!1);else{const h=i.start==="touchstart"&&l.passiveListener&&n.passiveListeners?{passive:!0,capture:!1}:!1;a[u](i.start,t.onTouchStart,h),a[u](i.move,t.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),a[u](i.end,t.onTouchEnd,h),i.cancel&&a[u](i.cancel,t.onTouchEnd,h)}(n.preventClicks||n.preventClicksPropagation)&&a[u]("click",t.onClick,!0),n.cssMode&&s[u]("scroll",t.onScroll),n.updateOnWindowResize?t[d](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",lT,!0):t[d]("observerUpdate",lT,!0)};function MH(){const t=this,e=er(),{params:r,support:n}=t;t.onTouchStart=IH.bind(t),t.onTouchMove=PH.bind(t),t.onTouchEnd=OH.bind(t),r.cssMode&&(t.onScroll=LH.bind(t)),t.onClick=DH.bind(t),n.touch&&!cT&&(e.addEventListener("touchstart",RH),cT=!0),aI(t,"on")}function NH(){aI(this,"off")}var jH={attachEvents:MH,detachEvents:NH};const uT=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function FH(){const t=this,{activeIndex:e,initialized:r,loopedSlides:n=0,params:i,$el:a}=t,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const c=(o in s?s[o]:void 0)||t.originalParams,u=uT(t,i),d=uT(t,c),h=i.enabled;u&&!d?(a.removeClass(`${i.containerModifierClass}grid ${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&d&&(a.addClass(`${i.containerModifierClass}grid`),(c.grid.fill&&c.grid.fill==="column"||!c.grid.fill&&i.grid.fill==="column")&&a.addClass(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(v=>{const T=i[v]&&i[v].enabled,E=c[v]&&c[v].enabled;T&&!E&&t[v].disable(),!T&&E&&t[v].enable()});const p=c.direction&&c.direction!==i.direction,b=i.loop&&(c.slidesPerView!==i.slidesPerView||p);p&&r&&t.changeDirection(),Zr(t.params,c);const w=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),h&&!w?t.disable():!h&&w&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",c),b&&r&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-n+t.loopedSlides,0,!1)),t.emit("breakpoint",c)}function BH(t,e="window",r){if(!t||e==="container"&&!r)return;let n=!1;const i=ar(),a=e==="window"?i.innerHeight:r.clientHeight,s=Object.keys(t).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:a*l,point:o}}return{value:o,point:o}});s.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<s.length;o+=1){const{point:l,value:c}=s[o];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(n=l):c<=r.clientWidth&&(n=l)}return n||"max"}var UH={setBreakpoint:FH,getBreakpoint:BH};function zH(t,e){const r=[];return t.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(i=>{n[i]&&r.push(e+i)}):typeof n=="string"&&r.push(e+n)}),r}function $H(){const t=this,{classNames:e,params:r,rtl:n,$el:i,device:a,support:s}=t,o=zH(["initialized",r.direction,{"pointer-events":!s.touch},{"free-mode":t.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:n},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides},{"watch-progress":r.watchSlidesProgress}],r.containerModifierClass);e.push(...o),i.addClass([...e].join(" ")),t.emitContainerClasses()}function VH(){const t=this,{$el:e,classNames:r}=t;e.removeClass(r.join(" ")),t.emitContainerClasses()}var HH={addClasses:$H,removeClasses:VH};function qH(t,e,r,n,i,a){const s=ar();let o;function l(){a&&a()}!me(t).parent("picture")[0]&&(!t.complete||!i)&&e?(o=new s.Image,o.onload=l,o.onerror=l,n&&(o.sizes=n),r&&(o.srcset=r),e&&(o.src=e)):l()}function GH(){const t=this;t.imagesToLoad=t.$el.find("img");function e(){typeof t=="undefined"||t===null||!t||t.destroyed||(t.imagesLoaded!==void 0&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}for(let r=0;r<t.imagesToLoad.length;r+=1){const n=t.imagesToLoad[r];t.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,e)}}var WH={loadImage:qH,preloadImages:GH};function KH(){const t=this,{isLocked:e,params:r}=t,{slidesOffsetBefore:n}=r;if(n){const i=t.slides.length-1,a=t.slidesGrid[i]+t.slidesSizesGrid[i]+n*2;t.isLocked=t.size>a}else t.isLocked=t.snapGrid.length===1;r.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),r.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var YH={checkOverflow:KH},dT={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function XH(t,e){return function(n={}){const i=Object.keys(n)[0],a=n[i];if(typeof a!="object"||a===null){Zr(e,n);return}if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&t[i]===!0&&(t[i]={auto:!0}),!(i in t&&"enabled"in a)){Zr(e,n);return}t[i]===!0&&(t[i]={enabled:!0}),typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),Zr(e,n)}}const Pg={eventsEmitter:GV,update:rH,translate:lH,transition:hH,slide:wH,loop:SH,grabCursor:CH,events:jH,breakpoints:UH,checkOverflow:YH,classes:HH,images:WH},Og={};class Dr{constructor(...e){let r,n;if(e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?n=e[0]:[r,n]=e,n||(n={}),n=Zr({},n),r&&!n.el&&(n.el=r),n.el&&me(n.el).length>1){const o=[];return me(n.el).each(l=>{const c=Zr({},n,{el:l});o.push(new Dr(c))}),o}const i=this;i.__swiper__=!0,i.support=iI(),i.device=zV({userAgent:n.userAgent}),i.browser=VV(),i.eventsListeners={},i.eventsAnyListeners=[],i.modules=[...i.__modules__],n.modules&&Array.isArray(n.modules)&&i.modules.push(...n.modules);const a={};i.modules.forEach(o=>{o({swiper:i,extendParams:XH(n,a),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),emit:i.emit.bind(i)})});const s=Zr({},dT,a);return i.params=Zr({},s,Og,n),i.originalParams=Zr({},i.params),i.passedParams=Zr({},n),i.params&&i.params.on&&Object.keys(i.params.on).forEach(o=>{i.on(o,i.params.on[o])}),i.params&&i.params.onAny&&i.onAny(i.params.onAny),i.$=me,Object.assign(i,{enabled:i.params.enabled,el:r,classNames:[],slides:me(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return i.params.direction==="horizontal"},isVertical(){return i.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEvents:function(){const l=["touchstart","touchmove","touchend","touchcancel"],c=["pointerdown","pointermove","pointerup"];return i.touchEventsTouch={start:l[0],move:l[1],end:l[2],cancel:l[3]},i.touchEventsDesktop={start:c[0],move:c[1],end:c[2]},i.support.touch||!i.params.simulateTouch?i.touchEventsTouch:i.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:Wc(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.emit("_swiper"),i.params.init&&i.init(),i}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;!e.enabled||(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,r){const n=this;e=Math.min(Math.max(e,0),1);const i=n.minTranslate(),s=(n.maxTranslate()-i)*e+i;n.translateTo(s,typeof r=="undefined"?0:r),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",r.join(" "))}getSlideClasses(e){const r=this;return r.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=[];e.slides.each(n=>{const i=e.getSlideClasses(n);r.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)}),e.emit("_slideClasses",r)}slidesPerViewDynamic(e="current",r=!1){const n=this,{params:i,slides:a,slidesGrid:s,slidesSizesGrid:o,size:l,activeIndex:c}=n;let u=1;if(i.centeredSlides){let d=a[c].swiperSlideSize,h;for(let p=c+1;p<a.length;p+=1)a[p]&&!h&&(d+=a[p].swiperSlideSize,u+=1,d>l&&(h=!0));for(let p=c-1;p>=0;p-=1)a[p]&&!h&&(d+=a[p].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<a.length;d+=1)(r?s[d]+o[d]-s[c]<l:s[d]-s[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)s[c]-s[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:r,params:n}=e;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const s=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(s,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let a;e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?a=e.slideTo(e.slides.length-1,0,!1,!0):a=e.slideTo(e.activeIndex,0,!1,!0),a||i()),n.watchOverflow&&r!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,r=!0){const n=this,i=n.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(n.$el.removeClass(`${n.params.containerModifierClass}${i}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each(a=>{e==="vertical"?a.style.width="":a.style.height=""}),n.emit("changeDirection"),r&&n.update()),n}changeLanguageDirection(e){const r=this;r.rtl&&e==="rtl"||!r.rtl&&e==="ltr"||(r.rtl=e==="rtl",r.rtlTranslate=r.params.direction==="horizontal"&&r.rtl,r.rtl?(r.$el.addClass(`${r.params.containerModifierClass}rtl`),r.el.dir="rtl"):(r.$el.removeClass(`${r.params.containerModifierClass}rtl`),r.el.dir="ltr"),r.update())}mount(e){const r=this;if(r.mounted)return!0;const n=me(e||r.params.el);if(e=n[0],!e)return!1;e.swiper=r;const i=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let s=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const o=me(e.shadowRoot.querySelector(i()));return o.children=l=>n.children(l),o}return n.children?n.children(i()):me(n).children(i())})();if(s.length===0&&r.params.createElements){const l=er().createElement("div");s=me(l),l.className=r.params.wrapperClass,n.append(l),n.children(`.${r.params.slideClass}`).each(c=>{s.append(c)})}return Object.assign(r,{$el:n,el:e,$wrapperEl:s,wrapperEl:s[0],mounted:!0,rtl:e.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(e.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl"),wrongRTL:s.css("display")==="-webkit-box"}),!0}init(e){const r=this;return r.initialized||r.mount(e)===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.params.loop&&r.loopCreate(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.preloadImages&&r.preloadImages(),r.params.loop?r.slideTo(r.params.initialSlide+r.loopedSlides,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.attachEvents(),r.initialized=!0,r.emit("init"),r.emit("afterInit")),r}destroy(e=!0,r=!0){const n=this,{params:i,$el:a,$wrapperEl:s,slides:o}=n;return typeof n.params=="undefined"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),r&&(n.removeClasses(),a.removeAttr("style"),s.removeAttr("style"),o&&o.length&&o.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(l=>{n.off(l)}),e!==!1&&(n.$el[0].swiper=null,MV(n)),n.destroyed=!0),null}static extendDefaults(e){Zr(Og,e)}static get extendedDefaults(){return Og}static get defaults(){return dT}static installModule(e){Dr.prototype.__modules__||(Dr.prototype.__modules__=[]);const r=Dr.prototype.__modules__;typeof e=="function"&&r.indexOf(e)<0&&r.push(e)}static use(e){return Array.isArray(e)?(e.forEach(r=>Dr.installModule(r)),Dr):(Dr.installModule(e),Dr)}}Object.keys(Pg).forEach(t=>{Object.keys(Pg[t]).forEach(e=>{Dr.prototype[e]=Pg[t][e]})});Dr.use([HV,qV]);function Oy(t,e,r,n){const i=er();return t.params.createElements&&Object.keys(n).forEach(a=>{if(!r[a]&&r.auto===!0){let s=t.$el.children(`.${n[a]}`)[0];s||(s=i.createElement("div"),s.className=n[a],t.$el.append(s)),r[a]=s,e[a]=s}}),r}function QH({swiper:t,extendParams:e,on:r,emit:n}){e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function i(p){let b;return p&&(b=me(p),t.params.uniqueNavElements&&typeof p=="string"&&b.length>1&&t.$el.find(p).length===1&&(b=t.$el.find(p))),b}function a(p,b){const w=t.params.navigation;p&&p.length>0&&(p[b?"addClass":"removeClass"](w.disabledClass),p[0]&&p[0].tagName==="BUTTON"&&(p[0].disabled=b),t.params.watchOverflow&&t.enabled&&p[t.isLocked?"addClass":"removeClass"](w.lockClass))}function s(){if(t.params.loop)return;const{$nextEl:p,$prevEl:b}=t.navigation;a(b,t.isBeginning&&!t.params.rewind),a(p,t.isEnd&&!t.params.rewind)}function o(p){p.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),n("navigationPrev"))}function l(p){p.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),n("navigationNext"))}function c(){const p=t.params.navigation;if(t.params.navigation=Oy(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(p.nextEl||p.prevEl))return;const b=i(p.nextEl),w=i(p.prevEl);b&&b.length>0&&b.on("click",l),w&&w.length>0&&w.on("click",o),Object.assign(t.navigation,{$nextEl:b,nextEl:b&&b[0],$prevEl:w,prevEl:w&&w[0]}),t.enabled||(b&&b.addClass(p.lockClass),w&&w.addClass(p.lockClass))}function u(){const{$nextEl:p,$prevEl:b}=t.navigation;p&&p.length&&(p.off("click",l),p.removeClass(t.params.navigation.disabledClass)),b&&b.length&&(b.off("click",o),b.removeClass(t.params.navigation.disabledClass))}r("init",()=>{t.params.navigation.enabled===!1?h():(c(),s())}),r("toEdge fromEdge lock unlock",()=>{s()}),r("destroy",()=>{u()}),r("enable disable",()=>{const{$nextEl:p,$prevEl:b}=t.navigation;p&&p[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),b&&b[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)}),r("click",(p,b)=>{const{$nextEl:w,$prevEl:v}=t.navigation,T=b.target;if(t.params.navigation.hideOnClick&&!me(T).is(v)&&!me(T).is(w)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===T||t.pagination.el.contains(T)))return;let E;w?E=w.hasClass(t.params.navigation.hiddenClass):v&&(E=v.hasClass(t.params.navigation.hiddenClass)),n(E===!0?"navigationShow":"navigationHide"),w&&w.toggleClass(t.params.navigation.hiddenClass),v&&v.toggleClass(t.params.navigation.hiddenClass)}});const d=()=>{t.$el.removeClass(t.params.navigation.navigationDisabledClass),c(),s()},h=()=>{t.$el.addClass(t.params.navigation.navigationDisabledClass),u()};Object.assign(t.navigation,{enable:d,disable:h,update:s,init:c,destroy:u})}function pn(t=""){return`.${t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function JH({swiper:t,extendParams:e,on:r,emit:n}){const i="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:w=>w,formatFractionTotal:w=>w,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),t.pagination={el:null,$el:null,bullets:[]};let a,s=0;function o(){return!t.params.pagination.el||!t.pagination.el||!t.pagination.$el||t.pagination.$el.length===0}function l(w,v){const{bulletActiveClass:T}=t.params.pagination;w[v]().addClass(`${T}-${v}`)[v]().addClass(`${T}-${v}-${v}`)}function c(){const w=t.rtl,v=t.params.pagination;if(o())return;const T=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,E=t.pagination.$el;let A;const k=t.params.loop?Math.ceil((T-t.loopedSlides*2)/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(A=Math.ceil((t.activeIndex-t.loopedSlides)/t.params.slidesPerGroup),A>T-1-t.loopedSlides*2&&(A-=T-t.loopedSlides*2),A>k-1&&(A-=k),A<0&&t.params.paginationType!=="bullets"&&(A=k+A)):typeof t.snapIndex!="undefined"?A=t.snapIndex:A=t.activeIndex||0,v.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const I=t.pagination.bullets;let F,j,D;if(v.dynamicBullets&&(a=I.eq(0)[t.isHorizontal()?"outerWidth":"outerHeight"](!0),E.css(t.isHorizontal()?"width":"height",`${a*(v.dynamicMainBullets+4)}px`),v.dynamicMainBullets>1&&t.previousIndex!==void 0&&(s+=A-(t.previousIndex-t.loopedSlides||0),s>v.dynamicMainBullets-1?s=v.dynamicMainBullets-1:s<0&&(s=0)),F=Math.max(A-s,0),j=F+(Math.min(I.length,v.dynamicMainBullets)-1),D=(j+F)/2),I.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(z=>`${v.bulletActiveClass}${z}`).join(" ")),E.length>1)I.each(z=>{const M=me(z),U=M.index();U===A&&M.addClass(v.bulletActiveClass),v.dynamicBullets&&(U>=F&&U<=j&&M.addClass(`${v.bulletActiveClass}-main`),U===F&&l(M,"prev"),U===j&&l(M,"next"))});else{const z=I.eq(A),M=z.index();if(z.addClass(v.bulletActiveClass),v.dynamicBullets){const U=I.eq(F),P=I.eq(j);for(let q=F;q<=j;q+=1)I.eq(q).addClass(`${v.bulletActiveClass}-main`);if(t.params.loop)if(M>=I.length){for(let q=v.dynamicMainBullets;q>=0;q-=1)I.eq(I.length-q).addClass(`${v.bulletActiveClass}-main`);I.eq(I.length-v.dynamicMainBullets-1).addClass(`${v.bulletActiveClass}-prev`)}else l(U,"prev"),l(P,"next");else l(U,"prev"),l(P,"next")}}if(v.dynamicBullets){const z=Math.min(I.length,v.dynamicMainBullets+4),M=(a*z-a)/2-D*a,U=w?"right":"left";I.css(t.isHorizontal()?U:"top",`${M}px`)}}if(v.type==="fraction"&&(E.find(pn(v.currentClass)).text(v.formatFractionCurrent(A+1)),E.find(pn(v.totalClass)).text(v.formatFractionTotal(k))),v.type==="progressbar"){let I;v.progressbarOpposite?I=t.isHorizontal()?"vertical":"horizontal":I=t.isHorizontal()?"horizontal":"vertical";const F=(A+1)/k;let j=1,D=1;I==="horizontal"?j=F:D=F,E.find(pn(v.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${j}) scaleY(${D})`).transition(t.params.speed)}v.type==="custom"&&v.renderCustom?(E.html(v.renderCustom(t,A+1,k)),n("paginationRender",E[0])):n("paginationUpdate",E[0]),t.params.watchOverflow&&t.enabled&&E[t.isLocked?"addClass":"removeClass"](v.lockClass)}function u(){const w=t.params.pagination;if(o())return;const v=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,T=t.pagination.$el;let E="";if(w.type==="bullets"){let A=t.params.loop?Math.ceil((v-t.loopedSlides*2)/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&!t.params.loop&&A>v&&(A=v);for(let k=0;k<A;k+=1)w.renderBullet?E+=w.renderBullet.call(t,k,w.bulletClass):E+=`<${w.bulletElement} class="${w.bulletClass}"></${w.bulletElement}>`;T.html(E),t.pagination.bullets=T.find(pn(w.bulletClass))}w.type==="fraction"&&(w.renderFraction?E=w.renderFraction.call(t,w.currentClass,w.totalClass):E=`<span class="${w.currentClass}"></span> / <span class="${w.totalClass}"></span>`,T.html(E)),w.type==="progressbar"&&(w.renderProgressbar?E=w.renderProgressbar.call(t,w.progressbarFillClass):E=`<span class="${w.progressbarFillClass}"></span>`,T.html(E)),w.type!=="custom"&&n("paginationRender",t.pagination.$el[0])}function d(){t.params.pagination=Oy(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const w=t.params.pagination;if(!w.el)return;let v=me(w.el);v.length!==0&&(t.params.uniqueNavElements&&typeof w.el=="string"&&v.length>1&&(v=t.$el.find(w.el),v.length>1&&(v=v.filter(T=>me(T).parents(".swiper")[0]===t.el))),w.type==="bullets"&&w.clickable&&v.addClass(w.clickableClass),v.addClass(w.modifierClass+w.type),v.addClass(t.isHorizontal()?w.horizontalClass:w.verticalClass),w.type==="bullets"&&w.dynamicBullets&&(v.addClass(`${w.modifierClass}${w.type}-dynamic`),s=0,w.dynamicMainBullets<1&&(w.dynamicMainBullets=1)),w.type==="progressbar"&&w.progressbarOpposite&&v.addClass(w.progressbarOppositeClass),w.clickable&&v.on("click",pn(w.bulletClass),function(E){E.preventDefault();let A=me(this).index()*t.params.slidesPerGroup;t.params.loop&&(A+=t.loopedSlides),t.slideTo(A)}),Object.assign(t.pagination,{$el:v,el:v[0]}),t.enabled||v.addClass(w.lockClass))}function h(){const w=t.params.pagination;if(o())return;const v=t.pagination.$el;v.removeClass(w.hiddenClass),v.removeClass(w.modifierClass+w.type),v.removeClass(t.isHorizontal()?w.horizontalClass:w.verticalClass),t.pagination.bullets&&t.pagination.bullets.removeClass&&t.pagination.bullets.removeClass(w.bulletActiveClass),w.clickable&&v.off("click",pn(w.bulletClass))}r("init",()=>{t.params.pagination.enabled===!1?b():(d(),u(),c())}),r("activeIndexChange",()=>{(t.params.loop||typeof t.snapIndex=="undefined")&&c()}),r("snapIndexChange",()=>{t.params.loop||c()}),r("slidesLengthChange",()=>{t.params.loop&&(u(),c())}),r("snapGridLengthChange",()=>{t.params.loop||(u(),c())}),r("destroy",()=>{h()}),r("enable disable",()=>{const{$el:w}=t.pagination;w&&w[t.enabled?"removeClass":"addClass"](t.params.pagination.lockClass)}),r("lock unlock",()=>{c()}),r("click",(w,v)=>{const T=v.target,{$el:E}=t.pagination;if(t.params.pagination.el&&t.params.pagination.hideOnClick&&E&&E.length>0&&!me(T).hasClass(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&T===t.navigation.nextEl||t.navigation.prevEl&&T===t.navigation.prevEl))return;const A=E.hasClass(t.params.pagination.hiddenClass);n(A===!0?"paginationShow":"paginationHide"),E.toggleClass(t.params.pagination.hiddenClass)}});const p=()=>{t.$el.removeClass(t.params.pagination.paginationDisabledClass),t.pagination.$el&&t.pagination.$el.removeClass(t.params.pagination.paginationDisabledClass),d(),u(),c()},b=()=>{t.$el.addClass(t.params.pagination.paginationDisabledClass),t.pagination.$el&&t.pagination.$el.addClass(t.params.pagination.paginationDisabledClass),h()};Object.assign(t.pagination,{enable:p,disable:b,render:u,update:c,init:d,destroy:h})}function ZH({swiper:t,extendParams:e,on:r,emit:n}){const i=er();let a=!1,s=null,o=null,l,c,u,d;e({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),t.scrollbar={el:null,dragEl:null,$el:null,$dragEl:null};function h(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:U,rtlTranslate:P,progress:q}=t,{$dragEl:X,$el:fe}=U,te=t.params.scrollbar;let ae=c,oe=(u-c)*q;P?(oe=-oe,oe>0?(ae=c-oe,oe=0):-oe+c>u&&(ae=u+oe)):oe<0?(ae=c+oe,oe=0):oe+c>u&&(ae=u-oe),t.isHorizontal()?(X.transform(`translate3d(${oe}px, 0, 0)`),X[0].style.width=`${ae}px`):(X.transform(`translate3d(0px, ${oe}px, 0)`),X[0].style.height=`${ae}px`),te.hide&&(clearTimeout(s),fe[0].style.opacity=1,s=setTimeout(()=>{fe[0].style.opacity=0,fe.transition(400)},1e3))}function p(U){!t.params.scrollbar.el||!t.scrollbar.el||t.scrollbar.$dragEl.transition(U)}function b(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:U}=t,{$dragEl:P,$el:q}=U;P[0].style.width="",P[0].style.height="",u=t.isHorizontal()?q[0].offsetWidth:q[0].offsetHeight,d=t.size/(t.virtualSize+t.params.slidesOffsetBefore-(t.params.centeredSlides?t.snapGrid[0]:0)),t.params.scrollbar.dragSize==="auto"?c=u*d:c=parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?P[0].style.width=`${c}px`:P[0].style.height=`${c}px`,d>=1?q[0].style.display="none":q[0].style.display="",t.params.scrollbar.hide&&(q[0].style.opacity=0),t.params.watchOverflow&&t.enabled&&U.$el[t.isLocked?"addClass":"removeClass"](t.params.scrollbar.lockClass)}function w(U){return t.isHorizontal()?U.type==="touchstart"||U.type==="touchmove"?U.targetTouches[0].clientX:U.clientX:U.type==="touchstart"||U.type==="touchmove"?U.targetTouches[0].clientY:U.clientY}function v(U){const{scrollbar:P,rtlTranslate:q}=t,{$el:X}=P;let fe;fe=(w(U)-X.offset()[t.isHorizontal()?"left":"top"]-(l!==null?l:c/2))/(u-c),fe=Math.max(Math.min(fe,1),0),q&&(fe=1-fe);const te=t.minTranslate()+(t.maxTranslate()-t.minTranslate())*fe;t.updateProgress(te),t.setTranslate(te),t.updateActiveIndex(),t.updateSlidesClasses()}function T(U){const P=t.params.scrollbar,{scrollbar:q,$wrapperEl:X}=t,{$el:fe,$dragEl:te}=q;a=!0,l=U.target===te[0]||U.target===te?w(U)-U.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,U.preventDefault(),U.stopPropagation(),X.transition(100),te.transition(100),v(U),clearTimeout(o),fe.transition(0),P.hide&&fe.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),n("scrollbarDragStart",U)}function E(U){const{scrollbar:P,$wrapperEl:q}=t,{$el:X,$dragEl:fe}=P;!a||(U.preventDefault?U.preventDefault():U.returnValue=!1,v(U),q.transition(0),X.transition(0),fe.transition(0),n("scrollbarDragMove",U))}function A(U){const P=t.params.scrollbar,{scrollbar:q,$wrapperEl:X}=t,{$el:fe}=q;!a||(a=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),X.transition("")),P.hide&&(clearTimeout(o),o=Gc(()=>{fe.css("opacity",0),fe.transition(400)},1e3)),n("scrollbarDragEnd",U),P.snapOnRelease&&t.slideToClosest())}function k(U){const{scrollbar:P,touchEventsTouch:q,touchEventsDesktop:X,params:fe,support:te}=t,ae=P.$el;if(!ae)return;const oe=ae[0],Re=te.passiveListener&&fe.passiveListeners?{passive:!1,capture:!1}:!1,Le=te.passiveListener&&fe.passiveListeners?{passive:!0,capture:!1}:!1;if(!oe)return;const ft=U==="on"?"addEventListener":"removeEventListener";te.touch?(oe[ft](q.start,T,Re),oe[ft](q.move,E,Re),oe[ft](q.end,A,Le)):(oe[ft](X.start,T,Re),i[ft](X.move,E,Re),i[ft](X.end,A,Le))}function I(){!t.params.scrollbar.el||!t.scrollbar.el||k("on")}function F(){!t.params.scrollbar.el||!t.scrollbar.el||k("off")}function j(){const{scrollbar:U,$el:P}=t;t.params.scrollbar=Oy(t,t.originalParams.scrollbar,t.params.scrollbar,{el:"swiper-scrollbar"});const q=t.params.scrollbar;if(!q.el)return;let X=me(q.el);t.params.uniqueNavElements&&typeof q.el=="string"&&X.length>1&&P.find(q.el).length===1&&(X=P.find(q.el)),X.addClass(t.isHorizontal()?q.horizontalClass:q.verticalClass);let fe=X.find(`.${t.params.scrollbar.dragClass}`);fe.length===0&&(fe=me(`<div class="${t.params.scrollbar.dragClass}"></div>`),X.append(fe)),Object.assign(U,{$el:X,el:X[0],$dragEl:fe,dragEl:fe[0]}),q.draggable&&I(),X&&X[t.enabled?"removeClass":"addClass"](t.params.scrollbar.lockClass)}function D(){const U=t.params.scrollbar,P=t.scrollbar.$el;P&&P.removeClass(t.isHorizontal()?U.horizontalClass:U.verticalClass),F()}r("init",()=>{t.params.scrollbar.enabled===!1?M():(j(),b(),h())}),r("update resize observerUpdate lock unlock",()=>{b()}),r("setTranslate",()=>{h()}),r("setTransition",(U,P)=>{p(P)}),r("enable disable",()=>{const{$el:U}=t.scrollbar;U&&U[t.enabled?"removeClass":"addClass"](t.params.scrollbar.lockClass)}),r("destroy",()=>{D()});const z=()=>{t.$el.removeClass(t.params.scrollbar.scrollbarDisabledClass),t.scrollbar.$el&&t.scrollbar.$el.removeClass(t.params.scrollbar.scrollbarDisabledClass),j(),b(),h()},M=()=>{t.$el.addClass(t.params.scrollbar.scrollbarDisabledClass),t.scrollbar.$el&&t.scrollbar.$el.addClass(t.params.scrollbar.scrollbarDisabledClass),D()};Object.assign(t.scrollbar,{enable:z,disable:M,updateSize:b,setTranslate:h,init:j,destroy:D})}function e7({swiper:t,extendParams:e,on:r}){e({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),t.a11y={clicked:!1};let n=null;function i(P){const q=n;q.length!==0&&(q.html(""),q.html(P))}function a(P=16){const q=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(P).replace(/x/g,q)}function s(P){P.attr("tabIndex","0")}function o(P){P.attr("tabIndex","-1")}function l(P,q){P.attr("role",q)}function c(P,q){P.attr("aria-roledescription",q)}function u(P,q){P.attr("aria-controls",q)}function d(P,q){P.attr("aria-label",q)}function h(P,q){P.attr("id",q)}function p(P,q){P.attr("aria-live",q)}function b(P){P.attr("aria-disabled",!0)}function w(P){P.attr("aria-disabled",!1)}function v(P){if(P.keyCode!==13&&P.keyCode!==32)return;const q=t.params.a11y,X=me(P.target);t.navigation&&t.navigation.$nextEl&&X.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?i(q.lastSlideMessage):i(q.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&X.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?i(q.firstSlideMessage):i(q.prevSlideMessage)),t.pagination&&X.is(pn(t.params.pagination.bulletClass))&&X[0].click()}function T(){if(t.params.loop||t.params.rewind||!t.navigation)return;const{$nextEl:P,$prevEl:q}=t.navigation;q&&q.length>0&&(t.isBeginning?(b(q),o(q)):(w(q),s(q))),P&&P.length>0&&(t.isEnd?(b(P),o(P)):(w(P),s(P)))}function E(){return t.pagination&&t.pagination.bullets&&t.pagination.bullets.length}function A(){return E()&&t.params.pagination.clickable}function k(){const P=t.params.a11y;!E()||t.pagination.bullets.each(q=>{const X=me(q);t.params.pagination.clickable&&(s(X),t.params.pagination.renderBullet||(l(X,"button"),d(X,P.paginationBulletMessage.replace(/\{\{index\}\}/,X.index()+1)))),X.is(`.${t.params.pagination.bulletActiveClass}`)?X.attr("aria-current","true"):X.removeAttr("aria-current")})}const I=(P,q,X)=>{s(P),P[0].tagName!=="BUTTON"&&(l(P,"button"),P.on("keydown",v)),d(P,X),u(P,q)},F=()=>{t.a11y.clicked=!0},j=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.destroyed||(t.a11y.clicked=!1)})})},D=P=>{if(t.a11y.clicked)return;const q=P.target.closest(`.${t.params.slideClass}`);if(!q||!t.slides.includes(q))return;const X=t.slides.indexOf(q)===t.activeIndex,fe=t.params.watchSlidesProgress&&t.visibleSlides&&t.visibleSlides.includes(q);X||fe||P.sourceCapabilities&&P.sourceCapabilities.firesTouchEvents||(t.isHorizontal()?t.el.scrollLeft=0:t.el.scrollTop=0,t.slideTo(t.slides.indexOf(q),0))},z=()=>{const P=t.params.a11y;P.itemRoleDescriptionMessage&&c(me(t.slides),P.itemRoleDescriptionMessage),P.slideRole&&l(me(t.slides),P.slideRole);const q=t.params.loop?t.slides.filter(X=>!X.classList.contains(t.params.slideDuplicateClass)).length:t.slides.length;P.slideLabelMessage&&t.slides.each((X,fe)=>{const te=me(X),ae=t.params.loop?parseInt(te.attr("data-swiper-slide-index"),10):fe,oe=P.slideLabelMessage.replace(/\{\{index\}\}/,ae+1).replace(/\{\{slidesLength\}\}/,q);d(te,oe)})},M=()=>{const P=t.params.a11y;t.$el.append(n);const q=t.$el;P.containerRoleDescriptionMessage&&c(q,P.containerRoleDescriptionMessage),P.containerMessage&&d(q,P.containerMessage);const X=t.$wrapperEl,fe=P.id||X.attr("id")||`swiper-wrapper-${a(16)}`,te=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite";h(X,fe),p(X,te),z();let ae,oe;t.navigation&&t.navigation.$nextEl&&(ae=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(oe=t.navigation.$prevEl),ae&&ae.length&&I(ae,fe,P.nextSlideMessage),oe&&oe.length&&I(oe,fe,P.prevSlideMessage),A()&&t.pagination.$el.on("keydown",pn(t.params.pagination.bulletClass),v),t.$el.on("focus",D,!0),t.$el.on("pointerdown",F,!0),t.$el.on("pointerup",j,!0)};function U(){n&&n.length>0&&n.remove();let P,q;t.navigation&&t.navigation.$nextEl&&(P=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(q=t.navigation.$prevEl),P&&P.off("keydown",v),q&&q.off("keydown",v),A()&&t.pagination.$el.off("keydown",pn(t.params.pagination.bulletClass),v),t.$el.off("focus",D,!0),t.$el.off("pointerdown",F,!0),t.$el.off("pointerup",j,!0)}r("beforeInit",()=>{n=me(`<span class="${t.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}),r("afterInit",()=>{!t.params.a11y.enabled||M()}),r("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{!t.params.a11y.enabled||z()}),r("fromEdge toEdge afterInit lock unlock",()=>{!t.params.a11y.enabled||T()}),r("paginationUpdate",()=>{!t.params.a11y.enabled||k()}),r("destroy",()=>{!t.params.a11y.enabled||U()})}function t7({swiper:t,extendParams:e,on:r,emit:n}){let i;t.autoplay={running:!1,paused:!1},e({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function a(){if(!t.size){t.autoplay.running=!1,t.autoplay.paused=!1;return}const w=t.slides.eq(t.activeIndex);let v=t.params.autoplay.delay;w.attr("data-swiper-autoplay")&&(v=w.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(i),i=Gc(()=>{let T;t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),T=t.slidePrev(t.params.speed,!0,!0),n("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?o():(T=t.slideTo(t.slides.length-1,t.params.speed,!0,!0),n("autoplay")):(T=t.slidePrev(t.params.speed,!0,!0),n("autoplay")):t.params.loop?(t.loopFix(),T=t.slideNext(t.params.speed,!0,!0),n("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?o():(T=t.slideTo(0,t.params.speed,!0,!0),n("autoplay")):(T=t.slideNext(t.params.speed,!0,!0),n("autoplay")),(t.params.cssMode&&t.autoplay.running||T===!1)&&a()},v)}function s(){return typeof i!="undefined"||t.autoplay.running?!1:(t.autoplay.running=!0,n("autoplayStart"),a(),!0)}function o(){return!t.autoplay.running||typeof i=="undefined"?!1:(i&&(clearTimeout(i),i=void 0),t.autoplay.running=!1,n("autoplayStop"),!0)}function l(w){!t.autoplay.running||t.autoplay.paused||(i&&clearTimeout(i),t.autoplay.paused=!0,w===0||!t.params.autoplay.waitForTransition?(t.autoplay.paused=!1,a()):["transitionend","webkitTransitionEnd"].forEach(v=>{t.$wrapperEl[0].addEventListener(v,u)}))}function c(){const w=er();w.visibilityState==="hidden"&&t.autoplay.running&&l(),w.visibilityState==="visible"&&t.autoplay.paused&&(a(),t.autoplay.paused=!1)}function u(w){!t||t.destroyed||!t.$wrapperEl||w.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(v=>{t.$wrapperEl[0].removeEventListener(v,u)}),t.autoplay.paused=!1,t.autoplay.running?a():o())}function d(){t.params.autoplay.disableOnInteraction?o():(n("autoplayPause"),l()),["transitionend","webkitTransitionEnd"].forEach(w=>{t.$wrapperEl[0].removeEventListener(w,u)})}function h(){t.params.autoplay.disableOnInteraction||(t.autoplay.paused=!1,n("autoplayResume"),a())}function p(){t.params.autoplay.pauseOnMouseEnter&&(t.$el.on("mouseenter",d),t.$el.on("mouseleave",h))}function b(){t.$el.off("mouseenter",d),t.$el.off("mouseleave",h)}r("init",()=>{t.params.autoplay.enabled&&(s(),er().addEventListener("visibilitychange",c),p())}),r("beforeTransitionStart",(w,v,T)=>{t.autoplay.running&&(T||!t.params.autoplay.disableOnInteraction?t.autoplay.pause(v):o())}),r("sliderFirstMove",()=>{t.autoplay.running&&(t.params.autoplay.disableOnInteraction?o():l())}),r("touchEnd",()=>{t.params.cssMode&&t.autoplay.paused&&!t.params.autoplay.disableOnInteraction&&a()}),r("destroy",()=>{b(),t.autoplay.running&&o(),er().removeEventListener("visibilitychange",c)}),Object.assign(t.autoplay,{pause:l,run:a,start:s,stop:o})}function Ss(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function la(t,e){const r=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>r.indexOf(n)<0).forEach(n=>{typeof t[n]=="undefined"?t[n]=e[n]:Ss(e[n])&&Ss(t[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?t[n]=e[n]:la(t[n],e[n]):t[n]=e[n]})}function sI(t={}){return t.navigation&&typeof t.navigation.nextEl=="undefined"&&typeof t.navigation.prevEl=="undefined"}function oI(t={}){return t.pagination&&typeof t.pagination.el=="undefined"}function lI(t={}){return t.scrollbar&&typeof t.scrollbar.el=="undefined"}function cI(t=""){const e=t.split(" ").map(n=>n.trim()).filter(n=>!!n),r=[];return e.forEach(n=>{r.indexOf(n)<0&&r.push(n)}),r.join(" ")}const uI=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function hT(t={},e=!0){const r={on:{}},n={},i={};la(r,Dr.defaults),la(r,Dr.extendedDefaults),r._emitClasses=!0,r.init=!1;const a={},s=uI.map(l=>l.replace(/_/,"")),o=Object.assign({},t);return Object.keys(o).forEach(l=>{typeof t[l]!="undefined"&&(s.indexOf(l)>=0?Ss(t[l])?(r[l]={},i[l]={},la(r[l],t[l]),la(i[l],t[l])):(r[l]=t[l],i[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?n[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:r.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:a[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{r[l]===!0&&(r[l]={}),r[l]===!1&&delete r[l]}),{params:r,passedParams:i,rest:a,events:n}}function r7({el:t,nextEl:e,prevEl:r,paginationEl:n,scrollbarEl:i,swiper:a},s){sI(s)&&e&&r&&(a.params.navigation.nextEl=e,a.originalParams.navigation.nextEl=e,a.params.navigation.prevEl=r,a.originalParams.navigation.prevEl=r),oI(s)&&n&&(a.params.pagination.el=n,a.originalParams.pagination.el=n),lI(s)&&i&&(a.params.scrollbar.el=i,a.originalParams.scrollbar.el=i),a.init(t)}const dI=(t,e)=>{let r=e.slidesPerView;if(e.breakpoints){const i=Dr.prototype.getBreakpoint(e.breakpoints),a=i in e.breakpoints?e.breakpoints[i]:void 0;a&&a.slidesPerView&&(r=a.slidesPerView)}let n=Math.ceil(parseFloat(e.loopedSlides||r,10));return n+=e.loopAdditionalSlides,n>t.length&&e.loopedSlidesLimit&&(n=t.length),n};function i7(t,e,r){const n=e.map((l,c)=>(l.props||(l.props={}),l.props.swiperRef=t,l.props["data-swiper-slide-index"]=c,l));function i(l,c,u){return l.props||(l.props={}),lt(l.type,{...l.props,key:`${l.key}-duplicate-${c}-${u}`,class:`${l.props.className||""} ${r.slideDuplicateClass} ${l.props.class||""}`},l.children)}if(r.loopFillGroupWithBlank){const l=r.slidesPerGroup-n.length%r.slidesPerGroup;if(l!==r.slidesPerGroup)for(let c=0;c<l;c+=1){const u=lt("div",{class:`${r.slideClass} ${r.slideBlankClass}`});n.push(u)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=n.length);const a=dI(n,r),s=[],o=[];for(let l=0;l<a;l+=1){const c=l-Math.floor(l/n.length)*n.length;o.push(i(n[c],l,"append")),s.unshift(i(n[n.length-c-1],l,"prepend"))}return t.value&&(t.value.loopedSlides=a),[...s,...n,...o]}function n7(t,e,r,n,i){const a=[];if(!e)return a;const s=l=>{a.indexOf(l)<0&&a.push(l)};if(r&&n){const l=n.map(i),c=r.map(i);l.join("")!==c.join("")&&s("children"),n.length!==r.length&&s("children")}return uI.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(Ss(t[l])&&Ss(e[l])){const c=Object.keys(t[l]),u=Object.keys(e[l]);c.length!==u.length?s(l):(c.forEach(d=>{t[l][d]!==e[l][d]&&s(l)}),u.forEach(d=>{t[l][d]!==e[l][d]&&s(l)}))}else t[l]!==e[l]&&s(l)}),a}function Dg(t,e,r){t===void 0&&(t={});const n=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},a=(s,o)=>{!Array.isArray(s)||s.forEach(l=>{const c=typeof l.type=="symbol";o==="default"&&(o="container-end"),c&&l.children?a(l.children,"default"):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?n.push(l):i[o]&&i[o].push(l)})};return Object.keys(t).forEach(s=>{if(typeof t[s]!="function")return;const o=t[s]();a(o,s)}),r.value=e.value,e.value=n,{slides:n,slots:i}}function a7({swiper:t,slides:e,passedParams:r,changedParams:n,nextEl:i,prevEl:a,scrollbarEl:s,paginationEl:o}){const l=n.filter(I=>I!=="children"&&I!=="direction"),{params:c,pagination:u,navigation:d,scrollbar:h,virtual:p,thumbs:b}=t;let w,v,T,E,A;n.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(w=!0),n.includes("controller")&&r.controller&&r.controller.control&&c.controller&&!c.controller.control&&(v=!0),n.includes("pagination")&&r.pagination&&(r.pagination.el||o)&&(c.pagination||c.pagination===!1)&&u&&!u.el&&(T=!0),n.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||s)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(E=!0),n.includes("navigation")&&r.navigation&&(r.navigation.prevEl||a)&&(r.navigation.nextEl||i)&&(c.navigation||c.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(A=!0);const k=I=>{!t[I]||(t[I].destroy(),I==="navigation"?(c[I].prevEl=void 0,c[I].nextEl=void 0,t[I].prevEl=void 0,t[I].nextEl=void 0):(c[I].el=void 0,t[I].el=void 0))};l.forEach(I=>{if(Ss(c[I])&&Ss(r[I]))la(c[I],r[I]);else{const F=r[I];(F===!0||F===!1)&&(I==="navigation"||I==="pagination"||I==="scrollbar")?F===!1&&k(I):c[I]=r[I]}}),l.includes("controller")&&!v&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),n.includes("children")&&e&&p&&c.virtual.enabled?(p.slides=e,p.update(!0)):n.includes("children")&&t.lazy&&t.params.lazy.enabled&&t.lazy.load(),w&&b.init()&&b.update(!0),v&&(t.controller.control=c.controller.control),T&&(o&&(c.pagination.el=o),u.init(),u.render(),u.update()),E&&(s&&(c.scrollbar.el=s),h.init(),h.updateSize(),h.setTranslate()),A&&(i&&(c.navigation.nextEl=i),a&&(c.navigation.prevEl=a),d.init(),d.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),n.includes("direction")&&t.changeDirection(r.direction,!1),t.update()}function s7(t,e,r){if(!r)return null;const n=t.value.isHorizontal()?{[t.value.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`};return e.filter((i,a)=>a>=r.from&&a<=r.to).map(i=>(i.props||(i.props={}),i.props.style||(i.props.style={}),i.props.swiperRef=t,i.props.style=n,lt(i.type,{...i.props},i.children)))}const o7=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())},l7={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:Number,default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},preloadImages:{type:Boolean,default:void 0},updateOnImagesReady:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopedSlides:{type:Number,default:void 0},loopedSlidesLimit:{type:Boolean,default:!0},loopFillGroupWithBlank:{type:Boolean,default:void 0},loopPreventsSlide:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideDuplicateActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideDuplicateClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slideDuplicateNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},slideDuplicatePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},lazy:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","imagesReady","init","keyPress","lazyImageLoad","lazyImageReady","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(t,e){let{slots:r,emit:n}=e;const{tag:i,wrapperTag:a}=t,s=mt("swiper"),o=mt(null),l=mt(!1),c=mt(!1),u=mt(null),d=mt(null),h=mt(null),p={value:[]},b={value:[]},w=mt(null),v=mt(null),T=mt(null),E=mt(null),{params:A,passedParams:k}=hT(t,!1);Dg(r,p,b),h.value=k,b.value=p.value;const I=()=>{Dg(r,p,b),l.value=!0};if(A.onAny=function(j){for(var D=arguments.length,z=new Array(D>1?D-1:0),M=1;M<D;M++)z[M-1]=arguments[M];n(j,...z)},Object.assign(A.on,{_beforeBreakpoint:I,_containerClasses(j,D){s.value=D}}),d.value=new Dr(A),d.value.loopCreate=()=>{},d.value.loopDestroy=()=>{},A.loop&&(d.value.loopedSlides=dI(p.value,A)),d.value.virtual&&d.value.params.virtual.enabled){d.value.virtual.slides=p.value;const j={cache:!1,slides:p.value,renderExternal:D=>{o.value=D},renderExternalUpdate:!1};la(d.value.params.virtual,j),la(d.value.originalParams.virtual,j)}i0(()=>{!c.value&&d.value&&(d.value.emitSlidesClasses(),c.value=!0);const{passedParams:j}=hT(t,!1),D=n7(j,h.value,p.value,b.value,z=>z.props&&z.props.key);h.value=j,(D.length||l.value)&&d.value&&!d.value.destroyed&&a7({swiper:d.value,slides:p.value,passedParams:j,changedParams:D,nextEl:w.value,prevEl:v.value,scrollbarEl:E.value,paginationEl:T.value}),l.value=!1}),Wi("swiper",d),os(o,()=>{t0(()=>{o7(d.value)})}),Is(()=>{!u.value||(r7({el:u.value,nextEl:w.value,prevEl:v.value,paginationEl:T.value,scrollbarEl:E.value,swiper:d.value},A),n("swiper",d.value))}),Df(()=>{d.value&&!d.value.destroyed&&d.value.destroy(!0,!1)});function F(j){return A.virtual?s7(d,j,o.value):!A.loop||d.value&&d.value.destroyed?(j.forEach(D=>{D.props||(D.props={}),D.props.swiperRef=d}),j):i7(d,j,A)}return()=>{const{slides:j,slots:D}=Dg(r,p,b);return lt(i,{ref:u,class:cI(s.value)},[D["container-start"],lt(a,{class:"swiper-wrapper"},[D["wrapper-start"],F(j),D["wrapper-end"]]),sI(t)&&[lt("div",{ref:v,class:"swiper-button-prev"}),lt("div",{ref:w,class:"swiper-button-next"})],lI(t)&&lt("div",{ref:E,class:"swiper-scrollbar"}),oI(t)&&lt("div",{ref:T,class:"swiper-pagination"}),D["container-end"]])}}},c7={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},zoom:{type:Boolean,default:void 0},virtualIndex:{type:[String,Number],default:void 0}},setup(t,e){let{slots:r}=e,n=!1;const{swiperRef:i}=t,a=mt(null),s=mt("swiper-slide");function o(c,u,d){u===a.value&&(s.value=d)}Is(()=>{!i||!i.value||(i.value.on("_slideClass",o),n=!0)}),NS(()=>{n||!i||!i.value||(i.value.on("_slideClass",o),n=!0)}),i0(()=>{!a.value||!i||!i.value||i.value.destroyed&&s.value!=="swiper-slide"&&(s.value="swiper-slide")}),Df(()=>{!i||!i.value||i.value.off("_slideClass",o)});const l=It(()=>({isActive:s.value.indexOf("swiper-slide-active")>=0||s.value.indexOf("swiper-slide-duplicate-active")>=0,isVisible:s.value.indexOf("swiper-slide-visible")>=0,isDuplicate:s.value.indexOf("swiper-slide-duplicate")>=0,isPrev:s.value.indexOf("swiper-slide-prev")>=0||s.value.indexOf("swiper-slide-duplicate-prev")>=0,isNext:s.value.indexOf("swiper-slide-next")>=0||s.value.indexOf("swiper-slide-duplicate-next")>=0}));return Wi("swiperSlide",l),()=>lt(t.tag,{class:cI(`${s.value}`),ref:a,"data-swiper-slide-index":t.virtualIndex},t.zoom?lt("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof t.zoom=="number"?t.zoom:void 0},r.default&&r.default(l.value)):r.default&&r.default(l.value))}};var Wh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function hI(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),e}var Kl;typeof window!="undefined"?Kl=window:typeof Wh!="undefined"?Kl=Wh:typeof self!="undefined"?Kl=self:Kl={};var L=Kl,u7={},d7=Object.freeze(Object.defineProperty({__proto__:null,default:u7},Symbol.toStringTag,{value:"Module"})),h7=hI(d7),fT=typeof Wh!="undefined"?Wh:typeof window!="undefined"?window:{},f7=h7,Yl;typeof document!="undefined"?Yl=document:(Yl=fT["__GLOBAL_DOCUMENT_CACHE@4"],Yl||(Yl=fT["__GLOBAL_DOCUMENT_CACHE@4"]=f7));var le=Yl;function vi(){return vi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vi.apply(this,arguments)}var p7=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"})),av={exports:{}};(function(t,e){function r(l){if(l&&typeof l=="object"){var c=l.which||l.keyCode||l.charCode;c&&(l=c)}if(typeof l=="number")return s[l];var u=String(l),d=n[u.toLowerCase()];if(d)return d;var d=i[u.toLowerCase()];if(d)return d;if(u.length===1)return u.charCodeAt(0)}r.isEventKey=function(c,u){if(c&&typeof c=="object"){var d=c.which||c.keyCode||c.charCode;if(d==null)return!1;if(typeof u=="string"){var h=n[u.toLowerCase()];if(h)return h===d;var h=i[u.toLowerCase()];if(h)return h===d}else if(typeof u=="number")return u===d;return!1}},e=t.exports=r;var n=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)n[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)n[a-48]=a;for(a=1;a<13;a++)n["f"+a]=a+111;for(a=0;a<10;a++)n["numpad "+a]=a+96;var s=e.names=e.title={};for(a in n)s[n[a]]=a;for(var o in i)n[o]=i[o]})(av,av.exports);var ze=av.exports;function Ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kc(t,e){return Kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Kc(t,e)}function ge(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Kc(t,e)}var g7=m7;function m7(t,e){var r,n=null;try{r=JSON.parse(t,e)}catch(i){n=i}return[n,r]}var Dy={exports:{}},v7=hI(p7),y7=w7,b7=Object.prototype.toString;function w7(t){if(!t)return!1;var e=b7.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window!="undefined"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}var _7=L,x7=function(e,r){return r===void 0&&(r=!1),function(n,i,a){if(n){e(n);return}if(i.statusCode>=400&&i.statusCode<=599){var s=a;if(r)if(_7.TextDecoder){var o=T7(i.headers&&i.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s});return}e(null,a)}};function T7(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,r){var n=r.split("="),i=n[0],a=n[1];return i.trim()==="charset"?a.trim():e},"utf-8")}var S7=x7,fI=L,E7=v7,k7=y7;Zi.httpHandler=S7;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var C7=function(e){var r={};return e&&e.trim().split(`
`).forEach(function(n){var i=n.indexOf(":"),a=n.slice(0,i).trim().toLowerCase(),s=n.slice(i+1).trim();typeof r[a]=="undefined"?r[a]=s:Array.isArray(r[a])?r[a].push(s):r[a]=[r[a],s]}),r};Dy.exports=Zi;Dy.exports.default=Zi;Zi.XMLHttpRequest=fI.XMLHttpRequest||O7;Zi.XDomainRequest="withCredentials"in new Zi.XMLHttpRequest?Zi.XMLHttpRequest:fI.XDomainRequest;A7(["get","put","post","patch","head","delete"],function(t){Zi[t==="delete"?"del":t]=function(e,r,n){return r=pI(e,r,n),r.method=t.toUpperCase(),gI(r)}});function A7(t,e){for(var r=0;r<t.length;r++)e(t[r])}function I7(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function pI(t,e,r){var n=t;return k7(e)?(r=e,typeof t=="string"&&(n={uri:t})):n=E7({},e,{uri:t}),n.callback=r,n}function Zi(t,e,r){return e=pI(t,e,r),gI(e)}function gI(t){if(typeof t.callback=="undefined")throw new Error("callback argument missing");var e=!1,r=function(A,k,I){e||(e=!0,t.callback(A,k,I))};function n(){o.readyState===4&&setTimeout(s,0)}function i(){var E=void 0;if(o.response?E=o.response:E=o.responseText||P7(o),w)try{E=JSON.parse(E)}catch{}return E}function a(E){return clearTimeout(v),E instanceof Error||(E=new Error(""+(E||"Unknown XMLHttpRequest Error"))),E.statusCode=0,r(E,T)}function s(){if(!c){var E;clearTimeout(v),t.useXDR&&o.status===void 0?E=200:E=o.status===1223?204:o.status;var A=T,k=null;return E!==0?(A={body:i(),statusCode:E,method:d,headers:{},url:u,rawRequest:o},o.getAllResponseHeaders&&(A.headers=C7(o.getAllResponseHeaders()))):k=new Error("Internal XMLHttpRequest Error"),r(k,A,A.body)}}var o=t.xhr||null;o||(t.cors||t.useXDR?o=new Zi.XDomainRequest:o=new Zi.XMLHttpRequest);var l,c,u=o.url=t.uri||t.url,d=o.method=t.method||"GET",h=t.body||t.data,p=o.headers=t.headers||{},b=!!t.sync,w=!1,v,T={body:void 0,headers:{},statusCode:0,method:d,url:u,rawRequest:o};if("json"in t&&t.json!==!1&&(w=!0,p.accept||p.Accept||(p.Accept="application/json"),d!=="GET"&&d!=="HEAD"&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(t.json===!0?h:t.json))),o.onreadystatechange=n,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){c=!0},o.ontimeout=a,o.open(d,u,!b,t.username,t.password),b||(o.withCredentials=!!t.withCredentials),!b&&t.timeout>0&&(v=setTimeout(function(){if(!c){c=!0,o.abort("timeout");var E=new Error("XMLHttpRequest timeout");E.code="ETIMEDOUT",a(E)}},t.timeout)),o.setRequestHeader)for(l in p)p.hasOwnProperty(l)&&o.setRequestHeader(l,p[l]);else if(t.headers&&!I7(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(o.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(o),o.send(h||null),o}function P7(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function O7(){}var mI=Dy.exports,vI={exports:{}},pT=le,Ly=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function ri(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}ri.prototype=Ly(Error.prototype);ri.prototype.constructor=ri;ri.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function Ry(t){function e(n,i,a,s){return(n|0)*3600+(i|0)*60+(a|0)+(s|0)/1e3}var r=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function gc(){this.values=Ly(null)}gc.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function Xl(t,e,r,n){var i=n?t.split(n):[t];for(var a in i)if(typeof i[a]=="string"){var s=i[a].split(r);if(s.length===2){var o=s[0].trim(),l=s[1].trim();e(o,l)}}}function D7(t,e,r){var n=t;function i(){var o=Ry(t);if(o===null)throw new ri(ri.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,l){var c=new gc;Xl(o,function(u,d){switch(u){case"region":for(var h=r.length-1;h>=0;h--)if(r[h].id===d){c.set(u,r[h].region);break}break;case"vertical":c.alt(u,d,["rl","lr"]);break;case"line":var p=d.split(","),b=p[0];c.integer(u,b),c.percent(u,b)&&c.set("snapToLines",!1),c.alt(u,b,["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start","center","end"]);break;case"position":p=d.split(","),c.percent(u,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start","center","end"]);break;case"size":c.percent(u,d);break;case"align":c.alt(u,d,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");try{l.line=c.get("line","auto")}catch{}l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100);try{l.align=c.get("align","center")}catch{l.align=c.get("align","middle")}try{l.position=c.get("position","auto")}catch{l.position=c.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=c.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),t.substr(0,3)!=="-->")throw new ri(ri.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.substr(3),s(),e.endTime=i(),s(),a(t,e)}var Lg=pT.createElement&&pT.createElement("textarea"),L7={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},gT={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},R7={v:"title",lang:"lang"},mT={rt:"ruby"};function yI(t,e){function r(){if(!e)return null;function b(v){return e=e.substr(v.length),v}var w=e.match(/^([^<]*)(<[^>]*>?)?/);return b(w[1]?w[1]:w[2])}function n(b){return Lg.innerHTML=b,b=Lg.textContent,Lg.textContent="",b}function i(b,w){return!mT[w.localName]||mT[w.localName]===b.localName}function a(b,w){var v=L7[b];if(!v)return null;var T=t.document.createElement(v),E=R7[b];return E&&w&&(T[E]=w.trim()),T}for(var s=t.document.createElement("div"),o=s,l,c=[];(l=r())!==null;){if(l[0]==="<"){if(l[1]==="/"){c.length&&c[c.length-1]===l.substr(2).replace(">","")&&(c.pop(),o=o.parentNode);continue}var u=Ry(l.substr(1,l.length-2)),d;if(u){d=t.document.createProcessingInstruction("timestamp",u),o.appendChild(d);continue}var h=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h||(d=a(h[1],h[3]),!d)||!i(o,d))continue;if(h[2]){var p=h[2].split(".");p.forEach(function(b){var w=/^bg_/.test(b),v=w?b.slice(3):b;if(gT.hasOwnProperty(v)){var T=w?"background-color":"color",E=gT[v];d.style[T]=E}}),d.className=p.join(" ")}c.push(h[1]),o.appendChild(d),o=d;continue}o.appendChild(t.document.createTextNode(n(l)))}return s}var vT=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function M7(t){for(var e=0;e<vT.length;e++){var r=vT[e];if(t>=r[0]&&t<=r[1])return!0}return!1}function N7(t){var e=[],r="",n;if(!t||!t.childNodes)return"ltr";function i(o,l){for(var c=l.childNodes.length-1;c>=0;c--)o.push(l.childNodes[c])}function a(o){if(!o||!o.length)return null;var l=o.pop(),c=l.textContent||l.innerText;if(c){var u=c.match(/^.*(\n|\r)/);return u?(o.length=0,u[0]):c}if(l.tagName==="ruby")return a(o);if(l.childNodes)return i(o,l),a(o)}for(i(e,t);r=a(e);)for(var s=0;s<r.length;s++)if(n=r.charCodeAt(s),M7(n))return"rtl";return"ltr"}function j7(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,r=e.textTrackList,n=0,i=0;i<r.length&&r[i]!==e;i++)r[i].mode==="showing"&&n++;return++n*-1}function yp(){}yp.prototype.applyStyles=function(t,e){e=e||this.div;for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])};yp.prototype.formatStyle=function(t,e){return t===0?0:t+e};function Kh(t,e,r){yp.call(this),this.cue=e,this.cueDiv=yI(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:N7(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var i=0;switch(e.positionAlign){case"start":i=e.position;break;case"center":i=e.position-e.size/2;break;case"end":i=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}Kh.prototype=Ly(yp.prototype);Kh.prototype.constructor=Kh;function Rr(t){var e,r,n,i;if(t.div){r=t.div.offsetHeight,n=t.div.offsetWidth,i=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||r,this.bottom=t.bottom||i+(t.height||r),this.width=t.width||n,this.lineHeight=e!==void 0?e:t.lineHeight}Rr.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Rr.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};Rr.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};Rr.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};Rr.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};Rr.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),r=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),n=e*r;return n/(this.height*this.width)};Rr.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};Rr.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,r=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var i={left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||r};return i};function F7(t,e,r,n){function i(v,T){for(var E,A=new Rr(v),k=1,I=0;I<T.length;I++){for(;v.overlapsOppositeAxis(r,T[I])||v.within(r)&&v.overlapsAny(n);)v.move(T[I]);if(v.within(r))return v;var F=v.intersectPercentage(r);k>F&&(E=new Rr(v),k=F),v=new Rr(A)}return E||A}var a=new Rr(e),s=e.cue,o=j7(s),l=[];if(s.snapToLines){var c;switch(s.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width";break}var u=a.lineHeight,d=u*Math.round(o),h=r[c]+u,p=l[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/u)*u),o<0&&(d+=s.vertical===""?r.height:r.width,l=l.reverse()),a.move(p,d)}else{var b=a.lineHeight/r.height*100;switch(s.lineAlign){case"center":o-=b/2;break;case"end":o-=b;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],a=new Rr(e)}var w=i(a,l);e.move(w.toCSSCompatValues(r))}function pl(){}pl.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};pl.convertCueToDOMTree=function(t,e){return!t||!e?null:yI(t,e)};var B7=.05,U7="sans-serif",z7="1.5%";pl.processCues=function(t,e,r){if(!t||!e||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=t.document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=z7,r.appendChild(n);function i(u){for(var d=0;d<u.length;d++)if(u[d].hasBeenReset||!u[d].displayState)return!0;return!1}if(!i(e)){for(var a=0;a<e.length;a++)n.appendChild(e[a].displayState);return}var s=[],o=Rr.getSimpleBoxPosition(n),l=Math.round(o.height*B7*100)/100,c={font:l+"px "+U7};(function(){for(var u,d,h=0;h<e.length;h++)d=e[h],u=new Kh(t,d,c),n.appendChild(u.div),F7(t,u,o,s),d.displayState=u.div,s.push(Rr.getSimpleBoxPosition(u))})()};pl.Parser=function(t,e,r){r||(r=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]};pl.Parser.prototype={reportOrThrowError:function(t){if(t instanceof ri)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function r(){for(var u=e.buffer,d=0;d<u.length&&u[d]!=="\r"&&u[d]!==`
`;)++d;var h=u.substr(0,d);return u[d]==="\r"&&++d,u[d]===`
`&&++d,e.buffer=u.substr(d),h}function n(u){var d=new gc;if(Xl(u,function(p,b){switch(p){case"id":d.set(p,b);break;case"width":d.percent(p,b);break;case"lines":d.integer(p,b);break;case"regionanchor":case"viewportanchor":var w=b.split(",");if(w.length!==2)break;var v=new gc;if(v.percent("x",w[0]),v.percent("y",w[1]),!v.has("x")||!v.has("y"))break;d.set(p+"X",v.get("x")),d.set(p+"Y",v.get("y"));break;case"scroll":d.alt(p,b,["up"]);break}},/=/,/\s/),d.has("id")){var h=new(e.vttjs.VTTRegion||e.window.VTTRegion);h.width=d.get("width",100),h.lines=d.get("lines",3),h.regionAnchorX=d.get("regionanchorX",0),h.regionAnchorY=d.get("regionanchorY",100),h.viewportAnchorX=d.get("viewportanchorX",0),h.viewportAnchorY=d.get("viewportanchorY",100),h.scroll=d.get("scroll",""),e.onregion&&e.onregion(h),e.regionList.push({id:d.get("id"),region:h})}}function i(u){var d=new gc;Xl(u,function(h,p){switch(h){case"MPEGT":d.integer(h+"S",p);break;case"LOCA":d.set(h+"L",Ry(p));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function a(u){u.match(/X-TIMESTAMP-MAP/)?Xl(u,function(d,h){switch(d){case"X-TIMESTAMP-MAP":i(h);break}},/=/):Xl(u,function(d,h){switch(d){case"Region":n(h);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=r();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new ri(ri.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:s=r(),e.state){case"HEADER":/:/.test(s)?a(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{D7(s,e.cue,e.regionList)}catch(u){e.reportOrThrowError(u),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var c=s.indexOf("-->")!==-1;if(!s||c&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(u){e.reportOrThrowError(u),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new ri(ri.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var $7=pl,V7="auto",H7={"":1,lr:1,rl:1},q7={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function G7(t){if(typeof t!="string")return!1;var e=H7[t.toLowerCase()];return e?t.toLowerCase():!1}function Rg(t){if(typeof t!="string")return!1;var e=q7[t.toLowerCase()];return e?t.toLowerCase():!1}function bI(t,e,r){this.hasBeenReset=!1;var n="",i=!1,a=t,s=e,o=r,l=null,c="",u=!0,d="auto",h="start",p="auto",b="auto",w=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(T){n=""+T}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(T){i=!!T}},startTime:{enumerable:!0,get:function(){return a},set:function(T){if(typeof T!="number")throw new TypeError("Start time must be set to a number.");a=T,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(T){if(typeof T!="number")throw new TypeError("End time must be set to a number.");s=T,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(T){o=""+T,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(T){l=T,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(T){var E=G7(T);if(E===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=E,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return u},set:function(T){u=!!T,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(T){if(typeof T!="number"&&T!==V7)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=T,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(T){var E=Rg(T);E?(h=E,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(T){if(T<0||T>100)throw new Error("Position must be between 0 and 100.");p=T,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return b},set:function(T){var E=Rg(T);E?(b=E,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return w},set:function(T){if(T<0||T>100)throw new Error("Size must be between 0 and 100.");w=T,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(T){var E=Rg(T);if(!E)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=E,this.hasBeenReset=!0}}}),this.displayState=void 0}bI.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var W7=bI,K7={"":!0,up:!0};function Y7(t){if(typeof t!="string")return!1;var e=K7[t.toLowerCase()];return e?t.toLowerCase():!1}function Ll(t){return typeof t=="number"&&t>=0&&t<=100}function X7(){var t=100,e=3,r=0,n=100,i=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(o){if(!Ll(o))throw new Error("Width must be between 0 and 100.");t=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!Ll(o))throw new Error("RegionAnchorX must be between 0 and 100.");n=o}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!Ll(o))throw new Error("RegionAnchorY must be between 0 and 100.");r=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!Ll(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!Ll(o))throw new Error("ViewportAnchorX must be between 0 and 100.");i=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var l=Y7(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=l}}})}var Q7=X7,Rn=L,Rs=vI.exports={WebVTT:$7,VTTCue:W7,VTTRegion:Q7};Rn.vttjs=Rs;Rn.WebVTT=Rs.WebVTT;var J7=Rs.VTTCue,Z7=Rs.VTTRegion,eq=Rn.VTTCue,tq=Rn.VTTRegion;Rs.shim=function(){Rn.VTTCue=J7,Rn.VTTRegion=Z7};Rs.restore=function(){Rn.VTTCue=eq,Rn.VTTRegion=tq};Rn.VTTCue||Rs.shim();var yT=vI.exports;function rq(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sh(t,e,r){return rq()?sh=Reflect.construct.bind():sh=function(i,a,s){var o=[null];o.push.apply(o,a);var l=Function.bind.apply(i,o),c=new l;return s&&Kc(c,s.prototype),c},sh.apply(null,arguments)}function iq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kc(t,e)}var wI={exports:{}};(function(t,e){(function(r){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):c;var p=o.parseURL(l);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var b=i.exec(p.path);p.netLoc=b[1],p.path=b[2]}p.netLoc&&!p.path&&(p.path="/");var w={scheme:p.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(w.netLoc=p.netLoc,h.path[0]!=="/"))if(!h.path)w.path=p.path,h.params||(w.params=p.params,h.query||(w.query=p.query));else{var v=p.path,T=v.substring(0,v.lastIndexOf("/")+1)+h.path;w.path=o.normalizePath(T)}return w.path===null&&(w.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(w)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(a,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=o})()})(wI);var bT=wI.exports,wT="http://example.com",bp=function(e,r){if(/^[a-z]+:/i.test(r))return r;/^data:/.test(e)&&(e=L.location&&L.location.href||"");var n=typeof L.URL=="function",i=/^\/\//.test(e),a=!L.location&&!/\/\//i.test(e);if(n?e=new L.URL(e,L.location||wT):/\/\//i.test(e)||(e=bT.buildAbsoluteURL(L.location&&L.location.href||"",e)),n){var s=new URL(r,e);return a?s.href.slice(wT.length):i?s.href.slice(s.protocol.length):s.href}return bT.buildAbsoluteURL(e,r)},My=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(n,i){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(i)},e.off=function(n,i){if(!this.listeners[n])return!1;var a=this.listeners[n].indexOf(i);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(a,1),a>-1},e.trigger=function(n){var i=this.listeners[n];if(!!i)if(arguments.length===2)for(var a=i.length,s=0;s<a;++s)i[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=i.length,c=0;c<l;++c)i[c].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(i){n.push(i)})},t}(),nq=function(e){return L.atob?L.atob(e):Buffer.from(e,"base64").toString("binary")};function _I(t){for(var e=nq(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}/*! @name m3u8-parser @version 4.7.1 @license Apache-2.0 */var aq=function(t){ge(e,t);function e(){var n;return n=t.call(this)||this,n.buffer="",n}var r=e.prototype;return r.push=function(i){var a;for(this.buffer+=i,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},e}(My),sq=String.fromCharCode(9),Mg=function(e){var r=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return r[1]&&(n.length=parseInt(r[1],10)),r[2]&&(n.offset=parseInt(r[2],10)),n},oq=function(){var e="[^=]*",r='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+r+")";return new RegExp("(?:^|,)("+n+")")},xi=function(e){for(var r=e.split(oq()),n={},i=r.length,a;i--;)r[i]!==""&&(a=/([^=]*)=(.*)/.exec(r[i]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),n[a[0]]=a[1]);return n},lq=function(t){ge(e,t);function e(){var n;return n=t.call(this)||this,n.customParsers=[],n.tagMappers=[],n}var r=e.prototype;return r.push=function(i){var a=this,s,o;if(i=i.trim(),i.length!==0){if(i[0]!=="#"){this.trigger("data",{type:"uri",uri:i});return}var l=this.tagMappers.reduce(function(c,u){var d=u(i);return d===i?c:c.concat([d])},[i]);l.forEach(function(c){for(var u=0;u<a.customParsers.length;u++)if(a.customParsers[u].call(a,c))return;if(c.indexOf("#EXT")!==0){a.trigger("data",{type:"comment",text:c.slice(1)});return}if(c=c.replace("\r",""),s=/^#EXTM3U/.exec(c),s){a.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(c),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),a.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(c),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),a.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(c),s){o=vi(Mg(s[1]),{type:"tag",tagType:"byterange"}),a.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(c),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(c),s){if(o={type:"tag",tagType:"map"},s[1]){var d=xi(s[1]);d.URI&&(o.uri=d.URI),d.BYTERANGE&&(o.byterange=Mg(d.BYTERANGE))}a.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(c),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=xi(s[1]),o.attributes.RESOLUTION){var h=o.attributes.RESOLUTION.split("x"),p={};h[0]&&(p.width=parseInt(h[0],10)),h[1]&&(p.height=parseInt(h[1],10)),o.attributes.RESOLUTION=p}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(c),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=xi(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(c),s){a.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(c),s){a.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(c),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(c),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=xi(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),a.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(c),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=xi(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(c),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=xi(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(sq)),a.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=xi(s[1]),["DURATION"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=parseFloat(o.attributes[b]))}),["INDEPENDENT","GAP"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=/YES/.test(o.attributes[b]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=Mg(o.attributes.BYTERANGE)),a.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=xi(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=parseFloat(o.attributes[b]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=/YES/.test(o.attributes[b]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=xi(s[1]),["PART-TARGET"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=parseFloat(o.attributes[b]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=xi(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(b){if(o.attributes.hasOwnProperty(b)){o.attributes[b]=parseInt(o.attributes[b],10);var w=b==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[w]=o.attributes[b],delete o.attributes[b]}}),a.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(c),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=xi(s[1]),["LAST-MSN","LAST-PART"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=parseInt(o.attributes[b],10))}),a.trigger("data",o);return}a.trigger("data",{type:"tag",data:c.slice(4)})})}},r.addParser=function(i){var a=this,s=i.expression,o=i.customType,l=i.dataParser,c=i.segment;typeof l!="function"&&(l=function(d){return d}),this.customParsers.push(function(u){var d=s.exec(u);if(d)return a.trigger("data",{type:"custom",data:l(u),customType:o,segment:c}),!0})},r.addTagMapper=function(i){var a=i.expression,s=i.map,o=function(c){return a.test(c)?s(c):c};this.tagMappers.push(o)},e}(My),cq=function(e){return e.toLowerCase().replace(/-(\w)/g,function(r){return r[1].toUpperCase()})},Vs=function(e){var r={};return Object.keys(e).forEach(function(n){r[cq(n)]=e[n]}),r},Ng=function(e){var r=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(!!r){var a="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",l=n&&n*3,c=i&&i*2;n&&!r.hasOwnProperty(s)&&(r[s]=l,this.trigger("info",{message:a+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&r[s]<l&&(this.trigger("warn",{message:a+" clamping HOLD-BACK ("+r[s]+") to targetDuration * 3 ("+l+")"}),r[s]=l),i&&!r.hasOwnProperty(o)&&(r[o]=i*3,this.trigger("info",{message:a+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+r[o]+")."})),i&&r[o]<c&&(this.trigger("warn",{message:a+" clamping PART-HOLD-BACK ("+r[o]+") to partTargetDuration * 2 ("+c+")."}),r[o]=c)}},uq=function(t){ge(e,t);function e(){var n;n=t.call(this)||this,n.lineStream=new aq,n.parseStream=new lq,n.lineStream.pipe(n.parseStream);var i=Ne(n),a=[],s={},o,l,c=!1,u=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",p=0;n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var b=0,w=0;return n.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&l&&(s.key=l),!s.timeline&&typeof p=="number"&&(s.timeline=p),n.manifest.preloadSegment=s)}),n.parseStream.on("data",function(v){var T,E;({tag:function(){({version:function(){v.version&&(this.manifest.version=v.version)},"allow-cache":function(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var I={};"length"in v&&(s.byterange=I,I.length=v.length,"offset"in v||(v.offset=b)),"offset"in v&&(s.byterange=I,I.offset=v.offset),b=I.offset+I.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),v.duration>0&&(s.duration=v.duration),v.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(!v.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(v.attributes.METHOD==="NONE"){l=null;return}if(!v.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(v.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:v.attributes};return}if(v.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:v.attributes.URI};return}if(v.attributes.KEYFORMAT===h){var I=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(I.indexOf(v.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(v.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),v.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(v.attributes.KEYID&&v.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:_I(v.attributes.URI.split(",")[1])};return}v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},typeof v.attributes.IV!="undefined"&&(l.iv=v.attributes.IV)},"media-sequence":function(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number});return}this.manifest.mediaSequence=v.number},"discontinuity-sequence":function(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number});return}this.manifest.discontinuitySequence=v.number,p=v.number},"playlist-type":function(){if(!/VOD|EVENT/.test(v.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist});return}this.manifest.playlistType=v.playlistType},map:function(){o={},v.uri&&(o.uri=v.uri),v.byterange&&(o.byterange=v.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||d,!v.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),vi(s.attributes,v.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,!(v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var I=this.manifest.mediaGroups[v.attributes.TYPE];I[v.attributes["GROUP-ID"]]=I[v.attributes["GROUP-ID"]]||{},T=I[v.attributes["GROUP-ID"]],E={default:/yes/i.test(v.attributes.DEFAULT)},E.default?E.autoselect=!0:E.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(E.language=v.attributes.LANGUAGE),v.attributes.URI&&(E.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(E.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(E.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(E.forced=/yes/i.test(v.attributes.FORCED)),T[v.attributes.NAME]=E},discontinuity:function(){p+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){typeof this.manifest.dateTimeString=="undefined"&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),s.dateTimeString=v.dateTimeString,s.dateTimeObject=v.dateTimeObject},targetduration:function(){if(!isFinite(v.duration)||v.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration});return}this.manifest.targetDuration=v.duration,Ng.call(this,this.manifest)},start:function(){if(!v.attributes||isNaN(v.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}},"cue-out":function(){s.cueOut=v.data},"cue-out-cont":function(){s.cueOutCont=v.data},"cue-in":function(){s.cueIn=v.data},skip:function(){this.manifest.skip=Vs(v.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",v.attributes,["SKIPPED-SEGMENTS"])},part:function(){var I=this;c=!0;var F=this.manifest.segments.length,j=Vs(v.attributes);s.parts=s.parts||[],s.parts.push(j),j.byterange&&(j.byterange.hasOwnProperty("offset")||(j.byterange.offset=w),w=j.byterange.offset+j.byterange.length);var D=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+D+" for segment #"+F,v.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(z,M){z.hasOwnProperty("lastPart")||I.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+M+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var I=this.manifest.serverControl=Vs(v.attributes);I.hasOwnProperty("canBlockReload")||(I.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Ng.call(this,this.manifest),I.canSkipDateranges&&!I.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var I=this.manifest.segments.length,F=Vs(v.attributes),j=F.type&&F.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(F),F.byterange&&(F.byterange.hasOwnProperty("offset")||(F.byterange.offset=j?w:0,j&&(w=F.byterange.offset+F.byterange.length)));var D=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+D+" for segment #"+I,v.attributes,["TYPE","URI"]),!!F.type)for(var z=0;z<s.preloadHints.length-1;z++){var M=s.preloadHints[z];!M.type||M.type===F.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+D+" for segment #"+I+" has the same TYPE "+F.type+" as preload hint #"+z})}},"rendition-report":function(){var I=Vs(v.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(I);var F=this.manifest.renditionReports.length-1,j=["LAST-MSN","URI"];c&&j.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+F,v.attributes,j)},"part-inf":function(){this.manifest.partInf=Vs(v.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",v.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Ng.call(this,this.manifest)}}[v.tagType]||u).call(i)},uri:function(){s.uri=v.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=p,o&&(s.map=o),w=0,s={}},comment:function(){},custom:function(){v.segment?(s.custom=s.custom||{},s.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(i)}),n}var r=e.prototype;return r.warnOnMissingAttributes_=function(i,a,s){var o=[];s.forEach(function(l){a.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+o.join(", ")})},r.push=function(i){this.lineStream.push(i)},r.end=function(){this.lineStream.push(`
`),this.trigger("end")},r.addParser=function(i){this.parseStream.addParser(i)},r.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e}(My),fs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},dq=["video","audio","text"],_T=["Video","Audio","Text"],xI=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(r,n,i){var a=("00"+Number(n).toString(16)).slice(-2),s=("00"+Number(i).toString(16)).slice(-2);return"avc1."+a+"00"+s})},Bi=function(e){e===void 0&&(e="");var r=e.split(","),n=[];return r.forEach(function(i){i=i.trim();var a;dq.forEach(function(s){var o=fs[s].exec(i.toLowerCase());if(!(!o||o.length<=1)){a=s;var l=i.substring(0,o[1].length),c=i.replace(l,"");n.push({type:l,details:c,mediaType:s})}}),a||n.push({type:i,details:"",mediaType:"unknown"})}),n},hq=function(e,r){if(!e.mediaGroups.AUDIO||!r)return null;var n=e.mediaGroups.AUDIO[r];if(!n)return null;for(var i in n){var a=n[i];if(a.default&&a.playlists)return Bi(a.playlists[0].attributes.CODECS)}return null},TI=function(e){return e===void 0&&(e=""),fs.audio.test(e.trim().toLowerCase())},fq=function(e){return e===void 0&&(e=""),fs.text.test(e.trim().toLowerCase())},Yc=function(e){if(!(!e||typeof e!="string")){var r=e.toLowerCase().split(",").map(function(a){return xI(a.trim())}),n="video";r.length===1&&TI(r[0])?n="audio":r.length===1&&fq(r[0])&&(n="application");var i="mp4";return r.every(function(a){return fs.mp4.test(a)})?i="mp4":r.every(function(a){return fs.webm.test(a)})?i="webm":r.every(function(a){return fs.ogg.test(a)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},oh=function(e){return e===void 0&&(e=""),L.MediaSource&&L.MediaSource.isTypeSupported&&L.MediaSource.isTypeSupported(Yc(e))||!1},jg=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(r){r=r.trim();for(var n=0;n<_T.length;n++){var i=_T[n];if(fs["muxer"+i].test(r))return!0}return!1})},xT="mp4a.40.2",pq="avc1.4d400d",gq=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,mq=/^application\/dash\+xml/i,SI=function(e){return gq.test(e)?"hls":mq.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},vq=function(e){return e.toString(2).length},yq=function(e){return Math.ceil(vq(e)/8)},EI=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},bq=function(e){return EI(e)},Ie=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!bq(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},or=L.BigInt||Number,sv=[or("0x1"),or("0x100"),or("0x10000"),or("0x1000000"),or("0x100000000"),or("0x10000000000"),or("0x1000000000000"),or("0x100000000000000"),or("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var wq=function(e,r){var n=r===void 0?{}:r,i=n.signed,a=i===void 0?!1:i,s=n.le,o=s===void 0?!1:s;e=Ie(e);var l=o?"reduce":"reduceRight",c=e[l]?e[l]:Array.prototype[l],u=c.call(e,function(h,p,b){var w=o?b:Math.abs(b+1-e.length);return h+or(p)*sv[w]},or(0));if(a){var d=sv[e.length]/or(2)-or(1);u=or(u),u>d&&(u-=d,u-=d,u-=or(2))}return Number(u)},_q=function(e,r){var n=r===void 0?{}:r,i=n.le,a=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=or(e);for(var s=yq(e),o=new Uint8Array(new ArrayBuffer(s)),l=0;l<s;l++){var c=a?l:Math.abs(l+1-o.length);o[c]=Number(e/sv[l]&or(255)),e<0&&(o[c]=Math.abs(~o[c]),o[c]-=l===0?1:2)}return o},kI=function(e,r){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;r||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},xq=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r=r.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),r.length<=1)return Ie(r[0]);var i=r.reduce(function(o,l,c){return o+(l.byteLength||l.length)},0),a=new Uint8Array(i),s=0;return r.forEach(function(o){o=Ie(o),a.set(o,s),s+=o.byteLength}),a},kt=function(e,r,n){var i=n===void 0?{}:n,a=i.offset,s=a===void 0?0:a,o=i.mask,l=o===void 0?[]:o;e=Ie(e),r=Ie(r);var c=r.every?r.every:Array.prototype.every;return r.length&&e.length-s>=r.length&&c.call(r,function(u,d){var h=l[d]?l[d]&e[s+d]:e[s+d];return u===h})},Tq=function(e,r,n){r.forEach(function(i){for(var a in e.mediaGroups[i])for(var s in e.mediaGroups[i][a]){var o=e.mediaGroups[i][a][s];n(o,i,a,s)}})},Ia={},Pa={};function Sq(t,e,r){if(r===void 0&&(r=Array.prototype),t&&typeof r.find=="function")return r.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];if(e.call(void 0,i,n,t))return i}}function Ny(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}var CI=Ny({HTML:"text/html",isHTML:function(t){return t===CI.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),AI=Ny({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===AI.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Pa.find=Sq;Pa.freeze=Ny;Pa.MIME_TYPE=CI;Pa.NAMESPACE=AI;var II=Pa,en=II.find,Xc=II.NAMESPACE;function Eq(t){return t!==""}function kq(t){return t?t.split(/[\t\n\f\r ]+/).filter(Eq):[]}function Cq(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function TT(t){if(!t)return[];var e=kq(t);return Object.keys(e.reduce(Cq,{}))}function Aq(t){return function(e){return t&&t.indexOf(e)!==-1}}function Ou(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function Kr(t,e){var r=t.prototype;if(!(r instanceof e)){let n=function(){};n.prototype=e.prototype,n=new n,Ou(r,n),t.prototype=r=n}r.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),r.constructor=t)}var Yr={},Ii=Yr.ELEMENT_NODE=1,No=Yr.ATTRIBUTE_NODE=2,Yh=Yr.TEXT_NODE=3,PI=Yr.CDATA_SECTION_NODE=4,OI=Yr.ENTITY_REFERENCE_NODE=5,Iq=Yr.ENTITY_NODE=6,DI=Yr.PROCESSING_INSTRUCTION_NODE=7,LI=Yr.COMMENT_NODE=8,RI=Yr.DOCUMENT_NODE=9,MI=Yr.DOCUMENT_TYPE_NODE=10,Mn=Yr.DOCUMENT_FRAGMENT_NODE=11,Pq=Yr.NOTATION_NODE=12,Sr={},ir={};Sr.INDEX_SIZE_ERR=(ir[1]="Index size error",1);Sr.DOMSTRING_SIZE_ERR=(ir[2]="DOMString size error",2);var $r=Sr.HIERARCHY_REQUEST_ERR=(ir[3]="Hierarchy request error",3);Sr.WRONG_DOCUMENT_ERR=(ir[4]="Wrong document",4);Sr.INVALID_CHARACTER_ERR=(ir[5]="Invalid character",5);Sr.NO_DATA_ALLOWED_ERR=(ir[6]="No data allowed",6);Sr.NO_MODIFICATION_ALLOWED_ERR=(ir[7]="No modification allowed",7);var NI=Sr.NOT_FOUND_ERR=(ir[8]="Not found",8);Sr.NOT_SUPPORTED_ERR=(ir[9]="Not supported",9);var ST=Sr.INUSE_ATTRIBUTE_ERR=(ir[10]="Attribute in use",10);Sr.INVALID_STATE_ERR=(ir[11]="Invalid state",11);Sr.SYNTAX_ERR=(ir[12]="Syntax error",12);Sr.INVALID_MODIFICATION_ERR=(ir[13]="Invalid modification",13);Sr.NAMESPACE_ERR=(ir[14]="Invalid namespace",14);Sr.INVALID_ACCESS_ERR=(ir[15]="Invalid access",15);function Ft(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,ir[t]),this.message=ir[t],Error.captureStackTrace&&Error.captureStackTrace(this,Ft);return r.code=t,e&&(this.message=this.message+": "+e),r}Ft.prototype=Error.prototype;Ou(Sr,Ft);function Sn(){}Sn.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)ao(this[n],r,t,e);return r.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function jo(t,e){this._node=t,this._refresh=e,jy(this)}function jy(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var r=t._refresh(t._node);KI(t,"length",r.length),Ou(r,t),t._inc=e}}jo.prototype.item=function(t){return jy(this),this[t]};Kr(jo,Sn);function Xh(){}function jI(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function ET(t,e,r,n){if(n?e[jI(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var i=t.ownerDocument;i&&(n&&UI(i,t,n),Oq(i,t,r))}}function kT(t,e,r){var n=jI(e,r);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,t){var a=t.ownerDocument;a&&(UI(a,t,r),r.ownerElement=null)}}else throw new Ft(NI,new Error(t.tagName+"@"+r))}Xh.prototype={length:0,item:Sn.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Ft(ST);var r=this.getNamedItem(t.nodeName);return ET(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e=t.ownerElement,r;if(e&&e!=this._ownerElement)throw new Ft(ST);return r=this.getNamedItemNS(t.namespaceURI,t.localName),ET(this._ownerElement,this,t,r),r},removeNamedItem:function(t){var e=this.getNamedItem(t);return kT(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return kT(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function FI(){}FI.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var n=new Du;if(n.implementation=this,n.childNodes=new Sn,n.doctype=r||null,r&&n.appendChild(r),e){var i=n.createElementNS(t,e);n.appendChild(i)}return n},createDocumentType:function(t,e,r){var n=new wp;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=r||"",n}};function dt(){}dt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Qh(this,t,e)},replaceChild:function(t,e){Qh(this,t,e,$I),e&&this.removeChild(e)},removeChild:function(t){return zI(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return ov(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==Yh&&t.nodeType==Yh?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t)return n}e=e.nodeType==No?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&t in r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];e=e.nodeType==No?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function BI(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Ou(Yr,dt);Ou(Yr,dt.prototype);function Qc(t,e){if(e(t))return!0;if(t=t.firstChild)do if(Qc(t,e))return!0;while(t=t.nextSibling)}function Du(){this.ownerDocument=this}function Oq(t,e,r){t&&t._inc++;var n=r.namespaceURI;n===Xc.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function UI(t,e,r,n){t&&t._inc++;var i=r.namespaceURI;i===Xc.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function Fy(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var i=e.firstChild,a=0;i;)n[a++]=i,i=i.nextSibling;n.length=a,delete n[n.length]}}}function zI(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Fy(t.ownerDocument,t),e}function Dq(t){return t&&(t.nodeType===dt.DOCUMENT_NODE||t.nodeType===dt.DOCUMENT_FRAGMENT_NODE||t.nodeType===dt.ELEMENT_NODE)}function Lq(t){return t&&(tn(t)||By(t)||Nn(t)||t.nodeType===dt.DOCUMENT_FRAGMENT_NODE||t.nodeType===dt.COMMENT_NODE||t.nodeType===dt.PROCESSING_INSTRUCTION_NODE)}function Nn(t){return t&&t.nodeType===dt.DOCUMENT_TYPE_NODE}function tn(t){return t&&t.nodeType===dt.ELEMENT_NODE}function By(t){return t&&t.nodeType===dt.TEXT_NODE}function CT(t,e){var r=t.childNodes||[];if(en(r,tn)||Nn(e))return!1;var n=en(r,Nn);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function AT(t,e){var r=t.childNodes||[];function n(a){return tn(a)&&a!==e}if(en(r,n))return!1;var i=en(r,Nn);return!(e&&i&&r.indexOf(i)>r.indexOf(e))}function Rq(t,e,r){if(!Dq(t))throw new Ft($r,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new Ft(NI,"child not in parent");if(!Lq(e)||Nn(e)&&t.nodeType!==dt.DOCUMENT_NODE)throw new Ft($r,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function Mq(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===dt.DOCUMENT_FRAGMENT_NODE){var a=i.filter(tn);if(a.length>1||en(i,By))throw new Ft($r,"More than one element or text in fragment");if(a.length===1&&!CT(t,r))throw new Ft($r,"Element in fragment can not be inserted before doctype")}if(tn(e)&&!CT(t,r))throw new Ft($r,"Only one element can be added and only after doctype");if(Nn(e)){if(en(n,Nn))throw new Ft($r,"Only one doctype is allowed");var s=en(n,tn);if(r&&n.indexOf(s)<n.indexOf(r))throw new Ft($r,"Doctype can only be inserted before an element");if(!r&&s)throw new Ft($r,"Doctype can not be appended since element is present")}}function $I(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===dt.DOCUMENT_FRAGMENT_NODE){var a=i.filter(tn);if(a.length>1||en(i,By))throw new Ft($r,"More than one element or text in fragment");if(a.length===1&&!AT(t,r))throw new Ft($r,"Element in fragment can not be inserted before doctype")}if(tn(e)&&!AT(t,r))throw new Ft($r,"Only one element can be added and only after doctype");if(Nn(e)){if(en(n,function(l){return Nn(l)&&l!==r}))throw new Ft($r,"Only one doctype is allowed");var s=en(n,tn);if(r&&n.indexOf(s)<n.indexOf(r))throw new Ft($r,"Doctype can only be inserted before an element")}}function Qh(t,e,r,n){Rq(t,e,r),t.nodeType===dt.DOCUMENT_NODE&&(n||Mq)(t,e,r);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===Mn){var a=e.firstChild;if(a==null)return e;var s=e.lastChild}else a=s=e;var o=r?r.previousSibling:t.lastChild;a.previousSibling=o,s.nextSibling=r,o?o.nextSibling=a:t.firstChild=a,r==null?t.lastChild=s:r.previousSibling=s;do a.parentNode=t;while(a!==s&&(a=a.nextSibling));return Fy(t.ownerDocument||t,t),e.nodeType==Mn&&(e.firstChild=e.lastChild=null),e}function Nq(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,Fy(t.ownerDocument,t,e),e}Du.prototype={nodeName:"#document",nodeType:RI,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==Mn){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return Qh(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Ii&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),zI(this,t)},replaceChild:function(t,e){Qh(this,t,e,$I),t.ownerDocument=this,e&&this.removeChild(e),tn(t)&&(this.documentElement=t)},importNode:function(t,e){return WI(this,t,e)},getElementById:function(t){var e=null;return Qc(this.documentElement,function(r){if(r.nodeType==Ii&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=TT(t);return new jo(this,function(r){var n=[];return e.length>0&&Qc(r.documentElement,function(i){if(i!==r&&i.nodeType===Ii){var a=i.getAttribute("class");if(a){var s=t===a;if(!s){var o=TT(a);s=e.every(Aq(o))}s&&n.push(i)}}}),n})},createElement:function(t){var e=new Es;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Sn;var r=e.attributes=new Xh;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new _p;return t.ownerDocument=this,t.childNodes=new Sn,t},createTextNode:function(t){var e=new Uy;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new zy;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new $y;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new Hy;return r.ownerDocument=this,r.tagName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new Jh;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Vy;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new Es,n=e.split(":"),i=r.attributes=new Xh;return r.childNodes=new Sn,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,i._ownerElement=r,r},createAttributeNS:function(t,e){var r=new Jh,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}};Kr(Du,dt);function Es(){this._nsMap={}}Es.prototype={nodeType:Ii,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===Mn?this.insertBefore(t,null):Nq(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new jo(this,function(e){var r=[];return Qc(e,function(n){n!==e&&n.nodeType==Ii&&(t==="*"||n.tagName==t)&&r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new jo(this,function(r){var n=[];return Qc(r,function(i){i!==r&&i.nodeType===Ii&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};Du.prototype.getElementsByTagName=Es.prototype.getElementsByTagName;Du.prototype.getElementsByTagNameNS=Es.prototype.getElementsByTagNameNS;Kr(Es,dt);function Jh(){}Jh.prototype.nodeType=No;Kr(Jh,dt);function Lu(){}Lu.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(ir[$r])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var n=this.data.substring(0,t),i=this.data.substring(t+e);r=n+r+i,this.nodeValue=this.data=r,this.length=r.length}};Kr(Lu,dt);function Uy(){}Uy.prototype={nodeName:"#text",nodeType:Yh,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Kr(Uy,Lu);function zy(){}zy.prototype={nodeName:"#comment",nodeType:LI};Kr(zy,Lu);function $y(){}$y.prototype={nodeName:"#cdata-section",nodeType:PI};Kr($y,Lu);function wp(){}wp.prototype.nodeType=MI;Kr(wp,dt);function VI(){}VI.prototype.nodeType=Pq;Kr(VI,dt);function HI(){}HI.prototype.nodeType=Iq;Kr(HI,dt);function Vy(){}Vy.prototype.nodeType=OI;Kr(Vy,dt);function _p(){}_p.prototype.nodeName="#document-fragment";_p.prototype.nodeType=Mn;Kr(_p,dt);function Hy(){}Hy.prototype.nodeType=DI;Kr(Hy,dt);function qI(){}qI.prototype.serializeToString=function(t,e,r){return GI.call(t,e,r)};dt.prototype.toString=GI;function GI(t,e){var r=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,a=n.namespaceURI;if(a&&i==null){var i=n.lookupPrefix(a);if(i==null)var s=[{namespace:a,prefix:null}]}return ao(this,r,t,e,s),r.join("")}function IT(t,e,r){var n=t.prefix||"",i=t.namespaceURI;if(!i||n==="xml"&&i===Xc.XML||i===Xc.XMLNS)return!1;for(var a=r.length;a--;){var s=r[a];if(s.prefix===n)return s.namespace!==i}return!0}function Fg(t,e,r){t.push(" ",e,'="',r.replace(/[<&"]/g,BI),'"')}function ao(t,e,r,n,i){if(i||(i=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Ii:var a=t.attributes,s=a.length,T=t.firstChild,o=t.tagName;r=Xc.isHTML(t.namespaceURI)||r;var l=o;if(!r&&!t.prefix&&t.namespaceURI){for(var c,u=0;u<a.length;u++)if(a.item(u).name==="xmlns"){c=a.item(u).value;break}if(!c)for(var d=i.length-1;d>=0;d--){var h=i[d];if(h.prefix===""&&h.namespace===t.namespaceURI){c=h.namespace;break}}if(c!==t.namespaceURI)for(var d=i.length-1;d>=0;d--){var h=i[d];if(h.namespace===t.namespaceURI){h.prefix&&(l=h.prefix+":"+o);break}}}e.push("<",l);for(var p=0;p<s;p++){var b=a.item(p);b.prefix=="xmlns"?i.push({prefix:b.localName,namespace:b.value}):b.nodeName=="xmlns"&&i.push({prefix:"",namespace:b.value})}for(var p=0;p<s;p++){var b=a.item(p);if(IT(b,r,i)){var w=b.prefix||"",v=b.namespaceURI;Fg(e,w?"xmlns:"+w:"xmlns",v),i.push({prefix:w,namespace:v})}ao(b,e,r,n,i)}if(o===l&&IT(t,r,i)){var w=t.prefix||"",v=t.namespaceURI;Fg(e,w?"xmlns:"+w:"xmlns",v),i.push({prefix:w,namespace:v})}if(T||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),r&&/^script$/i.test(o))for(;T;)T.data?e.push(T.data):ao(T,e,r,n,i.slice()),T=T.nextSibling;else for(;T;)ao(T,e,r,n,i.slice()),T=T.nextSibling;e.push("</",l,">")}else e.push("/>");return;case RI:case Mn:for(var T=t.firstChild;T;)ao(T,e,r,n,i.slice()),T=T.nextSibling;return;case No:return Fg(e,t.name,t.value);case Yh:return e.push(t.data.replace(/[<&]/g,BI).replace(/]]>/g,"]]&gt;"));case PI:return e.push("<![CDATA[",t.data,"]]>");case LI:return e.push("<!--",t.data,"-->");case MI:var E=t.publicId,A=t.systemId;if(e.push("<!DOCTYPE ",t.name),E)e.push(" PUBLIC ",E),A&&A!="."&&e.push(" ",A),e.push(">");else if(A&&A!=".")e.push(" SYSTEM ",A,">");else{var k=t.internalSubset;k&&e.push(" [",k,"]"),e.push(">")}return;case DI:return e.push("<?",t.target," ",t.data,"?>");case OI:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function WI(t,e,r){var n;switch(e.nodeType){case Ii:n=e.cloneNode(!1),n.ownerDocument=t;case Mn:break;case No:r=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,r)for(var i=e.firstChild;i;)n.appendChild(WI(t,i,r)),i=i.nextSibling;return n}function ov(t,e,r){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];typeof a!="object"&&a!=n[i]&&(n[i]=a)}switch(e.childNodes&&(n.childNodes=new Sn),n.ownerDocument=t,n.nodeType){case Ii:var s=e.attributes,o=n.attributes=new Xh,l=s.length;o._ownerElement=n;for(var c=0;c<l;c++)n.setAttributeNode(ov(t,s.item(c),!0));break;case No:r=!0}if(r)for(var u=e.firstChild;u;)n.appendChild(ov(t,u,r)),u=u.nextSibling;return n}function KI(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Ii:case Mn:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};Object.defineProperty(jo.prototype,"length",{get:function(){return jy(this),this.$$length}}),Object.defineProperty(dt.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Ii:case Mn:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),KI=function(e,r,n){e["$$"+r]=n}}}catch{}Ia.DocumentType=wp;Ia.DOMException=Ft;Ia.DOMImplementation=FI;Ia.Element=Es;Ia.Node=dt;Ia.NodeList=Sn;Ia.XMLSerializer=qI;var Ru={},YI={};(function(t){var e=Pa.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),t.entityMap=t.HTML_ENTITIES})(YI);var qy={},Jc=Pa.NAMESPACE,lv=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,PT=new RegExp("[\\-\\.0-9"+lv.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),OT=new RegExp("^"+lv.source+PT.source+"*(?::"+lv.source+PT.source+"*)?$"),Rl=0,Qn=1,Hs=2,Ml=3,qs=4,Gs=5,Nl=6,Ld=7;function Fo(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Fo)}Fo.prototype=new Error;Fo.prototype.name=Fo.name;function XI(){}XI.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),QI(e,e={}),jq(t,e,r,n,this.errorHandler),n.endDocument()}};function jq(t,e,r,n,i){function a(te){if(te>65535){te-=65536;var ae=55296+(te>>10),oe=56320+(te&1023);return String.fromCharCode(ae,oe)}else return String.fromCharCode(te)}function s(te){var ae=te.slice(1,-1);return ae in r?r[ae]:ae.charAt(0)==="#"?a(parseInt(ae.substr(1).replace("x","0x"))):(i.error("entity not found:"+te),te)}function o(te){if(te>w){var ae=t.substring(w,te).replace(/&#?\w+;/g,s);h&&l(w),n.characters(ae,0,te-w),w=te}}function l(te,ae){for(;te>=u&&(ae=d.exec(t));)c=ae.index,u=c+ae[0].length,h.lineNumber++;h.columnNumber=te-c+1}for(var c=0,u=0,d=/.*(?:\r\n?|\n)|.*$/g,h=n.locator,p=[{currentNSMap:e}],b={},w=0;;){try{var v=t.indexOf("<",w);if(v<0){if(!t.substr(w).match(/^\s*$/)){var T=n.doc,E=T.createTextNode(t.substr(w));T.appendChild(E),n.currentElement=E}return}switch(v>w&&o(v),t.charAt(v+1)){case"/":var U=t.indexOf(">",v+3),A=t.substring(v+2,U).replace(/[ \t\n\r]+$/g,""),k=p.pop();U<0?(A=t.substring(v+2).replace(/[\s<].*/,""),i.error("end tag name: "+A+" is not complete:"+k.tagName),U=v+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),i.error("end tag name: "+A+" maybe not complete"),U=v+1+A.length);var I=k.localNSMap,F=k.tagName==A,j=F||k.tagName&&k.tagName.toLowerCase()==A.toLowerCase();if(j){if(n.endElement(k.uri,k.localName,A),I)for(var D in I)Object.prototype.hasOwnProperty.call(I,D)&&n.endPrefixMapping(D);F||i.fatalError("end tag name: "+A+" is not match the current start tagName:"+k.tagName)}else p.push(k);U++;break;case"?":h&&l(v),U=$q(t,v,n);break;case"!":h&&l(v),U=zq(t,v,n,i);break;default:h&&l(v);var z=new JI,M=p[p.length-1].currentNSMap,U=Fq(t,v,z,M,s,i),P=z.length;if(!z.closed&&Uq(t,U,z.tagName,b)&&(z.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),h&&P){for(var q=DT(h,{}),X=0;X<P;X++){var fe=z[X];l(fe.offset),fe.locator=DT(h,{})}n.locator=q,LT(z,n,M)&&p.push(z),n.locator=h}else LT(z,n,M)&&p.push(z);Jc.isHTML(z.uri)&&!z.closed?U=Bq(t,U,z.tagName,s,n):U++}}catch(te){if(te instanceof Fo)throw te;i.error("element parse error: "+te),U=-1}U>w?w=U:o(Math.max(v,w)+1)}}function DT(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function Fq(t,e,r,n,i,a){function s(h,p,b){r.attributeNames.hasOwnProperty(h)&&a.fatalError("Attribute "+h+" redefined"),r.addValue(h,p,b)}for(var o,l,c=++e,u=Rl;;){var d=t.charAt(c);switch(d){case"=":if(u===Qn)o=t.slice(e,c),u=Ml;else if(u===Hs)u=Ml;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(u===Ml||u===Qn)if(u===Qn&&(a.warning('attribute value must after "="'),o=t.slice(e,c)),e=c+1,c=t.indexOf(d,e),c>0)l=t.slice(e,c).replace(/&#?\w+;/g,i),s(o,l,e-1),u=Gs;else throw new Error("attribute value no end '"+d+"' match");else if(u==qs)l=t.slice(e,c).replace(/&#?\w+;/g,i),s(o,l,e),a.warning('attribute "'+o+'" missed start quot('+d+")!!"),e=c+1,u=Gs;else throw new Error('attribute value must after "="');break;case"/":switch(u){case Rl:r.setTagName(t.slice(e,c));case Gs:case Nl:case Ld:u=Ld,r.closed=!0;case qs:case Qn:case Hs:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),u==Rl&&r.setTagName(t.slice(e,c)),c;case">":switch(u){case Rl:r.setTagName(t.slice(e,c));case Gs:case Nl:case Ld:break;case qs:case Qn:l=t.slice(e,c),l.slice(-1)==="/"&&(r.closed=!0,l=l.slice(0,-1));case Hs:u===Hs&&(l=o),u==qs?(a.warning('attribute "'+l+'" missed quot(")!'),s(o,l.replace(/&#?\w+;/g,i),e)):((!Jc.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),s(l,l,e));break;case Ml:throw new Error("attribute value missed!!")}return c;case"\x80":d=" ";default:if(d<=" ")switch(u){case Rl:r.setTagName(t.slice(e,c)),u=Nl;break;case Qn:o=t.slice(e,c),u=Hs;break;case qs:var l=t.slice(e,c).replace(/&#?\w+;/g,i);a.warning('attribute "'+l+'" missed quot(")!!'),s(o,l,e);case Gs:u=Nl;break}else switch(u){case Hs:r.tagName,(!Jc.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=c,u=Qn;break;case Gs:a.warning('attribute space is required"'+o+'"!!');case Nl:u=Qn,e=c;break;case Ml:u=qs,e=c;break;case Ld:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function LT(t,e,r){for(var n=t.tagName,i=null,d=t.length;d--;){var a=t[d],s=a.qName,o=a.value,h=s.indexOf(":");if(h>0)var l=a.prefix=s.slice(0,h),c=s.slice(h+1),u=l==="xmlns"&&c;else c=s,l=null,u=s==="xmlns"&&"";a.localName=c,u!==!1&&(i==null&&(i={},QI(r,r={})),r[u]=i[u]=o,a.uri=Jc.XMLNS,e.startPrefixMapping(u,o))}for(var d=t.length;d--;){a=t[d];var l=a.prefix;l&&(l==="xml"&&(a.uri=Jc.XML),l!=="xmlns"&&(a.uri=r[l||""]))}var h=n.indexOf(":");h>0?(l=t.prefix=n.slice(0,h),c=t.localName=n.slice(h+1)):(l=null,c=t.localName=n);var p=t.uri=r[l||""];if(e.startElement(p,c,n,t),t.closed){if(e.endElement(p,c,n),i)for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.endPrefixMapping(l)}else return t.currentNSMap=r,t.localNSMap=i,!0}function Bq(t,e,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var a=t.indexOf("</"+r+">",e),s=t.substring(e+1,a);if(/[&<]/.test(s))return/^script$/i.test(r)?(i.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),a)}return e+1}function Uq(t,e,r,n){var i=n[r];return i==null&&(i=t.lastIndexOf("</"+r+">"),i<e&&(i=t.lastIndexOf("</"+r)),n[r]=i),i<e}function QI(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function zq(t,e,r,n){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var a=t.indexOf("-->",e+4);return a>e?(r.comment(t,e+4,a-e-4),a+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var a=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,a-e-9),r.endCDATA(),a+3}var s=Vq(t,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var l=s[1][0],c=!1,u=!1;o>3&&(/^public$/i.test(s[2][0])?(c=s[3][0],u=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(u=s[3][0]));var d=s[o-1];return r.startDTD(l,c,u),r.endDTD(),d.index+d[0].length}}return-1}function $q(t,e,r){var n=t.indexOf("?>",e);if(n){var i=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return-1}function JI(){this.attributeNames={}}JI.prototype={setTagName:function(t){if(!OT.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!OT.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function Vq(t,e){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);r=i.exec(t);)if(n.push(r),r[1])return n}qy.XMLReader=XI;qy.ParseError=Fo;var Hq=Pa,Gy=Ia,RT=YI,ZI=qy,qq=Gy.DOMImplementation,MT=Hq.NAMESPACE,Gq=ZI.ParseError,Wq=ZI.XMLReader;function eP(t){this.options=t||{locator:{}}}eP.prototype.parseFromString=function(t,e){var r=this.options,n=new Wq,i=r.domBuilder||new Mu,a=r.errorHandler,s=r.locator,o=r.xmlns||{},l=/\/x?html?$/.test(e),c=l?RT.HTML_ENTITIES:RT.XML_ENTITIES;return s&&i.setDocumentLocator(s),n.errorHandler=Kq(a,i,s),n.domBuilder=r.domBuilder||i,l&&(o[""]=MT.HTML),o.xml=o.xml||MT.XML,t&&typeof t=="string"?n.parse(t,o,c):n.errorHandler.error("invalid doc source"),i.doc};function Kq(t,e,r){if(!t){if(e instanceof Mu)return e;t=e}var n={},i=t instanceof Function;r=r||{};function a(s){var o=t[s];!o&&i&&(o=t.length==2?function(l){t(s,l)}:t),n[s]=o&&function(l){o("[xmldom "+s+"]	"+l+cv(r))}||function(){}}return a("warning"),a("error"),a("fatalError"),n}function Mu(){this.cdata=!1}function Ws(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}Mu.prototype={startDocument:function(){this.doc=new qq().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var i=this.doc,a=i.createElementNS(t,r||e),s=n.length;Rd(this,a),this.currentElement=a,this.locator&&Ws(this.locator,a);for(var o=0;o<s;o++){var t=n.getURI(o),l=n.getValue(o),r=n.getQName(o),c=i.createAttributeNS(t,r);this.locator&&Ws(n.getLocator(o),c),c.value=c.nodeValue=l,a.setAttributeNode(c)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&Ws(this.locator,r),Rd(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=NT.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&Ws(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=NT.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&Ws(this.locator,n),Rd(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(t,e,r);this.locator&&Ws(this.locator,i),Rd(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,cv(this.locator))},error:function(t){console.error("[xmldom error]	"+t,cv(this.locator))},fatalError:function(t){throw new Gq(t,this.locator)}};function cv(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function NT(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){Mu.prototype[t]=function(){return null}});function Rd(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}Ru.__DOMHandler=Mu;Ru.DOMParser=eP;Ru.DOMImplementation=Gy.DOMImplementation;Ru.XMLSerializer=Gy.XMLSerializer;var Yq=Ru.DOMParser;/*! @name mpd-parser @version 0.21.1 @license Apache-2.0 */var jT=function(e){return!!e&&typeof e=="object"},Mr=function t(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(i,a){return typeof a!="object"||Object.keys(a).forEach(function(s){Array.isArray(i[s])&&Array.isArray(a[s])?i[s]=i[s].concat(a[s]):jT(i[s])&&jT(a[s])?i[s]=t(i[s],a[s]):i[s]=a[s]}),i},{})},tP=function(e){return Object.keys(e).map(function(r){return e[r]})},Xq=function(e,r){for(var n=[],i=e;i<r;i++)n.push(i);return n},xp=function(e){return e.reduce(function(r,n){return r.concat(n)},[])},rP=function(e){if(!e.length)return[];for(var r=[],n=0;n<e.length;n++)r.push(e[n]);return r},Qq=function(e,r){return e.reduce(function(n,i,a){return i[r]&&n.push(a),n},[])},uv=function(e,r){for(var n=0;n<e.length;n++)if(r(e[n]))return n;return-1},Jq=function(e,r){return tP(e.reduce(function(n,i){return i.forEach(function(a){n[r(a)]=a}),n},{}))},Bo={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Zc=function(e){var r=e.baseUrl,n=r===void 0?"":r,i=e.source,a=i===void 0?"":i,s=e.range,o=s===void 0?"":s,l=e.indexRange,c=l===void 0?"":l,u={uri:a,resolvedUri:bp(n||"",a)};if(o||c){var d=o||c,h=d.split("-"),p=L.BigInt?L.BigInt(h[0]):parseInt(h[0],10),b=L.BigInt?L.BigInt(h[1]):parseInt(h[1],10);p<Number.MAX_SAFE_INTEGER&&typeof p=="bigint"&&(p=Number(p)),b<Number.MAX_SAFE_INTEGER&&typeof b=="bigint"&&(b=Number(b));var w;typeof b=="bigint"||typeof p=="bigint"?w=L.BigInt(b)-L.BigInt(p)+L.BigInt(1):w=b-p+1,typeof w=="bigint"&&w<Number.MAX_SAFE_INTEGER&&(w=Number(w)),u.byterange={length:w,offset:p}}return u},Zq=function(e){var r;return typeof e.offset=="bigint"||typeof e.length=="bigint"?r=L.BigInt(e.offset)+L.BigInt(e.length)-L.BigInt(1):r=e.offset+e.length-1,e.offset+"-"+r},FT=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},eG={static:function(e){var r=e.duration,n=e.timescale,i=n===void 0?1:n,a=e.sourceDuration,s=e.periodDuration,o=FT(e.endNumber),l=r/i;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/l}:{start:0,end:a/l}},dynamic:function(e){var r=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,a=e.timescale,s=a===void 0?1:a,o=e.duration,l=e.periodStart,c=l===void 0?0:l,u=e.minimumUpdatePeriod,d=u===void 0?0:u,h=e.timeShiftBufferDepth,p=h===void 0?1/0:h,b=FT(e.endNumber),w=(r+n)/1e3,v=i+c,T=w+d,E=T-v,A=Math.ceil(E*s/o),k=Math.floor((w-v-p)*s/o),I=Math.floor((w-v)*s/o);return{start:Math.max(0,k),end:typeof b=="number"?b:Math.min(A,I)}}},tG=function(e){return function(r){var n=e.duration,i=e.timescale,a=i===void 0?1:i,s=e.periodStart,o=e.startNumber,l=o===void 0?1:o;return{number:l+r,duration:n/a,timeline:s,time:r*n}}},Wy=function(e){var r=e.type,n=e.duration,i=e.timescale,a=i===void 0?1:i,s=e.periodDuration,o=e.sourceDuration,l=eG[r](e),c=l.start,u=l.end,d=Xq(c,u).map(tG(e));if(r==="static"){var h=d.length-1,p=typeof s=="number"?s:o;d[h].duration=p-n/a*h}return d},iP=function(e){var r=e.baseUrl,n=e.initialization,i=n===void 0?{}:n,a=e.sourceDuration,s=e.indexRange,o=s===void 0?"":s,l=e.periodStart,c=e.presentationTime,u=e.number,d=u===void 0?0:u,h=e.duration;if(!r)throw new Error(Bo.NO_BASE_URL);var p=Zc({baseUrl:r,source:i.sourceURL,range:i.range}),b=Zc({baseUrl:r,source:r,indexRange:o});if(b.map=p,h){var w=Wy(e);w.length&&(b.duration=w[0].duration,b.timeline=w[0].timeline)}else a&&(b.duration=a,b.timeline=l);return b.presentationTime=c||l,b.number=d,[b]},Ky=function(e,r,n){var i=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,c=r.timescale,u=r.references.filter(function(z){return z.referenceType!==1}),d=[],h=e.endList?"static":"dynamic",p=e.sidx.timeline,b=p,w=e.mediaSequence||0,v;typeof r.firstOffset=="bigint"?v=L.BigInt(l)+r.firstOffset:v=l+r.firstOffset;for(var T=0;T<u.length;T++){var E=r.references[T],A=E.referencedSize,k=E.subsegmentDuration,I=void 0;typeof v=="bigint"?I=v+L.BigInt(A)-L.BigInt(1):I=v+A-1;var F=v+"-"+I,j={baseUrl:n,timescale:c,timeline:s,periodStart:p,presentationTime:b,number:w,duration:k,sourceDuration:a,indexRange:F,type:h},D=iP(j)[0];i&&(D.map=i),d.push(D),typeof v=="bigint"?v+=L.BigInt(A):v+=A,b+=k/c,w++}return e.segments=d,e},rG=["AUDIO","SUBTITLES"],iG=1/60,nP=function(e){return Jq(e,function(r){var n=r.timeline;return n}).sort(function(r,n){return r.timeline>n.timeline?1:-1})},nG=function(e,r){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===r)return e[n];return null},BT=function(e){var r=[];return Tq(e,rG,function(n,i,a,s){r=r.concat(n.playlists||[])}),r},UT=function(e){var r=e.playlist,n=e.mediaSequence;r.mediaSequence=n,r.segments.forEach(function(i,a){i.number=r.mediaSequence+a})},aG=function(e){var r=e.oldPlaylists,n=e.newPlaylists,i=e.timelineStarts;n.forEach(function(a){a.discontinuitySequence=uv(i,function(u){var d=u.timeline;return d===a.timeline});var s=nG(r,a.attributes.NAME);if(!!s&&!a.sidx){var o=a.segments[0],l=uv(s.segments,function(u){return Math.abs(u.presentationTime-o.presentationTime)<iG});if(l===-1){UT({playlist:a,mediaSequence:s.mediaSequence+s.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),(!s.segments.length&&a.timeline>s.timeline||s.segments.length&&a.timeline>s.segments[s.segments.length-1].timeline)&&a.discontinuitySequence--;return}var c=s.segments[l];c.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),UT({playlist:a,mediaSequence:s.segments[l].number})}})},sG=function(e){var r=e.oldManifest,n=e.newManifest,i=r.playlists.concat(BT(r)),a=n.playlists.concat(BT(n));return n.timelineStarts=nP([r.timelineStarts,n.timelineStarts]),aG({oldPlaylists:i,newPlaylists:a,timelineStarts:n.timelineStarts}),n},Tp=function(e){return e&&e.uri+"-"+Zq(e.byterange)},Bg=function(e){var r=tP(e.reduce(function(n,i){var a=i.attributes.id+(i.attributes.lang||"");if(!n[a])n[a]=i,n[a].attributes.timelineStarts=[];else{if(i.segments){var s;i.segments[0]&&(i.segments[0].discontinuity=!0),(s=n[a].segments).push.apply(s,i.segments)}i.attributes.contentProtection&&(n[a].attributes.contentProtection=i.attributes.contentProtection)}return n[a].attributes.timelineStarts.push({start:i.attributes.periodStart,timeline:i.attributes.periodStart}),n},{}));return r.map(function(n){return n.discontinuityStarts=Qq(n.segments||[],"discontinuity"),n})},Yy=function(e,r){var n=Tp(e.sidx),i=n&&r[n]&&r[n].sidx;return i&&Ky(e,i,e.sidx.resolvedUri),e},oG=function(e,r){if(r===void 0&&(r={}),!Object.keys(r).length)return e;for(var n in e)e[n]=Yy(e[n],r);return e},lG=function(e,r){var n,i=e.attributes,a=e.segments,s=e.sidx,o=e.mediaSequence,l=e.discontinuitySequence,c=e.discontinuityStarts,u={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:l,discontinuityStarts:c,timelineStarts:i.timelineStarts,mediaSequence:o,segments:a};return i.contentProtection&&(u.contentProtection=i.contentProtection),s&&(u.sidx=s),r&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u},cG=function(e){var r,n=e.attributes,i=e.segments,a=e.mediaSequence,s=e.discontinuityStarts,o=e.discontinuitySequence;typeof i=="undefined"&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var l=(r={NAME:n.id,BANDWIDTH:n.bandwidth},r["PROGRAM-ID"]=1,r);return n.codecs&&(l.CODECS=n.codecs),{attributes:l,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:a,segments:i}},uG=function(e,r,n){r===void 0&&(r={}),n===void 0&&(n=!1);var i,a=e.reduce(function(o,l){var c=l.attributes.role&&l.attributes.role.value||"",u=l.attributes.lang||"",d=l.attributes.label||"main";if(u&&!l.attributes.label){var h=c?" ("+c+")":"";d=""+l.attributes.lang+h}o[d]||(o[d]={language:u,autoselect:!0,default:c==="main",playlists:[],uri:""});var p=Yy(lG(l,n),r);return o[d].playlists.push(p),typeof i=="undefined"&&c==="main"&&(i=l,i.default=!0),o},{});if(!i){var s=Object.keys(a)[0];a[s].default=!0}return a},dG=function(e,r){return r===void 0&&(r={}),e.reduce(function(n,i){var a=i.attributes.lang||"text";return n[a]||(n[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),n[a].playlists.push(Yy(cG(i),r)),n},{})},hG=function(e){return e.reduce(function(r,n){return n&&n.forEach(function(i){var a=i.channel,s=i.language;r[s]={autoselect:!1,default:!1,instreamId:a,language:s},i.hasOwnProperty("aspectRatio")&&(r[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(r[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(r[s]["3D"]=i["3D"])}),r},{})},fG=function(e){var r,n=e.attributes,i=e.segments,a=e.sidx,s=e.discontinuityStarts,o={attributes:(r={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:s,timelineStarts:n.timelineStarts,segments:i};return n.contentProtection&&(o.contentProtection=n.contentProtection),a&&(o.sidx=a),o},pG=function(e){var r=e.attributes;return r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video"},gG=function(e){var r=e.attributes;return r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio"},mG=function(e){var r=e.attributes;return r.mimeType==="text/vtt"||r.contentType==="text"},vG=function(e,r){e.forEach(function(n){n.mediaSequence=0,n.discontinuitySequence=uv(r,function(i){var a=i.timeline;return a===n.timeline}),n.segments&&n.segments.forEach(function(i,a){i.number=a})})},zT=function(e){return e?Object.keys(e).reduce(function(r,n){var i=e[n];return r.concat(i.playlists)},[]):[]},yG=function(e){var r,n=e.dashPlaylists,i=e.locations,a=e.sidxMapping,s=a===void 0?{}:a,o=e.previousManifest;if(!n.length)return{};var l=n[0].attributes,c=l.sourceDuration,u=l.type,d=l.suggestedPresentationDelay,h=l.minimumUpdatePeriod,p=Bg(n.filter(pG)).map(fG),b=Bg(n.filter(gG)),w=Bg(n.filter(mG)),v=n.map(function(j){return j.attributes.captionServices}).filter(Boolean),T={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:c,playlists:oG(p,s)};h>=0&&(T.minimumUpdatePeriod=h*1e3),i&&(T.locations=i),u==="dynamic"&&(T.suggestedPresentationDelay=d);var E=T.playlists.length===0,A=b.length?uG(b,s,E):null,k=w.length?dG(w,s):null,I=p.concat(zT(A),zT(k)),F=I.map(function(j){var D=j.timelineStarts;return D});return T.timelineStarts=nP(F),vG(I,T.timelineStarts),A&&(T.mediaGroups.AUDIO.audio=A),k&&(T.mediaGroups.SUBTITLES.subs=k),v.length&&(T.mediaGroups["CLOSED-CAPTIONS"].cc=hG(v)),o?sG({oldManifest:o,newManifest:T}):T},bG=function(e,r,n){var i=e.NOW,a=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,l=o===void 0?1:o,c=e.periodStart,u=c===void 0?0:c,d=e.minimumUpdatePeriod,h=d===void 0?0:d,p=(i+a)/1e3,b=s+u,w=p+h,v=w-b;return Math.ceil((v*l-r)/n)},aP=function(e,r){for(var n=e.type,i=e.minimumUpdatePeriod,a=i===void 0?0:i,s=e.media,o=s===void 0?"":s,l=e.sourceDuration,c=e.timescale,u=c===void 0?1:c,d=e.startNumber,h=d===void 0?1:d,p=e.periodStart,b=[],w=-1,v=0;v<r.length;v++){var T=r[v],E=T.d,A=T.r||0,k=T.t||0;w<0&&(w=k),k&&k>w&&(w=k);var I=void 0;if(A<0){var F=v+1;F===r.length?n==="dynamic"&&a>0&&o.indexOf("$Number$")>0?I=bG(e,w,E):I=(l*u-w)/E:I=(r[F].t-w)/E}else I=A+1;for(var j=h+b.length+I,D=h+b.length;D<j;)b.push({number:D,duration:E/u,time:w,timeline:p}),w+=E,D++}return b},wG=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,_G=function(e){return function(r,n,i,a){if(r==="$$")return"$";if(typeof e[n]=="undefined")return r;var s=""+e[n];return n==="RepresentationID"||(i?a=parseInt(a,10):a=1,s.length>=a)?s:""+new Array(a-s.length+1).join("0")+s}},$T=function(e,r){return e.replace(wG,_G(r))},xG=function(e,r){return!e.duration&&!r?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?Wy(e):aP(e,r)},TG=function(e,r){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,a=i===void 0?{sourceURL:"",range:""}:i,s=Zc({baseUrl:e.baseUrl,source:$T(a.sourceURL,n),range:a.range}),o=xG(e,r);return o.map(function(l){n.Number=l.number,n.Time=l.time;var c=$T(e.media||"",n),u=e.timescale||1,d=e.presentationTimeOffset||0,h=e.periodStart+(l.time-d)/u,p={uri:c,timeline:l.timeline,duration:l.duration,resolvedUri:bp(e.baseUrl||"",c),map:s,number:l.number,presentationTime:h};return p})},SG=function(e,r){var n=e.baseUrl,i=e.initialization,a=i===void 0?{}:i,s=Zc({baseUrl:n,source:a.sourceURL,range:a.range}),o=Zc({baseUrl:n,source:r.media,range:r.mediaRange});return o.map=s,o},EG=function(e,r){var n=e.duration,i=e.segmentUrls,a=i===void 0?[]:i,s=e.periodStart;if(!n&&!r||n&&r)throw new Error(Bo.SEGMENT_TIME_UNSPECIFIED);var o=a.map(function(u){return SG(e,u)}),l;n&&(l=Wy(e)),r&&(l=aP(e,r));var c=l.map(function(u,d){if(o[d]){var h=o[d],p=e.timescale||1,b=e.presentationTimeOffset||0;return h.timeline=u.timeline,h.duration=u.duration,h.number=u.number,h.presentationTime=s+(u.time-b)/p,h}}).filter(function(u){return u});return c},kG=function(e){var r=e.attributes,n=e.segmentInfo,i,a;n.template?(a=TG,i=Mr(r,n.template)):n.base?(a=iP,i=Mr(r,n.base)):n.list&&(a=EG,i=Mr(r,n.list));var s={attributes:r};if(!a)return s;var o=a(i,n.segmentTimeline);if(i.duration){var l=i,c=l.duration,u=l.timescale,d=u===void 0?1:u;i.duration=c/d}else o.length?i.duration=o.reduce(function(h,p){return Math.max(h,Math.ceil(p.duration))},0):i.duration=0;return s.attributes=i,s.segments=o,n.base&&i.indexRange&&(s.sidx=o[0],s.segments=[]),s},CG=function(e){return e.map(kG)},Nt=function(e,r){return rP(e.childNodes).filter(function(n){var i=n.tagName;return i===r})},Xy=function(e){return e.textContent.trim()},Ks=function(e){var r=31536e3,n=30*24*60*60,i=24*60*60,a=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(e);if(!l)return 0;var c=l.slice(1),u=c[0],d=c[1],h=c[2],p=c[3],b=c[4],w=c[5];return parseFloat(u||0)*r+parseFloat(d||0)*n+parseFloat(h||0)*i+parseFloat(p||0)*a+parseFloat(b||0)*s+parseFloat(w||0)},AG=function(e){var r=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return r.test(e)&&(e+="Z"),Date.parse(e)},VT={mediaPresentationDuration:function(e){return Ks(e)},availabilityStartTime:function(e){return AG(e)/1e3},minimumUpdatePeriod:function(e){return Ks(e)},suggestedPresentationDelay:function(e){return Ks(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Ks(e)},start:function(e){return Ks(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var r=parseInt(e,10);return isNaN(r)?Ks(e):r},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},gr=function(e){return e&&e.attributes?rP(e.attributes).reduce(function(r,n){var i=VT[n.name]||VT.DEFAULT;return r[n.name]=i(n.value),r},{}):{}},IG={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Sp=function(e,r){return r.length?xp(e.map(function(n){return r.map(function(i){return bp(n,Xy(i))})})):e},Qy=function(e){var r=Nt(e,"SegmentTemplate")[0],n=Nt(e,"SegmentList")[0],i=n&&Nt(n,"SegmentURL").map(function(h){return Mr({tag:"SegmentURL"},gr(h))}),a=Nt(e,"SegmentBase")[0],s=n||r,o=s&&Nt(s,"SegmentTimeline")[0],l=n||a||r,c=l&&Nt(l,"Initialization")[0],u=r&&gr(r);u&&c?u.initialization=c&&gr(c):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var d={template:u,segmentTimeline:o&&Nt(o,"S").map(function(h){return gr(h)}),list:n&&Mr(gr(n),{segmentUrls:i,initialization:gr(c)}),base:a&&Mr(gr(a),{initialization:gr(c)})};return Object.keys(d).forEach(function(h){d[h]||delete d[h]}),d},PG=function(e,r,n){return function(i){var a=Nt(i,"BaseURL"),s=Sp(r,a),o=Mr(e,gr(i)),l=Qy(i);return s.map(function(c){return{segmentInfo:Mr(n,l),attributes:Mr(o,{baseUrl:c})}})}},OG=function(e){return e.reduce(function(r,n){var i=gr(n);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var a=IG[i.schemeIdUri];if(a){r[a]={attributes:i};var s=Nt(n,"cenc:pssh")[0];if(s){var o=Xy(s);r[a].pssh=o&&_I(o)}}return r},{})},DG=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var r=typeof e.value!="string"?[]:e.value.split(";");return r.map(function(i){var a,s;if(s=i,/^CC\d=/.test(i)){var o=i.split("=");a=o[0],s=o[1]}else/^CC\d$/.test(i)&&(a=i);return{channel:a,language:s}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var n=typeof e.value!="string"?[]:e.value.split(";");return n.map(function(i){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var s=i.split("="),o=s[0],l=s[1],c=l===void 0?"":l;a.channel=o,a.language=i,c.split(",").forEach(function(u){var d=u.split(":"),h=d[0],p=d[1];h==="lang"?a.language=p:h==="er"?a.easyReader=Number(p):h==="war"?a.aspectRatio=Number(p):h==="3D"&&(a["3D"]=Number(p))})}else a.language=i;return a.channel&&(a.channel="SERVICE"+a.channel),a})}},LG=function(e,r,n){return function(i){var a=gr(i),s=Sp(r,Nt(i,"BaseURL")),o=Nt(i,"Role")[0],l={role:gr(o)},c=Mr(e,a,l),u=Nt(i,"Accessibility")[0],d=DG(gr(u));d&&(c=Mr(c,{captionServices:d}));var h=Nt(i,"Label")[0];if(h&&h.childNodes.length){var p=h.childNodes[0].nodeValue.trim();c=Mr(c,{label:p})}var b=OG(Nt(i,"ContentProtection"));Object.keys(b).length&&(c=Mr(c,{contentProtection:b}));var w=Qy(i),v=Nt(i,"Representation"),T=Mr(n,w);return xp(v.map(PG(c,s,T)))}},RG=function(e,r){return function(n,i){var a=Sp(r,Nt(n.node,"BaseURL")),s=Mr(e,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(s.periodDuration=n.attributes.duration);var o=Nt(n.node,"AdaptationSet"),l=Qy(n.node);return xp(o.map(LG(s,a,l)))}},MG=function(e){var r=e.attributes,n=e.priorPeriodAttributes,i=e.mpdType;return typeof r.start=="number"?r.start:n&&typeof n.start=="number"&&typeof n.duration=="number"?n.start+n.duration:!n&&i==="static"?0:null},NG=function(e,r){r===void 0&&(r={});var n=r,i=n.manifestUri,a=i===void 0?"":i,s=n.NOW,o=s===void 0?Date.now():s,l=n.clientOffset,c=l===void 0?0:l,u=Nt(e,"Period");if(!u.length)throw new Error(Bo.INVALID_NUMBER_OF_PERIOD);var d=Nt(e,"Location"),h=gr(e),p=Sp([a],Nt(e,"BaseURL"));h.type=h.type||"static",h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=o,h.clientOffset=c,d.length&&(h.locations=d.map(Xy));var b=[];return u.forEach(function(w,v){var T=gr(w),E=b[v-1];T.start=MG({attributes:T,priorPeriodAttributes:E?E.attributes:null,mpdType:h.type}),b.push({node:w,attributes:T})}),{locations:h.locations,representationInfo:xp(b.map(RG(h,p)))}},sP=function(e){if(e==="")throw new Error(Bo.DASH_EMPTY_MANIFEST);var r=new Yq,n,i;try{n=r.parseFromString(e,"application/xml"),i=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Bo.DASH_INVALID_XML);return i},jG=function(e){var r=Nt(e,"UTCTiming")[0];if(!r)return null;var n=gr(r);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Bo.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},FG=function(e,r){r===void 0&&(r={});var n=NG(sP(e),r),i=CG(n.representationInfo);return yG({dashPlaylists:i,locations:n.locations,sidxMapping:r.sidxMapping,previousManifest:r.previousManifest})},BG=function(e){return jG(sP(e))},oP=Math.pow(2,32),UG=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r;return e.getBigUint64?(r=e.getBigUint64(0),r<Number.MAX_SAFE_INTEGER?Number(r):r):e.getUint32(0)*oP+e.getUint32(4)},zG={getUint64:UG,MAX_UINT32:oP},HT=zG.getUint64,$G=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},n=12;r.version===0?(r.earliestPresentationTime=e.getUint32(n),r.firstOffset=e.getUint32(n+4),n+=8):(r.earliestPresentationTime=HT(t.subarray(n)),r.firstOffset=HT(t.subarray(n+8)),n+=16),n+=2;var i=e.getUint16(n);for(n+=2;i>0;n+=12,i--)r.references.push({referenceType:(t[n]&128)>>>7,referencedSize:e.getUint32(n)&2147483647,subsegmentDuration:e.getUint32(n+4),startsWithSap:!!(t[n+8]&128),sapType:(t[n+8]&112)>>>4,sapDeltaTime:e.getUint32(n+8)&268435455});return r},VG=$G,HG=Ie([73,68,51]),qG=function(e,r){r===void 0&&(r=0),e=Ie(e);var n=e[r+5],i=e[r+6]<<21|e[r+7]<<14|e[r+8]<<7|e[r+9],a=(n&16)>>4;return a?i+20:i+10},Ql=function t(e,r){return r===void 0&&(r=0),e=Ie(e),e.length-r<10||!kt(e,HG,{offset:r})?r:(r+=qG(e,r),t(e,r))},qT=function(e){return typeof e=="string"?kI(e):e},GG=function(e){return Array.isArray(e)?e.map(function(r){return qT(r)}):[qT(e)]},WG=function t(e,r,n){n===void 0&&(n=!1),r=GG(r),e=Ie(e);var i=[];if(!r.length)return i;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var l=a+s;if(l>e.length){if(n)break;l=e.length}var c=e.subarray(a+8,l);kt(o,r[0])&&(r.length===1?i.push(c):i.push.apply(i,t(c,r.slice(1),n))),a=l}return i},Md={EBML:Ie([26,69,223,163]),DocType:Ie([66,130]),Segment:Ie([24,83,128,103]),SegmentInfo:Ie([21,73,169,102]),Tracks:Ie([22,84,174,107]),Track:Ie([174]),TrackNumber:Ie([215]),DefaultDuration:Ie([35,227,131]),TrackEntry:Ie([174]),TrackType:Ie([131]),FlagDefault:Ie([136]),CodecID:Ie([134]),CodecPrivate:Ie([99,162]),VideoTrack:Ie([224]),AudioTrack:Ie([225]),Cluster:Ie([31,67,182,117]),Timestamp:Ie([231]),TimestampScale:Ie([42,215,177]),BlockGroup:Ie([160]),BlockDuration:Ie([155]),Block:Ie([161]),SimpleBlock:Ie([163])},dv=[128,64,32,16,8,4,2,1],KG=function(e){for(var r=1,n=0;n<dv.length&&!(e&dv[n]);n++)r++;return r},Zh=function(e,r,n,i){n===void 0&&(n=!0),i===void 0&&(i=!1);var a=KG(e[r]),s=e.subarray(r,r+a);return n&&(s=Array.prototype.slice.call(e,r,r+a),s[0]^=dv[a-1]),{length:a,value:wq(s,{signed:i}),bytes:s}},GT=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(r){return t(r)}):typeof e=="number"?_q(e):e},YG=function(e){return Array.isArray(e)?e.map(function(r){return GT(r)}):[GT(e)]},XG=function t(e,r,n){if(n>=r.length)return r.length;var i=Zh(r,n,!1);if(kt(e.bytes,i.bytes))return n;var a=Zh(r,n+i.length);return t(e,r,n+a.length+a.value+i.length)},WT=function t(e,r){r=YG(r),e=Ie(e);var n=[];if(!r.length)return n;for(var i=0;i<e.length;){var a=Zh(e,i,!1),s=Zh(e,i+a.length),o=i+a.length+s.length;s.value===127&&(s.value=XG(a,e,o),s.value!==e.length&&(s.value-=o));var l=o+s.value>e.length?e.length:o+s.value,c=e.subarray(o,l);kt(r[0],a.bytes)&&(r.length===1?n.push(c):n=n.concat(t(c,r.slice(1))));var u=a.length+s.length+c.length;i+=u}return n},QG=Ie([0,0,0,1]),JG=Ie([0,0,1]),ZG=Ie([0,0,3]),e9=function(e){for(var r=[],n=1;n<e.length-2;)kt(e.subarray(n,n+3),ZG)&&(r.push(n+2),n++),n++;if(r.length===0)return e;var i=e.length-r.length,a=new Uint8Array(i),s=0;for(n=0;n<i;s++,n++)s===r[0]&&(s++,r.shift()),a[n]=e[s];return a},lP=function(e,r,n,i){i===void 0&&(i=1/0),e=Ie(e),n=[].concat(n);for(var a=0,s,o=0;a<e.length&&(o<i||s);){var l=void 0;if(kt(e.subarray(a),QG)?l=4:kt(e.subarray(a),JG)&&(l=3),!l){a++;continue}if(o++,s)return e9(e.subarray(s,a));var c=void 0;r==="h264"?c=e[a+l]&31:r==="h265"&&(c=e[a+l]>>1&63),n.indexOf(c)!==-1&&(s=a+l),a+=l+(r==="h264"?1:2)}return e.subarray(0,0)},t9=function(e,r,n){return lP(e,"h264",r,n)},r9=function(e,r,n){return lP(e,"h265",r,n)},Pr={webm:Ie([119,101,98,109]),matroska:Ie([109,97,116,114,111,115,107,97]),flac:Ie([102,76,97,67]),ogg:Ie([79,103,103,83]),ac3:Ie([11,119]),riff:Ie([82,73,70,70]),avi:Ie([65,86,73]),wav:Ie([87,65,86,69]),"3gp":Ie([102,116,121,112,51,103]),mp4:Ie([102,116,121,112]),fmp4:Ie([115,116,121,112]),mov:Ie([102,116,121,112,113,116]),moov:Ie([109,111,111,118]),moof:Ie([109,111,111,102])},Uo={aac:function(e){var r=Ql(e);return kt(e,[255,16],{offset:r,mask:[255,22]})},mp3:function(e){var r=Ql(e);return kt(e,[255,2],{offset:r,mask:[255,6]})},webm:function(e){var r=WT(e,[Md.EBML,Md.DocType])[0];return kt(r,Pr.webm)},mkv:function(e){var r=WT(e,[Md.EBML,Md.DocType])[0];return kt(r,Pr.matroska)},mp4:function(e){if(Uo["3gp"](e)||Uo.mov(e))return!1;if(kt(e,Pr.mp4,{offset:4})||kt(e,Pr.fmp4,{offset:4})||kt(e,Pr.moof,{offset:4})||kt(e,Pr.moov,{offset:4}))return!0},mov:function(e){return kt(e,Pr.mov,{offset:4})},"3gp":function(e){return kt(e,Pr["3gp"],{offset:4})},ac3:function(e){var r=Ql(e);return kt(e,Pr.ac3,{offset:r})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var r=0;r+188<e.length&&r<188;){if(e[r]===71&&e[r+188]===71)return!0;r+=1}return!1},flac:function(e){var r=Ql(e);return kt(e,Pr.flac,{offset:r})},ogg:function(e){return kt(e,Pr.ogg)},avi:function(e){return kt(e,Pr.riff)&&kt(e,Pr.avi,{offset:8})},wav:function(e){return kt(e,Pr.riff)&&kt(e,Pr.wav,{offset:8})},h264:function(e){return t9(e,7,3).length},h265:function(e){return r9(e,[32,33],3).length}},hv=Object.keys(Uo).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);hv.forEach(function(t){var e=Uo[t];Uo[t]=function(r){return e(Ie(r))}});var i9=Uo,Jy=function(e){e=Ie(e);for(var r=0;r<hv.length;r++){var n=hv[r];if(i9[n](e))return n}return""},n9=function(e){return WG(e,["moof"]).length>0},Zy=9e4,eb,tb,Ep,rb,cP,uP,dP;eb=function(t){return t*Zy};tb=function(t,e){return t*e};Ep=function(t){return t/Zy};rb=function(t,e){return t/e};cP=function(t,e){return eb(rb(t,e))};uP=function(t,e){return tb(Ep(t),e)};dP=function(t,e,r){return Ep(r?t:t-e)};var ef={ONE_SECOND_IN_TS:Zy,secondsToVideoTs:eb,secondsToAudioTs:tb,videoTsToSeconds:Ep,audioTsToSeconds:rb,audioTsToVideoTs:cP,videoTsToAudioTs:uP,metadataTsToSeconds:dP};/**
 * @license
 * Video.js 7.20.3 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var hP="7.20.3",vn={},xa=function(e,r){return vn[e]=vn[e]||[],r&&(vn[e]=vn[e].concat(r)),vn[e]},a9=function(e,r){xa(e,r)},fP=function(e,r){var n=xa(e).indexOf(r);return n<=-1?!1:(vn[e]=vn[e].slice(),vn[e].splice(n,1),!0)},s9=function(e,r){xa(e,[].concat(r).map(function(n){var i=function a(){return fP(e,a),n.apply(void 0,arguments)};return i}))},tf={prefixed:!0},lh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],KT=lh[0],Jl;for(var Nd=0;Nd<lh.length;Nd++)if(lh[Nd][1]in le){Jl=lh[Nd];break}if(Jl){for(var jd=0;jd<Jl.length;jd++)tf[KT[jd]]=Jl[jd];tf.prefixed=Jl[0]!==KT[0]}var zr=[],o9=function(e,r){return function(n,i,a){var s=r.levels[i],o=new RegExp("^("+s+")$");if(n!=="log"&&a.unshift(n.toUpperCase()+":"),a.unshift(e+":"),zr){zr.push([].concat(a));var l=zr.length-1e3;zr.splice(0,l>0?l:0)}if(!!L.console){var c=L.console[n];!c&&n==="debug"&&(c=L.console.info||L.console.log),!(!c||!s||!o.test(n))&&c[Array.isArray(a)?"apply":"call"](L.console,a)}}};function pP(t){var e="info",r,n=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];r("log",e,s)};return r=o9(t,n),n.createLogger=function(i){return pP(t+": "+i)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},n.level=function(i){if(typeof i=="string"){if(!n.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');e=i}return e},n.history=function(){return zr?[].concat(zr):[]},n.history.filter=function(i){return(zr||[]).filter(function(a){return new RegExp(".*"+i+".*").test(a[0])})},n.history.clear=function(){zr&&(zr.length=0)},n.history.disable=function(){zr!==null&&(zr.length=0,zr=null)},n.history.enable=function(){zr===null&&(zr=[])},n.error=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("error",e,a)},n.warn=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("warn",e,a)},n.debug=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r("debug",e,a)},n}var Ke=pP("VIDEOJS"),gP=Ke.createLogger,l9=Object.prototype.toString,mP=function(e){return jn(e)?Object.keys(e):[]};function bo(t,e){mP(t).forEach(function(r){return e(t[r],r)})}function c9(t,e,r){return r===void 0&&(r=0),mP(t).reduce(function(n,i){return e(n,t[i],i)},r)}function Ot(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Object.assign?vi.apply(void 0,[t].concat(r)):(r.forEach(function(i){!i||bo(i,function(a,s){t[s]=a})}),t)}function jn(t){return!!t&&typeof t=="object"}function eu(t){return jn(t)&&l9.call(t)==="[object Object]"&&t.constructor===Object}function tu(t,e){if(!t||!e)return"";if(typeof L.getComputedStyle=="function"){var r;try{r=L.getComputedStyle(t)}catch{return""}return r?r.getPropertyValue(e)||r[e]:""}return""}var tr=L.navigator&&L.navigator.userAgent||"",YT=/AppleWebKit\/([\d.]+)/i.exec(tr),u9=YT?parseFloat(YT.pop()):null,vP=/iPod/i.test(tr),d9=function(){var t=tr.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),zn=/Android/i.test(tr),ib=function(){var t=tr.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return e&&r?parseFloat(t[1]+"."+t[2]):e||null}(),yP=zn&&ib<5&&u9<537,bP=/Firefox/i.test(tr),Nu=/Edg/i.test(tr),$n=!Nu&&(/Chrome/i.test(tr)||/CriOS/i.test(tr)),wP=function(){var t=tr.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),ju=function(){var t=/MSIE\s(\d+)\.\d/.exec(tr),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(tr)&&/rv:11.0/.test(tr)&&(e=11),e}(),nb=/Safari/i.test(tr)&&!$n&&!zn&&!Nu,_P=/Windows/i.test(tr),zo=Boolean(gl()&&("ontouchstart"in L||L.navigator.maxTouchPoints||L.DocumentTouch&&L.document instanceof L.DocumentTouch)),ab=/iPad/i.test(tr)||nb&&zo&&!/iPhone/i.test(tr),sb=/iPhone/i.test(tr)&&!ab,Br=sb||ab||vP,kp=(nb||Br)&&!$n,h9=Object.freeze({__proto__:null,IS_IPOD:vP,IOS_VERSION:d9,IS_ANDROID:zn,ANDROID_VERSION:ib,IS_NATIVE_ANDROID:yP,IS_FIREFOX:bP,IS_EDGE:Nu,IS_CHROME:$n,CHROME_VERSION:wP,IE_VERSION:ju,IS_SAFARI:nb,IS_WINDOWS:_P,TOUCH_ENABLED:zo,IS_IPAD:ab,IS_IPHONE:sb,IS_IOS:Br,IS_ANY_SAFARI:kp});function XT(t){return typeof t=="string"&&Boolean(t.trim())}function xP(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function f9(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function gl(){return le===L.document}function ml(t){return jn(t)&&t.nodeType===1}function TP(){try{return L.parent!==L.self}catch{return!0}}function SP(t){return function(e,r){if(!XT(e))return le[t](null);XT(r)&&(r=le.querySelector(r));var n=ml(r)?r:le;return n[t]&&n[t](e)}}function tt(t,e,r,n){t===void 0&&(t="div"),e===void 0&&(e={}),r===void 0&&(r={});var i=le.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(a){var s=e[a];a.indexOf("aria-")!==-1||a==="role"||a==="type"?(Ke.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+a+" to "+s+".")),i.setAttribute(a,s)):a==="textContent"?Ms(i,s):(i[a]!==s||a==="tabIndex")&&(i[a]=s)}),Object.getOwnPropertyNames(r).forEach(function(a){i.setAttribute(a,r[a])}),n&&lb(i,n),i}function Ms(t,e){return typeof t.textContent=="undefined"?t.innerText=e:t.textContent=e,t}function fv(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function ps(t,e){return xP(e),t.classList?t.classList.contains(e):f9(e).test(t.className)}function En(t,e){return t.classList?t.classList.add(e):ps(t,e)||(t.className=(t.className+" "+e).trim()),t}function Fu(t,e){return t?(t.classList?t.classList.remove(e):(xP(e),t.className=t.className.split(/\s+/).filter(function(r){return r!==e}).join(" ")),t):(Ke.warn("removeClass was called with an element that doesn't exist"),null)}function EP(t,e,r){var n=ps(t,e);if(typeof r=="function"&&(r=r(t,e)),typeof r!="boolean"&&(r=!n),r!==n)return r?En(t,e):Fu(t,e),t}function kP(t,e){Object.getOwnPropertyNames(e).forEach(function(r){var n=e[r];n===null||typeof n=="undefined"||n===!1?t.removeAttribute(r):t.setAttribute(r,n===!0?"":n)})}function fn(t){var e={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var n=t.attributes,i=n.length-1;i>=0;i--){var a=n[i].name,s=n[i].value;(typeof t[a]=="boolean"||r.indexOf(","+a+",")!==-1)&&(s=s!==null),e[a]=s}return e}function CP(t,e){return t.getAttribute(e)}function $o(t,e,r){t.setAttribute(e,r)}function Cp(t,e){t.removeAttribute(e)}function AP(){le.body.focus(),le.onselectstart=function(){return!1}}function IP(){le.onselectstart=function(){return!0}}function Vo(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach(function(n){e[n]!==void 0&&(r[n]=e[n])}),r.height||(r.height=parseFloat(tu(t,"height"))),r.width||(r.width=parseFloat(tu(t,"width"))),r}}function ru(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=t.offsetWidth,r=t.offsetHeight,n=0,i=0;t.offsetParent&&t!==le[tf.fullscreenElement];)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{left:n,top:i,width:e,height:r}}function Ap(t,e){var r={x:0,y:0};if(Br)for(var n=t;n&&n.nodeName.toLowerCase()!=="html";){var i=tu(n,"transform");if(/^matrix/.test(i)){var a=i.slice(7,-1).split(/,\s/).map(Number);r.x+=a[4],r.y+=a[5]}else if(/^matrix3d/.test(i)){var s=i.slice(9,-1).split(/,\s/).map(Number);r.x+=s[12],r.y+=s[13]}n=n.parentNode}var o={},l=ru(e.target),c=ru(t),u=c.width,d=c.height,h=e.offsetY-(c.top-l.top),p=e.offsetX-(c.left-l.left);return e.changedTouches&&(p=e.changedTouches[0].pageX-c.left,h=e.changedTouches[0].pageY+c.top,Br&&(p-=r.x,h-=r.y)),o.y=1-Math.max(0,Math.min(1,h/d)),o.x=Math.max(0,Math.min(1,p/u)),o}function PP(t){return jn(t)&&t.nodeType===3}function ob(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function OP(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(function(e){if(typeof e=="function"&&(e=e()),ml(e)||PP(e))return e;if(typeof e=="string"&&/\S/.test(e))return le.createTextNode(e)}).filter(function(e){return e})}function lb(t,e){return OP(e).forEach(function(r){return t.appendChild(r)}),t}function DP(t,e){return lb(ob(t),e)}function iu(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}var Ta=SP("querySelector"),LP=SP("querySelectorAll"),RP=Object.freeze({__proto__:null,isReal:gl,isEl:ml,isInFrame:TP,createEl:tt,textContent:Ms,prependTo:fv,hasClass:ps,addClass:En,removeClass:Fu,toggleClass:EP,setAttributes:kP,getAttributes:fn,getAttribute:CP,setAttribute:$o,removeAttribute:Cp,blockTextSelection:AP,unblockTextSelection:IP,getBoundingClientRect:Vo,findPosition:ru,getPointerPosition:Ap,isTextNode:PP,emptyEl:ob,normalizeContent:OP,appendContent:lb,insertContent:DP,isSingleLeftClick:iu,$:Ta,$$:LP}),MP=!1,pv,p9=function(){if(pv.options.autoSetup!==!1){var e=Array.prototype.slice.call(le.getElementsByTagName("video")),r=Array.prototype.slice.call(le.getElementsByTagName("audio")),n=Array.prototype.slice.call(le.getElementsByTagName("video-js")),i=e.concat(r,n);if(i&&i.length>0)for(var a=0,s=i.length;a<s;a++){var o=i[a];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&pv(o)}}else{gv(1);break}}else MP||gv(1)}};function gv(t,e){!gl()||(e&&(pv=e),L.setTimeout(p9,t))}function mv(){MP=!0,L.removeEventListener("load",mv)}gl()&&(le.readyState==="complete"?mv():L.addEventListener("load",mv));var NP=function(e){var r=le.createElement("style");return r.className=e,r},jP=function(e,r){e.styleSheet?e.styleSheet.cssText=r:e.textContent=r},g9=3,m9=g9;function Vn(){return m9++}var FP;L.WeakMap||(FP=function(){function t(){this.vdata="vdata"+Math.floor(L.performance&&L.performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(n,i){var a=n[this.vdata]||Vn();return n[this.vdata]||(n[this.vdata]=a),this.data[a]=i,this},e.get=function(n){var i=n[this.vdata];if(i)return this.data[i];Ke("We have no data for this element",n)},e.has=function(n){var i=n[this.vdata];return i in this.data},e.delete=function(n){var i=n[this.vdata];i&&(delete this.data[i],delete n[this.vdata])},t}());var Nr=L.WeakMap?new WeakMap:new FP;function QT(t,e){if(!!Nr.has(t)){var r=Nr.get(t);r.handlers[e].length===0&&(delete r.handlers[e],t.removeEventListener?t.removeEventListener(e,r.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),Object.getOwnPropertyNames(r).length===0&&Nr.delete(t)}}function cb(t,e,r,n){r.forEach(function(i){t(e,i,n)})}function Ip(t){if(t.fixed_)return t;function e(){return!0}function r(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){var n=t||L.event;t={};for(var i in n)i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"&&i!=="path"&&(i==="returnValue"&&n.preventDefault||(t[i]=n[i]));if(t.target||(t.target=t.srcElement||le),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=r,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=r,t.clientX!==null&&t.clientX!==void 0){var a=le.documentElement,s=le.body;t.pageX=t.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}var Fd,v9=function(){if(typeof Fd!="boolean"){Fd=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Fd=!0}});L.addEventListener("test",null,e),L.removeEventListener("test",null,e)}catch{}}return Fd},y9=["touchstart","touchmove"];function si(t,e,r){if(Array.isArray(e))return cb(si,t,e,r);Nr.has(t)||Nr.set(t,{});var n=Nr.get(t);if(n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),r.guid||(r.guid=Vn()),n.handlers[e].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(a,s){if(!n.disabled){a=Ip(a);var o=n.handlers[a.type];if(o)for(var l=o.slice(0),c=0,u=l.length;c<u&&!a.isImmediatePropagationStopped();c++)try{l[c].call(t,a,s)}catch(d){Ke.error(d)}}}),n.handlers[e].length===1)if(t.addEventListener){var i=!1;v9()&&y9.indexOf(e)>-1&&(i={passive:!0}),t.addEventListener(e,n.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,n.dispatcher)}function _r(t,e,r){if(!!Nr.has(t)){var n=Nr.get(t);if(!!n.handlers){if(Array.isArray(e))return cb(_r,t,e,r);var i=function(c,u){n.handlers[u]=[],QT(c,u)};if(e===void 0){for(var a in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},a)&&i(t,a);return}var s=n.handlers[e];if(!!s){if(!r){i(t,e);return}if(r.guid)for(var o=0;o<s.length;o++)s[o].guid===r.guid&&s.splice(o--,1);QT(t,e)}}}}function vl(t,e,r){var n=Nr.has(t)?Nr.get(t):{},i=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Ip(e),n.dispatcher&&n.dispatcher.call(t,e,r),i&&!e.isPropagationStopped()&&e.bubbles===!0)vl.call(null,i,e,r);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){Nr.has(e.target)||Nr.set(e.target,{});var a=Nr.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function Pp(t,e,r){if(Array.isArray(e))return cb(Pp,t,e,r);var n=function i(){_r(t,e,i),r.apply(this,arguments)};n.guid=r.guid=r.guid||Vn(),si(t,e,n)}function BP(t,e,r){var n=function i(){_r(t,e,i),r.apply(this,arguments)};n.guid=r.guid=r.guid||Vn(),si(t,e,n)}var b9=Object.freeze({__proto__:null,fixEvent:Ip,on:si,off:_r,trigger:vl,one:Pp,any:BP}),Di=30,St=function(e,r,n){r.guid||(r.guid=Vn());var i=r.bind(e);return i.guid=n?n+"_"+r.guid:r.guid,i},Fn=function(e,r){var n=L.performance.now(),i=function(){var s=L.performance.now();s-n>=r&&(e.apply(void 0,arguments),n=s)};return i},w9=function(e,r,n,i){i===void 0&&(i=L);var a,s=function(){i.clearTimeout(a),a=null},o=function(){var c=this,u=arguments,d=function(){a=null,d=null,n||e.apply(c,u)};!a&&n&&e.apply(c,u),i.clearTimeout(a),a=i.setTimeout(d,r)};return o.cancel=s,o},nr=function(){};nr.prototype.allowedEvents_={};nr.prototype.on=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},si(this,t,e),this.addEventListener=r};nr.prototype.addEventListener=nr.prototype.on;nr.prototype.off=function(t,e){_r(this,t,e)};nr.prototype.removeEventListener=nr.prototype.off;nr.prototype.one=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},Pp(this,t,e),this.addEventListener=r};nr.prototype.any=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},BP(this,t,e),this.addEventListener=r};nr.prototype.trigger=function(t){var e=t.type||t;typeof t=="string"&&(t={type:e}),t=Ip(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),vl(this,t)};nr.prototype.dispatchEvent=nr.prototype.trigger;var jl;nr.prototype.queueTrigger=function(t){var e=this;jl||(jl=new Map);var r=t.type||t,n=jl.get(this);n||(n=new Map,jl.set(this,n));var i=n.get(r);n.delete(r),L.clearTimeout(i);var a=L.setTimeout(function(){n.size===0&&(n=null,jl.delete(e)),e.trigger(t)},0);n.set(r,a)};var Op=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},kn=function(e){return e instanceof nr||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(r){return typeof e[r]=="function"})},_9=function(e,r){kn(e)?r():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(r))},vv=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},rf=function(e,r,n){if(!e||!e.nodeName&&!kn(e))throw new Error("Invalid target for "+Op(r)+"#"+n+"; must be a DOM node or evented object.")},UP=function(e,r,n){if(!vv(e))throw new Error("Invalid event type for "+Op(r)+"#"+n+"; must be a non-empty string or array.")},zP=function(e,r,n){if(typeof e!="function")throw new Error("Invalid listener for "+Op(r)+"#"+n+"; must be a function.")},Ug=function(e,r,n){var i=r.length<3||r[0]===e||r[0]===e.eventBusEl_,a,s,o;return i?(a=e.eventBusEl_,r.length>=3&&r.shift(),s=r[0],o=r[1]):(a=r[0],s=r[1],o=r[2]),rf(a,e,n),UP(s,e,n),zP(o,e,n),o=St(e,o),{isTargetingSelf:i,target:a,type:s,listener:o}},Va=function(e,r,n,i){rf(e,e,r),e.nodeName?b9[r](e,n,i):e[r](n,i)},x9={on:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=Ug(this,n,"on"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(Va(o,"on",l,c),!s){var u=function(){return e.off(o,l,c)};u.guid=c.guid;var d=function(){return e.off("dispose",u)};d.guid=c.guid,Va(this,"on","dispose",u),Va(o,"on","dispose",d)}},one:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=Ug(this,n,"one"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(s)Va(o,"one",l,c);else{var u=function d(){e.off(o,l,d);for(var h=arguments.length,p=new Array(h),b=0;b<h;b++)p[b]=arguments[b];c.apply(null,p)};u.guid=c.guid,Va(o,"one",l,u)}},any:function(){for(var e=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=Ug(this,n,"any"),s=a.isTargetingSelf,o=a.target,l=a.type,c=a.listener;if(s)Va(o,"any",l,c);else{var u=function d(){e.off(o,l,d);for(var h=arguments.length,p=new Array(h),b=0;b<h;b++)p[b]=arguments[b];c.apply(null,p)};u.guid=c.guid,Va(o,"any",l,u)}},off:function(e,r,n){if(!e||vv(e))_r(this.eventBusEl_,e,r);else{var i=e,a=r;rf(i,this,"off"),UP(a,this,"off"),zP(n,this,"off"),n=St(this,n),this.off("dispose",n),i.nodeName?(_r(i,a,n),_r(i,"dispose",n)):kn(i)&&(i.off(a,n),i.off("dispose",n))}},trigger:function(e,r){rf(this.eventBusEl_,this,"trigger");var n=e&&typeof e!="string"?e.type:e;if(!vv(n)){var i="Invalid event type for "+Op(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||Ke).error(i);else throw new Error(i)}return vl(this.eventBusEl_,e,r)}};function ub(t,e){e===void 0&&(e={});var r=e,n=r.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=tt("span",{className:"vjs-event-bus"});return Ot(t,x9),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(i){i()}),t.on("dispose",function(){t.off(),[t,t.el_,t.eventBusEl_].forEach(function(i){i&&Nr.has(i)&&Nr.delete(i)}),L.setTimeout(function(){t.eventBusEl_=null},0)}),t}var T9={state:{},setState:function(e){var r=this;typeof e=="function"&&(e=e());var n;return bo(e,function(i,a){r.state[a]!==i&&(n=n||{},n[a]={from:r.state[a],to:i}),r.state[a]=i}),n&&kn(this)&&this.trigger({changes:n,type:"statechanged"}),n}};function $P(t,e){return Ot(t,T9),t.state=Ot({},t.state,e),typeof t.handleStateChanged=="function"&&kn(t)&&t.on("statechanged",t.handleStateChanged),t}var ch=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toLowerCase()})},jt=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toUpperCase()})},S9=function(e,r){return jt(e)===jt(r)};function xt(){for(var t={},e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach(function(i){!i||bo(i,function(a,s){if(!eu(a)){t[s]=a;return}eu(t[s])||(t[s]={}),t[s]=xt(t[s],a)})}),t}var E9=function(){function t(){this.map_={}}var e=t.prototype;return e.has=function(n){return n in this.map_},e.delete=function(n){var i=this.has(n);return delete this.map_[n],i},e.set=function(n,i){return this.map_[n]=i,this},e.forEach=function(n,i){for(var a in this.map_)n.call(i,this.map_[a],a,this)},t}(),k9=L.Map?L.Map:E9,C9=function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(n){return n in this.set_},e.delete=function(n){var i=this.has(n);return delete this.set_[n],i},e.add=function(n){return this.set_[n]=1,this},e.forEach=function(n,i){for(var a in this.set_)n.call(i,a,a,this)},t}(),zg=L.Set?L.Set:C9,J=function(){function t(r,n,i){var a=this;if(!r&&this.play?this.player_=r=this:this.player_=r,this.isDisposed_=!1,this.parentComponent_=null,this.options_=xt({},this.options_),n=this.options_=xt(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var s=r&&r.id&&r.id()||"no_player";this.id_=s+"_component_"+Vn()}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(function(o){return a.addClass(o)}),n.evented!==!1&&(ub(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),$P(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new zg,this.setIntervalIds_=new zg,this.rafIds_=new zg,this.namedRafs_=new k9,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(i),n.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=t.prototype;return e.dispose=function(n){if(n===void 0&&(n={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(n.restoreEl?this.el_.parentNode.replaceChild(n.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(n){return n?(this.options_=xt(this.options_,n),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(n,i,a){return tt(n,i,a)},e.localize=function(n,i,a){a===void 0&&(a=n);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[s],c=s&&s.split("-")[0],u=o&&o[c],d=a;return l&&l[n]?d=l[n]:u&&u[n]&&(d=u[n]),i&&(d=d.replace(/\{(\d+)\}/g,function(h,p){var b=i[p-1],w=b;return typeof b=="undefined"&&(w=h),w})),d},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(n){return this.childIndex_[n]},e.getChild=function(n){if(!!n)return this.childNameIndex_[n]},e.getDescendant=function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];i=i.reduce(function(l,c){return l.concat(c)},[]);for(var s=this,o=0;o<i.length;o++)if(s=s.getChild(i[o]),!s||!s.getChild)return;return s},e.addChild=function(n,i,a){i===void 0&&(i={}),a===void 0&&(a=this.children_.length);var s,o;if(typeof n=="string"){o=jt(n);var l=i.componentClass||o;i.name=o;var c=t.getComponent(l);if(!c)throw new Error("Component "+l+" does not exist");if(typeof c!="function")return null;s=new c(this.player_||this,i)}else s=n;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(a,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&jt(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[ch(o)]=s),typeof s.el=="function"&&s.el()){var u=null;this.children_[a+1]&&(this.children_[a+1].el_?u=this.children_[a+1].el_:ml(this.children_[a+1])&&(u=this.children_[a+1])),this.contentEl().insertBefore(s.el(),u)}return s},e.removeChild=function(n){if(typeof n=="string"&&(n=this.getChild(n)),!(!n||!this.children_)){for(var i=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===n){i=!0,this.children_.splice(a,1);break}if(!!i){n.parentComponent_=null,this.childIndex_[n.id()]=null,this.childNameIndex_[jt(n.name())]=null,this.childNameIndex_[ch(n.name())]=null;var s=n.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(n.el())}}},e.initChildren=function(){var n=this,i=this.options_.children;if(i){var a=this.options_,s=function(u){var d=u.name,h=u.opts;if(a[d]!==void 0&&(h=a[d]),h!==!1){h===!0&&(h={}),h.playerOptions=n.options_.playerOptions;var p=n.addChild(d,h);p&&(n[d]=p)}},o,l=t.getComponent("Tech");Array.isArray(i)?o=i:o=Object.keys(i),o.concat(Object.keys(this.options_).filter(function(c){return!o.some(function(u){return typeof u=="string"?c===u:c===u.name})})).map(function(c){var u,d;return typeof c=="string"?(u=c,d=i[u]||n.options_[u]||{}):(u=c.name,d=c),{name:u,opts:d}}).filter(function(c){var u=t.getComponent(c.opts.componentClass||jt(c.name));return u&&!l.isTech(u)}).forEach(s)}},e.buildCSSClass=function(){return""},e.ready=function(n,i){if(i===void 0&&(i=!1),!!n){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(n);return}i?n.call(this):this.setTimeout(n,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var n=this.readyQueue_;this.readyQueue_=[],n&&n.length>0&&n.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},e.$=function(n,i){return Ta(n,i||this.contentEl())},e.$$=function(n,i){return LP(n,i||this.contentEl())},e.hasClass=function(n){return ps(this.el_,n)},e.addClass=function(n){En(this.el_,n)},e.removeClass=function(n){Fu(this.el_,n)},e.toggleClass=function(n,i){EP(this.el_,n,i)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(n){return CP(this.el_,n)},e.setAttribute=function(n,i){$o(this.el_,n,i)},e.removeAttribute=function(n){Cp(this.el_,n)},e.width=function(n,i){return this.dimension("width",n,i)},e.height=function(n,i){return this.dimension("height",n,i)},e.dimensions=function(n,i){this.width(n,!0),this.height(i)},e.dimension=function(n,i,a){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[n]=i:i==="auto"?this.el_.style[n]="":this.el_.style[n]=i+"px",a||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[n],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+jt(n)],10)},e.currentDimension=function(n){var i=0;if(n!=="width"&&n!=="height")throw new Error("currentDimension only accepts width or height value");if(i=tu(this.el_,n),i=parseFloat(i),i===0||isNaN(i)){var a="offset"+jt(n);i=this.el_[a]}return i},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(n){this.player_&&(ze.isEventKey(n,"Tab")||n.stopPropagation(),this.player_.handleKeyDown(n))},e.handleKeyPress=function(n){this.handleKeyDown(n)},e.emitTapEvents=function(){var n=0,i=null,a=10,s=200,o;this.on("touchstart",function(c){c.touches.length===1&&(i={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY},n=L.performance.now(),o=!0)}),this.on("touchmove",function(c){if(c.touches.length>1)o=!1;else if(i){var u=c.touches[0].pageX-i.pageX,d=c.touches[0].pageY-i.pageY,h=Math.sqrt(u*u+d*d);h>a&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(c){if(i=null,o===!0){var u=L.performance.now()-n;u<s&&(c.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var n=St(this.player(),this.player().reportUserActivity),i;this.on("touchstart",function(){n(),this.clearInterval(i),i=this.setInterval(n,250)});var a=function(o){n(),this.clearInterval(i)};this.on("touchmove",n),this.on("touchend",a),this.on("touchcancel",a)}},e.setTimeout=function(n,i){var a=this,s;return n=St(this,n),this.clearTimersOnDispose_(),s=L.setTimeout(function(){a.setTimeoutIds_.has(s)&&a.setTimeoutIds_.delete(s),n()},i),this.setTimeoutIds_.add(s),s},e.clearTimeout=function(n){return this.setTimeoutIds_.has(n)&&(this.setTimeoutIds_.delete(n),L.clearTimeout(n)),n},e.setInterval=function(n,i){n=St(this,n),this.clearTimersOnDispose_();var a=L.setInterval(n,i);return this.setIntervalIds_.add(a),a},e.clearInterval=function(n){return this.setIntervalIds_.has(n)&&(this.setIntervalIds_.delete(n),L.clearInterval(n)),n},e.requestAnimationFrame=function(n){var i=this;if(!this.supportsRaf_)return this.setTimeout(n,1e3/60);this.clearTimersOnDispose_();var a;return n=St(this,n),a=L.requestAnimationFrame(function(){i.rafIds_.has(a)&&i.rafIds_.delete(a),n()}),this.rafIds_.add(a),a},e.requestNamedAnimationFrame=function(n,i){var a=this;if(!this.namedRafs_.has(n)){this.clearTimersOnDispose_(),i=St(this,i);var s=this.requestAnimationFrame(function(){i(),a.namedRafs_.has(n)&&a.namedRafs_.delete(n)});return this.namedRafs_.set(n,s),n}},e.cancelNamedAnimationFrame=function(n){!this.namedRafs_.has(n)||(this.cancelAnimationFrame(this.namedRafs_.get(n)),this.namedRafs_.delete(n))},e.cancelAnimationFrame=function(n){return this.supportsRaf_?(this.rafIds_.has(n)&&(this.rafIds_.delete(n),L.cancelAnimationFrame(n)),n):this.clearTimeout(n)},e.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(i){var a=i[0],s=i[1];n[a].forEach(function(o,l){return n[s](l)})}),n.clearingTimersOnDispose_=!1}))},t.registerComponent=function(n,i){if(typeof n!="string"||!n)throw new Error('Illegal component name, "'+n+'"; must be a non-empty string.');var a=t.getComponent("Tech"),s=a&&a.isTech(i),o=t===i||t.prototype.isPrototypeOf(i.prototype);if(s||!o){var l;throw s?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+n+'"; '+l+".")}n=jt(n),t.components_||(t.components_={});var c=t.getComponent("Player");if(n==="Player"&&c&&c.players){var u=c.players,d=Object.keys(u);if(u&&d.length>0&&d.map(function(h){return u[h]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[n]=i,t.components_[ch(n)]=i,i},t.getComponent=function(n){if(!(!n||!t.components_))return t.components_[n]},t}();J.prototype.supportsRaf_=typeof L.requestAnimationFrame=="function"&&typeof L.cancelAnimationFrame=="function";J.registerComponent("Component",J);function A9(t,e,r){if(typeof e!="number"||e<0||e>r)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+r+").")}function JT(t,e,r,n){return A9(t,n,r.length-1),r[n][e]}function $g(t){var e;return t===void 0||t.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:JT.bind(null,"start",0,t),end:JT.bind(null,"end",1,t)},L.Symbol&&L.Symbol.iterator&&(e[L.Symbol.iterator]=function(){return(t||[]).values()}),e}function gs(t,e){return Array.isArray(t)?$g(t):t===void 0||e===void 0?$g():$g([[t,e]])}function VP(t,e){var r=0,n,i;if(!e)return 0;(!t||!t.length)&&(t=gs(0,0));for(var a=0;a<t.length;a++)n=t.start(a),i=t.end(a),i>e&&(i=e),r+=i-n;return r/e}function jr(t){if(t instanceof jr)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:jn(t)&&(typeof t.code=="number"&&(this.code=t.code),Ot(this,t)),this.message||(this.message=jr.defaultMessages[this.code]||"")}jr.prototype.code=0;jr.prototype.message="";jr.prototype.status=null;jr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];jr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ys=0;Ys<jr.errorTypes.length;Ys++)jr[jr.errorTypes[Ys]]=Ys,jr.prototype[jr.errorTypes[Ys]]=Ys;function mc(t){return t!=null&&typeof t.then=="function"}function Hi(t){mc(t)&&t.then(null,function(e){})}var yv=function(e){var r=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(n,i,a){return e[i]&&(n[i]=e[i]),n},{cues:e.cues&&Array.prototype.map.call(e.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})});return r},I9=function(e){var r=e.$$("track"),n=Array.prototype.map.call(r,function(a){return a.track}),i=Array.prototype.map.call(r,function(a){var s=yv(a.track);return a.src&&(s.src=a.src),s});return i.concat(Array.prototype.filter.call(e.textTracks(),function(a){return n.indexOf(a)===-1}).map(yv))},P9=function(e,r){return e.forEach(function(n){var i=r.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(function(a){return i.addCue(a)})}),r.textTracks()},ZT={textTracksToJson:I9,jsonToTextTracks:P9,trackToJson_:yv},Vg="vjs-modal-dialog",yl=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.close_=function(s){return a.close(s)},a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=tt("div",{className:Vg+"-content"},{role:"document"}),a.descEl_=tt("p",{className:Vg+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),Ms(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},r.buildCSSClass=function(){return Vg+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},r.open=function(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(i){return typeof i=="boolean"&&this[i?"open":"close"](),this.opened_},r.close=function(){if(!!this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(i){if(typeof i=="boolean"){var a=this.closeable_=!!i,s=this.getChild("closeButton");if(a&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(i){var a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),DP(a,i),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);var l=this.getChild("closeButton");l&&s.appendChild(l.el_)},r.empty=function(){this.trigger("beforemodalempty"),ob(this.contentEl()),this.trigger("modalempty")},r.content=function(i){return typeof i!="undefined"&&(this.content_=i),this.content_},r.conditionalFocus_=function(){var i=le.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(i)||a===i)&&(this.previouslyActiveEl_=i,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(i){if(i.stopPropagation(),ze.isEventKey(i,"Escape")&&this.closeable()){i.preventDefault(),this.close();return}if(!!ze.isEventKey(i,"Tab")){for(var a=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,l=0;l<a.length;l++)if(s===a[l]){o=l;break}le.activeElement===this.el_&&(o=0),i.shiftKey&&o===0?(a[a.length-1].focus(),i.preventDefault()):!i.shiftKey&&o===a.length-1&&(a[0].focus(),i.preventDefault())}},r.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(a){return(a instanceof L.HTMLAnchorElement||a instanceof L.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof L.HTMLInputElement||a instanceof L.HTMLSelectElement||a instanceof L.HTMLTextAreaElement||a instanceof L.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof L.HTMLIFrameElement||a instanceof L.HTMLObjectElement||a instanceof L.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},e}(J);yl.prototype.options_={pauseOnOpen:!0,temporary:!0};J.registerComponent("ModalDialog",yl);var Ho=function(t){ge(e,t);function e(n){var i;n===void 0&&(n=[]),i=t.call(this)||this,i.tracks_=[],Object.defineProperty(Ne(i),"length",{get:function(){return this.tracks_.length}});for(var a=0;a<n.length;a++)i.addTrack(n[a]);return i}var r=e.prototype;return r.addTrack=function(i){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(i)===-1&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){a.trigger({track:i,type:"labelchange",target:a})},kn(i)&&i.addEventListener("labelchange",i.labelchange_)},r.removeTrack=function(i){for(var a,s=0,o=this.length;s<o;s++)if(this[s]===i){a=this[s],a.off&&a.off(),this.tracks_.splice(s,1);break}!a||this.trigger({track:a,type:"removetrack",target:this})},r.getTrackById=function(i){for(var a=null,s=0,o=this.length;s<o;s++){var l=this[s];if(l.id===i){a=l;break}}return a},e}(nr);Ho.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var O9 in Ho.prototype.allowedEvents_)Ho.prototype["on"+O9]=null;var Hg=function(e,r){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||r.id===e[n].id||(e[n].enabled=!1)},D9=function(t){ge(e,t);function e(n){var i;n===void 0&&(n=[]);for(var a=n.length-1;a>=0;a--)if(n[a].enabled){Hg(n,n[a]);break}return i=t.call(this,n)||this,i.changing_=!1,i}var r=e.prototype;return r.addTrack=function(i){var a=this;i.enabled&&Hg(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){a.changing_||(a.changing_=!0,Hg(a,i),a.changing_=!1,a.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},e}(Ho),qg=function(e,r){for(var n=0;n<e.length;n++)!Object.keys(e[n]).length||r.id===e[n].id||(e[n].selected=!1)},L9=function(t){ge(e,t);function e(n){var i;n===void 0&&(n=[]);for(var a=n.length-1;a>=0;a--)if(n[a].selected){qg(n,n[a]);break}return i=t.call(this,n)||this,i.changing_=!1,Object.defineProperty(Ne(i),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),i}var r=e.prototype;return r.addTrack=function(i){var a=this;i.selected&&qg(this,i),t.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){a.changing_||(a.changing_=!0,qg(a,i),a.changing_=!1,a.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},e}(Ho),HP=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.addTrack=function(i){var a=this;t.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(i.kind)===-1&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},r.removeTrack=function(i){t.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Ho),R9=function(){function t(r){r===void 0&&(r=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=r.length;n<i;n++)this.addTrackElement_(r[n])}var e=t.prototype;return e.addTrackElement_=function(n){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),this.trackElements_.indexOf(n)===-1&&this.trackElements_.push(n)},e.getTrackElementByTrack_=function(n){for(var i,a=0,s=this.trackElements_.length;a<s;a++)if(n===this.trackElements_[a].track){i=this.trackElements_[a];break}return i},e.removeTrackElement_=function(n){for(var i=0,a=this.trackElements_.length;i<a;i++)if(n===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},t}(),e1=function(){function t(r){t.prototype.setCues_.call(this,r),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(n){var i=this.length||0,a=0,s=n.length;this.cues_=n,this.length_=n.length;var o=function(c){""+c in this||Object.defineProperty(this,""+c,{get:function(){return this.cues_[c]}})};if(i<s)for(a=i;a<s;a++)o.call(this,a)},e.getCueById=function(n){for(var i=null,a=0,s=this.length;a<s;a++){var o=this[a];if(o.id===n){i=o;break}}return i},t}(),M9={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},N9={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},j9={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},t1={disabled:"disabled",hidden:"hidden",showing:"showing"},db=function(t){ge(e,t);function e(r){var n;r===void 0&&(r={}),n=t.call(this)||this;var i={id:r.id||"vjs_track_"+Vn(),kind:r.kind||"",language:r.language||""},a=r.label||"",s=function(c){Object.defineProperty(Ne(n),c,{get:function(){return i[c]},set:function(){}})};for(var o in i)s(o);return Object.defineProperty(Ne(n),"label",{get:function(){return a},set:function(c){c!==a&&(a=c,this.trigger("labelchange"))}}),n}return e}(nr),hb=function(e){var r=["protocol","hostname","port","pathname","search","hash","host"],n=le.createElement("a");n.href=e;for(var i={},a=0;a<r.length;a++)i[r[a]]=n[r[a]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=L.location.protocol),i.host||(i.host=L.location.host),i},qP=function(e){if(!e.match(/^https?:\/\//)){var r=le.createElement("a");r.href=e,e=r.href}return e},fb=function(e){if(typeof e=="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=r.exec(e);if(n)return n.pop().toLowerCase()}return""},Dp=function(e,r){r===void 0&&(r=L.location);var n=hb(e),i=n.protocol===":"?r.protocol:n.protocol,a=i+n.host!==r.protocol+r.host;return a},F9=Object.freeze({__proto__:null,parseUrl:hb,getAbsoluteURL:qP,getFileExtension:fb,isCrossOrigin:Dp}),r1=function(e,r){var n=new L.WebVTT.Parser(L,L.vttjs,L.WebVTT.StringDecoder()),i=[];n.oncue=function(a){r.addCue(a)},n.onparsingerror=function(a){i.push(a)},n.onflush=function(){r.trigger({type:"loadeddata",target:r})},n.parse(e),i.length>0&&(L.console&&L.console.groupCollapsed&&L.console.groupCollapsed("Text Track parsing errors for "+r.src),i.forEach(function(a){return Ke.error(a)}),L.console&&L.console.groupEnd&&L.console.groupEnd()),n.flush()},i1=function(e,r){var n={uri:e},i=Dp(e);i&&(n.cors=i);var a=r.tech_.crossOrigin()==="use-credentials";a&&(n.withCredentials=a),mI(n,St(this,function(s,o,l){if(s)return Ke.error(s,o);r.loaded_=!0,typeof L.WebVTT!="function"?r.tech_&&r.tech_.any(["vttjsloaded","vttjserror"],function(c){if(c.type==="vttjserror"){Ke.error("vttjs failed to load, stopping trying to process "+r.src);return}return r1(l,r)}):r1(l,r)}))},Bu=function(t){ge(e,t);function e(n){var i;if(n===void 0&&(n={}),!n.tech)throw new Error("A tech was not provided.");var a=xt(n,{kind:j9[n.kind]||"subtitles",language:n.language||n.srclang||""}),s=t1[a.mode]||"disabled",o=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(s="hidden"),i=t.call(this,a)||this,i.tech_=a.tech,i.cues_=[],i.activeCues_=[],i.preload_=i.tech_.preloadTextTracks!==!1;var l=new e1(i.cues_),c=new e1(i.activeCues_),u=!1;i.timeupdateHandler=St(Ne(i),function(h){if(h===void 0&&(h={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1),h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var d=function(){i.stopTracking()};return i.tech_.one("dispose",d),s!=="disabled"&&i.startTracking(),Object.defineProperties(Ne(i),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(p){!t1[p]||s!==p&&(s=p,!this.preload_&&s!=="disabled"&&this.cues.length===0&&i1(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return c;for(var p=this.tech_.currentTime(),b=[],w=0,v=this.cues.length;w<v;w++){var T=this.cues[w];(T.startTime<=p&&T.endTime>=p||T.startTime===T.endTime&&T.startTime<=p&&T.startTime+.5>=p)&&b.push(T)}if(u=!1,b.length!==this.activeCues_.length)u=!0;else for(var E=0;E<b.length;E++)this.activeCues_.indexOf(b[E])===-1&&(u=!0);return this.activeCues_=b,c.setCues_(this.activeCues_),c},set:function(){}}}),a.src?(i.src=a.src,i.preload_||(i.loaded_=!0),(i.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&i1(i.src,Ne(i))):i.loaded_=!0,i}var r=e.prototype;return r.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},r.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},r.addCue=function(i){var a=i;if(L.vttjs&&!(i instanceof L.vttjs.VTTCue)){a=new L.vttjs.VTTCue(i.startTime,i.endTime,i.text);for(var s in i)s in a||(a[s]=i[s]);a.id=i.id,a.originalCue_=i}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},r.removeCue=function(i){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===i||s.originalCue_&&s.originalCue_===i){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},e}(db);Bu.prototype.allowedEvents_={cuechange:"cuechange"};var GP=function(t){ge(e,t);function e(r){var n;r===void 0&&(r={});var i=xt(r,{kind:N9[r.kind]||""});n=t.call(this,i)||this;var a=!1;return Object.defineProperty(Ne(n),"enabled",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return e}(db),WP=function(t){ge(e,t);function e(r){var n;r===void 0&&(r={});var i=xt(r,{kind:M9[r.kind]||""});n=t.call(this,i)||this;var a=!1;return Object.defineProperty(Ne(n),"selected",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return e}(db),KP=0,B9=1,YP=2,U9=3,bl=function(t){ge(e,t);function e(r){var n;r===void 0&&(r={}),n=t.call(this)||this;var i,a=new Bu(r);return n.kind=a.kind,n.src=a.src,n.srclang=a.language,n.label=a.label,n.default=a.default,Object.defineProperties(Ne(n),{readyState:{get:function(){return i}},track:{get:function(){return a}}}),i=KP,a.addEventListener("loadeddata",function(){i=YP,n.trigger({type:"load",target:Ne(n)})}),n}return e}(nr);bl.prototype.allowedEvents_={load:"load"};bl.NONE=KP;bl.LOADING=B9;bl.LOADED=YP;bl.ERROR=U9;var gi={audio:{ListClass:D9,TrackClass:GP,capitalName:"Audio"},video:{ListClass:L9,TrackClass:WP,capitalName:"Video"},text:{ListClass:HP,TrackClass:Bu,capitalName:"Text"}};Object.keys(gi).forEach(function(t){gi[t].getterName=t+"Tracks",gi[t].privateName=t+"Tracks_"});var qo={remoteText:{ListClass:HP,TrackClass:Bu,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:R9,TrackClass:bl,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Lr=vi({},gi,qo);qo.names=Object.keys(qo);gi.names=Object.keys(gi);Lr.names=[].concat(qo.names).concat(gi.names);function z9(t,e,r,n,i){i===void 0&&(i={});var a=t.textTracks();i.kind=e,r&&(i.label=r),n&&(i.language=n),i.tech=t;var s=new Lr.text.TrackClass(i);return a.addTrack(s),s}var yt=function(t){ge(e,t);function e(n,i){var a;return n===void 0&&(n={}),i===void 0&&(i=function(){}),n.reportTouchActivity=!1,a=t.call(this,null,n,i)||this,a.onDurationChange_=function(s){return a.onDurationChange(s)},a.trackProgress_=function(s){return a.trackProgress(s)},a.trackCurrentTime_=function(s){return a.trackCurrentTime(s)},a.stopTrackingCurrentTime_=function(s){return a.stopTrackingCurrentTime(s)},a.disposeSourceHandler_=function(s){return a.disposeSourceHandler(s)},a.queuedHanders_=new Set,a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),Lr.names.forEach(function(s){var o=Lr[s];n&&n[o.getterName]&&(a[o.privateName]=n[o.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){n["native"+s+"Tracks"]===!1&&(a["featuresNative"+s+"Tracks"]=!1)}),n.nativeCaptions===!1||n.nativeTextTracks===!1?a.featuresNativeTextTracks=!1:(n.nativeCaptions===!0||n.nativeTextTracks===!0)&&(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.preloadTextTracks=n.preloadTextTracks!==!1,a.autoRemoteTextTracks_=new Lr.text.ListClass,a.initTrackListeners(),n.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}var r=e.prototype;return r.triggerSourceset=function(i){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},r.trackProgress=function(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(St(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(i){this.duration_=this.duration()},r.buffered=function(){return gs(0,0)},r.bufferedPercent=function(){return VP(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(gi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},r.clearTracks=function(i){var a=this;i=[].concat(i),i.forEach(function(s){for(var o=a[s+"Tracks"]()||[],l=o.length;l--;){var c=o[l];s==="text"&&a.removeRemoteTextTrack(c),o.removeTrack(c)}})},r.cleanupAutoTextTracks=function(){for(var i=this.autoRemoteTextTracks_||[],a=i.length;a--;){var s=i[a];this.removeRemoteTextTrack(s)}},r.reset=function(){},r.crossOrigin=function(){},r.setCrossOrigin=function(){},r.error=function(i){return i!==void 0&&(this.error_=new jr(i),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?gs(0,0):gs()},r.play=function(){},r.setScrubbing=function(){},r.scrubbing=function(){},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var i=this;gi.names.forEach(function(a){var s=gi[a],o=function(){i.trigger(a+"trackchange")},l=i[s.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),i.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},r.addWebVttScript_=function(){var i=this;if(!L.WebVTT)if(le.body.contains(this.el())){if(!this.options_["vtt.js"]&&eu(yT)&&Object.keys(yT).length>0){this.trigger("vttjsloaded");return}var a=le.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){i.trigger("vttjsloaded")},a.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),L.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},r.emulateTextTracks=function(){var i=this,a=this.textTracks(),s=this.remoteTextTracks(),o=function(h){return a.addTrack(h.track)},l=function(h){return a.removeTrack(h.track)};s.on("addtrack",o),s.on("removetrack",l),this.addWebVttScript_();var c=function(){return i.trigger("texttrackchange")},u=function(){c();for(var h=0;h<a.length;h++){var p=a[h];p.removeEventListener("cuechange",c),p.mode==="showing"&&p.addEventListener("cuechange",c)}};u(),a.addEventListener("change",u),a.addEventListener("addtrack",u),a.addEventListener("removetrack",u),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",l),a.removeEventListener("change",u),a.removeEventListener("addtrack",u),a.removeEventListener("removetrack",u);for(var d=0;d<a.length;d++){var h=a[d];h.removeEventListener("cuechange",c)}})},r.addTextTrack=function(i,a,s){if(!i)throw new Error("TextTrack kind is required but was not provided");return z9(this,i,a,s)},r.createRemoteTextTrack=function(i){var a=xt(i,{tech:this});return new qo.remoteTextEl.TrackClass(a)},r.addRemoteTextTrack=function(i,a){var s=this;i===void 0&&(i={});var o=this.createRemoteTextTrack(i);return a!==!0&&a!==!1&&(Ke.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),a!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},r.removeRemoteTextTrack=function(i){var a=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictureInPicture=function(){var i=this.options_.Promise||L.Promise;if(i)return i.reject()},r.disablePictureInPicture=function(){return!0},r.setDisablePictureInPicture=function(){},r.requestVideoFrameCallback=function(i){var a=this,s=Vn();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){a.queuedHanders_.has(s)&&(a.queuedHanders_.delete(s),i())})):this.requestNamedAnimationFrame(s,i),s},r.cancelVideoFrameCallback=function(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(i,a){return e.canPlayType(i.type)},e.isTech=function(i){return i.prototype instanceof e||i instanceof e||i===e},e.registerTech=function(i,a){if(e.techs_||(e.techs_={}),!e.isTech(a))throw new Error("Tech "+i+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=jt(i),e.techs_[i]=a,e.techs_[ch(i)]=a,i!=="Tech"&&e.defaultTechOrder_.push(i),a},e.getTech=function(i){if(!!i){if(e.techs_&&e.techs_[i])return e.techs_[i];if(i=jt(i),L&&L.videojs&&L.videojs[i])return Ke.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),L.videojs[i]}},e}(J);Lr.names.forEach(function(t){var e=Lr[t];yt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});yt.prototype.featuresVolumeControl=!0;yt.prototype.featuresMuteControl=!0;yt.prototype.featuresFullscreenResize=!1;yt.prototype.featuresPlaybackRate=!1;yt.prototype.featuresProgressEvents=!1;yt.prototype.featuresSourceset=!1;yt.prototype.featuresTimeupdateEvents=!1;yt.prototype.featuresNativeTextTracks=!1;yt.prototype.featuresVideoFrameCallback=!1;yt.withSourceHandlers=function(t){t.registerSourceHandler=function(r,n){var i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),n===void 0&&(n=i.length),i.splice(n,0,r)},t.canPlayType=function(r){for(var n=t.sourceHandlers||[],i,a=0;a<n.length;a++)if(i=n[a].canPlayType(r),i)return i;return""},t.selectSourceHandler=function(r,n){for(var i=t.sourceHandlers||[],a,s=0;s<i.length;s++)if(a=i[s].canHandleSource(r,n),a)return i[s];return null},t.canPlaySource=function(r,n){var i=t.selectSourceHandler(r,n);return i?i.canHandleSource(r,n):""};var e=["seekable","seeking","duration"];e.forEach(function(r){var n=this[r];typeof n=="function"&&(this[r]=function(){return this.sourceHandler_&&this.sourceHandler_[r]?this.sourceHandler_[r].apply(this.sourceHandler_,arguments):n.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(r){var n=t.selectSourceHandler(r,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:Ke.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==t.nativeSourceHandler&&(this.currentSource_=r),this.sourceHandler_=n.handleSource(r,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};J.registerComponent("Tech",yt);yt.registerTech("Tech",yt);yt.defaultTechOrder_=[];var ms={},bv={},nf={};function $9(t,e){ms[t]=ms[t]||[],ms[t].push(e)}function V9(t,e,r){t.setTimeout(function(){return Ga(e,ms[e.type],r,t)},1)}function H9(t,e){t.forEach(function(r){return r.setTech&&r.setTech(e)})}function q9(t,e,r){return t.reduceRight(pb(r),e[r]())}function G9(t,e,r,n){return e[r](t.reduce(pb(r),n))}function n1(t,e,r,n){n===void 0&&(n=null);var i="call"+jt(r),a=t.reduce(pb(i),n),s=a===nf,o=s?null:e[r](a);return Y9(t,r,o,s),o}var W9={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},K9={setCurrentTime:1,setMuted:1,setVolume:1},a1={play:1,pause:1};function pb(t){return function(e,r){return e===nf?nf:r[t]?r[t](e):e}}function Y9(t,e,r,n){for(var i=t.length-1;i>=0;i--){var a=t[i];a[e]&&a[e](n,r)}}function X9(t){bv[t.id()]=null}function Q9(t,e){var r=bv[t.id()],n=null;if(r==null)return n=e(t),bv[t.id()]=[[e,n]],n;for(var i=0;i<r.length;i++){var a=r[i],s=a[0],o=a[1];s===e&&(n=o)}return n===null&&(n=e(t),r.push([e,n])),n}function Ga(t,e,r,n,i,a){t===void 0&&(t={}),e===void 0&&(e=[]),i===void 0&&(i=[]),a===void 0&&(a=!1);var s=e,o=s[0],l=s.slice(1);if(typeof o=="string")Ga(t,ms[o],r,n,i,a);else if(o){var c=Q9(n,o);if(!c.setSource)return i.push(c),Ga(t,l,r,n,i,a);c.setSource(Ot({},t),function(u,d){if(u)return Ga(t,l,r,n,i,a);i.push(c),Ga(d,t.type===d.type?l:ms[d.type],r,n,i,a)})}else l.length?Ga(t,l,r,n,i,a):a?r(t,i):Ga(t,ms["*"],r,n,i,!0)}var J9={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},af=function(e){e===void 0&&(e="");var r=fb(e),n=J9[r.toLowerCase()];return n||""},Z9=function(e,r){if(!r)return"";if(e.cache_.source.src===r&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(o){return o.src===r});if(n.length)return n[0].type;for(var i=e.$$("source"),a=0;a<i.length;a++){var s=i[a];if(s.type&&s.src&&s.src===r)return s.type}return af(r)},eW=function t(e){if(Array.isArray(e)){var r=[];e.forEach(function(n){n=t(n),Array.isArray(n)?r=r.concat(n):jn(n)&&r.push(n)}),e=r}else typeof e=="string"&&e.trim()?e=[s1({src:e})]:jn(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[s1(e)]:e=[];return e};function s1(t){if(!t.type){var e=af(t.src);e&&(t.type=e)}return t}var tW=function(t){ge(e,t);function e(r,n,i){var a,s=xt({createEl:!1},n);if(a=t.call(this,r,s,i)||this,!n.playerOptions.sources||n.playerOptions.sources.length===0)for(var o=0,l=n.playerOptions.techOrder;o<l.length;o++){var c=jt(l[o]),u=yt.getTech(c);if(c||(u=J.getComponent(c)),u&&u.isSupported()){r.loadTech_(c);break}}else r.src(n.playerOptions.sources);return a}return e}(J);J.registerComponent("MediaLoader",tW);var Lp=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.options_.controlText&&a.controlText(a.options_.controlText),a.handleMouseOver_=function(s){return a.handleMouseOver(s)},a.handleMouseOut_=function(s){return a.handleMouseOut(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.emitTapEvents(),a.enable(),a}var r=e.prototype;return r.createEl=function(i,a,s){i===void 0&&(i="div"),a===void 0&&(a={}),s===void 0&&(s={}),a=Ot({className:this.buildCSSClass(),tabIndex:0},a),i==="button"&&Ke.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),s=Ot({role:"button"},s),this.tabIndex_=a.tabIndex;var o=tt(i,a,s);return o.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},r.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},r.createControlTextEl=function(i){return this.controlTextEl_=tt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},r.controlText=function(i,a){if(a===void 0&&(a=this.el()),i===void 0)return this.controlText_||"Need Text";var s=this.localize(i);this.controlText_=i,Ms(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",s)},r.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},r.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_!="undefined"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},r.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_!="undefined"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},r.handleLanguagechange=function(){this.controlText(this.controlText_)},r.handleClick=function(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},r.handleKeyDown=function(i){ze.isEventKey(i,"Space")||ze.isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,i)},e}(J);J.registerComponent("ClickableComponent",Lp);var rW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update(),a.update_=function(s){return a.update(s)},n.on("posterchange",a.update_),a}var r=e.prototype;return r.dispose=function(){this.player().off("posterchange",this.update_),t.prototype.dispose.call(this)},r.createEl=function(){var i=tt("div",{className:"vjs-poster",tabIndex:-1});return i},r.update=function(i){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},r.setSrc=function(i){var a="";i&&(a='url("'+i+'")'),this.el_.style.backgroundImage=a},r.handleClick=function(i){if(!!this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((ju||Nu)&&a)&&this.player_.tech(!0).focus(),this.player_.paused()?Hi(this.player_.play()):this.player_.pause()}},e}(Lp);J.registerComponent("PosterImage",rW);var ci="#222",o1="#ccc",iW={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Gg(t,e){var r;if(t.length===4)r=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)r=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+e+")"}function Wg(t,e,r){try{t.style[e]=r}catch{return}}var nW=function(t){ge(e,t);function e(n,i,a){var s;s=t.call(this,n,i,a)||this;var o=function(c){return s.updateDisplay(c)};return n.on("loadstart",function(l){return s.toggleDisplay(l)}),n.on("texttrackchange",o),n.on("loadedmetadata",function(l){return s.preselectTrack(l)}),n.ready(St(Ne(s),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks){this.hide();return}n.on("fullscreenchange",o),n.on("playerresize",o),L.addEventListener("orientationchange",o),n.on("dispose",function(){return L.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],c=0;c<l.length;c++)this.player_.addRemoteTextTrack(l[c],!0);this.preselectTrack()})),s}var r=e.prototype;return r.preselectTrack=function(){for(var i={captions:1,subtitles:1},a=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,l,c,u=0;u<a.length;u++){var d=a[u];s&&s.enabled&&s.language&&s.language===d.language&&d.kind in i?d.kind===s.kind?c=d:c||(c=d):s&&!s.enabled?(c=null,o=null,l=null):d.default&&(d.kind==="descriptions"&&!o?o=d:d.kind in i&&!l&&(l=d))}c?c.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},r.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},r.clearDisplay=function(){typeof L.WebVTT=="function"&&L.WebVTT.processCues(L,[],this.el_)},r.updateDisplay=function(){var i=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],o=0;o<i.length;++o){var l=i[o];l.mode==="showing"&&s.push(l)}this.updateForTrack(s);return}for(var c=null,u=null,d=i.length;d--;){var h=i[d];h.mode==="showing"&&(h.kind==="descriptions"?c=h:u=h)}u?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(u)):c&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(c))},r.updateDisplayState=function(i){for(var a=this.player_.textTrackSettings.getValues(),s=i.activeCues,o=s.length;o--;){var l=s[o];if(!!l){var c=l.displayState;if(a.color&&(c.firstChild.style.color=a.color),a.textOpacity&&Wg(c.firstChild,"color",Gg(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(c.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&Wg(c.firstChild,"backgroundColor",Gg(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?Wg(c,"backgroundColor",Gg(a.windowColor,a.windowOpacity)):c.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?c.firstChild.style.textShadow="2px 2px 3px "+ci+", 2px 2px 4px "+ci+", 2px 2px 5px "+ci:a.edgeStyle==="raised"?c.firstChild.style.textShadow="1px 1px "+ci+", 2px 2px "+ci+", 3px 3px "+ci:a.edgeStyle==="depressed"?c.firstChild.style.textShadow="1px 1px "+o1+", 0 1px "+o1+", -1px -1px "+ci+", 0 -1px "+ci:a.edgeStyle==="uniform"&&(c.firstChild.style.textShadow="0 0 4px "+ci+", 0 0 4px "+ci+", 0 0 4px "+ci+", 0 0 4px "+ci)),a.fontPercent&&a.fontPercent!==1){var u=L.parseFloat(c.style.fontSize);c.style.fontSize=u*a.fontPercent+"px",c.style.height="auto",c.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?c.firstChild.style.fontVariant="small-caps":c.firstChild.style.fontFamily=iW[a.fontFamily])}}},r.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),!(typeof L.WebVTT!="function"||i.every(function(p){return!p.activeCues}))){for(var a=[],s=0;s<i.length;++s)for(var o=i[s],l=0;l<o.activeCues.length;++l)a.push(o.activeCues[l]);L.WebVTT.processCues(L,a,this.el_);for(var c=0;c<i.length;++c){for(var u=i[c],d=0;d<u.activeCues.length;++d){var h=u.activeCues[d].displayState;En(h,"vjs-text-track-cue"),En(h,"vjs-text-track-cue-"+(u.language?u.language:c)),u.language&&$o(h,"lang",u.language)}this.player_.textTrackSettings&&this.updateDisplayState(u)}}},e}(J);J.registerComponent("TextTrackDisplay",nW);var aW=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=this.player_.isAudio(),a=this.localize(i?"Audio Player":"Video Player"),s=tt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),o=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},e}(J);J.registerComponent("LoadingSpinner",aW);var Pi=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(i,a,s){a===void 0&&(a={}),s===void 0&&(s={}),i="button",a=Ot({className:this.buildCSSClass()},a),s=Ot({type:"button"},s);var o=tt(i,a,s);return o.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},r.addChild=function(i,a){a===void 0&&(a={});var s=this.constructor.name;return Ke.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),J.prototype.addChild.call(this,i,a)},r.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},r.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},r.handleKeyDown=function(i){if(ze.isEventKey(i,"Space")||ze.isEventKey(i,"Enter")){i.stopPropagation();return}t.prototype.handleKeyDown.call(this,i)},e}(Lp);J.registerComponent("Button",Pi);var XP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.mouseused_=!1,a.on("mousedown",function(s){return a.handleMouseDown(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-big-play-button"},r.handleClick=function(i){var a=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Hi(a),this.player_.tech(!0)&&!((ju||Nu)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var c=function(){return l.focus()};mc(a)?a.then(c,function(){}):this.setTimeout(c,1)},r.handleKeyDown=function(i){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,i)},r.handleMouseDown=function(i){this.mouseused_=!0},e}(Pi);XP.prototype.controlText_="Play Video";J.registerComponent("BigPlayButton",XP);var sW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.controlText(i&&i.controlText||a.localize("Close")),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){this.trigger({type:"close",bubbles:!1})},r.handleKeyDown=function(i){ze.isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,i)},e}(Pi);J.registerComponent("CloseButton",sW);var QP=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,i.replay=i.replay===void 0||i.replay,a.on(n,"play",function(s){return a.handlePlay(s)}),a.on(n,"pause",function(s){return a.handlePause(s)}),i.replay&&a.on(n,"ended",function(s){return a.handleEnded(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){this.player_.paused()?Hi(this.player_.play()):this.player_.pause()},r.handleSeeked=function(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},r.handlePlay=function(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.handlePause=function(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.handleEnded=function(i){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return a.handleSeeked(s)})},e}(Pi);QP.prototype.controlText_="Play";J.registerComponent("PlayToggle",QP);var JP=function(e,r){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),a=Math.floor(e/3600),s=Math.floor(r/60%60),o=Math.floor(r/3600);return(isNaN(e)||e===1/0)&&(a=i=n="-"),a=a>0||o>0?a+":":"",i=((a||s>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,a+i+n},gb=JP;function oW(t){gb=t}function lW(){gb=JP}function Go(t,e){return e===void 0&&(e=t),gb(t,e)}var wl=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,["timeupdate","ended"],function(s){return a.updateContent(s)}),a.updateTextNode_(),a}var r=e.prototype;return r.createEl=function(){var i=this.buildCSSClass(),a=t.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control"}),s=tt("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return a.appendChild(s),this.contentEl_=tt("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},r.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},r.updateTextNode_=function(i){var a=this;i===void 0&&(i=0),i=Go(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!!a.contentEl_){var s=a.textNode_;s&&a.contentEl_.firstChild!==s&&(s=null,Ke.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=le.createTextNode(a.formattedTime_),a.textNode_&&(s?a.contentEl_.replaceChild(a.textNode_,s):a.contentEl_.appendChild(a.textNode_))}}))},r.updateContent=function(i){},e}(J);wl.prototype.labelText_="Time";wl.prototype.controlText_="Time";J.registerComponent("TimeDisplay",wl);var mb=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-current-time"},r.updateContent=function(i){var a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},e}(wl);mb.prototype.labelText_="Current Time";mb.prototype.controlText_="Current Time";J.registerComponent("CurrentTimeDisplay",mb);var vb=function(t){ge(e,t);function e(n,i){var a;a=t.call(this,n,i)||this;var s=function(l){return a.updateContent(l)};return a.on(n,"durationchange",s),a.on(n,"loadstart",s),a.on(n,"loadedmetadata",s),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-duration"},r.updateContent=function(i){var a=this.player_.duration();this.updateTextNode_(a)},e}(wl);vb.prototype.labelText_="Duration";vb.prototype.controlText_="Duration";J.registerComponent("DurationDisplay",vb);var cW=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=t.prototype.createEl.call(this,"div"),s=t.prototype.createEl.call(this,"span",{textContent:"/"});return a.appendChild(s),i.appendChild(a),i},e}(J);J.registerComponent("TimeDivider",cW);var yb=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"durationchange",function(s){return a.updateContent(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-remaining-time"},r.createEl=function(){var i=t.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&i.insertBefore(tt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},r.updateContent=function(i){if(typeof this.player_.duration()=="number"){var a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}},e}(wl);yb.prototype.labelText_="Remaining Time";yb.prototype.controlText_="Remaining Time";J.registerComponent("RemainingTimeDisplay",yb);var uW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.updateShowing(),a.on(a.player(),"durationchange",function(s){return a.updateShowing(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=tt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(tt("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(le.createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i},r.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},r.updateShowing=function(i){this.player().duration()===1/0?this.show():this.hide()},e}(J);J.registerComponent("LiveDisplay",uW);var ZP=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.updateLiveEdgeStatus(),a.player_.liveTracker&&(a.updateLiveEdgeStatusHandler_=function(s){return a.updateLiveEdgeStatus(s)},a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatusHandler_)),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=tt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},r.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},r.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},r.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,t.prototype.dispose.call(this)},e}(Pi);ZP.prototype.controlText_="Seek to live, currently playing live";J.registerComponent("SeekToLive",ZP);var Rp=function(e,r,n){return e=Number(e),Math.min(n,Math.max(r,isNaN(e)?r:e))},bb=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleMouseDown_=function(s){return a.handleMouseDown(s)},a.handleMouseUp_=function(s){return a.handleMouseUp(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleMouseMove_=function(s){return a.handleMouseMove(s)},a.update_=function(s){return a.update(s)},a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}var r=e.prototype;return r.enabled=function(){return this.enabled_},r.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},r.disable=function(){if(!!this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},r.createEl=function(i,a,s){return a===void 0&&(a={}),s===void 0&&(s={}),a.className=a.className+" vjs-slider",a=Ot({tabIndex:0},a),s=Ot({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),t.prototype.createEl.call(this,i,a,s)},r.handleMouseDown=function(i){var a=this.bar.el_.ownerDocument;i.type==="mousedown"&&i.preventDefault(),i.type==="touchstart"&&!$n&&i.preventDefault(),AP(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},r.handleMouseMove=function(i){},r.handleMouseUp=function(){var i=this.bar.el_.ownerDocument;IP(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},r.update=function(){var i=this;if(!(!this.el_||!this.bar)){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=i.vertical()?"height":"width";i.bar.el().style[s]=(a*100).toFixed(2)+"%"})),a}},r.getProgress=function(){return Number(Rp(this.getPercent(),0,1).toFixed(4))},r.calculateDistance=function(i){var a=Ap(this.el_,i);return this.vertical()?a.y:a.x},r.handleKeyDown=function(i){ze.isEventKey(i,"Left")||ze.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):ze.isEventKey(i,"Right")||ze.isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,i)},r.handleClick=function(i){i.stopPropagation(),i.preventDefault()},r.vertical=function(i){if(i===void 0)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(J);J.registerComponent("Slider",bb);var Kg=function(e,r){return Rp(e/r*100,0,100).toFixed(2)+"%"},dW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.partEls_=[],a.on(n,"progress",function(s){return a.update(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=tt("span",{className:"vjs-control-text"}),s=tt("span",{textContent:this.localize("Loaded")}),o=le.createTextNode(": ");return this.percentageEl_=tt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(a),a.appendChild(s),a.appendChild(o),a.appendChild(this.percentageEl_),i},r.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},r.update=function(i){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=a.player_.liveTracker,o=a.player_.buffered(),l=s&&s.isLive()?s.seekableEnd():a.player_.duration(),c=a.player_.bufferedEnd(),u=a.partEls_,d=Kg(c,l);a.percent_!==d&&(a.el_.style.width=d,Ms(a.percentageEl_,d),a.percent_=d);for(var h=0;h<o.length;h++){var p=o.start(h),b=o.end(h),w=u[h];w||(w=a.el_.appendChild(tt()),u[h]=w),!(w.dataset.start===p&&w.dataset.end===b)&&(w.dataset.start=p,w.dataset.end=b,w.style.left=Kg(p,c),w.style.width=Kg(b-p,c))}for(var v=u.length;v>o.length;v--)a.el_.removeChild(u[v-1]);u.length=o.length})},e}(J);J.registerComponent("LoadProgressBar",dW);var hW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=Fn(St(Ne(a),a.update),Di),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},r.update=function(i,a,s){var o=ru(this.el_),l=Vo(this.player_.el()),c=i.width*a;if(!(!l||!o)){var u=i.left-l.left+c,d=i.width-c+(l.right-i.right),h=o.width/2;u<h?h+=h-u:d<h&&(h=d),h<0?h=0:h>o.width&&(h=o.width),h=Math.round(h),this.el_.style.right="-"+h+"px",this.write(s)}},r.write=function(i){Ms(this.el_,i)},r.updateTime=function(i,a,s,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var c,u=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var d=l.player_.liveTracker.liveWindow(),h=d-a*d;c=(h<1?"":"-")+Go(h,d)}else c=Go(s,u);l.update(i,a,c),o&&o()})},e}(J);J.registerComponent("TimeTooltip",hW);var wb=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=Fn(St(Ne(a),a.update),Di),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},r.update=function(i,a){var s=this.getChild("timeTooltip");if(!!s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(i,a,o)}},e}(J);wb.prototype.options_={children:[]};!Br&&!zn&&wb.prototype.options_.children.push("timeTooltip");J.registerComponent("PlayProgressBar",wb);var e2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=Fn(St(Ne(a),a.update),Di),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(i,a){var s=this,o=a*this.player_.duration();this.getChild("timeTooltip").updateTime(i,a,o,function(){s.el_.style.left=i.width*a+"px"})},e}(J);e2.prototype.options_={children:["timeTooltip"]};J.registerComponent("MouseTimeDisplay",e2);var Bd=5,l1=12,_b=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.setEventHandlers_(),a}var r=e.prototype;return r.setEventHandlers_=function(){var i=this;this.update_=St(this,this.update),this.update=Fn(this.update_,Di),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return i.enableInterval_(a)},this.disableIntervalHandler_=function(a){return i.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in le&&"visibilityState"in le&&this.on(le,"visibilitychange",this.toggleVisibility_)},r.toggleVisibility_=function(i){le.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},r.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Di))},r.disableInterval_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&i.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.update=function(i){var a=this;if(le.visibilityState!=="hidden"){var s=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),l=a.player_.liveTracker,c=a.player_.duration();l&&l.isLive()&&(c=a.player_.liveTracker.liveCurrentTime()),a.percent_!==s&&(a.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),a.percent_=s),(a.currentTime_!==o||a.duration_!==c)&&(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[Go(o,c),Go(c,c)],"{1} of {2}")),a.currentTime_=o,a.duration_=c),a.bar&&a.bar.update(Vo(a.el()),a.getProgress())}),s}},r.userSeek_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},r.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.getPercent=function(){var i=this.getCurrentTime_(),a,s=this.player_.liveTracker;return s&&s.isLive()?(a=(i-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(a=1)):a=i/this.player_.duration(),a},r.handleMouseDown=function(i){!iu(i)||(i.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,i))},r.handleMouseMove=function(i,a){if(a===void 0&&(a=!1),!!iu(i)){!a&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(i),l=this.player_.liveTracker;if(!l||!l.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){l.seekToLiveEdge();return}var c=l.seekableStart(),u=l.liveCurrentTime();if(s=c+o*l.liveWindow(),s>=u&&(s=u),s<=c&&(s=c+.1),s===1/0)return}this.userSeek_(s)}},r.enable=function(){t.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");!i||i.show()},r.disable=function(){t.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");!i||i.hide()},r.handleMouseUp=function(i){t.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Hi(this.player_.play()):this.update_()},r.stepForward=function(){this.userSeek_(this.player_.currentTime()+Bd)},r.stepBack=function(){this.userSeek_(this.player_.currentTime()-Bd)},r.handleAction=function(i){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(i){var a=this.player_.liveTracker;if(ze.isEventKey(i,"Space")||ze.isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if(ze.isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if(ze.isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(ze(i))){i.preventDefault(),i.stopPropagation();var s=(ze.codes[ze(i)]-ze.codes[0])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else ze.isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-Bd*l1)):ze.isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+Bd*l1)):t.prototype.handleKeyDown.call(this,i)},r.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in le&&"visibilityState"in le&&this.off(le,"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},e}(bb);_b.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!Br&&!zn&&_b.prototype.options_.children.splice(1,0,"mouseTimeDisplay");J.registerComponent("SeekBar",_b);var t2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.handleMouseMove=Fn(St(Ne(a),a.handleMouseMove),Di),a.throttledHandleMouseSeek=Fn(St(Ne(a),a.handleMouseSeek),Di),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.handleMouseDownHandler_=function(s){return a.handleMouseDown(s)},a.enable(),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.handleMouseMove=function(i){var a=this.getChild("seekBar");if(!!a){var s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(!(!s&&!o)){var l=a.el(),c=ru(l),u=Ap(l,i).x;u=Rp(u,0,1),o&&o.update(c,u),s&&s.update(c,a.getProgress())}}},r.handleMouseSeek=function(i){var a=this.getChild("seekBar");a&&a.handleMouseMove(i)},r.enabled=function(){return this.enabled_},r.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&Hi(this.player_.play())}},r.enable=function(){this.children().forEach(function(i){return i.enable&&i.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},r.removeListenersAddedOnMousedownAndTouchstart=function(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},r.handleMouseDown=function(i){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(i),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(i){var a=this.getChild("seekBar");a&&a.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},e}(J);t2.prototype.options_={children:["seekBar"]};J.registerComponent("ProgressControl",t2);var r2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,["enterpictureinpicture","leavepictureinpicture"],function(s){return a.handlePictureInPictureChange(s)}),a.on(n,["disablepictureinpicturechanged","loadedmetadata"],function(s){return a.handlePictureInPictureEnabledChange(s)}),a.on(n,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=n.currentType().substring(0,5)==="audio";s||n.audioPosterMode()||n.audioOnlyMode()?(n.isInPictureInPicture()&&n.exitPictureInPicture(),a.hide()):a.show()}),a.disable(),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},r.handlePictureInPictureEnabledChange=function(){le.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},r.handlePictureInPictureChange=function(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},r.handleClick=function(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Pi);r2.prototype.controlText_="Picture-in-Picture";J.registerComponent("PictureInPictureToggle",r2);var i2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"fullscreenchange",function(s){return a.handleFullscreenChange(s)}),le[n.fsApi_.fullscreenEnabled]===!1&&a.disable(),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},r.handleFullscreenChange=function(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.handleClick=function(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Pi);i2.prototype.controlText_="Fullscreen";J.registerComponent("FullscreenToggle",i2);var fW=function(e,r){r.tech_&&!r.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},pW=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return i.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),i},e}(J);J.registerComponent("VolumeLevel",pW);var gW=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=Fn(St(Ne(a),a.update),Di),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},r.update=function(i,a,s,o){if(!s){var l=Vo(this.el_),c=Vo(this.player_.el()),u=i.width*a;if(!c||!l)return;var d=i.left-c.left+u,h=i.width-u+(c.right-i.right),p=l.width/2;d<p?p+=p-d:h<p&&(p=h),p<0?p=0:p>l.width&&(p=l.width),this.el_.style.right="-"+p+"px"}this.write(o+"%")},r.write=function(i){Ms(this.el_,i)},r.updateVolume=function(i,a,s,o,l){var c=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){c.update(i,a,s,o.toFixed(0)),l&&l()})},e}(J);J.registerComponent("VolumeLevelTooltip",gW);var n2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.update=Fn(St(Ne(a),a.update),Di),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(i,a,s){var o=this,l=100*a;this.getChild("volumeLevelTooltip").updateVolume(i,a,s,l,function(){s?o.el_.style.bottom=i.height*a+"px":o.el_.style.left=i.width*a+"px"})},e}(J);n2.prototype.options_={children:["volumeLevelTooltip"]};J.registerComponent("MouseVolumeLevelDisplay",n2);var Mp=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on("slideractive",function(s){return a.updateLastVolume_(s)}),a.on(n,"volumechange",function(s){return a.updateARIAAttributes(s)}),n.ready(function(){return a.updateARIAAttributes()}),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.handleMouseDown=function(i){!iu(i)||t.prototype.handleMouseDown.call(this,i)},r.handleMouseMove=function(i){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var s=this.el(),o=Vo(s),l=this.vertical(),c=Ap(s,i);c=l?c.y:c.x,c=Rp(c,0,1),a.update(o,c,l)}!iu(i)||(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},r.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.updateARIAAttributes=function(i){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},r.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},r.updateLastVolume_=function(){var i=this,a=this.player_.volume();this.one("sliderinactive",function(){i.player_.volume()===0&&i.player_.lastVolume_(a)})},e}(bb);Mp.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Br&&!zn&&Mp.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Mp.prototype.playerEvent="volumechange";J.registerComponent("VolumeBar",Mp);var a2=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),i.vertical=i.vertical||!1,(typeof i.volumeBar=="undefined"||eu(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),a=t.call(this,n,i)||this,fW(Ne(a),n),a.throttledHandleMouseMove=Fn(St(Ne(a),a.handleMouseMove),Di),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.on("mousedown",function(s){return a.handleMouseDown(s)}),a.on("touchstart",function(s){return a.handleMouseDown(s)}),a.on("mousemove",function(s){return a.handleMouseMove(s)}),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active"),a.addClass("vjs-slider-active"),a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active"),a.removeClass("vjs-slider-active"),a.trigger("sliderinactive")}),a}var r=e.prototype;return r.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},r.handleMouseDown=function(i){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(i){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},r.handleMouseMove=function(i){this.volumeBar.handleMouseMove(i)},e}(J);a2.prototype.options_={children:["volumeBar"]};J.registerComponent("VolumeControl",a2);var mW=function(e,r){r.tech_&&!r.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(r,"loadstart",function(){r.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},s2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,mW(Ne(a),n),a.on(n,["loadstart","volumechange"],function(s){return a.update(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},r.handleClick=function(i){var a=this.player_.volume(),s=this.player_.lastVolume_();if(a===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},r.update=function(i){this.updateIcon_(),this.updateControlText_()},r.updateIcon_=function(){var i=this.player_.volume(),a=3;Br&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),i===0||this.player_.muted()?a=0:i<.33?a=1:i<.67&&(a=2);for(var s=0;s<4;s++)Fu(this.el_,"vjs-vol-"+s);En(this.el_,"vjs-vol-"+a)},r.updateControlText_=function(){var i=this.player_.muted()||this.player_.volume()===0,a=i?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},e}(Pi);s2.prototype.controlText_="Mute";J.registerComponent("MuteToggle",s2);var o2=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),typeof i.inline!="undefined"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl=="undefined"||eu(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),a=t.call(this,n,i)||this,a.handleKeyPressHandler_=function(s){return a.handleKeyPress(s)},a.on(n,["loadstart"],function(s){return a.volumePanelState_(s)}),a.on(a.muteToggle,"keyup",function(s){return a.handleKeyPress(s)}),a.on(a.volumeControl,"keyup",function(s){return a.handleVolumeControlKeyUp(s)}),a.on("keydown",function(s){return a.handleKeyPress(s)}),a.on("mouseover",function(s){return a.handleMouseOver(s)}),a.on("mouseout",function(s){return a.handleMouseOut(s)}),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}var r=e.prototype;return r.sliderActive_=function(){this.addClass("vjs-slider-active")},r.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},r.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},r.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},r.handleVolumeControlKeyUp=function(i){ze.isEventKey(i,"Esc")&&this.muteToggle.focus()},r.handleMouseOver=function(i){this.addClass("vjs-hover"),si(le,"keyup",this.handleKeyPressHandler_)},r.handleMouseOut=function(i){this.removeClass("vjs-hover"),_r(le,"keyup",this.handleKeyPressHandler_)},r.handleKeyPress=function(i){ze.isEventKey(i,"Esc")&&this.handleMouseOut()},e}(J);o2.prototype.options_={children:["muteToggle","volumeControl"]};J.registerComponent("VolumePanel",o2);var l2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,i&&(a.menuButton_=i.menuButton),a.focusedChild_=-1,a.on("keydown",function(s){return a.handleKeyDown(s)}),a.boundHandleBlur_=function(s){return a.handleBlur(s)},a.boundHandleTapClick_=function(s){return a.handleTapClick(s)},a}var r=e.prototype;return r.addEventListenerForItem=function(i){i instanceof J&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},r.removeEventListenerForItem=function(i){i instanceof J&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},r.removeChild=function(i){typeof i=="string"&&(i=this.getChild(i)),this.removeEventListenerForItem(i),t.prototype.removeChild.call(this,i)},r.addItem=function(i){var a=this.addChild(i);a&&this.addEventListenerForItem(a)},r.createEl=function(){var i=this.options_.contentElType||"ul";this.contentEl_=tt(i,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),si(a,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),a},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},r.handleBlur=function(i){var a=i.relatedTarget||le.activeElement;if(!this.children().some(function(o){return o.el()===a})){var s=this.menuButton_;s&&s.buttonPressed_&&a!==s.el().firstChild&&s.unpressButton()}},r.handleTapClick=function(i){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var s=a.filter(function(o){return o.el()===i.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},r.handleKeyDown=function(i){ze.isEventKey(i,"Left")||ze.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(ze.isEventKey(i,"Right")||ze.isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},r.stepForward=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_+1),this.focus(i)},r.stepBack=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_-1),this.focus(i)},r.focus=function(i){i===void 0&&(i=0);var a=this.children().slice(),s=a.length&&a[0].hasClass("vjs-menu-title");s&&a.shift(),a.length>0&&(i<0?i=0:i>=a.length&&(i=a.length-1),this.focusedChild_=i,a[i].el_.focus())},e}(J);J.registerComponent("Menu",l2);var xb=function(t){ge(e,t);function e(n,i){var a;i===void 0&&(i={}),a=t.call(this,n,i)||this,a.menuButton_=new Pi(n,i),a.menuButton_.controlText(a.controlText_),a.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Pi.prototype.buildCSSClass();a.menuButton_.el_.className=a.buildCSSClass()+" "+s,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0;var o=function(c){return a.handleClick(c)};return a.handleMenuKeyUp_=function(l){return a.handleMenuKeyUp(l)},a.on(a.menuButton_,"tap",o),a.on(a.menuButton_,"click",o),a.on(a.menuButton_,"keydown",function(l){return a.handleKeyDown(l)}),a.on(a.menuButton_,"mouseenter",function(){a.addClass("vjs-hover"),a.menu.show(),si(le,"keyup",a.handleMenuKeyUp_)}),a.on("mouseleave",function(l){return a.handleMouseLeave(l)}),a.on("keydown",function(l){return a.handleSubmenuKeyDown(l)}),a}var r=e.prototype;return r.update=function(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},r.createMenu=function(){var i=new l2(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=tt("li",{className:"vjs-menu-title",textContent:jt(this.options_.title),tabIndex:-1}),s=new J(this.player_,{el:a});i.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)i.addItem(this.items[o]);return i},r.createItems=function(){},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},r.buildWrapperCSSClass=function(){var i="vjs-menu-button";this.options_.inline===!0?i+="-inline":i+="-popup";var a=Pi.prototype.buildCSSClass();return"vjs-menu-button "+i+" "+a+" "+t.prototype.buildCSSClass.call(this)},r.buildCSSClass=function(){var i="vjs-menu-button";return this.options_.inline===!0?i+="-inline":i+="-popup","vjs-menu-button "+i+" "+t.prototype.buildCSSClass.call(this)},r.controlText=function(i,a){return a===void 0&&(a=this.menuButton_.el()),this.menuButton_.controlText(i,a)},r.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},r.handleClick=function(i){this.buttonPressed_?this.unpressButton():this.pressButton()},r.handleMouseLeave=function(i){this.removeClass("vjs-hover"),_r(le,"keyup",this.handleMenuKeyUp_)},r.focus=function(){this.menuButton_.focus()},r.blur=function(){this.menuButton_.blur()},r.handleKeyDown=function(i){ze.isEventKey(i,"Esc")||ze.isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),ze.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(ze.isEventKey(i,"Up")||ze.isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},r.handleMenuKeyUp=function(i){(ze.isEventKey(i,"Esc")||ze.isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},r.handleSubmenuKeyPress=function(i){this.handleSubmenuKeyDown(i)},r.handleSubmenuKeyDown=function(i){(ze.isEventKey(i,"Esc")||ze.isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),ze.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},r.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Br&&TP())return;this.menu.focus()}},r.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},r.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},r.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(J);J.registerComponent("MenuButton",xb);var Tb=function(t){ge(e,t);function e(r,n){var i,a=n.tracks;if(i=t.call(this,r,n)||this,i.items.length<=1&&i.hide(),!a)return Ne(i);var s=St(Ne(i),i.update);return a.addEventListener("removetrack",s),a.addEventListener("addtrack",s),a.addEventListener("labelchange",s),i.player_.on("ready",s),i.player_.on("dispose",function(){a.removeEventListener("removetrack",s),a.removeEventListener("addtrack",s),a.removeEventListener("labelchange",s)}),i}return e}(xb);J.registerComponent("TrackButton",Tb);var vW=["Tab","Esc","Up","Down","Right","Left"],Uu=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.selectable=i.selectable,a.isSelected_=i.selected||!1,a.multiSelectable=i.multiSelectable,a.selected(a.isSelected_),a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem"),a}var r=e.prototype;return r.createEl=function(i,a,s){this.nonIconControl=!0;var o=t.prototype.createEl.call(this,"li",Ot({className:"vjs-menu-item",tabIndex:-1},a),s);return o.replaceChild(tt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},r.handleKeyDown=function(i){vW.some(function(a){return ze.isEventKey(i,a)})||t.prototype.handleKeyDown.call(this,i)},r.handleClick=function(i){this.selected(!0)},r.selected=function(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Lp);J.registerComponent("MenuItem",Uu);var zu=function(t){ge(e,t);function e(n,i){var a,s=i.track,o=n.textTracks();i.label=s.label||s.language||"Unknown",i.selected=s.mode==="showing",a=t.call(this,n,i)||this,a.track=s,a.kinds=(i.kinds||[i.kind||a.track.kind]).filter(Boolean);var l=function(){for(var h=arguments.length,p=new Array(h),b=0;b<h;b++)p[b]=arguments[b];a.handleTracksChange.apply(Ne(a),p)},c=function(){for(var h=arguments.length,p=new Array(h),b=0;b<h;b++)p[b]=arguments[b];a.handleSelectedLanguageChange.apply(Ne(a),p)};if(n.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",c),a.on("dispose",function(){n.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",c)}),o.onchange===void 0){var u;a.on(["tap","click"],function(){if(typeof L.Event!="object")try{u=new L.Event("change")}catch{}u||(u=le.createEvent("Event"),u.initEvent("change",!0,!0)),o.dispatchEvent(u)})}return a.handleTracksChange(),a}var r=e.prototype;return r.handleClick=function(i){var a=this.track,s=this.player_.textTracks();if(t.prototype.handleClick.call(this,i),!!s)for(var o=0;o<s.length;o++){var l=s[o];this.kinds.indexOf(l.kind)!==-1&&(l===a?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},r.handleTracksChange=function(i){var a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)},r.handleSelectedLanguageChange=function(i){if(this.track.mode==="showing"){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(Uu);J.registerComponent("TextTrackMenuItem",zu);var c2=function(t){ge(e,t);function e(n,i){return i.track={player:n,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,t.call(this,n,i)||this}var r=e.prototype;return r.handleTracksChange=function(i){for(var a=this.player().textTracks(),s=!0,o=0,l=a.length;o<l;o++){var c=a[o];if(this.options_.kinds.indexOf(c.kind)>-1&&c.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},r.handleSelectedLanguageChange=function(i){for(var a=this.player().textTracks(),s=!0,o=0,l=a.length;o<l;o++){var c=a[o];if(["captions","descriptions","subtitles"].indexOf(c.kind)>-1&&c.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(zu);J.registerComponent("OffTextTrackMenuItem",c2);var _l=function(t){ge(e,t);function e(n,i){return i===void 0&&(i={}),i.tracks=n.textTracks(),t.call(this,n,i)||this}var r=e.prototype;return r.createItems=function(i,a){i===void 0&&(i=[]),a===void 0&&(a=zu);var s;this.label_&&(s=this.label_+" off"),i.push(new c2(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var c=o[l];if(this.kinds_.indexOf(c.kind)>-1){var u=new a(this.player_,{track:c,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});u.addClass("vjs-"+c.kind+"-menu-item"),i.push(u)}}return i},e}(Tb);J.registerComponent("TextTrackButton",_l);var u2=function(t){ge(e,t);function e(n,i){var a,s=i.track,o=i.cue,l=n.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=l&&l<o.endTime,a=t.call(this,n,i)||this,a.track=s,a.cue=o,a}var r=e.prototype;return r.handleClick=function(i){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(Uu);J.registerComponent("ChaptersTrackMenuItem",u2);var Sb=function(t){ge(e,t);function e(n,i,a){var s;return s=t.call(this,n,i,a)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},r.update=function(i){if(!(i&&i.track&&i.track.kind!=="chapters")){var a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),t.prototype.update.call(this)):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&t.prototype.update.call(this)}},r.setTrack=function(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},r.findChaptersTrack=function(){for(var i=this.player_.textTracks()||[],a=i.length-1;a>=0;a--){var s=i[a];if(s.kind===this.kind_)return s}},r.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(jt(this.kind_))},r.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},r.createItems=function(){var i=[];if(!this.track_)return i;var a=this.track_.cues;if(!a)return i;for(var s=0,o=a.length;s<o;s++){var l=a[s],c=new u2(this.player_,{track:this.track_,cue:l});i.push(c)}return i},e}(_l);Sb.prototype.kind_="chapters";Sb.prototype.controlText_="Chapters";J.registerComponent("ChaptersButton",Sb);var Eb=function(t){ge(e,t);function e(n,i,a){var s;s=t.call(this,n,i,a)||this;var o=n.textTracks(),l=St(Ne(s),s.handleTracksChange);return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var r=e.prototype;return r.handleTracksChange=function(i){for(var a=this.player().textTracks(),s=!1,o=0,l=a.length;o<l;o++){var c=a[o];if(c.kind!==this.kind_&&c.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},r.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(_l);Eb.prototype.kind_="descriptions";Eb.prototype.controlText_="Descriptions";J.registerComponent("DescriptionsButton",Eb);var kb=function(t){ge(e,t);function e(n,i,a){return t.call(this,n,i,a)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(_l);kb.prototype.kind_="subtitles";kb.prototype.controlText_="Subtitles";J.registerComponent("SubtitlesButton",kb);var Cb=function(t){ge(e,t);function e(n,i){var a;return i.track={player:n,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",a=t.call(this,n,i)||this,a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+i.kind+" settings dialog"),a}var r=e.prototype;return r.handleClick=function(i){this.player().getChild("textTrackSettings").open()},e}(zu);J.registerComponent("CaptionSettingsMenuItem",Cb);var Ab=function(t){ge(e,t);function e(n,i,a){return t.call(this,n,i,a)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new Cb(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,i)},e}(_l);Ab.prototype.kind_="captions";Ab.prototype.controlText_="Captions";J.registerComponent("CaptionsButton",Ab);var d2=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(i,a,s){var o=t.prototype.createEl.call(this,i,a,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(tt("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(zu);J.registerComponent("SubsCapsMenuItem",d2);var Ib=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,a.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)>-1&&(a.label_="captions"),a.menuButton_.controlText(jt(a.label_)),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new Cb(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i=t.prototype.createItems.call(this,i,d2),i},e}(_l);Ib.prototype.kinds_=["captions","subtitles"];Ib.prototype.controlText_="Subtitles";J.registerComponent("SubsCapsButton",Ib);var h2=function(t){ge(e,t);function e(n,i){var a,s=i.track,o=n.audioTracks();i.label=s.label||s.language||"Unknown",i.selected=s.enabled,a=t.call(this,n,i)||this,a.track=s,a.addClass("vjs-"+s.kind+"-menu-item");var l=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];a.handleTracksChange.apply(Ne(a),d)};return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}var r=e.prototype;return r.createEl=function(i,a,s){var o=t.prototype.createEl.call(this,i,a,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(tt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},r.handleClick=function(i){if(t.prototype.handleClick.call(this,i),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];o!==this.track&&(o.enabled=o===this.track)}},r.handleTracksChange=function(i){this.selected(this.track.enabled)},e}(Uu);J.registerComponent("AudioTrackMenuItem",h2);var f2=function(t){ge(e,t);function e(n,i){return i===void 0&&(i={}),i.tracks=n.audioTracks(),t.call(this,n,i)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(i){i===void 0&&(i=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];i.push(new h2(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return i},e}(Tb);f2.prototype.controlText_="Audio Track";J.registerComponent("AudioTrackButton",f2);var Pb=function(t){ge(e,t);function e(n,i){var a,s=i.rate,o=parseFloat(s,10);return i.label=s,i.selected=o===n.playbackRate(),i.selectable=!0,i.multiSelectable=!1,a=t.call(this,n,i)||this,a.label=s,a.rate=o,a.on(n,"ratechange",function(l){return a.update(l)}),a}var r=e.prototype;return r.handleClick=function(i){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},r.update=function(i){this.selected(this.player().playbackRate()===this.rate)},e}(Uu);Pb.prototype.contentElType="button";J.registerComponent("PlaybackRateMenuItem",Pb);var p2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.menuButton_.el_.setAttribute("aria-describedby",a.labelElId_),a.updateVisibility(),a.updateLabel(),a.on(n,"loadstart",function(s){return a.updateVisibility(s)}),a.on(n,"ratechange",function(s){return a.updateLabel(s)}),a.on(n,"playbackrateschange",function(s){return a.handlePlaybackRateschange(s)}),a}var r=e.prototype;return r.createEl=function(){var i=t.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=tt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i},r.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){for(var i=this.playbackRates(),a=[],s=i.length-1;s>=0;s--)a.push(new Pb(this.player(),{rate:i[s]+"x"}));return a},r.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.handleClick=function(i){var a=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(a),l=(o+1)%s.length;this.player().playbackRate(s[l])},r.handlePlaybackRateschange=function(i){this.update()},r.playbackRates=function(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},r.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},r.updateVisibility=function(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.updateLabel=function(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(xb);p2.prototype.controlText_="Playback Rate";J.registerComponent("PlaybackRateMenuButton",p2);var g2=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},r.createEl=function(i,a,s){return i===void 0&&(i="div"),a===void 0&&(a={}),s===void 0&&(s={}),a.className||(a.className=this.buildCSSClass()),t.prototype.createEl.call(this,i,a,s)},e}(J);J.registerComponent("Spacer",g2);var yW=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"})},e}(g2);J.registerComponent("CustomControlSpacer",yW);var sf=function(t){ge(e,t);function e(){return t.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(J);sf.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in le&&sf.prototype.options_.children.splice(sf.prototype.options_.children.length-1,0,"pictureInPictureToggle");J.registerComponent("ControlBar",sf);var m2=function(t){ge(e,t);function e(n,i){var a;return a=t.call(this,n,i)||this,a.on(n,"error",function(s){return a.open(s)}),a}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},r.content=function(){var i=this.player().error();return i?this.localize(i.message):""},e}(yl);m2.prototype.options_=vi({},yl.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});J.registerComponent("ErrorDisplay",m2);var Yg="vjs-text-track-settings",c1=["#000","Black"],u1=["#00F","Blue"],d1=["#0FF","Cyan"],h1=["#0F0","Green"],f1=["#F0F","Magenta"],p1=["#F00","Red"],g1=["#FFF","White"],m1=["#FF0","Yellow"],Xg=["1","Opaque"],Qg=["0.5","Semi-Transparent"],v1=["0","Transparent"],Xa={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[c1,g1,p1,h1,u1,m1,f1,d1]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Xg,Qg,v1]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[g1,c1,p1,h1,u1,m1,f1,d1]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Xg,Qg]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[v1,Qg,Xg]}};Xa.windowColor.options=Xa.backgroundColor.options;function v2(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function bW(t,e){var r=t.options[t.options.selectedIndex].value;return v2(r,e)}function wW(t,e,r){if(!!e){for(var n=0;n<t.options.length;n++)if(v2(t.options[n].value,r)===e){t.selectedIndex=n;break}}}var _W=function(t){ge(e,t);function e(n,i){var a;return i.temporary=!1,a=t.call(this,n,i)||this,a.updateDisplay=a.updateDisplay.bind(Ne(a)),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=tt("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),a.setDefaults(),i.persistTextTrackSettings===void 0&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),bo(Xa,function(s){a.on(a.$(s.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}var r=e.prototype;return r.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},r.createElSelect_=function(i,a,s){var o=this;a===void 0&&(a=""),s===void 0&&(s="label");var l=Xa[i],c=l.id.replace("%s",this.id_),u=[a,c].join(" ").trim();return["<"+s+' id="'+c+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+s+">",'<select aria-labelledby="'+u+'">'].concat(l.options.map(function(d){var h=c+"-"+d[1].replace(/\W+/g,"");return['<option id="'+h+'" value="'+d[0]+'" ','aria-labelledby="'+u+" "+h+'">',o.localize(d[1]),"</option>"].join("")})).concat("</select>").join("")},r.createElFgColor_=function(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},r.createElBgColor_=function(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},r.createElWinColor_=function(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},r.createElColors_=function(){return tt("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.createElFont_=function(){return tt("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.createElControls_=function(){var i=this.localize("restore all settings to the default values");return tt("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.label=function(){return this.localize("Caption Settings Dialog")},r.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.getValues=function(){var i=this;return c9(Xa,function(a,s,o){var l=bW(i.$(s.selector),s.parser);return l!==void 0&&(a[o]=l),a},{})},r.setValues=function(i){var a=this;bo(Xa,function(s,o){wW(a.$(s.selector),i[o],s.parser)})},r.setDefaults=function(){var i=this;bo(Xa,function(a){var s=a.hasOwnProperty("default")?a.default:0;i.$(a.selector).selectedIndex=s})},r.restoreSettings=function(){var i;try{i=JSON.parse(L.localStorage.getItem(Yg))}catch(a){Ke.warn(a)}i&&this.setValues(i)},r.saveSettings=function(){if(!!this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?L.localStorage.setItem(Yg,JSON.stringify(i)):L.localStorage.removeItem(Yg)}catch(a){Ke.warn(a)}}},r.updateDisplay=function(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},r.conditionalBlur_=function(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,a=i&&i.subsCapsButton,s=i&&i.captionsButton;a?a.focus():s&&s.focus()},e}(yl);J.registerComponent("TextTrackSettings",_W);var xW=function(t){ge(e,t);function e(n,i){var a,s=i.ResizeObserver||L.ResizeObserver;i.ResizeObserver===null&&(s=!1);var o=xt({createEl:!s,reportTouchActivity:!1},i);return a=t.call(this,n,o)||this,a.ResizeObserver=i.ResizeObserver||L.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=w9(function(){a.resizeHandler()},100,!1,Ne(a)),s?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(n.el())):(a.loadListener_=function(){if(!(!a.el_||!a.el_.contentWindow)){var l=a.debouncedHandler_,c=a.unloadListener_=function(){_r(this,"resize",l),_r(this,"unload",c),c=null};si(a.el_.contentWindow,"unload",c),si(a.el_.contentWindow,"resize",l)}},a.one("load",a.loadListener_)),a}var r=e.prototype;return r.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},r.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},r.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},e}(J);J.registerComponent("ResizeManager",xW);var TW={trackingThreshold:20,liveTolerance:15},SW=function(t){ge(e,t);function e(n,i){var a,s=xt(TW,i,{createEl:!1});return a=t.call(this,n,s)||this,a.handleVisibilityChange_=function(o){return a.handleVisibilityChange(o)},a.trackLiveHandler_=function(){return a.trackLive_()},a.handlePlay_=function(o){return a.handlePlay(o)},a.handleFirstTimeupdate_=function(o){return a.handleFirstTimeupdate(o)},a.handleSeeked_=function(o){return a.handleSeeked(o)},a.seekToLiveEdge_=function(o){return a.seekToLiveEdge(o)},a.reset_(),a.on(a.player_,"durationchange",function(o){return a.handleDurationchange(o)}),a.on(a.player_,"canplay",function(){return a.toggleTracking()}),ju&&"hidden"in le&&"visibilityState"in le&&a.on(le,"visibilitychange",a.handleVisibilityChange_),a}var r=e.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(le.hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var i=this.player_.seekable();if(!(!i||!i.length)){var a=Number(L.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),l=this.player_.currentTime(),c=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(c=!1),c!==this.behindLiveEdge_&&(this.behindLiveEdge_=c,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.toggleTracking()},r.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Di),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},r.handleSeeked=function(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},r.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},r.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.end(s));return a.length?a.sort()[a.length-1]:1/0},r.seekableStart=function(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.start(s));return a.length?a.sort()[0]:0},r.liveWindow=function(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var i=this.seekableEnd();return this.lastSeekEnd_!==-1&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return typeof this.trackingInterval_=="number"},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(le,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),t.prototype.dispose.call(this)},e}(J);J.registerComponent("LiveTracker",SW);var wv=function(e){var r=e.el();if(r.hasAttribute("src"))return e.triggerSourceset(r.src),!0;var n=e.$$("source"),i=[],a="";if(!n.length)return!1;for(var s=0;s<n.length;s++){var o=n[s].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(a=i[0]),e.triggerSourceset(a),!0):!1},EW=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var r=le.createElement(this.nodeName.toLowerCase());r.innerHTML=e;for(var n=le.createDocumentFragment();r.childNodes.length;)n.appendChild(r.childNodes[0]);return this.innerText="",L.Element.prototype.appendChild.call(this,n),this.innerHTML}}),y2=function(e,r){for(var n={},i=0;i<e.length&&(n=Object.getOwnPropertyDescriptor(e[i],r),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},kW=function(e){return y2([e.el(),L.HTMLMediaElement.prototype,L.Element.prototype,EW],"innerHTML")},y1=function(e){var r=e.el();if(!r.resetSourceWatch_){var n={},i=kW(e),a=function(o){return function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=o.apply(r,c);return wv(e),d}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){!r[s]||(n[s]=r[s],r[s]=a(n[s]))}),Object.defineProperty(r,"innerHTML",xt(i,{set:a(i.set)})),r.resetSourceWatch_=function(){r.resetSourceWatch_=null,Object.keys(n).forEach(function(s){r[s]=n[s]}),Object.defineProperty(r,"innerHTML",i)},e.one("sourceset",r.resetSourceWatch_)}},CW=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?qP(L.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return L.Element.prototype.setAttribute.call(this,"src",e),e}}),AW=function(e){return y2([e.el(),L.HTMLMediaElement.prototype,CW],"src")},IW=function(e){if(!!e.featuresSourceset){var r=e.el();if(!r.resetSourceset_){var n=AW(e),i=r.setAttribute,a=r.load;Object.defineProperty(r,"src",xt(n,{set:function(o){var l=n.set.call(r,o);return e.triggerSourceset(r.src),l}})),r.setAttribute=function(s,o){var l=i.call(r,s,o);return/src/i.test(s)&&e.triggerSourceset(r.src),l},r.load=function(){var s=a.call(r);return wv(e)||(e.triggerSourceset(""),y1(e)),s},r.currentSrc?e.triggerSourceset(r.currentSrc):wv(e)||y1(e),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=a,r.setAttribute=i,Object.defineProperty(r,"src",n),r.resetSourceWatch_&&r.resetSourceWatch_()}}}},Ob=function(e,r,n,i){i===void 0&&(i=!0);var a=function(l){return Object.defineProperty(e,r,{value:l,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var l=n();return a(l),l}};return i&&(s.set=a),Object.defineProperty(e,r,s)},ye=function(t){ge(e,t);function e(n,i){var a;a=t.call(this,n,i)||this;var s=n.source,o=!1;if(a.featuresVideoFrameCallback=a.featuresVideoFrameCallback&&a.el_.tagName==="VIDEO",s&&(a.el_.currentSrc!==s.src||n.tag&&n.tag.initNetworkState_===3)?a.setSource(s):a.handleLateInit_(a.el_),n.enableSourceset&&a.setupSourcesetHandling_(),a.isScrubbing_=!1,a.el_.hasChildNodes()){for(var l=a.el_.childNodes,c=l.length,u=[];c--;){var d=l[c],h=d.nodeName.toLowerCase();h==="track"&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(d),a.remoteTextTracks().addTrack(d.track),a.textTracks().addTrack(d.track),!o&&!a.el_.hasAttribute("crossorigin")&&Dp(d.src)&&(o=!0)):u.push(d))}for(var p=0;p<u.length;p++)a.el_.removeChild(u[p])}return a.proxyNativeTracks_(),a.featuresNativeTextTracks&&o&&Ke.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),a.restoreMetadataTracksInIOSNativePlayer_(),(zo||sb||yP)&&n.nativeControlsForTouch===!0&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}var r=e.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){IW(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var i=this.textTracks(),a,s=function(){a=[];for(var c=0;c<i.length;c++){var u=i[c];u.kind==="metadata"&&a.push({track:u,storedMode:u.mode})}};s(),i.addEventListener("change",s),this.on("dispose",function(){return i.removeEventListener("change",s)});var o=function l(){for(var c=0;c<a.length;c++){var u=a[c];u.track.mode==="disabled"&&u.track.mode!==u.storedMode&&(u.track.mode=u.storedMode)}i.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",s),i.removeEventListener("change",o),i.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",s),i.addEventListener("change",s),i.removeEventListener("change",o)})},r.overrideNative_=function(i,a){var s=this;if(a===this["featuresNative"+i+"Tracks"]){var o=i.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var c=s.el()[o+"Tracks"];c.removeEventListener(l,s[o+"TracksListeners_"][l])}),this["featuresNative"+i+"Tracks"]=!a,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},r.overrideNativeAudioTracks=function(i){this.overrideNative_("Audio",i)},r.overrideNativeVideoTracks=function(i){this.overrideNative_("Video",i)},r.proxyNativeTracksForType_=function(i){var a=this,s=gi[i],o=this.el()[s.getterName],l=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var c={change:function(h){var p={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(p),i==="text"&&a[qo.remoteText.getterName]().trigger(p)},addtrack:function(h){l.addTrack(h.track)},removetrack:function(h){l.removeTrack(h.track)}},u=function(){for(var h=[],p=0;p<l.length;p++){for(var b=!1,w=0;w<o.length;w++)if(o[w]===l[p]){b=!0;break}b||h.push(l[p])}for(;h.length;)l.removeTrack(h.shift())};this[s.getterName+"Listeners_"]=c,Object.keys(c).forEach(function(d){var h=c[d];o.addEventListener(d,h),a.on("dispose",function(p){return o.removeEventListener(d,h)})}),this.on("loadstart",u),this.on("dispose",function(d){return a.off("loadstart",u)})}},r.proxyNativeTracks_=function(){var i=this;gi.names.forEach(function(a){i.proxyNativeTracksForType_(a)})},r.createEl=function(){var i=this.options_.tag;if(!i||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(i){var a=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(a,i),e.disposeMediaElement(i),i=a}else{i=le.createElement("video");var s=this.options_.tag&&fn(this.options_.tag),o=xt({},s);(!zo||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,kP(i,Ot(o,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}typeof this.options_.preload!="undefined"&&$o(i,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],c=0;c<l.length;c++){var u=l[c],d=this.options_[u];typeof d!="undefined"&&(d?$o(i,u,u):Cp(i,u),i[u]=d)}return i},r.handleLateInit_=function(i){if(!(i.networkState===0||i.networkState===3)){if(i.readyState===0){var a=!1,s=function(){a=!0};this.on("loadstart",s);var o=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),a||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),i.readyState>=2&&l.push("loadeddata"),i.readyState>=3&&l.push("canplay"),i.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(c){this.trigger(c)},this)})}},r.setScrubbing=function(i){this.isScrubbing_=i},r.scrubbing=function(){return this.isScrubbing_},r.setCurrentTime=function(i){try{this.isScrubbing_&&this.el_.fastSeek&&kp?this.el_.fastSeek(i):this.el_.currentTime=i}catch(a){Ke(a,"Video is not ready. (Video.js)")}},r.duration=function(){var i=this;if(this.el_.duration===1/0&&zn&&$n&&this.el_.currentTime===0){var a=function s(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",s))};return this.on("timeupdate",a),NaN}return this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){i.off("webkitbeginfullscreen",s),i.off("webkitendfullscreen",a)})}},r.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var i=L.navigator&&L.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},r.enterFullScreen=function(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)Hi(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},r.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},r.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},r.requestVideoFrameCallback=function(i){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(i):t.prototype.requestVideoFrameCallback.call(this,i)},r.cancelVideoFrameCallback=function(i){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(i):t.prototype.cancelVideoFrameCallback.call(this,i)},r.src=function(i){if(i===void 0)return this.el_.src;this.setSrc(i)},r.reset=function(){e.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(i){this.el_.controls=!!i},r.addTextTrack=function(i,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,a,s):t.prototype.addTextTrack.call(this,i,a,s)},r.createRemoteTextTrack=function(i){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,i);var a=le.createElement("track");return i.kind&&(a.kind=i.kind),i.label&&(a.label=i.label),(i.language||i.srclang)&&(a.srclang=i.language||i.srclang),i.default&&(a.default=i.default),i.id&&(a.id=i.id),i.src&&(a.src=i.src),a},r.addRemoteTextTrack=function(i,a){var s=t.prototype.addRemoteTextTrack.call(this,i,a);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},r.removeRemoteTextTrack=function(i){if(t.prototype.removeRemoteTextTrack.call(this,i),this.featuresNativeTextTracks)for(var a=this.$$("track"),s=a.length;s--;)(i===a[s]||i===a[s].track)&&this.el().removeChild(a[s])},r.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var i={};return typeof this.el().webkitDroppedFrameCount!="undefined"&&typeof this.el().webkitDecodedFrameCount!="undefined"&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),L.performance&&typeof L.performance.now=="function"?i.creationTime=L.performance.now():L.performance&&L.performance.timing&&typeof L.performance.timing.navigationStart=="number"&&(i.creationTime=L.Date.now()-L.performance.timing.navigationStart),i},e}(yt);Ob(ye,"TEST_VID",function(){if(!!gl()){var t=le.createElement("video"),e=le.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}});ye.isSupported=function(){try{ye.TEST_VID.volume=.5}catch{return!1}return!!(ye.TEST_VID&&ye.TEST_VID.canPlayType)};ye.canPlayType=function(t){return ye.TEST_VID.canPlayType(t)};ye.canPlaySource=function(t,e){return ye.canPlayType(t.type)};ye.canControlVolume=function(){try{var t=ye.TEST_VID.volume;ye.TEST_VID.volume=t/2+.1;var e=t!==ye.TEST_VID.volume;return e&&Br?(L.setTimeout(function(){ye&&ye.prototype&&(ye.prototype.featuresVolumeControl=t!==ye.TEST_VID.volume)}),!1):e}catch{return!1}};ye.canMuteVolume=function(){try{var t=ye.TEST_VID.muted;return ye.TEST_VID.muted=!t,ye.TEST_VID.muted?$o(ye.TEST_VID,"muted","muted"):Cp(ye.TEST_VID,"muted","muted"),t!==ye.TEST_VID.muted}catch{return!1}};ye.canControlPlaybackRate=function(){if(zn&&$n&&wP<58)return!1;try{var t=ye.TEST_VID.playbackRate;return ye.TEST_VID.playbackRate=t/2+.1,t!==ye.TEST_VID.playbackRate}catch{return!1}};ye.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(le.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(le.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(le.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(le.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};ye.supportsNativeTextTracks=function(){return kp||Br&&$n};ye.supportsNativeVideoTracks=function(){return!!(ye.TEST_VID&&ye.TEST_VID.videoTracks)};ye.supportsNativeAudioTracks=function(){return!!(ye.TEST_VID&&ye.TEST_VID.audioTracks)};ye.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(t){var e=t[0],r=t[1];Ob(ye.prototype,e,function(){return ye[r]()},!0)});ye.prototype.featuresVolumeControl=ye.canControlVolume();ye.prototype.movingMediaElementInDOM=!Br;ye.prototype.featuresFullscreenResize=!0;ye.prototype.featuresProgressEvents=!0;ye.prototype.featuresTimeupdateEvents=!0;ye.prototype.featuresVideoFrameCallback=!!(ye.TEST_VID&&ye.TEST_VID.requestVideoFrameCallback);var of;ye.patchCanPlayType=function(){ib>=4&&!bP&&!$n&&(of=ye.TEST_VID&&ye.TEST_VID.constructor.prototype.canPlayType,ye.TEST_VID.constructor.prototype.canPlayType=function(t){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return t&&e.test(t)?"maybe":of.call(this,t)})};ye.unpatchCanPlayType=function(){var t=ye.TEST_VID.constructor.prototype.canPlayType;return of&&(ye.TEST_VID.constructor.prototype.canPlayType=of),t};ye.patchCanPlayType();ye.disposeMediaElement=function(t){if(!!t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};ye.resetMediaElement=function(t){if(!!t){for(var e=t.querySelectorAll("source"),r=e.length;r--;)t.removeChild(e[r]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){ye.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){ye.prototype["set"+jt(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){ye.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){ye.prototype["set"+jt(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){ye.prototype[t]=function(){return this.el_[t]()}});yt.withSourceHandlers(ye);ye.nativeSourceHandler={};ye.nativeSourceHandler.canPlayType=function(t){try{return ye.TEST_VID.canPlayType(t)}catch{return""}};ye.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return ye.nativeSourceHandler.canPlayType(t.type);if(t.src){var r=fb(t.src);return ye.nativeSourceHandler.canPlayType("video/"+r)}return""};ye.nativeSourceHandler.handleSource=function(t,e,r){e.setSrc(t.src)};ye.nativeSourceHandler.dispose=function(){};ye.registerSourceHandler(ye.nativeSourceHandler);yt.registerTech("Html5",ye);var b2=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Jg={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},_v=["tiny","xsmall","small","medium","large","xlarge","huge"],uh={};_v.forEach(function(t){var e=t.charAt(0)==="x"?"x-"+t.substring(1):t;uh[t]="vjs-layout-"+e});var PW={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},$t=function(t){ge(e,t);function e(n,i,a){var s;if(n.id=n.id||i.id||"vjs_video_"+Vn(),i=Ot(e.getTagSettings(n),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if(typeof n.closest=="function"){var o=n.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var l=n;l&&l.nodeType===1;){if(fn(l).hasOwnProperty("lang")){i.language=l.getAttribute("lang");break}l=l.parentNode}if(s=t.call(this,null,i,a)||this,s.boundDocumentFullscreenChange_=function(h){return s.documentFullscreenChange_(h)},s.boundFullWindowOnEscKey_=function(h){return s.fullWindowOnEscKey(h)},s.boundUpdateStyleEl_=function(h){return s.updateStyleEl_(h)},s.boundApplyInitTime_=function(h){return s.applyInitTime_(h)},s.boundUpdateCurrentBreakpoint_=function(h){return s.updateCurrentBreakpoint_(h)},s.boundHandleTechClick_=function(h){return s.handleTechClick_(h)},s.boundHandleTechDoubleClick_=function(h){return s.handleTechDoubleClick_(h)},s.boundHandleTechTouchStart_=function(h){return s.handleTechTouchStart_(h)},s.boundHandleTechTouchMove_=function(h){return s.handleTechTouchMove_(h)},s.boundHandleTechTouchEnd_=function(h){return s.handleTechTouchEnd_(h)},s.boundHandleTechTap_=function(h){return s.handleTechTap_(h)},s.isFullscreen_=!1,s.log=gP(s.id_),s.fsApi_=tf,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=n,s.tagAttributes=n&&fn(n),s.language(s.options_.language),i.languages){var c={};Object.getOwnPropertyNames(i.languages).forEach(function(h){c[h.toLowerCase()]=i.languages[h]}),s.languages_=c}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=i.poster||"",s.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],n.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(h){if(typeof s[h]!="function")throw new Error('plugin "'+h+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),ub(Ne(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(si(le,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var u=xt(s.options_);i.plugins&&Object.keys(i.plugins).forEach(function(h){s[h](i.plugins[h])}),i.debug&&s.debug(!0),s.options_.playerOptions=u,s.middleware_=[],s.playbackRates(i.playbackRates),s.initChildren(),s.isAudio(n.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),zo&&s.addClass("vjs-touch-enabled"),Br||s.addClass("vjs-workinghover"),e.players[s.id_]=Ne(s);var d=hP.split(".")[0];return s.addClass("vjs-v"+d),s.userActive(!0),s.reportUserActivity(),s.one("play",function(h){return s.listenForUserActivity_(h)}),s.on("stageclick",function(h){return s.handleStageClick_(h)}),s.on("keydown",function(h){return s.handleKeyDown(h)}),s.on("languagechange",function(h){return s.handleLanguagechange(h)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var r=e.prototype;return r.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),_r(le,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),_r(le,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),X9(this),Lr.names.forEach(function(a){var s=Lr[a],o=i[s.getterName]();o&&o.off&&o.off()}),t.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},r.createEl=function(){var i=this.tag,a,s=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?a=this.el_=i.parentNode:o||(a=this.el_=t.prototype.createEl.call(this,"div"));var l=fn(i);if(o){for(a=this.el_=i,i=this.tag=le.createElement("video");a.children.length;)i.appendChild(a.firstChild);ps(a,"video-js")||En(a,"video-js"),a.appendChild(i),s=this.playerElIngest_=a,Object.keys(a).forEach(function(b){try{i[b]=a[b]}catch{}})}if(i.setAttribute("tabindex","-1"),l.tabindex="-1",(ju||$n&&_P)&&(i.setAttribute("role","application"),l.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(b){o&&b==="class"||a.setAttribute(b,l[b]),o&&i.setAttribute(b,l[b])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=a.player=this,this.addClass("vjs-paused"),L.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=NP("vjs-styles-dimensions");var c=Ta(".vjs-styles-defaults"),u=Ta("head");u.insertBefore(this.styleEl_,c?c.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=i.getElementsByTagName("a"),h=0;h<d.length;h++){var p=d.item(h);En(p,"vjs-hidden"),p.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!s&&i.parentNode.insertBefore(a,i),fv(i,a),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a},r.crossOrigin=function(i){if(!i)return this.techGet_("crossOrigin");if(i!=="anonymous"&&i!=="use-credentials"){Ke.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"');return}this.techCall_("setCrossOrigin",i)},r.width=function(i){return this.dimension("width",i)},r.height=function(i){return this.dimension("height",i)},r.dimension=function(i,a){var s=i+"_";if(a===void 0)return this[s]||0;if(a===""||a==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(a);if(isNaN(o)){Ke.error('Improper value "'+a+'" supplied for for '+i);return}this[s]=o,this.updateStyleEl_()},r.fluid=function(i){var a=this;if(i===void 0)return!!this.fluid_;this.fluid_=!!i,kn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),_9(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.fill=function(i){if(i===void 0)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},r.aspectRatio=function(i){if(i===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},r.updateStyleEl_=function(){if(L.VIDEOJS_NO_DYNAMIC_STYLE===!0){var i=typeof this.width_=="number"?this.width_:this.options_.width,a=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(i>=0&&(s.width=i),a>=0&&(s.height=a));return}var o,l,c,u;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?c=this.aspectRatio_:this.videoWidth()>0?c=this.videoWidth()+":"+this.videoHeight():c="16:9";var d=c.split(":"),h=d[1]/d[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/h:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*h,/^[^a-zA-Z]/.test(this.id())?u="dimensions-"+this.id():u=this.id()+"-dimensions",this.addClass(u),jP(this.styleEl_,`
      .`+u+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+u+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+h*100+`%;
      }
    `)},r.loadTech_=function(i,a){var s=this;this.tech_&&this.unloadTech_();var o=jt(i),l=i.charAt(0).toLowerCase()+i.slice(1);o!=="Html5"&&this.tag&&(yt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var c=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(c=!1);var u={source:a,autoplay:c,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Lr.names.forEach(function(h){var p=Lr[h];u[p.getterName]=s[p.privateName]}),Ot(u,this.options_[o]),Ot(u,this.options_[l]),Ot(u,this.options_[i.toLowerCase()]),this.tag&&(u.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(u.startTime=this.cache_.currentTime);var d=yt.getTech(i);if(!d)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new d(u),this.tech_.ready(St(this,this.handleTechReady_),!0),ZT.jsonToTextTracks(this.textTracksJson_||[],this.tech_),b2.forEach(function(h){s.on(s.tech_,h,function(p){return s["handleTech"+jt(h)+"_"](p)})}),Object.keys(Jg).forEach(function(h){s.on(s.tech_,h,function(p){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+Jg[h]+"_"].bind(s),event:p});return}s["handleTech"+Jg[h]+"_"](p)})}),this.on(this.tech_,"loadstart",function(h){return s.handleTechLoadStart_(h)}),this.on(this.tech_,"sourceset",function(h){return s.handleTechSourceset_(h)}),this.on(this.tech_,"waiting",function(h){return s.handleTechWaiting_(h)}),this.on(this.tech_,"ended",function(h){return s.handleTechEnded_(h)}),this.on(this.tech_,"seeking",function(h){return s.handleTechSeeking_(h)}),this.on(this.tech_,"play",function(h){return s.handleTechPlay_(h)}),this.on(this.tech_,"firstplay",function(h){return s.handleTechFirstPlay_(h)}),this.on(this.tech_,"pause",function(h){return s.handleTechPause_(h)}),this.on(this.tech_,"durationchange",function(h){return s.handleTechDurationChange_(h)}),this.on(this.tech_,"fullscreenchange",function(h,p){return s.handleTechFullscreenChange_(h,p)}),this.on(this.tech_,"fullscreenerror",function(h,p){return s.handleTechFullscreenError_(h,p)}),this.on(this.tech_,"enterpictureinpicture",function(h){return s.handleTechEnterPictureInPicture_(h)}),this.on(this.tech_,"leavepictureinpicture",function(h){return s.handleTechLeavePictureInPicture_(h)}),this.on(this.tech_,"error",function(h){return s.handleTechError_(h)}),this.on(this.tech_,"posterchange",function(h){return s.handleTechPosterChange_(h)}),this.on(this.tech_,"textdata",function(h){return s.handleTechTextData_(h)}),this.on(this.tech_,"ratechange",function(h){return s.handleTechRateChange_(h)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&fv(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.unloadTech_=function(){var i=this;Lr.names.forEach(function(a){var s=Lr[a];i[s.privateName]=i[s.getterName]()}),this.textTracksJson_=ZT.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.tech=function(i){return i===void 0&&Ke.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},r.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},r.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},r.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},r.manualAutoplay_=function(i){var a=this;if(!(!this.tech_||typeof i!="string")){var s=function(){var c=a.muted();a.muted(!0);var u=function(){a.muted(c)};a.playTerminatedQueue_.push(u);var d=a.play();if(!!mc(d))return d.catch(function(h){throw u(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(h||""))})},o;if(i==="any"&&!this.muted()?(o=this.play(),mc(o)&&(o=o.catch(s))):i==="muted"&&!this.muted()?o=s():o=this.play(),!!mc(o))return o.then(function(){a.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:i})})}},r.updateSourceCaches_=function(i){i===void 0&&(i="");var a=i,s="";typeof a!="string"&&(a=i.src,s=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=Z9(this,a)),this.cache_.source=xt({},i,{src:a,type:s});for(var o=this.cache_.sources.filter(function(p){return p.src&&p.src===a}),l=[],c=this.$$("source"),u=[],d=0;d<c.length;d++){var h=fn(c[d]);l.push(h),h.src&&h.src===a&&u.push(h.src)}u.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},r.handleTechSourceset_=function(i){var a=this;if(!this.changingSrc_){var s=function(u){return a.updateSourceCaches_(u)},o=this.currentSource().src,l=i.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(s=function(){}),s(l),i.src||this.tech_.any(["sourceset","loadstart"],function(c){if(c.type!=="sourceset"){var u=a.techGet("currentSrc");a.lastSource_.tech=u,a.updateSourceCaches_(u)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},r.hasStarted=function(i){if(i===void 0)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.handleTechWaiting_=function(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime(),s=function o(){a!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",o))};this.on("timeupdate",s)},r.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},r.handleTechFirstPlay_=function(){this.options_.starttime&&(Ke.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.handleTechClick_=function(i){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,i):this.paused()?Hi(this.play()):this.pause())},r.handleTechDoubleClick_=function(i){if(!!this.controls_){var a=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(i.target)});a||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},r.handleTechTap_=function(){this.userActive(!this.userActive())},r.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.handleTechTouchEnd_=function(i){i.cancelable&&i.preventDefault()},r.handleStageClick_=function(){this.reportUserActivity()},r.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.documentFullscreenChange_=function(i){var a=i.target.player;if(!(a&&a!==this)){var s=this.el(),o=le[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},r.handleTechFullscreenChange_=function(i,a){var s=this;a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))},r.handleTechFullscreenError_=function(i,a){this.trigger("fullscreenerror",a)},r.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},r.handleTechEnterPictureInPicture_=function(i){this.isInPictureInPicture(!0)},r.handleTechLeavePictureInPicture_=function(i){this.isInPictureInPicture(!1)},r.handleTechError_=function(){var i=this.tech_.error();this.error(i)},r.handleTechTextData_=function(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},r.getCache=function(){return this.cache_},r.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},r.techCall_=function(i,a){this.ready(function(){if(i in K9)return G9(this.middleware_,this.tech_,i,a);if(i in a1)return n1(this.middleware_,this.tech_,i,a);try{this.tech_&&this.tech_[i](a)}catch(s){throw Ke(s),s}},!0)},r.techGet_=function(i){if(!(!this.tech_||!this.tech_.isReady_)){if(i in W9)return q9(this.middleware_,this.tech_,i);if(i in a1)return n1(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(a){throw this.tech_[i]===void 0?(Ke("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",a),a):a.name==="TypeError"?(Ke("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a):(Ke(a),a)}}},r.play=function(){var i=this,a=this.options_.Promise||L.Promise;return a?new a(function(s){i.play_(s)}):this.play_()},r.play_=function(i){var a=this;i===void 0&&(i=Hi),this.playCallbacks_.push(i);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(l){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&(kp||Br)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},r.runPlayTerminatedQueue_=function(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(a){a()})},r.runPlayCallbacks_=function(i){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(s){s(i)})},r.pause=function(){this.techCall_("pause")},r.paused=function(){return this.techGet_("paused")!==!1},r.played=function(){return this.techGet_("played")||gs(0,0)},r.scrubbing=function(i){if(typeof i=="undefined")return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.currentTime=function(i){if(typeof i!="undefined"){if(i<0&&(i=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",i),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},r.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},r.duration=function(i){if(i===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;i=parseFloat(i),i<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},r.remainingTime=function(){return this.duration()-this.currentTime()},r.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.buffered=function(){var i=this.techGet_("buffered");return(!i||!i.length)&&(i=gs(0,0)),i},r.bufferedPercent=function(){return VP(this.buffered(),this.duration())},r.bufferedEnd=function(){var i=this.buffered(),a=this.duration(),s=i.end(i.length-1);return s>a&&(s=a),s},r.volume=function(i){var a;if(i!==void 0){a=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a},r.muted=function(i){if(i!==void 0){this.techCall_("setMuted",i);return}return this.techGet_("muted")||!1},r.defaultMuted=function(i){return i!==void 0?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},r.lastVolume_=function(i){if(i!==void 0&&i!==0){this.cache_.lastVolume=i;return}return this.cache_.lastVolume},r.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.isFullscreen=function(i){if(i!==void 0){var a=this.isFullscreen_;this.isFullscreen_=Boolean(i),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},r.requestFullscreen=function(i){var a=this.options_.Promise||L.Promise;if(a){var s=this;return new a(function(o,l){function c(){s.off("fullscreenerror",d),s.off("fullscreenchange",u)}function u(){c(),o()}function d(p,b){c(),l(b)}s.one("fullscreenchange",u),s.one("fullscreenerror",d);var h=s.requestFullscreenHelper_(i);h&&(h.then(c,c),h.then(o,l))})}return this.requestFullscreenHelper_()},r.requestFullscreenHelper_=function(i){var a=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},i!==void 0&&(s=i)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},r.exitFullscreen=function(){var i=this.options_.Promise||L.Promise;if(i){var a=this;return new i(function(s,o){function l(){a.off("fullscreenerror",u),a.off("fullscreenchange",c)}function c(){l(),s()}function u(h,p){l(),o(p)}a.one("fullscreenchange",c),a.one("fullscreenerror",u);var d=a.exitFullscreenHelper_();d&&(d.then(l,l),d.then(s,o))})}return this.exitFullscreenHelper_()},r.exitFullscreenHelper_=function(){var i=this;if(this.fsApi_.requestFullscreen){var a=le[this.fsApi_.exitFullscreen]();return a&&Hi(a.then(function(){return i.isFullscreen(!1)})),a}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},r.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=le.documentElement.style.overflow,si(le,"keydown",this.boundFullWindowOnEscKey_),le.documentElement.style.overflow="hidden",En(le.body,"vjs-full-window"),this.trigger("enterFullWindow")},r.fullWindowOnEscKey=function(i){ze.isEventKey(i,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},r.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,_r(le,"keydown",this.boundFullWindowOnEscKey_),le.documentElement.style.overflow=this.docOrigOverflow,Fu(le.body,"vjs-full-window"),this.trigger("exitFullWindow")},r.disablePictureInPicture=function(i){if(i===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},r.isInPictureInPicture=function(i){if(i!==void 0){this.isInPictureInPicture_=!!i,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},r.requestPictureInPicture=function(){if("pictureInPictureEnabled"in le&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},r.exitPictureInPicture=function(){if("pictureInPictureEnabled"in le)return le.exitPictureInPicture()},r.handleKeyDown=function(i){var a=this.options_.userActions;if(!(!a||!a.hotkeys)){var s=function(l){var c=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var u=["button","checkbox","hidden","radio","reset","submit"];if(c==="input")return u.indexOf(l.type)===-1;var d=["textarea"];return d.indexOf(c)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,i):this.handleHotkeys(i))}},r.handleHotkeys=function(i){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},s=a.fullscreenKey,o=s===void 0?function(w){return ze.isEventKey(w,"f")}:s,l=a.muteKey,c=l===void 0?function(w){return ze.isEventKey(w,"m")}:l,u=a.playPauseKey,d=u===void 0?function(w){return ze.isEventKey(w,"k")||ze.isEventKey(w,"Space")}:u;if(o.call(this,i)){i.preventDefault(),i.stopPropagation();var h=J.getComponent("FullscreenToggle");le[this.fsApi_.fullscreenEnabled]!==!1&&h.prototype.handleClick.call(this,i)}else if(c.call(this,i)){i.preventDefault(),i.stopPropagation();var p=J.getComponent("MuteToggle");p.prototype.handleClick.call(this,i)}else if(d.call(this,i)){i.preventDefault(),i.stopPropagation();var b=J.getComponent("PlayToggle");b.prototype.handleClick.call(this,i)}},r.canPlayType=function(i){for(var a,s=0,o=this.options_.techOrder;s<o.length;s++){var l=o[s],c=yt.getTech(l);if(c||(c=J.getComponent(l)),!c){Ke.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(c.isSupported()&&(a=c.canPlayType(i),a))return a}return""},r.selectSource=function(i){var a=this,s=this.options_.techOrder.map(function(d){return[d,yt.getTech(d)]}).filter(function(d){var h=d[0],p=d[1];return p?p.isSupported():(Ke.error('The "'+h+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(h,p,b){var w;return h.some(function(v){return p.some(function(T){if(w=b(v,T),w)return!0})}),w},l,c=function(h){return function(p,b){return h(b,p)}},u=function(h,p){var b=h[0],w=h[1];if(w.canPlaySource(p,a.options_[b.toLowerCase()]))return{source:p,tech:b}};return this.options_.sourceOrder?l=o(i,s,c(u)):l=o(s,i,u),l||!1},r.handleSrc_=function(i,a){var s=this;if(typeof i=="undefined")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=eW(i);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),V9(this,o[0],function(u,d){s.middleware_=d,a||(s.cache_.sources=o),s.updateSourceCaches_(u);var h=s.src_(u);if(h){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}H9(d,s.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},c=function(){s.off("error",l)};this.one("error",l),this.one("playing",c),this.resetRetryOnError_=function(){s.off("error",l),s.off("playing",c)}}},r.src=function(i){return this.handleSrc_(i,!1)},r.src_=function(i){var a=this,s=this.selectSource([i]);return s?S9(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1):!0},r.load=function(){this.techCall_("load")},r.reset=function(){var i=this,a=this.options_.Promise||L.Promise;if(this.paused()||!a)this.doReset_();else{var s=this.play();Hi(s.then(function(){return i.doReset_()}))}},r.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),kn(this)&&this.trigger("playerreset")},r.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},r.resetProgressBar_=function(){this.currentTime(0);var i=this.controlBar||{},a=i.durationDisplay,s=i.remainingTimeDisplay;a&&a.updateContent(),s&&s.updateContent()},r.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},r.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},r.currentSources=function(){var i=this.currentSource(),a=[];return Object.keys(i).length!==0&&a.push(i),this.cache_.sources||a},r.currentSource=function(){return this.cache_.source||{}},r.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.preload=function(i){if(i!==void 0){this.techCall_("setPreload",i),this.options_.preload=i;return}return this.techGet_("preload")},r.autoplay=function(i){if(i===void 0)return this.options_.autoplay||!1;var a;typeof i=="string"&&/(any|play|muted)/.test(i)||i===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_(typeof i=="string"?i:"play"),a=!1):i?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a=="undefined"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},r.playsinline=function(i){return i!==void 0?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},r.loop=function(i){if(i!==void 0){this.techCall_("setLoop",i),this.options_.loop=i;return}return this.techGet_("loop")},r.poster=function(i){if(i===void 0)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.controls=function(i){if(i===void 0)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.usingNativeControls=function(i){if(i===void 0)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.error=function(i){var a=this;if(i===void 0)return this.error_||null;if(xa("beforeerror").forEach(function(o){var l=o(a,i);if(!(jn(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){a.log.error("please return a value that MediaError expects in beforeerror hooks");return}i=l}),this.options_.suppressNotSupportedError&&i&&i.code===4){var s=function(){this.error(i)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(i===null){this.error_=i,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new jr(i),this.addClass("vjs-error"),Ke.error("(CODE:"+this.error_.code+" "+jr.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),xa("error").forEach(function(o){return o(a,a.error_)})},r.reportUserActivity=function(i){this.userActivity_=!0},r.userActive=function(i){if(i===void 0)return this.userActive_;if(i=!!i,i!==this.userActive_){if(this.userActive_=i,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.listenForUserActivity_=function(){var i,a,s,o=St(this,this.reportUserActivity),l=function(b){(b.screenX!==a||b.screenY!==s)&&(a=b.screenX,s=b.screenY,o())},c=function(){o(),this.clearInterval(i),i=this.setInterval(o,250)},u=function(b){o(),this.clearInterval(i)};this.on("mousedown",c),this.on("mousemove",l),this.on("mouseup",u),this.on("mouseleave",u);var d=this.getChild("controlBar");d&&!Br&&!zn&&(d.on("mouseenter",function(p){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),d.on("mouseleave",function(p){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var h;this.setInterval(function(){if(!!this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(h);var p=this.options_.inactivityTimeout;p<=0||(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},p))}},250)},r.playbackRate=function(i){if(i!==void 0){this.techCall_("setPlaybackRate",i);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},r.defaultPlaybackRate=function(i){return i!==void 0?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.isAudio=function(i){if(i!==void 0){this.isAudio_=!!i;return}return!!this.isAudio_},r.enableAudioOnlyUI_=function(){var i=this;this.addClass("vjs-audio-only-mode");var a=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();a.forEach(function(l){l!==s&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),i.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},r.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(i){return i.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},r.audioOnlyMode=function(i){var a=this;if(typeof i!="boolean"||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var s=this.options_.Promise||L.Promise;if(s){if(i){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return a.enableAudioOnlyUI_()})}return s.resolve().then(function(){return a.disableAudioOnlyUI_()})}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},r.enablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.disablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.audioPosterMode=function(i){var a=this;if(typeof i!="boolean"||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var s=this.options_.Promise||L.Promise;if(s){if(i){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.disablePosterModeUI_()})}if(i){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},r.addTextTrack=function(i,a,s){if(this.tech_)return this.tech_.addTextTrack(i,a,s)},r.addRemoteTextTrack=function(i,a){if(this.tech_)return this.tech_.addRemoteTextTrack(i,a)},r.removeRemoteTextTrack=function(i){i===void 0&&(i={});var a=i,s=a.track;if(s||(s=i),this.tech_)return this.tech_.removeRemoteTextTrack(s)},r.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.language=function(i){if(i===void 0)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),kn(this)&&this.trigger("languagechange"))},r.languages=function(){return xt(e.prototype.options_.languages,this.languages_)},r.toJSON=function(){var i=xt(this.options_),a=i.tracks;i.tracks=[];for(var s=0;s<a.length;s++){var o=a[s];o=xt(o),o.player=void 0,i.tracks[s]=o}return i},r.createModal=function(i,a){var s=this;a=a||{},a.content=i||"";var o=new yl(this,a);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},r.updateCurrentBreakpoint_=function(){if(!!this.responsive())for(var i=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<_v.length;s++){var o=_v[s],l=this.breakpoints_[o];if(a<=l){if(i===o)return;i&&this.removeClass(uh[i]),this.addClass(uh[o]),this.breakpoint_=o;break}}},r.removeCurrentBreakpoint_=function(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},r.breakpoints=function(i){return i===void 0?Ot(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Ot({},PW,i),this.updateCurrentBreakpoint_(),Ot(this.breakpoints_))},r.responsive=function(i){if(i===void 0)return this.responsive_;i=Boolean(i);var a=this.responsive_;if(i!==a)return this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i},r.currentBreakpoint=function(){return this.breakpoint_},r.currentBreakpointClass=function(){return uh[this.breakpoint_]||""},r.loadMedia=function(i,a){var s=this;if(!(!i||typeof i!="object")){this.reset(),this.cache_.media=xt(i);var o=this.cache_.media,l=o.artwork,c=o.poster,u=o.src,d=o.textTracks;!l&&c&&(this.cache_.media.artwork=[{src:c,type:af(c)}]),u&&this.src(u),c&&this.poster(c),Array.isArray(d)&&d.forEach(function(h){return s.addRemoteTextTrack(h,!1)}),this.ready(a)}},r.getMedia=function(){if(!this.cache_.media){var i=this.poster(),a=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:a,textTracks:s};return i&&(o.poster=i,o.artwork=[{src:o.poster,type:af(o.poster)}]),o}return xt(this.cache_.media)},e.getTagSettings=function(i){var a={sources:[],tracks:[]},s=fn(i),o=s["data-setup"];if(ps(i,"vjs-fill")&&(s.fill=!0),ps(i,"vjs-fluid")&&(s.fluid=!0),o!==null){var l=g7(o||"{}"),c=l[0],u=l[1];c&&Ke.error(c),Ot(s,u)}if(Ot(a,s),i.hasChildNodes())for(var d=i.childNodes,h=0,p=d.length;h<p;h++){var b=d[h],w=b.nodeName.toLowerCase();w==="source"?a.sources.push(fn(b)):w==="track"&&a.tracks.push(fn(b))}return a},r.flexNotSupported_=function(){var i=le.createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},r.debug=function(i){if(i===void 0)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},r.playbackRates=function(i){if(i===void 0)return this.cache_.playbackRates;!Array.isArray(i)||!i.every(function(a){return typeof a=="number"})||(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},e}(J);Lr.names.forEach(function(t){var e=Lr[t];$t.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});$t.prototype.crossorigin=$t.prototype.crossOrigin;$t.players={};var Fl=L.navigator;$t.prototype.options_={techOrder:yt.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Fl&&(Fl.languages&&Fl.languages[0]||Fl.userLanguage||Fl.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(t){$t.prototype[t]=function(){return this.techGet_(t)}});b2.forEach(function(t){$t.prototype["handleTech"+jt(t)+"_"]=function(){return this.trigger(t)}});J.registerComponent("Player",$t);var lf="plugin",wo="activePlugins_",so={},cf=function(e){return so.hasOwnProperty(e)},dh=function(e){return cf(e)?so[e]:void 0},w2=function(e,r){e[wo]=e[wo]||{},e[wo][r]=!0},uf=function(e,r,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,r),e.trigger(i+":"+r.name,r)},OW=function(e,r){var n=function(){uf(this,{name:e,plugin:r,instance:null},!0);var a=r.apply(this,arguments);return w2(this,e),uf(this,{name:e,plugin:r,instance:a}),a};return Object.keys(r).forEach(function(i){n[i]=r[i]}),n},b1=function(e,r){return r.prototype.name=e,function(){uf(this,{name:e,plugin:r,instance:null},!0);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=sh(r,[this].concat(i));return this[e]=function(){return s},uf(this,s.getEventHash()),s}},on=function(){function t(r){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=r,this.log||(this.log=this.player.log.createLogger(this.name)),ub(this),delete this.trigger,$P(this,this.constructor.defaultState),w2(r,this.name),this.dispose=this.dispose.bind(this),r.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(n){return n===void 0&&(n={}),n.name=this.name,n.plugin=this.constructor,n.instance=this,n},e.trigger=function(n,i){return i===void 0&&(i={}),vl(this.eventBusEl_,n,this.getEventHash(i))},e.handleStateChanged=function(n){},e.dispose=function(){var n=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[wo][n]=!1,this.player=this.state=null,i[n]=b1(n,so[n])},t.isBasic=function(n){var i=typeof n=="string"?dh(n):n;return typeof i=="function"&&!t.prototype.isPrototypeOf(i.prototype)},t.registerPlugin=function(n,i){if(typeof n!="string")throw new Error('Illegal plugin name, "'+n+'", must be a string, was '+typeof n+".");if(cf(n))Ke.warn('A plugin named "'+n+'" already exists. You may want to avoid re-registering plugins!');else if($t.prototype.hasOwnProperty(n))throw new Error('Illegal plugin name, "'+n+'", cannot share a name with an existing player method!');if(typeof i!="function")throw new Error('Illegal plugin for "'+n+'", must be a function, was '+typeof i+".");return so[n]=i,n!==lf&&(t.isBasic(i)?$t.prototype[n]=OW(n,i):$t.prototype[n]=b1(n,i)),i},t.deregisterPlugin=function(n){if(n===lf)throw new Error("Cannot de-register base plugin.");cf(n)&&(delete so[n],delete $t.prototype[n])},t.getPlugins=function(n){n===void 0&&(n=Object.keys(so));var i;return n.forEach(function(a){var s=dh(a);s&&(i=i||{},i[a]=s)}),i},t.getPluginVersion=function(n){var i=dh(n);return i&&i.VERSION||""},t}();on.getPlugin=dh;on.BASE_PLUGIN_NAME=lf;on.registerPlugin(lf,on);$t.prototype.usingPlugin=function(t){return!!this[wo]&&this[wo][t]===!0};$t.prototype.hasPlugin=function(t){return!!cf(t)};var DW=function(e,r){r===void 0&&(r={});var n=function(){e.apply(this,arguments)},i={};typeof r=="object"?(r.constructor!==Object.prototype.constructor&&(n=r.constructor),i=r):typeof r=="function"&&(n=r),iq(n,e),e&&(n.super_=e);for(var a in i)i.hasOwnProperty(a)&&(n.prototype[a]=i[a]);return n},_2=function(e){return e.indexOf("#")===0?e.slice(1):e};function H(t,e,r){var n=H.getPlayer(t);if(n)return e&&Ke.warn('Player "'+t+'" is already initialised. Options will not be applied.'),r&&n.ready(r),n;var i=typeof t=="string"?Ta("#"+_2(t)):t;if(!ml(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Ke.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),xa("beforesetup").forEach(function(s){var o=s(i,xt(e));if(!jn(o)||Array.isArray(o)){Ke.error("please return an object in beforesetup hooks");return}e=xt(e,o)});var a=J.getComponent("Player");return n=new a(i,e,r),xa("setup").forEach(function(s){return s(n)}),n}H.hooks_=vn;H.hooks=xa;H.hook=a9;H.hookOnce=s9;H.removeHook=fP;if(L.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&gl()){var Ud=Ta(".vjs-styles-defaults");if(!Ud){Ud=NP("vjs-styles-defaults");var Zg=Ta("head");Zg&&Zg.insertBefore(Ud,Zg.firstChild),jP(Ud,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}gv(1,H);H.VERSION=hP;H.options=$t.prototype.options_;H.getPlayers=function(){return $t.players};H.getPlayer=function(t){var e=$t.players,r;if(typeof t=="string"){var n=_2(t),i=e[n];if(i)return i;r=Ta("#"+n)}else r=t;if(ml(r)){var a=r,s=a.player,o=a.playerId;if(s||e[o])return s||e[o]}};H.getAllPlayers=function(){return Object.keys($t.players).map(function(t){return $t.players[t]}).filter(Boolean)};H.players=$t.players;H.getComponent=J.getComponent;H.registerComponent=function(t,e){yt.isTech(e)&&Ke.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),J.registerComponent.call(J,t,e)};H.getTech=yt.getTech;H.registerTech=yt.registerTech;H.use=$9;Object.defineProperty(H,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(H.middleware,"TERMINATOR",{value:nf,writeable:!1,enumerable:!0});H.browser=h9;H.TOUCH_ENABLED=zo;H.extend=DW;H.mergeOptions=xt;H.bind=St;H.registerPlugin=on.registerPlugin;H.deregisterPlugin=on.deregisterPlugin;H.plugin=function(t,e){return Ke.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),on.registerPlugin(t,e)};H.getPlugins=on.getPlugins;H.getPlugin=on.getPlugin;H.getPluginVersion=on.getPluginVersion;H.addLanguage=function(t,e){var r;return t=(""+t).toLowerCase(),H.options.languages=xt(H.options.languages,(r={},r[t]=e,r)),H.options.languages[t]};H.log=Ke;H.createLogger=gP;H.createTimeRange=H.createTimeRanges=gs;H.formatTime=Go;H.setFormatTime=oW;H.resetFormatTime=lW;H.parseUrl=hb;H.isCrossOrigin=Dp;H.EventTarget=nr;H.on=si;H.one=Pp;H.off=_r;H.trigger=vl;H.xhr=mI;H.TextTrack=Bu;H.AudioTrack=GP;H.VideoTrack=WP;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){H[t]=function(){return Ke.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),RP[t].apply(null,arguments)}});H.computedStyle=tu;H.dom=RP;H.url=F9;H.defineLazyProperty=Ob;H.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.14.3 @license Apache-2.0 */var Ti=bp,df=function(e,r,n){return e&&n&&n.responseURL&&r!==n.responseURL?n.responseURL:r},Ri=function(e){return H.log.debug?H.log.debug.bind(H,"VHS:",e+" >"):function(){}},Sa=1/30,qi=Sa*3,x2=function(e,r){var n=[],i;if(e&&e.length)for(i=0;i<e.length;i++)r(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return H.createTimeRanges(n)},oo=function(e,r){return x2(e,function(n,i){return n-qi<=r&&i+qi>=r})},zd=function(e,r){return x2(e,function(n){return n-Sa>=r})},LW=function(e){if(e.length<2)return H.createTimeRanges();for(var r=[],n=1;n<e.length;n++){var i=e.end(n-1),a=e.start(n);r.push([i,a])}return H.createTimeRanges(r)},RW=function(e,r){var n=null,i=null,a=0,s=[],o=[];if(!e||!e.length||!r||!r.length)return H.createTimeRange();for(var l=e.length;l--;)s.push({time:e.start(l),type:"start"}),s.push({time:e.end(l),type:"end"});for(l=r.length;l--;)s.push({time:r.start(l),type:"start"}),s.push({time:r.end(l),type:"end"});for(s.sort(function(c,u){return c.time-u.time}),l=0;l<s.length;l++)s[l].type==="start"?(a++,a===2&&(n=s[l].time)):s[l].type==="end"&&(a--,a===1&&(i=s[l].time)),n!==null&&i!==null&&(o.push([n,i]),n=null,i=null);return H.createTimeRanges(o)},T2=function(e){var r=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)r.push(e.start(n)+" => "+e.end(n));return r.join(", ")},MW=function(e,r,n){n===void 0&&(n=1);var i=e.length?e.end(e.length-1):0;return(i-r)/n},as=function(e){for(var r=[],n=0;n<e.length;n++)r.push({start:e.start(n),end:e.end(n)});return r},NW=function(e,r){if(e===r)return!1;if(!e&&r||!r&&e||e.length!==r.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==r.start(n)||e.end(n)!==r.end(n))return!0;return!1},w1=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},Db=function(e,r){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var a=e.start(i),s=e.end(i);if(!(r>s)){if(r>a&&r<=s){n+=s-r;continue}n+=s-a}}return n},_1=H.createTimeRange,Lb=function(e,r){if(!r.preload)return r.duration;var n=0;return(r.parts||[]).forEach(function(i){n+=i.duration}),(r.preloadHints||[]).forEach(function(i){i.type==="PART"&&(n+=e.partTargetDuration)}),n},xv=function(e){return(e.segments||[]).reduce(function(r,n,i){return n.parts?n.parts.forEach(function(a,s){r.push({duration:a.duration,segmentIndex:i,partIndex:s,part:a,segment:n})}):r.push({duration:n.duration,segmentIndex:i,partIndex:null,segment:n,part:null}),r},[])},S2=function(e){var r=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return r&&r.parts||[]},E2=function(e){var r=e.preloadSegment;if(!!r){var n=r.parts,i=r.preloadHints,a=(i||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return a+=n&&n.length?n.length:0,a}},k2=function(e,r){if(r.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=S2(r).length>0;return n&&r.serverControl&&r.serverControl.partHoldBack?r.serverControl.partHoldBack:n&&r.partTargetDuration?r.partTargetDuration*3:r.serverControl&&r.serverControl.holdBack?r.serverControl.holdBack:r.targetDuration?r.targetDuration*3:0},jW=function(e,r){var n=0,i=r-e.mediaSequence,a=e.segments[i];if(a){if(typeof a.start!="undefined")return{result:a.start,precise:!0};if(typeof a.end!="undefined")return{result:a.end-a.duration,precise:!0}}for(;i--;){if(a=e.segments[i],typeof a.end!="undefined")return{result:n+a.end,precise:!0};if(n+=Lb(e,a),typeof a.start!="undefined")return{result:n+a.start,precise:!0}}return{result:n,precise:!1}},FW=function(e,r){for(var n=0,i,a=r-e.mediaSequence;a<e.segments.length;a++){if(i=e.segments[a],typeof i.start!="undefined")return{result:i.start-n,precise:!0};if(n+=Lb(e,i),typeof i.end!="undefined")return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},C2=function(e,r,n){if(typeof r=="undefined"&&(r=e.mediaSequence+e.segments.length),r<e.mediaSequence)return 0;var i=jW(e,r);if(i.precise)return i.result;var a=FW(e,r);return a.precise?a.result:i.result+n},A2=function(e,r,n){if(!e)return 0;if(typeof n!="number"&&(n=0),typeof r=="undefined"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return L.Infinity}return C2(e,r,n)},vc=function(e){var r=e.defaultDuration,n=e.durationList,i=e.startIndex,a=e.endIndex,s=0;if(i>a){var o=[a,i];i=o[0],a=o[1]}if(i<0){for(var l=i;l<Math.min(0,a);l++)s+=r;i=0}for(var c=i;c<a;c++)s+=n[c].duration;return s},I2=function(e,r,n,i){if(!e||!e.segments)return null;if(e.endList)return A2(e);if(r===null)return null;r=r||0;var a=C2(e,e.mediaSequence+e.segments.length,r);return n&&(i=typeof i=="number"?i:k2(null,e),a-=i),Math.max(0,a)},BW=function(e,r,n){var i=!0,a=r||0,s=I2(e,r,i,n);return s===null?_1():_1(a,s)},UW=function(e){for(var r=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,a=e.startingPartIndex,s=e.startTime,o=e.experimentalExactManifestTimings,l=n-s,c=xv(r),u=0,d=0;d<c.length;d++){var h=c[d];if(i===h.segmentIndex&&!(typeof a=="number"&&typeof h.partIndex=="number"&&a!==h.partIndex)){u=d;break}}if(l<0){if(u>0)for(var p=u-1;p>=0;p--){var b=c[p];if(l+=b.duration,o){if(l<0)continue}else if(l+Sa<=0)continue;return{partIndex:b.partIndex,segmentIndex:b.segmentIndex,startTime:s-vc({defaultDuration:r.targetDuration,durationList:c,startIndex:u,endIndex:p})}}return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:n}}if(u<0){for(var w=u;w<0;w++)if(l-=r.targetDuration,l<0)return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:n};u=0}for(var v=u;v<c.length;v++){var T=c[v];if(l-=T.duration,o){if(l>0)continue}else if(l-Sa>=0)continue;return{partIndex:T.partIndex,segmentIndex:T.segmentIndex,startTime:s+vc({defaultDuration:r.targetDuration,durationList:c,startIndex:u,endIndex:v})}}return{segmentIndex:c[c.length-1].segmentIndex,partIndex:c[c.length-1].partIndex,startTime:n}},P2=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Rb=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Np=function(e){var r=P2(e);return!e.disabled&&!r},zW=function(e){return e.disabled},$W=function(e){for(var r=0;r<e.segments.length;r++)if(e.segments[r].key)return!0;return!1},O2=function(e,r){return r.attributes&&r.attributes[e]},VW=function(e,r,n,i){if(i===void 0&&(i=0),!O2("BANDWIDTH",n))return NaN;var a=e*n.attributes.BANDWIDTH;return(a-i*8)/r},Tv=function(e,r){if(e.playlists.length===1)return!0;var n=r.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(i){return Np(i)?(i.attributes.BANDWIDTH||0)<n:!1}).length===0},Mb=function(e,r){return!e&&!r||!e&&r||e&&!r?!1:!!(e===r||e.id&&r.id&&e.id===r.id||e.resolvedUri&&r.resolvedUri&&e.resolvedUri===r.resolvedUri||e.uri&&r.uri&&e.uri===r.uri)},x1=function(e,r){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var a in n){for(var s in n[a])if(i=r(n[a][s]),i)break;if(i)break}return!!i},$u=function(e){if(!e||!e.playlists||!e.playlists.length){var r=x1(e,function(s){return s.playlists&&s.playlists.length||s.uri});return r}for(var n=function(o){var l=e.playlists[o],c=l.attributes&&l.attributes.CODECS;if(c&&c.split(",").every(function(d){return TI(d)}))return"continue";var u=x1(e,function(d){return Mb(l,d)});return u?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var a=n(i);if(a!=="continue"&&typeof a=="object")return a.v}return!0},Vr={liveEdgeDelay:k2,duration:A2,seekable:BW,getMediaInfoForTime:UW,isEnabled:Np,isDisabled:zW,isBlacklisted:P2,isIncompatible:Rb,playlistEnd:I2,isAes:$W,hasAttribute:O2,estimateSegmentRequestTime:VW,isLowestEnabledRendition:Tv,isAudioOnly:$u,playlistMatch:Mb,segmentDurationWithParts:Lb},D2=H.log,Nb=function(e,r){return e+"-"+r},HW=function(e){var r=e.onwarn,n=e.oninfo,i=e.manifestString,a=e.customTagParsers,s=a===void 0?[]:a,o=e.customTagMappers,l=o===void 0?[]:o,c=e.experimentalLLHLS,u=new uq;r&&u.on("warn",r),n&&u.on("info",n),s.forEach(function(w){return u.addParser(w)}),l.forEach(function(w){return u.addTagMapper(w)}),u.push(i),u.end();var d=u.manifest;if(c||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(w){d.hasOwnProperty(w)&&delete d[w]}),d.segments&&d.segments.forEach(function(w){["parts","preloadHints"].forEach(function(v){w.hasOwnProperty(v)&&delete w[v]})})),!d.targetDuration){var h=10;d.segments&&d.segments.length&&(h=d.segments.reduce(function(w,v){return Math.max(w,v.duration)},0)),r&&r("manifest has no targetDuration defaulting to "+h),d.targetDuration=h}var p=S2(d);if(p.length&&!d.partTargetDuration){var b=p.reduce(function(w,v){return Math.max(w,v.duration)},0);r&&(r("manifest has no partTargetDuration defaulting to "+b),D2.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),d.partTargetDuration=b}return d},Vu=function(e,r){!e.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(n){if(!!e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var a in e.mediaGroups[n][i]){var s=e.mediaGroups[n][i][a];r(s,n,i,a)}})},L2=function(e){var r=e.playlist,n=e.uri,i=e.id;r.id=i,r.playlistErrors_=0,n&&(r.uri=n),r.attributes=r.attributes||{}},qW=function(e){for(var r=e.playlists.length;r--;){var n=e.playlists[r];L2({playlist:n,id:Nb(r,n.uri)}),n.resolvedUri=Ti(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||D2.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},GW=function(e){Vu(e,function(r){r.uri&&(r.resolvedUri=Ti(e.uri,r.uri))})},WW=function(e,r){var n=Nb(0,r),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:L.location.href,resolvedUri:L.location.href,playlists:[{uri:r,id:n,resolvedUri:r,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[r]=i.playlists[0],i},R2=function(e,r){e.uri=r;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var i="placeholder-uri-"+n;e.playlists[n].uri=i}var a=$u(e);Vu(e,function(s,o,l,c){var u="placeholder-uri-"+o+"-"+l+"-"+c;if(!s.playlists||!s.playlists.length){if(a&&o==="AUDIO"&&!s.uri)for(var d=0;d<e.playlists.length;d++){var h=e.playlists[d];if(h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===l)return}s.playlists=[vi({},s)]}s.playlists.forEach(function(p,b){var w=Nb(b,u);p.uri?p.resolvedUri=p.resolvedUri||Ti(e.uri,p.uri):(p.uri=b===0?u:w,p.resolvedUri=p.uri),p.id=p.id||w,p.attributes=p.attributes||{},e.playlists[p.id]=p,e.playlists[p.uri]=p})}),qW(e),GW(e)},hf=H.mergeOptions,KW=H.EventTarget,YW=function(e,r){if(r.endList||!r.serverControl)return e;var n={};if(r.serverControl.canBlockReload){var i=r.preloadSegment,a=r.mediaSequence+r.segments.length;if(i){var s=i.parts||[],o=E2(r)-1;o>-1&&o!==s.length-1&&(n._HLS_part=o),(o>-1||s.length)&&a--}n._HLS_msn=a}if(r.serverControl&&r.serverControl.canSkipUntil&&(n._HLS_skip=r.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var l=new L.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(c){!n.hasOwnProperty(c)||l.searchParams.set(c,n[c])}),e=l.toString()}return e},XW=function(e,r){if(!e)return r;var n=hf(e,r);if(e.preloadHints&&!r.preloadHints&&delete n.preloadHints,e.parts&&!r.parts)delete n.parts;else if(e.parts&&r.parts)for(var i=0;i<r.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=hf(e.parts[i],r.parts[i]));return!e.skipped&&r.skipped&&(n.skipped=!1),e.preload&&!r.preload&&(n.preload=!1),n},QW=function(e,r,n){var i=e.slice(),a=r.slice();n=n||0;for(var s=[],o,l=0;l<a.length;l++){var c=i[l+n],u=a[l];c?(o=c.map||o,s.push(XW(c,u))):(o&&!u.map&&(u.map=o),s.push(u))}return s},M2=function(e,r){!e.resolvedUri&&e.uri&&(e.resolvedUri=Ti(r,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Ti(r,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Ti(r,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Ti(r,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(n){n.resolvedUri||(n.resolvedUri=Ti(r,n.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(n){n.resolvedUri||(n.resolvedUri=Ti(r,n.uri))})},N2=function(e){var r=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(var i=0;i<n.preloadHints.length;i++)if(n.preloadHints[i].type==="MAP")return r}n.duration=e.targetDuration,n.preload=!0,r.push(n)}return r},j2=function(e,r){return e===r||e.segments&&r.segments&&e.segments.length===r.segments.length&&e.endList===r.endList&&e.mediaSequence===r.mediaSequence&&e.preloadSegment===r.preloadSegment},Sv=function(e,r,n){n===void 0&&(n=j2);var i=hf(e,{}),a=i.playlists[r.id];if(!a||n(a,r))return null;r.segments=N2(r);var s=hf(a,r);if(s.preloadSegment&&!r.preloadSegment&&delete s.preloadSegment,a.segments){if(r.skip){r.segments=r.segments||[];for(var o=0;o<r.skip.skippedSegments;o++)r.segments.unshift({skipped:!0})}s.segments=QW(a.segments,r.segments,r.mediaSequence-a.mediaSequence)}s.segments.forEach(function(c){M2(c,s.resolvedUri)});for(var l=0;l<i.playlists.length;l++)i.playlists[l].id===r.id&&(i.playlists[l]=s);return i.playlists[r.id]=s,i.playlists[r.uri]=s,Vu(e,function(c,u,d,h){if(!!c.playlists)for(var p=0;p<c.playlists.length;p++)r.id===c.playlists[p].id&&(c.playlists[p]=s)}),i},Ev=function(e,r){var n=e.segments||[],i=n[n.length-1],a=i&&i.parts&&i.parts[i.parts.length-1],s=a&&a.duration||i&&i.duration;return r&&s?s*1e3:(e.partTargetDuration||e.targetDuration||10)*500},lo=function(t){ge(e,t);function e(n,i,a){var s;if(a===void 0&&(a={}),s=t.call(this)||this,!n)throw new Error("A non-empty playlist URL or object is required");s.logger_=Ri("PlaylistLoader");var o=a,l=o.withCredentials,c=l===void 0?!1:l,u=o.handleManifestRedirects,d=u===void 0?!1:u;s.src=n,s.vhs_=i,s.withCredentials=c,s.handleManifestRedirects=d;var h=i.options_;return s.customTagParsers=h&&h.customTagParsers||[],s.customTagMappers=h&&h.customTagMappers||[],s.experimentalLLHLS=h&&h.experimentalLLHLS||!1,H.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(Ne(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var r=e.prototype;return r.handleMediaupdatetimeout_=function(){var i=this;if(this.state==="HAVE_METADATA"){var a=this.media(),s=Ti(this.master.uri,a.uri);this.experimentalLLHLS&&(s=YW(s,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,l){if(!!i.request){if(o)return i.playlistRequestError(i.request,i.media(),"HAVE_METADATA");i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}})}},r.playlistRequestError=function(i,a,s){var o=a.uri,l=a.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[l],status:i.status,message:"HLS playlist request error at URL: "+o+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},r.parseManifest_=function(i){var a=this,s=i.url,o=i.manifestString;return HW({onwarn:function(c){var u=c.message;return a.logger_("m3u8-parser warn for "+s+": "+u)},oninfo:function(c){var u=c.message;return a.logger_("m3u8-parser info for "+s+": "+u)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},r.haveMetadata=function(i){var a=i.playlistString,s=i.playlistObject,o=i.url,l=i.id;this.request=null,this.state="HAVE_METADATA";var c=s||this.parseManifest_({url:o,manifestString:a});c.lastRequest=Date.now(),L2({playlist:c,uri:o,id:l});var u=Sv(this.master,c);this.targetDuration=c.partTargetDuration||c.targetDuration,this.pendingMedia_=null,u?(this.master=u,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Ev(this.media(),!!u)),this.trigger("loadedplaylist")},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),L.clearTimeout(this.mediaUpdateTimeout),L.clearTimeout(this.finalRenditionTimeout),this.off()},r.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},r.media=function(i,a){var s=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof i=="string"){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(L.clearTimeout(this.finalRenditionTimeout),a){var o=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=L.setTimeout(this.media.bind(this,i,!1),o);return}var l=this.state,c=!this.media_||i.id!==this.media_.id,u=this.master.playlists[i.id];if(u&&u.endList||i.endList&&i.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,c&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Ev(i,!0)),!!c){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(d,h){if(!!s.request){if(i.lastRequest=Date.now(),i.resolvedUri=df(s.handleManifestRedirects,i.resolvedUri,h),d)return s.playlistRequestError(s.request,i,l);s.haveMetadata({playlistString:h.responseText,url:i.uri,id:i.id}),l==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},r.pause=function(){this.mediaUpdateTimeout&&(L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},r.load=function(i){var a=this;this.mediaUpdateTimeout&&(L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(i){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=L.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},r.updateMediaUpdateTimeout_=function(i){var a=this;this.mediaUpdateTimeout&&(L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=L.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(i)},i))},r.start=function(){var i=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=L.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){i.setupInitialPlaylist(i.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(!!i.request){if(i.request=null,a)return i.error={status:s.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:s.responseText,code:2},i.state==="HAVE_NOTHING"&&(i.started=!1),i.trigger("error");i.src=df(i.handleManifestRedirects,i.src,s);var o=i.parseManifest_({manifestString:s.responseText,url:i.src});i.setupInitialPlaylist(o)}})},r.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},r.setupInitialPlaylist=function(i){if(this.state="HAVE_MASTER",i.playlists){this.master=i,R2(this.master,this.srcUri()),i.playlists.forEach(function(s){s.segments=N2(s),s.segments.forEach(function(o){M2(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var a=this.srcUri()||L.location.href;this.master=WW(i,a),this.haveMetadata({playlistObject:i,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(KW),JW=H.xhr,ZW=H.mergeOptions,kv=function(e,r,n,i){var a=e.responseType==="arraybuffer"?e.response:e.responseText;!r&&a&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=a.byteLength||a.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),r&&r.code==="ETIMEDOUT"&&(e.timedout=!0),!r&&!e.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(r=new Error("XHR Failed with a response of: "+(e&&(a||e.responseText)))),i(r,e)},F2=function(){var e=function r(n,i){n=ZW({timeout:45e3},n);var a=r.beforeRequest||H.Vhs.xhr.beforeRequest;if(a&&typeof a=="function"){var s=a(n);s&&(n=s)}var o=H.Vhs.xhr.original===!0?JW:H.Vhs.xhr,l=o(n,function(u,d){return kv(l,u,d,i)}),c=l.abort;return l.abort=function(){return l.aborted=!0,c.apply(l,arguments)},l.uri=n.uri,l.requestTime=Date.now(),l};return e.original=!0,e},eK=function(e){var r,n=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?r=L.BigInt(e.offset)+L.BigInt(e.length)-L.BigInt(1):r=e.offset+e.length-1,"bytes="+n+"-"+r},Cv=function(e){var r={};return e.byterange&&(r.Range=eK(e.byterange)),r},tK=function(e,r){return e.start(r)+"-"+e.end(r)},rK=function(e,r){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(r%2?" ":"")},iK=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},B2=function(e){var r={};return Object.keys(e).forEach(function(n){var i=e[n];EI(i)?r[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:r[n]=i}),r},ff=function(e){var r=e.byterange||{length:1/0,offset:0};return[r.length,r.offset,e.resolvedUri].join(",")},U2=function(e){return e.resolvedUri},z2=function(e){for(var r=Array.prototype.slice.call(e),n=16,i="",a,s,o=0;o<r.length/n;o++)a=r.slice(o*n,o*n+n).map(rK).join(""),s=r.slice(o*n,o*n+n).map(iK).join(""),i+=a+" "+s+`
`;return i},nK=function(e){var r=e.bytes;return z2(r)},aK=function(e){var r="",n;for(n=0;n<e.length;n++)r+=tK(e,n)+" ";return r},sK=Object.freeze({__proto__:null,createTransferableMessage:B2,initSegmentId:ff,segmentKeyId:U2,hexDump:z2,tagDump:nK,textRanges:aK}),$2=.25,oK=function(e,r){if(!r.dateTimeObject)return null;var n=r.videoTimingInfo.transmuxerPrependedSeconds,i=r.videoTimingInfo.transmuxedPresentationStart,a=i+n,s=e-a;return new Date(r.dateTimeObject.getTime()+s*1e3)},lK=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},cK=function(e,r){var n;try{n=new Date(e)}catch{return null}if(!r||!r.segments||r.segments.length===0)return null;var i=r.segments[0];if(n<i.dateTimeObject)return null;for(var a=0;a<r.segments.length-1;a++){i=r.segments[a];var s=r.segments[a+1].dateTimeObject;if(n<s)break}var o=r.segments[r.segments.length-1],l=o.dateTimeObject,c=o.videoTimingInfo?lK(o.videoTimingInfo):o.duration+o.duration*$2,u=new Date(l.getTime()+c*1e3);return n>u?null:(n>l&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Vr.duration(r,r.mediaSequence+r.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},uK=function(e,r){if(!r||!r.segments||r.segments.length===0)return null;for(var n=0,i,a=0;a<r.segments.length&&(i=r.segments[a],n=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration,!(e<=n));a++);var s=r.segments[r.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+s.duration*$2)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},dK=function(e,r){var n,i;try{n=new Date(e),i=new Date(r)}catch{}var a=n.getTime(),s=i.getTime();return(s-a)/1e3},hK=function(e){if(!e.segments||e.segments.length===0)return!1;for(var r=0;r<e.segments.length;r++){var n=e.segments[r];if(!n.dateTimeObject)return!1}return!0},fK=function(e){var r=e.playlist,n=e.time,i=n===void 0?void 0:n,a=e.callback;if(!a)throw new Error("getProgramTime: callback must be provided");if(!r||i===void 0)return a({message:"getProgramTime: playlist and time must be provided"});var s=uK(i,r);if(!s)return a({message:"valid programTime was not found"});if(s.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:i},l=oK(i,s.segment);return l&&(o.programDateTime=l.toISOString()),a(null,o)},pK=function t(e){var r=e.programTime,n=e.playlist,i=e.retryCount,a=i===void 0?2:i,s=e.seekTo,o=e.pauseAfterSeek,l=o===void 0?!0:o,c=e.tech,u=e.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if(typeof r=="undefined"||!n||!s)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!c.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!hK(n))return u({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var d=cK(r,n);if(!d)return u({message:r+" was not found in the stream"});var h=d.segment,p=dK(h.dateTimeObject,r);if(d.type==="estimate"){if(a===0)return u({message:r+" is not buffered yet. Try again"});s(d.estimatedStart+p),c.one("seeked",function(){t({programTime:r,playlist:n,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:c,callback:u})});return}var b=h.start+p,w=function(){return u(null,c.currentTime())};c.one("seeked",w),l&&c.pause(),s(b)},em=function(e,r){if(e.readyState===4)return r()},gK=function(e,r,n){var i=[],a,s=!1,o=function(h,p,b,w){return p.abort(),s=!0,n(h,p,b,w)},l=function(h,p){if(!s){if(h)return o(h,p,"",i);var b=p.responseText.substring(i&&i.byteLength||0,p.responseText.length);if(i=xq(i,kI(b,!0)),a=a||Ql(i),i.length<10||a&&i.length<a+2)return em(p,function(){return o(h,p,"",i)});var w=Jy(i);return w==="ts"&&i.length<188?em(p,function(){return o(h,p,"",i)}):!w&&i.length<376?em(p,function(){return o(h,p,"",i)}):o(null,p,w,i)}},c={uri:e,beforeSend:function(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function(p){return p.total,p.loaded,kv(h,null,{statusCode:h.status},l)})}},u=r(c,function(d,h){return kv(u,d,h,l)});return u},mK=H.EventTarget,V2=H.mergeOptions,T1=function(e,r){if(!j2(e,r)||e.sidx&&r.sidx&&(e.sidx.offset!==r.sidx.offset||e.sidx.length!==r.sidx.length))return!1;if(!e.sidx&&r.sidx||e.sidx&&!r.sidx||e.segments&&!r.segments||!e.segments&&r.segments)return!1;if(!e.segments&&!r.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],a=r.segments[n];if(i.uri!==a.uri)return!1;if(!(!i.byterange&&!a.byterange)){var s=i.byterange,o=a.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},vK=function(e){var r=e.masterXml,n=e.srcUrl,i=e.clientOffset,a=e.sidxMapping,s=e.previousManifest,o=FG(r,{manifestUri:n,clientOffset:i,sidxMapping:a,previousManifest:s});return R2(o,n),o},yK=function(e,r,n){for(var i=!0,a=V2(e,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod,timelineStarts:r.timelineStarts}),s=0;s<r.playlists.length;s++){var o=r.playlists[s];if(o.sidx){var l=Tp(o.sidx);n&&n[l]&&n[l].sidx&&Ky(o,n[l].sidx,o.sidx.resolvedUri)}var c=Sv(a,o,T1);c&&(a=c,i=!1)}return Vu(r,function(u,d,h,p){if(u.playlists&&u.playlists.length){var b=u.playlists[0].id,w=Sv(a,u.playlists[0],T1);w&&(a=w,a.mediaGroups[d][h][p].playlists[0]=a.playlists[b],i=!1)}}),r.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:a},bK=function(e,r){var n=Boolean(!e.map&&!r.map),i=n||Boolean(e.map&&r.map&&e.map.byterange.offset===r.map.byterange.offset&&e.map.byterange.length===r.map.byterange.length);return i&&e.uri===r.uri&&e.byterange.offset===r.byterange.offset&&e.byterange.length===r.byterange.length},S1=function(e,r){var n={};for(var i in e){var a=e[i],s=a.sidx;if(s){var o=Tp(s);if(!r[o])break;var l=r[o].sidxInfo;bK(l,s)&&(n[o]=r[o])}}return n},wK=function(e,r){var n=S1(e.playlists,r),i=n;return Vu(e,function(a,s,o,l){if(a.playlists&&a.playlists.length){var c=a.playlists;i=V2(i,S1(c,r))}}),i},Av=function(t){ge(e,t);function e(n,i,a,s){var o;a===void 0&&(a={}),o=t.call(this)||this,o.masterPlaylistLoader_=s||Ne(o),s||(o.isMaster_=!0);var l=a,c=l.withCredentials,u=c===void 0?!1:c,d=l.handleManifestRedirects,h=d===void 0?!1:d;if(o.vhs_=i,o.withCredentials=u,o.handleManifestRedirects=h,!n)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Ri("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=n,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=n,o}var r=e.prototype;return r.requestErrored_=function(i,a,s){if(!this.request)return!0;if(this.request=null,i)return this.error=typeof i=="object"&&!(i instanceof Error)?i:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},s&&(this.state=s),this.trigger("error"),!0},r.addSidxSegments_=function(i,a,s){var o=this,l=i.sidx&&Tp(i.sidx);if(!i.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=L.setTimeout(function(){return s(!1)},0);return}var c=df(this.handleManifestRedirects,i.sidx.resolvedUri),u=function(h,p){if(!o.requestErrored_(h,p,a)){var b=o.masterPlaylistLoader_.sidxMapping_,w;try{w=VG(Ie(p.response).subarray(8))}catch(v){o.requestErrored_(v,p,a);return}return b[l]={sidxInfo:i.sidx,sidx:w},Ky(i,w,i.sidx.resolvedUri),s(!0)}};this.request=gK(c,this.vhs_.xhr,function(d,h,p,b){if(d)return u(d,h);if(!p||p!=="mp4")return u({status:h.status,message:"Unsupported "+(p||"unknown")+" container type for sidx segment at URL: "+c,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},h);var w=i.sidx.byterange,v=w.offset,T=w.length;if(b.length>=T+v)return u(d,{response:b.subarray(v,v+T),status:h.status,uri:h.uri});o.request=o.vhs_.xhr({uri:c,responseType:"arraybuffer",headers:Cv({byterange:i.sidx.byterange})},u)})},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},L.clearTimeout(this.minimumUpdatePeriodTimeout_),L.clearTimeout(this.mediaRequest_),L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},r.hasPendingRequest=function(){return this.request||this.mediaRequest_},r.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},r.media=function(i){var a=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof i=="string"){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var o=!this.media_||i.id!==this.media_.id;if(o&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList){this.state="HAVE_METADATA",this.media_=i,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!o||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,s,function(l){a.haveMetadata({startingState:s,playlist:i})}))},r.haveMetadata=function(i){var a=i.startingState,s=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),a==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},r.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(L.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},r.load=function(i){var a=this;L.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(i){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=L.setTimeout(function(){return a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},r.start=function(){var i=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=L.setTimeout(function(){return i.haveMaster_()},0);return}this.requestMaster_(function(a,s){i.haveMaster_(),!i.hasPendingRequest()&&!i.media_&&i.media(i.masterPlaylistLoader_.master.playlists[0])})},r.requestMaster_=function(i){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(a.requestErrored_(s,o)){a.state==="HAVE_NOTHING"&&(a.started=!1);return}var l=o.responseText!==a.masterPlaylistLoader_.masterXml_;if(a.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?a.masterLoaded_=Date.parse(o.responseHeaders.date):a.masterLoaded_=Date.now(),a.masterPlaylistLoader_.srcUrl=df(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,o),l){a.handleMaster_(),a.syncClientServerClock_(function(){return i(o,l)});return}return i(o,l)})},r.syncClientServerClock_=function(i){var a=this,s=BG(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),i();this.request=this.vhs_.xhr({uri:Ti(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,l){if(!!a.request){if(o)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),i();var c;s.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?c=a.masterLoaded_:c=Date.parse(l.responseHeaders.date):c=Date.parse(l.responseText),a.masterPlaylistLoader_.clientOffset_=c-Date.now(),i()}})},r.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},r.handleMaster_=function(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,a=vK({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(a=yK(i,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a||i;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!i||a&&a.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(a)},r.updateMinimumUpdatePeriodTimeout_=function(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(L.clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var a=i.master&&i.master.minimumUpdatePeriod;if(a===0&&(i.media()?a=i.media().targetDuration*1e3:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout");return}this.createMUPTimeout_(a)},r.createMUPTimeout_=function(i){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=L.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(i)},i)},r.refreshXml_=function(){var i=this;this.requestMaster_(function(a,s){!s||(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=wK(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(o){i.refreshMedia_(i.media().id)}))})},r.refreshMedia_=function(i){var a=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[i];if(o?this.media_=s[i]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function c(){a.media().endList||(a.mediaUpdateTimeout=L.setTimeout(function(){a.trigger("mediaupdatetimeout"),c()},Ev(a.media(),Boolean(o))))};l()}this.trigger("loadedplaylist")},e}(mK),Jt={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},_K=function(e){for(var r=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r.buffer},H2=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},xK=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var r=new BlobBuilder;return r.append(e),URL.createObjectURL(r.getBlob())}},q2=function(e){return function(){var r=xK(e),n=H2(new Worker(r));n.objURL=r;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(r),i.call(this)},n}},G2=function(e){return"var browserWorkerPolyFill = "+H2.toString()+`;
browserWorkerPolyFill(self);
`+e},W2=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},TK=G2(W2(function(){var t=function(){this.init=function(){var f={};this.on=function(m,g){f[m]||(f[m]=[]),f[m]=f[m].concat(g)},this.off=function(m,g){var y;return f[m]?(y=f[m].indexOf(g),f[m]=f[m].slice(),f[m].splice(y,1),y>-1):!1},this.trigger=function(m){var g,y,_,x;if(g=f[m],!!g)if(arguments.length===2)for(_=g.length,y=0;y<_;++y)g[y].call(this,arguments[1]);else{for(x=[],y=arguments.length,y=1;y<arguments.length;++y)x.push(arguments[y]);for(_=g.length,y=0;y<_;++y)g[y].apply(this,x)}},this.dispose=function(){f={}}}};t.prototype.pipe=function(S){return this.on("data",function(f){S.push(f)}),this.on("done",function(f){S.flush(f)}),this.on("partialdone",function(f){S.partialFlush(f)}),this.on("endedtimeline",function(f){S.endTimeline(f)}),this.on("reset",function(f){S.reset(f)}),S},t.prototype.push=function(S){this.trigger("data",S)},t.prototype.flush=function(S){this.trigger("done",S)},t.prototype.partialFlush=function(S){this.trigger("partialdone",S)},t.prototype.endTimeline=function(S){this.trigger("endedtimeline",S)},t.prototype.reset=function(S){this.trigger("reset",S)};var e=t,r=Math.pow(2,32),n=function(f){var m=new DataView(f.buffer,f.byteOffset,f.byteLength),g;return m.getBigUint64?(g=m.getBigUint64(0),g<Number.MAX_SAFE_INTEGER?Number(g):g):m.getUint32(0)*r+m.getUint32(4)},i={getUint64:n,MAX_UINT32:r},a=i.MAX_UINT32,s,o,l,c,u,d,h,p,b,w,v,T,E,A,k,I,F,j,D,z,M,U,P,q,X,fe,te,ae,oe,Re,Le,ft,it,pt,Ht,K;(function(){var S;if(P={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array!="undefined"){for(S in P)P.hasOwnProperty(S)&&(P[S]=[S.charCodeAt(0),S.charCodeAt(1),S.charCodeAt(2),S.charCodeAt(3)]);q=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),fe=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),X=new Uint8Array([0,0,0,1]),te=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ae=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),oe={video:te,audio:ae},ft=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Le=new Uint8Array([0,0,0,0,0,0,0,0]),it=new Uint8Array([0,0,0,0,0,0,0,0]),pt=it,Ht=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),K=it,Re=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(f){var m=[],g=0,y,_,x;for(y=1;y<arguments.length;y++)m.push(arguments[y]);for(y=m.length;y--;)g+=m[y].byteLength;for(_=new Uint8Array(g+8),x=new DataView(_.buffer,_.byteOffset,_.byteLength),x.setUint32(0,_.byteLength),_.set(f,4),y=0,g=8;y<m.length;y++)_.set(m[y],g),g+=m[y].byteLength;return _},o=function(){return s(P.dinf,s(P.dref,ft))},l=function(f){return s(P.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},c=function(){return s(P.ftyp,q,X,q,fe)},I=function(f){return s(P.hdlr,oe[f])},u=function(f){return s(P.mdat,f)},k=function(f){var m=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(m[12]=f.samplerate>>>24&255,m[13]=f.samplerate>>>16&255,m[14]=f.samplerate>>>8&255,m[15]=f.samplerate&255),s(P.mdhd,m)},A=function(f){return s(P.mdia,k(f),I(f.type),h(f))},d=function(f){return s(P.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},h=function(f){return s(P.minf,f.type==="video"?s(P.vmhd,Re):s(P.smhd,Le),o(),j(f))},p=function(f,m){for(var g=[],y=m.length;y--;)g[y]=z(m[y]);return s.apply(null,[P.moof,d(f)].concat(g))},b=function(f){for(var m=f.length,g=[];m--;)g[m]=T(f[m]);return s.apply(null,[P.moov,v(4294967295)].concat(g).concat(w(f)))},w=function(f){for(var m=f.length,g=[];m--;)g[m]=M(f[m]);return s.apply(null,[P.mvex].concat(g))},v=function(f){var m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(P.mvhd,m)},F=function(f){var m=f.samples||[],g=new Uint8Array(4+m.length),y,_;for(_=0;_<m.length;_++)y=m[_].flags,g[_+4]=y.dependsOn<<4|y.isDependedOn<<2|y.hasRedundancy;return s(P.sdtp,g)},j=function(f){return s(P.stbl,D(f),s(P.stts,K),s(P.stsc,pt),s(P.stsz,Ht),s(P.stco,it))},function(){var S,f;D=function(g){return s(P.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),g.type==="video"?S(g):f(g))},S=function(g){var y=g.sps||[],_=g.pps||[],x=[],C=[],O,B;for(O=0;O<y.length;O++)x.push((y[O].byteLength&65280)>>>8),x.push(y[O].byteLength&255),x=x.concat(Array.prototype.slice.call(y[O]));for(O=0;O<_.length;O++)C.push((_[O].byteLength&65280)>>>8),C.push(_[O].byteLength&255),C=C.concat(Array.prototype.slice.call(_[O]));if(B=[P.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(g.width&65280)>>8,g.width&255,(g.height&65280)>>8,g.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(P.avcC,new Uint8Array([1,g.profileIdc,g.profileCompatibility,g.levelIdc,255].concat([y.length],x,[_.length],C))),s(P.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],g.sarRatio){var N=g.sarRatio[0],$=g.sarRatio[1];B.push(s(P.pasp,new Uint8Array([(N&4278190080)>>24,(N&16711680)>>16,(N&65280)>>8,N&255,($&4278190080)>>24,($&16711680)>>16,($&65280)>>8,$&255])))}return s.apply(null,B)},f=function(g){return s(P.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(g.channelcount&65280)>>8,g.channelcount&255,(g.samplesize&65280)>>8,g.samplesize&255,0,0,0,0,(g.samplerate&65280)>>8,g.samplerate&255,0,0]),l(g))}}(),E=function(f){var m=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return s(P.tkhd,m)},z=function(f){var m,g,y,_,x,C,O;return m=s(P.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),C=Math.floor(f.baseMediaDecodeTime/a),O=Math.floor(f.baseMediaDecodeTime%a),g=s(P.tfdt,new Uint8Array([1,0,0,0,C>>>24&255,C>>>16&255,C>>>8&255,C&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255])),x=32+20+8+16+8+8,f.type==="audio"?(y=U(f,x),s(P.traf,m,g,y)):(_=F(f),y=U(f,_.length+x),s(P.traf,m,g,y,_))},T=function(f){return f.duration=f.duration||4294967295,s(P.trak,E(f),A(f))},M=function(f){var m=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(m[m.length-1]=0),s(P.trex,m)},function(){var S,f,m;m=function(y,_){var x=0,C=0,O=0,B=0;return y.length&&(y[0].duration!==void 0&&(x=1),y[0].size!==void 0&&(C=2),y[0].flags!==void 0&&(O=4),y[0].compositionTimeOffset!==void 0&&(B=8)),[0,0,x|C|O|B,1,(y.length&4278190080)>>>24,(y.length&16711680)>>>16,(y.length&65280)>>>8,y.length&255,(_&4278190080)>>>24,(_&16711680)>>>16,(_&65280)>>>8,_&255]},f=function(y,_){var x,C,O,B,N,$;for(B=y.samples||[],_+=8+12+16*B.length,O=m(B,_),C=new Uint8Array(O.length+B.length*16),C.set(O),x=O.length,$=0;$<B.length;$++)N=B[$],C[x++]=(N.duration&4278190080)>>>24,C[x++]=(N.duration&16711680)>>>16,C[x++]=(N.duration&65280)>>>8,C[x++]=N.duration&255,C[x++]=(N.size&4278190080)>>>24,C[x++]=(N.size&16711680)>>>16,C[x++]=(N.size&65280)>>>8,C[x++]=N.size&255,C[x++]=N.flags.isLeading<<2|N.flags.dependsOn,C[x++]=N.flags.isDependedOn<<6|N.flags.hasRedundancy<<4|N.flags.paddingValue<<1|N.flags.isNonSyncSample,C[x++]=N.flags.degradationPriority&240<<8,C[x++]=N.flags.degradationPriority&15,C[x++]=(N.compositionTimeOffset&4278190080)>>>24,C[x++]=(N.compositionTimeOffset&16711680)>>>16,C[x++]=(N.compositionTimeOffset&65280)>>>8,C[x++]=N.compositionTimeOffset&255;return s(P.trun,C)},S=function(y,_){var x,C,O,B,N,$;for(B=y.samples||[],_+=8+12+8*B.length,O=m(B,_),x=new Uint8Array(O.length+B.length*8),x.set(O),C=O.length,$=0;$<B.length;$++)N=B[$],x[C++]=(N.duration&4278190080)>>>24,x[C++]=(N.duration&16711680)>>>16,x[C++]=(N.duration&65280)>>>8,x[C++]=N.duration&255,x[C++]=(N.size&4278190080)>>>24,x[C++]=(N.size&16711680)>>>16,x[C++]=(N.size&65280)>>>8,x[C++]=N.size&255;return s(P.trun,x)},U=function(y,_){return y.type==="audio"?S(y,_):f(y,_)}}();var ve={ftyp:c,mdat:u,moof:p,moov:b,initSegment:function(f){var m=c(),g=b(f),y;return y=new Uint8Array(m.byteLength+g.byteLength),y.set(m),y.set(g,m.byteLength),y}},ce=function(f){var m,g,y=[],_=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,y.byteLength=0,m=0;m<f.length;m++)g=f[m],g.nalUnitType==="access_unit_delimiter_rbsp"?(y.length&&(y.duration=g.dts-y.dts,_.byteLength+=y.byteLength,_.nalCount+=y.length,_.duration+=y.duration,_.push(y)),y=[g],y.byteLength=g.data.byteLength,y.pts=g.pts,y.dts=g.dts):(g.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(y.keyFrame=!0),y.duration=g.dts-y.dts,y.byteLength+=g.data.byteLength,y.push(g));return _.length&&(!y.duration||y.duration<=0)&&(y.duration=_[_.length-1].duration),_.byteLength+=y.byteLength,_.nalCount+=y.length,_.duration+=y.duration,_.push(y),_},be=function(f){var m,g,y=[],_=[];for(y.byteLength=0,y.nalCount=0,y.duration=0,y.pts=f[0].pts,y.dts=f[0].dts,_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=f[0].pts,_.dts=f[0].dts,m=0;m<f.length;m++)g=f[m],g.keyFrame?(y.length&&(_.push(y),_.byteLength+=y.byteLength,_.nalCount+=y.nalCount,_.duration+=y.duration),y=[g],y.nalCount=g.length,y.byteLength=g.byteLength,y.pts=g.pts,y.dts=g.dts,y.duration=g.duration):(y.duration+=g.duration,y.nalCount+=g.length,y.byteLength+=g.byteLength,y.push(g));return _.length&&y.duration<=0&&(y.duration=_[_.length-1].duration),_.byteLength+=y.byteLength,_.nalCount+=y.nalCount,_.duration+=y.duration,_.push(y),_},Ye=function(f){var m;return!f[0][0].keyFrame&&f.length>1&&(m=f.shift(),f.byteLength-=m.byteLength,f.nalCount-=m.nalCount,f[0][0].dts=m.dts,f[0][0].pts=m.pts,f[0][0].duration+=m.duration),f},st=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Be=function(f,m){var g=st();return g.dataOffset=m,g.compositionTimeOffset=f.pts-f.dts,g.duration=f.duration,g.size=4*f.length,g.size+=f.byteLength,f.keyFrame&&(g.flags.dependsOn=2,g.flags.isNonSyncSample=0),g},Ue=function(f,m){var g,y,_,x,C,O=m||0,B=[];for(g=0;g<f.length;g++)for(x=f[g],y=0;y<x.length;y++)C=x[y],_=Be(C,O),O+=_.size,B.push(_);return B},R=function(f){var m,g,y,_,x,C,O=0,B=f.byteLength,N=f.nalCount,$=B+4*N,W=new Uint8Array($),pe=new DataView(W.buffer);for(m=0;m<f.length;m++)for(_=f[m],g=0;g<_.length;g++)for(x=_[g],y=0;y<x.length;y++)C=x[y],pe.setUint32(O,C.data.byteLength),O+=4,W.set(C.data,O),O+=C.data.byteLength;return W},V=function(f,m){var g,y=m||0,_=[];return g=Be(f,y),_.push(g),_},G=function(f){var m,g,y=0,_=f.byteLength,x=f.length,C=_+4*x,O=new Uint8Array(C),B=new DataView(O.buffer);for(m=0;m<f.length;m++)g=f[m],B.setUint32(y,g.data.byteLength),y+=4,O.set(g.data,y),y+=g.data.byteLength;return O},Q={groupNalsIntoFrames:ce,groupFramesIntoGops:be,extendFirstKeyFrame:Ye,generateSampleTable:Ue,concatenateNalData:R,generateSampleTableForFrame:V,concatenateNalDataForFrame:G},Y=[33,16,5,32,164,27],ue=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ee=function(f){for(var m=[];f--;)m.push(0);return m},ie=function(f){return Object.keys(f).reduce(function(m,g){return m[g]=new Uint8Array(f[g].reduce(function(y,_){return y.concat(_)},[])),m},{})},de,re=function(){if(!de){var f={96e3:[Y,[227,64],ee(154),[56]],88200:[Y,[231],ee(170),[56]],64e3:[Y,[248,192],ee(240),[56]],48e3:[Y,[255,192],ee(268),[55,148,128],ee(54),[112]],44100:[Y,[255,192],ee(268),[55,163,128],ee(84),[112]],32e3:[Y,[255,192],ee(268),[55,234],ee(226),[112]],24e3:[Y,[255,192],ee(268),[55,255,128],ee(268),[111,112],ee(126),[224]],16e3:[Y,[255,192],ee(268),[55,255,128],ee(268),[111,255],ee(269),[223,108],ee(195),[1,192]],12e3:[ue,ee(268),[3,127,248],ee(268),[6,255,240],ee(268),[13,255,224],ee(268),[27,253,128],ee(259),[56]],11025:[ue,ee(268),[3,127,248],ee(268),[6,255,240],ee(268),[13,255,224],ee(268),[27,255,192],ee(268),[55,175,128],ee(108),[112]],8e3:[ue,ee(268),[3,121,16],ee(47),[7]]};de=ie(f)}return de},Se=9e4,_e,Ee,Pe,We,rt,ot,ht;_e=function(f){return f*Se},Ee=function(f,m){return f*m},Pe=function(f){return f/Se},We=function(f,m){return f/m},rt=function(f,m){return _e(We(f,m))},ot=function(f,m){return Ee(Pe(f),m)},ht=function(f,m,g){return Pe(g?f:f-m)};var $e={ONE_SECOND_IN_TS:Se,secondsToVideoTs:_e,secondsToAudioTs:Ee,videoTsToSeconds:Pe,audioTsToSeconds:We,audioTsToVideoTs:rt,videoTsToAudioTs:ot,metadataTsToSeconds:ht},Hn=function(f){var m,g,y=0;for(m=0;m<f.length;m++)g=f[m],y+=g.data.byteLength;return y},Gu=function(f,m,g,y){var _,x=0,C=0,O=0,B=0,N,$,W;if(!!m.length&&(_=$e.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),x=Math.ceil($e.ONE_SECOND_IN_TS/(f.samplerate/1024)),g&&y&&(C=_-Math.max(g,y),O=Math.floor(C/x),B=O*x),!(O<1||B>$e.ONE_SECOND_IN_TS/2))){for(N=re()[f.samplerate],N||(N=m[0].data),$=0;$<O;$++)W=m[0],m.splice(0,0,{data:N,dts:W.dts-x,pts:W.pts-x});return f.baseMediaDecodeTime-=Math.floor($e.videoTsToAudioTs(B,f.samplerate)),B}},Da=function(f,m,g){return m.minSegmentDts>=g?f:(m.minSegmentDts=1/0,f.filter(function(y){return y.dts>=g?(m.minSegmentDts=Math.min(m.minSegmentDts,y.dts),m.minSegmentPts=m.minSegmentDts,!0):!1}))},Wu=function(f){var m,g,y=[];for(m=0;m<f.length;m++)g=f[m],y.push({size:g.data.byteLength,duration:1024});return y},Er=function(f){var m,g,y=0,_=new Uint8Array(Hn(f));for(m=0;m<f.length;m++)g=f[m],_.set(g.data,y),y+=g.data.byteLength;return _},kr={prefixWithSilence:Gu,trimAdtsFramesByEarliestDts:Da,generateSampleTable:Wu,concatenateFrameData:Er},Ku=$e.ONE_SECOND_IN_TS,FO=function(f,m){typeof m.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=m.pts),f.minSegmentPts===void 0?f.minSegmentPts=m.pts:f.minSegmentPts=Math.min(f.minSegmentPts,m.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=m.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,m.pts)),typeof m.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=m.dts),f.minSegmentDts===void 0?f.minSegmentDts=m.dts:f.minSegmentDts=Math.min(f.minSegmentDts,m.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=m.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,m.dts))},BO=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},UO=function(f,m){var g,y,_=f.minSegmentDts;return m||(_-=f.timelineStartInfo.dts),g=f.timelineStartInfo.baseMediaDecodeTime,g+=_,g=Math.max(0,g),f.type==="audio"&&(y=f.samplerate/Ku,g*=y,g=Math.floor(g)),g},_i={clearDtsInfo:BO,calculateTrackBaseMediaDecodeTime:UO,collectDtsInfo:FO},Qb=4,zO=128,$O=function(f){for(var m=0,g={payloadType:-1,payloadSize:0},y=0,_=0;m<f.byteLength&&f[m]!==zO;){for(;f[m]===255;)y+=255,m++;for(y+=f[m++];f[m]===255;)_+=255,m++;if(_+=f[m++],!g.payload&&y===Qb){var x=String.fromCharCode(f[m+3],f[m+4],f[m+5],f[m+6]);if(x==="GA94"){g.payloadType=y,g.payloadSize=_,g.payload=f.subarray(m,m+_);break}else g.payload=void 0}m+=_,y=0,_=0}return g},VO=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},HO=function(f,m){var g=[],y,_,x,C;if(!(m[0]&64))return g;for(_=m[0]&31,y=0;y<_;y++)x=y*3,C={type:m[x+2]&3,pts:f},m[x+2]&4&&(C.ccData=m[x+3]<<8|m[x+4],g.push(C));return g},qO=function(f){for(var m=f.byteLength,g=[],y=1,_,x;y<m-2;)f[y]===0&&f[y+1]===0&&f[y+2]===3?(g.push(y+2),y+=2):y++;if(g.length===0)return f;_=m-g.length,x=new Uint8Array(_);var C=0;for(y=0;y<_;C++,y++)C===g[0]&&(C++,g.shift()),x[y]=f[C];return x},xl={parseSei:$O,parseUserData:VO,parseCaptionPackets:HO,discardEmulationPreventionBytes:qO,USER_DATA_REGISTERED_ITU_T_T35:Qb},Xr=function S(f){f=f||{},S.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Pt(0,0),new Pt(0,1),new Pt(1,0),new Pt(1,1)],this.parse708captions_&&(this.cc708Stream_=new bt({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(m){m.on("data",this.trigger.bind(this,"data")),m.on("partialdone",this.trigger.bind(this,"partialdone")),m.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Xr.prototype=new e,Xr.prototype.push=function(S){var f,m,g;if(S.nalUnitType==="sei_rbsp"&&(f=xl.parseSei(S.escapedRBSP),!!f.payload&&f.payloadType===xl.USER_DATA_REGISTERED_ITU_T_T35&&(m=xl.parseUserData(f),!!m))){if(S.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(S.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}g=xl.parseCaptionPackets(S.pts,m),this.captionPackets_=this.captionPackets_.concat(g),this.latestDts_!==S.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=S.dts}},Xr.prototype.flushCCStreams=function(S){this.ccStreams_.forEach(function(f){return S==="flush"?f.flush():f.partialFlush()},this)},Xr.prototype.flushStream=function(S){if(!this.captionPackets_.length){this.flushCCStreams(S);return}this.captionPackets_.forEach(function(f,m){f.presortIndex=m}),this.captionPackets_.sort(function(f,m){return f.pts===m.pts?f.presortIndex-m.presortIndex:f.pts-m.pts}),this.captionPackets_.forEach(function(f){f.type<2?this.dispatchCea608Packet(f):this.dispatchCea708Packet(f)},this),this.captionPackets_.length=0,this.flushCCStreams(S)},Xr.prototype.flush=function(){return this.flushStream("flush")},Xr.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Xr.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(S){S.reset()})},Xr.prototype.dispatchCea608Packet=function(S){this.setsTextOrXDSActive(S)?this.activeCea608Channel_[S.type]=null:this.setsChannel1Active(S)?this.activeCea608Channel_[S.type]=0:this.setsChannel2Active(S)&&(this.activeCea608Channel_[S.type]=1),this.activeCea608Channel_[S.type]!==null&&this.ccStreams_[(S.type<<1)+this.activeCea608Channel_[S.type]].push(S)},Xr.prototype.setsChannel1Active=function(S){return(S.ccData&30720)===4096},Xr.prototype.setsChannel2Active=function(S){return(S.ccData&30720)===6144},Xr.prototype.setsTextOrXDSActive=function(S){return(S.ccData&28928)===256||(S.ccData&30974)===4138||(S.ccData&30974)===6186},Xr.prototype.dispatchCea708Packet=function(S){this.parse708captions_&&this.cc708Stream_.push(S)};var GO={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},WO=function(f){var m=GO[f]||f;return f&4096&&f===m?"":String.fromCharCode(m)},Yu=function(f){return 32<=f&&f<=127||160<=f&&f<=255},un=function(f){this.windowNum=f,this.reset()};un.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},un.prototype.getText=function(){return this.rows.join(`
`)},un.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},un.prototype.newLine=function(S){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(S),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},un.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},un.prototype.addText=function(S){this.rows[this.rowIdx]+=S},un.prototype.backspace=function(){if(!this.isEmpty()){var S=this.rows[this.rowIdx];this.rows[this.rowIdx]=S.substr(0,S.length-1)}};var Xu=function(f,m,g){this.serviceNum=f,this.text="",this.currentWindow=new un(-1),this.windows=[],this.stream=g,typeof m=="string"&&this.createTextDecoder(m)};Xu.prototype.init=function(S,f){this.startPts=S;for(var m=0;m<8;m++)this.windows[m]=new un(m),typeof f=="function"&&(this.windows[m].beforeRowOverflow=f)},Xu.prototype.setCurrentWindow=function(S){this.currentWindow=this.windows[S]},Xu.prototype.createTextDecoder=function(S){if(typeof TextDecoder=="undefined")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(S)}catch(f){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+S+" encoding. "+f})}};var bt=function S(f){f=f||{},S.prototype.init.call(this);var m=this,g=f.captionServices||{},y={},_;Object.keys(g).forEach(function(x){_=g[x],/^SERVICE/.test(x)&&(y[x]=_.encoding)}),this.serviceEncodings=y,this.current708Packet=null,this.services={},this.push=function(x){x.type===3?(m.new708Packet(),m.add708Bytes(x)):(m.current708Packet===null&&m.new708Packet(),m.add708Bytes(x))}};bt.prototype=new e,bt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},bt.prototype.add708Bytes=function(S){var f=S.ccData,m=f>>>8,g=f&255;this.current708Packet.ptsVals.push(S.pts),this.current708Packet.data.push(m),this.current708Packet.data.push(g)},bt.prototype.push708Packet=function(){var S=this.current708Packet,f=S.data,m=null,g=null,y=0,_=f[y++];for(S.seq=_>>6,S.sizeCode=_&63;y<f.length;y++)_=f[y++],m=_>>5,g=_&31,m===7&&g>0&&(_=f[y++],m=_),this.pushServiceBlock(m,y,g),g>0&&(y+=g-1)},bt.prototype.pushServiceBlock=function(S,f,m){var g,y=f,_=this.current708Packet.data,x=this.services[S];for(x||(x=this.initService(S,y));y<f+m&&y<_.length;y++)g=_[y],Yu(g)?y=this.handleText(y,x):g===24?y=this.multiByteCharacter(y,x):g===16?y=this.extendedCommands(y,x):128<=g&&g<=135?y=this.setCurrentWindow(y,x):152<=g&&g<=159?y=this.defineWindow(y,x):g===136?y=this.clearWindows(y,x):g===140?y=this.deleteWindows(y,x):g===137?y=this.displayWindows(y,x):g===138?y=this.hideWindows(y,x):g===139?y=this.toggleWindows(y,x):g===151?y=this.setWindowAttributes(y,x):g===144?y=this.setPenAttributes(y,x):g===145?y=this.setPenColor(y,x):g===146?y=this.setPenLocation(y,x):g===143?x=this.reset(y,x):g===8?x.currentWindow.backspace():g===12?x.currentWindow.clearText():g===13?x.currentWindow.pendingNewLine=!0:g===14?x.currentWindow.clearText():g===141&&y++},bt.prototype.extendedCommands=function(S,f){var m=this.current708Packet.data,g=m[++S];return Yu(g)&&(S=this.handleText(S,f,{isExtended:!0})),S},bt.prototype.getPts=function(S){return this.current708Packet.ptsVals[Math.floor(S/2)]},bt.prototype.initService=function(S,f){var g="SERVICE"+S,m=this,g,y;return g in this.serviceEncodings&&(y=this.serviceEncodings[g]),this.services[S]=new Xu(S,y,m),this.services[S].init(this.getPts(f),function(_){m.flushDisplayed(_,m.services[S])}),this.services[S]},bt.prototype.handleText=function(S,f,m){var g=m&&m.isExtended,y=m&&m.isMultiByte,_=this.current708Packet.data,x=g?4096:0,C=_[S],O=_[S+1],B=f.currentWindow,N,$;return f.textDecoder_&&!g?(y?($=[C,O],S++):$=[C],N=f.textDecoder_.decode(new Uint8Array($))):N=WO(x|C),B.pendingNewLine&&!B.isEmpty()&&B.newLine(this.getPts(S)),B.pendingNewLine=!1,B.addText(N),S},bt.prototype.multiByteCharacter=function(S,f){var m=this.current708Packet.data,g=m[S+1],y=m[S+2];return Yu(g)&&Yu(y)&&(S=this.handleText(++S,f,{isMultiByte:!0})),S},bt.prototype.setCurrentWindow=function(S,f){var m=this.current708Packet.data,g=m[S],y=g&7;return f.setCurrentWindow(y),S},bt.prototype.defineWindow=function(S,f){var m=this.current708Packet.data,g=m[S],y=g&7;f.setCurrentWindow(y);var _=f.currentWindow;return g=m[++S],_.visible=(g&32)>>5,_.rowLock=(g&16)>>4,_.columnLock=(g&8)>>3,_.priority=g&7,g=m[++S],_.relativePositioning=(g&128)>>7,_.anchorVertical=g&127,g=m[++S],_.anchorHorizontal=g,g=m[++S],_.anchorPoint=(g&240)>>4,_.rowCount=g&15,g=m[++S],_.columnCount=g&63,g=m[++S],_.windowStyle=(g&56)>>3,_.penStyle=g&7,_.virtualRowCount=_.rowCount+1,S},bt.prototype.setWindowAttributes=function(S,f){var m=this.current708Packet.data,g=m[S],y=f.currentWindow.winAttr;return g=m[++S],y.fillOpacity=(g&192)>>6,y.fillRed=(g&48)>>4,y.fillGreen=(g&12)>>2,y.fillBlue=g&3,g=m[++S],y.borderType=(g&192)>>6,y.borderRed=(g&48)>>4,y.borderGreen=(g&12)>>2,y.borderBlue=g&3,g=m[++S],y.borderType+=(g&128)>>5,y.wordWrap=(g&64)>>6,y.printDirection=(g&48)>>4,y.scrollDirection=(g&12)>>2,y.justify=g&3,g=m[++S],y.effectSpeed=(g&240)>>4,y.effectDirection=(g&12)>>2,y.displayEffect=g&3,S},bt.prototype.flushDisplayed=function(S,f){for(var m=[],g=0;g<8;g++)f.windows[g].visible&&!f.windows[g].isEmpty()&&m.push(f.windows[g].getText());f.endPts=S,f.text=m.join(`

`),this.pushCaption(f),f.startPts=S},bt.prototype.pushCaption=function(S){S.text!==""&&(this.trigger("data",{startPts:S.startPts,endPts:S.endPts,text:S.text,stream:"cc708_"+S.serviceNum}),S.text="",S.startPts=S.endPts)},bt.prototype.displayWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],y=this.getPts(S);this.flushDisplayed(y,f);for(var _=0;_<8;_++)g&1<<_&&(f.windows[_].visible=1);return S},bt.prototype.hideWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],y=this.getPts(S);this.flushDisplayed(y,f);for(var _=0;_<8;_++)g&1<<_&&(f.windows[_].visible=0);return S},bt.prototype.toggleWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],y=this.getPts(S);this.flushDisplayed(y,f);for(var _=0;_<8;_++)g&1<<_&&(f.windows[_].visible^=1);return S},bt.prototype.clearWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],y=this.getPts(S);this.flushDisplayed(y,f);for(var _=0;_<8;_++)g&1<<_&&f.windows[_].clearText();return S},bt.prototype.deleteWindows=function(S,f){var m=this.current708Packet.data,g=m[++S],y=this.getPts(S);this.flushDisplayed(y,f);for(var _=0;_<8;_++)g&1<<_&&f.windows[_].reset();return S},bt.prototype.setPenAttributes=function(S,f){var m=this.current708Packet.data,g=m[S],y=f.currentWindow.penAttr;return g=m[++S],y.textTag=(g&240)>>4,y.offset=(g&12)>>2,y.penSize=g&3,g=m[++S],y.italics=(g&128)>>7,y.underline=(g&64)>>6,y.edgeType=(g&56)>>3,y.fontStyle=g&7,S},bt.prototype.setPenColor=function(S,f){var m=this.current708Packet.data,g=m[S],y=f.currentWindow.penColor;return g=m[++S],y.fgOpacity=(g&192)>>6,y.fgRed=(g&48)>>4,y.fgGreen=(g&12)>>2,y.fgBlue=g&3,g=m[++S],y.bgOpacity=(g&192)>>6,y.bgRed=(g&48)>>4,y.bgGreen=(g&12)>>2,y.bgBlue=g&3,g=m[++S],y.edgeRed=(g&48)>>4,y.edgeGreen=(g&12)>>2,y.edgeBlue=g&3,S},bt.prototype.setPenLocation=function(S,f){var m=this.current708Packet.data,g=m[S],y=f.currentWindow.penLoc;return f.currentWindow.pendingNewLine=!0,g=m[++S],y.row=g&15,g=m[++S],y.column=g&63,S},bt.prototype.reset=function(S,f){var m=this.getPts(S);return this.flushDisplayed(m,f),this.initService(f.serviceNum,S)};var KO={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Qu=function(f){return f===null?"":(f=KO[f]||f,String.fromCharCode(f))},Ju=14,YO=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],La=function(){for(var f=[],m=Ju+1;m--;)f.push("");return f},Pt=function S(f,m){S.prototype.init.call(this),this.field_=f||0,this.dataChannel_=m||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(g){var y,_,x,C,O;if(y=g.ccData&32639,y===this.lastControlCode_){this.lastControlCode_=null;return}if((y&61440)===4096?this.lastControlCode_=y:y!==this.PADDING_&&(this.lastControlCode_=null),x=y>>>8,C=y&255,y!==this.PADDING_)if(y===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(y===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(g.pts),this.flushDisplayed(g.pts),_=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=_,this.startPts_=g.pts;else if(y===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(g.pts);else if(y===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(g.pts);else if(y===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(g.pts);else if(y===this.CARRIAGE_RETURN_)this.clearFormatting(g.pts),this.flushDisplayed(g.pts),this.shiftRowsUp_(),this.startPts_=g.pts;else if(y===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(y===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(g.pts),this.displayed_=La();else if(y===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=La();else if(y===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(g.pts),this.displayed_=La()),this.mode_="paintOn",this.startPts_=g.pts;else if(this.isSpecialCharacter(x,C))x=(x&3)<<8,O=Qu(x|C),this[this.mode_](g.pts,O),this.column_++;else if(this.isExtCharacter(x,C))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),x=(x&3)<<8,O=Qu(x|C),this[this.mode_](g.pts,O),this.column_++;else if(this.isMidRowCode(x,C))this.clearFormatting(g.pts),this[this.mode_](g.pts," "),this.column_++,(C&14)===14&&this.addFormatting(g.pts,["i"]),(C&1)===1&&this.addFormatting(g.pts,["u"]);else if(this.isOffsetControlCode(x,C))this.column_+=C&3;else if(this.isPAC(x,C)){var B=YO.indexOf(y&7968);this.mode_==="rollUp"&&(B-this.rollUpRows_+1<0&&(B=this.rollUpRows_-1),this.setRollUp(g.pts,B)),B!==this.row_&&(this.clearFormatting(g.pts),this.row_=B),C&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(g.pts,["u"]),(y&16)===16&&(this.column_=((y&14)>>1)*4),this.isColorPAC(C)&&(C&14)===14&&this.addFormatting(g.pts,["i"])}else this.isNormalChar(x)&&(C===0&&(C=null),O=Qu(x),O+=Qu(C),this[this.mode_](g.pts,O),this.column_+=O.length)}};Pt.prototype=new e,Pt.prototype.flushDisplayed=function(S){var f=this.displayed_.map(function(m,g){try{return m.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+g+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");f.length&&this.trigger("data",{startPts:this.startPts_,endPts:S,text:f,stream:this.name_})},Pt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=La(),this.nonDisplayed_=La(),this.lastControlCode_=null,this.column_=0,this.row_=Ju,this.rollUpRows_=2,this.formatting_=[]},Pt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Pt.prototype.isSpecialCharacter=function(S,f){return S===this.EXT_&&f>=48&&f<=63},Pt.prototype.isExtCharacter=function(S,f){return(S===this.EXT_+1||S===this.EXT_+2)&&f>=32&&f<=63},Pt.prototype.isMidRowCode=function(S,f){return S===this.EXT_&&f>=32&&f<=47},Pt.prototype.isOffsetControlCode=function(S,f){return S===this.OFFSET_&&f>=33&&f<=35},Pt.prototype.isPAC=function(S,f){return S>=this.BASE_&&S<this.BASE_+8&&f>=64&&f<=127},Pt.prototype.isColorPAC=function(S){return S>=64&&S<=79||S>=96&&S<=127},Pt.prototype.isNormalChar=function(S){return S>=32&&S<=127},Pt.prototype.setRollUp=function(S,f){if(this.mode_!=="rollUp"&&(this.row_=Ju,this.mode_="rollUp",this.flushDisplayed(S),this.nonDisplayed_=La(),this.displayed_=La()),f!==void 0&&f!==this.row_)for(var m=0;m<this.rollUpRows_;m++)this.displayed_[f-m]=this.displayed_[this.row_-m],this.displayed_[this.row_-m]="";f===void 0&&(f=this.row_),this.topRow_=f-this.rollUpRows_+1},Pt.prototype.addFormatting=function(S,f){this.formatting_=this.formatting_.concat(f);var m=f.reduce(function(g,y){return g+"<"+y+">"},"");this[this.mode_](S,m)},Pt.prototype.clearFormatting=function(S){if(!!this.formatting_.length){var f=this.formatting_.reverse().reduce(function(m,g){return m+"</"+g+">"},"");this.formatting_=[],this[this.mode_](S,f)}},Pt.prototype.popOn=function(S,f){var m=this.nonDisplayed_[this.row_];m+=f,this.nonDisplayed_[this.row_]=m},Pt.prototype.rollUp=function(S,f){var m=this.displayed_[this.row_];m+=f,this.displayed_[this.row_]=m},Pt.prototype.shiftRowsUp_=function(){var S;for(S=0;S<this.topRow_;S++)this.displayed_[S]="";for(S=this.row_+1;S<Ju+1;S++)this.displayed_[S]="";for(S=this.topRow_;S<this.row_;S++)this.displayed_[S]=this.displayed_[S+1];this.displayed_[this.row_]=""},Pt.prototype.paintOn=function(S,f){var m=this.displayed_[this.row_];m+=f,this.displayed_[this.row_]=m};var Zu={CaptionStream:Xr,Cea608Stream:Pt,Cea708Stream:bt},sr={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},XO=8589934592,QO=4294967296,Jb="shared",Up=function(f,m){var g=1;for(f>m&&(g=-1);Math.abs(m-f)>QO;)f+=g*XO;return f},Zb=function S(f){var m,g;S.prototype.init.call(this),this.type_=f||Jb,this.push=function(y){this.type_!==Jb&&y.type!==this.type_||(g===void 0&&(g=y.dts),y.dts=Up(y.dts,g),y.pts=Up(y.pts,g),m=y.dts,this.trigger("data",y))},this.flush=function(){g=m,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){g=void 0,m=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Zb.prototype=new e;var ew={TimestampRolloverStream:Zb,handleRollover:Up},tw=function(f,m,g){var y,_="";for(y=m;y<g;y++)_+="%"+("00"+f[y].toString(16)).slice(-2);return _},ed=function(f,m,g){return decodeURIComponent(tw(f,m,g))},JO=function(f,m,g){return unescape(tw(f,m,g))},td=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},rw={TXXX:function(f){var m;if(f.data[0]===3){for(m=1;m<f.data.length;m++)if(f.data[m]===0){f.description=ed(f.data,1,m),f.value=ed(f.data,m+1,f.data.length).replace(/\0*$/,"");break}f.data=f.value}},WXXX:function(f){var m;if(f.data[0]===3){for(m=1;m<f.data.length;m++)if(f.data[m]===0){f.description=ed(f.data,1,m),f.url=ed(f.data,m+1,f.data.length);break}}},PRIV:function(f){var m;for(m=0;m<f.data.length;m++)if(f.data[m]===0){f.owner=JO(f.data,0,m);break}f.privateData=f.data.subarray(m+1),f.data=f.privateData}},rd;rd=function(f){var m={descriptor:f&&f.descriptor},g=0,y=[],_=0,x;if(rd.prototype.init.call(this),this.dispatchType=sr.METADATA_STREAM_TYPE.toString(16),m.descriptor)for(x=0;x<m.descriptor.length;x++)this.dispatchType+=("00"+m.descriptor[x].toString(16)).slice(-2);this.push=function(C){var O,B,N,$,W,pe;if(C.type==="timed-metadata"){if(C.dataAlignmentIndicator&&(_=0,y.length=0),y.length===0&&(C.data.length<10||C.data[0]!=="I".charCodeAt(0)||C.data[1]!=="D".charCodeAt(0)||C.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(y.push(C),_+=C.data.byteLength,y.length===1&&(g=td(C.data.subarray(6,10)),g+=10),!(_<g)){for(O={data:new Uint8Array(g),frames:[],pts:y[0].pts,dts:y[0].dts},W=0;W<g;)O.data.set(y[0].data.subarray(0,g-W),W),W+=y[0].data.byteLength,_-=y[0].data.byteLength,y.shift();B=10,O.data[5]&64&&(B+=4,B+=td(O.data.subarray(10,14)),g-=td(O.data.subarray(16,20)));do{if(N=td(O.data.subarray(B+4,B+8)),N<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(pe=String.fromCharCode(O.data[B],O.data[B+1],O.data[B+2],O.data[B+3]),$={id:pe,data:O.data.subarray(B+10,B+N+10)},$.key=$.id,rw[$.id]&&(rw[$.id]($),$.owner==="com.apple.streaming.transportStreamTimestamp")){var we=$.data,ne=(we[3]&1)<<30|we[4]<<22|we[5]<<14|we[6]<<6|we[7]>>>2;ne*=4,ne+=we[7]&3,$.timeStamp=ne,O.pts===void 0&&O.dts===void 0&&(O.pts=$.timeStamp,O.dts=$.timeStamp),this.trigger("timestamp",$)}O.frames.push($),B+=10,B+=N}while(B<g);this.trigger("data",O)}}}},rd.prototype=new e;var ZO=rd,eD=ew.TimestampRolloverStream,id,Tl,nd,js=188,zp=71;id=function(){var f=new Uint8Array(js),m=0;id.prototype.init.call(this),this.push=function(g){var y=0,_=js,x;for(m?(x=new Uint8Array(g.byteLength+m),x.set(f.subarray(0,m)),x.set(g,m),m=0):x=g;_<x.byteLength;){if(x[y]===zp&&x[_]===zp){this.trigger("data",x.subarray(y,_)),y+=js,_+=js;continue}y++,_++}y<x.byteLength&&(f.set(x.subarray(y),0),m=x.byteLength-y)},this.flush=function(){m===js&&f[0]===zp&&(this.trigger("data",f),m=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){m=0,this.trigger("reset")}},id.prototype=new e,Tl=function(){var f,m,g,y;Tl.prototype.init.call(this),y=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(x,C){var O=0;C.payloadUnitStartIndicator&&(O+=x[O]+1),C.type==="pat"?m(x.subarray(O),C):g(x.subarray(O),C)},m=function(x,C){C.section_number=x[7],C.last_section_number=x[8],y.pmtPid=(x[10]&31)<<8|x[11],C.pmtPid=y.pmtPid},g=function(x,C){var O,B,N,$;if(!!(x[5]&1)){for(y.programMapTable={video:null,audio:null,"timed-metadata":{}},O=(x[1]&15)<<8|x[2],B=3+O-4,N=(x[10]&15)<<8|x[11],$=12+N;$<B;){var W=x[$],pe=(x[$+1]&31)<<8|x[$+2];W===sr.H264_STREAM_TYPE&&y.programMapTable.video===null?y.programMapTable.video=pe:W===sr.ADTS_STREAM_TYPE&&y.programMapTable.audio===null?y.programMapTable.audio=pe:W===sr.METADATA_STREAM_TYPE&&(y.programMapTable["timed-metadata"][pe]=W),$+=((x[$+3]&15)<<8|x[$+4])+5}C.programMapTable=y.programMapTable}},this.push=function(_){var x={},C=4;if(x.payloadUnitStartIndicator=!!(_[1]&64),x.pid=_[1]&31,x.pid<<=8,x.pid|=_[2],(_[3]&48)>>>4>1&&(C+=_[C]+1),x.pid===0)x.type="pat",f(_.subarray(C),x),this.trigger("data",x);else if(x.pid===this.pmtPid)for(x.type="pmt",f(_.subarray(C),x),this.trigger("data",x);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([_,C,x]):this.processPes_(_,C,x)},this.processPes_=function(_,x,C){C.pid===this.programMapTable.video?C.streamType=sr.H264_STREAM_TYPE:C.pid===this.programMapTable.audio?C.streamType=sr.ADTS_STREAM_TYPE:C.streamType=this.programMapTable["timed-metadata"][C.pid],C.type="pes",C.data=_.subarray(x),this.trigger("data",C)}},Tl.prototype=new e,Tl.STREAM_TYPES={h264:27,adts:15},nd=function(){var f=this,m=!1,g={data:[],size:0},y={data:[],size:0},_={data:[],size:0},x,C=function(N,$){var W,pe=N[0]<<16|N[1]<<8|N[2];$.data=new Uint8Array,pe===1&&($.packetLength=6+(N[4]<<8|N[5]),$.dataAlignmentIndicator=(N[6]&4)!==0,W=N[7],W&192&&($.pts=(N[9]&14)<<27|(N[10]&255)<<20|(N[11]&254)<<12|(N[12]&255)<<5|(N[13]&254)>>>3,$.pts*=4,$.pts+=(N[13]&6)>>>1,$.dts=$.pts,W&64&&($.dts=(N[14]&14)<<27|(N[15]&255)<<20|(N[16]&254)<<12|(N[17]&255)<<5|(N[18]&254)>>>3,$.dts*=4,$.dts+=(N[18]&6)>>>1)),$.data=N.subarray(9+N[8]))},O=function(N,$,W){var pe=new Uint8Array(N.size),we={type:$},ne=0,Oe=0,qt=!1,Ar;if(!(!N.data.length||N.size<9)){for(we.trackId=N.data[0].pid,ne=0;ne<N.data.length;ne++)Ar=N.data[ne],pe.set(Ar.data,Oe),Oe+=Ar.data.byteLength;C(pe,we),qt=$==="video"||we.packetLength<=N.size,(W||qt)&&(N.size=0,N.data.length=0),qt&&f.trigger("data",we)}};nd.prototype.init.call(this),this.push=function(B){({pat:function(){},pes:function(){var $,W;switch(B.streamType){case sr.H264_STREAM_TYPE:$=g,W="video";break;case sr.ADTS_STREAM_TYPE:$=y,W="audio";break;case sr.METADATA_STREAM_TYPE:$=_,W="timed-metadata";break;default:return}B.payloadUnitStartIndicator&&O($,W,!0),$.data.push(B),$.size+=B.data.byteLength},pmt:function(){var $={type:"metadata",tracks:[]};x=B.programMapTable,x.video!==null&&$.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.video,codec:"avc",type:"video"}),x.audio!==null&&$.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.audio,codec:"adts",type:"audio"}),m=!0,f.trigger("data",$)}})[B.type]()},this.reset=function(){g.size=0,g.data.length=0,y.size=0,y.data.length=0,this.trigger("reset")},this.flushStreams_=function(){O(g,"video"),O(y,"audio"),O(_,"timed-metadata")},this.flush=function(){if(!m&&x){var B={type:"metadata",tracks:[]};x.video!==null&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.video,codec:"avc",type:"video"}),x.audio!==null&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.audio,codec:"adts",type:"audio"}),f.trigger("data",B)}m=!1,this.flushStreams_(),this.trigger("done")}},nd.prototype=new e;var iw={PAT_PID:0,MP2T_PACKET_LENGTH:js,TransportPacketStream:id,TransportParseStream:Tl,ElementaryStream:nd,TimestampRolloverStream:eD,CaptionStream:Zu.CaptionStream,Cea608Stream:Zu.Cea608Stream,Cea708Stream:Zu.Cea708Stream,MetadataStream:ZO};for(var $p in sr)sr.hasOwnProperty($p)&&(iw[$p]=sr[$p]);var dn=iw,tD=$e.ONE_SECOND_IN_TS,ad,nw=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ad=function(f){var m,g=0;ad.prototype.init.call(this),this.skipWarn_=function(y,_){this.trigger("log",{level:"warn",message:"adts skiping bytes "+y+" to "+_+" in frame "+g+" outside syncword"})},this.push=function(y){var _=0,x,C,O,B,N;if(f||(g=0),y.type==="audio"){m&&m.length?(O=m,m=new Uint8Array(O.byteLength+y.data.byteLength),m.set(O),m.set(y.data,O.byteLength)):m=y.data;for(var $;_+7<m.length;){if(m[_]!==255||(m[_+1]&246)!==240){typeof $!="number"&&($=_),_++;continue}if(typeof $=="number"&&(this.skipWarn_($,_),$=null),C=(~m[_+1]&1)*2,x=(m[_+3]&3)<<11|m[_+4]<<3|(m[_+5]&224)>>5,B=((m[_+6]&3)+1)*1024,N=B*tD/nw[(m[_+2]&60)>>>2],m.byteLength-_<x)break;this.trigger("data",{pts:y.pts+g*N,dts:y.dts+g*N,sampleCount:B,audioobjecttype:(m[_+2]>>>6&3)+1,channelcount:(m[_+2]&1)<<2|(m[_+3]&192)>>>6,samplerate:nw[(m[_+2]&60)>>>2],samplingfrequencyindex:(m[_+2]&60)>>>2,samplesize:16,data:m.subarray(_+7+C,_+x)}),g++,_+=x}typeof $=="number"&&(this.skipWarn_($,_),$=null),m=m.subarray(_)}},this.flush=function(){g=0,this.trigger("done")},this.reset=function(){m=void 0,this.trigger("reset")},this.endTimeline=function(){m=void 0,this.trigger("endedtimeline")}},ad.prototype=new e;var aw=ad,sw;sw=function(f){var m=f.byteLength,g=0,y=0;this.length=function(){return 8*m},this.bitsAvailable=function(){return 8*m+y},this.loadWord=function(){var _=f.byteLength-m,x=new Uint8Array(4),C=Math.min(4,m);if(C===0)throw new Error("no bytes available");x.set(f.subarray(_,_+C)),g=new DataView(x.buffer).getUint32(0),y=C*8,m-=C},this.skipBits=function(_){var x;y>_?(g<<=_,y-=_):(_-=y,x=Math.floor(_/8),_-=x*8,m-=x,this.loadWord(),g<<=_,y-=_)},this.readBits=function(_){var x=Math.min(y,_),C=g>>>32-x;return y-=x,y>0?g<<=x:m>0&&this.loadWord(),x=_-x,x>0?C<<x|this.readBits(x):C},this.skipLeadingZeros=function(){var _;for(_=0;_<y;++_)if((g&2147483648>>>_)!==0)return g<<=_,y-=_,_;return this.loadWord(),_+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var _=this.skipLeadingZeros();return this.readBits(_+1)-1},this.readExpGolomb=function(){var _=this.readUnsignedExpGolomb();return 1&_?1+_>>>1:-1*(_>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var rD=sw,sd,Sl,ow;Sl=function(){var f=0,m,g;Sl.prototype.init.call(this),this.push=function(y){var _;g?(_=new Uint8Array(g.byteLength+y.data.byteLength),_.set(g),_.set(y.data,g.byteLength),g=_):g=y.data;for(var x=g.byteLength;f<x-3;f++)if(g[f+2]===1){m=f+5;break}for(;m<x;)switch(g[m]){case 0:if(g[m-1]!==0){m+=2;break}else if(g[m-2]!==0){m++;break}f+3!==m-2&&this.trigger("data",g.subarray(f+3,m-2));do m++;while(g[m]!==1&&m<x);f=m-2,m+=3;break;case 1:if(g[m-1]!==0||g[m-2]!==0){m+=3;break}this.trigger("data",g.subarray(f+3,m-2)),f=m-2,m+=3;break;default:m+=3;break}g=g.subarray(f),m-=f,f=0},this.reset=function(){g=null,f=0,this.trigger("reset")},this.flush=function(){g&&g.byteLength>3&&this.trigger("data",g.subarray(f+3)),g=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Sl.prototype=new e,ow={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},sd=function(){var f=new Sl,m,g,y,_,x,C,O;sd.prototype.init.call(this),m=this,this.push=function(B){B.type==="video"&&(g=B.trackId,y=B.pts,_=B.dts,f.push(B))},f.on("data",function(B){var N={trackId:g,pts:y,dts:_,data:B,nalUnitTypeCode:B[0]&31};switch(N.nalUnitTypeCode){case 5:N.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:N.nalUnitType="sei_rbsp",N.escapedRBSP=x(B.subarray(1));break;case 7:N.nalUnitType="seq_parameter_set_rbsp",N.escapedRBSP=x(B.subarray(1)),N.config=C(N.escapedRBSP);break;case 8:N.nalUnitType="pic_parameter_set_rbsp";break;case 9:N.nalUnitType="access_unit_delimiter_rbsp";break}m.trigger("data",N)}),f.on("done",function(){m.trigger("done")}),f.on("partialdone",function(){m.trigger("partialdone")}),f.on("reset",function(){m.trigger("reset")}),f.on("endedtimeline",function(){m.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},O=function(N,$){var W=8,pe=8,we,ne;for(we=0;we<N;we++)pe!==0&&(ne=$.readExpGolomb(),pe=(W+ne+256)%256),W=pe===0?W:pe},x=function(N){for(var $=N.byteLength,W=[],pe=1,we,ne;pe<$-2;)N[pe]===0&&N[pe+1]===0&&N[pe+2]===3?(W.push(pe+2),pe+=2):pe++;if(W.length===0)return N;we=$-W.length,ne=new Uint8Array(we);var Oe=0;for(pe=0;pe<we;Oe++,pe++)Oe===W[0]&&(Oe++,W.shift()),ne[pe]=N[Oe];return ne},C=function(N){var $=0,W=0,pe=0,we=0,ne,Oe,qt,Ar,ja,Kp,kw,Cw,Aw,Yp,Iw,Mt=[1,1],Pw,Fa;if(ne=new rD(N),Oe=ne.readUnsignedByte(),Ar=ne.readUnsignedByte(),qt=ne.readUnsignedByte(),ne.skipUnsignedExpGolomb(),ow[Oe]&&(ja=ne.readUnsignedExpGolomb(),ja===3&&ne.skipBits(1),ne.skipUnsignedExpGolomb(),ne.skipUnsignedExpGolomb(),ne.skipBits(1),ne.readBoolean()))for(Iw=ja!==3?8:12,Fa=0;Fa<Iw;Fa++)ne.readBoolean()&&(Fa<6?O(16,ne):O(64,ne));if(ne.skipUnsignedExpGolomb(),Kp=ne.readUnsignedExpGolomb(),Kp===0)ne.readUnsignedExpGolomb();else if(Kp===1)for(ne.skipBits(1),ne.skipExpGolomb(),ne.skipExpGolomb(),kw=ne.readUnsignedExpGolomb(),Fa=0;Fa<kw;Fa++)ne.skipExpGolomb();if(ne.skipUnsignedExpGolomb(),ne.skipBits(1),Cw=ne.readUnsignedExpGolomb(),Aw=ne.readUnsignedExpGolomb(),Yp=ne.readBits(1),Yp===0&&ne.skipBits(1),ne.skipBits(1),ne.readBoolean()&&($=ne.readUnsignedExpGolomb(),W=ne.readUnsignedExpGolomb(),pe=ne.readUnsignedExpGolomb(),we=ne.readUnsignedExpGolomb()),ne.readBoolean()&&ne.readBoolean()){switch(Pw=ne.readUnsignedByte(),Pw){case 1:Mt=[1,1];break;case 2:Mt=[12,11];break;case 3:Mt=[10,11];break;case 4:Mt=[16,11];break;case 5:Mt=[40,33];break;case 6:Mt=[24,11];break;case 7:Mt=[20,11];break;case 8:Mt=[32,11];break;case 9:Mt=[80,33];break;case 10:Mt=[18,11];break;case 11:Mt=[15,11];break;case 12:Mt=[64,33];break;case 13:Mt=[160,99];break;case 14:Mt=[4,3];break;case 15:Mt=[3,2];break;case 16:Mt=[2,1];break;case 255:{Mt=[ne.readUnsignedByte()<<8|ne.readUnsignedByte(),ne.readUnsignedByte()<<8|ne.readUnsignedByte()];break}}Mt&&Mt[0]/Mt[1]}return{profileIdc:Oe,levelIdc:qt,profileCompatibility:Ar,width:(Cw+1)*16-$*2-W*2,height:(2-Yp)*(Aw+1)*16-pe*2-we*2,sarRatio:Mt}}},sd.prototype=new e;var iD={H264Stream:sd,NalByteStream:Sl},nD=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],lw=function(f,m){var g=f[m+6]<<21|f[m+7]<<14|f[m+8]<<7|f[m+9],y=f[m+5],_=(y&16)>>4;return g=g>=0?g:0,_?g+20:g+10},aD=function S(f,m){return f.length-m<10||f[m]!=="I".charCodeAt(0)||f[m+1]!=="D".charCodeAt(0)||f[m+2]!=="3".charCodeAt(0)?m:(m+=lw(f,m),S(f,m))},sD=function(f){var m=aD(f,0);return f.length>=m+2&&(f[m]&255)===255&&(f[m+1]&240)===240&&(f[m+1]&22)===16},cw=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},oD=function(f,m,g){var y,_="";for(y=m;y<g;y++)_+="%"+("00"+f[y].toString(16)).slice(-2);return _},lD=function(f,m,g){return unescape(oD(f,m,g))},cD=function(f,m){var g=(f[m+5]&224)>>5,y=f[m+4]<<3,_=f[m+3]&3<<11;return _|y|g},uD=function(f,m){return f[m]==="I".charCodeAt(0)&&f[m+1]==="D".charCodeAt(0)&&f[m+2]==="3".charCodeAt(0)?"timed-metadata":f[m]&!0&&(f[m+1]&240)===240?"audio":null},dD=function(f){for(var m=0;m+5<f.length;){if(f[m]!==255||(f[m+1]&246)!==240){m++;continue}return nD[(f[m+2]&60)>>>2]}return null},hD=function(f){var m,g,y,_;m=10,f[5]&64&&(m+=4,m+=cw(f.subarray(10,14)));do{if(g=cw(f.subarray(m+4,m+8)),g<1)return null;if(_=String.fromCharCode(f[m],f[m+1],f[m+2],f[m+3]),_==="PRIV"){y=f.subarray(m+10,m+g+10);for(var x=0;x<y.byteLength;x++)if(y[x]===0){var C=lD(y,0,x);if(C==="com.apple.streaming.transportStreamTimestamp"){var O=y.subarray(x+1),B=(O[3]&1)<<30|O[4]<<22|O[5]<<14|O[6]<<6|O[7]>>>2;return B*=4,B+=O[7]&3,B}break}}m+=10,m+=g}while(m<f.byteLength);return null},od={isLikelyAacData:sD,parseId3TagSize:lw,parseAdtsSize:cD,parseType:uD,parseSampleRate:dD,parseAacTimestamp:hD},ld;ld=function(){var f=new Uint8Array,m=0;ld.prototype.init.call(this),this.setTimestamp=function(g){m=g},this.push=function(g){var y=0,_=0,x,C,O,B;for(f.length?(B=f.length,f=new Uint8Array(g.byteLength+B),f.set(f.subarray(0,B)),f.set(g,B)):f=g;f.length-_>=3;){if(f[_]==="I".charCodeAt(0)&&f[_+1]==="D".charCodeAt(0)&&f[_+2]==="3".charCodeAt(0)){if(f.length-_<10||(y=od.parseId3TagSize(f,_),_+y>f.length))break;C={type:"timed-metadata",data:f.subarray(_,_+y)},this.trigger("data",C),_+=y;continue}else if((f[_]&255)===255&&(f[_+1]&240)===240){if(f.length-_<7||(y=od.parseAdtsSize(f,_),_+y>f.length))break;O={type:"audio",data:f.subarray(_,_+y),pts:m,dts:m},this.trigger("data",O),_+=y;continue}_++}x=f.length-_,x>0?f=f.subarray(_):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},ld.prototype=new e;var fD=ld,pD=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Vp=pD,gD=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Hp=gD,mD=iD.H264Stream,vD=od.isLikelyAacData,yD=$e.ONE_SECOND_IN_TS,El,Fs,cd,Ra,bD=function(f,m){m.stream=f,this.trigger("log",m)},uw=function(f,m){for(var g=Object.keys(m),y=0;y<g.length;y++){var _=g[y];_==="headOfPipeline"||!m[_].on||m[_].on("log",bD.bind(f,_))}},dw=function(f,m){var g;if(f.length!==m.length)return!1;for(g=0;g<f.length;g++)if(f[g]!==m[g])return!1;return!0},qp=function(f,m,g,y,_,x){var C=g-m,O=y-m,B=_-g;return{start:{dts:f,pts:f+C},end:{dts:f+O,pts:f+B},prependedContentDuration:x,baseMediaDecodeTime:f}};Fs=function(f,m){var g=[],y,_=0,x=0,C=1/0;m=m||{},y=m.firstSequenceNumber||0,Fs.prototype.init.call(this),this.push=function(O){_i.collectDtsInfo(f,O),f&&Vp.forEach(function(B){f[B]=O[B]}),g.push(O)},this.setEarliestDts=function(O){_=O},this.setVideoBaseMediaDecodeTime=function(O){C=O},this.setAudioAppendStart=function(O){x=O},this.flush=function(){var O,B,N,$,W,pe,we;if(g.length===0){this.trigger("done","AudioSegmentStream");return}O=kr.trimAdtsFramesByEarliestDts(g,f,_),f.baseMediaDecodeTime=_i.calculateTrackBaseMediaDecodeTime(f,m.keepOriginalTimestamps),we=kr.prefixWithSilence(f,O,x,C),f.samples=kr.generateSampleTable(O),N=ve.mdat(kr.concatenateFrameData(O)),g=[],B=ve.moof(y,[f]),$=new Uint8Array(B.byteLength+N.byteLength),y++,$.set(B),$.set(N,B.byteLength),_i.clearDtsInfo(f),W=Math.ceil(yD*1024/f.samplerate),O.length&&(pe=O.length*W,this.trigger("segmentTimingInfo",qp($e.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),O[0].dts,O[0].pts,O[0].dts+pe,O[0].pts+pe,we||0)),this.trigger("timingInfo",{start:O[0].pts,end:O[0].pts+pe})),this.trigger("data",{track:f,boxes:$}),this.trigger("done","AudioSegmentStream")},this.reset=function(){_i.clearDtsInfo(f),g=[],this.trigger("reset")}},Fs.prototype=new e,El=function(f,m){var g,y=[],_=[],x,C;m=m||{},g=m.firstSequenceNumber||0,El.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(O){_i.collectDtsInfo(f,O),O.nalUnitType==="seq_parameter_set_rbsp"&&!x&&(x=O.config,f.sps=[O.data],Hp.forEach(function(B){f[B]=x[B]},this)),O.nalUnitType==="pic_parameter_set_rbsp"&&!C&&(C=O.data,f.pps=[O.data]),y.push(O)},this.flush=function(){for(var O,B,N,$,W,pe,we=0,ne,Oe;y.length&&y[0].nalUnitType!=="access_unit_delimiter_rbsp";)y.shift();if(y.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(O=Q.groupNalsIntoFrames(y),N=Q.groupFramesIntoGops(O),N[0][0].keyFrame||(B=this.getGopForFusion_(y[0],f),B?(we=B.duration,N.unshift(B),N.byteLength+=B.byteLength,N.nalCount+=B.nalCount,N.pts=B.pts,N.dts=B.dts,N.duration+=B.duration):N=Q.extendFirstKeyFrame(N)),_.length){var qt;if(m.alignGopsAtEnd?qt=this.alignGopsAtEnd_(N):qt=this.alignGopsAtStart_(N),!qt){this.gopCache_.unshift({gop:N.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}_i.clearDtsInfo(f),N=qt}_i.collectDtsInfo(f,N),f.samples=Q.generateSampleTable(N),W=ve.mdat(Q.concatenateNalData(N)),f.baseMediaDecodeTime=_i.calculateTrackBaseMediaDecodeTime(f,m.keepOriginalTimestamps),this.trigger("processedGopsInfo",N.map(function(Ar){return{pts:Ar.pts,dts:Ar.dts,byteLength:Ar.byteLength}})),ne=N[0],Oe=N[N.length-1],this.trigger("segmentTimingInfo",qp(f.baseMediaDecodeTime,ne.dts,ne.pts,Oe.dts+Oe.duration,Oe.pts+Oe.duration,we)),this.trigger("timingInfo",{start:N[0].pts,end:N[N.length-1].pts+N[N.length-1].duration}),this.gopCache_.unshift({gop:N.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),$=ve.moof(g,[f]),pe=new Uint8Array($.byteLength+W.byteLength),g++,pe.set($),pe.set(W,$.byteLength),this.trigger("data",{track:f,boxes:pe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),y=[],this.gopCache_.length=0,_.length=0,this.trigger("reset")},this.resetStream_=function(){_i.clearDtsInfo(f),x=void 0,C=void 0},this.getGopForFusion_=function(O){var B=45e3,N=1e4,$=1/0,W,pe,we,ne,Oe;for(Oe=0;Oe<this.gopCache_.length;Oe++)ne=this.gopCache_[Oe],we=ne.gop,!(!(f.pps&&dw(f.pps[0],ne.pps[0]))||!(f.sps&&dw(f.sps[0],ne.sps[0])))&&(we.dts<f.timelineStartInfo.dts||(W=O.dts-we.dts-we.duration,W>=-N&&W<=B&&(!pe||$>W)&&(pe=ne,$=W)));return pe?pe.gop:null},this.alignGopsAtStart_=function(O){var B,N,$,W,pe,we,ne,Oe;for(pe=O.byteLength,we=O.nalCount,ne=O.duration,B=N=0;B<_.length&&N<O.length&&($=_[B],W=O[N],$.pts!==W.pts);){if(W.pts>$.pts){B++;continue}N++,pe-=W.byteLength,we-=W.nalCount,ne-=W.duration}return N===0?O:N===O.length?null:(Oe=O.slice(N),Oe.byteLength=pe,Oe.duration=ne,Oe.nalCount=we,Oe.pts=Oe[0].pts,Oe.dts=Oe[0].dts,Oe)},this.alignGopsAtEnd_=function(O){var B,N,$,W,pe,we;for(B=_.length-1,N=O.length-1,pe=null,we=!1;B>=0&&N>=0;){if($=_[B],W=O[N],$.pts===W.pts){we=!0;break}if($.pts>W.pts){B--;continue}B===_.length-1&&(pe=N),N--}if(!we&&pe===null)return null;var ne;if(we?ne=N:ne=pe,ne===0)return O;var Oe=O.slice(ne),qt=Oe.reduce(function(Ar,ja){return Ar.byteLength+=ja.byteLength,Ar.duration+=ja.duration,Ar.nalCount+=ja.nalCount,Ar},{byteLength:0,duration:0,nalCount:0});return Oe.byteLength=qt.byteLength,Oe.duration=qt.duration,Oe.nalCount=qt.nalCount,Oe.pts=Oe[0].pts,Oe.dts=Oe[0].dts,Oe},this.alignGopsWith=function(O){_=O}},El.prototype=new e,Ra=function(f,m){this.numberOfTracks=0,this.metadataStream=m,f=f||{},typeof f.remux!="undefined"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ra.prototype.init.call(this),this.push=function(g){if(g.text)return this.pendingCaptions.push(g);if(g.frames)return this.pendingMetadata.push(g);this.pendingTracks.push(g.track),this.pendingBytes+=g.boxes.byteLength,g.track.type==="video"&&(this.videoTrack=g.track,this.pendingBoxes.push(g.boxes)),g.track.type==="audio"&&(this.audioTrack=g.track,this.pendingBoxes.unshift(g.boxes))}},Ra.prototype=new e,Ra.prototype.flush=function(S){var f=0,m={captions:[],captionStreams:{},metadata:[],info:{}},g,y,_,x=0,C;if(this.pendingTracks.length<this.numberOfTracks){if(S!=="VideoSegmentStream"&&S!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(x=this.videoTrack.timelineStartInfo.pts,Hp.forEach(function(O){m.info[O]=this.videoTrack[O]},this)):this.audioTrack&&(x=this.audioTrack.timelineStartInfo.pts,Vp.forEach(function(O){m.info[O]=this.audioTrack[O]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?m.type=this.pendingTracks[0].type:m.type="combined",this.emittedTracks+=this.pendingTracks.length,_=ve.initSegment(this.pendingTracks),m.initSegment=new Uint8Array(_.byteLength),m.initSegment.set(_),m.data=new Uint8Array(this.pendingBytes),C=0;C<this.pendingBoxes.length;C++)m.data.set(this.pendingBoxes[C],f),f+=this.pendingBoxes[C].byteLength;for(C=0;C<this.pendingCaptions.length;C++)g=this.pendingCaptions[C],g.startTime=$e.metadataTsToSeconds(g.startPts,x,this.keepOriginalTimestamps),g.endTime=$e.metadataTsToSeconds(g.endPts,x,this.keepOriginalTimestamps),m.captionStreams[g.stream]=!0,m.captions.push(g);for(C=0;C<this.pendingMetadata.length;C++)y=this.pendingMetadata[C],y.cueTime=$e.metadataTsToSeconds(y.pts,x,this.keepOriginalTimestamps),m.metadata.push(y);for(m.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",m),C=0;C<m.captions.length;C++)g=m.captions[C],this.trigger("caption",g);for(C=0;C<m.metadata.length;C++)y=m.metadata[C],this.trigger("id3Frame",y)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ra.prototype.setRemux=function(S){this.remuxTracks=S},cd=function(f){var m=this,g=!0,y,_;cd.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var x={};this.transmuxPipeline_=x,x.type="aac",x.metadataStream=new dn.MetadataStream,x.aacStream=new fD,x.audioTimestampRolloverStream=new dn.TimestampRolloverStream("audio"),x.timedMetadataTimestampRolloverStream=new dn.TimestampRolloverStream("timed-metadata"),x.adtsStream=new aw,x.coalesceStream=new Ra(f,x.metadataStream),x.headOfPipeline=x.aacStream,x.aacStream.pipe(x.audioTimestampRolloverStream).pipe(x.adtsStream),x.aacStream.pipe(x.timedMetadataTimestampRolloverStream).pipe(x.metadataStream).pipe(x.coalesceStream),x.metadataStream.on("timestamp",function(C){x.aacStream.setTimestamp(C.timeStamp)}),x.aacStream.on("data",function(C){C.type!=="timed-metadata"&&C.type!=="audio"||x.audioSegmentStream||(_=_||{timelineStartInfo:{baseMediaDecodeTime:m.baseMediaDecodeTime},codec:"adts",type:"audio"},x.coalesceStream.numberOfTracks++,x.audioSegmentStream=new Fs(_,f),x.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),x.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),x.adtsStream.pipe(x.audioSegmentStream).pipe(x.coalesceStream),m.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!y}))}),x.coalesceStream.on("data",this.trigger.bind(this,"data")),x.coalesceStream.on("done",this.trigger.bind(this,"done")),uw(this,x)},this.setupTsPipeline=function(){var x={};this.transmuxPipeline_=x,x.type="ts",x.metadataStream=new dn.MetadataStream,x.packetStream=new dn.TransportPacketStream,x.parseStream=new dn.TransportParseStream,x.elementaryStream=new dn.ElementaryStream,x.timestampRolloverStream=new dn.TimestampRolloverStream,x.adtsStream=new aw,x.h264Stream=new mD,x.captionStream=new dn.CaptionStream(f),x.coalesceStream=new Ra(f,x.metadataStream),x.headOfPipeline=x.packetStream,x.packetStream.pipe(x.parseStream).pipe(x.elementaryStream).pipe(x.timestampRolloverStream),x.timestampRolloverStream.pipe(x.h264Stream),x.timestampRolloverStream.pipe(x.adtsStream),x.timestampRolloverStream.pipe(x.metadataStream).pipe(x.coalesceStream),x.h264Stream.pipe(x.captionStream).pipe(x.coalesceStream),x.elementaryStream.on("data",function(C){var O;if(C.type==="metadata"){for(O=C.tracks.length;O--;)!y&&C.tracks[O].type==="video"?(y=C.tracks[O],y.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime):!_&&C.tracks[O].type==="audio"&&(_=C.tracks[O],_.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime);y&&!x.videoSegmentStream&&(x.coalesceStream.numberOfTracks++,x.videoSegmentStream=new El(y,f),x.videoSegmentStream.on("log",m.getLogTrigger_("videoSegmentStream")),x.videoSegmentStream.on("timelineStartInfo",function(B){_&&!f.keepOriginalTimestamps&&(_.timelineStartInfo=B,x.audioSegmentStream.setEarliestDts(B.dts-m.baseMediaDecodeTime))}),x.videoSegmentStream.on("processedGopsInfo",m.trigger.bind(m,"gopInfo")),x.videoSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"videoSegmentTimingInfo")),x.videoSegmentStream.on("baseMediaDecodeTime",function(B){_&&x.audioSegmentStream.setVideoBaseMediaDecodeTime(B)}),x.videoSegmentStream.on("timingInfo",m.trigger.bind(m,"videoTimingInfo")),x.h264Stream.pipe(x.videoSegmentStream).pipe(x.coalesceStream)),_&&!x.audioSegmentStream&&(x.coalesceStream.numberOfTracks++,x.audioSegmentStream=new Fs(_,f),x.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),x.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),x.audioSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"audioSegmentTimingInfo")),x.adtsStream.pipe(x.audioSegmentStream).pipe(x.coalesceStream)),m.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!y})}}),x.coalesceStream.on("data",this.trigger.bind(this,"data")),x.coalesceStream.on("id3Frame",function(C){C.dispatchType=x.metadataStream.dispatchType,m.trigger("id3Frame",C)}),x.coalesceStream.on("caption",this.trigger.bind(this,"caption")),x.coalesceStream.on("done",this.trigger.bind(this,"done")),uw(this,x)},this.setBaseMediaDecodeTime=function(x){var C=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=x),_&&(_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,_i.clearDtsInfo(_),C.audioTimestampRolloverStream&&C.audioTimestampRolloverStream.discontinuity()),y&&(C.videoSegmentStream&&(C.videoSegmentStream.gopCache_=[]),y.timelineStartInfo.dts=void 0,y.timelineStartInfo.pts=void 0,_i.clearDtsInfo(y),C.captionStream.reset()),C.timestampRolloverStream&&C.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(x){_&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(x)},this.setRemux=function(x){var C=this.transmuxPipeline_;f.remux=x,C&&C.coalesceStream&&C.coalesceStream.setRemux(x)},this.alignGopsWith=function(x){y&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(x)},this.getLogTrigger_=function(x){var C=this;return function(O){O.stream=x,C.trigger("log",O)}},this.push=function(x){if(g){var C=vD(x);C&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!C&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),g=!1}this.transmuxPipeline_.headOfPipeline.push(x)},this.flush=function(){g=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},cd.prototype=new e;var wD={Transmuxer:cd,VideoSegmentStream:El,AudioSegmentStream:Fs,AUDIO_PROPERTIES:Vp,VIDEO_PROPERTIES:Hp,generateSegmentTimingInfo:qp},_D=function(f){return f>>>0},xD=function(f){return("00"+f.toString(16)).slice(-2)},ud={toUnsigned:_D,toHexString:xD},TD=function(f){var m="";return m+=String.fromCharCode(f[0]),m+=String.fromCharCode(f[1]),m+=String.fromCharCode(f[2]),m+=String.fromCharCode(f[3]),m},Ma=TD,SD=ud.toUnsigned,ED=function S(f,m){var g=[],y,_,x,C,O;if(!m.length)return null;for(y=0;y<f.byteLength;)_=SD(f[y]<<24|f[y+1]<<16|f[y+2]<<8|f[y+3]),x=Ma(f.subarray(y+4,y+8)),C=_>1?y+_:f.byteLength,x===m[0]&&(m.length===1?g.push(f.subarray(y+8,C)):(O=S(f.subarray(y+8,C),m.slice(1)),O.length&&(g=g.concat(O)))),y=C;return g},_t=ED,kD=ud.toUnsigned,CD=i.getUint64,AD=function(f){var m={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return m.version===1?m.baseMediaDecodeTime=CD(f.subarray(4)):m.baseMediaDecodeTime=kD(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),m},hw=AD,ID=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},fw=ID,PD=function(f){var m={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},g=new DataView(f.buffer,f.byteOffset,f.byteLength),y=m.flags[2]&1,_=m.flags[2]&4,x=m.flags[1]&1,C=m.flags[1]&2,O=m.flags[1]&4,B=m.flags[1]&8,N=g.getUint32(4),$=8,W;for(y&&(m.dataOffset=g.getInt32($),$+=4),_&&N&&(W={flags:fw(f.subarray($,$+4))},$+=4,x&&(W.duration=g.getUint32($),$+=4),C&&(W.size=g.getUint32($),$+=4),B&&(m.version===1?W.compositionTimeOffset=g.getInt32($):W.compositionTimeOffset=g.getUint32($),$+=4),m.samples.push(W),N--);N--;)W={},x&&(W.duration=g.getUint32($),$+=4),C&&(W.size=g.getUint32($),$+=4),O&&(W.flags=fw(f.subarray($,$+4)),$+=4),B&&(m.version===1?W.compositionTimeOffset=g.getInt32($):W.compositionTimeOffset=g.getUint32($),$+=4),m.samples.push(W);return m},pw=PD,OD=function(f){var m=new DataView(f.buffer,f.byteOffset,f.byteLength),g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:m.getUint32(4)},y=g.flags[2]&1,_=g.flags[2]&2,x=g.flags[2]&8,C=g.flags[2]&16,O=g.flags[2]&32,B=g.flags[0]&65536,N=g.flags[0]&131072,$;return $=8,y&&($+=4,g.baseDataOffset=m.getUint32(12),$+=4),_&&(g.sampleDescriptionIndex=m.getUint32($),$+=4),x&&(g.defaultSampleDuration=m.getUint32($),$+=4),C&&(g.defaultSampleSize=m.getUint32($),$+=4),O&&(g.defaultSampleFlags=m.getUint32($)),B&&(g.durationIsEmpty=!0),!y&&N&&(g.baseDataOffsetIsMoof=!0),g},gw=OD,mw=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},kl;typeof window!="undefined"?kl=window:typeof mw!="undefined"?kl=mw:typeof self!="undefined"?kl=self:kl={};var Cl=kl,DD=xl.discardEmulationPreventionBytes,LD=Zu.CaptionStream,RD=function(f,m){for(var g=f,y=0;y<m.length;y++){var _=m[y];if(g<_.size)return _;g-=_.size}return null},MD=function(f,m,g){var y=new DataView(f.buffer,f.byteOffset,f.byteLength),_={logs:[],seiNals:[]},x,C,O,B;for(C=0;C+4<f.length;C+=O)if(O=y.getUint32(C),C+=4,!(O<=0))switch(f[C]&31){case 6:var N=f.subarray(C+1,C+1+O),$=RD(C,m);if(x={nalUnitType:"sei_rbsp",size:O,data:N,escapedRBSP:DD(N),trackId:g},$)x.pts=$.pts,x.dts=$.dts,B=$;else if(B)x.pts=B.pts,x.dts=B.dts;else{_.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+C+" for trackId "+g+". See mux.js#223."});break}_.seiNals.push(x);break}return _},ND=function(f,m,g){var y=m,_=g.defaultSampleDuration||0,x=g.defaultSampleSize||0,C=g.trackId,O=[];return f.forEach(function(B){var N=pw(B),$=N.samples;$.forEach(function(W){W.duration===void 0&&(W.duration=_),W.size===void 0&&(W.size=x),W.trackId=C,W.dts=y,W.compositionTimeOffset===void 0&&(W.compositionTimeOffset=0),typeof y=="bigint"?(W.pts=y+Cl.BigInt(W.compositionTimeOffset),y+=Cl.BigInt(W.duration)):(W.pts=y+W.compositionTimeOffset,y+=W.duration)}),O=O.concat($)}),O},jD=function(f,m){var g=_t(f,["moof","traf"]),y=_t(f,["mdat"]),_={},x=[];return y.forEach(function(C,O){var B=g[O];x.push({mdat:C,traf:B})}),x.forEach(function(C){var O=C.mdat,B=C.traf,N=_t(B,["tfhd"]),$=gw(N[0]),W=$.trackId,pe=_t(B,["tfdt"]),we=pe.length>0?hw(pe[0]).baseMediaDecodeTime:0,ne=_t(B,["trun"]),Oe,qt;m===W&&ne.length>0&&(Oe=ND(ne,we,$),qt=MD(O,Oe,W),_[W]||(_[W]={seiNals:[],logs:[]}),_[W].seiNals=_[W].seiNals.concat(qt.seiNals),_[W].logs=_[W].logs.concat(qt.logs))}),_},FD=function(f,m,g){var y;if(m===null)return null;y=jD(f,m);var _=y[m]||{};return{seiNals:_.seiNals,logs:_.logs,timescale:g}},BD=function(){var f=!1,m,g,y,_,x,C;this.isInitialized=function(){return f},this.init=function(O){m=new LD,f=!0,C=O?O.isPartial:!1,m.on("data",function(B){B.startTime=B.startPts/_,B.endTime=B.endPts/_,x.captions.push(B),x.captionStreams[B.stream]=!0}),m.on("log",function(B){x.logs.push(B)})},this.isNewInit=function(O,B){return O&&O.length===0||B&&typeof B=="object"&&Object.keys(B).length===0?!1:y!==O[0]||_!==B[y]},this.parse=function(O,B,N){var $;if(this.isInitialized()){if(!B||!N)return null;if(this.isNewInit(B,N))y=B[0],_=N[y];else if(y===null||!_)return g.push(O),null}else return null;for(;g.length>0;){var W=g.shift();this.parse(W,B,N)}return $=FD(O,y,_),$&&$.logs&&(x.logs=x.logs.concat($.logs)),$===null||!$.seiNals?x.logs.length?{logs:x.logs,captions:[],captionStreams:[]}:null:(this.pushNals($.seiNals),this.flushStream(),x)},this.pushNals=function(O){if(!this.isInitialized()||!O||O.length===0)return null;O.forEach(function(B){m.push(B)})},this.flushStream=function(){if(!this.isInitialized())return null;C?m.partialFlush():m.flush()},this.clearParsedCaptions=function(){x.captions=[],x.captionStreams={},x.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;m.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){g=[],y=null,_=null,x?this.clearParsedCaptions():x={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},UD=BD,dd=ud.toUnsigned,Al=ud.toHexString,zD=i.getUint64,vw,yw,bw,ww,_w,Gp;vw=function(f){var m={},g=_t(f,["moov","trak"]);return g.reduce(function(y,_){var x,C,O,B,N;return x=_t(_,["tkhd"])[0],!x||(C=x[0],O=C===0?12:20,B=dd(x[O]<<24|x[O+1]<<16|x[O+2]<<8|x[O+3]),N=_t(_,["mdia","mdhd"])[0],!N)?null:(C=N[0],O=C===0?12:20,y[B]=dd(N[O]<<24|N[O+1]<<16|N[O+2]<<8|N[O+3]),y)},m)},yw=function(f,m){var g;g=_t(m,["moof","traf"]);var y=g.reduce(function(_,x){var C=_t(x,["tfhd"])[0],O=dd(C[4]<<24|C[5]<<16|C[6]<<8|C[7]),B=f[O]||9e4,N=_t(x,["tfdt"])[0],$=new DataView(N.buffer,N.byteOffset,N.byteLength),W;N[0]===1?W=zD(N.subarray(4,12)):W=$.getUint32(4);var pe;return typeof W=="bigint"?pe=W/Cl.BigInt(B):typeof W=="number"&&!isNaN(W)&&(pe=W/B),pe<Number.MAX_SAFE_INTEGER&&(pe=Number(pe)),pe<_&&(_=pe),_},1/0);return typeof y=="bigint"||isFinite(y)?y:0},bw=function(f,m){var g=_t(m,["moof","traf"]),y=0,_=0,x;if(g&&g.length){var C=_t(g[0],["tfhd"])[0],O=_t(g[0],["trun"])[0],B=_t(g[0],["tfdt"])[0];if(C){var N=gw(C);x=N.trackId}if(B){var $=hw(B);y=$.baseMediaDecodeTime}if(O){var W=pw(O);W.samples&&W.samples.length&&(_=W.samples[0].compositionTimeOffset||0)}}var pe=f[x]||9e4;typeof y=="bigint"&&(_=Cl.BigInt(_),pe=Cl.BigInt(pe));var we=(y+_)/pe;return typeof we=="bigint"&&we<Number.MAX_SAFE_INTEGER&&(we=Number(we)),we},ww=function(f){var m=_t(f,["moov","trak"]),g=[];return m.forEach(function(y){var _=_t(y,["mdia","hdlr"]),x=_t(y,["tkhd"]);_.forEach(function(C,O){var B=Ma(C.subarray(8,12)),N=x[O],$,W,pe;B==="vide"&&($=new DataView(N.buffer,N.byteOffset,N.byteLength),W=$.getUint8(0),pe=W===0?$.getUint32(12):$.getUint32(20),g.push(pe))})}),g},Gp=function(f){var m=f[0],g=m===0?12:20;return dd(f[g]<<24|f[g+1]<<16|f[g+2]<<8|f[g+3])},_w=function(f){var m=_t(f,["moov","trak"]),g=[];return m.forEach(function(y){var _={},x=_t(y,["tkhd"])[0],C,O;x&&(C=new DataView(x.buffer,x.byteOffset,x.byteLength),O=C.getUint8(0),_.id=O===0?C.getUint32(12):C.getUint32(20));var B=_t(y,["mdia","hdlr"])[0];if(B){var N=Ma(B.subarray(8,12));N==="vide"?_.type="video":N==="soun"?_.type="audio":_.type=N}var $=_t(y,["mdia","minf","stbl","stsd"])[0];if($){var W=$.subarray(8);_.codec=Ma(W.subarray(4,8));var pe=_t(W,[_.codec])[0],we,ne;pe&&(/^[asm]vc[1-9]$/i.test(_.codec)?(we=pe.subarray(78),ne=Ma(we.subarray(4,8)),ne==="avcC"&&we.length>11?(_.codec+=".",_.codec+=Al(we[9]),_.codec+=Al(we[10]),_.codec+=Al(we[11])):_.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(_.codec)?(we=pe.subarray(28),ne=Ma(we.subarray(4,8)),ne==="esds"&&we.length>20&&we[19]!==0?(_.codec+="."+Al(we[19]),_.codec+="."+Al(we[20]>>>2&63).replace(/^0/,"")):_.codec="mp4a.40.2"):_.codec=_.codec.toLowerCase())}var Oe=_t(y,["mdia","mdhd"])[0];Oe&&(_.timescale=Gp(Oe)),g.push(_)}),g};var xw={findBox:_t,parseType:Ma,timescale:vw,startTime:yw,compositionStartTime:bw,videoTrackIds:ww,tracks:_w,getTimescaleFromMediaHeader:Gp},Tw=function(f){var m=f[1]&31;return m<<=8,m|=f[2],m},hd=function(f){return!!(f[1]&64)},fd=function(f){var m=0;return(f[3]&48)>>>4>1&&(m+=f[4]+1),m},$D=function(f,m){var g=Tw(f);return g===0?"pat":g===m?"pmt":m?"pes":null},VD=function(f){var m=hd(f),g=4+fd(f);return m&&(g+=f[g]+1),(f[g+10]&31)<<8|f[g+11]},HD=function(f){var m={},g=hd(f),y=4+fd(f);if(g&&(y+=f[y]+1),!!(f[y+5]&1)){var _,x,C;_=(f[y+1]&15)<<8|f[y+2],x=3+_-4,C=(f[y+10]&15)<<8|f[y+11];for(var O=12+C;O<x;){var B=y+O;m[(f[B+1]&31)<<8|f[B+2]]=f[B],O+=((f[B+3]&15)<<8|f[B+4])+5}return m}},qD=function(f,m){var g=Tw(f),y=m[g];switch(y){case sr.H264_STREAM_TYPE:return"video";case sr.ADTS_STREAM_TYPE:return"audio";case sr.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},GD=function(f){var m=hd(f);if(!m)return null;var g=4+fd(f);if(g>=f.byteLength)return null;var y=null,_;return _=f[g+7],_&192&&(y={},y.pts=(f[g+9]&14)<<27|(f[g+10]&255)<<20|(f[g+11]&254)<<12|(f[g+12]&255)<<5|(f[g+13]&254)>>>3,y.pts*=4,y.pts+=(f[g+13]&6)>>>1,y.dts=y.pts,_&64&&(y.dts=(f[g+14]&14)<<27|(f[g+15]&255)<<20|(f[g+16]&254)<<12|(f[g+17]&255)<<5|(f[g+18]&254)>>>3,y.dts*=4,y.dts+=(f[g+18]&6)>>>1)),y},Wp=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},WD=function(f){for(var m=4+fd(f),g=f.subarray(m),y=0,_=0,x=!1,C;_<g.byteLength-3;_++)if(g[_+2]===1){y=_+5;break}for(;y<g.byteLength;)switch(g[y]){case 0:if(g[y-1]!==0){y+=2;break}else if(g[y-2]!==0){y++;break}_+3!==y-2&&(C=Wp(g[_+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0));do y++;while(g[y]!==1&&y<g.length);_=y-2,y+=3;break;case 1:if(g[y-1]!==0||g[y-2]!==0){y+=3;break}C=Wp(g[_+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0),_=y-2,y+=3;break;default:y+=3;break}return g=g.subarray(_),y-=_,_=0,g&&g.byteLength>3&&(C=Wp(g[_+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(x=!0)),x},KD={parseType:$D,parsePat:VD,parsePmt:HD,parsePayloadUnitStartIndicator:hd,parsePesType:qD,parsePesTime:GD,videoPacketContainsKeyFrame:WD},Bs=ew.handleRollover,ut={};ut.ts=KD,ut.aac=od;var Na=$e.ONE_SECOND_IN_TS,Cr=188,Mi=71,YD=function(f,m){for(var g=0,y=Cr,_,x;y<f.byteLength;){if(f[g]===Mi&&f[y]===Mi){switch(_=f.subarray(g,y),x=ut.ts.parseType(_,m.pid),x){case"pat":m.pid=ut.ts.parsePat(_);break;case"pmt":var C=ut.ts.parsePmt(_);m.table=m.table||{},Object.keys(C).forEach(function(O){m.table[O]=C[O]});break}g+=Cr,y+=Cr;continue}g++,y++}},Sw=function(f,m,g){for(var y=0,_=Cr,x,C,O,B,N,$=!1;_<=f.byteLength;){if(f[y]===Mi&&(f[_]===Mi||_===f.byteLength)){switch(x=f.subarray(y,_),C=ut.ts.parseType(x,m.pid),C){case"pes":O=ut.ts.parsePesType(x,m.table),B=ut.ts.parsePayloadUnitStartIndicator(x),O==="audio"&&B&&(N=ut.ts.parsePesTime(x),N&&(N.type="audio",g.audio.push(N),$=!0));break}if($)break;y+=Cr,_+=Cr;continue}y++,_++}for(_=f.byteLength,y=_-Cr,$=!1;y>=0;){if(f[y]===Mi&&(f[_]===Mi||_===f.byteLength)){switch(x=f.subarray(y,_),C=ut.ts.parseType(x,m.pid),C){case"pes":O=ut.ts.parsePesType(x,m.table),B=ut.ts.parsePayloadUnitStartIndicator(x),O==="audio"&&B&&(N=ut.ts.parsePesTime(x),N&&(N.type="audio",g.audio.push(N),$=!0));break}if($)break;y-=Cr,_-=Cr;continue}y--,_--}},XD=function(f,m,g){for(var y=0,_=Cr,x,C,O,B,N,$,W,pe,we=!1,ne={data:[],size:0};_<f.byteLength;){if(f[y]===Mi&&f[_]===Mi){switch(x=f.subarray(y,_),C=ut.ts.parseType(x,m.pid),C){case"pes":if(O=ut.ts.parsePesType(x,m.table),B=ut.ts.parsePayloadUnitStartIndicator(x),O==="video"&&(B&&!we&&(N=ut.ts.parsePesTime(x),N&&(N.type="video",g.video.push(N),we=!0)),!g.firstKeyFrame)){if(B&&ne.size!==0){for($=new Uint8Array(ne.size),W=0;ne.data.length;)pe=ne.data.shift(),$.set(pe,W),W+=pe.byteLength;if(ut.ts.videoPacketContainsKeyFrame($)){var Oe=ut.ts.parsePesTime($);Oe?(g.firstKeyFrame=Oe,g.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}ne.size=0}ne.data.push(x),ne.size+=x.byteLength}break}if(we&&g.firstKeyFrame)break;y+=Cr,_+=Cr;continue}y++,_++}for(_=f.byteLength,y=_-Cr,we=!1;y>=0;){if(f[y]===Mi&&f[_]===Mi){switch(x=f.subarray(y,_),C=ut.ts.parseType(x,m.pid),C){case"pes":O=ut.ts.parsePesType(x,m.table),B=ut.ts.parsePayloadUnitStartIndicator(x),O==="video"&&B&&(N=ut.ts.parsePesTime(x),N&&(N.type="video",g.video.push(N),we=!0));break}if(we)break;y-=Cr,_-=Cr;continue}y--,_--}},QD=function(f,m){if(f.audio&&f.audio.length){var g=m;(typeof g=="undefined"||isNaN(g))&&(g=f.audio[0].dts),f.audio.forEach(function(x){x.dts=Bs(x.dts,g),x.pts=Bs(x.pts,g),x.dtsTime=x.dts/Na,x.ptsTime=x.pts/Na})}if(f.video&&f.video.length){var y=m;if((typeof y=="undefined"||isNaN(y))&&(y=f.video[0].dts),f.video.forEach(function(x){x.dts=Bs(x.dts,y),x.pts=Bs(x.pts,y),x.dtsTime=x.dts/Na,x.ptsTime=x.pts/Na}),f.firstKeyFrame){var _=f.firstKeyFrame;_.dts=Bs(_.dts,y),_.pts=Bs(_.pts,y),_.dtsTime=_.dts/Na,_.ptsTime=_.pts/Na}}},JD=function(f){for(var m=!1,g=0,y=null,_=null,x=0,C=0,O;f.length-C>=3;){var B=ut.aac.parseType(f,C);switch(B){case"timed-metadata":if(f.length-C<10){m=!0;break}if(x=ut.aac.parseId3TagSize(f,C),x>f.length){m=!0;break}_===null&&(O=f.subarray(C,C+x),_=ut.aac.parseAacTimestamp(O)),C+=x;break;case"audio":if(f.length-C<7){m=!0;break}if(x=ut.aac.parseAdtsSize(f,C),x>f.length){m=!0;break}y===null&&(O=f.subarray(C,C+x),y=ut.aac.parseSampleRate(O)),g++,C+=x;break;default:C++;break}if(m)return null}if(y===null||_===null)return null;var N=Na/y,$={audio:[{type:"audio",dts:_,pts:_},{type:"audio",dts:_+g*1024*N,pts:_+g*1024*N}]};return $},ZD=function(f){var m={pid:null,table:null},g={};YD(f,m);for(var y in m.table)if(m.table.hasOwnProperty(y)){var _=m.table[y];switch(_){case sr.H264_STREAM_TYPE:g.video=[],XD(f,m,g),g.video.length===0&&delete g.video;break;case sr.ADTS_STREAM_TYPE:g.audio=[],Sw(f,m,g),g.audio.length===0&&delete g.audio;break}}return g},eL=function(f,m){var g=ut.aac.isLikelyAacData(f),y;return g?y=JD(f):y=ZD(f),!y||!y.audio&&!y.video?null:(QD(y,m),y)},tL={inspect:eL,parseAudioPes_:Sw},rL=function(f,m){m.on("data",function(g){var y=g.initSegment;g.initSegment={data:y.buffer,byteOffset:y.byteOffset,byteLength:y.byteLength};var _=g.data;g.data=_.buffer,f.postMessage({action:"data",segment:g,byteOffset:_.byteOffset,byteLength:_.byteLength},[g.data])}),m.on("done",function(g){f.postMessage({action:"done"})}),m.on("gopInfo",function(g){f.postMessage({action:"gopInfo",gopInfo:g})}),m.on("videoSegmentTimingInfo",function(g){var y={start:{decode:$e.videoTsToSeconds(g.start.dts),presentation:$e.videoTsToSeconds(g.start.pts)},end:{decode:$e.videoTsToSeconds(g.end.dts),presentation:$e.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:$e.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(y.prependedContentDuration=$e.videoTsToSeconds(g.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:y})}),m.on("audioSegmentTimingInfo",function(g){var y={start:{decode:$e.videoTsToSeconds(g.start.dts),presentation:$e.videoTsToSeconds(g.start.pts)},end:{decode:$e.videoTsToSeconds(g.end.dts),presentation:$e.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:$e.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(y.prependedContentDuration=$e.videoTsToSeconds(g.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:y})}),m.on("id3Frame",function(g){f.postMessage({action:"id3Frame",id3Frame:g})}),m.on("caption",function(g){f.postMessage({action:"caption",caption:g})}),m.on("trackinfo",function(g){f.postMessage({action:"trackinfo",trackInfo:g})}),m.on("audioTimingInfo",function(g){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:$e.videoTsToSeconds(g.start),end:$e.videoTsToSeconds(g.end)}})}),m.on("videoTimingInfo",function(g){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:$e.videoTsToSeconds(g.start),end:$e.videoTsToSeconds(g.end)}})}),m.on("log",function(g){f.postMessage({action:"log",log:g})})},Ew=function(){function S(m,g){this.options=g||{},this.self=m,this.init()}var f=S.prototype;return f.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new wD.Transmuxer(this.options),rL(this.self,this.transmuxer)},f.pushMp4Captions=function(g){this.captionParser||(this.captionParser=new UD,this.captionParser.init());var y=new Uint8Array(g.data,g.byteOffset,g.byteLength),_=this.captionParser.parse(y,g.trackIds,g.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],logs:_&&_.logs||[],data:y.buffer},[y.buffer])},f.probeMp4StartTime=function(g){var y=g.timescales,_=g.data,x=xw.startTime(y,_);this.self.postMessage({action:"probeMp4StartTime",startTime:x,data:_},[_.buffer])},f.probeMp4Tracks=function(g){var y=g.data,_=xw.tracks(y);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:y},[y.buffer])},f.probeTs=function(g){var y=g.data,_=g.baseStartTime,x=typeof _=="number"&&!isNaN(_)?_*$e.ONE_SECOND_IN_TS:void 0,C=tL.inspect(y,x),O=null;C&&(O={hasVideo:C.video&&C.video.length===2||!1,hasAudio:C.audio&&C.audio.length===2||!1},O.hasVideo&&(O.videoStart=C.video[0].ptsTime),O.hasAudio&&(O.audioStart=C.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:O,data:y},[y.buffer])},f.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},f.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},f.push=function(g){var y=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.transmuxer.push(y)},f.reset=function(){this.transmuxer.reset()},f.setTimestampOffset=function(g){var y=g.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round($e.secondsToVideoTs(y)))},f.setAudioAppendStart=function(g){this.transmuxer.setAudioAppendStart(Math.ceil($e.secondsToVideoTs(g.appendStart)))},f.setRemux=function(g){this.transmuxer.setRemux(g.remux)},f.flush=function(g){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},f.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},f.alignGopsWith=function(g){this.transmuxer.alignGopsWith(g.gopsToAlignWith.slice())},S}();self.onmessage=function(S){if(S.data.action==="init"&&S.data.options){this.messageHandlers=new Ew(self,S.data.options);return}this.messageHandlers||(this.messageHandlers=new Ew(self)),S.data&&S.data.action&&S.data.action!=="init"&&this.messageHandlers[S.data.action]&&this.messageHandlers[S.data.action](S.data)}})),SK=q2(TK),EK=function(e,r,n){var i=e.data.segment,a=i.type,s=i.initSegment,o=i.captions,l=i.captionStreams,c=i.metadata,u=i.videoFrameDtsTime,d=i.videoFramePtsTime;r.buffer.push({captions:o,captionStreams:l,metadata:c});var h=e.data.segment.boxes||{data:e.data.segment.data},p={type:a,data:new Uint8Array(h.data,h.data.byteOffset,h.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof u!="undefined"&&(p.videoFrameDtsTime=u),typeof d!="undefined"&&(p.videoFramePtsTime=d),n(p)},kK=function(e){var r=e.transmuxedData,n=e.callback;r.buffer=[],n(r)},CK=function(e,r){r.gopInfo=e.data.gopInfo},K2=function(e){var r=e.transmuxer,n=e.bytes,i=e.audioAppendStart,a=e.gopsToAlignWith,s=e.remux,o=e.onData,l=e.onTrackInfo,c=e.onAudioTimingInfo,u=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,h=e.onAudioSegmentTimingInfo,p=e.onId3,b=e.onCaptions,w=e.onDone,v=e.onEndedTimeline,T=e.onTransmuxerLog,E=e.isEndOfTimeline,A={buffer:[]},k=E,I=function(z){r.currentTransmux===e&&(z.data.action==="data"&&EK(z,A,o),z.data.action==="trackinfo"&&l(z.data.trackInfo),z.data.action==="gopInfo"&&CK(z,A),z.data.action==="audioTimingInfo"&&c(z.data.audioTimingInfo),z.data.action==="videoTimingInfo"&&u(z.data.videoTimingInfo),z.data.action==="videoSegmentTimingInfo"&&d(z.data.videoSegmentTimingInfo),z.data.action==="audioSegmentTimingInfo"&&h(z.data.audioSegmentTimingInfo),z.data.action==="id3Frame"&&p([z.data.id3Frame],z.data.id3Frame.dispatchType),z.data.action==="caption"&&b(z.data.caption),z.data.action==="endedtimeline"&&(k=!1,v()),z.data.action==="log"&&T(z.data.log),z.data.type==="transmuxed"&&(k||(r.onmessage=null,kK({transmuxedData:A,callback:w}),Y2(r))))};if(r.onmessage=I,i&&r.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(a)&&r.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof s!="undefined"&&r.postMessage({action:"setRemux",remux:s}),n.byteLength){var F=n instanceof ArrayBuffer?n:n.buffer,j=n instanceof ArrayBuffer?0:n.byteOffset;r.postMessage({action:"push",data:F,byteOffset:j,byteLength:n.byteLength},[F])}E&&r.postMessage({action:"endTimeline"}),r.postMessage({action:"flush"})},Y2=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():K2(e.currentTransmux))},E1=function(e,r){e.postMessage({action:r}),Y2(e)},X2=function(e,r){if(!r.currentTransmux){r.currentTransmux=e,E1(r,e);return}r.transmuxQueue.push(E1.bind(null,r,e))},AK=function(e){X2("reset",e)},IK=function(e){X2("endTimeline",e)},Q2=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,K2(e);return}e.transmuxer.transmuxQueue.push(e)},PK=function(e){var r=new SK;r.currentTransmux=null,r.transmuxQueue=[];var n=r.terminate;return r.terminate=function(){return r.currentTransmux=null,r.transmuxQueue.length=0,n.call(r)},r.postMessage({action:"init",options:e}),r},tm={reset:AK,endTimeline:IK,transmux:Q2,createTransmuxer:PK},pf=function(e){var r=e.transmuxer,n=e.endAction||e.action,i=e.callback,a=vi({},e,{endAction:null,transmuxer:null,callback:null}),s=function c(u){u.data.action===n&&(r.removeEventListener("message",c),u.data.data&&(u.data.data=new Uint8Array(u.data.data,e.byteOffset||0,e.byteLength||u.data.data.byteLength),e.data&&(e.data=u.data.data)),i(u.data))};if(r.addEventListener("message",s),e.data){var o=e.data instanceof ArrayBuffer;a.byteOffset=o?0:e.data.byteOffset,a.byteLength=e.data.byteLength;var l=[o?e.data:e.data.buffer];r.postMessage(a,l)}else r.postMessage(a)},Gi={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Iv=function(e){e.forEach(function(r){r.abort()})},OK=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},DK=function(e){var r=e.target,n=Date.now()-r.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},jb=function(e,r){return r.timedout?{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:Gi.TIMEOUT,xhr:r}:r.aborted?{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:Gi.ABORTED,xhr:r}:e?{status:r.status,message:"HLS request errored at URL: "+r.uri,code:Gi.FAILURE,xhr:r}:r.responseType==="arraybuffer"&&r.response.byteLength===0?{status:r.status,message:"Empty HLS response at URL: "+r.uri,code:Gi.FAILURE,xhr:r}:null},k1=function(e,r,n){return function(i,a){var s=a.response,o=jb(i,a);if(o)return n(o,e);if(s.byteLength!==16)return n({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:Gi.FAILURE,xhr:a},e);for(var l=new DataView(s),c=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),u=0;u<r.length;u++)r[u].bytes=c;return n(null,e)}},J2=function(e,r){var n=Jy(e.map.bytes);if(n!=="mp4"){var i=e.map.resolvedUri||e.map.uri;return r({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:Gi.FAILURE})}pf({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(s){var o=s.tracks,l=s.data;return e.map.bytes=l,o.forEach(function(c){e.map.tracks=e.map.tracks||{},!e.map.tracks[c.type]&&(e.map.tracks[c.type]=c,typeof c.id=="number"&&c.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[c.id]=c.timescale))}),r(null)}})},LK=function(e){var r=e.segment,n=e.finishProcessingFn;return function(i,a){var s=jb(i,a);if(s)return n(s,r);var o=new Uint8Array(a.response);if(r.map.key)return r.map.encryptedBytes=o,n(null,r);r.map.bytes=o,J2(r,function(l){if(l)return l.xhr=a,l.status=a.status,n(l,r);n(null,r)})}},RK=function(e){var r=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(a,s){var o=jb(a,s);if(o)return n(o,r);var l=i==="arraybuffer"||!s.responseText?s.response:_K(s.responseText.substring(r.lastReachedChar||0));return r.stats=OK(s),r.key?r.encryptedBytes=new Uint8Array(l):r.bytes=new Uint8Array(l),n(null,r)}},MK=function(e){var r=e.segment,n=e.bytes,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,b=e.onTransmuxerLog,w=r.map&&r.map.tracks||{},v=Boolean(w.audio&&w.video),T=a.bind(null,r,"audio","start"),E=a.bind(null,r,"audio","end"),A=a.bind(null,r,"video","start"),k=a.bind(null,r,"video","end"),I=function(){return Q2({bytes:n,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:v,onData:function(D){D.type=D.type==="combined"?"video":D.type,h(r,D)},onTrackInfo:function(D){i&&(v&&(D.isMuxed=!0),i(r,D))},onAudioTimingInfo:function(D){T&&typeof D.start!="undefined"&&(T(D.start),T=null),E&&typeof D.end!="undefined"&&E(D.end)},onVideoTimingInfo:function(D){A&&typeof D.start!="undefined"&&(A(D.start),A=null),k&&typeof D.end!="undefined"&&k(D.end)},onVideoSegmentTimingInfo:function(D){s(D)},onAudioSegmentTimingInfo:function(D){o(D)},onId3:function(D,z){l(r,D,z)},onCaptions:function(D){c(r,[D])},isEndOfTimeline:u,onEndedTimeline:function(){d()},onTransmuxerLog:b,onDone:function(D){!p||(D.type=D.type==="combined"?"video":D.type,p(null,r,D))}})};pf({action:"probeTs",transmuxer:r.transmuxer,data:n,baseStartTime:r.baseStartTime,callback:function(j){r.bytes=n=j.data;var D=j.result;D&&(i(r,{hasAudio:D.hasAudio,hasVideo:D.hasVideo,isMuxed:v}),i=null,D.hasAudio&&!v&&T(D.audioStart),D.hasVideo&&A(D.videoStart),T=null,A=null),I()}})},Z2=function(e){var r=e.segment,n=e.bytes,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,b=e.onTransmuxerLog,w=new Uint8Array(n);if(n9(w)){r.isFmp4=!0;var v=r.map.tracks,T={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(T.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(T.videoCodec=v.video.codec),v.video&&v.audio&&(T.isMuxed=!0),i(r,T);var E=function(k){h(r,{data:w,type:T.hasAudio&&!T.isMuxed?"audio":"video"}),k&&k.length&&c(r,k),p(null,r,{})};pf({action:"probeMp4StartTime",timescales:r.map.timescales,data:w,transmuxer:r.transmuxer,callback:function(k){var I=k.data,F=k.startTime;if(n=I.buffer,r.bytes=w=I,T.hasAudio&&!T.isMuxed&&a(r,"audio","start",F),T.hasVideo&&a(r,"video","start",F),!v.video||!I.byteLength||!r.transmuxer){E();return}pf({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:w,timescales:r.map.timescales,trackIds:[v.video.id],callback:function(D){n=D.data.buffer,r.bytes=w=D.data,D.logs.forEach(function(z){b(H.mergeOptions(z,{stream:"mp4CaptionParser"}))}),E(D.captions)}})}});return}if(!r.transmuxer){p(null,r,{});return}if(typeof r.container=="undefined"&&(r.container=Jy(w)),r.container!=="ts"&&r.container!=="aac"){i(r,{hasAudio:!1,hasVideo:!1}),p(null,r,{});return}MK({segment:r,bytes:n,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:b})},eO=function(e,r){var n=e.id,i=e.key,a=e.encryptedBytes,s=e.decryptionWorker,o=function c(u){if(u.data.source===n){s.removeEventListener("message",c);var d=u.data.decrypted;r(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};s.addEventListener("message",o);var l;i.bytes.slice?l=i.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(i.bytes)),s.postMessage(B2({source:n,encrypted:a,key:l,iv:i.iv}),[a.buffer,l.buffer])},NK=function(e){var r=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,b=e.onTransmuxerLog;eO({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:r},function(w){n.bytes=w,Z2({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:b})})},jK=function(e){var r=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,c=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,h=e.dataFn,p=e.doneFn,b=e.onTransmuxerLog,w=0,v=!1;return function(T,E){if(!v){if(T)return v=!0,Iv(r),p(T,E);if(w+=1,w===r.length){var A=function(){if(E.encryptedBytes)return NK({decryptionWorker:n,segment:E,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:b});Z2({segment:E,bytes:E.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:c,isEndOfTimeline:u,endedTimelineFn:d,dataFn:h,doneFn:p,onTransmuxerLog:b})};if(E.endOfAllRequests=Date.now(),E.map&&E.map.encryptedBytes&&!E.map.bytes)return eO({decryptionWorker:n,id:E.requestId+"-init",encryptedBytes:E.map.encryptedBytes,key:E.map.key},function(k){E.map.bytes=k,J2(E,function(I){if(I)return Iv(r),p(I,E);A()})});A()}}}},FK=function(e){var r=e.loadendState,n=e.abortFn;return function(i){var a=i.target;a.aborted&&n&&!r.calledAbortFn&&(n(),r.calledAbortFn=!0)}},BK=function(e){var r=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(i){var a=i.target;if(!a.aborted)return r.stats=H.mergeOptions(r.stats,DK(i)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),n(i,r)}},UK=function(e){var r=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,l=e.trackInfoFn,c=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,d=e.audioSegmentTimingInfoFn,h=e.id3Fn,p=e.captionsFn,b=e.isEndOfTimeline,w=e.endedTimelineFn,v=e.dataFn,T=e.doneFn,E=e.onTransmuxerLog,A=[],k=jK({activeXhrs:A,decryptionWorker:i,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:d,id3Fn:h,captionsFn:p,isEndOfTimeline:b,endedTimelineFn:w,dataFn:v,doneFn:T,onTransmuxerLog:E});if(a.key&&!a.key.bytes){var I=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&I.push(a.map.key);var F=H.mergeOptions(n,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),j=k1(a,I,k),D=r(F,j);A.push(D)}if(a.map&&!a.map.bytes){var z=a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri);if(z){var M=H.mergeOptions(n,{uri:a.map.key.resolvedUri,responseType:"arraybuffer"}),U=k1(a,[a.map.key],k),P=r(M,U);A.push(P)}var q=H.mergeOptions(n,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:Cv(a.map)}),X=LK({segment:a,finishProcessingFn:k}),fe=r(q,X);A.push(fe)}var te=H.mergeOptions(n,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:Cv(a)}),ae=RK({segment:a,finishProcessingFn:k,responseType:te.responseType}),oe=r(te,ae);oe.addEventListener("progress",BK({segment:a,progressFn:o,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:d,id3Fn:h,captionsFn:p,isEndOfTimeline:b,endedTimelineFn:w,dataFn:v})),A.push(oe);var Re={};return A.forEach(function(Le){Le.addEventListener("loadend",FK({loadendState:Re,abortFn:s}))}),function(){return Iv(A)}},zK=Ri("CodecUtils"),$K=function(e){var r=e.attributes||{};if(r.CODECS)return Bi(r.CODECS)},tO=function(e,r){var n=r.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},VK=function(e,r){if(!tO(e,r))return!0;var n=r.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var a in i)if(!i[a].uri&&!i[a].playlists)return!0;return!1},gf=function(e){var r={};return e.forEach(function(n){var i=n.mediaType,a=n.type,s=n.details;r[i]=r[i]||[],r[i].push(xI(""+a+s))}),Object.keys(r).forEach(function(n){if(r[n].length>1){zK("multiple "+n+" codecs found as attributes: "+r[n].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),r[n]=null;return}r[n]=r[n][0]}),r},C1=function(e){var r=0;return e.audio&&r++,e.video&&r++,r},yc=function(e,r){var n=r.attributes||{},i=gf($K(r)||[]);if(tO(e,r)&&!i.audio&&!VK(e,r)){var a=gf(hq(e,n.AUDIO)||[]);a.audio&&(i.audio=a.audio)}return i},$d=Ri("PlaylistSelector"),A1=function(e){if(!(!e||!e.playlist)){var r=e.playlist;return JSON.stringify({id:r.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:r.attributes&&r.attributes.CODECS||""})}},mf=function(e,r){if(!e)return"";var n=L.getComputedStyle(e);return n?n[r]:""},_o=function(e,r){var n=e.slice();e.sort(function(i,a){var s=r(i,a);return s===0?n.indexOf(i)-n.indexOf(a):s})},Fb=function(e,r){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||L.Number.MAX_VALUE,r.attributes.BANDWIDTH&&(i=r.attributes.BANDWIDTH),i=i||L.Number.MAX_VALUE,n-i},HK=function(e,r){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||L.Number.MAX_VALUE,r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(i=r.attributes.RESOLUTION.width),i=i||L.Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&r.attributes.BANDWIDTH?e.attributes.BANDWIDTH-r.attributes.BANDWIDTH:n-i},rO=function(e,r,n,i,a,s){if(!!e){var o={bandwidth:r,width:n,height:i,limitRenditionByPlayerDimensions:a},l=e.playlists;Vr.isAudioOnly(e)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var c=l.map(function(M){var U,P=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.width,q=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.height;return U=M.attributes&&M.attributes.BANDWIDTH,U=U||L.Number.MAX_VALUE,{bandwidth:U,width:P,height:q,playlist:M}});_o(c,function(M,U){return M.bandwidth-U.bandwidth}),c=c.filter(function(M){return!Vr.isIncompatible(M.playlist)});var u=c.filter(function(M){return Vr.isEnabled(M.playlist)});u.length||(u=c.filter(function(M){return!Vr.isDisabled(M.playlist)}));var d=u.filter(function(M){return M.bandwidth*Jt.BANDWIDTH_VARIANCE<r}),h=d[d.length-1],p=d.filter(function(M){return M.bandwidth===h.bandwidth})[0];if(a===!1){var b=p||u[0]||c[0];if(b&&b.playlist){var w="sortedPlaylistReps";return p&&(w="bandwidthBestRep"),u[0]&&(w="enabledPlaylistReps"),$d("choosing "+A1(b)+" using "+w+" with options",o),b.playlist}return $d("could not choose a playlist with options",o),null}var v=d.filter(function(M){return M.width&&M.height});_o(v,function(M,U){return M.width-U.width});var T=v.filter(function(M){return M.width===n&&M.height===i});h=T[T.length-1];var E=T.filter(function(M){return M.bandwidth===h.bandwidth})[0],A,k,I;E||(A=v.filter(function(M){return M.width>n||M.height>i}),k=A.filter(function(M){return M.width===A[0].width&&M.height===A[0].height}),h=k[k.length-1],I=k.filter(function(M){return M.bandwidth===h.bandwidth})[0]);var F;if(s.experimentalLeastPixelDiffSelector){var j=v.map(function(M){return M.pixelDiff=Math.abs(M.width-n)+Math.abs(M.height-i),M});_o(j,function(M,U){return M.pixelDiff===U.pixelDiff?U.bandwidth-M.bandwidth:M.pixelDiff-U.pixelDiff}),F=j[0]}var D=F||I||E||p||u[0]||c[0];if(D&&D.playlist){var z="sortedPlaylistReps";return F?z="leastPixelDiffRep":I?z="resolutionPlusOneRep":E?z="resolutionBestRep":p?z="bandwidthBestRep":u[0]&&(z="enabledPlaylistReps"),$d("choosing "+A1(D)+" using "+z+" with options",o),D.playlist}return $d("could not choose a playlist with options",o),null}},I1=function(){var e=this.useDevicePixelRatio&&L.devicePixelRatio||1;return rO(this.playlists.master,this.systemBandwidth,parseInt(mf(this.tech_.el(),"width"),10)*e,parseInt(mf(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},qK=function(e){var r=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&L.devicePixelRatio||1;return r<0&&(r=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(r=e*this.systemBandwidth+(1-e)*r,n=this.systemBandwidth),rO(this.playlists.master,r,parseInt(mf(this.tech_.el(),"width"),10)*i,parseInt(mf(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},GK=function(e){var r=e.master,n=e.currentTime,i=e.bandwidth,a=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,l=e.currentTimeline,c=e.syncController,u=r.playlists.filter(function(w){return!Vr.isIncompatible(w)}),d=u.filter(Vr.isEnabled);d.length||(d=u.filter(function(w){return!Vr.isDisabled(w)}));var h=d.filter(Vr.hasAttribute.bind(null,"BANDWIDTH")),p=h.map(function(w){var v=c.getSyncPoint(w,a,l,n),T=v?1:2,E=Vr.estimateSegmentRequestTime(s,i,w),A=E*T-o;return{playlist:w,rebufferingImpact:A}}),b=p.filter(function(w){return w.rebufferingImpact<=0});return _o(b,function(w,v){return Fb(v.playlist,w.playlist)}),b.length?b[0]:(_o(p,function(w,v){return w.rebufferingImpact-v.rebufferingImpact}),p[0]||null)},WK=function(){var e=this,r=this.playlists.master.playlists.filter(Vr.isEnabled);_o(r,function(i,a){return Fb(i,a)});var n=r.filter(function(i){return!!yc(e.playlists.master,i).video});return n[0]||null},KK=function(e){var r=0,n;return e.bytes&&(n=new Uint8Array(e.bytes),e.segments.forEach(function(i){n.set(i,r),r+=i.byteLength})),n},YK=function(e,r,n){if(!e[n]){r.trigger({type:"usage",name:"vhs-608"}),r.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var a=r.textTracks().getTrackById(i);if(a)e[n]=a;else{var s=r.options_.vhs&&r.options_.vhs.captionServices||{},o=n,l=n,c=!1,u=s[i];u&&(o=u.label,l=u.language,c=u.default),e[n]=r.addRemoteTextTrack({kind:"captions",id:i,default:c,label:o,language:l},!1).track}}},XK=function(e){var r=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(!!n){var a=L.WebKitDataCue||L.VTTCue;n.forEach(function(s){var o=s.stream;r[o].addCue(new a(s.startTime+i,s.endTime+i,s.text))})}},QK=function(e){Object.defineProperties(e.frame,{id:{get:function(){return H.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return H.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return H.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},JK=function(e){var r=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,a=e.videoDuration;if(!!n){var s=L.WebKitDataCue||L.VTTCue,o=r.metadataTrack_;if(!!o&&(n.forEach(function(p){var b=p.cueTime+i;typeof b!="number"||L.isNaN(b)||b<0||!(b<1/0)||p.frames.forEach(function(w){var v=new s(b,b,w.value||w.url||w.data||"");v.frame=w,v.value=w,QK(v),o.addCue(v)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,c=[],u=0;u<l.length;u++)l[u]&&c.push(l[u]);var d=c.reduce(function(p,b){var w=p[b.startTime]||[];return w.push(b),p[b.startTime]=w,p},{}),h=Object.keys(d).sort(function(p,b){return Number(p)-Number(b)});h.forEach(function(p,b){var w=d[p],v=Number(h[b+1])||a;w.forEach(function(T){T.endTime=v})})}}},ZK=function(e,r,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=r)},Zl=function(e,r,n){var i,a;if(!!n&&!!n.cues)for(i=n.cues.length;i--;)a=n.cues[i],a.startTime>=e&&a.endTime<=r&&n.removeCue(a)},eY=function(e){var r=e.cues;if(!!r)for(var n=0;n<r.length;n++){for(var i=[],a=0,s=0;s<r.length;s++)r[n].startTime===r[s].startTime&&r[n].endTime===r[s].endTime&&r[n].text===r[s].text&&(a++,a>1&&i.push(r[s]));i.length&&i.forEach(function(o){return e.removeCue(o)})}},tY=function(e,r,n){if(typeof r=="undefined"||r===null||!e.length)return[];var i=Math.ceil((r-n+3)*ef.ONE_SECOND_IN_TS),a;for(a=0;a<e.length&&!(e[a].pts>i);a++);return e.slice(a)},rY=function(e,r,n){if(!r.length)return e;if(n)return r.slice();var i=r[0].pts,a=0;for(a;a<e.length&&!(e[a].pts>=i);a++);return e.slice(0,a).concat(r)},iY=function(e,r,n,i){for(var a=Math.ceil((r-i)*ef.ONE_SECOND_IN_TS),s=Math.ceil((n-i)*ef.ONE_SECOND_IN_TS),o=e.slice(),l=e.length;l--&&!(e[l].pts<=s););if(l===-1)return o;for(var c=l+1;c--&&!(e[c].pts<=a););return c=Math.max(c,0),o.splice(c,l-c+1),o},nY=function(e,r){if(!e&&!r||!e&&r||e&&!r)return!1;if(e===r)return!0;var n=Object.keys(e).sort(),i=Object.keys(r).sort();if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++){var s=n[a];if(s!==i[a]||e[s]!==r[s])return!1}return!0},iO=22,aY=function(e,r,n){r=r||[];for(var i=[],a=0,s=0;s<r.length;s++){var o=r[s];if(e===o.timeline&&(i.push(s),a+=o.duration,a>n))return s}return i.length===0?0:i[i.length-1]},Bl=1,sY=500,P1=function(e){return typeof e=="number"&&isFinite(e)},Vd=1/60,oY=function(e,r,n){return e!=="main"||!r||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":r.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},lY=function(e,r,n){var i=r-Jt.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var a=r-n;return Math.min(a,i)},Xs=function(e){var r=e.startOfSegment,n=e.duration,i=e.segment,a=e.part,s=e.playlist,o=s.mediaSequence,l=s.id,c=s.segments,u=c===void 0?[]:c,d=e.mediaIndex,h=e.partIndex,p=e.timeline,b=u.length-1,w="mediaIndex/partIndex increment";e.getMediaInfoForTime?w="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(w="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(w+=" with independent "+e.independent);var v=typeof h=="number",T=e.segment.uri?"segment":"pre-segment",E=v?E2({preloadSegment:i})-1:0;return T+" ["+(o+d)+"/"+(o+b)+"]"+(v?" part ["+h+"/"+E+"]":"")+(" segment start/end ["+i.start+" => "+i.end+"]")+(v?" part start/end ["+a.start+" => "+a.end+"]":"")+(" startOfSegment ["+r+"]")+(" duration ["+n+"]")+(" timeline ["+p+"]")+(" selected by ["+w+"]")+(" playlist ["+l+"]")},O1=function(e){return e+"TimingInfo"},cY=function(e){var r=e.segmentTimeline,n=e.currentTimeline,i=e.startOfSegment,a=e.buffered,s=e.overrideCheck;return!s&&r===n?null:r<n?i:a.length?a.end(a.length-1):i},D1=function(e){var r=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,a=e.loaderType,s=e.audioDisabled;if(n===i)return!1;if(a==="audio"){var o=r.lastTimelineChange({type:"main"});return!o||o.to!==i}if(a==="main"&&s){var l=r.pendingTimelineChange({type:"audio"});return!(l&&l.to===i)}return!1},uY=function(e){var r=0;return["video","audio"].forEach(function(n){var i=e[n+"TimingInfo"];if(!!i){var a=i.start,s=i.end,o;typeof a=="bigint"||typeof s=="bigint"?o=L.BigInt(s)-L.BigInt(a):typeof a=="number"&&typeof s=="number"&&(o=s-a),typeof o!="undefined"&&o>r&&(r=o)}}),typeof r=="bigint"&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r},L1=function(e){var r=e.segmentDuration,n=e.maxDuration;return r?Math.round(r)>n+Sa:!1},dY=function(e,r){if(r!=="hls")return null;var n=uY({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;var i=e.playlist.targetDuration,a=L1({segmentDuration:n,maxDuration:i*2}),s=L1({segmentDuration:n,maxDuration:i}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+n+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+i+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:o}:null},Pv=function(t){ge(e,t);function e(n,i){var a;if(a=t.call(this)||this,!n)throw new TypeError("Initialization settings are required");if(typeof n.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!n.mediaSource)throw new TypeError("No MediaSource specified");return a.bandwidth=n.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.partIndex=null,a.hasPlayed_=n.hasPlayed,a.currentTime_=n.currentTime,a.seekable_=n.seekable,a.seeking_=n.seeking,a.duration_=n.duration,a.mediaSource_=n.mediaSource,a.vhs_=n.vhs,a.loaderType_=n.loaderType,a.currentMediaInfo_=void 0,a.startingMediaInfo_=void 0,a.segmentMetadataTrack_=n.segmentMetadataTrack,a.goalBufferLength_=n.goalBufferLength,a.sourceType_=n.sourceType,a.sourceUpdater_=n.sourceUpdater,a.inbandTextTracks_=n.inbandTextTracks,a.state_="INIT",a.timelineChangeController_=n.timelineChangeController,a.shouldSaveSegmentTimingInfo_=!0,a.parse708captions_=n.parse708captions,a.useDtsForTimestampOffset_=n.useDtsForTimestampOffset,a.captionServices_=n.captionServices,a.experimentalExactManifestTimings=n.experimentalExactManifestTimings,a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.xhrOptions_=null,a.pendingSegments_=[],a.audioDisabled_=!1,a.isPendingTimestampOffset_=!1,a.gopBuffer_=[],a.timeMapping_=0,a.safeAppend_=H.browser.IE_VERSION>=11,a.appendInitSegment_={audio:!0,video:!0},a.playlistOfLastInitSegment_={audio:null,video:null},a.callQueue_=[],a.loadQueue_=[],a.metadataQueue_={id3:[],caption:[]},a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=n.cacheEncryptionKeys,a.keyCache_={},a.decrypter_=n.decrypter,a.syncController_=n.syncController,a.syncPoint_={segmentIndex:0,time:0},a.transmuxer_=a.createTransmuxer_(),a.triggerSyncInfoUpdate_=function(){return a.trigger("syncinfoupdate")},a.syncController_.on("syncinfoupdate",a.triggerSyncInfoUpdate_),a.mediaSource_.addEventListener("sourceopen",function(){a.isEndOfStream_()||(a.ended_=!1)}),a.fetchAtBuffer_=!1,a.logger_=Ri("SegmentLoader["+a.loaderType_+"]"),Object.defineProperty(Ne(a),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),a.sourceUpdater_.on("ready",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="main"&&a.timelineChangeController_.on("pendingtimelinechange",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="audio"&&a.timelineChangeController_.on("timelinechange",function(){a.hasEnoughInfoToLoad_()&&a.processLoadQueue_(),a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a}var r=e.prototype;return r.createTransmuxer_=function(){return tm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},r.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},r.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&L.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},r.setAudio=function(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},r.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},r.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,L.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},r.checkForAbort_=function(i){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==i},r.error=function(i){return typeof i!="undefined"&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},r.endOfStream=function(){this.ended_=!0,this.transmuxer_&&tm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},r.buffered_=function(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return H.createTimeRanges();if(this.loaderType_==="main"){var a=i.hasAudio,s=i.hasVideo,o=i.isMuxed;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},r.initSegmentForMap=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=ff(i),o=this.initSegments_[s];return a&&!o&&i.bytes&&(this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),o||i},r.segmentKey=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=U2(i),o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&i.bytes&&(this.keyCache_[s]=o={resolvedUri:i.resolvedUri,bytes:i.bytes});var l={resolvedUri:(o||i).resolvedUri};return o&&(l.bytes=o.bytes),l},r.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},r.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.playlist=function(i,a){if(a===void 0&&(a={}),!!i){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=a,this.state==="INIT"&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(i));var l=null;if(s&&(s.id?l=s.id:s.uri&&(l=s.uri)),this.logger_("playlist update ["+l+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==i.uri){this.mediaIndex!==null&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var c=i.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+c+"]"),this.mediaIndex!==null)if(this.mediaIndex-=c,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var u=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!u.parts||!u.parts.length||!u.parts[this.partIndex])){var d=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=d}}o&&(o.mediaIndex-=c,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=i.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,i)}},r.pause=function(){this.checkBufferTimeout_&&(L.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},r.paused=function(){return this.checkBufferTimeout_===null},r.resetEverything=function(i){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},r.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},r.resyncLoader=function(){this.transmuxer_&&tm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},r.remove=function(i,a,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),a===1/0&&(a=this.duration_()),a<=i){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,c=function(){l--,l===0&&s()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(i,a,c)),(o||this.loaderType_==="main")&&(this.gopBuffer_=iY(this.gopBuffer_,i,a,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(i,a,c));for(var u in this.inbandTextTracks_)Zl(i,a,this.inbandTextTracks_[u]);Zl(i,a,this.segmentMetadataTrack_),c()},r.monitorBuffer_=function(){this.checkBufferTimeout_&&L.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=L.setTimeout(this.monitorBufferTick_.bind(this),1)},r.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&L.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=L.setTimeout(this.monitorBufferTick_.bind(this),sY)},r.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();!i||(typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},r.isEndOfStream_=function(i,a,s){if(i===void 0&&(i=this.mediaIndex),a===void 0&&(a=this.playlist_),s===void 0&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var o=typeof i=="number"&&a.segments[i],l=i+1===a.segments.length,c=!o||!o.parts||s+1===o.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&l&&c},r.chooseNextRequest_=function(){var i=this.buffered_(),a=w1(i)||0,s=Db(i,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,l=s>=this.goalBufferLength_(),c=this.playlist_.segments;if(!c.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var u={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(u.isSyncRequest)u.mediaIndex=aY(this.currentTimeline_,c,a);else if(this.mediaIndex!==null){var d=c[this.mediaIndex],h=typeof this.partIndex=="number"?this.partIndex:-1;u.startOfSegment=d.end?d.end:a,d.parts&&d.parts[h+1]?(u.mediaIndex=this.mediaIndex,u.partIndex=h+1):u.mediaIndex=this.mediaIndex+1}else{var p=Vr.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),b=p.segmentIndex,w=p.startTime,v=p.partIndex;u.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+a:"currentTime "+this.currentTime_(),u.mediaIndex=b,u.startOfSegment=w,u.partIndex=v}var T=c[u.mediaIndex],E=T&&typeof u.partIndex=="number"&&T.parts&&T.parts[u.partIndex];if(!T||typeof u.partIndex=="number"&&!E)return null;if(typeof u.partIndex!="number"&&T.parts&&(u.partIndex=0,E=T.parts[0]),!s&&E&&!E.independent)if(u.partIndex===0){var A=c[u.mediaIndex-1],k=A.parts&&A.parts.length&&A.parts[A.parts.length-1];k&&k.independent&&(u.mediaIndex-=1,u.partIndex=A.parts.length-1,u.independent="previous segment")}else T.parts[u.partIndex-1].independent&&(u.partIndex-=1,u.independent="previous part");var I=this.mediaSource_&&this.mediaSource_.readyState==="ended";return u.mediaIndex>=c.length-1&&I&&!this.seeking_()?null:this.generateSegmentInfo_(u)},r.generateSegmentInfo_=function(i){var a=i.independent,s=i.playlist,o=i.mediaIndex,l=i.startOfSegment,c=i.isSyncRequest,u=i.partIndex,d=i.forceTimestampOffset,h=i.getMediaInfoForTime,p=s.segments[o],b=typeof u=="number"&&p.parts[u],w={requestId:"segment-loader-"+Math.random(),uri:b&&b.resolvedUri||p.resolvedUri,mediaIndex:o,partIndex:b?u:null,isSyncRequest:c,startOfSegment:l,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:p.timeline,duration:b&&b.duration||p.duration,segment:p,part:b,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:h,independent:a},v=typeof d!="undefined"?d:this.isPendingTimestampOffset_;w.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:p.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:v});var T=w1(this.sourceUpdater_.audioBuffered());return typeof T=="number"&&(w.audioAppendStart=T-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(w.gopsToAlignWith=tY(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),w},r.timestampOffsetForSegment_=function(i){return cY(i)},r.earlyAbortWhenNeeded_=function(i){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),s=i.bandwidth,o=this.pendingSegment_.duration,l=Vr.estimateSegmentRequestTime(o,s,this.playlist_,i.bytesReceived),c=MW(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(l<=c)){var u=GK({master:this.vhs_.playlists.master,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:c,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!!u){var d=l-c,h=d-u.rebufferingImpact,p=.5;c<=Sa&&(p=1),!(!u.playlist||u.playlist.uri===this.playlist_.uri||h<p)&&(this.bandwidth=u.playlist.attributes.BANDWIDTH*Jt.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},r.handleAbort_=function(i){this.logger_("Aborting "+Xs(i)),this.mediaRequestsAborted+=1},r.handleProgress_=function(i,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")},r.handleTrackInfo_=function(i,a){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},nY(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(i.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},r.handleTimingInfo_=function(i,a,s,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var l=this.pendingSegment_,c=O1(a);l[c]=l[c]||{},l[c][s]=o,this.logger_("timinginfo: "+a+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},r.handleCaptions_=function(i,a){var s=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,a));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),c={};a.forEach(function(u){c[u.stream]=c[u.stream]||{startTime:1/0,captions:[],endTime:0};var d=c[u.stream];d.startTime=Math.min(d.startTime,u.startTime+l),d.endTime=Math.max(d.endTime,u.endTime+l),d.captions.push(u)}),Object.keys(c).forEach(function(u){var d=c[u],h=d.startTime,p=d.endTime,b=d.captions,w=s.inbandTextTracks_;s.logger_("adding cues from "+h+" -> "+p+" for "+u),YK(w,s.vhs_.tech_,u),Zl(h,p,w[u]),XK({captionArray:b,inbandTextTracks:w,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},r.handleId3_=function(i,a,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,a,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();ZK(this.inbandTextTracks_,s,this.vhs_.tech_),JK({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:l,videoDuration:this.duration_()})}},r.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},r.processCallQueue_=function(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(a){return a()})},r.processLoadQueue_=function(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(a){return a()})},r.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var i=this.pendingSegment_;return i?this.getCurrentMediaInfo_()?!D1({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},r.getCurrentMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},r.getMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},r.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!i||!a)return!1;var s=a.hasAudio,o=a.hasVideo,l=a.isMuxed;return!(o&&!i.videoTimingInfo||s&&!this.audioDisabled_&&!l&&!i.audioTimingInfo||D1({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.handleData_=function(i,a){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,i,a));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),s.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),s.isFmp4=i.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[O1(a.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,c;l&&(c=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:c,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var u=this.chooseNextRequest_();if(u.mediaIndex!==s.mediaIndex||u.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}},r.updateAppendInitSegmentStatus=function(i,a){this.loaderType_==="main"&&typeof i.timestampOffset=="number"&&!i.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==i.playlist&&(this.appendInitSegment_[a]=!0)},r.getInitSegmentAndUpdateState_=function(i){var a=i.type,s=i.initSegment,o=i.map,l=i.playlist;if(o){var c=ff(o);if(this.activeInitSegmentId_===c)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=c}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=l,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},r.handleQuotaExceededError_=function(i,a){var s=this,o=i.segmentInfo,l=i.type,c=i.bytes,u=this.sourceUpdater_.audioBuffered(),d=this.sourceUpdater_.videoBuffered();u.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+as(u).join(", ")),d.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+as(d).join(", "));var h=u.length?u.start(0):0,p=u.length?u.end(u.length-1):0,b=d.length?d.start(0):0,w=d.length?d.end(d.length-1):0;if(p-h<=Bl&&w-b<=Bl){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+c.byteLength+", ")+("audio buffer: "+as(u).join(", ")+", ")+("video buffer: "+as(d).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:c}));var v=this.currentTime_(),T=v-Bl;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+T),this.remove(0,T,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+Bl+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=L.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},Bl*1e3)},!0)},r.handleAppendError_=function(i,a){var s=i.segmentInfo,o=i.type,l=i.bytes;if(!!a){if(a.code===iO){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(o+" append of "+l.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},r.appendToSourceBuffer_=function(i){var a=i.segmentInfo,s=i.type,o=i.initSegment,l=i.data,c=i.bytes;if(!c){var u=[l],d=l.byteLength;o&&(u.unshift(o),d+=o.byteLength),c=KK({bytes:d,segments:u})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:s,bytes:c},this.handleAppendError_.bind(this,{segmentInfo:a,type:s,bytes:c}))},r.handleSegmentTimingInfo_=function(i,a,s){if(!(!this.pendingSegment_||a!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=i+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[l].transmuxedPresentationStart=s.start.presentation,o[l].transmuxedDecodeStart=s.start.decode,o[l].transmuxedPresentationEnd=s.end.presentation,o[l].transmuxedDecodeEnd=s.end.decode,o[l].baseMediaDecodeTime=s.baseMediaDecodeTime}},r.appendData_=function(i,a){var s=a.type,o=a.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:s,initSegment:l,data:o})}},r.loadSegment_=function(i){var a=this;if(this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),typeof i.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=vi({},i,{forceTimestampOffset:!0});vi(i,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(i)});return}this.updateTransmuxerAndRequestSegment_(i)},r.updateTransmuxerAndRequestSegment_=function(i){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var s=this.createSimplifiedSegmentObj_(i),o=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex),l=this.mediaIndex!==null,c=i.timeline!==this.currentTimeline_&&i.timeline>0,u=o||l&&c;this.logger_("Requesting "+Xs(i)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=UK({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:u,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(h){var p=h.message,b=h.level,w=h.stream;a.logger_(Xs(i)+" logged from transmuxer stream "+w+" as a "+b+": "+p)}})},r.trimBackBuffer_=function(i){var a=lY(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},r.createSimplifiedSegmentObj_=function(i){var a=i.segment,s=i.part,o={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},l=i.playlist.segments[i.mediaIndex-1];if(l&&l.timeline===a.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),a.key){var c=a.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);o.key=this.segmentKey(a.key),o.key.iv=c}return a.map&&(o.map=this.initSegmentForMap(a.map)),o},r.saveTransferStats_=function(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},r.saveBandwidthRelatedStats_=function(i,a){if(this.pendingSegment_.byteLength=a.bytesReceived,i<Vd){this.logger_("Ignoring segment's bandwidth because its duration of "+i+(" is less than the min to record "+Vd));return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime},r.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},r.segmentRequestFinished_=function(i,a,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,a,s));return}if(this.saveTransferStats_(a.stats),!!this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===Gi.ABORTED)return;if(this.pause(),i.code===Gi.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(i),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=rY(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},r.setTimeMapping_=function(i){var a=this.syncController_.mappingForTimeline(i);a!==null&&(this.timeMapping_=a)},r.updateMediaSecondsLoaded_=function(i){typeof i.start=="number"&&typeof i.end=="number"?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration},r.shouldUpdateTransmuxerTimestampOffset_=function(i){return i===null?!1:this.loaderType_==="main"&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset()},r.trueSegmentStart_=function(i){var a=i.currentStart,s=i.playlist,o=i.mediaIndex,l=i.firstVideoFrameTimeForData,c=i.currentVideoTimestampOffset,u=i.useVideoTimingInfo,d=i.videoTimingInfo,h=i.audioTimingInfo;if(typeof a!="undefined")return a;if(!u)return h.start;var p=s.segments[o-1];return o===0||!p||typeof p.start=="undefined"||p.end!==l+c?l:d.start},r.waitForAppendsToComplete_=function(i){var a=this.getCurrentMediaInfo_(i);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=a.hasAudio,o=a.hasVideo,l=a.isMuxed,c=this.loaderType_==="main"&&o,u=!this.audioDisabled_&&s&&!l;if(i.waitingOnAppends=0,!i.hasAppendedData_){!i.timingInfo&&typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),this.checkAppendsDone_(i);return}c&&i.waitingOnAppends++,u&&i.waitingOnAppends++,c&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),u&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},r.checkAppendsDone_=function(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,i.waitingOnAppends===0&&this.handleAppendsDone_())},r.checkForIllegalMediaSwitch=function(i){var a=oY(this.loaderType_,this.getCurrentMediaInfo_(),i);return a?(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0):!1},r.updateSourceBufferTimestampOffset_=function(i){if(!(i.timestampOffset===null||typeof i.timingInfo.start!="number"||i.changedTimestampOffset||this.loaderType_!=="main")){var a=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),a=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},r.getSegmentStartTimeForTimestampOffsetCalculation_=function(i){var a=i.videoTimingInfo,s=i.audioTimingInfo,o=i.timingInfo;return this.useDtsForTimestampOffset_?a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},r.updateTimingInfoEnd_=function(i){i.timingInfo=i.timingInfo||{};var a=this.getMediaInfo_(),s=this.loaderType_==="main"&&a&&a.hasVideo,o=s&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;!o||(i.timingInfo.end=typeof o.end=="number"?o.end:o.start+i.duration)},r.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});var a=dY(i,this.sourceType_);if(a&&(a.severity==="warn"?H.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest&&(this.trigger("syncinfoupdate"),!i.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+Xs(i));return}this.logger_("Appended "+Xs(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var s=i.segment,o=i.part,l=s.end&&this.currentTime_()-s.end>i.playlist.targetDuration*3,c=o&&o.end&&this.currentTime_()-o.end>i.playlist.partTargetDuration*3;if(l||c){this.logger_("bad "+(l?"segment":"part")+" "+Xs(i)),this.resetEverything();return}var u=this.mediaIndex!==null;u&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},r.recordThroughput_=function(i){if(i.duration<Vd){this.logger_("Ignoring segment's throughput because its duration of "+i.duration+(" is less than the min to record "+Vd));return}var a=this.throughput.rate,s=Date.now()-i.endOfAllRequests+1,o=Math.floor(i.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count},r.addSegmentMetadataCue_=function(i){if(!!this.segmentMetadataTrack_){var a=i.segment,s=a.start,o=a.end;if(!(!P1(s)||!P1(o))){Zl(s,o,this.segmentMetadataTrack_);var l=L.WebKitDataCue||L.VTTCue,c={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:s,end:o},u=JSON.stringify(c),d=new l(s,o,u);d.value=c,this.segmentMetadataTrack_.addCue(d)}}},e}(H.EventTarget);function yn(){}var nO=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toUpperCase()})},hY=["video","audio"],Ov=function(e,r){var n=r[e+"Buffer"];return n&&n.updating||r.queuePending[e]},fY=function(e,r){for(var n=0;n<r.length;n++){var i=r[n];if(i.type==="mediaSource")return null;if(i.type===e)return n}return null},Bb=function t(e,r){if(r.queue.length!==0){var n=0,i=r.queue[n];if(i.type==="mediaSource"){!r.updating()&&r.mediaSource.readyState!=="closed"&&(r.queue.shift(),i.action(r),i.doneFn&&i.doneFn(),t("audio",r),t("video",r));return}if(e!=="mediaSource"&&!(!r.ready()||r.mediaSource.readyState==="closed"||Ov(e,r))){if(i.type!==e){if(n=fY(e,r.queue),n===null)return;i=r.queue[n]}if(r.queue.splice(n,1),r.queuePending[e]=i,i.action(e,r),!i.doneFn){r.queuePending[e]=null,t(e,r);return}}}},aO=function(e,r){var n=r[e+"Buffer"],i=nO(e);!n||(n.removeEventListener("updateend",r["on"+i+"UpdateEnd_"]),n.removeEventListener("error",r["on"+i+"Error_"]),r.codecs[e]=null,r[e+"Buffer"]=null)},zi=function(e,r){return e&&r&&Array.prototype.indexOf.call(e.sourceBuffers,r)!==-1},Qr={appendBuffer:function(e,r,n){return function(i,a){var s=a[i+"Buffer"];if(!!zi(a.mediaSource,s)){a.logger_("Appending segment "+r.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{s.appendBuffer(e)}catch(o){a.logger_("Error with code "+o.code+" "+(o.code===iO?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+r.mediaIndex+" to "+i+"Buffer")),a.queuePending[i]=null,n(o)}}}},remove:function(e,r){return function(n,i){var a=i[n+"Buffer"];if(!!zi(i.mediaSource,a)){i.logger_("Removing "+e+" to "+r+" from "+n+"Buffer");try{a.remove(e,r)}catch{i.logger_("Remove "+e+" to "+r+" from "+n+"Buffer failed")}}}},timestampOffset:function(e){return function(r,n){var i=n[r+"Buffer"];!zi(n.mediaSource,i)||(n.logger_("Setting "+r+"timestampOffset to "+e),i.timestampOffset=e)}},callback:function(e){return function(r,n){e()}},endOfStream:function(e){return function(r){if(r.mediaSource.readyState==="open"){r.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{r.mediaSource.endOfStream(e)}catch(n){H.log.warn("Failed to call media source endOfStream",n)}}}},duration:function(e){return function(r){r.logger_("Setting mediaSource duration to "+e);try{r.mediaSource.duration=e}catch(n){H.log.warn("Failed to set media source duration",n)}}},abort:function(){return function(e,r){if(r.mediaSource.readyState==="open"){var n=r[e+"Buffer"];if(!!zi(r.mediaSource,n)){r.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(i){H.log.warn("Failed to abort on "+e+"Buffer",i)}}}}},addSourceBuffer:function(e,r){return function(n){var i=nO(e),a=Yc(r);n.logger_("Adding "+e+"Buffer with codec "+r+" to mediaSource");var s=n.mediaSource.addSourceBuffer(a);s.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),s.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=r,n[e+"Buffer"]=s}},removeSourceBuffer:function(e){return function(r){var n=r[e+"Buffer"];if(aO(e,r),!!zi(r.mediaSource,n)){r.logger_("Removing "+e+"Buffer with codec "+r.codecs[e]+" from mediaSource");try{r.mediaSource.removeSourceBuffer(n)}catch(i){H.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},changeType:function(e){return function(r,n){var i=n[r+"Buffer"],a=Yc(e);!zi(n.mediaSource,i)||n.codecs[r]!==e&&(n.logger_("changing "+r+"Buffer codec from "+n.codecs[r]+" to "+e),i.changeType(a),n.codecs[r]=e)}}},Jr=function(e){var r=e.type,n=e.sourceUpdater,i=e.action,a=e.doneFn,s=e.name;n.queue.push({type:r,action:i,doneFn:a,name:s}),Bb(r,n)},R1=function(e,r){return function(n){if(r.queuePending[e]){var i=r.queuePending[e].doneFn;r.queuePending[e]=null,i&&i(r[e+"Error_"])}Bb(e,r)}},sO=function(t){ge(e,t);function e(n){var i;return i=t.call(this)||this,i.mediaSource=n,i.sourceopenListener_=function(){return Bb("mediaSource",Ne(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Ri("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=R1("video",Ne(i)),i.onAudioUpdateEnd_=R1("audio",Ne(i)),i.onVideoError_=function(a){i.videoError_=a},i.onAudioError_=function(a){i.audioError_=a},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}var r=e.prototype;return r.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},r.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},r.hasInitializedAnyEme=function(){return this.initializedEme_},r.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},r.createSourceBuffers=function(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},r.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},r.addSourceBuffer=function(i,a){Jr({type:"mediaSource",sourceUpdater:this,action:Qr.addSourceBuffer(i,a),name:"addSourceBuffer"})},r.abort=function(i){Jr({type:i,sourceUpdater:this,action:Qr.abort(i),name:"abort"})},r.removeSourceBuffer=function(i){if(!this.canRemoveSourceBuffer()){H.log.error("removeSourceBuffer is not supported!");return}Jr({type:"mediaSource",sourceUpdater:this,action:Qr.removeSourceBuffer(i),name:"removeSourceBuffer"})},r.canRemoveSourceBuffer=function(){return!H.browser.IE_VERSION&&!H.browser.IS_FIREFOX&&L.MediaSource&&L.MediaSource.prototype&&typeof L.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return L.SourceBuffer&&L.SourceBuffer.prototype&&typeof L.SourceBuffer.prototype.changeType=="function"},r.canChangeType=function(){return this.constructor.canChangeType()},r.changeType=function(i,a){if(!this.canChangeType()){H.log.error("changeType is not supported!");return}Jr({type:i,sourceUpdater:this,action:Qr.changeType(a),name:"changeType"})},r.addOrChangeSourceBuffers=function(i){var a=this;if(!i||typeof i!="object"||Object.keys(i).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(s){var o=i[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,o);a.canChangeType()&&a.changeType(s,o)})},r.appendBuffer=function(i,a){var s=this,o=i.segmentInfo,l=i.type,c=i.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([i,a]),this.logger_("delayed audio append of "+c.length+" until video append");return}var u=a;if(Jr({type:l,sourceUpdater:this,action:Qr.appendBuffer(c,o||{mediaIndex:-1},u),doneFn:a,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var d=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+d.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,d.forEach(function(h){s.appendBuffer.apply(s,h)})}},r.audioBuffered=function(){return zi(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:H.createTimeRange()},r.videoBuffered=function(){return zi(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:H.createTimeRange()},r.buffered=function(){var i=zi(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=zi(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!i?this.audioBuffered():i&&!a?this.videoBuffered():RW(this.audioBuffered(),this.videoBuffered())},r.setDuration=function(i,a){a===void 0&&(a=yn),Jr({type:"mediaSource",sourceUpdater:this,action:Qr.duration(i),name:"duration",doneFn:a})},r.endOfStream=function(i,a){i===void 0&&(i=null),a===void 0&&(a=yn),typeof i!="string"&&(i=void 0),Jr({type:"mediaSource",sourceUpdater:this,action:Qr.endOfStream(i),name:"endOfStream",doneFn:a})},r.removeAudio=function(i,a,s){if(s===void 0&&(s=yn),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}Jr({type:"audio",sourceUpdater:this,action:Qr.remove(i,a),doneFn:s,name:"remove"})},r.removeVideo=function(i,a,s){if(s===void 0&&(s=yn),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}Jr({type:"video",sourceUpdater:this,action:Qr.remove(i,a),doneFn:s,name:"remove"})},r.updating=function(){return!!(Ov("audio",this)||Ov("video",this))},r.audioTimestampOffset=function(i){return typeof i!="undefined"&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(Jr({type:"audio",sourceUpdater:this,action:Qr.timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},r.videoTimestampOffset=function(i){return typeof i!="undefined"&&this.videoBuffer&&this.videoTimestampOffset!==i&&(Jr({type:"video",sourceUpdater:this,action:Qr.timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},r.audioQueueCallback=function(i){!this.audioBuffer||Jr({type:"audio",sourceUpdater:this,action:Qr.callback(i),name:"callback"})},r.videoQueueCallback=function(i){!this.videoBuffer||Jr({type:"video",sourceUpdater:this,action:Qr.callback(i),name:"callback"})},r.dispose=function(){var i=this;this.trigger("dispose"),hY.forEach(function(a){i.abort(a),i.canRemoveSourceBuffer()?i.removeSourceBuffer(a):i[a+"QueueCallback"](function(){return aO(a,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(H.EventTarget),M1=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},N1=new Uint8Array(`

`.split("").map(function(t){return t.charCodeAt(0)})),pY=function(t){ge(e,t);function e(n,i){var a;return i===void 0&&(i={}),a=t.call(this,n,i)||this,a.mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=n.featuresNativeTextTracks,a.shouldSaveSegmentTimingInfo_=!1,a}var r=e.prototype;return r.createTransmuxer_=function(){return null},r.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return H.createTimeRanges();var i=this.subtitlesTrack_.cues,a=i[0].startTime,s=i[i.length-1].startTime;return H.createTimeRanges([[a,s]])},r.initSegmentForMap=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=ff(i),o=this.initSegments_[s];if(a&&!o&&i.bytes){var l=N1.byteLength+i.bytes.byteLength,c=new Uint8Array(l);c.set(i.bytes),c.set(N1,i.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:c}}return o||i},r.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.track=function(i){return typeof i=="undefined"?this.subtitlesTrack_:(this.subtitlesTrack_=i,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},r.remove=function(i,a){Zl(i,a,this.subtitlesTrack_)},r.fillBuffer_=function(){var i=this,a=this.chooseNextRequest_();if(!!a){if(this.syncController_.timestampOffsetForTimeline(a.timeline)===null){var s=function(){i.state="READY",i.paused()||i.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(a)}},r.timestampOffsetForSegment_=function(){return null},r.chooseNextRequest_=function(){return this.skipEmptySegments_(t.prototype.chooseNextRequest_.call(this))},r.skipEmptySegments_=function(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},r.stopForError=function(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},r.segmentRequestFinished_=function(i,a,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(i){i.code===Gi.TIMEOUT&&this.handleTimeout_(),i.code===Gi.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(i);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");var c=l.segment;if(c.map&&(c.map.bytes=a.map.bytes),l.bytes=a.bytes,typeof L.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var u,d=function(){o.subtitlesTrack_.tech_.off("vttjsloaded",u),o.stopForError({message:"Error loading vtt.js"})};u=function(){o.subtitlesTrack_.tech_.off("vttjserror",d),o.segmentRequestFinished_(i,a,s)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",u),this.subtitlesTrack_.tech_.one("vttjserror",d);return}c.requested=!0;try{this.parseVTTCues_(l)}catch(h){this.stopForError({message:h.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,l.cues.forEach(function(h){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new L.VTTCue(h.startTime,h.endTime,h.text):h)}),eY(this.subtitlesTrack_),this.handleAppendsDone_()},r.handleData_=function(){},r.updateTimingInfoEnd_=function(){},r.parseVTTCues_=function(i){var a,s=!1;typeof L.TextDecoder=="function"?a=new L.TextDecoder("utf8"):(a=L.WebVTT.StringDecoder(),s=!0);var o=new L.WebVTT.Parser(L,L.vttjs,a);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=i.cues.push.bind(i.cues),o.ontimestampmap=function(u){i.timestampmap=u},o.onparsingerror=function(u){H.log.warn("Error encountered when parsing cues: "+u.message)},i.segment.map){var l=i.segment.map.bytes;s&&(l=M1(l)),o.parse(l)}var c=i.bytes;s&&(c=M1(c)),o.parse(c),o.flush()},r.updateTimeMapping_=function(i,a,s){var o=i.segment;if(!!a){if(!i.cues.length){o.empty=!0;return}var l=i.timestampmap,c=l.MPEGTS/ef.ONE_SECOND_IN_TS-l.LOCAL+a.mapping;if(i.cues.forEach(function(h){h.startTime+=c,h.endTime+=c}),!s.syncInfo){var u=i.cues[0].startTime,d=i.cues[i.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+i.mediaIndex,time:Math.min(u,d-o.duration)}}}},e}(Pv),gY=function(e,r){for(var n=e.cues,i=0;i<n.length;i++){var a=n[i];if(r>=a.adStartTime&&r<=a.adEndTime)return a}return null},mY=function(e,r,n){if(n===void 0&&(n=0),!!e.segments)for(var i=n,a,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=gY(r,i+o.duration/2)),a){if("cueIn"in o){a.endTime=i,a.adEndTime=i,i+=o.duration,a=null;continue}if(i<a.endTime){i+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new L.VTTCue(i,i+o.duration,o.cueOut),a.adStartTime=i,a.adEndTime=i+parseFloat(o.cueOut),r.addCue(a)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),c=l[0],u=l[1];a=new L.VTTCue(i,i+o.duration,""),a.adStartTime=i-c,a.adEndTime=a.adStartTime+u,r.addCue(a)}i+=o.duration}},vY=86400,j1=[{name:"VOD",run:function(e,r,n,i,a){if(n!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(e,r,n,i,a){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,o=null,l=xv(r);a=a||0;for(var c=0;c<l.length;c++){var u=r.endList||a===0?c:l.length-(c+1),d=l[u],h=d.segment,p=e.timelineToDatetimeMappings[h.timeline];if(!(!p||!h.dateTimeObject)){var b=h.dateTimeObject.getTime()/1e3,w=b+p;if(h.parts&&typeof d.partIndex=="number")for(var v=0;v<d.partIndex;v++)w+=h.parts[v].duration;var T=Math.abs(a-w);if(o!==null&&(T===0||o<T))break;o=T,s={time:w,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}}return s}},{name:"Segment",run:function(e,r,n,i,a){var s=null,o=null;a=a||0;for(var l=xv(r),c=0;c<l.length;c++){var u=r.endList||a===0?c:l.length-(c+1),d=l[u],h=d.segment,p=d.part&&d.part.start||h&&h.start;if(h.timeline===i&&typeof p!="undefined"){var b=Math.abs(a-p);if(o!==null&&o<b)break;(!s||o===null||o>=b)&&(o=b,s={time:p,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return s}},{name:"Discontinuity",run:function(e,r,n,i,a){var s=null;if(a=a||0,r.discontinuityStarts&&r.discontinuityStarts.length)for(var o=null,l=0;l<r.discontinuityStarts.length;l++){var c=r.discontinuityStarts[l],u=r.discontinuitySequence+l+1,d=e.discontinuities[u];if(d){var h=Math.abs(a-d.time);if(o!==null&&o<h)break;(!s||o===null||o>=h)&&(o=h,s={time:d.time,segmentIndex:c,partIndex:null})}}return s}},{name:"Playlist",run:function(e,r,n,i,a){if(r.syncInfo){var s={time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence,partIndex:null};return s}return null}}],yY=function(t){ge(e,t);function e(n){var i;return i=t.call(this)||this,i.timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=Ri("SyncController"),i}var r=e.prototype;return r.getSyncPoint=function(i,a,s,o){var l=this.runStrategies_(i,a,s,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},r.getExpiredTime=function(i,a){if(!i||!i.segments)return null;var s=this.runStrategies_(i,a,i.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+vc({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:o.segmentIndex,endIndex:0}))},r.runStrategies_=function(i,a,s,o){for(var l=[],c=0;c<j1.length;c++){var u=j1[c],d=u.run(this,i,a,s,o);d&&(d.strategy=u.name,l.push({strategy:u.name,syncPoint:d}))}return l},r.selectSyncPoint_=function(i,a){for(var s=i[0].syncPoint,o=Math.abs(i[0].syncPoint[a.key]-a.value),l=i[0].strategy,c=1;c<i.length;c++){var u=Math.abs(i[c].syncPoint[a.key]-a.value);u<o&&(o=u,s=i[c].syncPoint,l=i[c].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy"+(" ["+l+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},r.saveExpiredSegmentInfo=function(i,a){var s=a.mediaSequence-i.mediaSequence;if(s>vY){H.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var l=i.segments[o];if(l&&typeof l.start!="undefined"){a.syncInfo={mediaSequence:i.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+","+(" mediaSequence: "+a.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},r.setDateTimeMappingForStart=function(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var a=i.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}},r.saveSegmentTimingInfo=function(i){var a=i.segmentInfo,s=i.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(a,a.timingInfo,s),l=a.segment;o&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:l.start}));var c=l.dateTimeObject;l.discontinuity&&s&&c&&(this.timelineToDatetimeMappings[l.timeline]=-(c.getTime()/1e3))},r.timestampOffsetForTimeline=function(i){return typeof this.timelines[i]=="undefined"?null:this.timelines[i].time},r.mappingForTimeline=function(i){return typeof this.timelines[i]=="undefined"?null:this.timelines[i].mapping},r.calculateSegmentTimeMapping_=function(i,a,s){var o=i.segment,l=i.part,c=this.timelines[i.timeline],u,d;if(typeof i.timestampOffset=="number")c={time:i.startOfSegment,mapping:i.startOfSegment-a.start},s&&(this.timelines[i.timeline]=c,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": "+("[time: "+c.time+"] [mapping: "+c.mapping+"]"))),u=i.startOfSegment,d=a.end+c.mapping;else if(c)u=a.start+c.mapping,d=a.end+c.mapping;else return!1;return l&&(l.start=u,l.end=d),(!o.start||u<o.start)&&(o.start=u),o.end=d,!0},r.saveDiscontinuitySyncInfo_=function(i){var a=i.playlist,s=i.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var o=0;o<a.discontinuityStarts.length;o++){var l=a.discontinuityStarts[o],c=a.discontinuitySequence+o+1,u=l-i.mediaIndex,d=Math.abs(u);if(!this.discontinuities[c]||this.discontinuities[c].accuracy>d){var h=void 0;u<0?h=s.start-vc({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex,endIndex:l}):h=s.end+vc({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex+1,endIndex:l}),this.discontinuities[c]={time:h,accuracy:d}}}},r.dispose=function(){this.trigger("dispose"),this.off()},e}(H.EventTarget),bY=function(t){ge(e,t);function e(){var n;return n=t.call(this)||this,n.pendingTimelineChanges_={},n.lastTimelineChanges_={},n}var r=e.prototype;return r.clearPendingTimelineChange=function(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},r.pendingTimelineChange=function(i){var a=i.type,s=i.from,o=i.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},r.lastTimelineChange=function(i){var a=i.type,s=i.from,o=i.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[a]={type:a,from:s,to:o},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},r.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(H.EventTarget),wY=G2(W2(function(){var t=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function e(k,I,F){return F={path:I,exports:{},require:function(D,z){return r(D,z==null?F.path:z)}},k(F,F.exports),F.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n=e(function(k){function I(j,D){for(var z=0;z<D.length;z++){var M=D[z];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}function F(j,D,z){return D&&I(j.prototype,D),z&&I(j,z),j}k.exports=F,k.exports.default=k.exports,k.exports.__esModule=!0}),i=e(function(k){function I(F,j){return k.exports=I=Object.setPrototypeOf||function(z,M){return z.__proto__=M,z},k.exports.default=k.exports,k.exports.__esModule=!0,I(F,j)}k.exports=I,k.exports.default=k.exports,k.exports.__esModule=!0}),a=e(function(k){function I(F,j){F.prototype=Object.create(j.prototype),F.prototype.constructor=F,i(F,j)}k.exports=I,k.exports.default=k.exports,k.exports.__esModule=!0}),s=function(){function k(){this.listeners={}}var I=k.prototype;return I.on=function(j,D){this.listeners[j]||(this.listeners[j]=[]),this.listeners[j].push(D)},I.off=function(j,D){if(!this.listeners[j])return!1;var z=this.listeners[j].indexOf(D);return this.listeners[j]=this.listeners[j].slice(0),this.listeners[j].splice(z,1),z>-1},I.trigger=function(j){var D=this.listeners[j];if(!!D)if(arguments.length===2)for(var z=D.length,M=0;M<z;++M)D[M].call(this,arguments[1]);else for(var U=Array.prototype.slice.call(arguments,1),P=D.length,q=0;q<P;++q)D[q].apply(this,U)},I.dispose=function(){this.listeners={}},I.pipe=function(j){this.on("data",function(D){j.push(D)})},k}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function o(k){return k.subarray(0,k.byteLength-k[k.byteLength-1])}/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */var l=function(){var I=[[[],[],[],[],[]],[[],[],[],[],[]]],F=I[0],j=I[1],D=F[4],z=j[4],M,U,P,q=[],X=[],fe,te,ae,oe,Re,Le;for(M=0;M<256;M++)X[(q[M]=M<<1^(M>>7)*283)^M]=M;for(U=P=0;!D[U];U^=fe||1,P=X[P]||1)for(oe=P^P<<1^P<<2^P<<3^P<<4,oe=oe>>8^oe&255^99,D[U]=oe,z[oe]=U,ae=q[te=q[fe=q[U]]],Le=ae*16843009^te*65537^fe*257^U*16843008,Re=q[oe]*257^oe*16843008,M=0;M<4;M++)F[M][U]=Re=Re<<24^Re>>>8,j[M][oe]=Le=Le<<24^Le>>>8;for(M=0;M<5;M++)F[M]=F[M].slice(0),j[M]=j[M].slice(0);return I},c=null,u=function(){function k(F){c||(c=l()),this._tables=[[c[0][0].slice(),c[0][1].slice(),c[0][2].slice(),c[0][3].slice(),c[0][4].slice()],[c[1][0].slice(),c[1][1].slice(),c[1][2].slice(),c[1][3].slice(),c[1][4].slice()]];var j,D,z,M=this._tables[0][4],U=this._tables[1],P=F.length,q=1;if(P!==4&&P!==6&&P!==8)throw new Error("Invalid aes key size");var X=F.slice(0),fe=[];for(this._key=[X,fe],j=P;j<4*P+28;j++)z=X[j-1],(j%P===0||P===8&&j%P===4)&&(z=M[z>>>24]<<24^M[z>>16&255]<<16^M[z>>8&255]<<8^M[z&255],j%P===0&&(z=z<<8^z>>>24^q<<24,q=q<<1^(q>>7)*283)),X[j]=X[j-P]^z;for(D=0;j;D++,j--)z=X[D&3?j:j-4],j<=4||D<4?fe[D]=z:fe[D]=U[0][M[z>>>24]]^U[1][M[z>>16&255]]^U[2][M[z>>8&255]]^U[3][M[z&255]]}var I=k.prototype;return I.decrypt=function(j,D,z,M,U,P){var q=this._key[1],X=j^q[0],fe=M^q[1],te=z^q[2],ae=D^q[3],oe,Re,Le,ft=q.length/4-2,it,pt=4,Ht=this._tables[1],K=Ht[0],ve=Ht[1],ce=Ht[2],be=Ht[3],Ye=Ht[4];for(it=0;it<ft;it++)oe=K[X>>>24]^ve[fe>>16&255]^ce[te>>8&255]^be[ae&255]^q[pt],Re=K[fe>>>24]^ve[te>>16&255]^ce[ae>>8&255]^be[X&255]^q[pt+1],Le=K[te>>>24]^ve[ae>>16&255]^ce[X>>8&255]^be[fe&255]^q[pt+2],ae=K[ae>>>24]^ve[X>>16&255]^ce[fe>>8&255]^be[te&255]^q[pt+3],pt+=4,X=oe,fe=Re,te=Le;for(it=0;it<4;it++)U[(3&-it)+P]=Ye[X>>>24]<<24^Ye[fe>>16&255]<<16^Ye[te>>8&255]<<8^Ye[ae&255]^q[pt++],oe=X,X=fe,fe=te,te=ae,ae=oe},k}(),d=function(k){a(I,k);function I(){var j;return j=k.call(this,s)||this,j.jobs=[],j.delay=1,j.timeout_=null,j}var F=I.prototype;return F.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},F.push=function(D){this.jobs.push(D),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},I}(s),h=function(I){return I<<24|(I&65280)<<8|(I&16711680)>>8|I>>>24},p=function(I,F,j){var D=new Int32Array(I.buffer,I.byteOffset,I.byteLength>>2),z=new u(Array.prototype.slice.call(F)),M=new Uint8Array(I.byteLength),U=new Int32Array(M.buffer),P,q,X,fe,te,ae,oe,Re,Le;for(P=j[0],q=j[1],X=j[2],fe=j[3],Le=0;Le<D.length;Le+=4)te=h(D[Le]),ae=h(D[Le+1]),oe=h(D[Le+2]),Re=h(D[Le+3]),z.decrypt(te,ae,oe,Re,U,Le),U[Le]=h(U[Le]^P),U[Le+1]=h(U[Le+1]^q),U[Le+2]=h(U[Le+2]^X),U[Le+3]=h(U[Le+3]^fe),P=te,q=ae,X=oe,fe=Re;return M},b=function(){function k(F,j,D,z){var M=k.STEP,U=new Int32Array(F.buffer),P=new Uint8Array(F.byteLength),q=0;for(this.asyncStream_=new d,this.asyncStream_.push(this.decryptChunk_(U.subarray(q,q+M),j,D,P)),q=M;q<U.length;q+=M)D=new Uint32Array([h(U[q-4]),h(U[q-3]),h(U[q-2]),h(U[q-1])]),this.asyncStream_.push(this.decryptChunk_(U.subarray(q,q+M),j,D,P));this.asyncStream_.push(function(){z(null,o(P))})}var I=k.prototype;return I.decryptChunk_=function(j,D,z,M){return function(){var U=p(j,D,z);M.set(U,j.byteOffset)}},n(k,null,[{key:"STEP",get:function(){return 32e3}}]),k}(),w;typeof window!="undefined"?w=window:typeof t!="undefined"?w=t:typeof self!="undefined"?w=self:w={};var v=w,T=function(I){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(I):I&&I.buffer instanceof ArrayBuffer},E=v.BigInt||Number;E("0x1"),E("0x100"),E("0x10000"),E("0x1000000"),E("0x100000000"),E("0x10000000000"),E("0x1000000000000"),E("0x100000000000000"),E("0x10000000000000000");var A=function(I){var F={};return Object.keys(I).forEach(function(j){var D=I[j];T(D)?F[j]={bytes:D.buffer,byteOffset:D.byteOffset,byteLength:D.byteLength}:F[j]=D}),F};self.onmessage=function(k){var I=k.data,F=new Uint8Array(I.encrypted.bytes,I.encrypted.byteOffset,I.encrypted.byteLength),j=new Uint32Array(I.key.bytes,I.key.byteOffset,I.key.byteLength/4),D=new Uint32Array(I.iv.bytes,I.iv.byteOffset,I.iv.byteLength/4);new b(F,j,D,function(z,M){self.postMessage(A({source:I.source,decrypted:M}),[M.buffer])})}})),_Y=q2(wY),xY=function(e){var r=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(r="main-desc"),r},vf=function(e,r){e.abort(),e.pause(),r&&r.activePlaylistLoader&&(r.activePlaylistLoader.pause(),r.activePlaylistLoader=null)},Dv=function(e,r){r.activePlaylistLoader=e,e.load()},TY=function(e,r){return function(){var n=r.segmentLoaders,i=n[e],a=n.main,s=r.mediaTypes[e],o=s.activeTrack(),l=s.getActiveGroup(),c=s.activePlaylistLoader,u=s.lastGroup_;if(!(l&&u&&l.id===u.id)&&(s.lastGroup_=l,s.lastTrack_=o,vf(i,s),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){c&&a.resetEverything();return}i.resyncLoader(),Dv(l.playlistLoader,s)}}},SY=function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e];i.lastGroup_=null,n.abort(),n.pause()}},EY=function(e,r){return function(){var n=r.masterPlaylistLoader,i=r.segmentLoaders,a=i[e],s=i.main,o=r.mediaTypes[e],l=o.activeTrack(),c=o.getActiveGroup(),u=o.activePlaylistLoader,d=o.lastTrack_;if(!(d&&l&&d.id===l.id)&&(o.lastGroup_=c,o.lastTrack_=l,vf(a,o),!!c)){if(c.isMasterPlaylist){if(!l||!d||l.id===d.id)return;var h=r.vhs.masterPlaylistController_,p=h.selectPlaylist();if(h.media()===p)return;o.logger_("track change. Switching master audio from "+d.id+" to "+l.id),n.pause(),s.resetEverything(),h.fastQualityChange_(p);return}if(e==="AUDIO"){if(!c.playlistLoader){s.setAudio(!0),s.resetEverything();return}a.setAudio(!0),s.setAudio(!1)}if(u===c.playlistLoader){Dv(c.playlistLoader,o);return}a.track&&a.track(l),a.resetEverything(),Dv(c.playlistLoader,o)}}},yf={AUDIO:function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e],a=r.blacklistCurrentPlaylist;vf(n,i);var s=i.activeTrack(),o=i.activeGroup(),l=(o.filter(function(d){return d.default})[0]||o[0]).id,c=i.tracks[l];if(s===c){a({message:"Problem encountered loading the default audio track."});return}H.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var u in i.tracks)i.tracks[u].enabled=i.tracks[u]===c;i.onTrackChanged()}},SUBTITLES:function(e,r){return function(){var n=r.segmentLoaders[e],i=r.mediaTypes[e];H.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),vf(n,i);var a=i.activeTrack();a&&(a.mode="disabled"),i.onTrackChanged()}}},F1={AUDIO:function(e,r,n){if(!!r){var i=n.tech,a=n.requestOptions,s=n.segmentLoaders[e];r.on("loadedmetadata",function(){var o=r.media();s.playlist(o,a),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),a),i.paused()||s.load()}),r.on("error",yf[e](e,n))}},SUBTITLES:function(e,r,n){var i=n.tech,a=n.requestOptions,s=n.segmentLoaders[e],o=n.mediaTypes[e];r.on("loadedmetadata",function(){var l=r.media();s.playlist(l,a),s.track(o.activeTrack()),(!i.paused()||l.endList&&i.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),a),i.paused()||s.load()}),r.on("error",yf[e](e,n))}},kY={AUDIO:function(e,r){var n=r.vhs,i=r.sourceType,a=r.segmentLoaders[e],s=r.requestOptions,o=r.master.mediaGroups,l=r.mediaTypes[e],c=l.groups,u=l.tracks,d=l.logger_,h=r.masterPlaylistLoader,p=$u(h.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},p&&(o[e].main.default.playlists=h.master.playlists));for(var b in o[e]){c[b]||(c[b]=[]);for(var w in o[e][b]){var v=o[e][b][w],T=void 0;if(p?(d("AUDIO group '"+b+"' label '"+w+"' is a master playlist"),v.isMasterPlaylist=!0,T=null):i==="vhs-json"&&v.playlists?T=new lo(v.playlists[0],n,s):v.resolvedUri?T=new lo(v.resolvedUri,n,s):v.playlists&&i==="dash"?T=new Av(v.playlists[0],n,s,h):T=null,v=H.mergeOptions({id:w,playlistLoader:T},v),F1[e](e,v.playlistLoader,r),c[b].push(v),typeof u[w]=="undefined"){var E=new H.AudioTrack({id:w,kind:xY(v),enabled:!1,language:v.language,default:v.default,label:w});u[w]=E}}}a.on("error",yf[e](e,r))},SUBTITLES:function(e,r){var n=r.tech,i=r.vhs,a=r.sourceType,s=r.segmentLoaders[e],o=r.requestOptions,l=r.master.mediaGroups,c=r.mediaTypes[e],u=c.groups,d=c.tracks,h=r.masterPlaylistLoader;for(var p in l[e]){u[p]||(u[p]=[]);for(var b in l[e][p])if(!l[e][p][b].forced){var w=l[e][p][b],v=void 0;if(a==="hls")v=new lo(w.resolvedUri,i,o);else if(a==="dash"){var T=w.playlists.filter(function(A){return A.excludeUntil!==1/0});if(!T.length)return;v=new Av(w.playlists[0],i,o,h)}else a==="vhs-json"&&(v=new lo(w.playlists?w.playlists[0]:w.resolvedUri,i,o));if(w=H.mergeOptions({id:b,playlistLoader:v},w),F1[e](e,w.playlistLoader,r),u[p].push(w),typeof d[b]=="undefined"){var E=n.addRemoteTextTrack({id:b,kind:"subtitles",default:w.default&&w.autoselect,language:w.language,label:b},!1).track;d[b]=E}}}s.on("error",yf[e](e,r))},"CLOSED-CAPTIONS":function(e,r){var n=r.tech,i=r.master.mediaGroups,a=r.mediaTypes[e],s=a.groups,o=a.tracks;for(var l in i[e]){s[l]||(s[l]=[]);for(var c in i[e][l]){var u=i[e][l][c];if(!!/^(?:CC|SERVICE)/.test(u.instreamId)){var d=n.options_.vhs&&n.options_.vhs.captionServices||{},h={label:c,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(d[h.instreamId]&&(h=H.mergeOptions(h,d[h.instreamId])),h.default===void 0&&delete h.default,s[l].push(H.mergeOptions({id:c},u)),typeof o[c]=="undefined"){var p=n.addRemoteTextTrack({id:h.instreamId,kind:"captions",default:h.default,language:h.language,label:h.label},!1).track;o[c]=p}}}}}},CY=function t(e,r){for(var n=0;n<e.length;n++)if(Mb(r,e[n])||e[n].playlists&&t(e[n].playlists,r))return!0;return!1},AY=function(e,r){return function(n){var i=r.masterPlaylistLoader,a=r.mediaTypes[e].groups,s=i.media();if(!s)return null;var o=null;s.attributes[e]&&(o=a[s.attributes[e]]);var l=Object.keys(a);if(!o)if(e==="AUDIO"&&l.length>1&&$u(r.master))for(var c=0;c<l.length;c++){var u=a[l[c]];if(CY(u,s)){o=u;break}}else a.main?o=a.main:l.length===1&&(o=a[l[0]]);return typeof n=="undefined"?o:n===null||!o?null:o.filter(function(d){return d.id===n.id})[0]||null}},IY={AUDIO:function(e,r){return function(){var n=r.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,r){return function(){var n=r.mediaTypes[e].tracks;for(var i in n)if(n[i].mode==="showing"||n[i].mode==="hidden")return n[i];return null}}},PY=function(e,r){var n=r.mediaTypes;return function(){var i=n[e].activeTrack();return i?n[e].activeGroup(i):null}},OY=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){kY[b](b,e)});var r=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,a=e.vhs,s=e.segmentLoaders,o=s.AUDIO,l=s.main;["AUDIO","SUBTITLES"].forEach(function(b){r[b].activeGroup=AY(b,e),r[b].activeTrack=IY[b](b,e),r[b].onGroupChanged=TY(b,e),r[b].onGroupChanging=SY(b,e),r[b].onTrackChanged=EY(b,e),r[b].getActiveGroup=PY(b,e)});var c=r.AUDIO.activeGroup();if(c){var u=(c.filter(function(b){return b.default})[0]||c[0]).id;r.AUDIO.tracks[u].enabled=!0,r.AUDIO.onGroupChanged(),r.AUDIO.onTrackChanged();var d=r.AUDIO.getActiveGroup();d.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(b){return r[b].onGroupChanged()})}),n.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(b){return r[b].onGroupChanging()})});var h=function(){r.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",h),i.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged),a.on("dispose",function(){i.audioTracks().removeEventListener("change",h),i.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(var p in r.AUDIO.tracks)i.audioTracks().addTrack(r.AUDIO.tracks[p])},DY=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(r){e[r]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:yn,activeTrack:yn,getActiveGroup:yn,onGroupChanged:yn,onTrackChanged:yn,lastTrack_:null,logger_:Ri("MediaGroups["+r+"]")}}),e},LY=60*2,hn,RY=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],MY=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},NY=function(e){var r=e.currentPlaylist,n=e.buffered,i=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,l=e.duration,c=e.experimentalBufferBasedABR,u=e.log;if(!a)return H.log.warn("We received no playlist to switch to. Please check your stream."),!1;var d="allowing switch "+(r&&r.id||"null")+" -> "+a.id;if(!r)return u(d+" as current playlist is not set"),!0;if(a.id===r.id)return!1;var h=Boolean(oo(n,i).length);if(!r.endList)return!h&&typeof r.partTargetDuration=="number"?(u("not "+d+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(u(d+" as current playlist is live"),!0);var p=Db(n,i),b=c?Jt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Jt.MAX_BUFFER_LOW_WATER_LINE;if(l<b)return u(d+" as duration < max low water line ("+l+" < "+b+")"),!0;var w=a.attributes.BANDWIDTH,v=r.attributes.BANDWIDTH;if(w<v&&(!c||p<o)){var T=d+" as next bandwidth < current bandwidth ("+w+" < "+v+")";return c&&(T+=" and forwardBuffer < bufferHighWaterLine ("+p+" < "+o+")"),u(T),!0}if((!c||w>v)&&p>=s){var E=d+" as forwardBuffer >= bufferLowWaterLine ("+p+" >= "+s+")";return c&&(E+=" and next bandwidth > current bandwidth ("+w+" > "+v+")"),u(E),!0}return u("not "+d+" as no switching criteria met"),!1},jY=function(t){ge(e,t);function e(n){var i;i=t.call(this)||this;var a=n.src,s=n.handleManifestRedirects,o=n.withCredentials,l=n.tech,c=n.bandwidth,u=n.externVhs,d=n.useCueTags,h=n.blacklistDuration,p=n.enableLowInitialPlaylist,b=n.sourceType,w=n.cacheEncryptionKeys,v=n.experimentalBufferBasedABR,T=n.experimentalLeastPixelDiffSelector,E=n.captionServices;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");var A=n.maxPlaylistRetries;(A===null||typeof A=="undefined")&&(A=1/0),hn=u,i.experimentalBufferBasedABR=Boolean(v),i.experimentalLeastPixelDiffSelector=Boolean(T),i.withCredentials=o,i.tech_=l,i.vhs_=l.vhs,i.sourceType_=b,i.useCueTags_=d,i.blacklistDuration=h,i.maxPlaylistRetries=A,i.enableLowInitialPlaylist=p,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:A,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=DY(),i.mediaSource=new L.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(Ne(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Ne(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Ne(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=H.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new yY(n),i.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new _Y,i.sourceUpdater_=new sO(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new bY;var k={vhs:i.vhs_,parse708captions:n.parse708captions,useDtsForTimestampOffset:n.useDtsForTimestampOffset,captionServices:E,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:c,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:w,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:n.experimentalExactManifestTimings};i.masterPlaylistLoader_=i.sourceType_==="dash"?new Av(a,i.vhs_,i.requestOptions_):new lo(a,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Pv(H.mergeOptions(k,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new Pv(H.mergeOptions(k,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new pY(H.mergeOptions(k,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),n),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),RY.forEach(function(F){i[F+"_"]=MY.bind(Ne(i),F)}),i.logger_=Ri("MPC"),i.triggeredFmp4Usage=!1,i.tech_.preload()==="none"?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var I=i.tech_.preload()==="none"?"play":"loadstart";return i.tech_.one(I,function(){var F=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-F,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}var r=e.prototype;return r.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},r.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},r.appendsToLoadedData_=function(){var i=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return i===-1||a===-1?-1:i+a},r.timeToLoadedData_=function(){return this.timeToLoadedData__},r.checkABR_=function(){var i=this.selectPlaylist();i&&this.shouldSwitchToMedia_(i)&&this.switchMedia_(i,"abr")},r.switchMedia_=function(i,a,s){var o=this.media(),l=o&&(o.id||o.uri),c=i.id||i.uri;l&&l!==c&&(this.logger_("switch media "+l+" -> "+c+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(i,s)},r.startABRTimer_=function(){var i=this;this.stopABRTimer_(),this.abrTimer_=L.setInterval(function(){return i.checkABR_()},250)},r.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(L.clearInterval(this.abrTimer_),this.abrTimer_=null)},r.getAudioTrackPlaylists_=function(){var i=this.master(),a=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return a;var s=i.mediaGroups.AUDIO,o=Object.keys(s),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var c=s.main||o.length&&s[o[0]];for(var u in c)if(c[u].default){l={label:u};break}}if(!l)return a;var d=[];for(var h in s)if(s[h][l.label]){var p=s[h][l.label];if(p.playlists&&p.playlists.length)d.push.apply(d,p.playlists);else if(p.uri)d.push(p);else if(i.playlists.length)for(var b=0;b<i.playlists.length;b++){var w=i.playlists[b];w.attributes&&w.attributes.AUDIO&&w.attributes.AUDIO===h&&d.push(w)}}return d.length?d:a},r.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=i.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Tv(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,a.endList&&i.tech_.preload()!=="none"&&(i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load()),OY({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),a),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var a=i.masterPlaylistLoader_.media();if(!a){i.excludeUnsupportedVariants_();var s;if(i.enableLowInitialPlaylist&&(s=i.selectInitialPlaylist()),s||(s=i.selectPlaylist()),!s||!i.shouldSwitchToMedia_(s))return;i.initialMedia_=s,i.switchMedia_(i.initialMedia_,"initial");var o=i.sourceType_==="vhs-json"&&i.initialMedia_.segments;if(!o)return;a=i.initialMedia_}i.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=i.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Tv(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=i.masterPlaylistLoader_.media();if(a.lastExcludeReason_!=="playlist-unchanged"){var s=i.stuckAtPlaylistEnd_(a);s&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},r.handleUpdatedMediaPlaylist=function(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},r.triggerPresenceUsage_=function(i,a){var s=i.mediaGroups||{},o=!0,l=Object.keys(s.AUDIO);for(var c in s.AUDIO)for(var u in s.AUDIO[c]){var d=s.AUDIO[c][u];d.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),hn.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(s.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},r.shouldSwitchToMedia_=function(i){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),c=this.tech_.buffered();return NY({buffered:c,currentTime:s,currentPlaylist:a,nextPlaylist:i,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},r.setupSegmentLoaderListeners_=function(){var i=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var s=i.selectPlaylist();i.shouldSwitchToMedia_(s)&&i.switchMedia_(s,"bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},LY))});var a=function(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var o=i.getCodecsOrExclude_();!o||i.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},r.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},r.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},r.smoothQualityChange_=function(i){i===void 0&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},r.fastQualityChange_=function(i){var a=this;if(i===void 0&&(i=this.selectPlaylist()),i===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){H.browser.IE_VERSION||H.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())})},r.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0))return this.tech_.setCurrentTime(i.end(i.length-1))}},r.setupFirstPlay=function(){var i=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(H.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(s.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},r.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();typeof i!="undefined"&&typeof i.then=="function"&&i.then(null,function(a){})}this.trigger("sourceopen")},r.handleSourceEnded_=function(){if(!!this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(!(!i||!i.length)){var a=this.duration();i[i.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},r.handleDurationChange_=function(){this.tech_.trigger("durationchange")},r.onEndOfStream=function(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?i=i&&this.audioSegmentLoader_.ended_:i=this.audioSegmentLoader_.ended_}!i||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},r.stuckAtPlaylistEnd_=function(i){var a=this.seekable();if(!a.length)return!1;var s=this.syncController_.getExpiredTime(i,this.duration());if(s===null)return!1;var o=hn.Playlist.playlistEnd(i,s),l=this.tech_.currentTime(),c=this.tech_.buffered();if(!c.length)return o-l<=qi;var u=c.end(c.length-1);return u-l<=qi&&o-u<=qi},r.blacklistCurrentPlaylist=function(i,a){i===void 0&&(i={});var s=i.playlist||this.masterPlaylistLoader_.media();if(a=a||i.blacklistDuration||this.blacklistDuration,!s){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(Np),c=l.length===1&&l[0]===s;if(o.length===1&&a!==1/0)return H.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(c);if(c){var u=!1;o.forEach(function(T){if(T!==s){var E=T.excludeUntil;typeof E!="undefined"&&E!==1/0&&(u=!0,delete T.excludeUntil)}}),u&&(H.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var d;s.playlistErrors_>this.maxPlaylistRetries?d=1/0:d=Date.now()+a*1e3,s.excludeUntil=d,i.reason&&(s.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var h=this.selectPlaylist();if(!h){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var p=i.internal?this.logger_:H.log.warn,b=i.message?" "+i.message:"";p((i.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(b+" Switching to playlist "+h.id+".")),h.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),h.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var w=h.targetDuration/2*1e3||5*1e3,v=typeof h.lastRequest=="number"&&Date.now()-h.lastRequest<=w;return this.switchMedia_(h,"exclude",c||v)},r.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},r.delegateLoaders_=function(i,a){var s=this,o=[],l=i==="all";(l||i==="main")&&o.push(this.masterPlaylistLoader_);var c=[];(l||i==="audio")&&c.push("AUDIO"),(l||i==="subtitle")&&(c.push("CLOSED-CAPTIONS"),c.push("SUBTITLES")),c.forEach(function(u){var d=s.mediaTypes_[u]&&s.mediaTypes_[u].activePlaylistLoader;d&&o.push(d)}),["main","audio","subtitle"].forEach(function(u){var d=s[u+"SegmentLoader_"];d&&(i===u||i==="all")&&o.push(d)}),o.forEach(function(u){return a.forEach(function(d){typeof u[d]=="function"&&u[d]()})})},r.setCurrentTime=function(i){var a=oo(this.tech_.buffered(),i);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(a&&a.length)return i;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},r.duration=function(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:hn.Playlist.duration(i):1/0:0},r.seekable=function(){return this.seekable_},r.onSyncInfoUpdate_=function(){var i;if(!!this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(!!a){var s=this.syncController_.getExpiredTime(a,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,l=hn.Playlist.seekable(a,s,hn.Playlist.liveEdgeDelay(o,a));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(a,this.duration()),s===null||(i=hn.Playlist.seekable(a,s,hn.Playlist.liveEdgeDelay(o,a)),i.length===0)))){var c,u;this.seekable_&&this.seekable_.length&&(c=this.seekable_.end(0),u=this.seekable_.start(0)),i?i.start(0)>l.end(0)||l.start(0)>i.end(0)?this.seekable_=l:this.seekable_=H.createTimeRanges([[i.start(0)>l.start(0)?i.start(0):l.start(0),i.end(0)<l.end(0)?i.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===c&&this.seekable_.start(0)===u)&&(this.logger_("seekable updated ["+T2(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},r.updateDuration=function(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,i),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(i){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}var s=this.tech_.buffered(),o=hn.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},r.dispose=function(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s=i.mediaTypes_[a].groups;for(var o in s)s[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},r.master=function(){return this.masterPlaylistLoader_.master},r.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},r.areMediaTypesKnown_=function(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=i?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!s)},r.getCodecsOrExclude_=function(){var i=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};a.video=a.main;var s=yc(this.master(),this.media()),o={},l=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(o.video=s.video||a.main.videoCodec||pq),a.main.isMuxed&&(o.video+=","+(s.audio||a.main.audioCodec||xT)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||l)&&(o.audio=s.audio||a.main.audioCodec||a.audio.audioCodec||xT,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),!o.audio&&!o.video){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(v,T){return v?oh(T):jg(T)},u={},d;if(["video","audio"].forEach(function(w){if(o.hasOwnProperty(w)&&!c(a[w].isFmp4,o[w])){var v=a[w].isFmp4?"browser":"muxer";u[v]=u[v]||[],u[v].push(o[w]),w==="audio"&&(d=v)}}),l&&d&&this.media().attributes.AUDIO){var h=this.media().attributes.AUDIO;this.master().playlists.forEach(function(w){var v=w.attributes&&w.attributes.AUDIO;v===h&&w!==i.media()&&(w.excludeUntil=1/0)}),this.logger_("excluding audio group "+h+" as "+d+' does not support codec(s): "'+o.audio+'"')}if(Object.keys(u).length){var p=Object.keys(u).reduce(function(w,v){return w&&(w+=", "),w+=v+' does not support codec(s): "'+u[v].join(",")+'"',w},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:p,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var b=[];if(["video","audio"].forEach(function(w){var v=(Bi(i.sourceUpdater_.codecs[w]||"")[0]||{}).type,T=(Bi(o[w]||"")[0]||{}).type;v&&T&&v.toLowerCase()!==T.toLowerCase()&&b.push('"'+i.sourceUpdater_.codecs[w]+'" -> "'+o[w]+'"')}),b.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+b.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return o},r.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&!!this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(!!i){this.sourceUpdater_.createSourceBuffers(i);var a=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},r.excludeUnsupportedVariants_=function(){var i=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(o){var l=a[o];if(s.indexOf(l.id)===-1){s.push(l.id);var c=yc(i.master,l),u=[];c.audio&&!jg(c.audio)&&!oh(c.audio)&&u.push("audio codec "+c.audio),c.video&&!jg(c.video)&&!oh(c.video)&&u.push("video codec "+c.video),c.text&&c.text==="stpp.ttml.im1t"&&u.push("text codec "+c.text),u.length&&(l.excludeUntil=1/0,i.logger_("excluding "+l.id+" for unsupported: "+u.join(", ")))}})},r.excludeIncompatibleVariants_=function(i){var a=this,s=[],o=this.master().playlists,l=gf(Bi(i)),c=C1(l),u=l.video&&Bi(l.video)[0]||null,d=l.audio&&Bi(l.audio)[0]||null;Object.keys(o).forEach(function(h){var p=o[h];if(!(s.indexOf(p.id)!==-1||p.excludeUntil===1/0)){s.push(p.id);var b=[],w=yc(a.masterPlaylistLoader_.master,p),v=C1(w);if(!(!w.audio&&!w.video)){if(v!==c&&b.push('codec count "'+v+'" !== "'+c+'"'),!a.sourceUpdater_.canChangeType()){var T=w.video&&Bi(w.video)[0]||null,E=w.audio&&Bi(w.audio)[0]||null;T&&u&&T.type.toLowerCase()!==u.type.toLowerCase()&&b.push('video codec "'+T.type+'" !== "'+u.type+'"'),E&&d&&E.type.toLowerCase()!==d.type.toLowerCase()&&b.push('audio codec "'+E.type+'" !== "'+d.type+'"')}b.length&&(p.excludeUntil=1/0,a.logger_("blacklisting "+p.id+": "+b.join(" && ")))}}})},r.updateAdCues_=function(i){var a=0,s=this.seekable();s.length&&(a=s.start(0)),mY(i,this.cueTagsTrack_,a)},r.goalBufferLength=function(){var i=this.tech_.currentTime(),a=Jt.GOAL_BUFFER_LENGTH,s=Jt.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,Jt.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+i*s,o)},r.bufferLowWaterLine=function(){var i=this.tech_.currentTime(),a=Jt.BUFFER_LOW_WATER_LINE,s=Jt.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,Jt.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(a,Jt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+i*s,this.experimentalBufferBasedABR?l:o)},r.bufferHighWaterLine=function(){return Jt.BUFFER_HIGH_WATER_LINE},e}(H.EventTarget),FY=function(e,r,n){return function(i){var a=e.master.playlists[r],s=Rb(a),o=Np(a);return typeof i=="undefined"?o:(i?delete a.disabled:a.disabled=!0,i!==o&&!s&&(n(),i?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),i)}},BY=function(e,r,n){var i=e.masterPlaylistController_,a=e.options_.smoothQualityChange,s=a?"smooth":"fast",o=i[s+"QualityChange_"].bind(i);if(r.attributes){var l=r.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=r.attributes.BANDWIDTH}this.codecs=yc(i.master(),r),this.playlist=r,this.id=n,this.enabled=FY(e.playlists,r.id,o)},UY=function(e){e.representations=function(){var r=e.masterPlaylistController_.master(),n=$u(r)?e.masterPlaylistController_.getAudioTrackPlaylists_():r.playlists;return n?n.filter(function(i){return!Rb(i)}).map(function(i,a){return new BY(e,i,i.id)}):[]}},B1=["seeking","seeked","pause","playing","error"],zY=function(){function t(r){var n=this;this.masterPlaylistController_=r.masterPlaylistController,this.tech_=r.tech,this.seekable=r.seekable,this.allowSeeksWithinUnsafeLiveWindow=r.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=r.liveRangeSafeTimeDelta,this.media=r.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ri("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},a=function(){return n.monitorCurrentTime_()},s=function(){return n.techWaiting_()},o=function(){return n.cancelTimer_()},l=this.masterPlaylistController_,c=["main","subtitle","audio"],u={};c.forEach(function(h){u[h]={reset:function(){return n.resetSegmentDownloads_(h)},updateend:function(){return n.checkSegmentDownloads_(h)}},l[h+"SegmentLoader_"].on("appendsdone",u[h].updateend),l[h+"SegmentLoader_"].on("playlistupdate",u[h].reset),n.tech_.on(["seeked","seeking"],u[h].reset)});var d=function(p){["main","audio"].forEach(function(b){l[b+"SegmentLoader_"][p]("appended",n.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=function(){return d("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(B1,o),this.tech_.on("canplay",a),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",s),n.tech_.off(B1,o),n.tech_.off("canplay",a),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),c.forEach(function(h){l[h+"SegmentLoader_"].off("appendsdone",u[h].updateend),l[h+"SegmentLoader_"].off("playlistupdate",u[h].reset),n.tech_.off(["seeked","seeking"],u[h].reset)}),n.checkCurrentTimeTimeout_&&L.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}var e=t.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&L.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=L.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(n){var i=this.masterPlaylistController_[n+"SegmentLoader_"];this[n+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+n+" loader"),this[n+"StalledDownloads_"]=0,this[n+"Buffered_"]=i.buffered_()},e.checkSegmentDownloads_=function(n){var i=this.masterPlaylistController_,a=i[n+"SegmentLoader_"],s=a.buffered_(),o=NW(this[n+"Buffered_"],s);if(this[n+"Buffered_"]=s,o){this.resetSegmentDownloads_(n);return}this[n+"StalledDownloads_"]++,this.logger_("found #"+this[n+"StalledDownloads_"]+" "+n+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:as(s)}),!(this[n+"StalledDownloads_"]<10)&&(this.logger_(n+" loader stalled download exclusion"),this.resetSegmentDownloads_(n),this.tech_.trigger({type:"usage",name:"vhs-"+n+"-download-exclusion"}),n!=="subtitle"&&i.blacklistCurrentPlaylist({message:"Excessive "+n+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var n=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===n&&(!i.length||n+qi>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&n===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):n===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=n)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var n=this.tech_.seeking();if(!n)return!1;var i=this.seekable(),a=this.tech_.currentTime(),s=this.afterSeekableWindow_(i,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var l=i.end(i.length-1);o=l}if(this.beforeSeekableWindow_(i,a)){var c=i.start(0);o=c+(c===i.end(0)?0:qi)}if(typeof o!="undefined")return this.logger_("Trying to seek outside of seekable at time "+a+" with "+("seekable range "+T2(i)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var u=this.masterPlaylistController_.sourceUpdater_,d=this.tech_.buffered(),h=u.audioBuffer?u.audioBuffered():null,p=u.videoBuffer?u.videoBuffered():null,b=this.media(),w=b.partTargetDuration?b.partTargetDuration:(b.targetDuration-Sa)*2,v=[h,p],T=0;T<v.length;T++)if(!!v[T]){var E=Db(v[T],a);if(E<w)return!1}var A=zd(d,a);return A.length===0?!1:(o=A.start(0)+qi,this.logger_("Buffered region starts ("+A.start(0)+") "+(" just beyond seek point ("+a+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var n=this.tech_.currentTime(),i=this.tech_.buffered(),a=oo(i,n);if(a.length&&n+3<=a.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(n),this.logger_("Stopped at "+n+" while inside a buffered region "+("["+a.start(0)+" -> "+a.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var n=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(n,i)){var a=n.end(n.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:i});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var c=zd(o,i);if(c.length>0){var u=c.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+u+", seeking "+("to "+c.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),u*1e3,i),!0}return!1},e.afterSeekableWindow_=function(n,i,a,s){if(s===void 0&&(s=!1),!n.length)return!1;var o=n.end(n.length-1)+qi,l=!a.endList;return l&&s&&(o=n.end(n.length-1)+a.targetDuration*3),i>o},e.beforeSeekableWindow_=function(n,i){return!!(n.length&&n.start(0)>0&&i<n.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(n){var i=n.videoBuffered,a=n.audioBuffered,s=n.currentTime;if(!!i){var o;if(i.length&&a.length){var l=oo(i,s-3),c=oo(i,s),u=oo(a,s);u.length&&!c.length&&l.length&&(o={start:l.end(0),end:u.end(0)})}else{var d=zd(i,s);d.length||(o=this.gapFromVideoUnderflow_(i,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},e.skipTheGap_=function(n){var i=this.tech_.buffered(),a=this.tech_.currentTime(),s=zd(i,a);this.cancelTimer_(),!(s.length===0||a!==n)&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",n,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Sa),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(n,i){for(var a=LW(n),s=0;s<a.length;s++){var o=a.start(s),l=a.end(s);if(i-o<4&&i-o>2)return{start:o,end:l}}return null},t}(),$Y={errorInterval:30,getSource:function(e){var r=this.tech({IWillNotUseThisInPlugins:!0}),n=r.currentSource_||this.currentSource();return e(n)}},VY=function t(e,r){var n=0,i=0,a=H.mergeOptions($Y,r);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){i&&e.currentTime(i)},o=function(h){h!=null&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(h),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-n<a.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){H.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),a.getSource.call(e,o)},c=function d(){e.off("loadedmetadata",s),e.off("error",l),e.off("dispose",d)},u=function(h){c(),t(e,h)};e.on("error",l),e.on("dispose",c),e.reloadSourceOnError=u},HY=function(e){VY(this,e)},oO="2.14.3",qY="6.0.1",GY="0.21.1",WY="4.7.1",KY="3.1.3",cr={PlaylistLoader:lo,Playlist:Vr,utils:sK,STANDARD_PLAYLIST_SELECTOR:I1,INITIAL_PLAYLIST_SELECTOR:WK,lastBandwidthSelector:I1,movingAverageBandwidthSelector:qK,comparePlaylistBandwidth:Fb,comparePlaylistResolution:HK,xhr:F2()};Object.keys(Jt).forEach(function(t){Object.defineProperty(cr,t,{get:function(){return H.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),Jt[t]},set:function(r){if(H.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),typeof r!="number"||r<0){H.log.warn("value of Vhs."+t+" must be greater than or equal to 0");return}Jt[t]=r}})});var lO="videojs-vhs",cO=function(e,r){for(var n=r.media(),i=-1,a=0;a<e.length;a++)if(e[a].id===n.id){i=a;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},YY=function(e,r){r.representations().forEach(function(n){e.addQualityLevel(n)}),cO(e,r.playlists)};cr.canPlaySource=function(){return H.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var XY=function(e,r,n){if(!e)return e;var i={};r&&r.attributes&&r.attributes.CODECS&&(i=gf(Bi(r.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var a=Yc(i.video),s=Yc(i.audio),o={};for(var l in e)o[l]={},s&&(o[l].audioContentType=s),a&&(o[l].videoContentType=a),r.contentProtection&&r.contentProtection[l]&&r.contentProtection[l].pssh&&(o[l].pssh=r.contentProtection[l].pssh),typeof e[l]=="string"&&(o[l].url=e[l]);return H.mergeOptions(e,o)},QY=function(e,r){return e.reduce(function(n,i){if(!i.contentProtection)return n;var a=r.reduce(function(s,o){var l=i.contentProtection[o];return l&&l.pssh&&(s[o]={pssh:l.pssh}),s},{});return Object.keys(a).length&&n.push(a),n},[])},JY=function(e){var r=e.player,n=e.sourceKeySystems,i=e.audioMedia,a=e.mainPlaylists;if(!r.eme.initializeMediaKeys)return Promise.resolve();var s=i?a.concat([i]):a,o=QY(s,Object.keys(n)),l=[],c=[];return o.forEach(function(u){c.push(new Promise(function(d,h){r.tech_.one("keysessioncreated",d)})),l.push(new Promise(function(d,h){r.eme.initializeMediaKeys({keySystems:u},function(p){if(p){h(p);return}d()})}))}),Promise.race([Promise.all(l),Promise.race(c)])},ZY=function(e){var r=e.player,n=e.sourceKeySystems,i=e.media,a=e.audioMedia,s=XY(n,i,a);return s?(r.currentSource().keySystems=s,s&&!r.eme?(H.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},uO=function(){if(!L.localStorage)return null;var e=L.localStorage.getItem(lO);if(!e)return null;try{return JSON.parse(e)}catch{return null}},eX=function(e){if(!L.localStorage)return!1;var r=uO();r=r?H.mergeOptions(r,e):e;try{L.localStorage.setItem(lO,JSON.stringify(r))}catch{return!1}return r},tX=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};cr.supportsNativeHls=function(){if(!le||!le.createElement)return!1;var t=le.createElement("video");if(!H.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(r){return/maybe|probably/i.test(t.canPlayType(r))})}();cr.supportsNativeDash=function(){return!le||!le.createElement||!H.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(le.createElement("video").canPlayType("application/dash+xml"))}();cr.supportsTypeNatively=function(t){return t==="hls"?cr.supportsNativeHls:t==="dash"?cr.supportsNativeDash:!1};cr.isSupported=function(){return H.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var rX=H.getComponent("Component"),Ub=function(t){ge(e,t);function e(n,i,a){var s;if(s=t.call(this,i,H.mergeOptions(a.hls,a.vhs))||this,a.hls&&Object.keys(a.hls).length&&H.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof a.initialBandwidth=="number"&&(s.options_.bandwidth=a.initialBandwidth),s.logger_=Ri("VhsHandler"),i.options_&&i.options_.playerId){var o=H(i.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return H.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Ne(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return H.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Ne(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return H.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ne(s)},configurable:!0}),s.player_=o}if(s.tech_=i,s.source_=n,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(le,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var c=le.fullscreenElement||le.webkitFullscreenElement||le.mozFullScreenElement||le.msFullscreenElement;c&&c.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var r=e.prototype;return r.setOptions_=function(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var a=uO();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Jt.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Jt.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof i.source_[s]!="undefined"&&(i.options_[s]=i.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},r.src=function(i,a){var s=this;if(!!i){this.setOptions_(),this.options_.src=tX(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=cr,this.options_.sourceType=SI(a),this.options_.seekTo=function(c){s.tech_.setCurrentTime(c)},this.options_.smoothQualityChange&&H.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new jY(this.options_);var o=H.mergeOptions({liveRangeSafeTimeDelta:qi},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new zY(o),this.masterPlaylistController_.on("error",function(){var c=H.players[s.tech_.options_.playerId],u=s.masterPlaylistController_.error;typeof u=="object"&&!u.code?u.code=3:typeof u=="string"&&(u={message:u,code:3}),c.error(u)});var l=this.options_.experimentalBufferBasedABR?cr.movingAverageBandwidthSelector(.55):cr.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=cr.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(u){this.masterPlaylistController_.selectPlaylist=u.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(u){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=u,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var u=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,d=L.navigator.connection||L.navigator.mozConnection||L.navigator.webkitConnection,h=1e7;if(this.options_.useNetworkInformationApi&&d){var p=d.downlink*1e3*1e3;p>=h&&u>=h?u=Math.max(u,p):u=p}return u},set:function(u){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=u,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var u=1/(this.bandwidth||1),d;this.throughput>0?d=1/this.throughput:d=0;var h=Math.floor(1/(u+d));return h},set:function(){H.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return as(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return as(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&eX({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){UY(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=L.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},r.createKeySessions_=function(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),JY({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){i.logger_("error while creating EME key session",s),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})},r.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},r.setupEme_=function(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=ZY({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=i.masterPlaylistController_.master();if(!(!l||!l.playlists)){var c=[];if(l.playlists.forEach(function(d){d&&d.attributes&&d.attributes.RESOLUTION&&d.attributes.RESOLUTION.height>=720&&(!d.excludeUntil||d.excludeUntil<1/0)&&(d.excludeUntil=1/0,c.push(d))}),c.length){var u;(u=H.log).warn.apply(u,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(c)),i.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),H.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},r.setupQualityLevels_=function(){var i=this,a=H.players[this.tech_.options_.playerId];!a||!a.qualityLevels||this.qualityLevels_||(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){YY(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){cO(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":oO,"mux.js":qY,"mpd-parser":GY,"m3u8-parser":WY,"aes-decrypter":KY}},r.version=function(){return this.constructor.version()},r.canChangeType=function(){return sO.canChangeType()},r.play=function(){this.masterPlaylistController_.play()},r.setCurrentTime=function(i){this.masterPlaylistController_.setCurrentTime(i)},r.duration=function(){return this.masterPlaylistController_.duration()},r.seekable=function(){return this.masterPlaylistController_.seekable()},r.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&L.URL.revokeObjectURL&&(L.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),t.prototype.dispose.call(this)},r.convertToProgramTime=function(i,a){return fK({playlist:this.masterPlaylistController_.media(),time:i,callback:a})},r.seekToProgramTime=function(i,a,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),pK({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},e}(rX),jp={name:"videojs-http-streaming",VERSION:oO,canHandleSource:function(e,r){r===void 0&&(r={});var n=H.mergeOptions(H.options,r);return jp.canPlayType(e.type,n)},handleSource:function(e,r,n){n===void 0&&(n={});var i=H.mergeOptions(H.options,n);return r.vhs=new Ub(e,r,i),H.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return H.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),r.vhs},configurable:!0}),r.vhs.xhr=F2(),r.vhs.src(e.src,e.type),r.vhs},canPlayType:function(e,r){r===void 0&&(r={});var n=H.mergeOptions(H.options,r),i=n.vhs;i=i===void 0?{}:i;var a=i.overrideNative,s=a===void 0?!H.browser.IS_ANY_SAFARI:a,o=n.hls;o=o===void 0?{}:o;var l=o.overrideNative,c=l===void 0?!1:l,u=SI(e),d=u&&(!cr.supportsTypeNatively(u)||c||s);return d?"maybe":""}},iX=function(){return oh("avc1.4d400d,mp4a.40.2")};iX()&&H.getTech("Html5").registerSourceHandler(jp,0);H.VhsHandler=Ub;Object.defineProperty(H,"HlsHandler",{get:function(){return H.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Ub},configurable:!0});H.VhsSourceHandler=jp;Object.defineProperty(H,"HlsSourceHandler",{get:function(){return H.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),jp},configurable:!0});H.Vhs=cr;Object.defineProperty(H,"Hls",{get:function(){return H.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),cr},configurable:!0});H.use||(H.registerComponent("Hls",cr),H.registerComponent("Vhs",cr));H.options.vhs=H.options.vhs||{};H.options.hls=H.options.hls||{};if(!H.getPlugin||!H.getPlugin("reloadSourceOnError")){var nX=H.registerPlugin||H.plugin;nX("reloadSourceOnError",HY)}const aX={name:"VideoPlayer",props:{options:{type:Object,default(){return{}}}},data(){return{player:null}},mounted(){this.player=H(this.$refs.videoPlayer,this.options,()=>{this.player.log("onPlayerReady",this)})},beforeDestroy(){this.player&&this.player.dispose()}},sX={ref:"videoPlayer",class:"video-js"};function oX(t,e,r,n,i,a){return Xe(),Xt("div",null,[he("video",sX,null,512)])}var lX=h0(aX,[["render",oX]]);const cX={name:"VideoExample",components:{VideoPlayer:lX},data(){return{videoOptions:{autoplay:"muted",controls:!1,loop:!0,sources:[{src:"https://firebasestorage.googleapis.com/v0/b/thecinemat-3606a.appspot.com/o/incoherenceWebsiteMP4.mp4?alt=media&token=9fa7e0a1-52d0-420d-a2f0-0d9240b1e386",type:"video/mp4"}]}}}},uX={class:"swiper-slide"},dX={class:"card absolute w-50 bottom-5 left-[570px] bg-primary text-primary-content"},hX=he("div",{class:"card-body p-4"},[he("h1",{class:"card-title italic text-md"},"Incoherence"),he("p",{class:"text-xs"},"Dir. Emily Rodriguez")],-1),fX=[hX];function pX(t,e,r,n,i,a){const s=kc("video-player"),o=kc("swiper"),l=wR("auto-animate");return Xe(),Gt(o,{slidesPerView:"auto",spaceBetween:30,pagination:{clickable:!0},autoplay:{delay:2500,disableOnInteraction:!1},modules:t.modules,class:"mySwiper"},{default:Je(()=>[he("div",uX,[xe(s,{options:i.videoOptions},null,8,["options"]),yR((Xe(),Xt("div",dX,fX)),[[l]])])]),_:1},8,["modules"])}var gX=h0(cX,[["render",pX]]);var mX="/theCinemat/assets/annelise+camera.bdc1e8de.jpg",vX="/theCinemat/assets/charlie+Jonas.6d67ce13.jpg",yX="/theCinemat/assets/ciara+slate-1.b95d9912.jpg",bX="/theCinemat/assets/eli+slate.76c3d49a.jpg",wX="/theCinemat/assets/Emily+light.37062a7c.jpg",_X="/theCinemat/assets/Renee+looking+at+monitor.e5d317a7.jpg";const xX={components:{Swiper:l7,SwiperSlide:c7},setup(){return{onSwiper:r=>{console.log(r)},onSlideChange:()=>{console.log("slide change")},modules:[QH,JH,ZH,e7,t7]}}},TX=he("img",{src:mX},null,-1),SX=he("img",{src:vX},null,-1),EX=he("img",{src:yX},null,-1),kX=he("img",{src:bX},null,-1),CX=he("img",{src:wX},null,-1),AX=he("img",{src:_X},null,-1);function IX(t,e,r,n,i,a){const s=kc("swiper-slide"),o=kc("swiper");return Xe(),Gt(o,{modules:n.modules,"slides-per-view":"auto","space-between":50,loop:!0,autoplay:{delay:2500,disableOnInteraction:!1},onSwiper:n.onSwiper,onSlideChange:n.onSlideChange},{default:Je(()=>[xe(s,{class:"swiper-slide"},{default:Je(()=>[TX]),_:1}),xe(s,{class:"swiper-slide"},{default:Je(()=>[SX]),_:1}),xe(s,{class:"swiper-slide"},{default:Je(()=>[EX]),_:1}),xe(s,{class:"swiper-slide"},{default:Je(()=>[kX]),_:1}),xe(s,{class:"swiper-slide"},{default:Je(()=>[CX]),_:1}),xe(s,{class:"swiper-slide"},{default:Je(()=>[AX]),_:1})]),_:1},8,["modules","onSwiper","onSlideChange"])}var PX=h0(xX,[["render",IX]]);const OX={class:"relative bg-gray-50 overflow-hidden"},DX=ou('<div class="block absolute inset-y-0 h-full w-full" aria-hidden="true"><div class="relative h-full max-w-7xl mx-auto"><svg class="absolute right-full transform translate-y-1/4 translate-x-1/4 lg:translate-x-1/2" width="404" height="784" fill="none" viewBox="0 0 404 784"><defs><pattern id="f210dbf6-a58d-4871-961e-36d5016a0f49" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect x="0" y="0" width="4" height="4" class="text-gray-200" fill="currentColor"></rect></pattern></defs><rect width="404" height="784" fill="url(#f210dbf6-a58d-4871-961e-36d5016a0f49)"></rect></svg><svg class="absolute left-full transform -translate-y-3/4 -translate-x-1/4 md:-translate-y-1/2 lg:-translate-x-1/2" width="404" height="784" fill="none" viewBox="0 0 404 784"><defs><pattern id="5d0dd344-b041-4d26-bec4-8d33ea57ec9b" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect x="0" y="0" width="4" height="4" class="text-gray-200" fill="currentColor"></rect></pattern></defs><rect width="404" height="784" fill="url(#5d0dd344-b041-4d26-bec4-8d33ea57ec9b)"></rect></svg></div></div>',1),LX={class:"relative"},RX={class:"flex flex-row flex-wrap justify-center lg:justify-start lg:flex-nowrap min-h-[1000px] lg:min-h-[500px]"},MX=ou('<main class="absolute z-20 mt-16 px-12 sm:px-4 sm:mt-24 max-w-xl lg:ml-16 xl:ml-36 pt-6 pb-16 sm:pb-24"><div class="text-center"><h1 class=""><img class="block xl:inline" src="'+K$+'" alt=""></h1><p class="pt-6 mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">Yale University\u2019s only student-led production company with the mission to provide a hands-on education in the craft of filmmaking.</p><div class="mt-5 max-w-md mx-auto sm:flex sm:justify-center md:mt-8"><div class="rounded-md shadow"><a href="#" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-light hover:bg-primary md:py-4 md:text-lg md:px-10"> Join a set </a></div><div class="mt-3 rounded-md shadow sm:mt-0 sm:ml-3"><a href="#" class="w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-primary-light bg-white hover:bg-gray-50 md:py-4 md:text-lg md:px-10"> Attend a workshop </a></div></div></div></main><div class="flex-1 dummylol"></div>',2),NX={class:"flex flex-1 lg:w-1/2"},jX=he("div",null,[he("svg",{class:"hidden lg:block absolute z-10 h-full w-40 text-gray-50",fill:"currentColor",viewBox:"0 0 100 100",preserveAspectRatio:"none","aria-hidden":"true"},[he("polygon",{points:"0,0 100,0 50,100 0,100"})]),he("svg",{class:"hidden lg:block absolute z-10 h-full w-40 text-gray-50",fill:"currentColor",viewBox:"0 0 100 100",preserveAspectRatio:"none","aria-hidden":"true"},[he("polygon",{points:"50,0 100,0 50,100 0,100"})])],-1),FX={class:"mt-12 sm:mt-0 lg:mx-auto lg:grid lg:max-w-7xl lg:grid-cols-2 lg:items-start lg:gap-24 lg:px-8"},BX={class:"relative sm:py-16 lg:py-0"},UX=ou('<div aria-hidden="true" class="hidden sm:block lg:absolute lg:inset-y-0 lg:right-0 lg:w-screen"><div class="absolute inset-y-0 right-1/2 w-full rounded-r-3xl bg-gray-50 lg:right-72"></div><svg class="absolute top-8 left-1/2 -ml-3 lg:-right-8 lg:left-auto lg:top-12" width="404" height="392" fill="none" viewBox="0 0 404 392"><defs><pattern id="02f20b47-fd69-4224-a62a-4c9de5c763f7" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect x="0" y="0" width="4" height="4" class="text-gray-200" fill="currentColor"></rect></pattern></defs><rect width="404" height="392" fill="url(#02f20b47-fd69-4224-a62a-4c9de5c763f7)"></rect></svg></div>',1),zX={class:"relative mx-auto max-w-md px-6 sm:max-w-3xl lg:max-w-none lg:px-0 lg:py-20"},$X={class:"z-10 relative overflow-hidden rounded-2xl shadow-xl"},VX=ou('<div class="relative mx-auto max-w-md px-6 sm:max-w-3xl lg:px-0"><div class="pt-12 sm:pt-0 lg:pt-20"><h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">On a mission to empower students</h2><div class="mt-6 space-y-6 text-gray-500"><p class="text-lg">The Cinemat is more than a student organization. It\u2019s a social enterprise.</p><p class="text-base leading-7">Our model prioritizes mentorship, community, and kindness. The base of our programming starts around technical workshops, providing educational equity to all our members.</p><p class="text-base leading-7">As members increase their technical skills, our programming expands to provide on-set opportunities through the production of narrative short films. Members get hands-on experience working on a film set and get the opportunity to participate on our own the 24-hour film festival.</p><p class="text-base leading-7">We also collaborate with local non-profits to create videos that raise awareness about important social issues. This provides members with an opportunity to apply their technical skills to make a positive impact on the community while also learning about the non-profits&#39; mission.</p><p class="text-base leading-7">Want to join the movement? </p></div></div><div class="mt-10"><div class="mt-10"><a href="/about" class="text-lg font-medium text-indigo-600"> Learn more about membership <span aria-hidden="true"> \u2192</span></a></div></div></div>',1),HX=he("div",{class:"relative bg-gray-50 sm:py-6"},null,-1),qX={__name:"HomeView",setup(t){return(e,r)=>(Xe(),Xt(Ct,null,[he("div",OX,[DX,he("div",LX,[he("div",RX,[MX,he("div",NX,[jX,he("div",null,[xe(gX,{class:"w-screen"})])])])]),he("div",FX,[he("div",BX,[UX,he("div",zX,[he("div",$X,[xe(PX,{class:"z-0"})])])]),VX])]),HX],64))}},GX=zN({history:nN("/theCinemat/"),routes:[{path:"/:pathMatch(.*)*",component:()=>li(()=>import("./PathNotFoundView.0f35766d.js"),[])},{path:"/",name:"home",component:qX},{path:"/about",name:"about",component:()=>li(()=>import("./AboutView.e920da36.js"),[])},{path:"/projects",name:"projects",component:()=>li(()=>import("./AllProjects.59c60a52.js"),["assets/AllProjects.59c60a52.js","assets/disclosure.a1f52892.js"])},{path:"/opportunities/filmmakers",name:"opportunitiesFilmmakers",component:()=>li(()=>import("./OpportunitiesFilmmakersView.0f768810.js"),["assets/OpportunitiesFilmmakersView.0f768810.js","assets/OpportunitiesFilmmakersView.c5b14b29.css"])},{path:"/opportunities/actors",name:"opportunitiesActors",component:()=>li(()=>import("./OpportunitiesActorsView.37d6eeba.js"),[])},{path:"/screenings",name:"screenings",component:()=>li(()=>import("./ScreeningsView.ac152e3c.js"),[])},{path:"/events",name:"events",component:()=>li(()=>import("./EventsView.7e7e61b8.js"),[])},{path:"/resources",name:"resources",component:()=>li(()=>import("./StudentResourcesView.e79a58fa.js"),["assets/StudentResourcesView.e79a58fa.js","assets/disclosure.a1f52892.js"])},{path:"/create",name:"create",component:()=>li(()=>import("./CreateView.60fafd08.js"),[]),beforeEnter:t=>ga.getters.user.loggedIn===!1?(alert("Log-in with your netId!"),{name:"home"}):!0},{path:"/edit",name:"edit",component:()=>li(()=>import("./EditView.55190f87.js"),[]),beforeEnter:t=>ga.getters.user.loggedIn===!1?(alert("Log-in with your netId!"),{name:"home"}):!0},{path:"/edit/:id",name:"EditOne",props:!0,component:()=>li(()=>import("./EditOneView.1ceeca9d.js"),[]),beforeEnter:t=>ga.getters.user.loggedIn===!1?(alert("Log-in with your netId!"),{name:"home"}):!0},{path:"/test",name:"test",component:()=>li(()=>import("./TestView.b984e108.js"),[])}]}),dO=new Set,Hr=new WeakMap,xo=new WeakMap,ks=new WeakMap,Lv=new WeakMap,WX=new WeakMap,Wo=new WeakMap,bf=new WeakMap,ec=new WeakSet;let Ea;const xn="__aa_tgt",Rv="__aa_del",KX=t=>{const e=ZX(t);e&&e.forEach(r=>eQ(r))},YX=t=>{t.forEach(e=>{e.target===Ea&&QX(),Hr.has(e.target)&&Ns(e.target)})};function XX(t){const e=Lv.get(t);e==null||e.disconnect();let r=Hr.get(t),n=0;const i=5;r||(r=Ko(t),Hr.set(t,r));const{offsetWidth:a,offsetHeight:s}=Ea,l=[r.top-i,a-(r.left+i+r.width),s-(r.top+i+r.height),r.left-i].map(u=>`${-1*Math.floor(u)}px`).join(" "),c=new IntersectionObserver(()=>{++n>1&&Ns(t)},{root:Ea,threshold:1,rootMargin:l});c.observe(t),Lv.set(t,c)}function Ns(t){clearTimeout(bf.get(t));const e=Fp(t),r=typeof e=="function"?500:e.duration;bf.set(t,setTimeout(async()=>{const n=ks.get(t);(!n||await n.finished)&&(Hr.set(t,Ko(t)),XX(t))},r))}function QX(){clearTimeout(bf.get(Ea)),bf.set(Ea,setTimeout(()=>{dO.forEach(t=>gO(t,e=>hO(()=>Ns(e))))},100))}function JX(t){setTimeout(()=>{WX.set(t,setInterval(()=>hO(Ns.bind(null,t)),2e3))},Math.round(2e3*Math.random()))}function hO(t){typeof requestIdleCallback=="function"?requestIdleCallback(()=>t()):requestAnimationFrame(()=>t())}let Mv,co;typeof window!="undefined"&&(Ea=document.documentElement,Mv=new MutationObserver(KX),co=new ResizeObserver(YX),co.observe(Ea));function ZX(t){return t.reduce((n,i)=>[...n,...Array.from(i.addedNodes),...Array.from(i.removedNodes)],[]).every(n=>n.nodeName==="#comment")?!1:t.reduce((n,i)=>{if(n===!1)return!1;if(i.target instanceof Element){if(rm(i.target),!n.has(i.target)){n.add(i.target);for(let a=0;a<i.target.children.length;a++){const s=i.target.children.item(a);if(!!s){if(Rv in s)return!1;rm(i.target,s),n.add(s)}}}if(i.removedNodes.length)for(let a=0;a<i.removedNodes.length;a++){const s=i.removedNodes[a];if(Rv in s)return!1;s instanceof Element&&(n.add(s),rm(i.target,s),xo.set(s,[i.previousSibling,i.nextSibling]))}}return n},new Set)}function rm(t,e){!e&&!(xn in t)?Object.defineProperty(t,xn,{value:t}):e&&!(xn in e)&&Object.defineProperty(e,xn,{value:t})}function eQ(t){var e;const r=Ea.contains(t),n=Hr.has(t);r&&xo.has(t)&&xo.delete(t),ks.has(t)&&((e=ks.get(t))===null||e===void 0||e.cancel()),n&&r?tQ(t):n&&!r?iQ(t):rQ(t)}function Fi(t){return Number(t.replace(/[^0-9.\-]/g,""))}function Ko(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX,width:e.width,height:e.height}}function fO(t,e,r){let n=e.width,i=e.height,a=r.width,s=r.height;const o=getComputedStyle(t);if(o.getPropertyValue("box-sizing")==="content-box"){const c=Fi(o.paddingTop)+Fi(o.paddingBottom)+Fi(o.borderTopWidth)+Fi(o.borderBottomWidth),u=Fi(o.paddingLeft)+Fi(o.paddingRight)+Fi(o.borderRightWidth)+Fi(o.borderLeftWidth);n-=u,a-=u,i-=c,s-=c}return[n,a,i,s].map(Math.round)}function Fp(t){return xn in t&&Wo.has(t[xn])?Wo.get(t[xn]):{duration:250,easing:"ease-in-out"}}function pO(t){if(xn in t)return t[xn]}function zb(t){const e=pO(t);return e?ec.has(e):!1}function gO(t,...e){e.forEach(r=>r(t,Wo.has(t)));for(let r=0;r<t.children.length;r++){const n=t.children.item(r);n&&e.forEach(i=>i(n,Wo.has(n)))}}function tQ(t){const e=Hr.get(t),r=Ko(t);if(!zb(t))return Hr.set(t,r);let n;if(!e)return;const i=Fp(t);if(typeof i!="function"){const a=e.left-r.left,s=e.top-r.top,[o,l,c,u]=fO(t,e,r),d={transform:`translate(${a}px, ${s}px)`},h={transform:"translate(0, 0)"};o!==l&&(d.width=`${o}px`,h.width=`${l}px`),c!==u&&(d.height=`${c}px`,h.height=`${u}px`),n=t.animate([d,h],{duration:i.duration,easing:i.easing})}else n=new Animation(i(t,"remain",e,r)),n.play();ks.set(t,n),Hr.set(t,r),n.addEventListener("finish",Ns.bind(null,t))}function rQ(t){const e=Ko(t);Hr.set(t,e);const r=Fp(t);if(!zb(t))return;let n;typeof r!="function"?n=t.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:r.duration*1.5,easing:"ease-in"}):(n=new Animation(r(t,"add",e)),n.play()),ks.set(t,n),n.addEventListener("finish",Ns.bind(null,t))}function iQ(t){var e;if(!xo.has(t)||!Hr.has(t))return;const[r,n]=xo.get(t);Object.defineProperty(t,Rv,{value:!0}),n&&n.parentNode&&n.parentNode instanceof Element?n.parentNode.insertBefore(t,n):r&&r.parentNode?r.parentNode.appendChild(t):(e=pO(t))===null||e===void 0||e.appendChild(t);function i(){var h;t.remove(),Hr.delete(t),xo.delete(t),ks.delete(t),(h=Lv.get(t))===null||h===void 0||h.disconnect()}if(!zb(t))return i();const[a,s,o,l]=nQ(t),c=Fp(t),u=Hr.get(t);let d;Object.assign(t.style,{position:"absolute",top:`${a}px`,left:`${s}px`,width:`${o}px`,height:`${l}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof c!="function"?d=t.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:c.duration,easing:"ease-out"}):(d=new Animation(c(t,"remove",u)),d.play()),ks.set(t,d),d.addEventListener("finish",i)}function nQ(t){const e=Hr.get(t),[r,,n]=fO(t,e,Ko(t));let i=t.parentElement;for(;i&&(getComputedStyle(i).position==="static"||i instanceof HTMLBodyElement);)i=i.parentElement;i||(i=document.body);const a=getComputedStyle(i),s=Hr.get(i)||Ko(i),o=Math.round(e.top-s.top)-Fi(a.borderTopWidth),l=Math.round(e.left-s.left)-Fi(a.borderLeftWidth);return[o,l,r,n]}function aQ(t,e={}){return Mv&&co&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&typeof e!="function"&&!e.disrespectUserMotionPreference||(ec.add(t),getComputedStyle(t).position==="static"&&Object.assign(t.style,{position:"relative"}),gO(t,Ns,JX,i=>co==null?void 0:co.observe(i)),typeof e=="function"?Wo.set(t,e):Wo.set(t,{duration:250,easing:"ease-in-out",...e}),Mv.observe(t,{childList:!0}),dO.add(t))),Object.freeze({parent:t,enable:()=>{ec.add(t)},disable:()=>{ec.delete(t)},isEnabled:()=>ec.has(t)})}const sQ={mounted:(t,e)=>{aQ(t,e.value||{})}},oQ={install(t){t.directive("auto-animate",sQ)}};const Nv={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:()=>{},onClose:()=>{},onToggle:()=>{}};class mO{constructor(e=[],r={}){this._items=e,this._options={...Nv,...r},this._init()}_init(){this._items.length&&this._items.map(e=>{e.active&&this.open(e.id),e.triggerEl.addEventListener("click",()=>{this.toggle(e.id)})})}getItem(e){return this._items.filter(r=>r.id===e)[0]}open(e){const r=this.getItem(e);this._options.alwaysOpen||this._items.map(n=>{n!==r&&(n.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),n.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),n.targetEl.classList.add("hidden"),n.triggerEl.setAttribute("aria-expanded",!1),n.active=!1,n.iconEl&&n.iconEl.classList.remove("rotate-180"))}),r.triggerEl.classList.add(...this._options.activeClasses.split(" ")),r.triggerEl.classList.remove(...this._options.inactiveClasses.split(" ")),r.triggerEl.setAttribute("aria-expanded",!0),r.targetEl.classList.remove("hidden"),r.active=!0,r.iconEl&&r.iconEl.classList.add("rotate-180"),this._options.onOpen(this,r)}toggle(e){const r=this.getItem(e);r.active?this.close(e):this.open(e),this._options.onToggle(this,r)}close(e){const r=this.getItem(e);r.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),r.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),r.targetEl.classList.add("hidden"),r.triggerEl.setAttribute("aria-expanded",!1),r.active=!1,r.iconEl&&r.iconEl.classList.remove("rotate-180"),this._options.onClose(this,r)}}window.Accordion=mO;function lQ(){document.querySelectorAll("[data-accordion]").forEach(t=>{const e=t.getAttribute("data-accordion"),r=t.getAttribute("data-active-classes"),n=t.getAttribute("data-inactive-classes"),i=[];t.querySelectorAll("[data-accordion-target]").forEach(a=>{const s={id:a.getAttribute("data-accordion-target"),triggerEl:a,targetEl:document.querySelector(a.getAttribute("data-accordion-target")),iconEl:a.querySelector("[data-accordion-icon]"),active:a.getAttribute("aria-expanded")==="true"};i.push(s)}),new mO(i,{alwaysOpen:e==="open",activeClasses:r||Nv.activeClasses,inactiveClasses:n||Nv.inactiveClasses})})}const U1={triggerEl:null,onCollapse:()=>{},onExpand:()=>{},onToggle:()=>{}};class vO{constructor(e=null,r={}){this._targetEl=e,this._triggerEl=r.triggerEl||U1.triggerEl,this._options={...U1,...r},this._visible=!1,this._init()}_init(){this._triggerEl&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._triggerEl.addEventListener("click",()=>{this._visible?this.collapse():this.expand()}))}collapse(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)}expand(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)}toggle(){this._visible?this.collapse():this.expand()}}window.Collapse=vO;function cQ(){document.querySelectorAll("[data-collapse-toggle]").forEach(t=>{const e=document.getElementById(t.getAttribute("data-collapse-toggle"));!e||new vO(e,{triggerEl:t})})}const jv={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:()=>{},onPrev:()=>{},onChange:()=>{}};class yO{constructor(e=[],r={}){this._items=e,this._options={...jv,...r,indicators:{...jv.indicators,...r.indicators}},this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._interval=null,this._init()}_init(){this._items.map(e=>{e.el.classList.add("absolute","inset-0","transition-all","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map((e,r)=>{e.el.addEventListener("click",()=>{this.slideTo(r)})})}getItem(e){return this._items[e]}slideTo(e){const r=this._items[e],n={left:r.position===0?this._items[this._items.length-1]:this._items[r.position-1],middle:r,right:r.position===this._items.length-1?this._items[0]:this._items[r.position+1]};this._rotate(n),this._setActiveItem(r.position),this._interval&&(this.pause(),this.cycle()),this._options.onChange(this)}next(){const e=this._getActiveItem();let r=null;e.position===this._items.length-1?r=this._items[0]:r=this._items[e.position+1],this.slideTo(r.position),this._options.onNext(this)}prev(){const e=this._getActiveItem();let r=null;e.position===0?r=this._items[this._items.length-1]:r=this._items[e.position-1],this.slideTo(r.position),this._options.onPrev(this)}_rotate(e){this._items.map(r=>{r.el.classList.add("hidden")}),e.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.left.el.classList.add("-translate-x-full","z-10"),e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-20"),e.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.right.el.classList.add("translate-x-full","z-10")}cycle(){this._interval=setInterval(()=>{this.next()},this._options.interval)}pause(){clearInterval(this._interval)}_getActiveItem(){return this._activeItem}_setActiveItem(e){this._activeItem=this._items[e],this._indicators.length&&(this._indicators.map(r=>{r.el.setAttribute("aria-current","false"),r.el.classList.remove(...this._options.indicators.activeClasses.split(" ")),r.el.classList.add(...this._options.indicators.inactiveClasses.split(" "))}),this._indicators[e].el.classList.add(...this._options.indicators.activeClasses.split(" ")),this._indicators[e].el.classList.remove(...this._options.indicators.inactiveClasses.split(" ")),this._indicators[e].el.setAttribute("aria-current","true"))}}window.Carousel=yO;function uQ(){document.querySelectorAll("[data-carousel]").forEach(t=>{const e=t.getAttribute("data-carousel-interval"),r=t.getAttribute("data-carousel")==="slide",n=[];let i=0;t.querySelectorAll("[data-carousel-item]").length&&[...t.querySelectorAll("[data-carousel-item]")].map((c,u)=>{n.push({position:u,el:c}),c.getAttribute("data-carousel-item")==="active"&&(i=u)});const a=[];t.querySelectorAll("[data-carousel-slide-to]").length&&[...t.querySelectorAll("[data-carousel-slide-to]")].map(c=>{a.push({position:c.getAttribute("data-carousel-slide-to"),el:c})});const s=new yO(n,{defaultPosition:i,indicators:{items:a},interval:e||jv.interval});r&&s.cycle();const o=t.querySelector("[data-carousel-next]"),l=t.querySelector("[data-carousel-prev]");o&&o.addEventListener("click",()=>{s.next()}),l&&l.addEventListener("click",()=>{s.prev()})})}const z1={triggerEl:null,transition:"transition-opacity",duration:300,timing:"ease-out",onHide:()=>{}};class bO{constructor(e=null,r={}){this._targetEl=e,this._triggerEl=r.triggerEl||z1.triggerEl,this._options={...z1,...r},this._init()}_init(){this._triggerEl&&this._triggerEl.addEventListener("click",()=>{this.hide()})}hide(){this._targetEl.classList.add(this._options.transition,`duration-${this._options.duration}`,this._options.timing,"opacity-0"),setTimeout(()=>{this._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)}}window.Dismiss=bO;function dQ(){document.querySelectorAll("[data-dismiss-target]").forEach(t=>{const e=document.querySelector(t.getAttribute("data-dismiss-target"));new bO(e,{triggerEl:t})})}var qr="top",yi="bottom",bi="right",Gr="left",$b="auto",Hu=[qr,yi,bi,Gr],Yo="start",nu="end",hQ="clippingParents",wO="viewport",Ul="popper",fQ="reference",$1=Hu.reduce(function(t,e){return t.concat([e+"-"+Yo,e+"-"+nu])},[]),_O=[].concat(Hu,[$b]).reduce(function(t,e){return t.concat([e,e+"-"+Yo,e+"-"+nu])},[]),pQ="beforeRead",gQ="read",mQ="afterRead",vQ="beforeMain",yQ="main",bQ="afterMain",wQ="beforeWrite",_Q="write",xQ="afterWrite",TQ=[pQ,gQ,mQ,vQ,yQ,bQ,wQ,_Q,xQ];function ln(t){return t?(t.nodeName||"").toLowerCase():null}function wi(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Cs(t){var e=wi(t).Element;return t instanceof e||t instanceof Element}function mi(t){var e=wi(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Vb(t){if(typeof ShadowRoot=="undefined")return!1;var e=wi(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function SQ(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},a=e.elements[r];!mi(a)||!ln(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var o=i[s];o===!1?a.removeAttribute(s):a.setAttribute(s,o===!0?"":o)}))})}function EQ(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),o=s.reduce(function(l,c){return l[c]="",l},{});!mi(i)||!ln(i)||(Object.assign(i.style,o),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}var kQ={name:"applyStyles",enabled:!0,phase:"write",fn:SQ,effect:EQ,requires:["computeStyles"]};function rn(t){return t.split("-")[0]}var vs=Math.max,wf=Math.min,Xo=Math.round;function Fv(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function xO(){return!/^((?!chrome|android).)*safari/i.test(Fv())}function Qo(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,a=1;e&&mi(t)&&(i=t.offsetWidth>0&&Xo(n.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Xo(n.height)/t.offsetHeight||1);var s=Cs(t)?wi(t):window,o=s.visualViewport,l=!xO()&&r,c=(n.left+(l&&o?o.offsetLeft:0))/i,u=(n.top+(l&&o?o.offsetTop:0))/a,d=n.width/i,h=n.height/a;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function Hb(t){var e=Qo(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function TO(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Vb(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Bn(t){return wi(t).getComputedStyle(t)}function CQ(t){return["table","td","th"].indexOf(ln(t))>=0}function Oa(t){return((Cs(t)?t.ownerDocument:t.document)||window.document).documentElement}function Bp(t){return ln(t)==="html"?t:t.assignedSlot||t.parentNode||(Vb(t)?t.host:null)||Oa(t)}function V1(t){return!mi(t)||Bn(t).position==="fixed"?null:t.offsetParent}function AQ(t){var e=/firefox/i.test(Fv()),r=/Trident/i.test(Fv());if(r&&mi(t)){var n=Bn(t);if(n.position==="fixed")return null}var i=Bp(t);for(Vb(i)&&(i=i.host);mi(i)&&["html","body"].indexOf(ln(i))<0;){var a=Bn(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function qu(t){for(var e=wi(t),r=V1(t);r&&CQ(r)&&Bn(r).position==="static";)r=V1(r);return r&&(ln(r)==="html"||ln(r)==="body"&&Bn(r).position==="static")?e:r||AQ(t)||e}function qb(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function bc(t,e,r){return vs(t,wf(e,r))}function IQ(t,e,r){var n=bc(t,e,r);return n>r?r:n}function SO(){return{top:0,right:0,bottom:0,left:0}}function EO(t){return Object.assign({},SO(),t)}function kO(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var PQ=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,EO(typeof e!="number"?e:kO(e,Hu))};function OQ(t){var e,r=t.state,n=t.name,i=t.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,o=rn(r.placement),l=qb(o),c=[Gr,bi].indexOf(o)>=0,u=c?"height":"width";if(!(!a||!s)){var d=PQ(i.padding,r),h=Hb(a),p=l==="y"?qr:Gr,b=l==="y"?yi:bi,w=r.rects.reference[u]+r.rects.reference[l]-s[l]-r.rects.popper[u],v=s[l]-r.rects.reference[l],T=qu(a),E=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,A=w/2-v/2,k=d[p],I=E-h[u]-d[b],F=E/2-h[u]/2+A,j=bc(k,F,I),D=l;r.modifiersData[n]=(e={},e[D]=j,e.centerOffset=j-F,e)}}function DQ(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!TO(e.elements.popper,i)||(e.elements.arrow=i))}var LQ={name:"arrow",enabled:!0,phase:"main",fn:OQ,effect:DQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Jo(t){return t.split("-")[1]}var RQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function MQ(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:Xo(e*i)/i||0,y:Xo(r*i)/i||0}}function H1(t){var e,r=t.popper,n=t.popperRect,i=t.placement,a=t.variation,s=t.offsets,o=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=s.x,p=h===void 0?0:h,b=s.y,w=b===void 0?0:b,v=typeof u=="function"?u({x:p,y:w}):{x:p,y:w};p=v.x,w=v.y;var T=s.hasOwnProperty("x"),E=s.hasOwnProperty("y"),A=Gr,k=qr,I=window;if(c){var F=qu(r),j="clientHeight",D="clientWidth";if(F===wi(r)&&(F=Oa(r),Bn(F).position!=="static"&&o==="absolute"&&(j="scrollHeight",D="scrollWidth")),F=F,i===qr||(i===Gr||i===bi)&&a===nu){k=yi;var z=d&&F===I&&I.visualViewport?I.visualViewport.height:F[j];w-=z-n.height,w*=l?1:-1}if(i===Gr||(i===qr||i===yi)&&a===nu){A=bi;var M=d&&F===I&&I.visualViewport?I.visualViewport.width:F[D];p-=M-n.width,p*=l?1:-1}}var U=Object.assign({position:o},c&&RQ),P=u===!0?MQ({x:p,y:w}):{x:p,y:w};if(p=P.x,w=P.y,l){var q;return Object.assign({},U,(q={},q[k]=E?"0":"",q[A]=T?"0":"",q.transform=(I.devicePixelRatio||1)<=1?"translate("+p+"px, "+w+"px)":"translate3d("+p+"px, "+w+"px, 0)",q))}return Object.assign({},U,(e={},e[k]=E?w+"px":"",e[A]=T?p+"px":"",e.transform="",e))}function NQ(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,o=r.roundOffsets,l=o===void 0?!0:o,c={placement:rn(e.placement),variation:Jo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,H1(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,H1(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var jQ={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:NQ,data:{}},Hd={passive:!0};function FQ(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,o=s===void 0?!0:s,l=wi(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",r.update,Hd)}),o&&l.addEventListener("resize",r.update,Hd),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",r.update,Hd)}),o&&l.removeEventListener("resize",r.update,Hd)}}var BQ={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:FQ,data:{}},UQ={left:"right",right:"left",bottom:"top",top:"bottom"};function hh(t){return t.replace(/left|right|bottom|top/g,function(e){return UQ[e]})}var zQ={start:"end",end:"start"};function q1(t){return t.replace(/start|end/g,function(e){return zQ[e]})}function Gb(t){var e=wi(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Wb(t){return Qo(Oa(t)).left+Gb(t).scrollLeft}function $Q(t,e){var r=wi(t),n=Oa(t),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;var c=xO();(c||!c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o+Wb(t),y:l}}function VQ(t){var e,r=Oa(t),n=Gb(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=vs(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=vs(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-n.scrollLeft+Wb(t),l=-n.scrollTop;return Bn(i||r).direction==="rtl"&&(o+=vs(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function Kb(t){var e=Bn(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function CO(t){return["html","body","#document"].indexOf(ln(t))>=0?t.ownerDocument.body:mi(t)&&Kb(t)?t:CO(Bp(t))}function wc(t,e){var r;e===void 0&&(e=[]);var n=CO(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),a=wi(n),s=i?[a].concat(a.visualViewport||[],Kb(n)?n:[]):n,o=e.concat(s);return i?o:o.concat(wc(Bp(s)))}function Bv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function HQ(t,e){var r=Qo(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function G1(t,e,r){return e===wO?Bv($Q(t,r)):Cs(e)?HQ(e,r):Bv(VQ(Oa(t)))}function qQ(t){var e=wc(Bp(t)),r=["absolute","fixed"].indexOf(Bn(t).position)>=0,n=r&&mi(t)?qu(t):t;return Cs(n)?e.filter(function(i){return Cs(i)&&TO(i,n)&&ln(i)!=="body"}):[]}function GQ(t,e,r,n){var i=e==="clippingParents"?qQ(t):[].concat(e),a=[].concat(i,[r]),s=a[0],o=a.reduce(function(l,c){var u=G1(t,c,n);return l.top=vs(u.top,l.top),l.right=wf(u.right,l.right),l.bottom=wf(u.bottom,l.bottom),l.left=vs(u.left,l.left),l},G1(t,s,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function AO(t){var e=t.reference,r=t.element,n=t.placement,i=n?rn(n):null,a=n?Jo(n):null,s=e.x+e.width/2-r.width/2,o=e.y+e.height/2-r.height/2,l;switch(i){case qr:l={x:s,y:e.y-r.height};break;case yi:l={x:s,y:e.y+e.height};break;case bi:l={x:e.x+e.width,y:o};break;case Gr:l={x:e.x-r.width,y:o};break;default:l={x:e.x,y:e.y}}var c=i?qb(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(a){case Yo:l[c]=l[c]-(e[u]/2-r[u]/2);break;case nu:l[c]=l[c]+(e[u]/2-r[u]/2);break}}return l}function au(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,a=r.strategy,s=a===void 0?t.strategy:a,o=r.boundary,l=o===void 0?hQ:o,c=r.rootBoundary,u=c===void 0?wO:c,d=r.elementContext,h=d===void 0?Ul:d,p=r.altBoundary,b=p===void 0?!1:p,w=r.padding,v=w===void 0?0:w,T=EO(typeof v!="number"?v:kO(v,Hu)),E=h===Ul?fQ:Ul,A=t.rects.popper,k=t.elements[b?E:h],I=GQ(Cs(k)?k:k.contextElement||Oa(t.elements.popper),l,u,s),F=Qo(t.elements.reference),j=AO({reference:F,element:A,strategy:"absolute",placement:i}),D=Bv(Object.assign({},A,j)),z=h===Ul?D:F,M={top:I.top-z.top+T.top,bottom:z.bottom-I.bottom+T.bottom,left:I.left-z.left+T.left,right:z.right-I.right+T.right},U=t.modifiersData.offset;if(h===Ul&&U){var P=U[i];Object.keys(M).forEach(function(q){var X=[bi,yi].indexOf(q)>=0?1:-1,fe=[qr,yi].indexOf(q)>=0?"y":"x";M[q]+=P[fe]*X})}return M}function WQ(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,o=r.flipVariations,l=r.allowedAutoPlacements,c=l===void 0?_O:l,u=Jo(n),d=u?o?$1:$1.filter(function(b){return Jo(b)===u}):Hu,h=d.filter(function(b){return c.indexOf(b)>=0});h.length===0&&(h=d);var p=h.reduce(function(b,w){return b[w]=au(t,{placement:w,boundary:i,rootBoundary:a,padding:s})[rn(w)],b},{});return Object.keys(p).sort(function(b,w){return p[b]-p[w]})}function KQ(t){if(rn(t)===$b)return[];var e=hh(t);return[q1(t),e,q1(e)]}function YQ(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!0:s,l=r.fallbackPlacements,c=r.padding,u=r.boundary,d=r.rootBoundary,h=r.altBoundary,p=r.flipVariations,b=p===void 0?!0:p,w=r.allowedAutoPlacements,v=e.options.placement,T=rn(v),E=T===v,A=l||(E||!b?[hh(v)]:KQ(v)),k=[v].concat(A).reduce(function(Ht,K){return Ht.concat(rn(K)===$b?WQ(e,{placement:K,boundary:u,rootBoundary:d,padding:c,flipVariations:b,allowedAutoPlacements:w}):K)},[]),I=e.rects.reference,F=e.rects.popper,j=new Map,D=!0,z=k[0],M=0;M<k.length;M++){var U=k[M],P=rn(U),q=Jo(U)===Yo,X=[qr,yi].indexOf(P)>=0,fe=X?"width":"height",te=au(e,{placement:U,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),ae=X?q?bi:Gr:q?yi:qr;I[fe]>F[fe]&&(ae=hh(ae));var oe=hh(ae),Re=[];if(a&&Re.push(te[P]<=0),o&&Re.push(te[ae]<=0,te[oe]<=0),Re.every(function(Ht){return Ht})){z=U,D=!1;break}j.set(U,Re)}if(D)for(var Le=b?3:1,ft=function(K){var ve=k.find(function(ce){var be=j.get(ce);if(be)return be.slice(0,K).every(function(Ye){return Ye})});if(ve)return z=ve,"break"},it=Le;it>0;it--){var pt=ft(it);if(pt==="break")break}e.placement!==z&&(e.modifiersData[n]._skip=!0,e.placement=z,e.reset=!0)}}var XQ={name:"flip",enabled:!0,phase:"main",fn:YQ,requiresIfExists:["offset"],data:{_skip:!1}};function W1(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function K1(t){return[qr,bi,yi,Gr].some(function(e){return t[e]>=0})}function QQ(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=au(e,{elementContext:"reference"}),o=au(e,{altBoundary:!0}),l=W1(s,n),c=W1(o,i,a),u=K1(l),d=K1(c);e.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var JQ={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:QQ};function ZQ(t,e,r){var n=rn(t),i=[Gr,qr].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=a[0],o=a[1];return s=s||0,o=(o||0)*i,[Gr,bi].indexOf(n)>=0?{x:o,y:s}:{x:s,y:o}}function eJ(t){var e=t.state,r=t.options,n=t.name,i=r.offset,a=i===void 0?[0,0]:i,s=_O.reduce(function(u,d){return u[d]=ZQ(d,e.rects,a),u},{}),o=s[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=s}var tJ={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:eJ};function rJ(t){var e=t.state,r=t.name;e.modifiersData[r]=AO({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var iJ={name:"popperOffsets",enabled:!0,phase:"read",fn:rJ,data:{}};function nJ(t){return t==="x"?"y":"x"}function aJ(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,o=s===void 0?!1:s,l=r.boundary,c=r.rootBoundary,u=r.altBoundary,d=r.padding,h=r.tether,p=h===void 0?!0:h,b=r.tetherOffset,w=b===void 0?0:b,v=au(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),T=rn(e.placement),E=Jo(e.placement),A=!E,k=qb(T),I=nJ(k),F=e.modifiersData.popperOffsets,j=e.rects.reference,D=e.rects.popper,z=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,M=typeof z=="number"?{mainAxis:z,altAxis:z}:Object.assign({mainAxis:0,altAxis:0},z),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(!!F){if(a){var q,X=k==="y"?qr:Gr,fe=k==="y"?yi:bi,te=k==="y"?"height":"width",ae=F[k],oe=ae+v[X],Re=ae-v[fe],Le=p?-D[te]/2:0,ft=E===Yo?j[te]:D[te],it=E===Yo?-D[te]:-j[te],pt=e.elements.arrow,Ht=p&&pt?Hb(pt):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:SO(),ve=K[X],ce=K[fe],be=bc(0,j[te],Ht[te]),Ye=A?j[te]/2-Le-be-ve-M.mainAxis:ft-be-ve-M.mainAxis,st=A?-j[te]/2+Le+be+ce+M.mainAxis:it+be+ce+M.mainAxis,Be=e.elements.arrow&&qu(e.elements.arrow),Ue=Be?k==="y"?Be.clientTop||0:Be.clientLeft||0:0,R=(q=U==null?void 0:U[k])!=null?q:0,V=ae+Ye-R-Ue,G=ae+st-R,Q=bc(p?wf(oe,V):oe,ae,p?vs(Re,G):Re);F[k]=Q,P[k]=Q-ae}if(o){var Y,ue=k==="x"?qr:Gr,ee=k==="x"?yi:bi,ie=F[I],de=I==="y"?"height":"width",re=ie+v[ue],Se=ie-v[ee],_e=[qr,Gr].indexOf(T)!==-1,Ee=(Y=U==null?void 0:U[I])!=null?Y:0,Pe=_e?re:ie-j[de]-D[de]-Ee+M.altAxis,We=_e?ie+j[de]+D[de]-Ee-M.altAxis:Se,rt=p&&_e?IQ(Pe,ie,We):bc(p?Pe:re,ie,p?We:Se);F[I]=rt,P[I]=rt-ie}e.modifiersData[n]=P}}var sJ={name:"preventOverflow",enabled:!0,phase:"main",fn:aJ,requiresIfExists:["offset"]};function oJ(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function lJ(t){return t===wi(t)||!mi(t)?Gb(t):oJ(t)}function cJ(t){var e=t.getBoundingClientRect(),r=Xo(e.width)/t.offsetWidth||1,n=Xo(e.height)/t.offsetHeight||1;return r!==1||n!==1}function uJ(t,e,r){r===void 0&&(r=!1);var n=mi(e),i=mi(e)&&cJ(e),a=Oa(e),s=Qo(t,i,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((ln(e)!=="body"||Kb(a))&&(o=lJ(e)),mi(e)?(l=Qo(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=Wb(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function dJ(t){var e=new Map,r=new Set,n=[];t.forEach(function(a){e.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!r.has(o)){var l=e.get(o);l&&i(l)}}),n.push(a)}return t.forEach(function(a){r.has(a.name)||i(a)}),n}function hJ(t){var e=dJ(t);return TQ.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function fJ(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function pJ(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var Y1={placement:"bottom",modifiers:[],strategy:"absolute"};function X1(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function gJ(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,a=i===void 0?Y1:i;return function(o,l,c){c===void 0&&(c=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Y1,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(T){var E=typeof T=="function"?T(u.options):T;w(),u.options=Object.assign({},a,u.options,E),u.scrollParents={reference:Cs(o)?wc(o):o.contextElement?wc(o.contextElement):[],popper:wc(l)};var A=hJ(pJ([].concat(n,u.options.modifiers)));return u.orderedModifiers=A.filter(function(k){return k.enabled}),b(),p.update()},forceUpdate:function(){if(!h){var T=u.elements,E=T.reference,A=T.popper;if(!!X1(E,A)){u.rects={reference:uJ(E,qu(A),u.options.strategy==="fixed"),popper:Hb(A)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var k=0;k<u.orderedModifiers.length;k++){if(u.reset===!0){u.reset=!1,k=-1;continue}var I=u.orderedModifiers[k],F=I.fn,j=I.options,D=j===void 0?{}:j,z=I.name;typeof F=="function"&&(u=F({state:u,options:D,name:z,instance:p})||u)}}}},update:fJ(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){w(),h=!0}};if(!X1(o,l))return p;p.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function b(){u.orderedModifiers.forEach(function(v){var T=v.name,E=v.options,A=E===void 0?{}:E,k=v.effect;if(typeof k=="function"){var I=k({state:u,name:T,instance:p,options:A}),F=function(){};d.push(I||F)}})}function w(){d.forEach(function(v){return v()}),d=[]}return p}}var mJ=[BQ,iJ,jQ,kQ,tJ,XQ,sJ,LQ,JQ],Yb=gJ({defaultModifiers:mJ});const IO={placement:"bottom",triggerType:"click",onShow:()=>{},onHide:()=>{}};class PO{constructor(e=null,r=null,n={}){this._targetEl=e,this._triggerEl=r,this._options={...IO,...n},this._popperInstance=this._createPopperInstace(),this._visible=!1,this._init()}_init(){this._triggerEl&&this._triggerEl.addEventListener("click",()=>{this.toggle()})}_createPopperInstace(){return Yb(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,10]}}]})}_handleClickOutside(e,r){const n=e.target;n!==r&&!r.contains(n)&&!this._triggerEl.contains(n)&&this._visible&&this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)}toggle(){this._visible?(this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)):this.show()}show(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!0}]})),document.body.addEventListener("click",e=>{this._handleClickOutside(e,this._targetEl)},!0),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)}hide(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!1}]})),this._visible=!1,this._options.onHide(this)}}window.Dropdown=PO;function vJ(){document.querySelectorAll("[data-dropdown-toggle]").forEach(t=>{const e=document.getElementById(t.getAttribute("data-dropdown-toggle")),r=t.getAttribute("data-dropdown-placement");new PO(e,t,{placement:r||IO.placement})})}const Uv={placement:"center",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",backdrop:"dynamic",onHide:()=>{},onShow:()=>{},onToggle:()=>{}};class OO{constructor(e=null,r={}){this._targetEl=e,this._options={...Uv,...r},this._isHidden=!0,this._backdropEl=null,this._init()}_init(){this._targetEl&&(this._getPlacementClasses().map(e=>{this._targetEl.classList.add(e)}),this._targetEl.addEventListener("click",e=>{this._handleOutsideClick(e.target)}),this._targetEl.addEventListener("keydown",e=>{e.key==="Escape"&&this.hide()}))}_createBackdrop(){if(this._isHidden){const e=document.createElement("div");e.setAttribute("modal-backdrop",""),e.classList.add(...this._options.backdropClasses.split(" ")),document.querySelector("body").append(e),this._backdropEl=e}}_destroyBackdropEl(){this._isHidden||document.querySelector("[modal-backdrop]").remove()}_handleOutsideClick(e){this._options.backdrop==="dynamic"&&(e===this._targetEl||e===this._backdropEl)&&this.hide()}_getPlacementClasses(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}}toggle(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)}show(){this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,document.body.classList.add("overflow-hidden"),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.hide()}),this._options.onShow(this)}hide(){this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.onHide(this)}isHidden(){return this._isHidden}}window.Modal=OO;const Q1=(t,e)=>e.some(r=>r.id===t)?e.find(r=>r.id===t):!1;function yJ(){let t=[];document.querySelectorAll("[data-modal-toggle]").forEach(e=>{const r=e.getAttribute("data-modal-toggle"),n=document.getElementById(r),i=n.getAttribute("data-modal-placement"),a=n.getAttribute("data-modal-backdrop");n&&!n.hasAttribute("aria-hidden")&&!n.hasAttribute("aria-modal")&&n.setAttribute("aria-hidden","true");let s=null;Q1(r,t)?(s=Q1(r,t),s=s.object):(s=new OO(n,{placement:i||Uv.placement,backdrop:a||Uv.backdrop}),t.push({id:r,object:s})),n.hasAttribute("data-modal-show")&&n.getAttribute("data-modal-show")==="true"&&s.show(),e.addEventListener("click",()=>{s.toggle()})})}const ro={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-30",onShow:()=>{},onHide:()=>{},onToggle:()=>{}};class DO{constructor(e=null,r){this._targetEl=e,this._options={...ro,...r},this._visible=!1,this._init()}_init(){this._targetEl&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform")),this._getPlacementClasses(this._options.placement).base.map(e=>{this._targetEl.classList.add(e)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isVisible()&&this.hide()})}isVisible(){return this._visible}hide(){this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(e=>{this._targetEl.classList.remove(e)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(e=>{this._targetEl.classList.add(e)})):(this._getPlacementClasses(this._options.placement).active.map(e=>{this._targetEl.classList.remove(e)}),this._getPlacementClasses(this._options.placement).inactive.map(e=>{this._targetEl.classList.add(e)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)}show(){this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(e=>{this._targetEl.classList.add(e)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(e=>{this._targetEl.classList.remove(e)})):(this._getPlacementClasses(this._options.placement).active.map(e=>{this._targetEl.classList.add(e)}),this._getPlacementClasses(this._options.placement).inactive.map(e=>{this._targetEl.classList.remove(e)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)}toggle(){this.isVisible()?this.hide():this.show()}_createBackdrop(){if(!this._visible){const e=document.createElement("div");e.setAttribute("drawer-backdrop",""),e.classList.add(...this._options.backdropClasses.split(" ")),document.querySelector("body").append(e),e.addEventListener("click",()=>{this.hide()})}}_destroyBackdropEl(){this._visible&&document.querySelector("[drawer-backdrop]").remove()}_getPlacementClasses(e){switch(e){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}}}window.Drawer=DO;const zl=(t,e)=>e.some(r=>r.id===t)?e.find(r=>r.id===t):!1;function bJ(){let t=[];document.querySelectorAll("[data-drawer-target]").forEach(e=>{const r=document.getElementById(e.getAttribute("data-drawer-target")),n=r.id,i=e.getAttribute("data-drawer-placement"),a=e.getAttribute("data-drawer-body-scrolling"),s=e.getAttribute("data-drawer-backdrop"),o=e.getAttribute("data-drawer-edge"),l=e.getAttribute("data-drawer-edge-offset");let c=null;zl(n,t)?(c=zl(n,t),c=c.object):(c=new DO(r,{placement:i||ro.placement,bodyScrolling:a?a==="true":ro.bodyScrolling,backdrop:s?s==="true":ro.backdrop,edge:o?o==="true":ro.edge,edgeOffset:l||ro.edgeOffset}),t.push({id:n,object:c}))}),document.querySelectorAll("[data-drawer-toggle]").forEach(e=>{const n=document.getElementById(e.getAttribute("data-drawer-toggle")).id,i=zl(n,t);e.addEventListener("click",()=>{i.object.isVisible()?i.object.hide():i.object.show()})}),document.querySelectorAll("[data-drawer-dismiss]").forEach(e=>{const n=document.getElementById(e.getAttribute("data-drawer-dismiss")).id,i=zl(n,t);e.addEventListener("click",()=>{i.object.hide()})}),document.querySelectorAll("[data-drawer-show]").forEach(e=>{const n=document.getElementById(e.getAttribute("data-drawer-show")).id,i=zl(n,t);e.addEventListener("click",()=>{i.object.show()})})}const wJ={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:()=>{}};class LO{constructor(e=[],r={}){this._items=e,this._activeTab=r?this.getTab(r.defaultTabId):null,this._options={...wJ,...r},this._init()}_init(){this._items.length&&(this._activeTab||this._setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(e=>{e.triggerEl.addEventListener("click",()=>{this.show(e.id)})}))}getActiveTab(){return this._activeTab}_setActiveTab(e){this._activeTab=e}getTab(e){return this._items.filter(r=>r.id===e)[0]}show(e,r=!1){const n=this.getTab(e);n===this._activeTab&&!r||(this._items.map(i=>{i!==n&&(i.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),i.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-selected",!1))}),n.triggerEl.classList.add(...this._options.activeClasses.split(" ")),n.triggerEl.classList.remove(...this._options.inactiveClasses.split(" ")),n.triggerEl.setAttribute("aria-selected",!0),n.targetEl.classList.remove("hidden"),this._setActiveTab(n),this._options.onShow(this,n))}}window.Tabs=LO;function _J(){document.querySelectorAll("[data-tabs-toggle]").forEach(t=>{const e=[];let r=null;t.querySelectorAll('[role="tab"]').forEach(n=>{const i=n.getAttribute("aria-selected")==="true",a={id:n.getAttribute("data-tabs-target"),triggerEl:n,targetEl:document.querySelector(n.getAttribute("data-tabs-target"))};e.push(a),i&&(r=a.id)}),new LO(e,{defaultTabId:r})})}const zv={placement:"top",triggerType:"hover",onShow:()=>{},onHide:()=>{}};class RO{constructor(e=null,r=null,n={}){this._targetEl=e,this._triggerEl=r,this._options={...zv,...n},this._popperInstance=this._createPopperInstace(),this._init()}_init(){if(this._triggerEl){const e=this._getTriggerEvents();e.showEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{this.show()})}),e.hideEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{this.hide()})})}}_createPopperInstace(){return Yb(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}show(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!0}]})),this._popperInstance.update(),this._options.onShow(this)}hide(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!1}]})),this._options.onHide(this)}}window.Tooltip=RO;function xJ(){document.querySelectorAll("[data-tooltip-target]").forEach(t=>{const e=document.getElementById(t.getAttribute("data-tooltip-target")),r=t.getAttribute("data-tooltip-trigger"),n=t.getAttribute("data-tooltip-placement");new RO(e,t,{placement:n||zv.placement,triggerType:r||zv.triggerType})})}const fh={placement:"top",offset:10,triggerType:"hover",onShow:()=>{},onHide:()=>{}};class MO{constructor(e=null,r=null,n={}){this._targetEl=e,this._triggerEl=r,this._options={...fh,...n},this._popperInstance=this._createPopperInstace(),this._init()}_init(){if(this._triggerEl){const e=this._getTriggerEvents();e.showEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{this.show()}),this._targetEl.addEventListener(r,()=>{this.show()})}),e.hideEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{setTimeout(()=>{this._targetEl.matches(":hover")||this.hide()},100)}),this._targetEl.addEventListener(r,()=>{setTimeout(()=>{this._triggerEl.matches(":hover")||this.hide()},100)})})}}_createPopperInstace(){return Yb(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}show(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!0}]})),this._popperInstance.update(),this._options.onShow(this)}hide(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(e=>({...e,modifiers:[...e.modifiers,{name:"eventListeners",enabled:!1}]})),this._options.onHide(this)}}window.Popover=MO;function TJ(){document.querySelectorAll("[data-popover-target]").forEach(t=>{const e=document.getElementById(t.getAttribute("data-popover-target")),r=t.getAttribute("data-popover-trigger"),n=t.getAttribute("data-popover-placement"),i=t.getAttribute("data-popover-offset");new MO(e,t,{placement:n||fh.placement,offset:i?parseInt(i):fh.offset,triggerType:r||fh.triggerType})})}const NO={triggerType:"hover",onShow:()=>{},onHide:()=>{},onToggle:()=>{}};class jO{constructor(e=null,r=null,n=null,i){this._parentEl=e,this._triggerEl=r,this._targetEl=n,this._options={...NO,...i},this._visible=!1,this._init()}_init(){if(this._triggerEl){const e=this._getTriggerEvents();e.showEvents.forEach(r=>{this._triggerEl.addEventListener(r,()=>{this.show()}),this._targetEl.addEventListener(r,()=>{this.show()})}),e.hideEvents.forEach(r=>{this._parentEl.addEventListener(r,()=>{setTimeout(()=>{this._parentEl.matches(":hover")||this.hide()},100)})})}}hide(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)}show(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)}toggle(){this._visible?this.hide():this.show()}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}}window.Dial=jO;function SJ(){document.querySelectorAll("[data-dial-init]").forEach(t=>{const e=t.querySelector("[data-dial-toggle]"),r=document.getElementById(e.getAttribute("data-dial-toggle")),n=e.getAttribute("data-dial-trigger");new jO(t,e,r,{triggerType:n||NO.triggerType})})}class EJ{constructor(e,r=[]){this._eventType=e,this._eventFunctions=r}init(){this._eventFunctions.forEach(e=>{window.addEventListener(this._eventType,e)})}}const kJ=new EJ("load",[lQ,cQ,uQ,dQ,vJ,yJ,bJ,_J,xJ,TJ,SJ]);kJ.init();const Xb=PM(q$);Xb.use(GX);Xb.use(oQ);Xb.mount("#app");export{mE as A,ta as B,Q4 as C,Oz as D,ka as E,Ct as F,lt as G,CJ as H,kc as I,jJ as J,ga as K,FJ as L,MJ as M,NJ as N,OJ as O,nl as P,RJ as Q,Pc as R,IJ as S,_4 as T,PJ as U,AJ as V,DJ as W,LJ as X,lX as Y,h0 as _,ou as a,he as b,Xt as c,mt as d,Is as e,wR as f,BJ as g,xe as h,Je as i,ti as j,va as k,He as l,YN as m,It as n,Xe as o,Wi as p,Oc as q,sa as r,po as s,gn as t,Et as u,Lf as v,yR as w,fi as x,As as y,XN as z};
